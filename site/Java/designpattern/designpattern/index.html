
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://XZ1949-10.github.io/Java/designpattern/designpattern/">
      
      
        <link rel="prev" href="../../SpringSecurity/SpringSecurity/">
      
      
        <link rel="next" href="../../../Python/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>设计模式 - 个人主页</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../mkdocs/css/no-footer.css">
    
      <link rel="stylesheet" href="../../../mkdocs/css/unordered-list-symbols.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#java" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="个人主页" class="md-header__button md-logo" aria-label="个人主页" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            个人主页
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              设计模式
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="切换至夜间模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换至夜间模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="切换至日间模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至日间模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/XZ1949-10.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    XZ1949-10.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../C%2B%2B/" class="md-tabs__link">
          
  
    
  
  C/C++

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  Java

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Python/" class="md-tabs__link">
          
  
    
  
  Python

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ROS2%E5%AD%A6%E4%B9%A0/" class="md-tabs__link">
          
  
    
  
  ROS2学习

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blogs/" class="md-tabs__link">
          
  
    
  
  博客

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../about/" class="md-tabs__link">
        
  
    
  
  关于

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="个人主页" class="md-nav__button md-logo" aria-label="个人主页" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    个人主页
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/XZ1949-10.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    XZ1949-10.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../C%2B%2B/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    C/C++
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            C/C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../C%2B%2B/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lambda表达式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../C%2B%2B/C%2B%2B%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C/C++回调函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../C%2B%2B/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多维数组的创建
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Java
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Java
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spring/Spring5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spring
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SpringMVC/SpringMVCNotes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringMVC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mybatis/MyBatis.pdf" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MyBatis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mybatis/MyBatisPlus.pdf" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MyBatisPlus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SpringBoot/SpringBoot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringBoot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SpringSecurity/SpringSecurity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringSecurity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    设计模式
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    设计模式
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      一、什么是设计模式
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      二、设计模式的目的和原则
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二、设计模式的目的和原则">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1、目的
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2、原则
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2、原则">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      1、单一职责原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2、接口隔离原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3、依赖倒转原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4、里氏替换原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5、开闭原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6、迪米特法则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      7、合成复用原则
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      三、设计模式概述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      四、单例设计模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="四、单例设计模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      1、简介
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    <span class="md-ellipsis">
      2、单例设计模式的八种方式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2、单例设计模式的八种方式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      （1）饿汉式（静态常量）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_3" class="md-nav__link">
    <span class="md-ellipsis">
      （2）饿汉式（静态代码块）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      （3）懒汉式（线程不安全）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      （4）懒汉式（线程安全，同步方法）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    <span class="md-ellipsis">
      （5）懒汉式（线程安全，同步代码块）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_1" class="md-nav__link">
    <span class="md-ellipsis">
      （6）双重检查
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7_1" class="md-nav__link">
    <span class="md-ellipsis">
      （7）静态内部类
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      （8）枚举
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      3、单例模式注意事项和细节说明
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      五、工厂模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="五、工厂模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_4" class="md-nav__link">
    <span class="md-ellipsis">
      1、问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_4" class="md-nav__link">
    <span class="md-ellipsis">
      2、简单工厂模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2、简单工厂模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      基本介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      优化上面的实例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_3" class="md-nav__link">
    <span class="md-ellipsis">
      3、工厂方法模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3、工厂方法模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      简单工厂模式的不足
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      简单介绍
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_2" class="md-nav__link">
    <span class="md-ellipsis">
      4、抽象工厂模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4、抽象工厂模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      基本介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      代码示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      六、原型模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、原型模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_5" class="md-nav__link">
    <span class="md-ellipsis">
      1、问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_5" class="md-nav__link">
    <span class="md-ellipsis">
      2、传统方法解决
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      原型模式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      浅拷贝和深拷贝的讨论
    </span>
  </a>
  
    <nav class="md-nav" aria-label="浅拷贝和深拷贝的讨论">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      浅拷贝的介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      深拷贝介绍
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      原型模式的细节
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      七、建造者模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="七、建造者模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      传统方式解决
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      建造者模式介绍
    </span>
  </a>
  
    <nav class="md-nav" aria-label="建造者模式介绍">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      基本介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      具体细节
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      八、设配器模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、设配器模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      基本原理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      类适配器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      对象适配器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      接口适配器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      适配器细节
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      九、桥接模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="九、桥接模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      基本介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      示例代码
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      细节和注意事项
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      常用场景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      十、装饰者模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十、装饰者模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      传统解决方案
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      装饰者模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="装饰者模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      基本原理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      代码示例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      优缺点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      十一、组合模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十一、组合模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      基本介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      注意事项和细节
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      十二、外观模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十二、外观模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      传统方式解决
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      外观模式介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      注意事项和细节
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Python/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/deeplearning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    深度学习
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ROS2%E5%AD%A6%E4%B9%A0/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ROS2学习
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            ROS2学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ROS2%E5%AD%A6%E4%B9%A0/ROS2-Gazebo%E4%BB%BF%E7%9C%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS2-Gazebo仿真
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ROS2%E5%AD%A6%E4%B9%A0/ROS2-rviz2%E6%98%BE%E7%A4%BA%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS2-rviz2显示模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS2-URDF建模
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ROS2%E5%AD%A6%E4%B9%A0/tf2%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tf2坐标变换工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ROS2%E5%AD%A6%E4%B9%A0/ROS2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS2课程资料
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apollo课程资料
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../blogs/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    博客
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            博客
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vue3快速入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../C%2B%2B/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lambda表达式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多维数组的创建
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/solidity%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    solidity基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../C%2B%2B/C%2B%2B%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C/C++回调函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A01%28%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    强化学习基本概念1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A02%28%E4%BB%B7%E5%80%BC%E5%AD%A6%E4%B9%A0%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    强化学习基本概念2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A03%28%E7%AD%96%E7%95%A5%E5%AD%A6%E4%B9%A0%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    强化学习基本概念3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A04%28Actor-Critic%E7%AE%97%E6%B3%95%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    强化学习基本概念4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E8%BF%90%E8%A1%8CDocker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    普通用户权限运行Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker常用命令
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/DWA%E5%B1%80%E9%83%A8%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DWA局部路径规划
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      一、什么是设计模式
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      二、设计模式的目的和原则
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二、设计模式的目的和原则">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1、目的
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2、原则
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2、原则">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      1、单一职责原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2、接口隔离原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3、依赖倒转原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4、里氏替换原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5、开闭原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6、迪米特法则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      7、合成复用原则
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      三、设计模式概述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      四、单例设计模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="四、单例设计模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      1、简介
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    <span class="md-ellipsis">
      2、单例设计模式的八种方式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2、单例设计模式的八种方式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      （1）饿汉式（静态常量）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_3" class="md-nav__link">
    <span class="md-ellipsis">
      （2）饿汉式（静态代码块）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      （3）懒汉式（线程不安全）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      （4）懒汉式（线程安全，同步方法）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    <span class="md-ellipsis">
      （5）懒汉式（线程安全，同步代码块）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_1" class="md-nav__link">
    <span class="md-ellipsis">
      （6）双重检查
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7_1" class="md-nav__link">
    <span class="md-ellipsis">
      （7）静态内部类
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      （8）枚举
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      3、单例模式注意事项和细节说明
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      五、工厂模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="五、工厂模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_4" class="md-nav__link">
    <span class="md-ellipsis">
      1、问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_4" class="md-nav__link">
    <span class="md-ellipsis">
      2、简单工厂模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2、简单工厂模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      基本介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      优化上面的实例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_3" class="md-nav__link">
    <span class="md-ellipsis">
      3、工厂方法模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3、工厂方法模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      简单工厂模式的不足
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      简单介绍
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_2" class="md-nav__link">
    <span class="md-ellipsis">
      4、抽象工厂模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4、抽象工厂模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      基本介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      代码示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      六、原型模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="六、原型模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_5" class="md-nav__link">
    <span class="md-ellipsis">
      1、问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_5" class="md-nav__link">
    <span class="md-ellipsis">
      2、传统方法解决
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      原型模式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      浅拷贝和深拷贝的讨论
    </span>
  </a>
  
    <nav class="md-nav" aria-label="浅拷贝和深拷贝的讨论">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      浅拷贝的介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      深拷贝介绍
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      原型模式的细节
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      七、建造者模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="七、建造者模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      传统方式解决
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      建造者模式介绍
    </span>
  </a>
  
    <nav class="md-nav" aria-label="建造者模式介绍">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      基本介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      具体细节
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      八、设配器模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="八、设配器模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      基本原理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      类适配器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      对象适配器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      接口适配器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      适配器细节
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      九、桥接模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="九、桥接模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      基本介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      示例代码
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      细节和注意事项
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      常用场景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      十、装饰者模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十、装饰者模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      传统解决方案
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      装饰者模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="装饰者模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      基本原理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      代码示例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      优缺点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      十一、组合模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十一、组合模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      基本介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      注意事项和细节
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      十二、外观模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="十二、外观模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      问题引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      传统方式解决
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      外观模式介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      注意事项和细节
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="java">设计模式(Java)<a class="headerlink" href="#java" title="Permanent link">&para;</a></h1>
<h2 id="_1">一、什么是设计模式<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>软件工程中，<strong>设计模式</strong>是对软件设计过程中普遍存在（反复出现）的各种问题，所提出的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。设计模式代表了最佳的实践，这个术语是由埃里希·伽玛（Erich Gamma）等人在1990年代从建筑设计领域引入到计算机科学的。</p>
<h2 id="_2">二、设计模式的目的和原则<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<h3 id="1">1、目的<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<p>在编写软件过程中，程序员面临着来自<strong>耦合性，内聚性以及可维护性，可扩展性，重用性，灵活性</strong>等多方面的挑战，设计模式是为了让程序(软件)具有更好的：</p>
<ul>
<li>代码重用性（相同功能的代码，不用多次编写）</li>
<li>可读性（编程规范性，便于其它程序员的阅读和理解）</li>
<li>可扩展性（当需要新增功能时，非常的方便）</li>
<li>可靠性（当我们新增新的功能后，对原来的功能没有影响）</li>
<li>使程序呈现高内聚，低耦合的特性</li>
</ul>
<h3 id="2">2、原则<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<p>设计模式的原则，其实就是程序员在编程时，应当遵守的规则，也就是各种设计模式的基础，下面简单介绍一下常用的七大原则：<strong>单一职责原则、接口隔离原则、依赖倒转（倒置）原则、里氏替换原则、开闭原则、迪米特法则、合成复用原则</strong>。</p>
<h4 id="1_1">1、单一职责原则<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h4>
<p>对类来说，<strong>一个类应该只负责一项原则</strong>，如果类A负责两个不同职责：职责1、职责2。当职责1需求变更而改变A时，可能造成职责2执行错误，所以需要将类A的粒度分解为A1、A2。下面以以交通工具为案例讲解。</p>
<p>（1）案例1
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.singleresponsibility</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SingleResponsibility1</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Vehicle</span><span class="w"> </span><span class="n">vehicle</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Vehicle</span><span class="p">();</span>
<span class="w">        </span><span class="n">vehicle</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="s">&quot;汽车&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">vehicle</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="s">&quot;摩托车&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">vehicle</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="s">&quot;飞机&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// 交通工具类</span>
<span class="kd">class</span> <span class="nc">Vehicle</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">vehicle</span><span class="p">){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">vehicle</span><span class="o">+</span><span class="s">&quot;在公路上运行。。。&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
在这种方式的run方法中，违背了<strong>单一职责原则</strong>，下面是解决方法，根据交通工具运行的方法不同，分解成不同的类。</p>
<p>（2）案例2
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.singleresponsibility</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SingleResponsibility2</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">RoadVehicle</span><span class="w"> </span><span class="n">roadVehicle</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">RoadVehicle</span><span class="p">();</span>
<span class="w">        </span><span class="n">roadVehicle</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="s">&quot;汽车&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">roadVehicle</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="s">&quot;摩托车&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">AirVehicle</span><span class="w"> </span><span class="n">airVehicle</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">AirVehicle</span><span class="p">();</span>
<span class="w">        </span><span class="n">airVehicle</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="s">&quot;飞机&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 单一职责原则，但是改动很大</span>
<span class="kd">class</span> <span class="nc">RoadVehicle</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">vehicle</span><span class="p">){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">vehicle</span><span class="o">+</span><span class="s">&quot;在公路运行&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">AirVehicle</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">vehicle</span><span class="p">){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">vehicle</span><span class="o">+</span><span class="s">&quot;在天空运行&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">WaterVehicle</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">vehicle</span><span class="p">){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">vehicle</span><span class="o">+</span><span class="s">&quot;在水上运行&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
这种方式遵循了单一职责原则，但是这样做的改动很大，即<strong>将类分解</strong>，同时修改了客户端，可以直接修改Vehicle类，改动的代码会比较少。
（3）案例3
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.singleresponsibility</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SingleResponsibility3</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Vehicle2</span><span class="w"> </span><span class="n">vehicle2</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Vehicle2</span><span class="p">();</span>
<span class="w">        </span><span class="n">vehicle2</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="s">&quot;汽车&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">vehicle2</span><span class="p">.</span><span class="na">runWater</span><span class="p">(</span><span class="s">&quot;轮船&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">vehicle2</span><span class="p">.</span><span class="na">runAir</span><span class="p">(</span><span class="s">&quot;飞机&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">Vehicle2</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">vehicle</span><span class="p">){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">vehicle</span><span class="o">+</span><span class="s">&quot;在公路上运行。。。&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">runAir</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">vehicle</span><span class="p">){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">vehicle</span><span class="o">+</span><span class="s">&quot;在天空运行。。。&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">runWater</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">vehicle</span><span class="p">){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">vehicle</span><span class="o">+</span><span class="s">&quot;在水中运行。。。&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span><span class="w">   </span>
</code></pre></div>
这种修改方法没有对原来的类做很大的修改，只是增加了方法，这里虽然<strong>没有在类级别上遵守单一职责原则</strong>，但是<strong>在方法级别上，仍然是遵守单一职责的</strong>。</p>
<p>（4）注意的事项和细节</p>
<ul>
<li>降低类的<strong>复杂度</strong>，一个类只负责一项职责。</li>
<li>提高类的<strong>可读性，可维护性</strong>。</li>
<li>降低变更引起的风险。</li>
<li>通常情况下，我们应当遵守单一职责原则，只要逻辑足够简单，才可以在代码级违反单一职责原则；只有类中方法足够少，可以在方法级别保持单一职责原则。</li>
</ul>
<h4 id="2_1">2、接口隔离原则<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h4>
<p>客户端不应该依赖它不需要的接口，即<strong>一个类对另一个类的依赖应该建立在最小的接口</strong>上。以下图为例。
<img alt="接口隔离原则图片解释" src="../img/%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%991.png" />
图中案例，类A通过接口Interface1依赖类B，类C通过接口Interface1依赖类D，如果接口Interface1对于类A和类C来说不是最小接口，那么类B和类D必须要去实现它们不需要的方法。根据接口隔离原则，我们可以将Interface1<strong>拆分为独立的几个接口</strong>，类A和类C<strong>分别与它们需要的接口建立依赖关系</strong>。下面通过案例来对接口隔离原则进行解释。</p>
<p>（1）案例1</p>
<p>这个案例是最原始的案例，也就是上图中没有使用接口隔离原则的代码。
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.segregation</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Segregation1</span><span class="w"> </span><span class="p">{</span>

<span class="p">}</span>

<span class="kd">interface</span> <span class="nc">Interface1</span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation1</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation2</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation3</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation4</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation5</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">B</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Interface1</span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation1</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;B实现了operation1&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;B实现了operation2&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation3</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;B实现了operation3&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation4</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;B实现了operation4&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation5</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;B实现了operation5&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>

<span class="kd">class</span> <span class="nc">D</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Interface1</span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation1</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;D实现了operation1&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;D实现了operation2&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation3</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;D实现了operation3&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation4</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;D实现了operation4&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation5</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;D实现了operation5&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">A</span><span class="p">{</span>
<span class="w">    </span><span class="c1">// A类通过接口Interface1 依赖B类，但是只会使用到123方法</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend1</span><span class="p">(</span><span class="n">Interface1</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation1</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend2</span><span class="p">(</span><span class="n">Interface1</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation2</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend3</span><span class="p">(</span><span class="n">Interface1</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation3</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">C</span><span class="p">{</span>
<span class="w">    </span><span class="c1">// C类通过接口Interface1 依赖D类，但是只会使用到145方法</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend1</span><span class="p">(</span><span class="n">Interface1</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation1</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend4</span><span class="p">(</span><span class="n">Interface1</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation4</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend5</span><span class="p">(</span><span class="n">Interface1</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation5</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
在这个案例中，没有将Interface1拆分，从而破坏了接口隔离原则，可以将Interface1进行拆分为几个独立的接口，类A和类C分别与它们需要的接口建立依赖关系，也就是采用接口隔离原则，看下一个案例。</p>
<p>（2）案例2</p>
<p>将Interface1拆分为三个接口，如下图。
<img alt="接口隔离原则2" src="../img/%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%992.webp" /></p>
<p>类A根据需要依赖Interface1和2，类C根据需要依赖Interface2和3，案例代码如下：
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.segregation.improve</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Segregation1</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">A</span><span class="p">();</span>
<span class="w">        </span><span class="n">a</span><span class="p">.</span><span class="na">depend1</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">B</span><span class="p">());</span><span class="c1">//A类通过接口去依赖</span>
<span class="w">        </span><span class="n">a</span><span class="p">.</span><span class="na">depend2</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">B</span><span class="p">());</span>
<span class="w">        </span><span class="n">a</span><span class="p">.</span><span class="na">depend3</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">B</span><span class="p">());</span>
<span class="w">        </span><span class="n">C</span><span class="w"> </span><span class="n">c</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">C</span><span class="p">();</span>
<span class="w">        </span><span class="n">c</span><span class="p">.</span><span class="na">depend1</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">D</span><span class="p">());</span>
<span class="w">        </span><span class="n">c</span><span class="p">.</span><span class="na">depend4</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">D</span><span class="p">());</span>
<span class="w">        </span><span class="n">c</span><span class="p">.</span><span class="na">depend5</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">D</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span><span class="w">    </span>
<span class="p">}</span>

<span class="kd">interface</span> <span class="nc">Interface1</span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation1</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">interface</span> <span class="nc">Interface2</span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation2</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation3</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">interface</span> <span class="nc">Interface3</span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation4</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation5</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">B</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Interface1</span><span class="p">,</span><span class="n">Interface2</span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation1</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;B实现了operation1&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;B实现了operation2&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation3</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;B实现了operation3&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>

<span class="kd">class</span> <span class="nc">D</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Interface1</span><span class="p">,</span><span class="n">Interface3</span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation1</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;D实现了operation1&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation4</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;D实现了operation4&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">operation5</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;D实现了operation5&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>

<span class="kd">class</span> <span class="nc">A</span><span class="p">{</span>
<span class="w">    </span><span class="c1">// A类通过接口Interface1,Interface2 依赖B类，但是只会使用到123方法</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend1</span><span class="p">(</span><span class="n">Interface1</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation1</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend2</span><span class="p">(</span><span class="n">Interface2</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation2</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend3</span><span class="p">(</span><span class="n">Interface2</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation3</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">C</span><span class="p">{</span>
<span class="w">    </span><span class="c1">// C类通过接口Interface1,interface3 依赖D类，但是只会使用到145方法</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend1</span><span class="p">(</span><span class="n">Interface1</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation1</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend4</span><span class="p">(</span><span class="n">Interface3</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation4</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">depend5</span><span class="p">(</span><span class="n">Interface3</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">        </span><span class="n">i</span><span class="p">.</span><span class="na">operation5</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
案例中类B和类D分别实现了类A和类C需要的接口，从而实现了接口隔离原则。</p>
<h4 id="3">3、依赖倒转原则<a class="headerlink" href="#3" title="Permanent link">&para;</a></h4>
<p>依赖倒转原则是指：高层模块不应该依赖底层模块，二者都应该依赖其抽象；<strong>抽象不应该依赖细节，细节应该依赖抽象</strong>；中心思想是<strong>面向接口编程</strong>；设计理念：相对于细节的多变性，抽象的东西要稳定的多，以抽象为基础搭建的架构比以细节为基础的架构要稳定的多（在Java中，抽象指的是接口或抽象类，细节就是具体的实现类）。使用接口或抽象类的目的是制定好规范，而不涉及任何具体的操作，把展现细节的任务交给他们的实现类去完成。</p>
<p>(1)案例1</p>
<p>在这个案例中，实现了Person接收消息的功能。
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.inversion</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DependencyInversion</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">();</span>
<span class="w">        </span><span class="n">person</span><span class="p">.</span><span class="na">receive</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Email</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">Email</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getInfo</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;电子邮件信息:hello world!&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// 完成Person接收消息的功能</span>
<span class="c1">// 方式1</span>
<span class="kd">class</span> <span class="nc">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">receive</span><span class="p">(</span><span class="n">Email</span><span class="w"> </span><span class="n">email</span><span class="p">){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">email</span><span class="p">.</span><span class="na">getInfo</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
但是在这个案例中，Person通过Email发送消息，如果我们想要通过微信、短信等发送消息，我们需要新增类，同时也要在Person中新增相应的接收方法。</p>
<p>（2）案例2</p>
<p>对上一个案例的改进，引入一个抽象接口IReceiver，表示接收者，这样Person类与接口IReceiver发生依赖，因为Email,WeiXin等等属于接收范围，它们各自实现IReceiver接口就行了，这样就是依赖倒转原则。
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.inversion.improve</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DependencyInversion</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">();</span>
<span class="w">        </span><span class="n">person</span><span class="p">.</span><span class="na">receive</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Email</span><span class="p">());</span>
<span class="w">        </span><span class="n">person</span><span class="p">.</span><span class="na">receive</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">WeiXin</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// 定义一个接口</span>
<span class="kd">interface</span> <span class="nc">IReceiver</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getInfo</span><span class="p">();</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">Email</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IReceiver</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getInfo</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;电子邮件信息:hello world!&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// 增加微信</span>
<span class="kd">class</span> <span class="nc">WeiXin</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IReceiver</span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getInfo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;微信消息:hello wechat&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w">   </span>
<span class="p">}</span>
<span class="c1">// 完成Person接收消息的功能</span>
<span class="c1">// 方式2</span>
<span class="kd">class</span> <span class="nc">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">receive</span><span class="p">(</span><span class="n">IReceiver</span><span class="w"> </span><span class="n">receiver</span><span class="p">){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">receiver</span><span class="p">.</span><span class="na">getInfo</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
以上案例通过接口来实现依赖倒转原则。</p>
<p>（3）三种实现依赖倒转的方式</p>
<p>实现依赖倒转除了可以通过上面的接口传递的方式，还可以通过构造方法传递和setter方式传递。
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.inversion</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DependencyPass</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ChangHong</span><span class="w"> </span><span class="n">changHong1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChangHong</span><span class="p">();</span>
<span class="w">        </span><span class="n">OpenAndClose</span><span class="w"> </span><span class="n">openAndClose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OpenAndClose</span><span class="p">();</span>
<span class="w">        </span><span class="n">openAndClose</span><span class="p">.</span><span class="na">open</span><span class="p">(</span><span class="n">changHong1</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// 通过构造器进行依赖传递</span>
<span class="w">        </span><span class="n">OpenAndClose1</span><span class="w"> </span><span class="n">openAndClose1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OpenAndClose1</span><span class="p">(</span><span class="n">changHong1</span><span class="p">);</span>
<span class="w">        </span><span class="n">openAndClose1</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
<span class="w">        </span><span class="c1">// 通过 setter 方法进行依赖传递</span>
<span class="w">        </span><span class="n">ChangHong2</span><span class="w"> </span><span class="n">changHong2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ChangHong2</span><span class="p">();</span>
<span class="w">        </span><span class="n">OpenAndClose2</span><span class="w"> </span><span class="n">openAndClose2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OpenAndClose2</span><span class="p">();</span>
<span class="w">        </span><span class="n">openAndClose2</span><span class="p">.</span><span class="na">setTv</span><span class="p">(</span><span class="n">changHong2</span><span class="p">);</span>
<span class="w">        </span><span class="n">openAndClose2</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 方式 1： 通过接口传递实现依赖</span>
<span class="c1">// 开关的接口</span>
<span class="kd">interface</span> <span class="nc">IOpenAndClose</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">open</span><span class="p">(</span><span class="n">ITV</span><span class="w"> </span><span class="n">tv</span><span class="p">);</span><span class="w"> </span><span class="c1">// 抽象方法,接收接口</span>
<span class="p">}</span>

<span class="kd">interface</span> <span class="nc">ITV</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// ITV 接口</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">play</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">ChangHong</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ITV</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">play</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;长虹电视机，打开&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 实现接口</span>
<span class="kd">class</span> <span class="nc">OpenAndClose</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IOpenAndClose</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">open</span><span class="p">(</span><span class="n">ITV</span><span class="w"> </span><span class="n">tv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">tv</span><span class="p">.</span><span class="na">play</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 方式 2: 通过构造方法依赖传递</span>
<span class="kd">interface</span> <span class="nc">IOpenAndClose1</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">open</span><span class="p">();</span><span class="w"> </span><span class="c1">// 抽象方法</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">OpenAndClose1</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IOpenAndClose1</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ITV</span><span class="w"> </span><span class="n">tv</span><span class="p">;</span><span class="w"> </span><span class="c1">// 成员</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">OpenAndClose1</span><span class="p">(</span><span class="n">ITV</span><span class="w"> </span><span class="n">tv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// 构造器</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">tv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tv</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">open</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">tv</span><span class="p">.</span><span class="na">play</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 方式 3 , 通过 setter 方法传递</span>
<span class="kd">interface</span> <span class="nc">IOpenAndClose2</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">open</span><span class="p">();</span><span class="w"> </span><span class="c1">// 抽象方法</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setTv</span><span class="p">(</span><span class="n">ITV2</span><span class="w"> </span><span class="n">tv</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">interface</span> <span class="nc">ITV2</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// ITV 接口</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">play</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">OpenAndClose2</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IOpenAndClose2</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ITV2</span><span class="w"> </span><span class="n">tv</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setTv</span><span class="p">(</span><span class="n">ITV2</span><span class="w"> </span><span class="n">tv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">tv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tv</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">open</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">tv</span><span class="p">.</span><span class="na">play</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">ChangHong2</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ITV2</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">play</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;长虹电视机，打开&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
依赖倒转原则中需要注意：底层模块尽量都要由抽象类或接口，或者两者都有，程序稳定性更好，变量的声明类型<strong>尽量是抽象类或接口</strong>，这样我们的变量引用和实际对象间，就存在一个缓冲层，利于程序扩展和优化，继承遵循里氏替换原则。</p>
<h4 id="4">4、里氏替换原则<a class="headerlink" href="#4" title="Permanent link">&para;</a></h4>
<p><strong>继承存在的问题</strong>：继承包含这样一层含义：父类中凡是已经实现好的方法，实际上是在设定规范和契约，虽然它不强制要求所有的子类必须遵循这些契约，但是如果子类对这些已经实现的方法任意修改，就会对整个继承体系造成破坏。 继承在给程序设计带来便利的同时，也带来了弊端。比如使用继承会给程序带来侵入性，程序的可移植性降低，增加对象间的耦合性，如果一个类被其他的类所继承，则当这个类需要修改时，必须考虑到所有的子类，并且父类修改后，所有涉及到子类的功能都有可能产生故障。</p>
<p><strong>里氏替换原则的介绍：</strong> 如果对每个类型为 T1 的对象 o1，都有类型为 T2 的对象 o2，使得以 T1 定义的所有程序 P 在所有的对象 o1 都代换成 o2 时，程序 P 的行为没有发生变化，那么类型 T2 是类型 T1 的子类型。换句话说，<strong>所有引用基类的地方必须能透明地使用其子类的对象。</strong>在继承时，子类中尽量不要重写父类的方法，实际上，继承使两个类的耦合性增强了，在适当的情况下，可以通过聚合、组合、依赖来解决问题。</p>
<p>（1）案例1
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.liskov</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Liskov</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">A</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;11-3=&quot;</span><span class="o">+</span><span class="n">a</span><span class="p">.</span><span class="na">func1</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;1-8=&quot;</span><span class="o">+</span><span class="n">a</span><span class="p">.</span><span class="na">func1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">));</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;--------------------------&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">B</span><span class="w"> </span><span class="n">b</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">B</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;11-3=&quot;</span><span class="o">+</span><span class="n">b</span><span class="p">.</span><span class="na">func1</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;1-8=&quot;</span><span class="o">+</span><span class="n">b</span><span class="p">.</span><span class="na">func1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">));</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;11+3+9=&quot;</span><span class="o">+</span><span class="n">b</span><span class="p">.</span><span class="na">func2</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// A类，返回两个数字的差</span>
<span class="kd">class</span> <span class="nc">A</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">num1</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">num2</span><span class="p">){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">num1</span><span class="o">-</span><span class="n">num2</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// B类，继承了A类</span>
<span class="kd">class</span> <span class="nc">B</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">A</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">func2</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">func1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">+</span><span class="mi">9</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>我们发现原来运行正常的相减功能发生了错误。原因就是类 B 无意中重写了父类的方法，造成原有功能出现错误。在实际编程中，我们常常会通过重写父类的方法完成新的功能，这样写起来虽然简单，但整个继承体系的复用性会比较差。特别是运行多态比较频繁的时候。 通用的做法是：<strong>原来的父类和子类都继承一个更通俗的基类</strong>，原有的继承关系去掉，采用依赖，聚合，组合等关系代替。</p>
<p>（2）案例二
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.liskov.improve</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Liskov</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">A</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;11-3=&quot;</span><span class="o">+</span><span class="n">a</span><span class="p">.</span><span class="na">func1</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;1-8=&quot;</span><span class="o">+</span><span class="n">a</span><span class="p">.</span><span class="na">func1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">));</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;--------------------------&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">B</span><span class="w"> </span><span class="n">b</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">B</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;11+3=&quot;</span><span class="o">+</span><span class="n">b</span><span class="p">.</span><span class="na">func1</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;1+8=&quot;</span><span class="o">+</span><span class="n">b</span><span class="p">.</span><span class="na">func1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">));</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;11+3+9=&quot;</span><span class="o">+</span><span class="n">b</span><span class="p">.</span><span class="na">func2</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;11-3=&quot;</span><span class="o">+</span><span class="n">b</span><span class="p">.</span><span class="na">func3</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">//创建一个更加基础的基类</span>
<span class="kd">class</span> <span class="nc">Base</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 把更加基础的方法和成员写到积累里面</span>
<span class="p">}</span>
<span class="c1">// A类，返回两个数字的差</span>
<span class="kd">class</span> <span class="nc">A</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Base</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">num1</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">num2</span><span class="p">){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">num1</span><span class="o">-</span><span class="n">num2</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// B类，继承了Base类</span>
<span class="kd">class</span> <span class="nc">B</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Base</span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 如果B需要使用A类的方法，使用组合关系</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">a</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">A</span><span class="p">();</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">func1</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">func2</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">func1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">+</span><span class="mi">9</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">//我们仍然要使用A的方法</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">func3</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">a</span><span class="p">.</span><span class="na">func1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
在这个案例中，我们创建了一个更加基础的基类，把更加基础的方法和成员写到Base类中，使A和B类同时继承基类Base，如果B要使用A类中的方法，使用组合关系。</p>
<h4 id="5">5、开闭原则<a class="headerlink" href="#5" title="Permanent link">&para;</a></h4>
<p>开闭原则（Open Closed Principle）是编程中<strong>最基础、最重要</strong>的设计原则。一个软件实体如类，模块和函数应该对扩展开放（对提供方），对修改关闭（对使用方）。用抽象构建框架，用实现扩展细节。当软件需要变化时，尽量通过<strong>扩展软件实体的行为</strong>来实现变化，而不是通过修改已有代码来实现变化。</p>
<p>（1）案例1
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.ocp</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Ocp</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">GraphicEditor</span><span class="w"> </span><span class="n">graphicEditor</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">GraphicEditor</span><span class="p">();</span>
<span class="w">        </span><span class="n">graphicEditor</span><span class="p">.</span><span class="na">drawRectangle</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">());</span>
<span class="w">        </span><span class="n">graphicEditor</span><span class="p">.</span><span class="na">drawCircle</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Circle</span><span class="p">());</span><span class="w"> </span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 这是一个用于绘图的类</span>
<span class="kd">class</span> <span class="nc">GraphicEditor</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawShape</span><span class="p">(</span><span class="n">Shape</span><span class="w"> </span><span class="n">s</span><span class="p">){</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="na">m_type</span><span class="o">==</span><span class="mi">1</span><span class="p">){</span>
<span class="w">            </span><span class="n">drawRectangle</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="na">m_type</span><span class="o">==</span><span class="mi">2</span><span class="p">){</span>
<span class="w">            </span><span class="n">drawCircle</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawRectangle</span><span class="p">(</span><span class="n">Shape</span><span class="w"> </span><span class="n">r</span><span class="p">){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;绘制矩形&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawCircle</span><span class="p">(</span><span class="n">Shape</span><span class="w"> </span><span class="n">r</span><span class="p">){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;绘制圆形&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">Shape</span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">m_type</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">Rectangle</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Shape</span><span class="p">{</span>
<span class="w">    </span><span class="n">Rectangle</span><span class="p">(){</span>
<span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">m_type</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">Circle</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Shape</span><span class="p">{</span>
<span class="w">    </span><span class="n">Circle</span><span class="p">(){</span>
<span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">m_type</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
在这个案例中，并没有遵守<strong>开闭原则</strong>，即当我们给类增加新功能的时候，尽量不修改代码，或者尽可能少修改代码，但是在这个案例中，我们需要新增一个图形种类的时候，我们需要修改较多的地方。</p>
<p>（2）案例2</p>
<p>把创建 Shape 类做成抽象类，并提供一个抽象的 draw 方法，让子类去实现即可，这样我们有新的图形种类时，只需要让新的图形类继承 Shape，并实现 draw 方法即可，使用方的代码就不需要修改，满足了开闭原则。
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.ocp.improve</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Ocp</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">GraphicEditor</span><span class="w"> </span><span class="n">graphicEditor</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">GraphicEditor</span><span class="p">();</span>
<span class="w">        </span><span class="n">graphicEditor</span><span class="p">.</span><span class="na">drawShape</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">());</span>
<span class="w">        </span><span class="n">graphicEditor</span><span class="p">.</span><span class="na">drawShape</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Circle</span><span class="p">());</span><span class="w"> </span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 这是一个用于绘图的类</span>
<span class="kd">class</span> <span class="nc">GraphicEditor</span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawShape</span><span class="p">(</span><span class="n">Shape</span><span class="w"> </span><span class="n">s</span><span class="p">){</span>
<span class="w">       </span><span class="n">s</span><span class="p">.</span><span class="na">draw</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Shape</span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">m_type</span><span class="p">;</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="p">();</span><span class="c1">//抽象方法</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">Rectangle</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Shape</span><span class="p">{</span>
<span class="w">    </span><span class="n">Rectangle</span><span class="p">(){</span>
<span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">m_type</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;绘制矩形&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>


<span class="p">}</span>
<span class="kd">class</span> <span class="nc">Circle</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Shape</span><span class="p">{</span>
<span class="w">    </span><span class="n">Circle</span><span class="p">(){</span>
<span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">m_type</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">draw</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;绘制圆形&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
这个案例满足了开闭原则，在新增功能的时候，修改少量的代码就可以完成。</p>
<h4 id="6">6、迪米特法则<a class="headerlink" href="#6" title="Permanent link">&para;</a></h4>
<p>迪米特法则又叫<strong>最少知道原则</strong>，即一个类对自己依赖的类知道的越少越好。也就是说，对于被依赖的类不管多么复杂，都尽量将逻辑封装在类的内部，对外除了提供的public方法，不对外泄露任何信息。或者更简单的定义：只与直接朋友通信。 <strong>直接的朋友</strong>：每个对象都会与其他对象有耦合关系，只要两个对象之间有耦合关系，我们就说这两个对象之间是朋友关系。耦合的方式很多，依赖，关联，组合，聚合等。其中，我们称出现的<strong>成员变量，方法参数，方法返回值</strong>中的类为直接的朋友，而出现在局部变量中的类不是直接的朋友。也就是说，陌生的类最好不要以局部变量的形式出现在类的内部。</p>
<p>（1）案例1</p>
<p>这个案例中：有一个学校，下属有各个学院和总部，打印出学校总部员工 ID 和学院员工的 id。
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.demeter</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Demeter1</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 创建一个SchoolManager对象</span>
<span class="w">        </span><span class="n">SchoolManager</span><span class="w"> </span><span class="n">schoolManager</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">SchoolManager</span><span class="p">();</span>
<span class="w">        </span><span class="n">schoolManager</span><span class="p">.</span><span class="na">printAllEmployee</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">CollegeManager</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span><span class="w">   </span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">Employee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setId</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">CollegeEmployee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setId</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">CollegeManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">CollegeEmployee</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAllEmployee</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">CollegeEmployee</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">CollegeEmployee</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">CollegeEmployee</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CollegeEmployee</span><span class="p">();</span>
<span class="w">            </span><span class="n">emp</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="s">&quot;学院员工id= &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">emp</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">list</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// SchoolManager类的直接朋友有Employee和CollegeManager</span>
<span class="c1">// CollegeEmployee不是直接朋友，这样做违反了迪米特法则</span>
<span class="kd">class</span> <span class="nc">SchoolManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAllEmployee</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="p">();</span><span class="w">    </span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Employee</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Employee</span><span class="p">();</span>
<span class="w">            </span><span class="n">emp</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="s">&quot;学校总部员工id= &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">emp</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">list</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">printAllEmployee</span><span class="p">(</span><span class="n">CollegeManager</span><span class="w"> </span><span class="n">sub</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">CollegeEmployee</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sub</span><span class="p">.</span><span class="na">getAllEmployee</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;------------分公司员工------------&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// CollegeEmployee不是SchoolManager的直接朋友</span>
<span class="w">        </span><span class="c1">// 因为它是以局部变量的形式存在</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">CollegeEmployee</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">list1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">getAllEmployee</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;------------学校总部员工------------&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Employee</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">list2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
在这个案例中SchoolManager类的直接朋友有Employee和CollegeManager，CollegeEmployee不是直接朋友（因为它是以局部变量的形式存在的），这样做违反了迪米特法则。</p>
<p>（2)案例2</p>
<p>前面设计的问题在于 SchoolManager 中，CollegeEmployee 类并不是 SchoolManager 类的直接朋友。 按照迪米特法则，应该避免类中出现这样非直接朋友关系的耦合。
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.principle.demeter.improve</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Demeter1</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 创建一个SchoolManager对象</span>
<span class="w">        </span><span class="n">SchoolManager</span><span class="w"> </span><span class="n">schoolManager</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">SchoolManager</span><span class="p">();</span>
<span class="w">        </span><span class="n">schoolManager</span><span class="p">.</span><span class="na">printAllEmployee</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">CollegeManager</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Employee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setId</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>


<span class="kd">class</span> <span class="nc">CollegeEmployee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setId</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>


<span class="kd">class</span> <span class="nc">CollegeManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">CollegeEmployee</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAllEmployee</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">CollegeEmployee</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">CollegeEmployee</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">CollegeEmployee</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CollegeEmployee</span><span class="p">();</span>
<span class="w">            </span><span class="n">emp</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="s">&quot;学院员工id= &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">emp</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">list</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 输出学院员工的信息</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">printEmployee</span><span class="p">(){</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">CollegeEmployee</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">getAllEmployee</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;------------学院员工------------&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">CollegeEmployee</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">list1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>

<span class="kd">class</span> <span class="nc">SchoolManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAllEmployee</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="p">();</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Employee</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Employee</span><span class="p">();</span>
<span class="w">            </span><span class="n">emp</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="s">&quot;学校总部员工id= &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">emp</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">list</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">printAllEmployee</span><span class="p">(</span><span class="n">CollegeManager</span><span class="w"> </span><span class="n">sub</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sub</span><span class="p">.</span><span class="na">printEmployee</span><span class="p">();</span><span class="w">        </span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">getAllEmployee</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;------------学校总部员工------------&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Employee</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">list2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<strong>迪米特法则的核心是降低类之间的耦合</strong>, 
但是注意：由于每个类都减少了不必要的依赖，因此迪米特法则只是要求降低类间(对象间)耦合关系，并不是要求完全没有依赖关系。</p>
<h4 id="7">7、合成复用原则<a class="headerlink" href="#7" title="Permanent link">&para;</a></h4>
<p>合成复用原则是<strong>尽量使用合成/聚合的方式，而不是继承</strong>。核心思想是：找出应用中可能需要变化之处，把它们独立出来，不要和那些不需要变化的代码混在一起。针对接口编程，而不是针对实现编程，为了交互对象之间的松耦合设计而努力。</p>
<h2 id="_3">三、设计模式概述<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>设计模式是程序员在面对同类软件工程设计问题所总结出来的有用的经验，模式不是代码，而是某类问题的通用解决方案，设计模式（Design pattern）代表了最佳的实践。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。设计模式的本质<strong>提高软件的维护性、通用性和扩展性，并降低软件的复杂度</strong>。设计模式并不局限于某种语言，java，php，c++ 都有设计模式。设计模式分为三种类型，共23种。</p>
<ul>
<li>创建型模式：单例模式、抽象工厂模式、原型模式、建造者模式、工厂模式。</li>
<li>结构型模式：适配器模式、桥接模式、装饰模式、组合模式、外观模式、享元模式、代理模式。</li>
<li>行为型模式： 模版方法模式、命令模式、访问者模式、迭代器模式、观察者模式、中介者模式、备忘录模式、解释器模式（Interpreter 模式）、状态模式、策略模式、职责链模式(责任链模式)</li>
</ul>
<blockquote>
<p>不同的书籍上对分类和名称略有差异</p>
</blockquote>
<h2 id="_4">四、单例设计模式<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="1_2">1、简介<a class="headerlink" href="#1_2" title="Permanent link">&para;</a></h3>
<p>所谓类的单例设计模式，就是<strong>采取一定的方法保证在整个的软件系统中，对某个类只能存在一个对象实例</strong>，并且该类只提供一个取得其对象实例的方法(静态方法)。</p>
<blockquote>
<p>比如 Hibernate 的 SessionFactory，它充当数据存储源的代理，并负责创建 Session 对象。SessionFactory 并不是轻量级的，一般情况下，一个项目通常只需要一个 SessionFactory 就够，这是就会使用到单例模式。</p>
</blockquote>
<h3 id="2_2">2、单例设计模式的八种方式<a class="headerlink" href="#2_2" title="Permanent link">&para;</a></h3>
<h4 id="1_3">（1）饿汉式（静态常量）<a class="headerlink" href="#1_3" title="Permanent link">&para;</a></h4>
<p>创建一个饿汉式（静态常量）应用实例的步骤可以分为一下几步：</p>
<ul>
<li>构造器私有化（防止外部new）</li>
<li>类的内部创建对象</li>
<li>向外暴露一个静态的公共方法。getInstance</li>
</ul>
<p>实例代码如下：
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.singleton.type1</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Singleton1</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance1</span><span class="o">=</span><span class="n">Singleton</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">        </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance2</span><span class="o">=</span><span class="n">Singleton</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">instance1</span><span class="o">==</span><span class="n">instance2</span><span class="p">);</span><span class="w">      </span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;instance2.hashCode1=&quot;</span><span class="o">+</span><span class="n">instance1</span><span class="p">.</span><span class="na">hashCode</span><span class="p">());</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;instance2.hashCode1=&quot;</span><span class="o">+</span><span class="n">instance2</span><span class="p">.</span><span class="na">hashCode</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// 饿汉式（使用静态变量来写）</span>
<span class="kd">class</span> <span class="nc">Singleton</span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 1、先将构造器私有化，外部不能new</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">Singleton</span><span class="p">(){</span>

<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// 2、本类内部创建对象实例</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Singleton</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// 3、对外提供一个公有的方法返回实例对象</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
最后程序代码输出的结果是：两个对象相等，并且返回的hash值也是一样的。</p>
<blockquote>
<p>优缺点说明：</p>
<ul>
<li>优点：这种写法比较简单，就是在类装载的时候就完成实例化。避免了线程同步问题。</li>
<li>在类装载的时候就完成实例化，没有达到 Lazy Loading的效果。如果从始至终从未使用过这个实例，则会造成内存的浪费。</li>
<li>结论：这种单例模式可用，可能造成内存浪费</li>
</ul>
</blockquote>
<p>这种方式基于 classloder 机制避免了多线程的同步问题，不过，instance 在类装载时就实例化，在单例模式中大多数都是调用 getInstance 方法，但是导致类装载的原因有很多种，因此不能确定有其他的方式（或者其他的静态方法）导致类装载，这时候初始化 instance 就没有达到 lazy loading 的效果。</p>
<h4 id="2_3">（2）饿汉式（静态代码块）<a class="headerlink" href="#2_3" title="Permanent link">&para;</a></h4>
<p>这种方法是根据上一种方法进行改进的，将上一种的静态变量改为静态代码块。
<div class="highlight"><pre><span></span><code><span class="c1">// 饿汉式（使用静态变量来写）</span>
<span class="kd">class</span> <span class="nc">Singleton</span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 1、先将构造器私有化，外部不能new</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">Singleton</span><span class="p">(){</span>

<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// 2、本类内部创建对象实例</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>

<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//在静态代码块中创建单例对象</span>
<span class="w">        </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Singleton</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// 3、对外提供一个公有的方法返回实例对象</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
最终的输出结果和上一个相同</p>
<blockquote>
<p>优缺点说明</p>
<ul>
<li>这种方式和上面的方式其实类似，只不过将类实例化的过程放在了静态代码块中，也是在类装载的时候，就执行静态代码块中的代码，初始化类的实例。优缺点和上面是一样的。</li>
<li>结论：这种单例模式可用，但是可能造成内存浪费</li>
</ul>
</blockquote>
<h4 id="3_1">（3）懒汉式（线程不安全）<a class="headerlink" href="#3_1" title="Permanent link">&para;</a></h4>
<p>上述两种方法都是线程安全的方法，但是都会造成线程的浪费。下面是一种线程不安全的方法。
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.singleton.type3</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Singleton3</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance1</span><span class="o">=</span><span class="n">Singleton</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">        </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance2</span><span class="o">=</span><span class="n">Singleton</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">instance1</span><span class="o">==</span><span class="n">instance2</span><span class="p">);</span><span class="w">      </span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;instance2.hashCode1=&quot;</span><span class="o">+</span><span class="n">instance1</span><span class="p">.</span><span class="na">hashCode</span><span class="p">());</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;instance2.hashCode1=&quot;</span><span class="o">+</span><span class="n">instance2</span><span class="p">.</span><span class="na">hashCode</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Singleton</span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">Singleton</span><span class="p">(){}</span>
<span class="w">    </span><span class="c1">// 提供一个静态的公有方法，当使用该方法时，才去创建instance</span>
<span class="w">    </span><span class="c1">// 懒汉式</span>
<span class="w">    </span><span class="c1">// 用到时候才创建</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">(){</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">instance</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span>
<span class="w">            </span><span class="n">instance</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Singleton</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<blockquote>
<p>优缺点说明</p>
<ul>
<li>起到了Lazy Loading的效果，但是只能在单线程下使用。 </li>
<li>如果在多线程下，一个线程进入了 if (singleton == null)判断语句块，还未来得及往下执行，另一个线程也通过了这个判断语句，这时便会产生多个实例。所以在多线程环境下不可使用这种方式。</li>
<li>结论：在实际开发中，不要使用这种方式。</li>
</ul>
</blockquote>
<h4 id="4_1">（4）懒汉式（线程安全，同步方法）<a class="headerlink" href="#4_1" title="Permanent link">&para;</a></h4>
<p>针对上一种方法的缺陷，使用<strong>synchronized</strong>关键字可以实现线程安全。
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.singleton.type4</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Singleton4</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance1</span><span class="o">=</span><span class="n">Singleton</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">        </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance2</span><span class="o">=</span><span class="n">Singleton</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">instance1</span><span class="o">==</span><span class="n">instance2</span><span class="p">);</span><span class="w">      </span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;instance2.hashCode1=&quot;</span><span class="o">+</span><span class="n">instance1</span><span class="p">.</span><span class="na">hashCode</span><span class="p">());</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;instance2.hashCode1=&quot;</span><span class="o">+</span><span class="n">instance2</span><span class="p">.</span><span class="na">hashCode</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">//懒汉式第二种（线程安全，同步方法）</span>
<span class="kd">class</span> <span class="nc">Singleton</span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">Singleton</span><span class="p">(){}</span>
<span class="w">    </span><span class="c1">// 提供一个静态的公有方法，加入了一个同步处理的代码，当使用该方法时，才去创建instance</span>
<span class="w">    </span><span class="c1">// 懒汉式</span>
<span class="w">    </span><span class="c1">// 用到时候才创建</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">(){</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">instance</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span>
<span class="w">            </span><span class="n">instance</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Singleton</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<blockquote>
<p>优缺点说明：</p>
<ul>
<li>解决了线程安全问题</li>
<li>效率太低了，每个线程在想获得类的实例时候，执行getInstance()方法都要进行同步。而其实这个方法只执行一次实例化代码就够了，后面的想获得该类实例，直接 return 就行了。方法进行同步效率太低。</li>
<li>结论：在实际开发中，不推荐使用这种方式</li>
</ul>
</blockquote>
<h4 id="5_1">（5）懒汉式（线程安全，同步代码块）<a class="headerlink" href="#5_1" title="Permanent link">&para;</a></h4>
<p>这种方式只是对上一种方式的改进，同样不推荐使用。只是将synchronized关键字换了一个位置而已。
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">(){</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">instance</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span>
<span class="w">            </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="n">Singleton</span><span class="p">.</span><span class="na">class</span><span class="p">){</span>
<span class="w">                </span><span class="n">instance</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Singleton</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></p>
<h4 id="6_1">（6）双重检查<a class="headerlink" href="#6_1" title="Permanent link">&para;</a></h4>
<p>根据以上方式存在的优缺点，提出了双重检查的方式，提供一个静态的公有方法，加入双重检查代码，解决线程安全问题, 同时解决懒加载问题
同时保证了效率, 推荐使用。
<div class="highlight"><pre><span></span><code><span class="c1">//懒汉式第二种（线程安全，同步方法）</span>
<span class="kd">class</span> <span class="nc">Singleton</span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">volatile</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">Singleton</span><span class="p">(){}</span>
<span class="w">    </span><span class="c1">// 提供一个静态的公有方法，加入双重检查的代码，解决线程安全，同时解决懒加载的问题</span>
<span class="w">    </span><span class="c1">// 同时保证了效率</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">(){</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">instance</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span>
<span class="w">            </span><span class="kd">synchronized</span><span class="p">(</span><span class="n">Singleton</span><span class="p">.</span><span class="na">class</span><span class="p">){</span>
<span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="n">instance</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span>
<span class="w">                    </span><span class="n">instance</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Singleton</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<blockquote>
<p>优缺点说明</p>
<ul>
<li>Double-Check 概念是多线程开发中常使用到的，如代码中所示，我们进行了两次 if (singleton == null)检查，这样就可以保证线程安全了。</li>
<li>这样，实例化代码只用执行一次，后面再次访问时，判断 if (singleton == null)，直接 return 实例化对象，也避免的反复进行方法同步。</li>
<li>线程安全，延迟加载，效率较高</li>
<li>在实际开发中，推荐使用这种单例设计模式。</li>
</ul>
</blockquote>
<h4 id="7_1">（7）静态内部类<a class="headerlink" href="#7_1" title="Permanent link">&para;</a></h4>
<p>上述方法都是作用于方法上的，可以直接创建一个内部类来使用。
<div class="highlight"><pre><span></span><code><span class="c1">//静态内部类完成，推荐使用</span>
<span class="kd">class</span> <span class="nc">Singleton</span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">Singleton</span><span class="p">(){}</span>

<span class="w">    </span><span class="c1">// 写一个静态内部类，该类有一个静态属性Singleton</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SingletonInstance</span><span class="p">{</span>
<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="n">INSTANCE</span><span class="w"> </span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Singleton</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 提供一个静态的公有方法，加入双重检查的代码，解决线程安全，同时解决懒加载的问题</span>
<span class="w">    </span><span class="c1">// 同时保证了效率</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">SingletonInstance</span><span class="p">.</span><span class="na">INSTANCE</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<blockquote>
<p>优缺点说明</p>
<ul>
<li>这种方式采用了类装载的机制来保证初始化实例时只有一个线程。</li>
<li>静态内部类方式在 Singleton 类被装载时并不会立即实例化，而是在需要实例化时，调用 getInstance 方法，才会装载 SingletonInstance 类，从而完成 Singleton 的实例化。</li>
<li>类的静态属性只会在第一次加载类的时候初始化，所以在这里，JVM 帮助我们保证了线程的安全性，在类进行初始化时，别的线程是无法进入的。</li>
<li>优点：避免了线程不安全，利用静态内部类特点实现延迟加载，效率高。</li>
<li>开发中推荐使用</li>
</ul>
</blockquote>
<h4 id="8">（8）枚举<a class="headerlink" href="#8" title="Permanent link">&para;</a></h4>
<p>通过枚举也可以实现单例
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.singleton.type8</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Singleton8</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance1</span><span class="o">=</span><span class="n">Singleton</span><span class="p">.</span><span class="na">INSTANCE</span><span class="p">;</span>
<span class="w">        </span><span class="n">Singleton</span><span class="w"> </span><span class="n">instance2</span><span class="o">=</span><span class="n">Singleton</span><span class="p">.</span><span class="na">INSTANCE</span><span class="p">;</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">instance1</span><span class="o">==</span><span class="n">instance2</span><span class="p">);</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;instance2.hashCode1=&quot;</span><span class="o">+</span><span class="n">instance1</span><span class="p">.</span><span class="na">hashCode</span><span class="p">());</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;instance2.hashCode1=&quot;</span><span class="o">+</span><span class="n">instance2</span><span class="p">.</span><span class="na">hashCode</span><span class="p">());</span>
<span class="w">        </span><span class="n">instance1</span><span class="p">.</span><span class="na">sayOK</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span><span class="w">    </span>
<span class="p">}</span>

<span class="c1">// 使用枚举</span>
<span class="kd">enum</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">INSTANCE</span><span class="p">;</span><span class="w"> </span><span class="c1">//属性</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sayOK</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;ok~&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<blockquote>
<p>优缺点说明：</p>
<ul>
<li>这借助 JDK1.5 中添加的枚举来实现单例模式。不仅能避免多线程同步问题，而且还能防止反序列化重新创建新的对象。</li>
<li>这种方式是 Effective Java 作者 Josh Bloch 提倡的方式
结论：推荐使用。</li>
</ul>
</blockquote>
<h3 id="3_2">3、单例模式注意事项和细节说明<a class="headerlink" href="#3_2" title="Permanent link">&para;</a></h3>
<p>单例模式保证了 系统内存中该类只存在一个对象，节省了系统资源，对于一些需要频繁创建销毁的对象，使用单例模式可以提高系统性能。当想实例化一个单例类的时候，必须要记住使用相应的获取对象的方法，而不是使用 new。 
单例模式使用的场景：需要<strong>频繁的进行创建和销毁的对象、创建对象时耗时过多或耗费资源过多</strong>(即：重量级对象)，但又经常用到的对象、工具类对象、频繁访问数据库或文件的对象(比如数据源、session工厂等)。</p>
<h2 id="_5">五、工厂模式<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<h3 id="1_4">1、问题引入<a class="headerlink" href="#1_4" title="Permanent link">&para;</a></h3>
<p>看一个披萨的项目：要便于披萨种类的扩展，要便于维护：（1）披萨的种类很多(比如 GreekPizz、CheesePizz等) （2）披萨的制作有 prepare，bake, cut, box （3）完成披萨店订购功能。</p>
<p>考虑解决这个问题，首先使用传统的方法：创建一个抽象的Pizza类，里面包含了披萨制作的通用方法（包括prepare、bake等），然后各种不同种类的Pizza需要继承该抽象类然后实现其中的抽象方法。最终通过OrderPizza对不同的Pizza进行订购。</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="nf">OrderPizza</span><span class="p">(){</span>
<span class="w">    </span><span class="n">Pizza</span><span class="w"> </span><span class="n">pizza</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">orderType</span><span class="p">;</span><span class="c1">//订购披萨的类型</span>
<span class="w">    </span><span class="k">do</span><span class="p">{</span>
<span class="w">        </span><span class="n">orderType</span><span class="o">=</span><span class="n">gettype</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">orderType</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;greek&quot;</span><span class="p">)){</span>
<span class="w">            </span><span class="n">pizza</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">GreekPizza</span><span class="p">();</span>
<span class="w">            </span><span class="n">pizza</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot; 希腊披萨 &quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">orderType</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;cheese&quot;</span><span class="p">)){</span>
<span class="w">            </span><span class="n">pizza</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">CheesePizza</span><span class="p">();</span>
<span class="w">            </span><span class="n">pizza</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot; 奶酪披萨 &quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">orderType</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;pepper&quot;</span><span class="p">)){</span>
<span class="w">            </span><span class="n">pizza</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">PepperPizza</span><span class="p">();</span>
<span class="w">            </span><span class="n">pizza</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot; 胡椒披萨 &quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="c1">// 输出pizza制作的过程</span>
<span class="w">        </span><span class="n">pizza</span><span class="p">.</span><span class="na">prepare</span><span class="p">();</span>
<span class="w">        </span><span class="n">pizza</span><span class="p">.</span><span class="na">bake</span><span class="p">();</span>
<span class="w">        </span><span class="n">pizza</span><span class="p">.</span><span class="na">cut</span><span class="p">();</span>
<span class="w">        </span><span class="n">pizza</span><span class="p">.</span><span class="na">box</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>传统方法的优缺点：</strong>（1）优点是比较好理解，简单易操作。（2） 缺点是<strong>违反了设计模式的 ocp 原则</strong>，即对扩展开放，对修改关闭。即当我们给类增加新功能的时候，尽量不修改代码，或者尽可能少修改代码。所以当我们需要新增一个Pizza类的时候，<strong>需要在OrderPizza中重新写一条if语句进行判断。</strong> 下面通过工厂模式对上述方法进行改进。</p>
<h3 id="2_4">2、简单工厂模式<a class="headerlink" href="#2_4" title="Permanent link">&para;</a></h3>
<h4 id="_6">基本介绍<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p>（1）简单工厂模式是属于创建型模式，是工厂模式的一种。<strong>简单工厂模式是由一个工厂对象决定创建出哪一种产品类的实例</strong>。简单工厂模式是工厂模式家族中最简单实用的模式。</p>
<p>（2）简单工厂模式：定义了一个创建对象的类，<strong>由这个类来封装实例化对象的行为(代码)</strong></p>
<p>（3） 在软件开发中，当我们会用到大量的创建某种、某类或者某批对象时，就会使用到工厂模式。</p>
<h4 id="_7">优化上面的实例<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p>简单工厂模式的设计方案：定义一个可以实例化<strong>Pizza</strong>对象的类，封装创建对象的代码。所以创建一个<strong>SimplePizzaFactory</strong>，在这个类中进行<strong>Pizza</strong>的创建。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SimpleFactory</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Pizza</span><span class="w"> </span><span class="nf">createPizza</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">orderType</span><span class="p">){</span>
<span class="w">        </span><span class="n">Pizza</span><span class="w"> </span><span class="n">pizza</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;使用简单工厂模式&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">orderType</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;greek&quot;</span><span class="p">)){</span>
<span class="w">            </span><span class="n">pizza</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">GreekPizza</span><span class="p">();</span>
<span class="w">            </span><span class="n">pizza</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot; 希腊披萨 &quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">orderType</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;cheese&quot;</span><span class="p">)){</span>
<span class="w">            </span><span class="n">pizza</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">CheesePizza</span><span class="p">();</span>
<span class="w">            </span><span class="n">pizza</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot; 奶酪披萨 &quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">orderType</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;pepper&quot;</span><span class="p">)){</span>
<span class="w">            </span><span class="n">pizza</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">PepperPizza</span><span class="p">();</span>
<span class="w">            </span><span class="n">pizza</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot; 胡椒披萨 &quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">pizza</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
这个<strong>简单工厂类</strong>用来创建Pizza，在<strong>OrderPizza</strong>进行调用这个类中的方法来创建相应的Pizza。</p>
<h3 id="3_3">3、工厂方法模式<a class="headerlink" href="#3_3" title="Permanent link">&para;</a></h3>
<h4 id="_8">简单工厂模式的不足<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p>披萨项目新的需求：客户在点披萨时，可以点不同口味的披萨，比如 北京的奶酪 pizza、北京的胡椒pizza或者是伦敦的奶酪 pizza、伦敦的胡椒pizza。</p>
<p>解决方法：使用简单工厂模式，创建不同的简单工厂类，比如<strong>BJPizzaSimpleFactory、LDPizzaSimpleFactory</strong>等等.从当前
这个案例来说，也是可以的，但是考虑到项目的规模，以及软件的可维护性、可扩展性并不是特别好。下面介绍工厂方法模式。</p>
<h4 id="_9">简单介绍<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p>工厂方法模式设计方案：将披萨项目的实例化功能抽象成抽象方法，在不同的口味点餐子类中具体实现。工厂方法模式：定义了一个创建对象的抽象方法，由子类决定要实例化的类。<strong>工厂方
法模式将对象的实例化推迟到子类。</strong>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">OrderPizza</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 定义一个抽象方法，让各个工厂子类自己实现</span>
<span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="n">Pizza</span><span class="w"> </span><span class="nf">createPizza</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">orderType</span><span class="p">);</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">OrderPizza</span><span class="p">(){</span>
<span class="w">        </span><span class="n">Pizza</span><span class="w"> </span><span class="n">pizza</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">orderType</span><span class="p">;</span><span class="c1">//订购披萨的类型</span>
<span class="w">        </span><span class="k">do</span><span class="p">{</span>
<span class="w">            </span><span class="n">orderType</span><span class="o">=</span><span class="n">gettype</span><span class="p">();</span>
<span class="w">            </span><span class="n">pizza</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createPizza</span><span class="p">(</span><span class="n">orderType</span><span class="p">);</span>
<span class="w">            </span><span class="c1">// 输出pizza制作的过程</span>
<span class="w">            </span><span class="n">pizza</span><span class="p">.</span><span class="na">prepare</span><span class="p">();</span>
<span class="w">            </span><span class="n">pizza</span><span class="p">.</span><span class="na">bake</span><span class="p">();</span>
<span class="w">            </span><span class="n">pizza</span><span class="p">.</span><span class="na">cut</span><span class="p">();</span>
<span class="w">            </span><span class="n">pizza</span><span class="p">.</span><span class="na">box</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">gettype</span><span class="p">(){</span>
<span class="w">        </span><span class="k">try</span><span class="p">{</span>
<span class="w">            </span><span class="n">BufferedReader</span><span class="w"> </span><span class="n">strin</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">BufferedReader</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">InputStreamReader</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">in</span><span class="p">));</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;input pizza type&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">str</span><span class="o">=</span><span class="n">strin</span><span class="p">.</span><span class="na">readLine</span><span class="p">();</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">str</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
这个<strong>OrderPizza</strong>类与上面不同的是，多了一个抽象方法<strong>createPizza</strong>，并在子类中实现该抽象方法，例如下列的北京Pizza的实现类。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BJOrderPizza</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">OrderPizza</span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="n">Pizza</span><span class="w"> </span><span class="nf">createPizza</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">orderType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Pizza</span><span class="w"> </span><span class="n">pizza</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">orderType</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;cheese&quot;</span><span class="p">)){</span>
<span class="w">            </span><span class="n">pizza</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">BJCheesePizza</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">orderType</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;pepper&quot;</span><span class="p">)){</span>
<span class="w">            </span><span class="n">pizza</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">BJPepperPizza</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">pizza</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w">   </span>
<span class="p">}</span>
</code></pre></div>
在实现类中实现具体的操作，可以进行购买BJOrderPizza，cheeses口味的和pepper口味的。</p>
<h3 id="4_2">4、抽象工厂模式<a class="headerlink" href="#4_2" title="Permanent link">&para;</a></h3>
<h4 id="_10">基本介绍<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<p>1) 抽象工厂模式：定义了一个 interface 用于创建相关或有依赖关系的对象簇，而无需指明具体的类
2) 抽象工厂模式可以将<strong>简单工厂模式和工厂方法模式进行整合</strong>。
3) 从设计层面看，<strong>抽象工厂模式就是对简单工厂模式的改进</strong>(或者称为进一步的抽象)。
4) 将工厂抽象成两层，<strong>AbsFactory(抽象工厂) 和 具体实现的工厂子类</strong>。程序员可以根据创建对象类型使用对应的工厂子类。这样将单个的简单工厂类变成了工厂簇，更利于代码的维护和扩展。</p>
<h4 id="_11">代码示例<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<p>对上述代码的一些修改
<div class="highlight"><pre><span></span><code><span class="c1">// 抽象工厂模式的抽象层</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">AbsFactory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 让下面的工厂子类具体实现</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Pizza</span><span class="w"> </span><span class="nf">createPizza</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">orderType</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
所有的工厂子类都需要继承该抽象类，下面举一个<strong>BJFactory</strong>的实现例子。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BJFactory</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">AbsFactory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Pizza</span><span class="w"> </span><span class="nf">createPizza</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">orderType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;使用的是抽象工厂模式&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">Pizza</span><span class="w"> </span><span class="n">pizza</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">orderType</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;cheese&quot;</span><span class="p">)){</span>
<span class="w">            </span><span class="n">pizza</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">BJCheesePizza</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">orderType</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;pepper&quot;</span><span class="p">)){</span>
<span class="w">            </span><span class="n">pizza</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">BJPepperPizza</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">pizza</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span>
<span class="p">}</span>
</code></pre></div>
在这个工厂子类中，继承最上层的工厂类，实现了其中的抽象方法，最后是进行订购的方法，
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">OrderPizza</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">AbsFactory</span><span class="w"> </span><span class="n">factory</span><span class="p">;</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">OrderPizza</span><span class="p">(</span><span class="n">AbsFactory</span><span class="w"> </span><span class="n">factory</span><span class="p">){</span>
<span class="w">        </span><span class="n">setFactory</span><span class="p">(</span><span class="n">factory</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setFactory</span><span class="p">(</span><span class="n">AbsFactory</span><span class="w"> </span><span class="n">factory</span><span class="p">){</span>
<span class="w">        </span><span class="n">Pizza</span><span class="w"> </span><span class="n">pizza</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">orderType</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="c1">//用户输入</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">factory</span><span class="o">=</span><span class="n">factory</span><span class="p">;</span>
<span class="w">        </span><span class="k">do</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">orderType</span><span class="o">=</span><span class="n">gettype</span><span class="p">();</span>
<span class="w">            </span><span class="n">pizza</span><span class="o">=</span><span class="n">factory</span><span class="p">.</span><span class="na">createPizza</span><span class="p">(</span><span class="n">orderType</span><span class="p">);</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">pizza</span><span class="o">!=</span><span class="kc">null</span><span class="p">){</span>
<span class="w">                </span><span class="n">pizza</span><span class="p">.</span><span class="na">prepare</span><span class="p">();</span>
<span class="w">                </span><span class="n">pizza</span><span class="p">.</span><span class="na">bake</span><span class="p">();</span>
<span class="w">                </span><span class="n">pizza</span><span class="p">.</span><span class="na">cut</span><span class="p">();</span>
<span class="w">                </span><span class="n">pizza</span><span class="p">.</span><span class="na">box</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span><span class="k">else</span><span class="p">{</span>
<span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;订购失败&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w">      </span>
<span class="w">        </span><span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
最终通过<strong>new OrderPizza(new BJFactory());</strong> 就可以完成对BJPizza的订购。</p>
<h2 id="_12">六、原型模式<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<h3 id="1_5">1、问题引入<a class="headerlink" href="#1_5" title="Permanent link">&para;</a></h3>
<p>现在有一只羊 tom，姓名为: tom, 年龄为：1，颜色为：白色，请编写程序创建和 tom 羊 属性完全相同的 10只羊。</p>
<h3 id="2_5">2、传统方法解决<a class="headerlink" href="#2_5" title="Permanent link">&para;</a></h3>
<p>用<strong>Sheep</strong>的get和set方法进行对象的复制，代码示例如下：
<div class="highlight"><pre><span></span><code><span class="n">Sheep</span><span class="w"> </span><span class="n">sheep</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Sheep</span><span class="p">(</span><span class="s">&quot;tom&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;白色&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">Sheep</span><span class="w"> </span><span class="n">sheep2</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Sheep</span><span class="p">(</span><span class="n">sheep</span><span class="p">.</span><span class="na">getName</span><span class="p">(),</span><span class="n">sheep</span><span class="p">.</span><span class="na">getAge</span><span class="p">(),</span><span class="n">sheep</span><span class="p">.</span><span class="na">getColor</span><span class="p">());</span>
<span class="w">        </span><span class="n">Sheep</span><span class="w"> </span><span class="n">sheep3</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Sheep</span><span class="p">(</span><span class="n">sheep</span><span class="p">.</span><span class="na">getName</span><span class="p">(),</span><span class="n">sheep</span><span class="p">.</span><span class="na">getAge</span><span class="p">(),</span><span class="n">sheep</span><span class="p">.</span><span class="na">getColor</span><span class="p">());</span>
<span class="w">        </span><span class="n">Sheep</span><span class="w"> </span><span class="n">sheep4</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Sheep</span><span class="p">(</span><span class="n">sheep</span><span class="p">.</span><span class="na">getName</span><span class="p">(),</span><span class="n">sheep</span><span class="p">.</span><span class="na">getAge</span><span class="p">(),</span><span class="n">sheep</span><span class="p">.</span><span class="na">getColor</span><span class="p">());</span>
<span class="w">        </span><span class="n">Sheep</span><span class="w"> </span><span class="n">sheep5</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Sheep</span><span class="p">(</span><span class="n">sheep</span><span class="p">.</span><span class="na">getName</span><span class="p">(),</span><span class="n">sheep</span><span class="p">.</span><span class="na">getAge</span><span class="p">(),</span><span class="n">sheep</span><span class="p">.</span><span class="na">getColor</span><span class="p">());</span>
</code></pre></div>
<strong>传统方式的优缺点：</strong></p>
<ul>
<li>优点是比较好理解，简单易操作。</li>
<li>在创建新的对象时，总是需要重新获取原始对象的属性，如果创建的对象比较复杂时，效率较低。</li>
<li>总是需要重新初始化对象，而不是动态地获得对象运行时的状态, 不够灵活。</li>
</ul>
<h3 id="_13">原型模式<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>Java 中 Object 类是所有类的根类，Object类提供了一个clone()方法，该方法可以将一个 Java 对象复制一份，但是需要实现 clone 的 Java 类必须要<strong>实现一个接口Cloneable</strong>，该接口表示该类能够复制且具有复制的能力 =&gt;<strong>原型模式。</strong>
原型模式(Prototype 模式)是指：用原型实例指定创建对象的种类，并且通过拷贝这些原型，创建新的对象。原型模式是一种创建型设计模式，允许一个对象再创建另外一个可定制的对象，无需知道如何创建的细节。工作原理是:通过将一个原型对象传给那个要发动创建的对象，这个要发动创建的对象通过请求原型对象拷贝它们自己来实施创建，即 对象.clone()。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Sheep</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Cloneable</span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">color</span><span class="p">;</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Sheep</span><span class="w"> </span><span class="n">friend</span><span class="p">;</span><span class="w"> </span><span class="c1">//普通对象，克隆时候如何处理，默认是浅拷贝</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Sheep</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Sheep</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">color</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getAge</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setAge</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getColor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">color</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setColor</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">color</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Sheep [name=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;, age=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;, color=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;]&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// 克隆该实例，使用默认的clone方法</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">clone</span><span class="p">(){</span><span class="w">   </span>
<span class="w">        </span><span class="n">Sheep</span><span class="w"> </span><span class="n">sheep</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="k">try</span><span class="p">{</span>
<span class="w">            </span><span class="n">sheep</span><span class="o">=</span><span class="p">(</span><span class="n">Sheep</span><span class="p">)</span><span class="kd">super</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">sheep</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
上述代码是改进的<strong>Sheep</strong>对象，主要是增加了一个clone方法，具体如何实现克隆可以参考下面的示例：
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="n">Sheep</span><span class="w"> </span><span class="n">sheep</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Sheep</span><span class="p">(</span><span class="s">&quot;tom&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;白色&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">sheep</span><span class="p">.</span><span class="na">friend</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Sheep</span><span class="p">(</span><span class="s">&quot;jack&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s">&quot;黑色&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">Sheep</span><span class="w"> </span><span class="n">sheep2</span><span class="o">=</span><span class="p">(</span><span class="n">Sheep</span><span class="p">)</span><span class="n">sheep</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span>
<span class="w">        </span><span class="n">Sheep</span><span class="w"> </span><span class="n">sheep3</span><span class="o">=</span><span class="p">(</span><span class="n">Sheep</span><span class="p">)</span><span class="n">sheep</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span>
<span class="w">        </span><span class="n">Sheep</span><span class="w"> </span><span class="n">sheep4</span><span class="o">=</span><span class="p">(</span><span class="n">Sheep</span><span class="p">)</span><span class="n">sheep</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span>
<span class="w">        </span><span class="n">Sheep</span><span class="w"> </span><span class="n">sheep5</span><span class="o">=</span><span class="p">(</span><span class="n">Sheep</span><span class="p">)</span><span class="n">sheep</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span>
</code></pre></div></p>
<h3 id="_14">浅拷贝和深拷贝的讨论<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<h4 id="_15">浅拷贝的介绍<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<p>对于数据类型是基本数据类型的成员变量，浅拷贝会直接进行值传递，也就是将该属性值复制一份给新的对象。 对于数据类型是引用数据类型的成员变量，比如说成员变量是某个数组、某个类的对象等，那么<strong>浅拷贝会进行
引用传递，也就是只是将该成员变量的引用值（内存地址）复制一份给新的对象</strong>。因为实际上两个对象的该成员变量都指向同一个实例。在这种情况下，在一个对象中修改该成员变量会影响到另一个对象的该成员变量值。 前面我们克隆羊就是浅拷贝</p>
<blockquote>
<p>浅拷贝是使用默认的 clone()方法来实现。sheep = (Sheep) super.clone();</p>
</blockquote>
<h4 id="_16">深拷贝介绍<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<p>复制对象的所有基本数据类型的成员变量值。为所有引用数据类型的成员变量申请存储空间，并复制每个引用数据类型成员变量所引用的对象，直到该对象
可达的所有对象。也就是说，<strong>对象进行深拷贝要对整个对象(包括对象的引用类型)进行拷贝</strong>。
* 深拷贝实现方式 1：重写 clone 方法来实现深拷贝。
* 深拷贝实现方式 2：通过对象序列化实现深拷贝(推荐)</p>
<p>首先是第一种方式，重写clone方法来进行深拷贝。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DeepProtoType</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="p">,</span><span class="w"> </span><span class="n">Cloneable</span><span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DeepCloneableTarget</span><span class="w"> </span><span class="n">deepCloneableTarget</span><span class="p">;</span><span class="c1">//引用类型</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">DeepProtoType</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">}</span>

<span class="c1">// 完成深拷贝 1、使用clone方法</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">clone</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">CloneNotSupportedException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">deep</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="c1">//这里完成对基本属性和String的克隆</span>
<span class="w">        </span><span class="n">deep</span><span class="o">=</span><span class="kd">super</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span>
<span class="w">        </span><span class="c1">//对引用数据类型的属性，进行单独处理</span>
<span class="w">        </span><span class="n">DeepProtoType</span><span class="w"> </span><span class="n">deepProtoType</span><span class="o">=</span><span class="p">(</span><span class="n">DeepProtoType</span><span class="p">)</span><span class="n">deep</span><span class="p">;</span>
<span class="w">        </span><span class="n">deepProtoType</span><span class="p">.</span><span class="na">deepCloneableTarget</span><span class="o">=</span><span class="p">(</span><span class="n">DeepCloneableTarget</span><span class="p">)</span><span class="n">deepCloneableTarget</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">deepProtoType</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
这一种方法就是将类中的属性再利用clone方法进行复制克隆，但是更推荐使用下列方法，也就是使用序列化的方法。
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="c1">// 完成深拷贝 2、通过对象序列化方法</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">deepClone</span><span class="p">(){</span>
<span class="w">        </span><span class="c1">//创建流对象</span>
<span class="w">        </span><span class="n">ByteArrayOutputStream</span><span class="w"> </span><span class="n">bos</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">oos</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="n">ByteArrayInputStream</span><span class="w"> </span><span class="n">bis</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">ois</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">bos</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ByteArrayOutputStream</span><span class="p">();</span>
<span class="w">            </span><span class="n">oos</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="n">bos</span><span class="p">);</span>
<span class="w">            </span><span class="n">oos</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="w"> </span><span class="c1">//当前这个对象以对象流的方式输出</span>

<span class="w">            </span><span class="c1">// 反序列化</span>
<span class="w">            </span><span class="n">bis</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ByteArrayInputStream</span><span class="p">(</span><span class="n">bos</span><span class="p">.</span><span class="na">toByteArray</span><span class="p">());</span>
<span class="w">            </span><span class="n">ois</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="n">bis</span><span class="p">);</span>

<span class="w">            </span><span class="n">DeepProtoType</span><span class="w"> </span><span class="n">copyObj</span><span class="o">=</span><span class="p">(</span><span class="n">DeepProtoType</span><span class="p">)</span><span class="n">ois</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">copyObj</span><span class="p">;</span>

<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
</code></pre></div>
一般推荐使用第二种方法（虽然我自己个人对第二种方式没有特别透彻的理解），第一种方式的方法如果存在多个引用类型的对象，处理起来会较为麻烦。</p>
<h3 id="_17">原型模式的细节<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<p>（1）创建新的对象比较复杂时，可以利用原型模式简化对象的创建过程，同时也能够提高效率</p>
<p>（2） 不用重新初始化对象，而是动态地获得对象运行时的状态
（3）如果原始对象发生变化(增加或者减少属性)，其它克隆对象的也会发生相应的变化，无需修改代码</p>
<p>（4） 在实现深克隆的时候可能需要比较复杂的代码</p>
<p>（5） 缺点：需要为每一个类配备一个克隆方法，这对全新的类来说不是很难，但对已有的类进行改造时，需要修改其源代码，违背了 ocp 原则，这点请同学们注意.</p>
<h2 id="_18">七、建造者模式<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h2>
<h3 id="_19">问题引入<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<p>需要建房子：这一过程为打桩、砌墙、封顶。房子有各种各样的，比如普通房，高楼，别墅，各种房子的过程虽然一样，但是要求不要相同的。</p>
<h3 id="_20">传统方式解决<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p>传统方式解决较为简单，通过建立一个抽象的房子类，里面包含了建房子的过程：打桩、砌墙、封顶的抽象方法。然后不同的房子实现其中的方法。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AbstractHouse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 打地基</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">buildBasic</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// 砌墙</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">buildWalls</span><span class="p">();</span>
<span class="w">    </span><span class="c1">//封顶</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">roofed</span><span class="p">();</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">build</span><span class="p">(){</span>
<span class="w">        </span><span class="n">buildBasic</span><span class="p">();</span>
<span class="w">        </span><span class="n">buildWalls</span><span class="p">();</span>
<span class="w">        </span><span class="n">roofed</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
普通房子实现这个抽象的方法，然后建造普通房子就可以通过实现这个普通房子的类就可以了。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CommonHouse</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractHouse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">buildBasic</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;给普通房子打地基&quot;</span><span class="p">);</span><span class="w"> </span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">buildWalls</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;给普通房子砌墙&quot;</span><span class="p">);</span><span class="w">   </span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">roofed</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;给普通房子封顶&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w">   </span>
<span class="p">}</span>
</code></pre></div>
传统方法优点是比较好理解，简单易操作。 设计的程序结构，过于简单，没有设计缓存层对象，程序的扩展和维护不好. 也就是说，这种设计方案，把产品(即：房子) 和 创建产品的过程(即：建房子流程) 封装在一起，耦合性增强了。</p>
<h3 id="_21">建造者模式介绍<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<h4 id="_22">基本介绍<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h4>
<p>建造者模式（Builder Pattern） 又叫生成器模式，是一种对象构建模式。它可以将复杂对象的建造过程抽象出来（抽象类别），使这个抽象过程的不同实现方法可以构造出不同表现（属性）的对象。 建造者模式 是一步一步创建一个复杂的对象，它允许用户只通过指定复杂对象的类型和内容就可以构建它们，
用户不需要知道内部的具体构建细节。有四个角色：</p>
<ul>
<li>Product（产品角色）： 一个具体的产品对象。</li>
<li>Builder（抽象建造者）： 创建一个 Product 对象的各个部件指定的 接口/抽象类。</li>
<li>ConcreteBuilder（具体建造者）： 实现接口，构建和装配各个部件。</li>
<li>Director（指挥者）： 构建一个使用 Builder 接口的对象。它主要是用于创建一个复杂的对象。它主要有两个作用，一是：隔离了客户与对象的生产过程，二是：负责控制产品对象的生产过程。</li>
</ul>
<p><img alt="建造者模式类图" src="../img/buildpattern.webp" /></p>
<p>抽象的建造者代码：
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HouseBuilder</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">House</span><span class="w"> </span><span class="n">house</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">House</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// 将制作的流程写好，抽象的方法</span>
<span class="w">    </span><span class="c1">// 打地基</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">buildBasic</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// 砌墙</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">buildWalls</span><span class="p">();</span>
<span class="w">    </span><span class="c1">//封顶</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">roofed</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// 建造好房子，将房子返回</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">House</span><span class="w"> </span><span class="nf">buildHouse</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">house</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
将制作的流程写成抽象的方法，并将建好的房子返回。然后具体的房子建造的细节需要由实现的子类实现，比如我要建造高楼，要用一个高楼的实现类来继承该类，例如下面的<strong>HighBuild</strong>类
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HighBuilding</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">HouseBuilder</span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">buildBasic</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;高楼打地基100米&quot;</span><span class="p">);</span><span class="w">        </span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">buildWalls</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;高楼砌墙20cm&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">roofed</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;高楼的屋顶&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
这个就是一个具体的建造者，用来建造具体的房子。下面来看一下指挥者，主要是用来创建一个复杂的对象。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HouseDirector</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">HouseBuilder</span><span class="w"> </span><span class="n">houseBuilder</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// 通过构造器传入</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">HouseDirector</span><span class="p">(</span><span class="n">HouseBuilder</span><span class="w"> </span><span class="n">houseBuilder</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">houseBuilder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">houseBuilder</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setHouseBuilder</span><span class="p">(</span><span class="n">HouseBuilder</span><span class="w"> </span><span class="n">houseBuilder</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">houseBuilder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">houseBuilder</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// 如何处理建造房子的流程，交给指挥者</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">House</span><span class="w"> </span><span class="nf">constructHouse</span><span class="p">(){</span>
<span class="w">        </span><span class="n">houseBuilder</span><span class="p">.</span><span class="na">buildBasic</span><span class="p">();</span>
<span class="w">        </span><span class="n">houseBuilder</span><span class="p">.</span><span class="na">buildWalls</span><span class="p">();</span>
<span class="w">        </span><span class="n">houseBuilder</span><span class="p">.</span><span class="na">roofed</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">houseBuilder</span><span class="p">.</span><span class="na">buildHouse</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
在这个类中，我们通过构造方法（或者set方法）将<strong>HouseBuilder</strong>对象传入。然后通过<strong>constructHouse</strong>将具体流程交给指挥者。最后在主方法中调用。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Client</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 盖普通的房子</span>
<span class="w">        </span><span class="n">CommonHouse</span><span class="w"> </span><span class="n">commonHouse</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">CommonHouse</span><span class="p">();</span>
<span class="w">        </span><span class="c1">// 准备创建房子的指挥者</span>
<span class="w">        </span><span class="n">HouseDirector</span><span class="w"> </span><span class="n">houseDirector</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">HouseDirector</span><span class="p">(</span><span class="n">commonHouse</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// 完成盖房子，返回产品</span>
<span class="w">        </span><span class="n">House</span><span class="w"> </span><span class="n">house</span><span class="o">=</span><span class="n">houseDirector</span><span class="p">.</span><span class="na">constructHouse</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<h4 id="_23">具体细节<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h4>
<p>（1）客户端(使用程序)不必知道产品内部组成的细节，将产品本身与产品的创建过程解耦，使得相同的创建过程可以创建不同的产品对象。（2）每一个具体建造者都相对独立，而与其他的具体建造者无关，因此可以很方便地替换具体建造者或增加新的具体建造者， 用户使用不同的具体建造者即可得到不同的产品对象。 （3）可以更加精细地控制产品的创建过程 。将复杂产品的创建步骤分解在不同的方法中，使得创建过程更加清晰，也更方便使用程序来控制创建过程（4） 增加新的具体建造者无须修改原有类库的代码，指挥者类针对抽象建造者类编程，系统扩展方便，符合“开闭原则”（5） 建造者模式所创建的产品一般具有较多的共同点，其组成部分相似，如果产品之间的差异性很大，则不适合使用建造者模式，因此其使用范围受到一定的限制。（6）如果产品的内部变化复杂，可能会导致需要定义很多具体建造者类来实现这种变化，导致系统变得很庞大，因此在这种情况下，要考虑是否选择建造者模式。</p>
<p><strong>抽象工厂模式 VS 建造者模式</strong></p>
<p>抽象工厂模式实现对产品家族的创建，一个产品家族是这样的一系列产品：具有不同分类维度的产品组合，采用抽象工厂模式不需要关心构建过程，只关心什么产品由什么工厂生产即可。而建造者模式则是要求按照指定的蓝图建造产品，它的主要目的是通过组装零配件而产生一个新产品。</p>
<h2 id="_24">八、设配器模式<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h2>
<p>适配器模式(Adapter Pattern)将某个类的接口转换成客户端期望的另一个接口表示，主的目的是兼容性，让原本因接口不匹配不能一起工作的两个类可以协同工作。其别名为包装器(Wrapper)。适配器模式属于结构型模式。主要分为三类：<strong>类适配器模式、对象适配器模式、接口适配器模式</strong>。</p>
<h3 id="_25">基本原理<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h3>
<p>1) 适配器模式：将一个类的接口转换成另一种接口.让原本接口不兼容的类可以兼容
2) 从用户的角度看不到被适配者，是解耦的
3) 用户调用适配器转化出来的目标接口方法，适配器再调用被适配者的相关接口方法
4) 用户收到反馈结果，感觉只是和目标接口交互。</p>
<h3 id="_26">类适配器<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<p>Adapter类，通过继承src类，实现dst类接口，完成src-&gt;dst的适配。以生活中充电器的例子来讲解适配器，充电器本身相当于Adapter，220V 交流电相当于 src (即被适配者)，我们的目的 dst(即目标)是 5V 直流电。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Voltage220V</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">output220V</span><span class="p">(){</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="mi">220</span><span class="p">;</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;电压=&quot;</span><span class="o">+</span><span class="n">src</span><span class="o">+</span><span class="s">&quot;伏&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">src</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>上面这个是src类，下面是dst类接口
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">IVoltage5V</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">output5V</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
我们的目的是实现一个<strong>Adapter</strong>类来完成适配。
<div class="highlight"><pre><span></span><code><span class="c1">// 适配器类</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">VoltageAdapter</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Voltage220V</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IVoltage5V</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">output5V</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 获取到220V的电压</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">srcV</span><span class="o">=</span><span class="n">output220V</span><span class="p">();</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">dstV</span><span class="o">=</span><span class="n">srcV</span><span class="o">/</span><span class="mi">44</span><span class="p">;</span><span class="w"> </span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">dstV</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
通过类适配器就可以完成电压的转换。但是需要注意：</p>
<blockquote>
<p>Java 是单继承机制，所以类适配器需要继承 src 类这一点算是一个缺点, 因为这要求 dst 必须是接口，有一定局限性;
src 类的方法在 Adapter 中都会暴露出来，也增加了使用的成本。由于其继承了 src 类，所以它可以根据需求重写 src 类的方法，使得 Adapter的灵活性增强了。</p>
</blockquote>
<h3 id="_27">对象适配器<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<p>基本思路和类的适配器模式相同，只是将Adapter 类作修改，不是继承 src 类，而是持有 src 类的实例，以解决兼容性的问题。 即：持有src类，实现dst类接口，完成 src-&gt;dst 的适配。<strong>根据“合成复用原则”，在系统中尽量使用关联关系（聚合）来替代继承关系</strong>。对象适配器模式是适配器模式常用的一种。
<div class="highlight"><pre><span></span><code><span class="c1">// 适配器类</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">VoltageAdapter</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IVoltage5V</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Voltage220V</span><span class="w"> </span><span class="n">voltage220v</span><span class="p">;</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">VoltageAdapter</span><span class="p">(</span><span class="n">Voltage220V</span><span class="w"> </span><span class="n">voltage220v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">voltage220v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">voltage220v</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">output5V</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">dst</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">voltage220v</span><span class="o">!=</span><span class="kc">null</span><span class="p">){</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="n">voltage220v</span><span class="p">.</span><span class="na">output220V</span><span class="p">();</span>
<span class="w">            </span><span class="n">dst</span><span class="o">=</span><span class="n">src</span><span class="o">/</span><span class="mi">44</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">dst</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w">    </span>
<span class="p">}</span>
</code></pre></div>
这种方法，与上面的方法类似，但不是通过继承的方式，而是通过构造方法（或者set）获取实例。</p>
<blockquote>
<p>对象适配器和类适配器其实算是同一种思想，只不过实现方式不同。根据合成复用原则，使用组合替代继承， 所以它解决了类适配器必须继承 src的局限性问题，也不再要求dst必须是接口。使用成本更低，更灵活</p>
</blockquote>
<h3 id="_28">接口适配器<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h3>
<p>核心思路：当不需要全部实现接口提供的方法时，可先设计一个抽象类实现接口，并为该接口中每个方法提供一个默认实现（空方法），那么该抽象类的子类可有选择地覆盖父类的某些方法来实现需求。适用于一个接口不想使用其所有的方法的情况。</p>
<h3 id="_29">适配器细节<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<p>三种命名方式，是根据src是以怎样的形式给到 Adapter（在Adapter里的形式）来命名的。类适配器：以类给到，在Adapter里，就是将src当做类，继承。对象适配器：以对象给到，在Adapter 里，将 src 作为一个对象，持有。接口适配器：以接口给到，在Adapter里，将src作为一个接口，实现。Adapter 模式最大的作用还是将原本不兼容的接口融合在一起工作。</p>
<h2 id="_30">九、桥接模式<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h2>
<h3 id="_31">基本介绍<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<p>桥接模式(Bridge 模式)是指：将实现与抽象放在两个不同的类层次中，使两个层次可以独立改变。是一种结构型设计模式。 
Bridge 模式基于类的最小设计原则，通过使用封装、聚合及继承等行为让不同的类承担不同的职责。它的主要特点是把抽象(Abstraction)与行为实现(Implementation)分离开来，从而可以保持各部分的独立性以及应对他们的功能扩展。</p>
<p><img alt="桥接模式" src="../img/bridge.webp" /></p>
<p>抽象类(Abstraction)：维护了 Implementor/即它的实现类 ConcreteImplementorA， 二者是聚合关系， Abstraction充当桥接类。RefinedAbstraction：是Abstraction抽象类的子类。Implementor : 行为实现类的接口。ConcreteImplementorA/B：行为的具体实现类。</p>
<h3 id="_32">示例代码<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h3>
<p>下面看一些具体的例子。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Phone</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 组合品牌</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Brand</span><span class="w"> </span><span class="n">brand</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// 构造器</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Phone</span><span class="p">(</span><span class="n">Brand</span><span class="w"> </span><span class="n">brand</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">brand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">brand</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w">   </span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">open</span><span class="p">(){</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">brand</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">close</span><span class="p">(){</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">brand</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">call</span><span class="p">(){</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">brand</span><span class="p">.</span><span class="na">call</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
首先这是一个抽象的手机类，然后，下面是手机的类型（折叠式或者滑盖式）。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UpRightPhone</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Phone</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="c1">// 构造器</span>
<span class="w">     </span><span class="kd">public</span><span class="w"> </span><span class="nf">UpRightPhone</span><span class="p">(</span><span class="n">Brand</span><span class="w"> </span><span class="n">brand</span><span class="p">){</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">brand</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">open</span><span class="p">(){</span>
<span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;直立样式的手机&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">close</span><span class="p">(){</span>
<span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;直立样式的手机&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">call</span><span class="p">(){</span>
<span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">call</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;直立样式的手机&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
然后是手机的功能接口
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Brand</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">open</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">close</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">call</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
下面是具体的手机品牌
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">XiaoMi</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Brand</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">open</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;小米手机开机了&quot;</span><span class="p">);</span><span class="w"> </span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">close</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;小米手机关机了&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">call</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;小米手机打电话&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
最后调用者调用相关的方法实现具体的功能。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 获取折叠式手机（样式加品牌）</span>
<span class="w">        </span><span class="n">Phone</span><span class="w"> </span><span class="n">phone1</span><span class="w"> </span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">FoldedPhone</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">XiaoMi</span><span class="p">());</span>
<span class="w">        </span><span class="n">phone1</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
<span class="w">        </span><span class="n">phone1</span><span class="p">.</span><span class="na">call</span><span class="p">();</span>
<span class="w">        </span><span class="n">phone1</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></p>
<h3 id="_33">细节和注意事项<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h3>
<p>（1）实现了抽象和实现部分的分离，从而极大的提供了系统的灵活性，让抽象部分和实现部分独立开来，这有助于系统进行分层设计，从而产生更好的结构化系统。（2） 对于系统的高层部分，只需要知道抽象部分和实现部分的接口就可以了，其它的部分由具体业务来完成。（3）桥接模式替代多层继承方案，可以减少子类的个数，降低系统的管理和维护成本。（4）桥接模式的引入增加了系统的理解和设计难度，由于聚合关联关系建立在抽象层，要求开发者针对抽象进行设计和编程。
桥接模式要求正确识别出系统中两个独立变化的维度(抽象、和实现)，因此其使用范围有一定的局限性，即需要有这样的应用场景。</p>
<h3 id="_34">常用场景<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h3>
<p>1) -JDBC 驱动程序
2) -银行转账系统
转账分类: 网上转账，柜台转账，AMT 转账
转账用户类型：普通用户，银卡用户，金卡用户.. 
3) -消息管理
* 消息类型：即时消息，延时消息
* 消息分类：手机短信，邮件消息，QQ 消息...</p>
<h2 id="_35">十、装饰者模式<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h2>
<h3 id="_36">问题引入<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h3>
<p>1) 咖啡种类/单品咖啡：Espresso(意大利浓咖啡)、ShortBlack、LongBlack(美式咖啡)、Decaf(无因咖啡)
2) 调料：Milk、Soy(豆浆)、Chocolate
3) 要求在扩展新的咖啡种类时，具有良好的扩展性、改动方便、维护方便
4) 使用 OO 的来计算不同种类咖啡的费用: 客户可以点单品咖啡，也可以单品咖啡+调料组合。</p>
<h3 id="_37">传统解决方案<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h3>
<p>为每一种单品Coffee创建对应的类，然后为对应的调料也建立相应的类，然后进行组合，这样处理会比较简单，但是会存在一个问题，也就是当我们增加一个单品咖啡，或者一个新的调料，类的数量就会倍增，就会出现类爆炸。</p>
<p>因为咖啡单品+调料组合会造成类的倍增，因此可以做改进，将调料内置到 Drink 类，这样就不会造成类数量过多。从而提高项目的维护性。这样可以控制类的数量，不至于造成很多的类，在增加或者删除调料种类时，代码的维护量很大。</p>
<h3 id="_38">装饰者模式<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h3>
<h4 id="_39">基本原理<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h4>
<p>装饰者模式：动态的将新功能附加到对象上。在对象功能扩展方面，它比继承更有弹性，装饰者模式也体现了开闭原则(ocp)。
+ 装饰者模式就像打包一个快递
    - 主体：比如：陶瓷、衣服 (Component) // 被装饰者
    - 包装：比如：报纸填充、塑料泡沫、纸板、木板(Decorator)
+ Component 主体：比如类似前面的 Drink
+ ConcreteComponent 和 Decorator
    - ConcreteComponent：具体的主体，比如前面的各个单品咖啡
    - Decorator: 装饰者，比如各调料。</p>
<h4 id="_40">代码示例<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h4>
<p>首先式抽象的<strong>Drink</strong>类
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Drink</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">des</span><span class="p">;</span><span class="w"> </span><span class="c1">//描述</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">price</span><span class="o">=</span><span class="mf">0.0f</span><span class="p">;</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">des</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setDes</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">des</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">des</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">des</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">getPrice</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">price</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setPrice</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">price</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">price</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">//计算费用的抽象方法</span>
<span class="w">    </span><span class="c1">// 由子类来实现</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">cost</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
然后是实现了<strong>Drink</strong>类的<strong>Coffee</strong>类。主要是实现了得到价格的方法。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Coffee</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Drink</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">cost</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getPrice</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
然后是继承Coffee具体的Coffee类
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LongBlack</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Coffee</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">LongBlack</span><span class="p">(){</span>
<span class="w">        </span><span class="n">setDes</span><span class="p">(</span><span class="s">&quot;LongBlack&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">setPrice</span><span class="p">(</span><span class="mf">5.0f</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
然后是<strong>Decorator</strong>类（修饰者类）
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Decorator</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Drink</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Drink</span><span class="w"> </span><span class="n">obj</span><span class="p">;</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Decorator</span><span class="p">(</span><span class="n">Drink</span><span class="w"> </span><span class="n">obj</span><span class="p">){</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="nf">cost</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getPrice</span><span class="p">()</span><span class="o">+</span><span class="n">obj</span><span class="p">.</span><span class="na">cost</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">des</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span><span class="kd">super</span><span class="p">.</span><span class="na">getPrice</span><span class="p">()</span><span class="o">+</span><span class="s">&quot; &amp;&amp; &quot;</span><span class="o">+</span><span class="n">obj</span><span class="p">.</span><span class="na">getDes</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
然后是具体的<strong>Decorator</strong>类，例如Choloate
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Chocolate</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Decorator</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Chocolate</span><span class="p">(</span><span class="n">Drink</span><span class="w"> </span><span class="n">obj</span><span class="p">){</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span>
<span class="w">        </span><span class="n">setDes</span><span class="p">(</span><span class="s">&quot; 巧克力 &quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">setPrice</span><span class="p">(</span><span class="mf">3.0f</span><span class="p">);</span><span class="w">  </span><span class="c1">//当前调味品的价格</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
通过继承<strong>Decorator</strong>，设置其中的描述和价格。最后我们可以通过以上的类进行我们想要的咖啡组合例如一份奶+两份巧克力的LongBlack咖啡
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 装饰着模式下的订单：2份巧克力+一份牛奶的LongBlack</span>
<span class="w">    </span><span class="c1">// 先点一份LongBlack</span>
<span class="w">    </span><span class="n">Drink</span><span class="w"> </span><span class="n">order</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">LongBlack</span><span class="p">();</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;费用1=&quot;</span><span class="o">+</span><span class="n">order</span><span class="p">.</span><span class="na">cost</span><span class="p">());</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;描述=&quot;</span><span class="o">+</span><span class="n">order</span><span class="p">.</span><span class="na">getDes</span><span class="p">());</span>
<span class="w">    </span><span class="c1">// 加入一份牛奶</span>
<span class="w">    </span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Milk</span><span class="p">(</span><span class="n">order</span><span class="p">);</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;费用2=&quot;</span><span class="o">+</span><span class="n">order</span><span class="p">.</span><span class="na">cost</span><span class="p">());</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;描述=&quot;</span><span class="o">+</span><span class="n">order</span><span class="p">.</span><span class="na">getDes</span><span class="p">());</span>
<span class="w">    </span><span class="c1">// 加入一份巧克力</span>
<span class="w">    </span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Chocolate</span><span class="p">(</span><span class="n">order</span><span class="p">);</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;费用3=&quot;</span><span class="o">+</span><span class="n">order</span><span class="p">.</span><span class="na">cost</span><span class="p">());</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;描述=&quot;</span><span class="o">+</span><span class="n">order</span><span class="p">.</span><span class="na">getDes</span><span class="p">());</span>
<span class="w">    </span><span class="c1">// 加入一份巧克力</span>
<span class="w">    </span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">Chocolate</span><span class="p">(</span><span class="n">order</span><span class="p">);</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;费用3=&quot;</span><span class="o">+</span><span class="n">order</span><span class="p">.</span><span class="na">cost</span><span class="p">());</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;描述=&quot;</span><span class="o">+</span><span class="n">order</span><span class="p">.</span><span class="na">getDes</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div></p>
<h4 id="_41">优缺点<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h4>
<ul>
<li>Decorator模式与继承关系的目的都是要扩展对象的功能，但是Decorator可以提供比继承更多的灵活性。</li>
<li>通过使用不同的具体装饰类以及这些装饰类的排列组合，设计师可以创造出很多不同行为的组合。</li>
<li>这种比继承更加灵活机动的特性，也同时意味着更加多的复杂性。</li>
<li>装饰模式会导致设计中出现许多小类，如果过度使用，会使程序变得很复杂。</li>
<li>装饰模式是针对抽象组件（Component）类型编程。但是，如果你要针对具体组件编程时，就应该重新思考你的应用架构，以及装饰者是否合适。当然也可以改变Component接口，增加新的公开的行为，实现“半透明”的装饰者模式。在实际项目中要做出最佳选择。</li>
</ul>
<h2 id="_42">十一、组合模式<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h2>
<h3 id="_43">问题引入<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h3>
<p>编写程序展示一个学校院系结构：需求是这样，要在一个页面中展示出学校的院系组成，一个学校有多个学院，一个学院有多个系。使用常见的方法来解决： <strong>将学院看做是学校的子类，系是学院的子类</strong>。</p>
<blockquote>
<p>实际上我们的要求是 ：在一个页面中展示出学校的院系组成，一个学校有多个学院，一个学院有多个系， 因此这种方案，不能很好实现的管理的操作，比如对学院、系的添加，删除，遍历等。</p>
</blockquote>
<p><strong>解决方案</strong>：把学校、院、系都看做是组织结构，他们之间没有继承的关系，而是一个树形结构，可以更好的实现管理操作。 =&gt; 组合模式</p>
<h3 id="_44">基本介绍<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h3>
<p>组合模式（Composite Pattern），又叫部分整体模式，它创建了对象组的树形结构，将对象组合成树状结构以表示“整体-部分”的层次关系。组合模式依据树形结构来组合对象，用来表示部分以及整体层次。组合模式使得<strong>用户对单个对象和组合对象的访问具有一致性</strong>，即：组合能让客户以一致的方式处理个别对象以及组合对象。下面看一下具体的代码实现。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">OrganizationComponent</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">des</span><span class="p">;</span>

<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="n">organizationComponent</span><span class="p">){</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UnsupportedOperationException</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="n">organizationComponent</span><span class="p">){</span>

<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UnsupportedOperationException</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">OrganizationComponent</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">des</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">des</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">des</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">des</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setDes</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">des</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">des</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">des</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 方法print 做成抽象，下面的子类都需要实现</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">();</span><span class="w">   </span>
<span class="p">}</span>
</code></pre></div>
上面是一个抽象的基类，其它的类继承该类，并实现其中的抽象方法。下面是学校类。
<div class="highlight"><pre><span></span><code><span class="c1">// University就是 Composite ,可以管理College</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">University</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">OrganizationComponent</span><span class="p">{</span>

<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">OrganizationComponent</span><span class="o">&gt;</span><span class="w"> </span><span class="n">organizationComponents</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">University</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">des</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">des</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="n">organizationComponent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">organizationComponents</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">organizationComponent</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="n">organizationComponent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">organizationComponents</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">organizationComponent</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getName</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getDes</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;---------------&quot;</span><span class="o">+</span><span class="n">getName</span><span class="p">()</span><span class="o">+</span><span class="s">&quot;-----------------&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="n">organizationComponent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">organizationComponents</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">organizationComponent</span><span class="p">.</span><span class="na">print</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
一个学校可以有多个学院，学院也要继承同样的抽象类。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">College</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">OrganizationComponent</span><span class="p">{</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">OrganizationComponent</span><span class="o">&gt;</span><span class="w"> </span><span class="n">organizationComponents</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">College</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">des</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">des</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="n">organizationComponent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">organizationComponents</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">organizationComponent</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="n">organizationComponent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">organizationComponents</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">organizationComponent</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getName</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getDes</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;---------------&quot;</span><span class="o">+</span><span class="n">getName</span><span class="p">()</span><span class="o">+</span><span class="s">&quot;-----------------&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="n">organizationComponent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">organizationComponents</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">organizationComponent</span><span class="p">.</span><span class="na">print</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
最后是每个学院可以有不同的专业，不同的系，但是专业下面没有额外的类了，下面是专业类，同样继承抽象类。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Department</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Department</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">des</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">des</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getName</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">getDes</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">getName</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span><span class="w">   </span>
<span class="p">}</span>
</code></pre></div>
下面看一下如何具体的使用这种设计模式。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">//创建学校</span>
<span class="w">        </span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="n">university</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">University</span><span class="p">(</span><span class="s">&quot;清华大学&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot; 中国顶级的大学 &quot;</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// 创建学院</span>
<span class="w">        </span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="n">computerCollege</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">College</span><span class="p">(</span><span class="s">&quot;计算机学院&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;计算机专业&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">OrganizationComponent</span><span class="w"> </span><span class="n">softCollege</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">College</span><span class="p">(</span><span class="s">&quot;软件学院&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;软件工程专业&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// 创建各个学院下面的系</span>
<span class="w">        </span><span class="n">computerCollege</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Department</span><span class="p">(</span><span class="s">&quot;计算机科学与技术&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;计算机科学与技术&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="n">computerCollege</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Department</span><span class="p">(</span><span class="s">&quot;信息安全&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;信息安全&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="n">computerCollege</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Department</span><span class="p">(</span><span class="s">&quot;网络工程&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;网络工程&quot;</span><span class="p">));</span>

<span class="w">        </span><span class="n">softCollege</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Department</span><span class="p">(</span><span class="s">&quot;软件工程&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;软件工程&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="n">softCollege</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Department</span><span class="p">(</span><span class="s">&quot;信息工程&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;信息工程&quot;</span><span class="p">));</span>

<span class="w">        </span><span class="n">university</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">computerCollege</span><span class="p">);</span>
<span class="w">        </span><span class="n">university</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">softCollege</span><span class="p">);</span>
<span class="w">        </span><span class="n">university</span><span class="p">.</span><span class="na">print</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></p>
<h3 id="_45">注意事项和细节<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h3>
<p>1) 简化客户端操作。客户端只需要面对一致的对象而不用考虑整体部分或者节点叶子的问题。
2) 具有较强的扩展性。当我们要更改组合对象时，我们只需要调整内部的层次关系，客户端不用做出任何改动. 3) 方便创建出复杂的层次结构。客户端不用理会组合里面的组成细节，容易添加节点或者叶子从而创建出复杂的树形结构
4) 需要遍历组织机构，或者处理的对象具有树形结构时, 非常适合使用组合模式. 5) 要求较高的抽象性，如果节点和叶子有很多差异性的话，比如很多方法和属性都不一样，不适合使用组合模式。</p>
<h2 id="_46">十二、外观模式<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h2>
<h3 id="_47">问题引入<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h3>
<p>组建一个家庭影院：
DVD 播放器、投影仪、自动屏幕、环绕立体声、爆米花机，要求完成使用家庭影院的功能，其过程为，直接用遥控器，统筹各设备开关。
开爆米花机-&gt;放下屏幕-&gt;开投影仪-&gt;开音响-&gt;开 DVD，选 dvd-&gt;去拿爆米花-&gt;调暗灯光-&gt;播放-&gt;
观影结束后，关闭各种设备。</p>
<h3 id="_48">传统方式解决<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h3>
<p>为每个用品创建对应的类与对象，以及需要使用的一系列方法，然后进行调用。但是这种方法存在较大的问题和复杂度。 </p>
<p>创建各个子系统的对象，并直接去调用子系统（对象）相关方法，会造成调用过程混乱，没有清晰的过程。不利于去维护对子系统的操作。</p>
<p><strong>解决思路</strong>：定义一个高层接口，给子系统中的一组接口提供一个一致的界面(比如在高层接口提供四个方法ready, play, pause, end )，用来访问子系统中的一群接口。 也就是说 就是通过定义一个一致的接口(界面类)，用以屏蔽内部子系统的细节，使得调用端只需跟这个接口发
生调用，而无需关心这个子系统的内部细节 =&gt; 外观模式。（自我感觉就是加了一层，没什么是加一层解决不了的，如果有，那就再加一层）。</p>
<h3 id="_49">外观模式介绍<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h3>
<p>外观模式（Facade），也叫过程模式：外观模式为子系统中的一组接口提供一个一致的界面，此模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。外观模式通过定义一个一致的接口，用以屏蔽内部子系统的细节，使得调用端只需跟这个接口发生调用，而无需关心这个子系统的内部细节。</p>
<p>下面是代码示例
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DVDPlayer</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 使用单例模式，饿汉式</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">DVDPlayer</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DVDPlayer</span><span class="p">();</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">DVDPlayer</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">on</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot; dvd on &quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">off</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;dvd off&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">play</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;dvd is playing&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">pause</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;dvd pause&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
上面的代码是DVDPlayer的一些操作
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Screen</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Screen</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Screen</span><span class="p">();</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Screen</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">up</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot; screen up &quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">down</span><span class="p">(){</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot; screen down &quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
上面是Screen屏幕的一些操作。还有许多的操作与上述情况类似，不再写了，下面是<strong>多加的那一层</strong>，也就是调用各个子系统的接口。
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HomeTheaterFacade</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// 定义各个子系统的对象</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">TheaterLight</span><span class="w"> </span><span class="n">theaterLight</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Popcorn</span><span class="w"> </span><span class="n">popcorn</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Projector</span><span class="w"> </span><span class="n">projector</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Screen</span><span class="w"> </span><span class="n">screen</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Setero</span><span class="w"> </span><span class="n">setero</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">DVDPlayer</span><span class="w"> </span><span class="n">dvdPlayer</span><span class="p">;</span><span class="w"> </span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">HomeTheaterFacade</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">theaterLight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TheaterLight</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">popcorn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Popcorn</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">projector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Projector</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">screen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Screen</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">setero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Setero</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">dvdPlayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DVDPlayer</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 操作分为4步</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">ready</span><span class="p">(){</span>
<span class="w">        </span><span class="n">popcorn</span><span class="p">.</span><span class="na">on</span><span class="p">();</span>
<span class="w">        </span><span class="n">popcorn</span><span class="p">.</span><span class="na">pop</span><span class="p">();</span>
<span class="w">        </span><span class="n">screen</span><span class="p">.</span><span class="na">down</span><span class="p">();</span>
<span class="w">        </span><span class="n">projector</span><span class="p">.</span><span class="na">on</span><span class="p">();</span>
<span class="w">        </span><span class="n">setero</span><span class="p">.</span><span class="na">on</span><span class="p">();</span>
<span class="w">        </span><span class="n">dvdPlayer</span><span class="p">.</span><span class="na">on</span><span class="p">();</span>
<span class="w">        </span><span class="n">theaterLight</span><span class="p">.</span><span class="na">dim</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">play</span><span class="p">(){</span>
<span class="w">        </span><span class="n">dvdPlayer</span><span class="p">.</span><span class="na">play</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">pause</span><span class="p">(){</span>
<span class="w">        </span><span class="n">dvdPlayer</span><span class="p">.</span><span class="na">pause</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">end</span><span class="p">(){</span>
<span class="w">        </span><span class="n">popcorn</span><span class="p">.</span><span class="na">off</span><span class="p">();</span>
<span class="w">        </span><span class="n">theaterLight</span><span class="p">.</span><span class="na">bright</span><span class="p">();</span>
<span class="w">        </span><span class="n">screen</span><span class="p">.</span><span class="na">up</span><span class="p">();</span>
<span class="w">        </span><span class="n">projector</span><span class="p">.</span><span class="na">off</span><span class="p">();</span>
<span class="w">        </span><span class="n">setero</span><span class="p">.</span><span class="na">off</span><span class="p">();</span>
<span class="w">        </span><span class="n">dvdPlayer</span><span class="p">.</span><span class="na">off</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
最后是调用这个类，来完成家庭影院的功能。
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">HomeTheaterFacade</span><span class="w"> </span><span class="n">homeTheaterFacade</span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">HomeTheaterFacade</span><span class="p">();</span>
<span class="w">        </span><span class="n">homeTheaterFacade</span><span class="p">.</span><span class="na">ready</span><span class="p">();</span>
<span class="w">        </span><span class="n">homeTheaterFacade</span><span class="p">.</span><span class="na">play</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></p>
<h3 id="_50">注意事项和细节<a class="headerlink" href="#_50" title="Permanent link">&para;</a></h3>
<ul>
<li>外观模式对外屏蔽了子系统的细节，因此外观模式降低了客户端对子系统使用的复杂性</li>
<li>外观模式对客户端与子系统的耦合关系 - 解耦，让子系统内部的模块更易维护和扩展</li>
<li>通过合理的使用外观模式，可以帮我们更好的划分访问的层次</li>
<li>当系统需要进行分层设计时，可以考虑使用 Facade 模式</li>
<li>在维护一个遗留的大型系统时，可能这个系统已经变得非常难以维护和扩展，此时可以考虑为新系统开发一个
Facade 类，来提供遗留系统的比较清晰简单的接口，让新系统与 Facade 类交互，提高复用性</li>
<li>不能过多的或者不合理的使用外观模式，使用外观模式好，还是直接调用模块好。要以让系统有层次，利于维护为目的。</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy;
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://space.bilibili.com/448214169" target="_blank" rel="noopener" title="Bilibili" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0q13.2 0 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0q13.2 0 21.9 8.603c5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/zhangzhiwei-zzw" target="_blank" rel="noopener" title="GitHub | zhangzhiwei-zzw" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.top", "navigation.indexes", "navigation.expand", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../../mkdocs/javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>