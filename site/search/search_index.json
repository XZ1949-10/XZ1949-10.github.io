{"config":{"lang":["en","ja"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Home","text":"\ud83d\ude4b Hello  **\u6211\u4eec\u6b63\u5728\u8ba9\u8fd9\u4e2a\u4e16\u754c\u53d8\u5f97\u66f4\u52a0\u7f8e\u597d\uff0c\u901a\u8fc7\u4ee3\u7801\u7684\u91cd\u590d\u4f7f\u7528\u548c\u5ef6\u5c55\u6784\u5efa\u5b8c\u7f8e\u4f53\u7cfb\u3002**   <p> We're making the world a better place. Through constructing elegant hierarchies for maximum code reuse and extensibility.</p> About me Habits Recent"},{"location":"about/","title":"\u8fd9\u4e2a\u7f51\u7ad9\u662f\u4ecegithub\u4e0a\u627e\u5230\u7684\u6a21\u677f\u642d\u5efa\u7684\uff0c\u4f7f\u7528\u4e86github-page\u7684\u529f\u80fd\u3002","text":""},{"location":"C%2B%2B/","title":"C/C++\u5b66\u4e60","text":"<p>\u70b9\u51fb\u5de6\u4fa7\u67e5\u770b\u76f8\u5173\u5185\u5bb9</p>"},{"location":"C%2B%2B/C%2B%2B%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/","title":"C/C++\u56de\u8c03\u51fd\u6570","text":"<p>\u9996\u5148\u770b\u4e00\u4e0b\u56de\u8c03\u51fd\u6570\u7684\u89e3\u91ca\uff1a\u56de\u8c03\u51fd\u6570\u5c31\u662f\u4e00\u4e2a\u901a\u8fc7\u51fd\u6570\u6307\u9488\u8c03\u7528\u7684\u51fd\u6570\u3002\u5982\u679c\u4f60\u628a\u51fd\u6570\u7684\u6307\u9488\uff08\u5730\u5740\uff09\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u53e6\u4e00\u4e2a\u51fd\u6570\uff0c\u5f53\u8fd9\u4e2a\u6307\u9488\u88ab\u7528\u6765\u8c03\u7528\u5176\u6240\u6307\u5411\u7684\u51fd\u6570\u65f6\uff0c\u6211\u4eec\u5c31\u8bf4\u8fd9\u662f\u56de\u8c03\u51fd\u6570\u3002\u56de\u8c03\u51fd\u6570\u4e0d\u662f\u7531\u8be5\u51fd\u6570\u7684\u5b9e\u73b0\u65b9\u76f4\u63a5\u8c03\u7528\uff0c\u800c\u662f\u5728\u7279\u5b9a\u7684\u4e8b\u4ef6\u6216\u6761\u4ef6\u53d1\u751f\u65f6\u7531\u53e6\u5916\u7684\u4e00\u65b9\u8c03\u7528\u7684\uff0c\u7528\u4e8e\u5bf9\u8be5\u4e8b\u4ef6\u6216\u6761\u4ef6\u8fdb\u884c\u54cd\u5e94\u3002\u8fd9\u6bb5\u89e3\u91ca\u6bd4\u8f83\u5b98\u65b9\u3002\u4e2a\u4eba\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\uff1a\u4e00\u4e2a\u901a\u8fc7\u51fd\u6570\u6307\u9488\u8c03\u7528\u7684\u51fd\u6570\u3002\u5982\u679c\u4f60\u628a\u51fd\u6570\u7684\u6307\u9488\uff08\u5730\u5740\uff09\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u53e6\u4e00\u4e2a\u51fd\u6570\uff0c\u56de\u8c03\u51fd\u6570\u4e0d\u662f\u7531\u8be5\u51fd\u6570\u7684\u5b9e\u73b0\u65b9\u76f4\u63a5\u8c03\u7528\uff0c\u800c\u662f\u5728\u7279\u5b9a\u7684\u4e8b\u4ef6\u6216\u6761\u4ef6\u53d1\u751f\u65f6\u7531\u53e6\u5916\u7684\u4e00\u65b9\u8c03\u7528\u7684\uff0c\u7528\u4e8e\u5bf9\u8be5\u4e8b\u4ef6\u6216\u6761\u4ef6\u8fdb\u884c\u54cd\u5e94\u3002\u5982\u679c\u4ee3\u7801\u7acb\u5373\u88ab\u6267\u884c\u5c31\u79f0\u4e3a\u540c\u6b65\u56de\u8c03\uff0c\u5982\u679c\u8fc7\u540e\u518d\u6267\u884c\uff0c\u5219\u79f0\u4e4b\u4e3a\u5f02\u6b65\u56de\u8c03\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/#_1","title":"\u5165\u95e8\u6848\u4f8b","text":"<p><pre><code>int Callback_1(int a)   ///&lt; \u56de\u8c03\u51fd\u65701\n{\n    printf(\"Hello, this is Callback_1: a = %d \", a);\n    return 0;\n}\n\nint Callback_2(int b)  ///&lt; \u56de\u8c03\u51fd\u65702\n{\n    printf(\"Hello, this is Callback_2: b = %d \", b);\n    return 0;\n}\n\nint Callback_3(int c)   ///&lt; \u56de\u8c03\u51fd\u65703\n{\n    printf(\"Hello, this is Callback_3: c = %d \", c);\n    return 0;\n}\n\nint Handle(int x, int (*Callback)(int)) ///&lt; \u6ce8\u610f\u8fd9\u91cc\u7528\u5230\u7684\u51fd\u6570\u6307\u9488\u5b9a\u4e49\n{\n    Callback(x);\n}\n\nint main()\n{\n    Handle(4, Callback_1);\n    Handle(5, Callback_2);\n    Handle(6, Callback_3);\n    return 0;\n}\n</code></pre> \u5728\u8fd9\u4e2a\u5165\u95e8\u6848\u4f8b\u4e2d\uff0cCallback_1\u30012\u30013\u5c31\u662f\u56de\u8c03\u51fd\u6570\uff0chandle\u51fd\u6570\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5c31\u662f\u51fd\u6570\u6307\u9488\uff0c\u4e5f\u5c31\u662f\u901a\u8fc7\u51fd\u6570\u6307\u9488\u6765\u8c03\u7528\u3002\u7eafC\u8bed\u8a00\u901a\u8fc7\u51fd\u6570\u6307\u9488\u6765\u8fdb\u884c\u56de\u8c03\u51fd\u6570\u7684\u8c03\u7528\uff0cC++\u5219\u53ef\u4ee5\u901a\u8fc7\u5f15\u7528\u3001Lambda\u7b49\u591a\u79cd\u65b9\u5f0f\u6765\u8fdb\u884c\uff0c\u4e0b\u9762\u8fdb\u884c\u5177\u4f53\u7684\u4ecb\u7ecd\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/#_2","title":"\u51fd\u6570\u6307\u9488","text":"<p>\u9996\u5148\u51fd\u6570\u6307\u9488\u4e5f\u662f\u4e00\u79cd\u6307\u9488\uff0c\u53ea\u4e0d\u8fc7\u6307\u5411\u7684\u662f\u51fd\u6570\uff08C\u8bed\u8a00\u4e2d\u6ca1\u6709\u5bf9\u8c61\uff09\u3002\u7136\u540e\u901a\u8fc7\u8fd9\u4e2a\u6307\u9488\u5c31\u53ef\u4ee5\u8c03\u7528\u3002 <pre><code>int Func(int x);   /*\u58f0\u660e\u4e00\u4e2a\u51fd\u6570*/\nint (*p) (int x);  /*\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\u6307\u9488*/\np = Func;          /*\u5c06Func\u51fd\u6570\u7684\u9996\u5730\u5740\u8d4b\u7ed9\u6307\u9488\u53d8\u91cfp*/\np = &amp;Func;          /*\u5c06Func\u51fd\u6570\u7684\u9996\u5730\u5740\u8d4b\u7ed9\u6307\u9488\u53d8\u91cfp*/\n</code></pre> \u7ecf\u8fc7\u4e0a\u8ff0\u540e\uff0c\u6307\u9488\u53d8\u91cf p \u5c31\u6307\u5411\u51fd\u6570 Func() \u4ee3\u7801\u7684\u9996\u5730\u5740\u4e86\u3002\u4e0b\u9762\u770b\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\u3002 <pre><code>int Max(int x, int y)  //\u5b9a\u4e49Max\u51fd\u6570\n{\n    if (x &gt; y){\n        return x;\n    }else{\n      return y;\n    }\n}\nint main()\n{\n  int(*p)(int, int);  //\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\u6307\u9488\n  p = Max;  //\u628a\u51fd\u6570Max\u8d4b\u7ed9\u6307\u9488\u53d8\u91cfp, \u4f7fp\u6307\u5411Max\u51fd\u6570\n  int c= (*p)(1,2);//\u901a\u8fc7\u51fd\u6570\u6307\u9488\u8c03\u7528Max\u51fd\u6570\n  printf(\"%d\",c);  \n  return 0;\n}\n</code></pre> p\u6307\u5411Max\u51fd\u6570\u4e4b\u540e\uff0c\u7136\u540e\u7528p\u8c03\u7528Max\u51fd\u6570\uff0c\u8fd4\u56de\u4e24\u4e2a\u6570\u4e2d\u7684\u6700\u5927\u503c\u3002\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u56e0\u4e3a\u51fd\u6570\u540d\u672c\u8eab\u5c31\u53ef\u4ee5\u8868\u793a\u8be5\u51fd\u6570\u5730\u5740\uff08\u6307\u9488\uff09\uff0c\u56e0\u6b64\u5728\u83b7\u53d6\u51fd\u6570\u6307\u9488\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528\u51fd\u6570\u540d\uff0c\u4e5f\u53ef\u4ee5\u53d6\u51fd\u6570\u7684\u5730\u5740\u3002</p> <p>p = Max\u53ef\u4ee5\u6539\u6210 p = &amp;Max; c = (*p)(a, b) \u53ef\u4ee5\u6539\u6210 c = p(a, b)</p> <p>\u6240\u4ee5\u51fd\u6570\u6307\u9488\u7684\u901a\u5e38\u5199\u6cd5\u662f</p> <p>\u51fd\u6570\u8fd4\u56de\u503c\u7c7b\u578b (* \u6307\u9488\u53d8\u91cf\u540d) (\u51fd\u6570\u53c2\u6570\u5217\u8868);</p> <p>\u5728\u8fd9\u91cc\u6307\u9488\u53d8\u91cf\u540d\u4e5f\u53ef\u4ee5\u53eb\u505a\u51fd\u6570\u540d\uff0c \u4f46\u662f\u901a\u5e38\u53ef\u4ee5\u7528typedef\u8fdb\u884c\u63cf\u8ff0</p> <p>typedef \u51fd\u6570\u8fd4\u56de\u503c\u7c7b\u578b (* \u6307\u9488\u53d8\u91cf\u540d) (\u51fd\u6570\u53c2\u6570\u5217\u8868);</p> <p>\u6700\u540e\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6307\u5411\u51fd\u6570\u7684\u6307\u9488\u53d8\u91cf\u6ca1\u6709 ++ \u548c -- \u8fd0\u7b97\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/#c","title":"C++\u7c7b\u7684\u9759\u6001\u51fd\u6570\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570","text":"<p>\u524d\u9762\u51fd\u6570\u6307\u9488\u7684\u65b9\u5f0f\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u540c\u65f6\u7528\u4e8eC\u548cC++\uff0c\u4e0b\u9762\u4ecb\u7ecd\u53e6\u5916\u7684\u4e00\u4e9b\u65b9\u5f0f\uff0c\u56e0\u4e3aC++\u5f15\u5165\u4e86\u5bf9\u8c61\u7684\u6982\u5ff5\uff0c\u53ef\u4ee5\u4f7f\u7528\u7c7b\u7684\u6210\u5458\u548c\u9759\u6001\u51fd\u6570\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570\u3002 <pre><code>class ProgramA {\n public:\n  void FunA1() { printf(\"I'am ProgramA.FunA1() and be called..\\n\"); }\n\n  static void FunA2() { printf(\"I'am ProgramA.FunA2() and be called..\\n\"); }\n};\nclass ProgramB {\n public:\n  void FunB1(void (*callback)()) {\n    printf(\"I'am ProgramB.FunB1() and be called..\\n\");\n    callback();\n  }\n};\nint main(int argc, char **argv) {\n  ProgramA PA;\n  PA.FunA1();\n\n  ProgramB PB;\n  PB.FunB1(ProgramA::FunA2);\n}\n</code></pre> \u5728\u7c7bB\u4e2d\u8c03\u7528\u7c7bA\u4e2d\u7684\u9759\u6001\u51fd\u6570\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u56de\u8c03\u3002\u4f46\u8fd9\u79cd\u5b9e\u73b0\u6709\u4e00\u4e2a\u5f88\u660e\u663e\u7684\u7f3a\u70b9\uff1astatic \u51fd\u6570\u4e0d\u80fd\u8bbf\u95ee\u975estatic \u6210\u5458\u53d8\u91cf\u6216\u51fd\u6570\uff0c\u4f1a\u4e25\u91cd\u9650\u5236\u56de\u8c03\u51fd\u6570\u53ef\u4ee5\u5b9e\u73b0\u7684\u529f\u80fd\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/#_3","title":"\u7c7b\u7684\u975e\u9759\u6001\u51fd\u6570\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570","text":"<p>\u8fd9\u79cd\u65b9\u5f0f\u6bd4\u8f83\u9ebb\u70e6\uff0c\u53ef\u4ee5\u5148\u770b\u4e00\u4e0b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002 <pre><code>class ProgramA {\n public:\n  void FunA1() { printf(\"I'am ProgramA.FunA1() and be called..\\n\"); }\n\n  void FunA2() { printf(\"I'am ProgramA.FunA2() and be called..\\n\"); }\n};\n\nclass ProgramB {\n public:\n  void FunB1(void (ProgramA::*callback)(), void *context) {\n    printf(\"I'am ProgramB.FunB1() and be called..\\n\");\n    ((ProgramA *)context-&gt;*callback)();\n  }\n};\nint main(int argc, char **argv) {\n  ProgramA PA;\n  PA.FunA1();\n\n  ProgramB PB;\n  PB.FunB1(&amp;ProgramA::FunA2, &amp;PA);  // \u6b64\u5904\u90fd\u8981\u52a0&amp;\n}\n</code></pre> \u529f\u80fd\u603b\u4f53\u4e0e\u4e0a\u9762\u4e00\u4e2a\u76f8\u540c\uff0c\u4f46\u662f\uff0c\u7c7b\u7684\u9759\u6001\u51fd\u6570\u672c\u8eab\u4e0d\u5c5e\u4e8e\u8be5\u7c7b\uff0c\u6240\u4ee5\u548c\u666e\u901a\u51fd\u6570\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570\u7c7b\u4f3c\u3002\u8fd9\u79cd\u65b9\u5f0f\u5b58\u5728\u4e00\u4e9b\u4e0d\u8db3\uff0c\uff0c\u4e5f\u5c31\u6211\u9884\u5148\u8fd8\u8981\u77e5\u9053\u56de\u8c03\u51fd\u6570\u6240\u5c5e\u7684\u7c7b\u5b9a\u4e49\uff0c\u5f53ProgramB\u60f3\u72ec\u7acb\u5c01\u88c5\u65f6\u5c31\u4e0d\u597d\u7528\u4e86\u3002(\u8fdd\u80cc\u4e86\u4e00\u4e9b\u8bbe\u8ba1\u6a21\u5f0f\u7684\u539f\u5219)</p>"},{"location":"C%2B%2B/C%2B%2B%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/#lambda","title":"Lambda\u8868\u8fbe\u5f0f\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570","text":"<p>Lambda\u672c\u8eab\u5c31\u662f\u4e00\u79cd\u533f\u540d\u51fd\u6570\uff0c\u662f\u4e00\u79cd\u51fd\u6570\u7684\u7b80\u5199\u5f62\u5f0f(\u6b64\u5904\u53c2\u8003\u4e0a\u4e00\u7bc7\u535a\u5ba2Lambda\u8868\u8fbe\u5f0f) <pre><code>#include &lt;iostream&gt;\n#include&lt;functional&gt;\nvoid func1(int a,std::function&lt;void(int)&gt; func2){\n  func2(a);\n}\nint main(int argc, char **argv) {\n  auto fun3 = [](int a){\n    std::cout&lt;&lt;a&lt;&lt;std::endl;\n  };\n  func1(3,fun3);\n}\n</code></pre> \u8fd9\u79cd\u65b9\u5f0f\u4e5f\u8f83\u4e3a\u7b80\u5355\uff0c\u4f46\u8981\u6ce8\u610f\u5728C++11\u7248\u672c\u624d\u5f00\u59cb\u5f15\u5165Lambda\u8868\u8fbe\u5f0f\uff0c\u5728\u4e00\u4e9b\u8f83\u4e3a\u8001\u65e7\u7684\u7f16\u8bd1\u5668\u4e0a\u53ef\u80fd\u65e0\u6cd5\u901a\u8fc7\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/#stdfuntionstdbind","title":"std::funtion\u548cstd::bind\u7684\u4f7f\u7528","text":"<p>\u8fd9\u79cd\u65b9\u5f0f\u4e5f\u662f\u9002\u7528\u4e8eC++\uff0c\u8981\u5f15\u5165functional\u7684\u5934\u6587\u4ef6\u3002\u5b58\u50a8\u3001\u590d\u5236\u3001\u548c\u8c03\u7528\u64cd\u4f5c\uff0c\u8fd9\u4e9b\u76ee\u6807\u5b9e\u4f53\u5305\u62ec\u666e\u901a\u51fd\u6570\u3001Lambda\u8868\u8fbe\u5f0f\u3001\u51fd\u6570\u6307\u9488\u3001\u4ee5\u53ca\u5176\u5b83\u51fd\u6570\u5bf9\u8c61\u7b49\u3002std::bind()\u51fd\u6570\u7684\u610f\u4e49\u5c31\u50cf\u5b83\u7684\u51fd\u6570\u540d\u4e00\u6837\uff0c\u662f\u7528\u6765\u7ed1\u5b9a\u51fd\u6570\u8c03\u7528\u7684\u67d0\u4e9b\u53c2\u6570\u7684\u3002 <pre><code>#include &lt;iostream&gt;\n\n#include &lt;functional&gt; // fucntion/bind\n\nclass ProgramA {\n public:\n  void FunA1() { printf(\"I'am ProgramA.FunA1() and be called..\\n\"); }\n\n  void FunA2() { printf(\"I'am ProgramA.FunA2() and be called..\\n\"); }\n\n  static void FunA3() { printf(\"I'am ProgramA.FunA3() and be called..\\n\"); }\n};\n\nclass ProgramB {\n  typedef std::function&lt;void ()&gt; CallbackFun;\n public:\n   void FunB1(CallbackFun callback) {\n    printf(\"I'am ProgramB.FunB2() and be called..\\n\");\n    callback();\n  }\n};\n\nvoid normFun() { printf(\"I'am normFun() and be called..\\n\"); }\n\nint main(int argc, char **argv) {\n  ProgramA PA;\n  PA.FunA1();\n\n  printf(\"\\n\");\n  ProgramB PB;\n  PB.FunB1(normFun);\n  printf(\"\\n\");\n  PB.FunB1(ProgramA::FunA3);\n  printf(\"\\n\");\n  PB.FunB1(std::bind(&amp;ProgramA::FunA2, &amp;PA));\n}\n</code></pre> \u4e3b\u8981\u770b\u6700\u540e\u4e00\u884c\uff0c\u901a\u8fc7std::bind\u51fd\u6570\u7ed1\u5b9a\u4e86\u5bf9\u8c61\u4e0e\u5bf9\u5e94\u7684\u51fd\u6570\uff0c\u8fd9\u79cd\u65b9\u5f0f\u6bd4\u4e0a\u9762\u7684\u901a\u8fc7\u7c7b\u7684\u6210\u5458\u51fd\u6570\u8fdb\u884c\u56de\u8c03\u66f4\u4e3a\u7b80\u5355\u65b9\u4fbf\u3002\u4e0b\u9762\u770b\u4e00\u4e0b\u5982\u679c\u6709\u53c2\u6570\u7684\u8bdd\uff0c\u9700\u8981\u5f15\u5165\u5360\u4f4d\u7b26std::placeholders::_1\u6765\u8fdb\u884c\u56de\u8c03\u3002 <pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\nusing namespace std;\n\nint TestFunc(int a, char c, float f)\n{\n    cout &lt;&lt; a &lt;&lt; endl;\n    cout &lt;&lt; c &lt;&lt; endl;\n    cout &lt;&lt; f &lt;&lt; endl;\n\n    return a;\n}\n\nint main()\n{\n    auto bindFunc1 = bind(TestFunc, std::placeholders::_1, 'A', 100.1);\n    bindFunc1(10);\n\n    cout &lt;&lt; \"=================================\\n\";\n\n    auto bindFunc2 = bind(TestFunc, std::placeholders::_2, std::placeholders::_1, 100.1);\n    bindFunc2('B', 10);\n\n    cout &lt;&lt; \"=================================\\n\";\n\n    auto bindFunc3 = bind(TestFunc, std::placeholders::_2, std::placeholders::_3, std::placeholders::_1);\n    bindFunc3(100.1, 30, 'C');\n\n    return 0;\n}\n</code></pre> \u4e0a\u8ff0\u4f8b\u5b50\u4e2d\u5f15\u5165\u4e86\u5360\u4f4d\u7b26std::placeholders::_1\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u901a\u8fc7\u4e0b\u5212\u7ebf\u52a0\u6570\u5b57\u6765\u5b9e\u73b0\uff0c\u4ece\u800c\u5b9e\u73b0\u6709\u53c2\u6570\u7684\u56de\u8c03\u3002\u8fd9\u4e2abind\u51fd\u6570\u4e2d\u7684\u91cd\u8f7d\u901a\u5e38\u7b2c\u4e00\u4e2a\u662f\u51fd\u6570\u7684\u6307\u9488\uff0c\u7b2c\u4e8c\u4e2a\u662f\u8c03\u7528\u5bf9\u8c61\u7684\u6307\u9488\uff0c\u540e\u9762\u8ddf\u4e0a\u53c2\u6570\u5360\u4f4d\u7b26\u3002</p>"},{"location":"C%2B%2B/C%E8%AF%AD%E8%A8%80%E5%8A%A8%E6%80%81%E5%BA%93%E4%B8%8E%E9%9D%99%E6%80%81%E5%BA%93/","title":"C\u8bed\u8a00\u52a8\u6001\u5e93\u4e0e\u9759\u6001\u5e93","text":""},{"location":"C%2B%2B/C%E8%AF%AD%E8%A8%80%E5%8A%A8%E6%80%81%E5%BA%93%E4%B8%8E%E9%9D%99%E6%80%81%E5%BA%93/#_1","title":"\u4e00\u3001\u52a8\u6001\u7f16\u8bd1\u4e0e\u9759\u6001\u7f16\u8bd1","text":"<p>\u52a8\u6001\u7f16\u8bd1\u4f7f\u7528\u7684\u662f\u52a8\u6001\u5e93\u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\uff0c\u9ed8\u8ba4\u4f7f\u7528\u7684\u662f\u52a8\u6001\u7f16\u8bd1\u65b9\u6cd5\u3002</p> <pre><code>gcc hello.c -o hello\n</code></pre> <p>\u9759\u6001\u7f16\u8bd1\u4f7f\u7528\u7684\u662f\u9759\u6001\u5e93\u6587\u4ef6\u8fdb\u884c\u7684\u7f16\u8bd1</p> <pre><code>gcc -static hello.c -o hello\n</code></pre> <p>\u9759\u6001\u7f16\u8bd1\u8981\u628a\u9759\u6001\u5e93\u6587\u4ef6\u6253\u5305\u7f16\u8bd1\u5230\u53ef\u6267\u884c\u7a0b\u5e8f\u4e2d\uff0c\u52a8\u6001\u7f16\u8bd1\u4e0d\u4f1a\u628a\u52a8\u6001\u5e93\u6587\u4ef6\u6253\u5305\u7f16\u8bd1\u5230\u53ef\u6267\u884c\u7a0b\u5e8f\u4e2d\uff0c\u5b83\u4eec\u53ea\u662f\u7f16\u8bd1\u94fe\u63a5\u5173\u7cfb\u3002</p>"},{"location":"C%2B%2B/C%E8%AF%AD%E8%A8%80%E5%8A%A8%E6%80%81%E5%BA%93%E4%B8%8E%E9%9D%99%E6%80%81%E5%BA%93/#_2","title":"\u4e8c\u3001\u5236\u4f5c\u9759\u6001\u5e93","text":"<p>\u9996\u5148\u770b\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6709\u4e00\u4e0b\u4e09\u4e2ac\u8bed\u8a00\u6587\u4ef6\uff0cmylib.c\u3001mylib.h\u3001mytest.c\u3002mylib.h\u505a\u51fd\u6570\u7684\u58f0\u660e\uff0cmylib.c\u505a\u51fd\u6570\u7684\u5b9a\u4e49\uff0cmytest.c\u505a\u529f\u80fd\u7684\u6d4b\u8bd5\u3002</p> <p>mylib.c</p> <pre><code>int max(int x,int y)\n{\n        return x&gt;y?x:y;\n}\nint min(int x,int y)\n{\n        return x&lt;y?x:y;\n}\n</code></pre> <p>mylib.h</p> <pre><code>#ifndef __MYLIB_H__\n#define __MYLIB_H__\nextern int max(int x,int y);\nextern int min(int x,int y);\n#endif\n</code></pre> <p>mytest.c</p> <pre><code>#include&lt;stdio.h&gt;\n#include \"mylib.h\"\n\nint main(int argc,char *argv[])\n{\n        int a=10,b=20,max_num,min_num;\n        max_num=max(a,b);\n        min_num=min(a,b);\n        printf(\"max_num=%d\\n\",max_num);\n        printf(\"min_num=%d\\n\",min_num);\n        return 0;\n}\n</code></pre> <p>\u4e0b\u9762\u6211\u4eec\u60f3\u8ba9mylib.c\u6253\u5305\u4e3a\u4e00\u4e2a\u5e93\u6587\u4ef6\u3002\u8fc7\u7a0b\u5982\u4e0b\uff0c\u9996\u5148\u6211\u4eec\u8ba9\u60f3\u6253\u5305\u7684\u6587\u4ef6\u751f\u6210.o\u6587\u4ef6</p> <pre><code>gcc -c mylib.c -o mylib.o\n</code></pre> <p>\u7136\u540e\u5c06\u8fd9\u4e2a.o\u6587\u4ef6\u505a\u6210\u4e00\u4e2a\u9759\u6001\u5e93\uff0c\u6ce8\u610f\uff1a\u9759\u6001\u5e93\u8d77\u540d\u7684\u65f6\u5019\u5fc5\u987b\u4ee5lib\u5f00\u5934\u4ee5.a\u7ed3\u5c3e\u3002</p> <pre><code>ar rc libmylib.a mylib.o\n</code></pre> <p>\u5236\u4f5c\u597d\u9759\u6001\u5e93\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u7f16\u8bd1\u7a0b\u5e8f\u4e86\uff0c\u8fd9\u65f6\u5019\u5c31\u53ef\u4ee5\u4e0d\u4f7f\u7528mylib.c\u6587\u4ef6\u4e86\u3002\u7f16\u8bd1\u7a0b\u5e8f\u6709\u4e09\u79cd\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <p>\u65b9\u6cd5\u4e00</p> <p>\u8fd9\u51e0\u4e2a\u6587\u4ef6\u90fd\u5728\u540c\u4e00\u4e2a\u76ee\u5f55\u4e0b\u9762\uff0c\u5c31\u53ef\u4ee5\u4e0d\u7528\u8fd9\u4e48\u9ebb\u70e6\uff0c\u76f4\u63a5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u5c31\u53ef\u4ee5\u5b8c\u6210\u7f16\u8bd1\u3002</p> <pre><code>gcc -static mytest.c libmylib.a -o mytest\n</code></pre> <p>\u65b9\u6cd5\u4e8c</p> <p>\u53ef\u4ee5\u6307\u5b9a\u5934\u6587\u4ef6\u53ca\u5e93\u6587\u4ef6\u8def\u5f84\uff0c\u6bd4\u5982\u6211\u4eec\u53ef\u4ee5\u5c06libmylib.a\u548cmylib.h\u79fb\u52a8\u5230/home/test\u6587\u4ef6\u5939\u4e0b\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528\u7684\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>gcc -static mytest.c -o mytest -L/home/test -lmylib -I/home/test\n</code></pre> <p>\u4e0b\u9762\u5bf9\u5176\u4e2d\u7684\u53c2\u6570\u505a\u4e00\u4e9b\u89e3\u91ca\uff1a</p> <ul> <li>-L\u662f\u6307\u5b9a\u5e93\u6587\u4ef6\u7684\u8def\u5f84</li> <li>-l\u662f\u6307\u5b9a\u627e\u54ea\u4e2a\u5e93\uff0c\u6307\u5b9a\u7684\u53ea\u8981\u5e93\u6587\u4ef6lib\u540e\u9762.a\u524d\u9762\u7684\u90e8\u5206</li> <li>-I\u662f\u6307\u5b9a\u5934\u6587\u4ef6\u7684\u8def\u5f84</li> </ul> <p>\u65b9\u6cd5\u4e09</p> <p>\u53ef\u4ee5\u5c06\u5e93\u6587\u4ef6\u548c\u5934\u6587\u4ef6\u5b58\u653e\u5230\u7cfb\u7edf\u9ed8\u8ba4\u6307\u5b9a\u7684\u8def\u5f84\u4e0b\u3002\u5e93\u6587\u4ef6\u9ed8\u8ba4\u8def\u5f84\u662f/lib\u6216\u8005\u662f/usr/lib\u3002\u5934\u6587\u4ef6\u9ed8\u8ba4\u8def\u5f84\u662f/usr/include\u3002\u6240\u4ee5\u53ef\u4ee5\u6267\u884c\u4e0b\u9762\u4e24\u6761\u547d\u4ee4\u3002</p> <pre><code>sudo mv libmylib.a /usr/lib\nsudo mv mylib.h /usr/include\n</code></pre> <p>\u7136\u540e\u5c31\u53ef\u4ee5\u6267\u884c\u7f16\u8bd1\u7a0b\u5e8f\u547d\u4ee4\u3002</p> <pre><code>gcc -static mytest.c -o mytest -lmylib\n</code></pre> <p>-l\u662f\u6307\u5b9a\u7684\u8981\u627e\u54ea\u4e2a\u5e93\u3002</p>"},{"location":"C%2B%2B/C%E8%AF%AD%E8%A8%80%E5%8A%A8%E6%80%81%E5%BA%93%E4%B8%8E%E9%9D%99%E6%80%81%E5%BA%93/#_3","title":"\u4e09\u3001\u5236\u4f5c\u52a8\u6001\u5e93","text":"<p>\u8fd8\u662f\u4e0a\u9762\u4ee3\u7801\u7684\u4f8b\u5b50\uff0c\u751f\u6210\u4e00\u4e2amylib.c\u7684\u52a8\u6001\u5e93\u6587\u4ef6\u3002</p> <p>1\u3001\u9996\u5148\u662f\u5c06\u8981\u52a0\u5165\u52a8\u6001\u5e93\u7684\u6e90\u6587\u4ef6\u7f16\u8bd1\u4e3a\u4e0e\u4f4d\u7f6e\u65e0\u5173\u7684\u76ee\u6807\u6587\u4ef6\u3002</p> <pre><code>gcc -fPIC -c mylib.c\n</code></pre> <p>\u8fd9\u65f6\u5019\u5c31\u4f1a\u751f\u6210\u4e00\u4e2a\u4e0e\u4f4d\u7f6e\u65e0\u5173\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u5173\u4e8e\u4e3a\u4ec0\u4e48\u4f1a\u52a0\u4e0a-fPIC\u7684\u9009\u9879\uff0c\u53ef\u4ee5\u53c2\u8003\u8fd9\u4e2a\u535a\u5ba2\u3002</p> <p>2\u3001\u7136\u540e\u7b2c\u4e8c\u6b65\u662f\u5c06\u7b2c\u4e00\u6b65\u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6\u6253\u5305\u5230\u52a8\u6001\u5e93\u6587\u4ef6 \u3002</p> <pre><code>gcc -shared -o libmylib.so mylib.o\n</code></pre> <p>3\u3001\u7136\u540e\u662f\u52a8\u6001\u5e93\u94fe\u63a5\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6</p> <pre><code>gcc mytest.c libmylib.so -o mytest\n</code></pre> <p>\u4f46\u662f\u8fd9\u65f6\u5019\u6267\u884c./mytest\u4f1a\u62a5\u9519\uff0c\u9519\u8bef\u4ee3\u7801\u5982\u4e0b\uff1a</p> <p>error while loading shared libraries: libmylib.so: cannot open shared object file: No such file or directory</p> <p>\u56e0\u4e3a\u7cfb\u7edf\u627e\u4e0d\u5230\u81ea\u5b9a\u4e49\u7684\u5e93\u6587\u4ef6\u5728\u90a3\uff0c\u53ef\u4ee5\u6709\u4e24\u79cd\u65b9\u6cd5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u65b9\u6cd5\u4e00</p> <p>\u5e93\u6587\u4ef6\u3001\u5934\u6587\u4ef6\u5747\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\uff0c\u901a\u8fc7\u6dfb\u52a0\u73af\u5883\u53d8\u91cf</p> <pre><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:./\n</code></pre> <p>\u7531\u4e8e\u6240\u6709\u7684\u5e93\u6587\u4ef6\u90fd\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\uff0c\u6240\u6709\u5c06\u5f53\u524d\u8def\u5f84\u6dfb\u52a0\u5230\u73af\u5883\u53d8\u91cf\u4e2d\u3002\u7136\u540e\u5728\u4f7f\u7528\u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1\uff1a</p> <pre><code>gcc mytest.c libmylib.so -o mytest\n</code></pre> <p>\u8fd9\u65f6\u5019\u7a0b\u5e8f\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u3002</p> <p>\u65b9\u6cd5\u4e8c</p> <p>\u5e93\u51fd\u6570\u3001\u5934\u6587\u4ef6\u5047\u8bbe\u5747\u5728/home\u6587\u4ef6\u5939\u4e0b\u9762\uff0c\u8fd9\u4e2a\u65f6\u5019\u8fd8\u9700\u8981\u6dfb\u52a0\u73af\u5883\u53d8\u91cf</p> <pre><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:./\n</code></pre> <p>\u7136\u540e\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1\uff1a</p> <pre><code>gcc mytest.c -o mytest -L/home -lmylib -I/home\n</code></pre> <p>\u7136\u540e\u6267\u884c\u53ef\u4ee5\u901a\u8fc7\u3002</p> <p>\u65b9\u6cd5\u4e09</p> <p>\u5c06\u6307\u5b9a\u5e93\u51fd\u6570\u548c\u5934\u6587\u4ef6\u5747\u5728\u7cfb\u7edf\u8def\u5f84\u4e0b\uff1a</p> <pre><code>sudo cp libmylib.so /usr/lib\nsudo cp mylib.h /usr/include\n</code></pre> <p>\u7136\u540e\u8fdb\u884c\u7f16\u8bd1</p> <pre><code>gcc mytest.c -o mytest -lmylib\n</code></pre> <p>\u8fd9\u4e2a\u65f6\u5019\u4f1a\u663e\u793a\u7f16\u8bd1\u901a\u8fc7\uff0c\u4e0d\u9700\u8981\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\u3002</p>"},{"location":"C%2B%2B/C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/","title":"C\u8bed\u8a00\u7f16\u8bd1\u8fc7\u7a0b","text":"<p>\u4ee5\u6700\u7b80\u5355\u7684c\u8bed\u8a00\u4ee3\u7801\u4e3a\u4f8b\uff0chello.c\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    printf(\"hello world!\\n\");\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#1","title":"1\u3001\u9884\u7f16\u8bd1","text":"<p>\u5c06.c\u4e2d\u7684\u5934\u6587\u4ef6\u5c55\u5f00\u3001\u5b8f\u5c55\u5f00\uff0c\u751f\u6210\u7684\u6587\u4ef6\u662f.i\u6587\u4ef6\u3002\u4f8b\u5982hello.c\u6587\u4ef6\uff0c\u751f\u6210\u8fc7\u7a0b\u662f\uff1a</p> <pre><code>gcc -E hello.c -o hello.i\n</code></pre> <p>\u9884\u5904\u7406\u7684\u8fc7\u7a0b\u662f\u5c06\u5934\u6587\u4ef6\u5c55\u5f00\u3001\u66ff\u6362\uff0c\u5982\u679c\u6709\u5b8f\uff0c\u4e5f\u4f1a\u8fdb\u884c\u66ff\u6362\u3002\u8fd9\u4e00\u6b65\u4e0d\u8fdb\u884c\u8bed\u6cd5\u68c0\u67e5\u3002</p>"},{"location":"C%2B%2B/C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#2","title":"2\u3001\u7f16\u8bd1","text":"<p>\u5c06\u9884\u5904\u7406\u7684.i\u6587\u4ef6\u751f\u6210.s\u7684\u6c47\u7f16\u6587\u4ef6\u3002\u4f1a\u8fdb\u884c\u8bed\u6cd5\u68c0\u67e5\u3002</p> <pre><code>gcc -S hello.i -o hello.s\n</code></pre>"},{"location":"C%2B%2B/C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#3","title":"3\u3001\u6c47\u7f16","text":"<p>\u5c06.s\u6c47\u7f16\u6587\u4ef6\u751f\u6210.o\u7684\u76ee\u6807\u6587\u4ef6\u3002</p> <pre><code>gcc -c hello.s -o hello.o \n</code></pre>"},{"location":"C%2B%2B/C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/#4","title":"4\u3001\u94fe\u63a5","text":"<p>\u5c06.o\u6587\u4ef6\u94fe\u63a5\u6210\u76ee\u6807\u6587\u4ef6\uff0c\u4e5f\u5c31\u662f\u53ef\u6267\u884c\u7a0b\u5e8f</p> <pre><code>gcc hello.o -o hello\n</code></pre> <p>\u8fd9\u4e00\u6b65\u4e2d\u5982\u679c\u4e0d\u52a0-o\u9ed8\u8ba4\u8f93\u51fa\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\u65f6a.out\u3002\u8fd9\u56db\u6b65\u662f\u5c06\u6574\u4e2a\u7f16\u8bd1\u8fc7\u7a0b\u5c55\u5f00\u6765\u770b\u7684\uff0c\u901a\u5e38\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528gcc hello.c\uff0c\u76f4\u63a5\u751f\u6210\u7ed3\u679ca.out\u3002</p>"},{"location":"C%2B%2B/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/","title":"Lambda\u8868\u8fbe\u5f0f","text":"<p>C++11\u4e2d\u7684Lambda\u8868\u8fbe\u5f0f\u7528\u4e8e\u5b9a\u4e49\u5e76\u521b\u5efa\u533f\u540d\u7684\u51fd\u6570\u5bf9\u8c61\uff0c\u4ee5\u7b80\u5316\u7f16\u7a0b\u5de5\u4f5c\u3002\u4e0b\u9762\u770b\u4e00\u4e0bLambda\u8868\u8fbe\u5f0f\u7684\u57fa\u672c\u6784\u6210\u3002</p>"},{"location":"C%2B%2B/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/#_1","title":"\u57fa\u672c\u6784\u6210","text":"<p>\u9996\u5148\u662fLambda\u7684\u57fa\u672c\u7ed3\u6784\uff1a</p> <p>[capture](parameters) mutable -&gt;return-type  { statement }</p> <p>\u6574\u4f53\u7684\u7ed3\u6784\u53ef\u4ee5\u8868\u793a\u4e3a\uff1a[\u51fd\u6570\u5bf9\u8c61\u53c2\u6570](\u64cd\u4f5c\u7b26\u91cd\u8f7d\u51fd\u6570\u53c2\u6570)mutable -&gt;\u8fd4\u56de\u503c{\u51fd\u6570\u4f53}\u3002\u4e0b\u9762\u4f9d\u6b21\u4ecb\u7ecd\u5404\u4e2a\u90e8\u5206\u7684\u5b9a\u4e49\u53ca\u7528\u6cd5\u3002</p>"},{"location":"C%2B%2B/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/#_2","title":"\u51fd\u6570\u5bf9\u8c61\u53c2\u6570","text":"<p>[] ,\u7528\u8fd9\u4e2a\u65b9\u62ec\u53f7\u6807\u8bc6\u4e00\u4e2aLambda\u8868\u8fbe\u5f0f\u7684\u5f00\u59cb\uff0c\u8fd9\u4e00\u90e8\u5206\u5fc5\u987b\u5b58\u5728\uff0c\u4e0d\u80fd\u7701\u7565\u3002\u51fd\u6570\u5bf9\u8c61\u53c2\u6570\u662f\u4f20\u9012\u7ed9\u7f16\u8bd1\u5668\u81ea\u52a8\u751f\u6210\u7684\u51fd\u6570\u5bf9\u8c61\u7c7b\u7684\u6784\u9020\u51fd\u6570\u7684\u3002\u51fd\u6570\u5bf9\u8c61\u53c2\u6570\u53ea\u80fd\u4f7f\u7528\u90a3\u4e9b\u5230\u5b9a\u4e49Lambda\u4e3a\u6b62\u65f6Lambda\u6240\u5728\u4f5c\u7528\u8303\u56f4\u5185\u53ef\u89c1\u7684\u5c40\u90e8\u53d8\u91cf\uff08\u5305\u62ecLambda\u6240\u5728\u7c7b\u7684this\uff09\u3002 <pre><code>  int a=1;\n  [](){\n    cout&lt;&lt;a&lt;&lt;endl;\n  }();\n</code></pre> \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u51fd\u6570\u5bf9\u8c61\u4e3a\u7a7a\uff0c\u8bbf\u95ee\u4e0d\u5230a\uff0c\u7a0b\u5e8f\u4f1a\u62a5\u9519\u3002\uff08\u6700\u540e\u52a0\u4e00\u4e2a\u62ec\u53f7\u662f\u76f4\u63a5\u8c03\u7528\uff09\u51fd\u6570\u5bf9\u8c61\u53c2\u6570\u6709\u4ee5\u4e0b\u5f62\u5f0f\uff1a * \u7a7a\u3002\u6ca1\u6709\u4f7f\u7528\u4efb\u4f55\u51fd\u6570\u5bf9\u8c61\u53c2\u6570\u3002 * =\u3002\u51fd\u6570\u4f53\u5185\u53ef\u4ee5\u4f7f\u7528Lambda\u6240\u5728\u4f5c\u7528\u8303\u56f4\u5185\u6240\u6709\u53ef\u89c1\u7684\u5c40\u90e8\u53d8\u91cf\uff08\u5305\u62ecLambda\u6240\u5728\u7c7b\u7684this\uff09\uff0c\u5e76\u4e14\u662f\u503c\u4f20\u9012\u65b9\u5f0f\uff08\u76f8\u5f53\u4e8e\u7f16\u8bd1\u5668\u81ea\u52a8\u4e3a\u6211\u4eec\u6309\u503c\u4f20\u9012\u4e86\u6240\u6709\u5c40\u90e8\u53d8\u91cf\uff09\u3002\u8fd9\u79cd\u65b9\u5f0f\u6700\u4e3a\u5e38\u7528\u3002 * &amp;\u3002\u51fd\u6570\u4f53\u5185\u53ef\u4ee5\u4f7f\u7528Lambda\u6240\u5728\u4f5c\u7528\u8303\u56f4\u5185\u6240\u6709\u53ef\u89c1\u7684\u5c40\u90e8\u53d8\u91cf\uff08\u5305\u62ecLambda\u6240\u5728\u7c7b\u7684this\uff09\uff0c\u5e76\u4e14\u662f\u5f15\u7528\u4f20\u9012\u65b9\u5f0f\uff08\u76f8\u5f53\u4e8e\u7f16\u8bd1\u5668\u81ea\u52a8\u4e3a\u6211\u4eec\u6309\u5f15\u7528\u4f20\u9012\u4e86\u6240\u6709\u5c40\u90e8\u53d8\u91cf\uff09\u3002 * this\u3002\u51fd\u6570\u4f53\u5185\u53ef\u4ee5\u4f7f\u7528Lambda\u6240\u5728\u7c7b\u4e2d\u7684\u6210\u5458\u53d8\u91cf\u3002 * a\u3002\u5c06a\u6309\u503c\u8fdb\u884c\u4f20\u9012\u3002\u6309\u503c\u8fdb\u884c\u4f20\u9012\u65f6\uff0c\u51fd\u6570\u4f53\u5185\u4e0d\u80fd\u4fee\u6539\u4f20\u9012\u8fdb\u6765\u7684a\u7684\u62f7\u8d1d\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u51fd\u6570\u662fconst\u7684\u3002\u8981\u4fee\u6539\u4f20\u9012\u8fdb\u6765\u7684a\u7684\u62f7\u8d1d\uff0c\u53ef\u4ee5\u6dfb\u52a0mutable\u4fee\u9970\u7b26\u3002 * &amp;a\u3002\u5c06a\u6309\u5f15\u7528\u8fdb\u884c\u4f20\u9012\u3002=\uff0c&amp;a, &amp;b\u3002\u9664a\u548cb\u6309\u5f15\u7528\u8fdb\u884c\u4f20\u9012\u5916\uff0c\u5176\u4ed6\u53c2\u6570\u90fd\u6309\u503c\u8fdb\u884c\u4f20\u9012\u3002\uf06e  &amp;, a, b\u3002\u9664a\u548cb\u6309\u503c\u8fdb\u884c\u4f20\u9012\u5916\uff0c\u5176\u4ed6\u53c2\u6570\u90fd\u6309\u5f15\u7528\u8fdb\u884c\u4f20\u9012\u3002</p> <p>\u5e38\u7528\u7684\u65b9\u5f0f\u5c31\u7b2c\u4e8c\u79cd\u548c\u7b2c\u4e09\u79cd\u3002\u5176\u5b83\u7684\u65b9\u5f0f\u6839\u636e\u5177\u4f53\u7684\u60c5\u51b5\u8fdb\u884c\u9009\u62e9\u3002</p>"},{"location":"C%2B%2B/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/#_3","title":"\u64cd\u4f5c\u7b26\u91cd\u8f7d\u51fd\u6570\u53c2\u6570","text":"<p>\u6807\u8bc6\u91cd\u8f7d\u7684()\u64cd\u4f5c\u7b26\u7684\u53c2\u6570\uff0c\u6ca1\u6709\u53c2\u6570\u65f6\uff0c\u8fd9\u90e8\u5206\u53ef\u4ee5\u7701\u7565\u3002\u53c2\u6570\u53ef\u4ee5\u901a\u8fc7\u6309\u503c\uff08\u5982\uff1a(a,b)\uff09\u548c\u6309\u5f15\u7528\uff08\u5982\uff1a(&amp;a,&amp;b)\uff09\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u4f20\u9012\u3002\u8fd9\u4e2a\u5c31\u7c7b\u4f3c\u4e0e\u666e\u901a\u51fd\u6570\u7684\u5f62\u53c2\u3002</p>"},{"location":"C%2B%2B/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/#_4","title":"\u53ef\u4fee\u6539\u6807\u793a\u7b26","text":"<p>mutable\u58f0\u660e\uff0c\u8fd9\u90e8\u5206\u53ef\u4ee5\u7701\u7565\u3002\u6309\u503c\u4f20\u9012\u51fd\u6570\u5bf9\u8c61\u53c2\u6570\u65f6\uff0c\u52a0\u4e0amutable\u4fee\u9970\u7b26\u540e\uff0c\u53ef\u4ee5\u4fee\u6539\u6309\u503c\u4f20\u9012\u8fdb\u6765\u7684\u62f7\u8d1d\uff08\u6ce8\u610f\u662f\u80fd\u4fee\u6539\u62f7\u8d1d\uff0c\u800c\u4e0d\u662f\u503c\u672c\u8eab\uff09\u3002 <pre><code>int a=1;\n    //\u4e0d\u53ef\u4fee\u6539\n  [=](){\n    a=2;\n  }();\n  //\u53ef\u4ee5\u4fee\u6539\n   [=]()mutable{\n    a=2;\n  }();\n</code></pre> \u53ea\u662f\u5bf9\u503c\u7684\u62f7\u8d1d\u8fdb\u884c\u4fee\u6539\uff0c\u51fd\u6570\u5916\u90e8\u53d8\u91cf\u7684\u503c\u4ecd\u672a\u6539\u53d8\u3002</p>"},{"location":"C%2B%2B/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/#_5","title":"\u51fd\u6570\u8fd4\u56de\u503c","text":"<p>-&gt;\u8fd4\u56de\u503c\u7c7b\u578b\uff0c\u6807\u8bc6\u51fd\u6570\u8fd4\u56de\u503c\u7684\u7c7b\u578b\uff0c\u5f53\u8fd4\u56de\u503c\u4e3avoid\uff0c\u6216\u8005\u51fd\u6570\u4f53\u4e2d\u53ea\u6709\u4e00\u5904return\u7684\u5730\u65b9\uff08\u6b64\u65f6\u7f16\u8bd1\u5668\u53ef\u4ee5\u81ea\u52a8\u63a8\u65ad\u51fa\u8fd4\u56de\u503c\u7c7b\u578b\uff09\u65f6\uff0c\u8fd9\u90e8\u5206\u53ef\u4ee5\u7701\u7565\u3002</p>"},{"location":"C%2B%2B/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/#_6","title":"\u51fd\u6570\u4f53","text":"<p>{}\uff0c\u6807\u8bc6\u51fd\u6570\u7684\u5b9e\u73b0\uff0c\u8fd9\u90e8\u5206\u4e0d\u80fd\u7701\u7565\uff0c\u4f46\u51fd\u6570\u4f53\u53ef\u4ee5\u4e3a\u7a7a\u3002</p>"},{"location":"C%2B%2B/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/#lambda_1","title":"Lambda\u4f5c\u4e3a\u8fd4\u56de\u503c","text":"<p>\u5728C++11\u4e2d\u53ea\u80fd\u4f7f\u7528std::function\u6307\u5b9a\u8fd4\u56de\u503c\uff0c\u5c06\u6b32\u8fd4\u56de\u7684lambda\u8868\u8fbe\u5f0f\u8f6c\u6362\u6210function\u5bf9\u8c61\u3002 <pre><code>auto num = [](int i, int j){ return i - j; };\nint main(){\n    cout&lt;&lt;num(1,2);\n}\n</code></pre> \u4e0a\u8ff0\u662f\u5c06Lambda\u4f5c\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7136\u540e\u7528auto\u81ea\u52a8\u8f6c\u6362\u7c7b\u578b\uff0c\u540c\u65f6\u53ef\u4ee5\u6307\u5b9a\u7c7b\u578b\u4e5f\u5c31\u662ffunction\u5bf9\u8c61\u3002 <pre><code> function&lt;int(int,int)&gt; num = [](int i, int j){ return i - j; };\n  cout&lt;&lt;num(1,2);\n</code></pre> \u8fd9\u4e2a\u6a21\u677f\u5bf9\u8c61\u4e2d\u9700\u8981\u4f20\u5165\u51fd\u6570\u8fd4\u56de\u503c\u7c7b\u578b\u548c\u5f62\u53c2\u7c7b\u578b\uff0c\u901a\u5e38\u4f7f\u7528auto\u8fdb\u884c\u81ea\u52a8\u8f6c\u6362\u3002 <pre><code>std::function&lt;void(int)&gt; func(){\n    return [] (int e) { std::cout &lt;&lt; e; };\n  }\nfunc()(10);\n</code></pre> \u8fd9\u4e2a\u4f8b\u5b50\u662f\u5c06Lambda\u4f5c\u4e3a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002</p>"},{"location":"C%2B%2B/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/#_7","title":"\u603b\u7ed3","text":"<p>Lambda\u8fd8\u6709\u8bb8\u591a\u79cd\u7528\u5904\uff0c\u901a\u5e38\u4e5f\u53ef\u4ee5\u4f5c\u4e3aSTL\u79cd\u7b97\u6cd5\u7684\u53c2\u6570\u4f20\u5165\uff0c\u7528\u4e8e\u5904\u7406\u4e00\u4e9b\u903b\u8f91\u8f83\u4e3a\u7b80\u5355\u7684\u51fd\u6570\u7ed3\u6784\uff0c\u4f8b\u5982\u6bd4\u8f83\u5927\u5c0f\u7b49\u3002 <pre><code>std::sort(v.begin(), v.end(), [] ( int n1, int n2 ) { return n1 &gt; n2; });\n</code></pre> \u8fd9\u4e2a\u4f8b\u5b50\u5c31\u662f\u7528sort\u7b97\u6cd5\uff0c\u5e76\u5229\u7528Lambda\u8fdb\u884c\u6392\u5e8f\u3002</p>"},{"location":"C%2B%2B/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/","title":"C\u8bed\u8a00\u4e2d\u7684\u6570\u7ec4\u7a7a\u95f4\u52a8\u6001\u5f00\u8f9f","text":"<p>\u5728C\u8bed\u8a00\u4e2d\uff0c\u5fc5\u4e0d\u53ef\u5c11\u7684\u9700\u8981\u4f7f\u7528\u5230\u6570\u7ec4\uff0c\u901a\u5e38\u4e3a\u4e86\u52a8\u6001\u7684\u5f00\u8f9f\u6570\u7ec4\u7a7a\u95f4\uff0c\u53ef\u4ee5\u4f7f\u7528malloc\u51fd\u6570\uff0c\u5728C++\u4e2d\u53ef\u4ee5\u4f7f\u7528new\u5173\u952e\u5b57\u8fdb\u884c\u7a7a\u95f4\u7684\u52a8\u6001\u5f00\u8f9f\u4e0e\u56de\u6536\uff0c\u52a8\u6001\u5f00\u8f9f\u7a7a\u95f4\u7684\u65b9\u6cd5\u66f4\u52a0\u7075\u6d3b\uff0c\u66f4\u80fd\u6709\u6548\u7684\u6839\u636e\u9700\u8981\u5f00\u8f9f\u7a7a\u95f4\u4f7f\u7528\u3002</p>"},{"location":"C%2B%2B/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/#1","title":"1\u3001\u4e00\u7ef4\u6570\u7ec4","text":"<p>\u4e00\u7ef4\u6570\u7ec4\u6700\u7b80\u5355\uff0c\u76f4\u63a5\u4f7f\u7528malloc\u51fd\u6570\u5c31\u53ef\u4ee5\u5f00\u8f9f\uff0c\u4ee5int\u578b\u6570\u636e\u4e3a\u4f8b\uff0c\u5f00\u8f9f\u4e00\u4e2a\u8fde\u7eed\u7a7a\u95f4\u4f7f\u7528\u3002 <pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid test(int *arr){\n    for(int i=0;i&lt;5;i++){\n        printf(\"%d \",arr[i]);\n    }\n}\nint main(){\n    int nums=5;\n    int *array=(int *)malloc(sizeof(int)*nums);\n    for(int i=0;i&lt;5;i++){\n        array[i]=i;\n    }\n    test(array);\n    return 0;\n}\n</code></pre> \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6700\u540e\u7684\u7ed3\u679c\u8f93\u51fa\u4e3a0 1 2 3 4\uff1bC\u8bed\u8a00\u4e2d\uff0c\u6570\u7ec4\u53d8\u91cf\u53ef\u4ee5\u770b\u4f5c\u4e00\u4e2a\u6307\u9488\uff0c\u901a\u8fc7malloc\u5c06\u5f00\u8f9f\u7a7a\u95f4\u7684\u8fd4\u56de\u503c\u8fd4\u56de\u7ed9\u6570\u7ec4\u6307\u9488\uff0c\u4ece\u800c\u53ef\u4ee5\u901a\u8fc7\u968f\u673a\u8bbf\u95ee\u4fee\u6539\u548c\u67e5\u8be2\u6570\u7ec4\u4e2d\u7684\u503c\u3002</p>"},{"location":"C%2B%2B/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/#2","title":"2\u3001\u4e8c\u7ef4\u6570\u7ec4","text":"<p>\u4e8c\u7ef4\u6570\u7ec4\u53ef\u4ee5\u770b\u4f5c\u4e00\u7ef4\u6570\u7ec4\u7684\u5ef6\u7533\uff0c\u5728\u4e0a\u4e00\u4e2a\u4f8b\u5b50\u4e00\u7ef4\u6570\u7ec4\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u4e00\u7ef4\u6570\u636e\u662f\u4e00\u4e2aint\u578b\u53d8\u91cf\uff0c\u800c\u4e8c\u7ef4\u6570\u7ec4\u4e2d\uff0c\u5c06\u4e0a\u4e00\u4e2a\u4f8b\u5b50\u4e2d\u6bcf\u4e00\u4e2a\u4e00\u7ef4\u53d8\u91cf\u53d8\u4e3a\u4e00\u4e2aint* \u53d8\u91cf\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411\u53e6\u4e00\u4e2a\u5f00\u8f9f\u7684\u52a8\u6001\u4e00\u4f4d\u7a7a\u95f4\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u7ef4\u6570\u7ec4\u7684\u4e00\u7ef4\u6570\u7ec4\uff08\u5957\u5a03\uff09\u3002 <pre><code>#include&lt;iostream&gt;\n#include&lt;stdlib.h&gt;\n\nusing namespace std;\n\nvoid demotest(int **mat){\n    for(int i=0;i&lt;4;i++){\n        for(int j=0;j&lt;4;j++){\n            cout&lt;&lt;mat[i][j]&lt;&lt;\" \";\n        }\n        cout&lt;&lt;endl;\n    }\n}\n\nint main(){\n    int rows=4;\n    int columns=4;\n    int **matrix=(int **)malloc(rows*sizeof(int *));\n    for(int i=0;i&lt;rows;i++){\n        matrix[i]=(int *)malloc(columns*sizeof(int));\n    }\n    for(int i=0;i&lt;rows;i++){\n        for(int j=0;j&lt;columns;j++){\n            matrix[i][j]=i+j;\n        }\n    }\n    demotest(matrix);\n    return 0;\n}\n</code></pre> \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5c06\u4e8c\u7ef4\u6570\u7ec4\uff08\u77e9\u9635\uff09\u770b\u4f5c\u4e00\u4e2a\u4e8c\u7ea7\u6307\u9488\uff08\u6307\u5411\u6307\u9488\u7684\u6307\u9488\uff09\uff0c\u6bcf\u4e00\u4e2a\u4e8c\u7ea7\u6307\u9488\u6307\u5411\u4e00\u4e2a\u5f00\u8f9f\u7a7a\u95f4\u8fd4\u56de\u7684\u4e00\u7ea7\u6307\u9488\u3002\u5bf9\u6bd4\u4e00\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u770b\u51fa\uff0c\u4e8c\u7ef4\u6570\u7ec4\u76f8\u5f53\u4e8e\u4e00\u7ef4\u6570\u7ec4\u4e2d\u5b58\u50a8\u6307\u5411\u91cc\u4e00\u4e2a\u4e00\u7ef4\u6570\u7ec4\u7684\u5730\u5740\uff0c\u901a\u8fc7\u51fd\u6570\u5c06\u4e8c\u7ef4\u6307\u9488\u4f20\u9012\u8fc7\u53bb\uff0c\u53ef\u4ee5\u83b7\u53d6\u4e8c\u7ef4\u6570\u7ec4\u7684\u5730\u5740\uff0c\u7136\u540e\u904d\u5386\u5f97\u5230\u503c\u3002</p>"},{"location":"C%2B%2B/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/#3","title":"3\u3001\u4e09\u7ef4\u6570\u7ec4","text":"<p>\u7c7b\u6bd4\u4e8c\u7ef4\u6570\u7ec4\u7684\u4f8b\u5b50\uff0c\u4e09\u7ef4\u6570\u7ec4\u5c31\u53ef\u4ee5\u770b\u4f5c\u4e8c\u7ef4\u6570\u7ec4\u7684\u5ef6\u7533\uff0c\u4e09\u7ef4\u6570\u7ec4\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u901a\u5e38\u53ef\u4ee5\u7528\u4e8e\u5b58\u50a8RGB\u56fe\u7247\uff0c\u7406\u89e3\u4e8c\u7ef4\u6570\u7ec4\u4e4b\u540e\uff0c\u4e09\u7ef4\u6570\u7ec4\u5c31\u8f83\u4e3a\u7b80\u5355\u4e86\uff0c\u4ee3\u7801\u4f8b\u5b50\u5982\u4e0b\u3002 <pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main(){\n    int channels=3;\n    int columns=4;\n    int rows=4;\n    int ***matrix=(int ***)malloc(sizeof(int **)*channels);\n    for(int i=0;i&lt;channels;i++){\n        matrix[i]=(int **)malloc(sizeof(int *)*rows);\n    }\n    for(int i=0;i&lt;channels;i++){\n        for(int j=0;j&lt;rows;j++){\n            matrix[i][j]=(int *)malloc(sizeof(int)*columns);\n        }\n    }\n    for(int i=0;i&lt;channels;i++){\n        for(int j=0;j&lt;rows;j++){\n            for(int k=0;k&lt;columns;k++){\n                matrix[i][j][k]=i+j+k;\n            }\n        }\n    }\n\n     for(int i=0;i&lt;channels;i++){\n        for(int j=0;j&lt;rows;j++){\n            for(int k=0;k&lt;columns;k++){\n                printf(\"%d \",matrix[i][j][k]);\n            }\n            printf(\"\\n\");\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre> \u4e00\u4e2a3x4x4\u7684\u6570\u7ec4\uff08\u77e9\u9635\uff09\uff0c\u5148\u5f00\u8f9f\u4e00\u4e2a\u4e09\u7ea7\u6307\u9488\u7684\u7a7a\u95f4\uff0c\u6bcf\u4e00\u4e2a\u4e09\u7ea7\u6307\u9488\u6307\u5411\u7684\u662f\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u7136\u540e\u4e8c\u7ef4\u6570\u7ec4\u7684\u5f00\u8f9f\u65b9\u6cd5\u5982\u540c\u4e0a\u4e00\u4e2a\u4f8b\u5b50\u4e2d\u7684\u90a3\u6837\uff0c\u4e00\u6b21\u7c7b\u63a8\uff0c\u66f4\u9ad8\u7ef4\u5ea6\u7684\u6570\u7ec4\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6b64\u7c7b\u65b9\u6cd5\u8fdb\u884c\u5957\u5a03\u5f97\u5230\u3002</p>"},{"location":"C%2B%2B/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/#_1","title":"\u603b\u7ed3","text":"<p>\u5728\u4e00\u4e9b\u7279\u5b9a\u7684\u7a0b\u5e8f\u4e2d\uff0c\u6211\u4eec\u5e38\u5e38\u65e0\u6cd5\u9884\u6d4b\u6570\u7ec4\u7684\u5927\u5c0f\u3002\u5982\u679c\u6211\u4eec\u81ea\u5df1\u5c06\u503c\u5206\u914d\u7ed9\u6570\u7ec4\uff0c\u90a3\u4e48\u5b83\u5728\u6267\u884c\u671f\u95f4\u65e0\u6cd5\u66f4\u6539\u3002\u8fd9\u4f1a\u4ea7\u751f\u95ee\u9898\uff0c\u8981\u4e48\u6570\u7ec4\u7684\u5185\u5b58\u53d8\u4f4e\uff0c\u8981\u4e48\u6570\u7ec4\u5360\u7528\u66f4\u5c11\u7684\u7a7a\u95f4\u6d6a\u8d39\u5185\u5b58\uff0c\u56e0\u6b64\u4e3a\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u5efa\u8bae\u52a8\u6001\u5206\u914d\u6570\u7ec4\u3002</p>"},{"location":"Java/","title":"Java\u5b66\u4e60","text":"<p>\u70b9\u51fb\u5de6\u4fa7\u67e5\u770b\u76f8\u5173\u5185\u5bb9</p>"},{"location":"Java/Spring/Spring5/","title":"Spring","text":""},{"location":"Java/Spring/Spring5/#spring5","title":"Spring5","text":""},{"location":"Java/Spring/Spring5/#1spring","title":"1.\u3001Spring","text":""},{"location":"Java/Spring/Spring5/#11","title":"1.1\u3001\u7b80\u4ecb","text":"<ul> <li>Spring \u2014\u2014&gt; \u6625\u5929\uff0c\u4e3a\u5f00\u6e90\u8f6f\u4ef6\u5e26\u6765\u4e86\u6625\u5929</li> <li>2002\uff0c\u9996\u6b21\u63a8\u51fa\u4e86Spring\u6846\u67b6\u7684\u96cf\u5f62\uff1ainterface21\u6846\u67b6\uff01</li> <li>Spring\u6846\u67b6\u4ee5interface21\u6846\u67b6\u4e3a\u57fa\u7840\uff0c\u7ecf\u8fc7\u91cd\u65b0\u8bbe\u8ba1\uff0c\u5e76\u4e0d\u65ad\u4e30\u5bcc\u5176\u5185\u6db5\uff0c\u4e8e2004\u5e743\u670824\u65e5\u53d1\u5e03\u4e861.0\u6b63\u5f0f\u7248</li> <li> <p>Spring\u7684\u7406\u5ff5\uff1a\u4f7f\u7528\u73b0\u6709\u7684\u6280\u672f\u66f4\u52a0\u5bb9\u6613\u4f7f\u7528\uff0c\u672c\u8eab\u662f\u4e00\u4e2a\u5927\u6742\u70e9\uff0c\u6574\u5408\u4e86\u73b0\u6709\u7684\u6280\u672f\u6846\u67b6\uff01</p> </li> <li> <p>SSH\uff1aStruct2 + Spring + Hibernate\uff08\u5168\u81ea\u52a8\u6301\u4e45\u5316\u6846\u67b6\uff09\uff01</p> </li> <li>SSM\uff1aSpringMVC + Spring + MyBatis\uff08\u534a\u81ea\u52a8\u6301\u4e45\u5316\u6846\u67b6\uff0c\u53ef\u81ea\u5b9a\u4e49\u6027\u8d28\u66f4\u5f3a\uff09\uff01</li> </ul> <p>spring\u5b98\u7f51\uff1a https://spring.io/projects/spring-framework#overview</p> <p>\u5b98\u65b9\u4e0b\u8f7d\uff1a https://repo.spring.io/release/org/springframework/spring/</p> <p>GitHub\uff1a https://github.com/spring-projects/spring-framework</p> <p>Spring Web MVC\uff1a spring-webmvc\u6700\u65b0\u7248</p> <p>Spring Web MVC\u548cSpring-JDBC\u7684pom\u914d\u7f6e\u6587\u4ef6\uff1a</p> <pre><code>&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/Spring/Spring5/#12","title":"1.2 \u4f18\u70b9","text":"<ul> <li>Spring\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u514d\u8d39\u7684\u6846\u67b6\uff08\u5bb9\u5668\uff09\uff01</li> <li>Spring\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u3001\u975e\u5165\u4fb5\u5f0f\u7684\u6846\u67b6\uff01</li> <li>\u63a7\u5236\u53cd\u8f6c\uff08IoC\uff09\uff0c\u9762\u5411\u5207\u9762\u7f16\u7a0b\uff08AOP\uff09</li> <li>\u652f\u6301\u4e8b\u52a1\u7684\u5904\u7406\uff0c\u5bf9\u6846\u67b6\u6574\u5408\u7684\u652f\u6301\uff01\uff08\u51e0\u4e4e\u5e02\u9762\u4e0a\u6240\u6709\u70ed\u95e8\u6846\u67b6\u90fd\u80fd\u6574\u5408\u8fdb\u53bb\uff09\uff01</li> </ul> <p>=== \u603b\u7ed3\u4e00\u53e5\u8bdd\uff1aSpring\u5c31\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u63a7\u5236\u53cd\u8f6c\uff08IoC\uff09\u548c\u9762\u5411\u5207\u9762\u7f16\u7a0b\uff08AOP\uff09\u7684\u6846\u67b6\uff01 ===</p>"},{"location":"Java/Spring/Spring5/#13","title":"1.3 \u7ec4\u6210","text":""},{"location":"Java/Spring/Spring5/#14","title":"1.4\u3001\u6269\u5c55","text":"<p>\u73b0\u4ee3\u5316\u7684java\u5f00\u53d1 -&gt; \u57fa\u4e8eSpring\u7684\u5f00\u53d1\uff01</p> <p></p> <ul> <li>Spring Boot</li> <li>\u4e00\u4e2a\u5feb\u901f\u5f00\u53d1\u7684\u811a\u624b\u67b6</li> <li>\u57fa\u4e8eSpringBoot\u53ef\u4ee5\u5feb\u901f\u5f00\u53d1\u5355\u4e2a\u5fae\u670d\u52a1</li> <li>\u7ea6\u5b9a\u5927\u4e8e\u914d\u7f6e\uff01</li> <li>Spring Cloud</li> <li>SpringCloud\u662f\u57fa\u4e8eSpringBoot\u5b9e\u73b0\u7684\uff01</li> </ul> <p>\u56e0\u4e3a\u73b0\u5728\u5927\u591a\u6570\u516c\u53f8\u90fd\u5728\u4f7f\u7528SpringBoot\u8fdb\u884c\u5feb\u901f\u5f00\u53d1\uff0c\u5b66\u4e60SpringBoot\u7684\u524d\u63d0\uff0c\u9700\u8981\u5b8c\u5168\u638c\u63e1Spring\u53caSpringMVC\uff01\u627f\u4e0a\u542f\u4e0b\u7684\u4f5c\u7528\uff01</p>"},{"location":"Java/Spring/Spring5/#2ioc","title":"2\u3001IoC\uff08\u63a7\u5236\u53cd\u8f6c\uff09\u7406\u8bba\u63a8\u5bfc","text":"<p>\u4f20\u7edf\u7684\u8c03\u7528</p> <ol> <li>UserDao</li> </ol> <pre><code>package dao;\npublic interface UserDao {\n void getUser();\n}\n</code></pre> <ol> <li>UserDaoImp</li> </ol> <pre><code>package dao;\npublic class UserDaoImpl implements UserDao{\n public void getUser() {\n     System.out.println(\"\u9ed8\u8ba4\u83b7\u53d6\u7528\u6237\u6570\u636e\"); \n }\n}\n</code></pre> <ol> <li>UserSevice</li> </ol> <pre><code>package Service;\npublic interface UserService {\n void getUser();\n}\n</code></pre> <ol> <li>UserServiceImp</li> </ol> <pre><code>package Service;\nimport dao.UserDao;\nimport dao.UserDaoImpl;\n\npublic class UserServiceImpl implements UserService{\n     UserDao userDao = new UserDaoImpl();        \n     public void getUser(){\n         userDao.getUser();\n     }   \n}\n</code></pre> <p>\u6d4b\u8bd5</p> <pre><code>package holle0;\nimport Service.UserService;\nimport Service.UserServiceImpl;\n\npublic class MyTest0 {\n    public static void main(String[] args) {\n        // \u7528\u6237\u5b9e\u9645\u8c03\u7528\u7684\u662f\u4e1a\u52a1\u5c42\uff0cdao\u5c42\u4ed6\u4eec\u4e0d\u9700\u8981\u63a5\u89e6\n        UserService userService = new UserServiceImpl();\n        userService.getUser();\n    }\n}\n</code></pre> <p>\u5728\u6211\u4eec\u4e4b\u524d\u7684\u4e1a\u52a1\u4e2d\uff0c\u7528\u6237\u7684\u9700\u6c42\u53ef\u80fd\u4f1a\u5f71\u54cd\u6211\u4eec\u539f\u6765\u7684\u4ee3\u7801\uff0c\u6211\u4eec\u9700\u8981\u6839\u636e\u7528\u6237\u7684\u9700\u6c42\u53bb\u4fee\u6539\u539f\u4ee3\u7801\uff01\u5982\u679c\u7a0b\u5e8f\u4ee3\u7801\u91cf\u5341\u5206\u5927\uff0c\u4fee\u6539\u4e00\u6b21\u7684\u6210\u672c\u4ee3\u4ef7\u5341\u5206\u6602\u8d35\uff01</p> <p> \u6539\u826f\uff1a\u6211\u4eec\u4f7f\u7528\u4e00\u4e2aSet\u63a5\u53e3\u5b9e\u73b0\u3002\u5df2\u7ecf\u53d1\u751f\u4e86\u9769\u547d\u6027\u7684\u53d8\u5316\uff01</p> <pre><code>//\u5728Service\u5c42\u7684\u5b9e\u73b0\u7c7b(UserServiceImpl)\u589e\u52a0\u4e00\u4e2aSet()\u65b9\u6cd5\n//\u5229\u7528set\u52a8\u6001\u5b9e\u73b0\u503c\u7684\u6ce8\u5165\uff01\n//DAO\u5c42\u5e76\u4e0d\u5199\u6b7b\u56fa\u5b9a\u8c03\u7528\u54ea\u4e00\u4e2aUserDao\u7684\u5b9e\u73b0\u7c7b\n//\u800c\u662f\u901a\u8fc7Service\u5c42\u8c03\u7528\u65b9\u6cd5\u8bbe\u7f6e\u5b9e\u73b0\u7c7b\uff01\nprivate UserDao userDao;\npublic void setUserDao(UserDao userDao){\n    this.userDao = userDao;\n}\n</code></pre> <p>set() \u65b9\u6cd5\u5b9e\u9645\u4e0a\u662f\u52a8\u6001\u6539\u53d8\u4e86 UserDao userDao \u7684 \u521d\u59cb\u5316\u90e8\u5206\uff08new UserDaoImpl()\uff09</p> <p>\u6d4b\u8bd5\u4e2d\u52a0\u4e0a</p> <pre><code>((UserServiceImpl)userService).setUserDao(new UserDaoImpl());\n</code></pre> <ul> <li>\u4e4b\u524d\uff0c\u7a0b\u5e8f\u662f\u4e3b\u52a8\u521b\u5efa\u5bf9\u8c61\uff01\u63a7\u5236\u6743\u5728\u7a0b\u5e8f\u733f\u624b\u4e0a\uff01</li> <li>\u4f7f\u7528\u4e86set\u6ce8\u5165\u540e\uff0c\u7a0b\u5e8f\u4e0d\u518d\u5177\u6709\u4e3b\u52a8\u6027\uff0c\u800c\u662f\u53d8\u6210\u4e86\u88ab\u52a8\u7684\u63a5\u53d7\u5bf9\u8c61\uff01\uff08\u4e3b\u52a8\u6743\u5728\u5ba2\u6237\u624b\u4e0a\uff09</li> </ul> <p>\u672c\u8d28\u4e0a\u89e3\u51b3\u4e86\u95ee\u9898\uff0c\u7a0b\u5e8f\u5458\u4e0d\u7528\u518d\u53bb\u7ba1\u7406\u5bf9\u8c61\u7684\u521b\u5efa</p> <p>\u7cfb\u7edf\u7684\u8026\u5408\u6027\u5927\u5927\u964d\u4f4e\uff0c\u53ef\u4ee5\u66f4\u4e13\u6ce8\u5728\u4e1a\u52a1\u7684\u5b9e\u73b0\u4e0a</p> <p>\u8fd9\u662fIoC\uff08\u63a7\u5236\u53cd\u8f6c\uff09\u7684\u539f\u578b\uff0c\u53cd\u8f6c(\u7406\u89e3)\uff1a\u4e3b\u52a8\u6743\u4ea4\u7ed9\u4e86\u7528\u6237</p> <p></p>"},{"location":"Java/Spring/Spring5/#ioc","title":"IoC\u672c\u8d28","text":""},{"location":"Java/Spring/Spring5/#3hollespring","title":"3\u3001HolleSpring","text":"<p>\u5728\u7236\u6a21\u5757\u4e2d\u5bfc\u5165jar\u5305</p> <pre><code>&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>pojo\u7684Hello.java</p> <pre><code>package pojo;\n\npublic class Hello {\n\n    private String str;\n\n    public String getStr() {\n        return str;\n    }\n\n    public void setStr(String str) {\n        this.str = str;\n    }\n\n    @Override\n    public String toString() {\n        return \"Holle [str=\" + str + \"]\";\n    }\n}\n</code></pre> <p>\u5728resource\u91cc\u9762\u7684xml\u914d\u7f6e</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;\n\n\n    &lt;!--\u5728Spring\u4e2d\u521b\u5efa\u5bf9\u8c61\uff0c\u5728Spring\u8fd9\u4e9b\u90fd\u79f0\u4e3abean\n        \u7c7b\u578b \u53d8\u91cf\u540d = new \u7c7b\u578b();\n        Holle holle = new Holle();\n\n        bean = \u5bf9\u8c61(holle)\n        id = \u53d8\u91cf\u540d(holle)\n        class = new\u7684\u5bf9\u8c61(new Holle();)\n        property \u76f8\u5f53\u4e8e\u7ed9\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u8bbe\u503c,\u8ba9str=\"Spring\"\n    --&gt;\n\n    &lt;bean id=\"hello\" class=\"pojo.Hello\"&gt;\n        &lt;property name=\"str\" value=\"Spring\"/&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre> <p>\u6d4b\u8bd5\u7c7bMyTest</p> <pre><code>package holle1;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\nimport pojo.Hello;\n\npublic class MyTest {\n\n    public static void main(String[] args) {\n        //\u83b7\u53d6Spring\u7684\u4e0a\u4e0b\u6587\u5bf9\u8c61\n        ApplicationContext context = new ClassPathXmlApplicationContext(\"beans.xml\");\n        //\u6211\u4eec\u7684\u5bf9\u8c61\u4e0b\u80fd\u5728\u90fd\u5728spring\u00b7\u4e2d\u7ba1\u7406\u4e86\uff0c\u6211\u4eec\u8981\u4f7f\u7528\uff0c\u76f4\u63a5\u53d6\u51fa\u6765\u5c31\u53ef\u4ee5\u4e86\n        Hello holle = (Hello) context.getBean(\"hello\");\n        System.out.println(holle.toString());\n    }\n\n}\n</code></pre> <p>\u6838\u5fc3\u7528set\u6ce8\u5165\uff0c\u6240\u4ee5\u5fc5\u987b\u8981\u6709\u4e0b\u9762\u7684se()\u65b9\u6cd5</p> <pre><code>//Hello\u7c7b\npublic void setStr(String str) {\n        this.str = str;\n    }\n</code></pre> <p>\u601d\u8003\uff1a</p> <p> IoC\uff1a\u5bf9\u8c61\u7531Spring \u6765\u521b\u5efa\uff0c\u7ba1\u7406\uff0c\u88c5\u914d\uff01</p> <p>\u5f39\u5e55\u8bc4\u8bba\u91cc\u9762\u7684\u7406\u89e3\uff1a</p> <p>\u539f\u6765\u8fd9\u5957\u7a0b\u5e8f\u662f\uff1a\u4f60\u5199\u597d\u83dc\u5355\u4e70\u597d\u83dc\uff0c\u5ba2\u4eba\u6765\u4e86\u81ea\u5df1\u628a\u83dc\u7092\u597d\u62db\u5f85\uff0c\u5c31\u76f8\u5f53\u4e8e\u4f60\u8bf7\u4eba\u5403\u996d \u73b0\u5728\u8fd9\u5957\u7a0b\u5e8f\u662f\uff1a\u4f60\u544a\u8bc9\u697c\u4e0b\u9910\u5385\uff0c\u4f60\u8981\u54ea\u4e9b\u83dc\uff0c\u5ba2\u4eba\u6765\u7684\u65f6\u5019\uff0c\u9910\u5385\u628a\u505a\u597d\u7684\u4f60\u9700\u8981\u7684\u83dc\u9001\u4e0a\u6765 IoC\uff1a\u7092\u83dc\u8fd9\u4ef6\u4e8b\uff0c\u4e0d\u518d\u7531\u4f60\u81ea\u5df1\u6765\u505a\uff0c\u800c\u662f\u59d4\u6258\u7ed9\u4e86\u7b2c\u4e09\u65b9__\u9910\u5385\u6765\u505a</p> <p>\u6b64\u65f6\u7684\u533a\u522b\u5c31\u662f\uff0c\u5982\u679c\u6211\u8fd8\u9700\u8981\u505a\u5176\u4ed6\u7684\u83dc\uff0c\u6211\u4e0d\u9700\u8981\u81ea\u5df1\u641e\u83dc\u8c31\u4e70\u6750\u6599\u518d\u505a\u597d\uff0c\u800c\u662f\u544a\u8bc9\u9910\u5385\uff0c\u6211\u8981\u4ec0\u4e48\u83dc\uff0c\u4ec0\u4e48\u65f6\u5019\u8981\uff0c\u4f60\u505a\u597d\u9001\u6765</p> <p>.</p> <p>\u5728\u524d\u9762\u7b2c\u4e00\u4e2amodule\u8bd5\u8bd5\u5f15\u5165Spring</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;\n\n    &lt;bean id=\"userDaomSql\" class=\"dao.UserDaoMysqlImpl\"&gt;&lt;/bean&gt;\n\n    &lt;bean id=\"userServiceImpl\" class=\"service.UserServiceImp\"&gt;\n        &lt;!--ref\u5f15\u7528spring\u4e2d\u5df2\u7ecf\u521b\u5efa\u5f88\u597d\u7684\u5bf9\u8c61--&gt;\n        &lt;!--value\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u503c,\u57fa\u672c\u6570\u636e\u7c7b\u578b--&gt;\n        &lt;property name=\"userDao\" ref=\"userDaomSql\"/&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre> <p>\u7b2c\u4e00\u4e2amodule\u6539\u826f\u540e\u6d4b\u8bd5</p> <pre><code>package holle0;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport service.UserServiceImpl;\n\npublic class MyTest0 {\n    public static void main(String[] args) {\n        ApplicationContext context = new ClassPathXmlApplicationContext(\"beans.xml\");\n        UserServiceImpl userServiceImpl = (UserServiceImpl) context.getBean(\"userServiceImpl\");\n        userServiceImpl.getUser();\n    }\n}\n</code></pre> <p>\u603b\u7ed3\uff1a</p> <p>\u6240\u6709\u7684\u7c7b\u90fd\u8981\u88c5\u914d\u7684beans.xml \u91cc\u9762\uff1b</p> <p>\u6240\u6709\u7684bean \u90fd\u8981\u901a\u8fc7\u5bb9\u5668\u53bb\u53d6\uff1b</p> <p>\u5bb9\u5668\u91cc\u9762\u53d6\u5f97\u7684bean\uff0c\u62ff\u51fa\u6765\u5c31\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7528\u5bf9\u8c61\u8c03\u7528\u65b9\u6cd5\u5373\u53ef\uff1b</p>"},{"location":"Java/Spring/Spring5/#4ioc","title":"4\u3001IoC\u521b\u5efa\u5bf9\u8c61\u7684\u65b9\u5f0f","text":"<ol> <li>\u4f7f\u7528\u65e0\u53c2\u6784\u9020\u521b\u5efa\u5bf9\u8c61\uff0c\u9ed8\u8ba4\u3002</li> <li>\u4f7f\u7528\u6709\u53c2\u6784\u9020\uff08\u5982\u4e0b\uff09</li> </ol> <p>\u4e0b\u6807\u8d4b\u503c</p> <p>index\u6307\u7684\u662f\u6709\u53c2\u6784\u9020\u4e2d\u53c2\u6570\u7684\u4e0b\u6807\uff0c\u4e0b\u6807\u4ece0\u5f00\u59cb;</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;\n\n    &lt;bean id=\"user\" class=\"pojo.User\"&gt;\n        &lt;constructor-arg index=\"0\" value=\"chen\"/&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre> <p>\u7c7b\u578b\u8d4b\u503c\uff08\u4e0d\u5efa\u8bae\u4f7f\u7528\uff09</p> <pre><code>&lt;bean id=\"user\" class=\"pojo.User\"&gt;\n    &lt;constructor-arg type=\"java.lang.String\" value=\"kuang\"/&gt;\n&lt;/bean&gt;\n</code></pre> <p>\u76f4\u63a5\u901a\u8fc7\u53c2\u6570\u540d\uff08\u638c\u63e1\uff09</p> <pre><code>&lt;bean id=\"user\" class=\"pojo.User\"&gt;\n    &lt;constructor-arg name=\"name\" value=\"kuang\"&gt;&lt;/constructor-arg&gt;\n&lt;/bean&gt;\n&lt;!-- \u6bd4\u5982\u53c2\u6570\u540d\u662fname\uff0c\u5219\u6709name=\"\u5177\u4f53\u503c\" --&gt;\n</code></pre> <p>\u6ce8\u518cbean\u4e4b\u540e\u5c31\u5bf9\u8c61\u7684\u521d\u59cb\u5316\u4e86\uff08\u7c7b\u4f3c new \u7c7b\u540d()\uff09</p> <p>\u5f39\u5e55\u8bc4\u8bba\uff1a</p> <p>name\u65b9\u5f0f\u8fd8\u9700\u8981\u65e0\u53c2\u6784\u9020\u548cset\u65b9\u6cd5,index\u548ctype\u53ea\u9700\u8981\u6709\u53c2\u6784\u9020</p> <p>\u5c31\u7b97\u662fnew \u4e24\u4e2a\u5bf9\u8c61\uff0c\u4e5f\u662f\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff08\u5355\u4f8b\u6a21\u5f0f\uff1a\u5168\u5c40\u552f\u4e00\uff09</p> <pre><code>User user = (User) context.getBean(\"user\");\nUser user2 = (User) context.getBean(\"user\");\nsystem.out.println(user == user2)//\u7ed3\u679c\u4e3atrue\n</code></pre> <p>\u603b\u7ed3\uff1a\u5728\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u7684\u65f6\u5019\uff0c\u5bb9\u5668(&lt; bean&gt;)\u4e2d\u7ba1\u7406\u7684\u5bf9\u8c61\u5c31\u5df2\u7ecf\u521d\u59cb\u5316\u4e86</p>"},{"location":"Java/Spring/Spring5/#5spring","title":"5\u3001Spring\u914d\u7f6e","text":""},{"location":"Java/Spring/Spring5/#51","title":"5.1\u3001\u522b\u540d","text":"<pre><code>&lt;bean id=\"user\" class=\"pojo.User\"&gt;\n    &lt;constructor-arg name=\"name\" value=\"chen\"&gt;&lt;/constructor-arg&gt;\n&lt;/bean&gt;\n\n&lt;alias name=\"user\" alias=\"userLove\"/&gt;\n&lt;!-- \u4f7f\u7528\u65f6\n    User user2 = (User) context.getBean(\"userLove\");    \n--&gt;\n</code></pre>"},{"location":"Java/Spring/Spring5/#52bean","title":"5.2\u3001Bean\u7684\u914d\u7f6e","text":"<pre><code>&lt;!--id\uff1abean\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u4e5f\u5c31\u662f\u76f8\u5f53\u4e8e\u6211\u4eec\u5b66\u7684\u5bf9\u8c61\u540d\nclass\uff1abean\u5bf9\u8c61\u6240\u5bf9\u5e94\u7684\u4f1a\u9650\u5b9a\u540d\uff1a\u5305\u540d+\u7c7b\u578b\nname\uff1a\u4e5f\u662f\u522b\u540d\uff0c\u800c\u4e14name\u53ef\u4ee5\u540c\u65f6\u53d6\u591a\u4e2a\u522b\u540d --&gt;\n&lt;bean id=\"user\" class=\"pojo.User\" name=\"u1 u2,u3;u4\"&gt;\n    &lt;property name=\"name\" value=\"chen\"/&gt;\n&lt;/bean&gt;\n&lt;!-- \u4f7f\u7528\u65f6\n    User user2 = (User) context.getBean(\"u1\");  \n--&gt;\n</code></pre>"},{"location":"Java/Spring/Spring5/#53import","title":"5.3\u3001import","text":"<p>import\u4e00\u822c\u7528\u4e8e\u56e2\u961f\u5f00\u53d1\u4f7f\u7528\uff0c\u5b83\u53ef\u4ee5\u5c06\u591a\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u5bfc\u5165\u5408\u5e76\u4e3a\u4e00\u4e2a</p> <p>\u5047\u8bbe\uff0c\u73b0\u5728\u9879\u76ee\u4e2d\u6709\u591a\u4e2a\u4eba\u5f00\u53d1\uff0c\u8fd9\u4e09\u4e2a\u4eba\u590d\u5236\u4e0d\u540c\u7684\u7c7b\u5f00\u53d1\uff0c\u4e0d\u540c\u7684\u7c7b\u9700\u8981\u6ce8\u518c\u5728\u4e0d\u540c\u7684bean\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5229 \u7528import\u5c06\u6240\u6709\u4eba\u7684beans.xml\u5408\u5e76\u4e3a\u4e00\u4e2a\u603b\u7684\uff01</p> <ul> <li> <p>\u5f20\u4e09(beans.xm1)</p> </li> <li> <p>\u674e\u56db(beans2.xm1)</p> </li> <li> <p>\u738b\u4e94(beans3.xm1)</p> </li> <li> <p>applicationContext.xml</p> </li> </ul> <pre><code>&lt;import resource=\"beans.xm1\"/&gt;\n&lt;import resource=\"beans2.xml\"/&gt;\n&lt;import resource=\"beans3.xm1\"/&gt;\n</code></pre> <p>\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u4f7f\u7528\u603b\u7684\u914d\u7f6e\u5c31\u53ef\u4ee5\u4e86</p> <p>\u5f39\u5e55\u8bc4\u8bba\uff1a</p> <p>\u6309\u7167\u5728\u603b\u7684xml\u4e2d\u7684\u5bfc\u5165\u987a\u5e8f\u6765\u8fdb\u884c\u521b\u5efa\uff0c\u540e\u5bfc\u5165\u7684\u4f1a\u91cd\u5199\u5148\u5bfc\u5165\u7684\uff0c\u6700\u7ec8\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u4f1a\u662f\u540e\u5bfc\u5165xml\u4e2d\u7684\u90a3\u4e2a</p>"},{"location":"Java/Spring/Spring5/#6di","title":"6\u3001\u4f9d\u8d56\u6ce8\u5165\uff08DI\uff09","text":""},{"location":"Java/Spring/Spring5/#61","title":"6.1\u3001\u6784\u9020\u5668\u6ce8\u5165","text":"<p>\u7b2c4\u70b9\u6709\u63d0\u5230</p>"},{"location":"Java/Spring/Spring5/#62set","title":"6.2\u3001set\u65b9\u5f0f\u6ce8\u5165\u3010\u91cd\u70b9\u3011","text":"<p>\u4f9d\u8d56\u6ce8\u5165\uff1aset\u6ce8\u5165\uff01</p> <ul> <li>\u4f9d\u8d56\uff1abean\u5bf9\u8c61\u7684\u521b\u5efa\u4f9d\u8d56\u4e8e\u5bb9\u5668</li> <li>\u6ce8\u5165\uff1abean\u5bf9\u8c61\u4e2d\u7684\u6240\u6709\u5c5e\u6027\uff0c\u7531\u5bb9\u5668\u6765\u6ce8\u5165</li> </ul> <p>\u3010\u73af\u5883\u642d\u5efa\u3011</p> <ol> <li>\u590d\u6742\u7c7b\u578b</li> </ol> <p>Address\u7c7b</p> <ol> <li>\u771f\u5b9e\u6d4b\u8bd5\u5bf9\u8c61</li> </ol> <p>Student\u7c7b</p> <ol> <li> <p>beans.xml</p> </li> <li> <p>\u6d4b\u8bd5</p> </li> </ol> <p>MyTest3</p> <p>Student\u7c7b</p> <pre><code>package pojo;\n\nimport java.util.*;\n@Get\n@Set\npublic class Student {\n//\u522b\u5fd8\u4e86\u5199get\u548cset\u65b9\u6cd5\uff08\u7528lombok\u6ce8\u89e3\u4e5f\u884c\uff09\n    private String name;\n    private Address address;\n\n    private String[] books;\n    private List&lt;String&gt; hobbies;\n\n    private Map&lt;String, String&gt; card;\n    private Set&lt;String&gt; game;\n\n    private Properties infor;\n    private String wife;\n\n    @Override\n    public String toString() {\n        return \"Student{\" +\"\\n\"+\n                \"name='\" + name + '\\'' +\"\\n\"+\n                \", address=\" + address.toString() +\"\\n\"+\n                \", books=\" + Arrays.toString(books) +\"\\n\"+\n                \", hobbies=\" + hobbies +\"\\n\"+\n                \", card=\" + card +\"\\n\"+\n                \", game=\" + game +\"\\n\"+\n                \", infor=\" + infor +\"\\n\"+\n                \", wife='\" + wife + '\\'' +\"\\n\"+\n                '}';\n    }\n}\n</code></pre> <p>Address\u7c7b</p> <pre><code>package pojo;\n\npublic class Address {\n\n    private String address;\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    @Override\n    public String toString() {\n        return \"Address{\" +\n                \"address='\" + address + '\\'' +\n                '}';\n    }\n}\n</code></pre> <p>beans.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;\n\n    &lt;bean id=\"address\" class=\"pojo.Address\"&gt;\n        &lt;property name=\"address\" value=\"address\u4f60\u597d\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"student\" class=\"pojo.Student\"&gt;\n        &lt;!--\u7b2c\u4e00\u79cd\uff0c\u666e\u901a\u503c\u6ce8\u5165 --&gt;\n        &lt;property name=\"name\" value=\"name\u4f60\u597d\" /&gt;\n        &lt;!--\u7b2c\u4e8c\u79cd\uff0cref\u6ce8\u5165 --&gt;\n        &lt;property name=\"address\" ref=\"address\" /&gt;\n\n        &lt;!--\u6570\u7ec4\u6ce8\u5165 --&gt;\n        &lt;property name=\"books\"&gt;\n            &lt;array&gt;\n                &lt;value&gt;\u4e09\u56fd&lt;/value&gt;\n                &lt;value&gt;\u897f\u6e38&lt;/value&gt;\n                &lt;value&gt;\u6c34\u6d52&lt;/value&gt;\n            &lt;/array&gt;\n        &lt;/property&gt;\n\n        &lt;!--list\u5217\u8868\u6ce8\u5165 --&gt;\n        &lt;property name=\"hobbies\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;\u5531&lt;/value&gt;\n                &lt;value&gt;\u8df3&lt;/value&gt;\n                &lt;value&gt;rap&lt;/value&gt;\n                &lt;value&gt;\u7bee\u7403&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n\n        &lt;!--map\u952e\u503c\u5bf9\u6ce8\u5165 --&gt;\n        &lt;property name=\"card\"&gt;\n            &lt;map&gt;\n                &lt;entry key=\"username\" value=\"root\" /&gt;\n                &lt;entry key=\"password\" value=\"root\" /&gt;\n            &lt;/map&gt;\n        &lt;/property&gt;\n\n        &lt;!--set(\u53ef\u53bb\u91cd)\u6ce8\u5165 --&gt;\n        &lt;property name=\"game\"&gt;\n            &lt;set&gt;\n                &lt;value&gt;wangzhe&lt;/value&gt;\n                &lt;value&gt;lol&lt;/value&gt;\n                &lt;value&gt;galname&lt;/value&gt;\n            &lt;/set&gt;\n        &lt;/property&gt;\n\n        &lt;!--\u7a7a\u6307\u9488null\u6ce8\u5165 --&gt;\n        &lt;property name=\"wife\"&gt;\n            &lt;null&gt;&lt;/null&gt;\n        &lt;/property&gt;\n\n        &lt;!--properties\u5e38\u91cf\u6ce8\u5165 --&gt;\n        &lt;property name=\"infor\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"id\"&gt;20200802&lt;/prop&gt;\n                &lt;prop key=\"name\"&gt;cbh&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre> <p>MyTest3</p> <pre><code>import org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport pojo.Student;\n\npublic class MyTest3 {\n    public static void main(String[] args) {\n        ApplicationContext context = new ClassPathXmlApplicationContext(\"beans.xml\");\n        Student stu = (Student) context.getBean(\"student\");\n        System.out.println(stu.toString());\n    }   \n}\n</code></pre>"},{"location":"Java/Spring/Spring5/#63","title":"6.3\u3001\u62d3\u5c55\u6ce8\u5165","text":"<p>\u5b98\u65b9\u6587\u6863\u4f4d\u7f6e</p> <p></p> <p>pojo\u589e\u52a0User\u7c7b</p> <pre><code>package pojo;\n\npublic class User {\n    private String name;\n    private int id;\n    public User() {\n\n    }\n    public User(String name, int id) {\n        super();\n        this.name = name;\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    @Override\n    public String toString() {\n        return \"User [name=\" + name + \", id=\" + id + \"]\";\n    }\n}\n</code></pre> <p>\u6ce8\u610f\uff1a beans \u91cc\u9762\u52a0\u4e0a\u8fd9\u4e0b\u9762\u4e24\u884c</p> <p>\u4f7f\u7528p\u548cc\u547d\u540d\u7a7a\u95f4\u9700\u8981\u5bfc\u5165xml\u7ea6\u675f</p> <p>xmlns:p=\u201chttp://www.springframework.org/schema/p\u201d xmlns:c=\u201chttp://www.springframework.org/schema/c\u201d</p> <pre><code>?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:p=\"http://www.springframework.org/schema/p\"\n       xmlns:c=\"http://www.springframework.org/schema/c\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;\n\n    &lt;!--p\u547d\u540d\u7a7a\u95f4\u6ce8\u5165/set\u6ce8\u5165\uff0c\u53ef\u4ee5\u76f4\u63a5\u6ce8\u5165\u5c5e\u6027\u7684\u503c-\u300bproperty--&gt;\n    &lt;bean id=\"user\" class=\"pojo.User\" p:name=\"cxk\" p:id=\"20\" &gt;\n    &lt;/bean&gt;\n\n    &lt;!--c\u547d\u540d\u7a7a\u95f4\uff0c\u901a\u8fc7\u6784\u9020\u5668\u6ce8\u5165\uff0c\u9700\u8981\u5199\u5165\u6709\u53c2\u548c\u65e0\u53c2\u6784\u9020\u65b9\u6cd5-\u300bconstruct-args--&gt;\n    &lt;bean id=\"user2\" class=\"pojo.User\" c:name=\"cbh\" c:id=\"22\"&gt;&lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre> <p>\u6d4b\u8bd5</p> <pre><code>ApplicationContext context = new ClassPathXmlApplicationContext(\"beans.xml\");\nUser user = context.getBean(\"user\",User.class);//\u786e\u5b9aclass\u5bf9\u8c61\uff0c\u5c31\u4e0d\u7528\u518d\u5f3a\u8f6c\u4e86\nSystem.out.println(user.toString());\n</code></pre>"},{"location":"Java/Spring/Spring5/#64bean","title":"6.4\u3001Bean\u4f5c\u7528\u57df","text":"<ol> <li>\u5355\u4f8b\u6a21\u5f0f\uff08\u9ed8\u8ba4\uff09</li> </ol> <pre><code>&lt;bean id=\"user2\" class=\"pojo.User\" c:name=\"cxk\" c:age=\"19\" scope=\"singleton\"&gt;&lt;/bean&gt;\n1\n</code></pre> <p> \u5f39\u5e55\u8bc4\u8bba\uff1a\u5355\u4f8b\u6a21\u5f0f\u662f\u628a\u5bf9\u8c61\u653e\u5728pool\u4e2d\uff0c\u9700\u8981\u518d\u53d6\u51fa\u6765\uff0c\u4f7f\u7528\u7684\u90fd\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\u5b9e\u4f8b</p> <ol> <li>\u539f\u578b\u6a21\u5f0f: \u6bcf\u6b21\u4ece\u5bb9\u5668\u4e2dget\u7684\u65f6\u5019\uff0c\u90fd\u4ea7\u751f\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff01</li> </ol> <pre><code>&lt;bean id=\"user2\" class=\"pojo.User\" c:name=\"cxk\" c:age=\"19\" scope=\"prototype\"&gt;&lt;/bean&gt;\n1\n</code></pre> <p></p> <ol> <li>\u5176\u4f59\u7684request\u3001session\u3001application\u8fd9\u4e9b\u53ea\u80fd\u5728web\u5f00\u653e\u4e2d\u4f7f\u7528\uff01</li> </ol>"},{"location":"Java/Spring/Spring5/#7bean","title":"7\u3001Bean\u7684\u81ea\u52a8\u88c5\u914d","text":"<ul> <li>\u81ea\u52a8\u88c5\u914d\u662fSpring\u6ee1\u8db3bean\u4f9d\u8d56\u7684\u4e00\u79cd\u65b9\u5f0f</li> <li>Spring\u4f1a\u5728\u4e0a\u4e0b\u6587\u81ea\u52a8\u5bfb\u627e\uff0c\u5e76\u81ea\u52a8\u7ed9bean\u88c5\u914d\u5c5e\u6027</li> </ul> <p>\u5728Spring\u4e2d\u6709\u4e09\u79cd\u88c5\u914d\u7684\u65b9\u5f0f</p> <ol> <li> <p>\u5728xml\u4e2d\u663e\u793a\u914d\u7f6e</p> </li> <li> <p>\u5728java\u4e2d\u663e\u793a\u914d\u7f6e</p> </li> <li> <p>\u9690\u5f0f\u7684\u81ea\u52a8\u88c5\u914dbean \u3010\u91cd\u8981\u3011</p> </li> <li> <p>\u73af\u5883\u642d\u5efa\uff1a\u4e00\u4e2a\u4eba\u6709\u4e24\u4e2a\u5ba0\u7269</p> </li> <li> <p>byType\u81ea\u52a8\u88c5\u914d\uff1abyType\u4f1a\u81ea\u52a8\u67e5\u627e\uff0c\u548c\u81ea\u5df1\u5bf9\u8c61set\u65b9\u6cd5\u53c2\u6570\u7684\u7c7b\u578b\u76f8\u540c\u7684bean</p> </li> </ol> <p>\u4fdd\u8bc1\u6240\u6709\u7684class\u552f\u4e00(\u7c7b\u4e3a\u5168\u5c40\u552f\u4e00)</p> <ol> <li>byName\u81ea\u52a8\u88c5\u914d\uff1abyName\u4f1a\u81ea\u52a8\u67e5\u627e\uff0c\u548c\u81ea\u5df1\u5bf9\u8c61set\u5bf9\u5e94\u7684\u503c\u5bf9\u5e94\u7684id</li> </ol> <p>\u4fdd\u8bc1\u6240\u6709id\u552f\u4e00\uff0c\u5e76\u4e14\u548cset\u6ce8\u5165\u7684\u503c\u4e00\u81f4</p> <pre><code>&lt;!-- \u627e\u4e0d\u5230id\u548c\u591a\u4e2a\u76f8\u540cclass --&gt;\n&lt;bean id=\"cat1\" class=\"pojo.Cat\"/&gt;\n&lt;bean id=\"cat2\" class=\"pojo.Cat\"/&gt;\n&lt;!-- \u627e\u4e0d\u5230 id=cat\uff0c\u4e14\u6709\u4e24\u4e2aCat --&gt;\n</code></pre>"},{"location":"Java/Spring/Spring5/#71","title":"7.1\u6d4b\u8bd5\uff1a\u81ea\u52a8\u88c5\u914d","text":"<p>pojo\u7684Cat\u7c7b</p> <pre><code>public class Cat {\n    public void shut(){\n        System.out.println(\"miao\");\n    }\n}\n</code></pre> <p>pojo\u7684Dog\u7c7b</p> <pre><code>public class Dog {\n\n    public void shut(){\n        System.out.println(\"wow\");\n    }\n\n}\n</code></pre> <p>pojo\u7684People\u7c7b</p> <pre><code>package pojo;\npublic class People {\n\n    private Cat cat;\n    private Dog dog;\n    private String name;\n\n    public Cat getCat() {\n        return cat;\n    }\n\n    public void setCat(Cat cat) {\n        this.cat = cat;\n    }\n\n    public Dog getDog() {\n        return dog;\n    }\n\n    public void setDog(Dog dog) {\n        this.dog = dog;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n    @Override\n    public String toString() {\n        return \"People{\" +\n                \"cat=\" + cat +\n                \", dog=\" + dog +\n                \", name='\" + name + '\\'' +\n                '}';\n    }\n}\n</code></pre> <p>xml\u914d\u7f6e -&gt; byType \u81ea\u52a8\u88c5\u914d</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;\n\n    &lt;bean id=\"cat\" class=\"pojo.Cat\"/&gt;\n    &lt;bean id=\"dog\" class=\"pojo.Dog\"/&gt;\n\n    &lt;!--byType\u4f1a\u5728\u5bb9\u5668\u81ea\u52a8\u67e5\u627e\uff0c\u548c\u81ea\u5df1\u5bf9\u8c61\u5c5e\u6027\u76f8\u540c\u7684bean\n        \u4f8b\u5982\uff0cDog dog; \u90a3\u4e48\u5c31\u4f1a\u67e5\u627epojo\u7684Dog\u7c7b\uff0c\u518d\u8fdb\u884c\u81ea\u52a8\u88c5\u914d\n    --&gt;\n    &lt;bean id=\"people\" class=\"pojo.People\" autowire=\"byType\"&gt;\n        &lt;property name=\"name\" value=\"cbh\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre> <p>xml\u914d\u7f6e -&gt; byName \u81ea\u52a8\u88c5\u914d</p> <pre><code>&lt;bean id=\"cat\" class=\"pojo.Cat\"/&gt;\n&lt;bean id=\"dog\" class=\"pojo.Dog\"/&gt;\n&lt;!--byname\u4f1a\u5728\u5bb9\u5668\u81ea\u52a8\u67e5\u627e\uff0c\u548c\u81ea\u5df1\u5bf9\u8c61set\u65b9\u6cd5\u7684set\u540e\u9762\u7684\u503c\u5bf9\u5e94\u7684id\n  \u4f8b\u5982:setDog()\uff0c\u53d6set\u540e\u9762\u7684\u5b57\u7b26\u4f5c\u4e3aid\uff0c\u5219\u8981id = dog \u624d\u53ef\u4ee5\u8fdb\u884c\u81ea\u52a8\u88c5\u914d\n\n --&gt;\n&lt;bean id=\"people\" class=\"pojo.People\" autowire=\"byName\"&gt;\n    &lt;property name=\"name\" value=\"cbh\"&gt;&lt;/property&gt;\n&lt;/bean&gt;\n</code></pre> <p>\u5f39\u5e55\u8bc4\u8bba\uff1abyName\u53ea\u80fd\u53d6\u5230\u5c0f\u5199\uff0c\u5927\u5199\u53d6\u4e0d\u5230</p>"},{"location":"Java/Spring/Spring5/#72","title":"7.2\u3001\u4f7f\u7528\u6ce8\u89e3\u5b9e\u73b0\u81ea\u52a8\u88c5\u914d","text":"<p>jdk1.5\u652f\u6301\u7684\u6ce8\u89e3\uff0cspring2.5\u652f\u6301\u7684\u6ce8\u89e3</p> <p>The introduction of annotation-based configuration raised the question of whether this approach is \u201cbetter\u201d than XML.\uff08\u7ffb\u8bd1\uff1a\u57fa\u4e8e\u6ce8\u91ca\u7684\u914d\u7f6e\u7684\u5f15\u5165\u63d0\u51fa\u4e86\u4e00\u4e2a\u95ee\u9898\uff0c\u5373\u8fd9\u79cd\u65b9\u6cd5\u662f\u5426\u6bd4XML\u201c\u66f4\u597d\u201d\uff09</p> <ol> <li>\u5bfc\u5165context\u7ea6\u675f</li> </ol> <p>xmlns:context=\"http://www.springframework.org/schema/context\"</p> <ol> <li>\u914d\u7f6e\u6ce8\u89e3\u7684\u652f\u6301\uff1a&lt; context:annotation-config/&gt;</li> </ol> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n    &lt;context:annotation-config/&gt;\n&lt;/beans&gt;\n</code></pre>"},{"location":"Java/Spring/Spring5/#721autowired","title":"7.2.1\u3001@Autowired","text":"<p>\u9ed8\u8ba4\u662fbyType\u65b9\u5f0f\uff0c\u5982\u679c\u5339\u914d\u4e0d\u4e0a\uff0c\u5c31\u4f1abyName</p> <p>\u5728\u5c5e\u6027\u4e0a\u4e2a\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5728set\u4e0a\u4f7f\u7528</p> <p>\u6211\u4eec\u53ef\u4ee5\u4e0d\u7528\u7f16\u5199set\u65b9\u6cd5\u4e86\uff0c\u524d\u63d0\u662f\u81ea\u52a8\u88c5\u914d\u7684\u5c5e\u6027\u5728Spring\u5bb9\u5668\u91cc\uff0c\u4e14\u8981\u7b26\u5408ByName \u81ea\u52a8\u88c5\u914d</p> <pre><code>public class People {\n    @Autowired\n    private Cat cat;\n    @Autowired\n    private Dog dog;\n    private String name;\n}\n</code></pre> <p>@Nullable \u5b57\u6bb5\u6807\u8bb0\u4e86\u8fd9\u4e2a\u6ce8\u89e3\uff0c\u8bf4\u660e\u8be5\u5b57\u6bb5\u53ef\u4ee5\u4e3a\u7a7a</p> <p>public name(@Nullable String name){</p> <p>}</p> <pre><code>//\u6e90\u7801\npublic @interface Autowired { \n    boolean required() default true; \n}\n</code></pre> <p>\u5982\u679c\u5b9a\u4e49\u4e86Autowire\u7684require\u5c5e\u6027\u4e3afalse\uff0c\u8bf4\u660e\u8fd9\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u4e3anull\uff0c\u5426\u5219\u4e0d\u5141\u8bb8\u4e3a\u7a7a\uff08false\u8868\u793a\u627e\u4e0d\u5230\u88c5\u914d\uff0c\u4e0d\u629b\u51fa\u5f02\u5e38\uff09</p>"},{"location":"Java/Spring/Spring5/#722autowiredqualifier","title":"7.2.2\u3001@Autowired+@Qualifier","text":"<p>@Autowired\u4e0d\u80fd\u552f\u4e00\u88c5\u914d\u65f6\uff0c\u9700\u8981@Autowired+@Qualifier</p> <p>\u5982\u679c@Autowired\u81ea\u52a8\u88c5\u914d\u73af\u5883\u6bd4\u8f83\u590d\u6742\u3002\u81ea\u52a8\u88c5\u914d\u65e0\u6cd5\u901a\u8fc7\u4e00\u4e2a\u6ce8\u89e3\u5b8c\u6210\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528@Qualifier(value = \u201cdog\u201d)\u53bb\u914d\u5408\u4f7f\u7528\uff0c\u6307\u5b9a\u4e00\u4e2a\u552f\u4e00\u7684id\u5bf9\u8c61</p> <pre><code>public class People {\n    @Autowired\n    private Cat cat;\n    @Autowired\n    @Qualifier(value = \"dog\")\n    private Dog dog;\n    private String name;\n}\n</code></pre> <p>\u5f39\u5e55\u8bc4\u8bba\uff1a</p> <p>\u5982\u679cxml\u6587\u4ef6\u4e2d\u540c\u4e00\u4e2a\u5bf9\u8c61\u88ab\u591a\u4e2abean\u4f7f\u7528\uff0cAutowired\u65e0\u6cd5\u6309\u7c7b\u578b\u627e\u5230\uff0c\u53ef\u4ee5\u7528@Qualifier\u6307\u5b9aid\u67e5\u627e</p>"},{"location":"Java/Spring/Spring5/#723resource","title":"7.2.3\u3001@Resource","text":"<p>\u9ed8\u8ba4\u662fbyName\u65b9\u5f0f\uff0c\u5982\u679c\u5339\u914d\u4e0d\u4e0a\uff0c\u5c31\u4f1abyType</p> <pre><code>public class People {\n    Resource(name=\"cat\")\n    private Cat cat;\n    Resource(name=\"dog\")\n    private Dog dog;\n    private String name;\n}\n</code></pre> <p>\u5f39\u5e55\u8bc4\u8bba\uff1a</p> <p>Autowired\u662fbyType\uff0c@Autowired+@Qualifier = byType || byName</p> <p>Autowired\u662f\u5148byteType,\u5982\u679c\u552f\u4e00\u5247\u6ce8\u5165\uff0c\u5426\u5219byName\u67e5\u627e\u3002resource\u662f\u5148byname,\u4e0d\u7b26\u5408\u518d\u7ee7\u7eedbyType</p>"},{"location":"Java/Spring/Spring5/#_1","title":"\u533a\u522b\uff1a","text":"<p>@Resource\u548c@Autowired\u7684\u533a\u522b\uff1a</p> <ul> <li>\u90fd\u662f\u7528\u6765\u81ea\u52a8\u88c5\u914d\u7684\uff0c\u90fd\u53ef\u4ee5\u653e\u5728\u5c5e\u6027\u5b57\u6bb5\u4e0a</li> <li>@Autowired\u901a\u8fc7byType\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u800c\u4e14\u5fc5\u987b\u8981\u6c42\u8fd9\u4e2a\u5bf9\u8c61\u5b58\u5728\uff01\u3010\u5e38\u7528\u3011</li> <li>@Resource\u9ed8\u8ba4\u901a\u8fc7byname\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u5982\u679c\u627e\u4e0d\u5230\u540d\u5b57\uff0c\u5219\u901a\u8fc7byType\u5b9e\u73b0\uff01\u5982\u679c\u4e24\u4e2a\u90fd\u627e\u4e0d\u5230\u7684\u60c5\u51b5\u4e0b\uff0c\u5c31\u62a5\u9519\uff01\u3010\u5e38\u7528\u3011</li> <li>\u6267\u884c\u987a\u5e8f\u4e0d\u540c\uff1a@Autowired\u901a\u8fc7byType\u7684\u65b9\u5f0f\u5b9e\u73b0\u3002@Resource\u9ed8\u8ba4\u901a\u8fc7byname\u7684\u65b9\u5f0f\u5b9e\u73b0</li> </ul>"},{"location":"Java/Spring/Spring5/#8","title":"8\u3001\u4f7f\u7528\u6ce8\u89e3\u5f00\u53d1","text":"<p>\u5728spring4\u4e4b\u540e\uff0c\u4f7f\u7528\u6ce8\u89e3\u5f00\u53d1\uff0c\u5fc5\u987b\u8981\u4fdd\u8bc1aop\u5305\u7684\u5bfc\u5165  \u4f7f\u7528\u6ce8\u89e3\u9700\u8981\u5bfc\u5165contex\u7684\u7ea6\u675f</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n    &lt;context:annotation-config/&gt;\n\n&lt;/beans&gt;\n</code></pre>"},{"location":"Java/Spring/Spring5/#81bean","title":"8.1\u3001bean","text":"<p>\u5f39\u5e55\u8bc4\u8bba\uff1a \u6709\u4e86&lt; context:component-scan&gt;\uff0c\u53e6\u4e00\u4e2a&lt; context:annotation-config/&gt;\u6807\u7b7e\u53ef\u4ee5\u79fb\u9664\u6389\uff0c\u56e0\u4e3a\u5df2\u7ecf\u88ab\u5305\u542b\u8fdb\u53bb\u4e86\u3002</p> <pre><code>&lt;!--\u6307\u5b9a\u8981\u626b\u63cf\u7684\u5305\uff0c\u8fd9\u4e2a\u5305\u4e0b\u9762\u7684\u6ce8\u89e3\u624d\u4f1a\u751f\u6548\n    \u522b\u53ea\u626b\u4e00\u4e2acom.kuang.pojo\u5305--&gt; \n&lt;context:component-scan base-package=\"com.kuang\"/&gt; \n&lt;context:annotation-config/&gt;\n</code></pre> <pre><code>//@Component \u7ec4\u4ef6\n//\u7b49\u4ef7\u4e8e&lt;bean id=\"user\" classs\"pojo.User\"/&gt; \n@Component\npublic class User {  \n     public String name =\"\u79e6\u7586\";\n}\n</code></pre>"},{"location":"Java/Spring/Spring5/#82value","title":"8.2\u3001\u5c5e\u6027\u5982\u4f55\u6ce8\u5165@value","text":"<pre><code>@Component\npublic class User { \n    //\u76f8\u5f53\u4e8e&lt;property name=\"name\" value=\"kuangshen\"/&gt; \n    @value(\"kuangshen\") \n    public String name; \n\n    //\u4e5f\u53ef\u4ee5\u653e\u5728set\u65b9\u6cd5\u4e0a\u9762\n    //@value(\"kuangshen\")\n    public void setName(String name) { \n        this.name = name; \n    }\n}\n</code></pre>"},{"location":"Java/Spring/Spring5/#83","title":"8.3\u3001\u884d\u751f\u7684\u6ce8\u89e3","text":"<p>@Component\u6709\u51e0\u4e2a\u884d\u751f\u6ce8\u89e3\uff0c\u4f1a\u6309\u7167web\u5f00\u53d1\u4e2d\uff0cmvc\u67b6\u6784\u4e2d\u5206\u5c42\u3002</p> <ul> <li>dao \uff08@Repository\uff09</li> <li>service\uff08@Service\uff09</li> <li>controller\uff08@Controller\uff09</li> </ul> <p>\u8fd9\u56db\u4e2a\u6ce8\u89e3\u7684\u529f\u80fd\u662f\u4e00\u6837\u7684\uff0c\u90fd\u662f\u4ee3\u8868\u5c06\u67d0\u4e2a\u7c7b\u6ce8\u518c\u5230\u5bb9\u5668\u4e2d</p>"},{"location":"Java/Spring/Spring5/#84","title":"8.4\u3001\u81ea\u52a8\u88c5\u914d\u7f6e","text":"<p>@Autowired\uff1a\u9ed8\u8ba4\u662fbyType\u65b9\u5f0f\uff0c\u5982\u679c\u5339\u914d\u4e0d\u4e0a\uff0c\u5c31\u4f1abyName</p> <p>@Nullable\uff1a\u5b57\u6bb5\u6807\u8bb0\u4e86\u8fd9\u4e2a\u6ce8\u89e3\uff0c\u8bf4\u660e\u8be5\u5b57\u6bb5\u53ef\u4ee5\u4e3a\u7a7a</p> <p>@Resource\uff1a\u9ed8\u8ba4\u662fbyName\u65b9\u5f0f\uff0c\u5982\u679c\u5339\u914d\u4e0d\u4e0a\uff0c\u5c31\u4f1abyType</p>"},{"location":"Java/Spring/Spring5/#85scope","title":"8.5\u3001\u4f5c\u7528\u57df@scope","text":"<pre><code>//\u539f\u578b\u6a21\u5f0fprototype\uff0c\u5355\u4f8b\u6a21\u5f0fsingleton\n//scope(\"prototype\")\u76f8\u5f53\u4e8e&lt;bean scope=\"prototype\"&gt;&lt;/bean&gt;\n@Component \n@scope(\"prototype\")\npublic class User { \n\n    //\u76f8\u5f53\u4e8e&lt;property name=\"name\" value=\"kuangshen\"/&gt; \n    @value(\"kuangshen\") \n    public String name; \n\n    //\u4e5f\u53ef\u4ee5\u653e\u5728set\u65b9\u6cd5\u4e0a\u9762\n    @value(\"kuangshen\")\n    public void setName(String name) { \n        this.name = name; \n    }\n}\n</code></pre>"},{"location":"Java/Spring/Spring5/#86","title":"8.6\u3001\u5c0f\u7ed3","text":"<p>xml\u4e0e\u6ce8\u89e3\uff1a</p> <ul> <li>xml\u66f4\u52a0\u4e07\u80fd\uff0c\u7ef4\u62a4\u7b80\u5355\uff0c\u9002\u7528\u4e8e\u4efb\u4f55\u573a\u5408</li> <li>\u6ce8\u89e3\uff0c\u4e0d\u662f\u81ea\u5df1\u7684\u7c7b\u4f7f\u7528\u4e0d\u4e86\uff0c\u7ef4\u62a4\u590d\u6742</li> </ul> <p>\u6700\u4f73\u5b9e\u8df5\uff1a</p> <ul> <li>xml\u7528\u6765\u7ba1\u7406bean</li> <li>\u6ce8\u89e3\u53ea\u7528\u6765\u5b8c\u6210\u5c5e\u6027\u7684\u6ce8\u5165</li> <li>\u8981\u5f00\u542f\u6ce8\u89e3\u652f\u6301</li> </ul>"},{"location":"Java/Spring/Spring5/#9javaspring","title":"9\u3001\u4f7f\u7528Java\u7684\u65b9\u5f0f\u914d\u7f6eSpring","text":"<p>\u4e0d\u4f7f\u7528Spring\u7684xml\u914d\u7f6e\uff0c\u5b8c\u5168\u4ea4\u7ed9java\u6765\u505a\uff01</p> <p>Spring\u7684\u4e00\u4e2a\u5b50\u9879\u76ee\uff0c\u5728spring4\u4e4b\u540e\uff0c\uff0c\uff0c\u5b83\u6210\u4e3a\u4e86\u6838\u5fc3\u529f\u80fd</p> <p> \u5b9e\u4f53\u7c7b\uff1apojo\u7684User.java</p> <pre><code>//\u8fd9\u91cc\u8fd9\u4e2a\u6ce8\u89e3\u7684\u610f\u601d,\u5c31\u662f\u8bf4\u660e\u8fd9\u4e2a\u7c7b\u88abSpring\u63a5\u7ba1\u4e86,\u6ce8\u518c\u5230\u4e86\u5bb9\u5668\u4e2d \n@component \npublic class User { \n    private String name;\n\n    public String getName() { \n        return name; \n    } \n    //\u5c5e\u6027\u6ce8\u5165\u503c\n    @value(\"QINJIANG')  \n    public void setName(String name) { \n        this.name = name; \n    } \n    @Override \n    public String toString() { \n        return \"user{\" + \n        \"name='\" + name + '\\''+ \n        '}'; \n    } \n}\n</code></pre> <p>\u5f39\u5e55\u8bc4\u8bba\uff1a\u8981\u4e48\u4f7f\u7528@Bean\uff0c\u8981\u4e48\u4f7f\u7528@Component\u548cComponentScan\uff0c\u4e24\u79cd\u6548\u679c\u4e00\u6837</p> <p>\u914d\u7f6e\u6587\u4ef6\uff1aconfig\u4e2d\u7684kuang.java</p> <p>@Import(KuangConfig2.class)\uff0c\u7528@import\u6765\u5305\u542bKuangConfig2.java</p> <pre><code>//\u8fd9\u4e2a\u4e5f\u4f1aSpring\u5bb9\u5668\u6258\u7ba1,\u6ce8\u518c\u5230\u5bb9\u5668\u4e2d,\u56e0\u4e3a\u4ed6\u672c\u7c73\u5c31\u662f\u4e00\u4e2a@Component \n// @Configuration\u8868\u8fd9\u662f\u4e00\u4e2a\u914d\u7f6e\u7c7b,\u5c31\u50cf\u6211\u4eec\u4e4b\u524d\u770b\u7684beans.xml\uff0c\u7c7b\u4f3c\u4e8e&lt;beans&gt;\u6807\u7b7e\n@Configuration \n@componentScan(\"com.Kuang.pojo\") //\u5f00\u542f\u626b\u63cf\n//@Import(KuangConfig2.class)\npublic class KuangConfig { \n    //\u6ce8\u518c\u4e00\u4e2abean , \u5c31\u76f8\u5f53\u4e8e\u6211\u4eec\u4e4b\u524d\u5199\u7684\u4e00\u4e2abean \u6807\u7b7e \n    //\u8fd9\u4e2a\u65b9\u6cd5\u7684\u540d\u5b57,\u5c31\u76f8\u5f53\u4e8ebean \u6807\u7b7e\u4e2d\u7684 id \u5c5e\u6027 -&gt;getUser\n    //\u8fd9\u4e2a\u65b9\u6cd5\u7684\u8fd4\u540c\u503c,\u5c31\u76f8\u5f53\u4e8ebean \u6807\u7b7e\u4e2d\u7684class \u5c5e\u6027 -&gt;User\n\n    //@Bean \n    public User getUser(){ \n        return new User(); //\u5c31\u662f\u8fd4\u56de\u8981\u6ce8\u5165\u5230bean\u7684\u5bf9\u8c61! \n    } \n}\n</code></pre> <p>\u5f39\u5e55\u8bc4\u8bba\uff1aComponentScan\u3001@Component(\"pojo\u201d) \u8fd9\u4e24\u4e2a\u6ce8\u89e3\u914d\u5408\u4f7f\u7528</p> <p>\u6d4b\u8bd5\u7c7b</p> <pre><code>public class MyTest { \n    public static void main(String[ ] args) { \n    //\u5982\u679c\u5b8c\u5168\u4f7f\u7528\u4e86\u914d\u7f6e\u7c7b\u65b9\u5f0f\u53bb\u505a,\u6211\u4eec\u5c31\u53ea\u80fd\u901a\u8fc7 Annotationconfig \u4e0a\u4e0b\u6587\u6765\u83b7\u53d6\u5bb9\u5668,\u901a\u8fc7\u914d\u7f6e\u7c7b\u7684class\u5bf9\u8c61\u52a0\u8f7d! \n    ApplicationContext context = new AnnotationConfigApplicationContext(KuangConfig.Class); //class\u5bf9\u8c61\n    User getUser =(User)context.getBean( \"getUser\"); //\u65b9\u6cd5\u540dgetUser\n    System.out.Println(getUser.getName()); \n    } \n}\n</code></pre> <p>\u4f1a\u521b\u5efa\u4e24\u4e2a\u76f8\u540c\u5bf9\u8c61\u95ee\u9898\u7684\u8bf4\u660e\uff1a</p> <p>\u5f39\u5e55\u603b\u7ed3 - -&gt; @Bean\u662f\u76f8\u5f53\u4e8e&lt; bean&gt;\u6807\u7b7e\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u800c\u6211\u4eec\u4e4b\u524d\u5b66\u7684@Component\u662f\u901a\u8fc7spring\u81ea\u52a8\u521b\u5efa\u7684\u8fd9\u4e2a\u88ab\u6ce8\u89e3\u58f0\u660e\u7684\u5bf9\u8c61\uff0c\u6240\u4ee5\u8fd9\u91cc\u76f8\u5f53\u4e8e\u6709\u4e24\u4e2aUser\u5bf9\u8c61\u88ab\u521b\u5efa\u4e86\u3002\u4e00\u4e2a\u662fbean\u6807\u7b7e\u521b\u5efa\u7684\uff08@Bean\uff09\uff0c\u4e00\u4e2a\u662f\u901a\u8fc7\u626b\u63cf\u7136\u540e\u4f7f\u7528@Component\uff0cspring\u81ea\u52a8\u521b\u5efa\u7684User\u5bf9\u8c61\uff0c\u6240\u4ee5\u8fd9\u91cc\u53bb\u6389@Bean\u8fd9\u4e9b\u4e1c\u897f\uff0c\u7136\u540e\u5f00\u542f\u626b\u63cf\u3002\u4e4b\u540e\u5728User\u5934\u4e0a\u7528@Component\u5373\u53ef\u8fbe\u5230spring\u81ea\u52a8\u521b\u5efaUser\u5bf9\u8c61\u4e86</p> <pre><code>//\u8fd9\u4e2a\u4e5f\u4f1aSpring\u5bb9\u5668\u6258\u7ba1,\u6ce8\u518c\u5230\u5bb9\u5668\u4e2d,\u56e0\u4e3a\u4ed6\u672c\u7c73\u5c31\u662f\u4e00\u4e2a@Component \n// @Configuration\u8868\u8fd9\u662f\u4e00\u4e2a\u914d\u7f6e\u7c7b,\u5c31\u50cf\u6211\u4eec\u4e4b\u524d\u770b\u7684beans.xml\uff0c\u7c7b\u4f3c\u4e8e&lt;beans&gt;\u6807\u7b7e\n@Configuration \n@componentScan(\"com.Kuang.pojo\") //\u5f00\u542f\u626b\u63cf\n//@Import(KuangConfig2.class)\npublic class KuangConfig { \n    //\u6ce8\u518c\u4e00\u4e2abean , \u5c31\u76f8\u5f53\u4e8e\u6211\u4eec\u4e4b\u524d\u5199\u7684\u4e00\u4e2abean \u6807\u7b7e \n    //\u8fd9\u4e2a\u65b9\u6cd5\u7684\u540d\u5b57,\u5c31\u76f8\u5f53\u4e8ebean \u6807\u7b7e\u4e2d\u7684 id \u5c5e\u6027 -&gt;getUser\n    //\u8fd9\u4e2a\u65b9\u6cd5\u7684\u8fd4\u540c\u503c,\u5c31\u76f8\u5f53\u4e8ebean \u6807\u7b7e\u4e2d\u7684class \u5c5e\u6027 -&gt;User\n\n    //@Bean \n    public User getUser(){ \n        return new User(); //\u5c31\u662f\u8fd4\u56de\u8981\u6ce8\u5165\u5230bean\u7684\u5bf9\u8c61! \n    } \n}\n</code></pre> <p>\u5f39\u5e55\u8bc4\u8bba\uff1aComponentScan\u3001@Component(\"pojo\u201d) \u8fd9\u4e24\u4e2a\u6ce8\u89e3\u914d\u5408\u4f7f\u7528</p> <p>\u6d4b\u8bd5\u7c7b</p> <pre><code>public class MyTest { \n    public static void main(String[ ] args) { \n    //\u5982\u679c\u5b8c\u5168\u4f7f\u7528\u4e86\u914d\u7f6e\u7c7b\u65b9\u5f0f\u53bb\u505a,\u6211\u4eec\u5c31\u53ea\u80fd\u901a\u8fc7 Annotationconfig \u4e0a\u4e0b\u6587\u6765\u83b7\u53d6\u5bb9\u5668,\u901a\u8fc7\u914d\u7f6e\u7c7b\u7684class\u5bf9\u8c61\u52a0\u8f7d! \n    ApplicationContext context = new AnnotationConfigApplicationContext(KuangConfig.Class); //class\u5bf9\u8c61\n    User getUser =(User)context.getBean( \"getUser\"); //\u65b9\u6cd5\u540dgetUser\n    System.out.Println(getUser.getName()); \n    } \n}\n</code></pre> <p>\u4f1a\u521b\u5efa\u4e24\u4e2a\u76f8\u540c\u5bf9\u8c61\u95ee\u9898\u7684\u8bf4\u660e\uff1a</p> <p>\u5f39\u5e55\u603b\u7ed3 - -&gt; @Bean\u662f\u76f8\u5f53\u4e8e&lt; bean&gt;\u6807\u7b7e\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u800c\u6211\u4eec\u4e4b\u524d\u5b66\u7684@Component\u662f\u901a\u8fc7spring\u81ea\u52a8\u521b\u5efa\u7684\u8fd9\u4e2a\u88ab\u6ce8\u89e3\u58f0\u660e\u7684\u5bf9\u8c61\uff0c\u6240\u4ee5\u8fd9\u91cc\u76f8\u5f53\u4e8e\u6709\u4e24\u4e2aUser\u5bf9\u8c61\u88ab\u521b\u5efa\u4e86\u3002\u4e00\u4e2a\u662fbean\u6807\u7b7e\u521b\u5efa\u7684\uff08@Bean\uff09\uff0c\u4e00\u4e2a\u662f\u901a\u8fc7\u626b\u63cf\u7136\u540e\u4f7f\u7528@Component\uff0cspring\u81ea\u52a8\u521b\u5efa\u7684User\u5bf9\u8c61\uff0c\u6240\u4ee5\u8fd9\u91cc\u53bb\u6389@Bean\u8fd9\u4e9b\u4e1c\u897f\uff0c\u7136\u540e\u5f00\u542f\u626b\u63cf\u3002\u4e4b\u540e\u5728User\u5934\u4e0a\u7528@Component\u5373\u53ef\u8fbe\u5230spring\u81ea\u52a8\u521b\u5efaUser\u5bf9\u8c61\u4e86</p>"},{"location":"Java/Spring/Spring5/#10","title":"10\u3001\u52a8\u6001\u4ee3\u7406","text":"<p>\u4ee3\u7406\u6a21\u5f0f\u662fSpringAOP\u7684\u5e95\u5c42</p> <p>\u5206\u7c7b\uff1a\u52a8\u6001\u4ee3\u7406\u548c\u9759\u6001\u4ee3\u7406</p> <p></p>"},{"location":"Java/Spring/Spring5/#101","title":"10.1\u3001\u9759\u6001\u4ee3\u7406","text":"<p> \u4ee3\u7801\u6b65\u9aa4\uff1a</p> <p>1\u3001\u63a5\u53e3</p> <pre><code>package pojo;\npublic interface Host {\n    public void rent();\n}\n</code></pre> <p>2\u3001\u771f\u5b9e\u89d2\u8272</p> <pre><code>package pojo;\npublic class HostMaster implements Host{    \n\n    public void rent() {\n        System.out.println(\"\u623f\u4e1c\u8981\u51fa\u79df\u623f\u5b50\");\n    }\n}\n</code></pre> <p>3\u3001\u4ee3\u7406\u89d2\u8272</p> <pre><code>package pojo;\npublic class Proxy {\n\n    public Host host;\n\n    public Proxy() {\n\n    }\n\n    public Proxy(Host host) {\n        super();\n        this.host = host;\n    }\n\n    public void rent() {\n        seeHouse();\n        host.rent();\n        fee();\n        sign();\n    }\n    //\u770b\u623f\n    public void seeHouse() {\n        System.out.println(\"\u770b\u623f\u5b50\");\n    }\n    //\u6536\u8d39\n    public void fee() {\n        System.out.println(\"\u6536\u4e2d\u4ecb\u8d39\");\n    }\n    //\u5408\u540c\n    public void sign() {\n        System.out.println(\"\u7b7e\u5408\u540c\");\n    }       \n}\n</code></pre> <p>4\u3001\u5ba2\u6237\u7aef\u8bbf\u95ee\u4ee3\u7406\u89d2\u8272</p> <pre><code>package holle4_proxy;\n\nimport pojo.Host;\nimport pojo.HostMaster;\nimport pojo.Proxy;\n\npublic class My {\n\n    public static void main(String[] args) {\n        //\u623f\u4e1c\u8981\u51fa\u79df\u623f\u5b50\n        Host host = new HostMaster();\n        //\u4e2d\u4ecb\u5e2e\u623f\u4e1c\u51fa\u79df\u623f\u5b50\uff0c\u4f46\u4e5f\u6536\u53d6\u4e00\u5b9a\u8d39\u7528\uff08\u589e\u52a0\u4e00\u4e9b\u623f\u4e1c\u4e0d\u505a\u7684\u64cd\u4f5c\uff09\n        Proxy proxy = new Proxy(host);\n        //\u770b\u4e0d\u5230\u623f\u4e1c\uff0c\u4f46\u901a\u8fc7\u4ee3\u7406\uff0c\u8fd8\u662f\u79df\u5230\u4e86\u623f\u5b50\n        proxy.rent();\n\n    }\n}\n</code></pre> <p> \u4ee3\u7801\u7ffb\u500d\uff1a\u51e0\u5341\u4e2a\u771f\u5b9e\u89d2\u8272\u5c31\u5f97\u5199\u51e0\u5341\u4e2a\u4ee3\u7406</p> <p>AOP\u6a2a\u5411\u5f00\u53d1</p> <p></p>"},{"location":"Java/Spring/Spring5/#102","title":"10.2\u3001\u52a8\u6001\u4ee3\u7406","text":"<p>\u52a8\u6001\u4ee3\u7406\u548c\u9759\u6001\u89d2\u8272\u4e00\u6837\uff0c\u52a8\u6001\u4ee3\u7406\u5e95\u5c42\u662f\u53cd\u5c04\u673a\u5236</p> <p>\u52a8\u6001\u4ee3\u7406\u7c7b\u662f\u52a8\u6001\u751f\u6210\u7684\uff0c\u4e0d\u662f\u6211\u4eec\u76f4\u63a5\u5199\u597d\u7684\uff01</p> <p>\u52a8\u6001\u4ee3\u7406(\u4e24\u5927\u7c7b)\uff1a\u57fa\u4e8e\u63a5\u53e3\uff0c\u57fa\u4e8e\u7c7b</p> <ul> <li>\u57fa\u4e8e\u63a5\u53e3\uff1aJDK\u7684\u52a8\u6001\u4ee3\u7406\u3010\u4f7f\u7528ing\u3011</li> <li>\u57fa\u4e8e\u7c7b\uff1acglib</li> <li>java\u5b57\u8282\u7801\u5b9e\u73b0\uff1ajavasisit</li> </ul> <p>\u4e86\u89e3\u4e24\u4e2a\u7c7b 1\u3001Proxy\uff1a\u4ee3\u7406 2\u3001InvocationHandler\uff1a\u8c03\u7528\u5904\u7406\u7a0b\u5e8f </p> <p>\u5b9e\u4f8b\uff1a</p> <p>\u63a5\u53e3 Host.java</p> <pre><code>//\u63a5\u53e3\npackage pojo2;\npublic interface Host {\n    public void rent();\n\n}\n</code></pre> <p>\u63a5\u53e3Host\u5b9e\u73b0\u7c7b HostMaster.java</p> <pre><code>//\u63a5\u53e3\u5b9e\u73b0\u7c7b\npackage pojo2;\npublic class HostMaster implements Host{    \n    public void rent() {\n        System.out.println(\"\u623f\u4e1c\u8981\u79df\u623f\u5b50\");\n    }\n}\n</code></pre> <p>\u4ee3\u7406\u89d2\u8272\u7684\u5904\u7406\u7a0b\u5e8f\u7c7b ProxyInvocationHandler.java</p> <pre><code>package pojo2;\n\nimport java.lang.reflect.InvocationHandler;\nimport java.lang.reflect.Method;\nimport java.lang.reflect.Proxy;\n\n///\u7528\u8fd9\u4e2a\u7c7b\uff0c\u81ea\u52a8\u751f\u6210\u4ee3\u7406\npublic class ProxyInvocationHandler implements InvocationHandler {\n\n    // Foo f =(Foo) Proxy.NewProxyInstance(Foo. Class.GetClassLoader(),\n    // new Class&lt;?&gt;[] { Foo.Class },\n    // handler);\n\n    // \u88ab\u4ee3\u7406\u7684\u63a5\u53e3\n    public HostMaster hostMaster ;\n\n    public void setHostMaster(HostMaster hostMaster) {\n        this.hostMaster = hostMaster;\n    }\n\n    // \u5f97\u5230\u751f\u6210\u7684\u4ee3\u7406\u7c7b \n    public Object getProxy() {\n        // newProxyInstance() -&gt; \u751f\u6210\u4ee3\u7406\u5bf9\u8c61\uff0c\u5c31\u4e0d\u7528\u518d\u5199\u5177\u4f53\u7684\u4ee3\u7406\u7c7b\u4e86\n        // this.getClass().getClassLoader() -&gt; \u627e\u5230\u52a0\u8f7d\u7c7b\u7684\u4f4d\u7f6e\n        // hostMaster.getClass().getInterfaces() -&gt; \u4ee3\u7406\u7684\u5177\u4f53\u63a5\u53e3\n        // this -&gt; \u4ee3\u8868\u4e86\u63a5\u53e3InvocationHandler\u7684\u5b9e\u73b0\u7c7bProxyInvocationHandler\n        return Proxy.newProxyInstance(this.getClass().getClassLoader(), hostMaster.getClass().getInterfaces(), this);\n\n\n    // \u5904\u7406\u4ee3\u7406\u5b9e\u4f8b\u5e76\u8fd4\u56de\u7ed3\u679c\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        seeHouse();\n        // \u52a8\u6001\u4ee3\u7406\u7684\u672c\u8d28\uff0c\u5c31\u662f\u4f7f\u7528\u53cd\u5c04\u673a\u5236\u5b9e\u73b0\u7684\n        // invoke()\u6267\u884c\u5b83\u771f\u6b63\u8981\u6267\u884c\u7684\u65b9\u6cd5\n        Object result = method.invoke(hostMaster, args);\n        fee();\n        return result;\n    }\n\n    public void seeHouse() {\n        System.out.println(\"\u770b\u623f\u5b50\");\n    }\n\n    public void fee() {\n        System.out.println(\"\u6536\u4e2d\u4ecb\u8d39\");\n    }\n\n}\n</code></pre> <p>\u7528\u6237\u7c7b My2.java</p> <pre><code>package holle4_proxy;\n\nimport pojo2.Host;\nimport pojo2.Host2;\nimport pojo2.HostMaster;\nimport pojo2.ProxyInvocationHandler;\n\npublic class My2 {\n\n    public static void main(String[] args) {\n\n        //\u771f\u5b9e\u89d2\u8272\n        HostMaster hostMaster = new HostMaster();\n\n        //\u4ee3\u7406\u89d2\u8272\uff0c\u73b0\u5728\u6ca1\u6709\uff1b\u7528\u4ee3\u7406\u89d2\u8272\u7684\u5904\u7406\u7a0b\u5e8f\u6765\u5b9e\u73b0Host\u63a5\u53e3\u7684\u8c03\u7528\n        ProxyInvocationHandler pih = new ProxyInvocationHandler();\n\n        //pih -&gt; HostMaster\u63a5\u53e3\u7c7b -&gt; Host\u63a5\u53e3\n        pih.setHostMaster(hostMaster);\n\n        //\u83b7\u53d6newProxyInstance\u52a8\u6001\u751f\u6210\u4ee3\u7406\u7c7b\n        Host proxy = (Host) pih.getProxy();\n\n        proxy.rent();\n\n    }\n}\n</code></pre> <p>\u5f39\u5e55\u8bc4\u8bba\uff1a \u4ec0\u4e48\u65f6\u5019\u8c03\u7528invoke\u65b9\u6cd5\u7684? \u4ee3\u7406\u5b9e\u4f8b\u8c03\u7528\u65b9\u6cd5\u65f6invoke\u65b9\u6cd5\u5c31\u4f1a\u88ab\u8c03\u7528\uff0c\u53ef\u4ee5debug\u8bd5\u8bd5</p> <p>\u6539\u4e3a\u4e07\u80fd\u4ee3\u7406\u7c7b</p> <pre><code>///\u7528\u8fd9\u4e2a\u7c7b\uff0c\u81ea\u52a8\u751f\u4ee3\u7406\npublic class ProxyInvocationHandler implements InvocationHandler {\n\n    // \u88ab\u4ee3\u7406\u7684\u63a5\u53e3\n    public Object target;\n\n    public void setTarget(Object target) {\n        this.target = target;\n    }\n\n    // \u5f97\u5230\u751f\u6210\u7684\u4ee3\u7406\u7c7b -&gt; \u56fa\u5b9a\u7684\u4ee3\u7801\n    public Object getProxy() {\n        return Proxy.newProxyInstance(this.getClass().getClassLoader(), target.getClass().getInterfaces(), this);\n    }\n\n    // \u5904\u7406\u4ee3\u7406\u5b9e\u4f8b\u5e76\u8fd4\u56de\u7ed3\u679c\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        // \u52a8\u6001\u4ee3\u7406\u7684\u672c\u8d28\uff0c\u5c31\u662f\u4f7f\u7528\u53cd\u5c04\u673a\u5236\u5b9e\u73b0\u7684\n        // invoke()\u6267\u884c\u5b83\u771f\u6b63\u8981\u6267\u884c\u7684\u65b9\u6cd5\n        Object result = method.invoke(target, args);\n        return result;\n    }\n\n}\n</code></pre> <p></p>"},{"location":"Java/Spring/Spring5/#11aop","title":"11\u3001AOP","text":""},{"location":"Java/Spring/Spring5/#111aop","title":"11.1\u3001\u4ec0\u4e48\u662fAOP","text":""},{"location":"Java/Spring/Spring5/#112aopspring","title":"11.2\u3001AOP\u5728Spring\u4e2d\u7684\u4f7f\u7528","text":"<p>\u63d0\u4f9b\u58f0\u660e\u5f0f\u4e8b\u52a1\uff0c\u5141\u8bb8\u7528\u6237\u81ea\u5b9a\u4e49\u5207\u9762</p> <ul> <li>\u6a2a\u5207\u5173\u6ce8\u70b9\uff1a\u8de8\u8d8a\u5e94\u7528\u7a0b\u5e8f\u591a\u4e2a\u6a21\u5757\u7684\u65b9\u6cd5\u6216\u529f\u80fd\u3002\u5373\u662f\uff0c\u4e0e\u6211\u4eec\u4e1a\u52a1\u903b\u8f91\u65e0\u5173\u7684\uff0c\u4f46\u662f\u6211\u4eec\u9700\u8981\u5173\u6ce8\u7684\u90e8\u5206\uff0c\u5c31\u662f\u6a2a\u5207\u5173\u6ce8\u70b9\u3002\u5982\u65e5\u5fd7\uff0c\u5b89\u5168\uff0c\u7f13\u5b58\uff0c\u4e8b\u52a1\u7b49\u7b49\u2026</li> <li>\u5207\u9762(Aspect)\uff1a\u6a2a\u5207\u5173\u6ce8\u70b9 \u88ab\u6a21\u5757\u5316\u7684\u7279\u6b8a\u5bf9\u8c61\u3002\u5373\uff0c\u5b83\u662f\u4e00\u4e2a\u7c7b\u3002\uff08Log\u7c7b\uff09</li> <li>\u901a\u77e5(Advice)\uff1a\u5207\u9762\u5fc5\u987b\u8981\u5b8c\u6210\u7684\u5de5\u4f5c\u3002\u5373\uff0c\u5b83\u662f\u7c7b\u4e2d\u7684\u4e00\u4e2a\u65b9\u6cd5\u3002\uff08Log\u7c7b\u4e2d\u7684\u65b9\u6cd5\uff09</li> <li>\u76ee\u6807(Target)\uff1a\u88ab\u901a\u77e5\u5bf9\u8c61\u3002\uff08\u751f\u6210\u7684\u4ee3\u7406\u7c7b)</li> <li>\u4ee3\u7406(Proxy)\uff1a\u5411\u76ee\u6807\u5bf9\u8c61\u5e94\u7528\u901a\u77e5\u4e4b\u540e\u521b\u5efa\u7684\u5bf9\u8c61\u3002\uff08\u751f\u6210\u7684\u4ee3\u7406\u7c7b\uff09</li> <li>\u5207\u5165\u70b9(PointCut)\uff1a\u5207\u9762\u901a\u77e5\u6267\u884c\u7684\u201d\u5730\u70b9\u201d\u7684\u5b9a\u4e49\u3002\uff08\u6700\u540e\u4e24\u70b9\uff1a\u5728\u54ea\u4e2a\u5730\u65b9\u6267\u884c\uff0c\u6bd4\u5982\uff1amethod.invoke()\uff09</li> <li>\u8fde\u63a5\u70b9(JointPoint)\uff1a\u4e0e\u5207\u5165\u70b9\u5339\u914d\u7684\u6267\u884c\u70b9\u3002</li> </ul> <p> SpringAOP\u4e2d\uff0c\u901a\u8fc7Advice\u5b9a\u4e49\u6a2a\u5207\u903b\u8f91\uff0cSpring\u4e2d\u652f\u63015\u79cd\u7c7b\u578b\u7684Advice:</p> <p> \u5373AOP\u5728\u4e0d\u6539\u53d8\u539f\u6709\u4ee3\u7801\u7684\u60c5\u51b5\u4e0b\uff0c\u53bb\u589e\u52a0\u65b0\u7684\u529f\u80fd\u3002\uff08\u4ee3\u7406\uff09</p>"},{"location":"Java/Spring/Spring5/#113springaop","title":"11.3\u3001\u4f7f\u7528Spring\u5b9e\u73b0AOP","text":"<p>\u5bfc\u5165jar\u5305</p> <pre><code>&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n    &lt;version&gt;1.9.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/Spring/Spring5/#1131spring","title":"11.3.1\u3001\u65b9\u6cd5\u4e00\uff1a\u4f7f\u7528\u539f\u751fspring\u63a5\u53e3","text":"<p>springAPI\u63a5\u53e3\u5b9e\u73b0</p> <p>applicationContext.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt;\n\n    &lt;!--\u6ce8\u518cbean--&gt;\n    &lt;bean id=\"userservice\" class=\"service.UserServiceImpl\"/&gt;\n    &lt;bean id=\"log\" class=\"log.Log\"/&gt;\n    &lt;bean id=\"afterLog\" class=\"log.AfterLog\"/&gt;\n    &lt;!--\u65b9\u5f0f\u4e00\uff0c\u4f7f\u7528\u539f\u751fSpring API\u63a5\u53e3--&gt;\n    &lt;!--\u914d\u7f6eaop,\u8fd8\u9700\u8981\u5bfc\u5165aop\u7ea6\u675f--&gt;\n    &lt;aop:config&gt;\n        &lt;!--\u5207\u5165\u70b9\uff1aexpression:\u8868\u8fbe\u5f0f\uff0cexecution\uff08\u8981\u6267\u884c\u7684\u4f4d\u7f6e\uff09--&gt;\n        &lt;aop:pointcut id=\"pointcut\" expression=\"execution(* service.UserServiceImpl.*(..))\"/&gt;\n        &lt;!--UserServiceImpl.*(..) -\u300b UserServiceImpl\u7c7b\u4e0b\u7684\u6240\u4ee5\u65b9\u6cd5(\u53c2\u6570)--&gt;\n        &lt;!--\u6267\u884c\u73af\u7ed5\u589e\u52a0--&gt;\n        &lt;aop:advisor advice-ref=\"log\" pointcut-ref=\"pointcut\"/&gt;\n        &lt;aop:advisor advice-ref=\"afterLog\" pointcut-ref=\"pointcut\"/&gt;\n        &lt;!-- \u73af\u7ed5,\u5728id=\"pointcut\"\u7684\u524d\u540e\u5207\u5165 --&gt;\n    &lt;/aop:config&gt;\n\n&lt;/beans&gt;\n</code></pre> <p>execution(\u8fd4\u56de\u7c7b\u578b\uff0c\u7c7b\u540d\uff0c\u65b9\u6cd5\u540d(\u53c2\u6570)) -&gt; execution( com.service.,*(\u2026))</p> <p>UserService.java</p> <pre><code>package service;\npublic interface UserService {   \n        public void add() ;\n        public void delete() ;\n        public void query() ;\n        public void update();\n}\n</code></pre> <p>UserService \u7684\u5b9e\u73b0\u7c7b UserServiceImp.java</p> <pre><code>package service;\n\npublic class UserServiceImpl implements UserService {\n\n    public void add() {\n        System.out.println(\"add\u589e\");\n    }\n    public void delete() {\n        System.out.println(\"delete\u5220\");\n    }\n    public void update() {\n        System.out.println(\"update\u6539\");\n    }\n    public void query() {\n        System.out.println(\"query\u67e5\");\n    }\n}\n</code></pre> <p>\u524d\u7f6eLog.java</p> <pre><code>package log;\nimport org.springframework.aop.MethodBeforeAdvice;\nimport java.lang.reflect.Method;\n\npublic class Log implements MethodBeforeAdvice {\n    //method\uff1a\u8981\u6267\u884c\u7684\u76ee\u6807\u5bf9\u8c61\u7684\u65b9\u6cd5\n    //args\uff1a\u53c2\u6570\n    //target\uff1a\u76ee\u6807\u5bf9\u8c61\n    public void before(Method method, Object[] args, Object target) throws Throwable {\n        System.out.println(target.getClass().getName()+\"\u7684\"+method.getName()+\"\u88ab\u6267\u884c\u4e86\");\n    }\n}\n</code></pre> <p>\u540e\u7f6eAfterLog.java</p> <pre><code>package log;\nimport java.lang.reflect.Method;\nimport org.springframework.aop.AfterReturningAdvice;\n\npublic class AfterLog implements AfterReturningAdvice {\n    //returnVaule: \u8fd4\u56de\u503c\n    public void afterReturning(Object returnValue, Method method, Object[] args, Object target) throws Throwable {\n        System.out.println(\"\u6267\u884c\u4e86\"+method.getName()+\"\u65b9\u6cd5\uff0c\u8fd4\u56de\u503c\u662f\"+returnValue);\n    }\n}\n</code></pre> <p>\u6d4b\u8bd5\u7c7bMyTest5</p> <pre><code>import org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport service.UserService;\n\npublic class MyTest5 {\n    public static void main(String[] args) {\n        ApplicationContext context = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n        //\u6ce8\u610f:\u52a8\u6001\u4ee3\u7406\u4ee3\u7406\u7684\u662f\u63a5\u53e3\n        UserService userService = (UserService) context.getBean(\"userservice\");\n        userService.add();\n    }\n}\n</code></pre>"},{"location":"Java/Spring/Spring5/#1132aop","title":"11.3.2\u3001\u65b9\u6cd5\u4e8c\uff1a\u81ea\u5b9a\u4e49\u7c7b\u5b9e\u73b0AOP","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      xmlns:aop=\"http://www.springframework.org/schema/aop\"\n      xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    https://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/aop\n    https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt;\n\n   &lt;!--\u6ce8\u518cbean--&gt;\n   &lt;bean id=\"userservice\" class=\"service.UserServiceImpl\"/&gt;\n   &lt;bean id=\"log\" class=\"log.Log\"/&gt;\n   &lt;bean id=\"afterLog\" class=\"log.AfterLog\"/&gt;\n   &lt;!-- \u65b9\u5f0f\u4e8c\uff0c\u81ea\u5b9a\u4e49 --&gt;\n   &lt;bean id=\"diy\" class=\"diy.DiyPointcut\"/&gt;\n   &lt;aop:config&gt;\n       &lt;!--\u81ea\u5b9a\u4e49\u5207\u9762--&gt;\n       &lt;aop:aspect ref=\"diy\"&gt;\n           &lt;!--\u5207\u5165\u70b9--&gt;\n           &lt;aop:pointcut id=\"point\" expression=\"execution(* service.UserServiceImpl.*(..))\"/&gt;\n           &lt;aop:before method=\"before\" pointcut-ref=\"point\"/&gt;\n           &lt;aop:after method=\"after\" pointcut-ref=\"point\"/&gt;\n       &lt;/aop:aspect&gt;\n   &lt;/aop:config&gt;\n\n&lt;/beans&gt;\n</code></pre> <pre><code>package diy;\npublic class DiyPointcut {\n\n    public void before(){\n        System.out.println(\"\u63d2\u5165\u5230\u524d\u9762\");\n    }\n\n    public void after(){\n        System.out.println(\"\u63d2\u5165\u5230\u540e\u9762\");\n    }\n}\n</code></pre> <pre><code>//\u6d4b\u8bd5\npublic class MyTest5 {\n    public static void main(String[] args) {\n        ApplicationContext context = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n        //\u6ce8\u610f:\u52a8\u6001\u4ee3\u7406\u4ee3\u7406\u7684\u662f\u63a5\u53e3\n        UserService userService = (UserService) context.getBean(\"userservice\");\n        userService.add();\n    }\n}\n</code></pre>"},{"location":"Java/Spring/Spring5/#1133","title":"11.3.3\u3001\u65b9\u6cd5\u4e09\uff1a\u4f7f\u7528\u6ce8\u89e3\u5b9e\u73b0","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt;\n\n    &lt;!-- \u6ce8\u518c --&gt;\n    &lt;bean id=\"userservice\" class=\"service.UserServiceImpl\"/&gt;\n    &lt;!--\u65b9\u5f0f\u4e09\uff0c\u4f7f\u7528\u6ce8\u89e3\u5b9e\u73b0--&gt;\n    &lt;bean id=\"diyAnnotation\" class=\"diy.DiyAnnotation\"&gt;&lt;/bean&gt;\n\n    &lt;!-- \u5f00\u542f\u81ea\u52a8\u4ee3\u7406 \n        \u5b9e\u73b0\u65b9\u5f0f\uff1a\u9ed8\u8ba4JDK (proxy-targer-class=\"fasle\")\n                 cgbin (proxy-targer-class=\"true\")--&gt;\n    &lt;aop:aspectj-autoproxy/&gt;\n\n&lt;/beans&gt;\n</code></pre> <p>DiyAnnotation.java</p> <pre><code>package diy;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.After;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\n\n@Aspect  //\u6807\u6ce8\u8fd9\u4e2a\u7c7b\u662f\u4e00\u4e2a\u5207\u9762\npublic class DiyAnnotation {\n\n    @Before(\"execution(* service.UserServiceImpl.*(..))\")\n    public void before(){\n        System.out.println(\"=====\u65b9\u6cd5\u6267\u884c\u524d=====\");\n    }\n\n    @After(\"execution(* service.UserServiceImpl.*(..))\")\n    public void after(){\n        System.out.println(\"=====\u65b9\u6cd5\u6267\u884c\u540e=====\");\n    }\n\n    //\u5728\u73af\u7ed5\u589e\u5f3a\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u5730\u6696\u7ba1\u4e00\u4e2a\u53c2\u6570\uff0c\u4ee3\u8868\u6211\u4eec\u8981\u83b7\u53d6\u5207\u5165\u7684\u70b9\n    @Around(\"execution(* service.UserServiceImpl.*(..))\")\n    public void around(ProceedingJoinPoint joinPoint) throws Throwable {\n        System.out.println(\"\u73af\u7ed5\u524d\");\n\n        Object proceed = joinPoint.proceed();\n\n        System.out.println(\"\u73af\u7ed5\u540e\");\n    }\n}\n</code></pre> <p>\u6d4b\u8bd5</p> <pre><code>public class MyTest5 {\n    public static void main(String[] args) {\n        ApplicationContext context = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n        //\u6ce8\u610f:\u52a8\u6001\u4ee3\u7406\u4ee3\u7406\u7684\u662f\u63a5\u53e3\n        UserService userService = (UserService) context.getBean(\"userservice\");\n        userService.add();\n    }\n}\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <p></p>"},{"location":"Java/Spring/Spring5/#12mybatis","title":"12\u3001\u6574\u5408mybatis","text":"<p>mybatis-spring\u5b98\u7f51\uff1ahttps://mybatis.org/spring/zh/</p> <p>mybatis\u7684\u914d\u7f6e\u6d41\u7a0b\uff1a</p> <ol> <li>\u7f16\u5199\u5b9e\u4f53\u7c7b</li> <li>\u7f16\u5199\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6</li> <li>\u7f16\u5199\u63a5\u53e3</li> <li>\u7f16\u5199Mapper.xmi</li> <li>\u6d4b\u8bd5</li> </ol>"},{"location":"Java/Spring/Spring5/#121mybatis-spring-","title":"12.1\u3001mybatis-spring-\u65b9\u5f0f\u4e00","text":"<ol> <li>\u7f16\u5199\u6570\u636e\u6e90\u914d\u7f6e</li> <li>sqISessionFactory</li> <li>sqISessionTemplate\uff08\u76f8\u5f53\u4e8esqISession\uff09</li> <li>\u9700\u8981\u7ed9\u63a5\u53e3\u52a0\u5b9e\u73b0\u7c7b\u3010new\u3011</li> <li>\u5c06\u81ea\u5df1\u5199\u7684\u5b9e\u73b0\u7c7b\uff0c\u6ce8\u5165\u5230Spring\u4e2d</li> <li>\u6d4b\u8bd5\uff01</li> </ol> <p>\u5148\u5bfc\u5165jar\u5305</p> <pre><code>&lt;dependencies&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n        &lt;version&gt;1.9.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n        &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;\n        &lt;version&gt;3.5.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;\n        &lt;version&gt;2.0.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;8.0.12&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.18.12&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;!--\u5728build\u4e2d\u914d\u7f6eresources\uff0c\u6765\u9632\u6b62\u8d44\u6e90\u5bfc\u51fa\u5931\u8d25\u7684\u95ee\u9898--&gt;\n&lt;!-- Maven\u89e3\u51b3\u9759\u6001\u8d44\u6e90\u8fc7\u6ee4\u95ee\u9898 --&gt;\n&lt;build&gt;\n&lt;resources&gt;\n    &lt;resource&gt;\n        &lt;directory&gt;src/main/java&lt;/directory&gt;\n        &lt;includes&gt;\n            &lt;include&gt;**/*.properties&lt;/include&gt;\n            &lt;include&gt;**/*.xml&lt;/include&gt;\n        &lt;/includes&gt;\n        &lt;filtering&gt;false&lt;/filtering&gt;\n    &lt;/resource&gt;\n    &lt;resource&gt;\n        &lt;directory&gt;src/main/resources&lt;/directory&gt;\n        &lt;includes&gt;\n            &lt;include&gt;**/*.properties&lt;/include&gt;\n            &lt;include&gt;**/*.xml&lt;/include&gt;\n        &lt;/includes&gt;\n        &lt;filtering&gt;false&lt;/filtering&gt;\n    &lt;/resource&gt;\n&lt;/resources&gt;\n&lt;/build&gt;\n</code></pre> <p> \u7f16\u5199\u987a\u5e8f\uff1a User -&gt; UserMapper -&gt; UserMapper.xml -&gt; spring-dao.xml -&gt; UserServiceImpl -&gt; applicationContext.xml -&gt; MyTest6</p> <p>\u4ee3\u7801\u6b65\u9aa4\uff1a</p> <p>pojo\u5b9e\u4f53\u7c7b User</p> <pre><code>package pojo;\nimport lombok.Data;\n@Data\npublic class User {\n    private int id;\n    private String name;\n    private String pwd;\n}\n</code></pre> <p>mapper\u76ee\u5f55\u4e0b\u7684 UserMapper\u3001UserMapperImpl\u3001UserMapper.xml</p> <p>\u63a5\u53e3UserMapper</p> <pre><code>package mapper;\nimport java.util.List;\nimport pojo.User;\npublic interface UserMapper {\n    public List&lt;User&gt; getUser();\n}\n</code></pre> <p>UserMapperImpl</p> <pre><code>package mapper;\nimport java.util.List;\nimport org.mybatis.spring.SqlSessionTemplate;\nimport pojo.User;\n\npublic class UserMapperImpl implements UserMapper{\n\n    //\u6211\u4eec\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u5728\u539f\u6765\u90fd\u4f7f\u7528sqlSession\u6765\u6267\u884c\uff0c\u73b0\u5728\u90fd\u4f7f\u7528SqlSessionTemplate\uff1b\n    private SqlSessionTemplate sqlSessionTemplate;\n\n    public void setSqlSessionTemplate(SqlSessionTemplate sqlSessionTemplate) {\n        this.sqlSessionTemplate = sqlSessionTemplate;\n    }\n\n    public List&lt;User&gt; getUser() {\n        UserMapper mapper = sqlSessionTemplate.getMapper(UserMapper.class);\n        return mapper.getUser();\n    }\n}\n</code></pre> <p>UserMapper.xml \uff08\u72c2\u795e\u7ed9\u9762\u5b50\u624d\u7559\u4e0b\u6765\u7684\uff09</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n\n&lt;!-- \u7ed1\u5b9a\u63a5\u53e3 --&gt;\n&lt;mapper namespace=\"mapper.UserMapper\"&gt;\n    &lt;select id=\"getUser\" resultType=\"pojo.User\"&gt;\n        select * from mybatis.mybatis\n    &lt;/select&gt;\n&lt;/mapper&gt;\n</code></pre> <p>resource\u76ee\u5f55\u4e0b\u7684 mybatis-config.xml\u3001spring-dao.xml\u3001applicationContext.xml</p> <p>mybatis-config.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;\n&lt;configuration&gt;\n    &lt;!--\u5f00\u542f\u65e5\u5fd7--&gt;\n    &lt;settings&gt;\n        &lt;setting name=\"logImpl\" value=\"STDOUT_LOGGING\" /&gt;\n    &lt;/settings&gt;\n\n    &lt;!--\u53ef\u4ee5\u7ed9\u5b9e\u4f53\u7c7b\u8d77\u522b\u540d --&gt;\n    &lt;typeAliases&gt; \n        &lt;package name=\"pojo\" /&gt;\n    &lt;/typeAliases&gt;\n\n&lt;/configuration&gt;\n</code></pre> <p>spring-dao.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt;\n\n    &lt;!--DataSource:\u4f7f\u7528Spring\u7684\u6570\u5e2e\u6e90\u66ff\u6362Mybatis\u7684\u914d\u7f6e \u5176\u4ed6\u6570\u636e\u6e90\uff1ac3p0\u3001dbcp\u3001druid \n        \u8fd9\u4f7f\u7528Spring\u63d0\u4f9b\u7684JDBC: org.springframework.jdbc.datasource --&gt;\n    &lt;!--data source --&gt;\n    &lt;bean id=\"datasource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n        &lt;property name=\"driverClassName\"\n            value=\"com.mysql.cj.jdbc.Driver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:mysql://127.0.0.1:3306/mybatis?useSSL=false&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;serverTimezone=Asia/Shanghai\"/&gt;\n        &lt;property name=\"username\" value=\"root\" /&gt;\n        &lt;property name=\"password\" value=\"root\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!--sqlSessionFactory--&gt;\n    &lt;bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"datasource\" /&gt;\n        &lt;!--\u7ed1\u5b9a mybatis \u914d\u7f6e\u6587\u4ef6--&gt;\n        &lt;property name=\"configLocation\" value=\"classpath:mybatis-config.xml\"/&gt;\n        &lt;property name=\"mapperLocations\" value=\"classpath:mapper/*.xml\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- sqlSessionTemplate \u5c31\u662f\u4e4b\u524d\u4f7f\u7528\u7684\uff1asqlsession --&gt;\n    &lt;bean id=\"sqlSession\" class=\"org.mybatis.spring.SqlSessionTemplate\"&gt;\n        &lt;!-- \u53ea\u80fd\u4f7f\u7528\u6784\u9020\u5668\u6ce8\u5165sqlSessionFactory \u539f\u56e0\uff1a\u5b83\u6ca1\u6709set\u65b9\u6cd5--&gt;  \n        &lt;constructor-arg index=\"0\" ref=\"sqlSessionFactory\"/&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre> <p>applicationContext.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt;\n\n    &lt;!-- \u5bfc\u5165spring-dao.xml --&gt;\n    &lt;import resource=\"spring-dao.xml\"/&gt;\n\n    &lt;bean id=\"userMapper\" class=\"mapper.UserMapperImpl\"&gt;\n        &lt;property name=\"sqlSessionTemplate\" ref=\"sqlSession\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre> <p>\u6d4b\u8bd5\u7c7b</p> <pre><code>import org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport mapper.UserMapper;\nimport pojo.User;\npublic class MyTest6 {\n    public static void main(String[] args) {\n\n        ApplicationContext context = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n\n        UserMapper userMapper = (UserMapper) context.getBean(\"userMapper\");\n\n        for (User user : userMapper.getUser()) {\n            System.out.println(user);\n        }\n    }\n}\n</code></pre>"},{"location":"Java/Spring/Spring5/#122mybatis-spring-","title":"12.2\u3001mybatis-spring-\u65b9\u5f0f\u4e8c","text":"<p>UserServiceImpl2</p> <pre><code>package mapper;\nimport pojo.User;\nimport org.apache.ibatis.session.SqlSession;\nimport org.mybatis.spring.support.SqlSessionDaoSupport;\nimport java.util.List;\n//\u7ee7\u627fSqlSessionDaoSupport \u7c7b\npublic class UserMapperImpl2 extends SqlSessionDaoSupport implements UserMapper {\n    public List&lt;User&gt; getUser() {\n        SqlSession sqlSession = getSqlSession();\n        UserMapper mapper = sqlSession.getMapper(UserMapper.class);\n        return mapper.getUser();\n        //\u6216\u8005\u4e00\u53e5\u8bdd\uff1areturn getSqlSession().getMapper(UserMapper.class).getUser();\n    }\n}\n</code></pre> <p>spring-dao.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt;\n\n    &lt;!--DataSource:\u4f7f\u7528Spring\u7684\u6570\u5e2e\u6e90\u66ff\u6362Mybatis\u7684\u914d\u7f6e c3p0 dbcp druid \n        \u8fd9\u4f7f\u7528Spring\u63d0\u4f9b\u7684JDBC: org.springframework.jdbc.datasource --&gt;\n    &lt;!--data source --&gt;\n    &lt;bean id=\"datasource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n        &lt;property name=\"driverClassName\"\n            value=\"com.mysql.cj.jdbc.Driver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:mysql://127.0.0.1:3306/mybatis?useSSL=false&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;serverTimezone=Asia/Shanghai\"/&gt;\n        &lt;property name=\"username\" value=\"root\" /&gt;\n        &lt;property name=\"password\" value=\"root\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!--sqlSessionFactory--&gt;\n    &lt;bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"datasource\" /&gt;\n        &lt;!--\u7ed1\u5b9a mybatis \u914d\u7f6e\u6587\u4ef6--&gt;\n        &lt;property name=\"configLocation\" value=\"classpath:mybatis-config.xml\"/&gt;\n        &lt;property name=\"mapperLocations\" value=\"classpath:mapper/*.xml\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- \u65b9\u6cd5\u4e8c\uff1aSqlSessionTemplate \u53ef\u4ee5\u4e0d\u5199\u4e86--&gt;\n\n&lt;/beans&gt;\n</code></pre> <p>applicationContext.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt;\n\n    &lt;import resource=\"spring-dao.xml\" /&gt;\n\n    &lt;!-- \u65b9\u6cd5\u4e8c --&gt;\n    &lt;bean id=\"userMapper2\" class=\"mapper.UserMapperImpl2\"&gt;\n        &lt;property name=\"sqlSessionFactory\" ref=\"sqlSessionFactory\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre> <p>\u6d4b\u8bd5</p> <pre><code>public class MyTest6 {\n    public static void main(String[] args) {\n        ApplicationContext context = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n        UserMapper userMapper = (UserMapper) context.getBean(\"userMapper2\");\n        for (User user : userMapper.getUser()) {\n            System.out.println(user);\n        }\n    }\n}\n</code></pre>"},{"location":"Java/Spring/Spring5/#13_1","title":"13. \u58f0\u660e\u5f0f\u4e8b\u52a1","text":"<ul> <li>\u628a\u4e00\u7ec4\u4e1a\u52a1\u5f53\u6210\u4e00\u4e2a\u4e1a\u52a1\u6765\u505a\uff1b\u8981\u4e48\u90fd\u6210\u529f\uff0c\u8981\u4e48\u90fd\u5931\u8d25\uff01</li> <li>\u4e8b\u52a1\u5728\u9879\u76ee\u5f00\u53d1\u4e2d\uff0c\u5341\u5206\u7684\u91cd\u8981\uff0c\u6d89\u53ca\u5230\u6570\u636e\u7684\u4e00\u81f4\u6027\u95ee\u9898</li> <li>\u786e\u4fdd\u5b8c\u6574\u6027\u548c\u4e00\u81f4\u6027</li> </ul> <p>\u4e8b\u52a1\u7684ACID\u539f\u5219\uff1a 1\u3001\u539f\u5b50\u6027 2\u3001\u9694\u79bb\u6027 3\u3001\u4e00\u81f4\u6027 4\u3001\u6301\u4e45\u6027</p> <p>ACID\u53c2\u8003\u6587\u7ae0\uff1ahttps://www.cnblogs.com/malaikuangren/archive/2012/04/06/2434760.html</p> <p>Spring\u4e2d\u7684\u4e8b\u52a1\u7ba1\u7406</p> <ul> <li>\u58f0\u660e\u5f0f\u4e8b\u52a1\uff1aAOP</li> <li>\u7f16\u7a0b\u5f0f\u4e8b\u52a1\uff1a\u9700\u8981\u518d\u4ee3\u7801\u4e2d\uff0c\u8fdb\u884c\u4e8b\u52a1\u7ba1\u7406</li> </ul> <p>\u58f0\u660e\u5f0f\u4e8b\u52a1</p> <p>\u5148\u5bfc\u5165jar\u5305</p> <pre><code>&lt;dependencies&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n        &lt;version&gt;1.9.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n        &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;\n        &lt;version&gt;3.5.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;\n        &lt;version&gt;2.0.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;8.0.12&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.18.12&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;!--\u5728build\u4e2d\u914d\u7f6eresources\uff0c\u6765\u9632\u6b62\u8d44\u6e90\u5bfc\u51fa\u5931\u8d25\u7684\u95ee\u9898--&gt;\n&lt;!-- Maven\u89e3\u51b3\u9759\u6001\u8d44\u6e90\u8fc7\u6ee4\u95ee\u9898 --&gt;\n&lt;build&gt;\n&lt;resources&gt;\n    &lt;resource&gt;\n        &lt;directory&gt;src/main/java&lt;/directory&gt;\n        &lt;includes&gt;\n            &lt;include&gt;**/*.properties&lt;/include&gt;\n            &lt;include&gt;**/*.xml&lt;/include&gt;\n        &lt;/includes&gt;\n        &lt;filtering&gt;false&lt;/filtering&gt;\n    &lt;/resource&gt;\n    &lt;resource&gt;\n        &lt;directory&gt;src/main/resources&lt;/directory&gt;\n        &lt;includes&gt;\n            &lt;include&gt;**/*.properties&lt;/include&gt;\n            &lt;include&gt;**/*.xml&lt;/include&gt;\n        &lt;/includes&gt;\n        &lt;filtering&gt;false&lt;/filtering&gt;\n    &lt;/resource&gt;\n&lt;/resources&gt;\n&lt;/build&gt;\n</code></pre> <p>\u4ee3\u7801\u6b65\u9aa4\uff1a</p> <p>pojo\u5b9e\u4f53\u7c7b User</p> <pre><code>package pojo;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class User {\n    private int id;\n    private String name;\n    private String pwd;\n}\n</code></pre> <p>mapper\u76ee\u5f55\u4e0b\u7684 UserMapper\u3001UserMapperImpl\u3001UserMapper.xml</p> <p>\u63a5\u53e3UserMapper</p> <pre><code>package mapper;\nimport java.util.List;\nimport org.apache.ibatis.annotations.Param;\nimport pojo.User;\n\npublic interface UserMapper {\n    public List&lt;User&gt; getUser();\n\n    public int insertUser(User user); \n\n    public int delUser(@Param(\"id\") int id); \n}\n</code></pre> <p>UserMapperImpl</p> <pre><code>package mapper;\n\nimport pojo.User;\nimport org.apache.ibatis.session.SqlSession;\nimport org.mybatis.spring.support.SqlSessionDaoSupport;\nimport java.util.List;\n\npublic class UserMapperImpl extends SqlSessionDaoSupport implements UserMapper {\n    public List&lt;User&gt; getUser() {\n        User user = new User(5,\"\u4f60\u597d\",\"ok\");\n        insertUser(user);\n        delUser(5);\n        SqlSession sqlSession = getSqlSession();\n        UserMapper mapper = sqlSession.getMapper(UserMapper.class);\n        return mapper.getUser();\n        //\u6216\u8005return  getSqlSession().getMapper(UserMapper.class).getUser();\n    }\n    //\u63d2\u5165\n    public int insertUser(User user) {\n        return getSqlSession().getMapper(UserMapper.class).insertUser(user);\n    }\n    //\u5220\u9664\n    public int delUser(int id) {\n        return getSqlSession().getMapper(UserMapper.class).delUser(id);\n    }\n}\n</code></pre> <p>UserMapper.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n\n&lt;!-- \u7ed1\u5b9a\u63a5\u53e3 --&gt;\n&lt;mapper namespace=\"mapper.UserMapper\"&gt;\n    &lt;select id=\"getUser\" resultType=\"pojo.User\"&gt;\n        select * from mybatis.mybatis\n    &lt;/select&gt;\n\n    &lt;insert id=\"insertUser\"  parameterType=\"pojo.User\" &gt;\n        insert into  mybatis.mybatis (id,name,pwd) values (#{id},#{name},#{pwd})\n    &lt;/insert&gt;\n\n    &lt;delete id=\"delUser\" parameterType=\"_int\"&gt;\n        deleteAAAAA from mybatis.mybatis where id = #{id}\n        &lt;!-- deleteAAAAA\u662f\u6545\u610f\u5199\u9519\u7684 --&gt;\n    &lt;/delete&gt;\n\n&lt;/mapper&gt;\n</code></pre> <p>resource\u76ee\u5f55\u4e0b\u7684 mybatis-config.xml\u3001spring-dao.xml\u3001applicationContext.xml</p> <p>mybatis-config.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;\n&lt;!-- configuration --&gt;\n&lt;configuration&gt;\n\n    &lt;!--\u5f00\u542f\u65e5\u5fd7--&gt;\n    &lt;settings&gt;\n        &lt;setting name=\"logImpl\" value=\"STDOUT_LOGGING\" /&gt;\n    &lt;/settings&gt;\n\n    &lt;!--\u53ef\u4ee5\u7ed9\u5b9e\u4f53\u7c7b\u8d77\u522b\u540d--&gt;\n    &lt;typeAliases&gt; \n        &lt;package name=\"pojo\" /&gt;\n    &lt;/typeAliases&gt;\n\n&lt;/configuration&gt;\n</code></pre> <p>spring-dao.xml\uff08\u5df2\u5bfc\u5165\u7ea6\u675f\uff09</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/tx\n        https://www.springframework.org/schema/tx/spring-tx.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt;\n\n    &lt;!--data source --&gt;\n    &lt;bean id=\"datasource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n        &lt;property name=\"driverClassName\"\n            value=\"com.mysql.cj.jdbc.Driver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:mysql://127.0.0.1:3306/mybatis?useSSL=false&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;serverTimezone=Asia/Shanghai\"/&gt;\n        &lt;property name=\"username\" value=\"root\" /&gt;\n        &lt;property name=\"password\" value=\"root\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!--sqlSessionFactory--&gt;\n    &lt;bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"datasource\" /&gt;\n        &lt;!--\u7ed1\u5b9a mybatis \u914d\u7f6e\u6587\u4ef6--&gt;\n        &lt;property name=\"configLocation\" value=\"classpath:mybatis-config.xml\"/&gt;\n        &lt;property name=\"mapperLocations\" value=\"classpath:mapper/*.xml\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;!--\u58f0\u660e\u5f0f\u4e8b\u52a1--&gt;\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;\n        &lt;constructor-arg ref=\"datasource\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!--\u7ed3\u5408aop\u5b9e\u73b0\u4e8b\u52a1\u7ec7\u5165--&gt;\n    &lt;!--\u914d\u7f6e\u4e8b\u52a1\u7684\u901a\u77e5\u7c7b--&gt;\n    &lt;tx:advice id=\"txAdvice\" transaction-manager=\"transactionManager\"&gt;\n        &lt;!--\u7ed9\u54ea\u4e9b\u65b9\u6cd5\u914d\u7f6e\u4e8b\u52a1--&gt;\n        &lt;!--\u65b0\u4e1c\u897f\uff1a\u914d\u7f6e\u4e8b\u52a1\u7684\u4f20\u64ad\u7279\u6027 propagation--&gt;\n        &lt;tx:attributes&gt;\n            &lt;tx:method name=\"add\" propagation=\"REQUIRED\"/&gt;\n            &lt;tx:method name=\"delete\" propagation=\"REQUIRED\"/&gt;\n            &lt;tx:method name=\"update\" propagation=\"REQUIRED\"/&gt;\n            &lt;tx:method name=\"query\" read-only=\"true\"/&gt;\n            &lt;!-- *\u53f7\u5305\u542b\u4e0a\u97624\u4e2a\u65b9\u6cd5\uff1a\n            &lt;tx:method name=\"*\" propagation=\"REQUIRED\"/&gt; --&gt;\n        &lt;/tx:attributes&gt;\n    &lt;/tx:advice&gt;\n\n    &lt;!--\u914d\u7f6e\u4e8b\u52a1\u5207\u5165--&gt;\n    &lt;aop:config&gt;\n        &lt;aop:pointcut id=\"txpointcut\" expression=\"execution(* mapper.*.*(..))\"/&gt;\n        &lt;aop:advisor advice-ref=\"txAdvice\" pointcut-ref=\"txpointcut\"/&gt;\n    &lt;/aop:config&gt;\n\n&lt;/beans&gt;\n</code></pre> <p>applicationContext.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt;\n\n    &lt;import resource=\"spring-dao.xml\" /&gt;\n\n    &lt;bean id=\"userMapper\" class=\"mapper.UserMapperImpl\"&gt;\n        &lt;property name=\"sqlSessionFactory\" ref=\"sqlSessionFactory\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre> <p>\u6d4b\u8bd5\u7c7b</p> <pre><code>import org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\nimport mapper.UserMapper;import pojo.User;\npublic class MyTest7 {\n    public static void main(String[] args) {\n\n        ApplicationContext context = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n\n        UserMapper userMapper = (UserMapper) context.getBean(\"userMapper\");\n\n        for (User user : userMapper.getUser()) {\n            System.out.println(user);\n        }\n    }\n}\n</code></pre> <p>\u601d\u8003\uff1a \u4e3a\u4ec0\u4e48\u9700\u8981\u4e8b\u52a1\uff1f</p> <ul> <li>\u5982\u679c\u4e0d\u914d\u7f6e\u4e8b\u52a1\uff0c\u53ef\u80fd\u5b58\u5728\u6570\u636e\u63d0\u4ea4\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\u4e0b\uff1b</li> <li>\u5982\u679c\u4e0d\u5728spring\u4e2d\u53bb\u914d\u7f6e\u58f0\u660e\u5f0f\u4e8b\u52a1\uff0c\u6211\u4eec\u5c31\u9700\u8981\u5728\u4ee3\u7801\u4e2d\u624b\u52a8\u914d\u7f6e\u4e8b\u52a1\uff01</li> <li>\u4e8b\u52a1\u5728\u9879\u76ee\u7684\u5f00\u53d1\u4e2d\u975e\u5e38\u91cd\u8981\uff0c\u6d89\u53ca\u5230\u6570\u636e\u7684\u4e00\u81f4\u6027\u548c\u5b8c\u6574\u6027\u95ee\u9898\uff01</li> </ul>"},{"location":"Java/SpringBoot/SpringBoot/","title":"\u4e00\u3001Spring Boot \u5165\u95e8","text":""},{"location":"Java/SpringBoot/SpringBoot/#1spring-boot","title":"1\u3001Spring Boot \u7b80\u4ecb","text":"<p>\u7b80\u5316Spring\u5e94\u7528\u5f00\u53d1\u7684\u4e00\u4e2a\u6846\u67b6\uff1b</p> <p>\u6574\u4e2aSpring\u6280\u672f\u6808\u7684\u4e00\u4e2a\u5927\u6574\u5408\uff1b</p> <p>J2EE\u5f00\u53d1\u7684\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#2","title":"2\u3001\u5fae\u670d\u52a1","text":"<p>2014\uff0cmartin fowler</p> <p>\u5fae\u670d\u52a1\uff1a\u67b6\u6784\u98ce\u683c\uff08\u670d\u52a1\u5fae\u5316\uff09</p> <p>\u4e00\u4e2a\u5e94\u7528\u5e94\u8be5\u662f\u4e00\u7ec4\u5c0f\u578b\u670d\u52a1\uff1b\u53ef\u4ee5\u901a\u8fc7HTTP\u7684\u65b9\u5f0f\u8fdb\u884c\u4e92\u901a\uff1b</p> <p>\u5355\u4f53\u5e94\u7528\uff1aALL IN ONE</p> <p>\u5fae\u670d\u52a1\uff1a\u6bcf\u4e00\u4e2a\u529f\u80fd\u5143\u7d20\u6700\u7ec8\u90fd\u662f\u4e00\u4e2a\u53ef\u72ec\u7acb\u66ff\u6362\u548c\u72ec\u7acb\u5347\u7ea7\u7684\u8f6f\u4ef6\u5355\u5143\uff1b</p> <p>\u8be6\u7ec6\u53c2\u7167\u5fae\u670d\u52a1\u6587\u6863</p>"},{"location":"Java/SpringBoot/SpringBoot/#3","title":"3\u3001\u73af\u5883\u51c6\u5907","text":"<p>http://www.gulixueyuan.com/ \u8c37\u7c92\u5b66\u9662</p> <p>\u73af\u5883\u7ea6\u675f</p> <p>\u2013jdk1.8\uff1aSpring Boot \u63a8\u8350jdk1.7\u53ca\u4ee5\u4e0a\uff1bjava version \"1.8.0_112\"</p> <p>\u2013maven3.x\uff1amaven 3.3\u4ee5\u4e0a\u7248\u672c\uff1bApache Maven 3.3.9</p> <p>\u2013IntelliJIDEA2017\uff1aIntelliJ IDEA 2017.2.2 x64\u3001STS</p> <p>\u2013SpringBoot 1.5.9.RELEASE\uff1a1.5.9\uff1b</p> <p>\u7edf\u4e00\u73af\u5883\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#1maven","title":"1\u3001MAVEN\u8bbe\u7f6e\uff1b","text":"<p>\u7ed9maven \u7684settings.xml\u914d\u7f6e\u6587\u4ef6\u7684profiles\u6807\u7b7e\u6dfb\u52a0</p> <pre><code>&lt;profile&gt;\n  &lt;id&gt;jdk-1.8&lt;/id&gt;\n  &lt;activation&gt;\n    &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n    &lt;jdk&gt;1.8&lt;/jdk&gt;\n  &lt;/activation&gt;\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt;\n  &lt;/properties&gt;\n&lt;/profile&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#2idea","title":"2\u3001IDEA\u8bbe\u7f6e","text":"<p>\u6574\u5408maven\u8fdb\u6765\uff1b</p> <p></p> <p></p>"},{"location":"Java/SpringBoot/SpringBoot/#4spring-boot-helloworld","title":"4\u3001Spring Boot HelloWorld","text":"<p>\u4e00\u4e2a\u529f\u80fd\uff1a</p> <p>\u6d4f\u89c8\u5668\u53d1\u9001hello\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u63a5\u53d7\u8bf7\u6c42\u5e76\u5904\u7406\uff0c\u54cd\u5e94Hello World\u5b57\u7b26\u4e32\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#1mavenjar","title":"1\u3001\u521b\u5efa\u4e00\u4e2amaven\u5de5\u7a0b\uff1b\uff08jar\uff09","text":""},{"location":"Java/SpringBoot/SpringBoot/#2spring-boot","title":"2\u3001\u5bfc\u5165spring boot\u76f8\u5173\u7684\u4f9d\u8d56","text":"<pre><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#3spring-boot","title":"3\u3001\u7f16\u5199\u4e00\u4e2a\u4e3b\u7a0b\u5e8f\uff1b\u542f\u52a8Spring Boot\u5e94\u7528","text":"<pre><code>/**\n *  @SpringBootApplication \u6765\u6807\u6ce8\u4e00\u4e2a\u4e3b\u7a0b\u5e8f\u7c7b\uff0c\u8bf4\u660e\u8fd9\u662f\u4e00\u4e2aSpring Boot\u5e94\u7528\n */\n@SpringBootApplication\npublic class HelloWorldMainApplication {\n\n    public static void main(String[] args) {\n\n        // Spring\u5e94\u7528\u542f\u52a8\u8d77\u6765\n        SpringApplication.run(HelloWorldMainApplication.class,args);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#4controllerservice","title":"4\u3001\u7f16\u5199\u76f8\u5173\u7684Controller\u3001Service","text":"<pre><code>@Controller\npublic class HelloController {\n\n    @ResponseBody\n    @RequestMapping(\"/hello\")\n    public String hello(){\n        return \"Hello World!\";\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#5","title":"5\u3001\u8fd0\u884c\u4e3b\u7a0b\u5e8f\u6d4b\u8bd5","text":""},{"location":"Java/SpringBoot/SpringBoot/#6","title":"6\u3001\u7b80\u5316\u90e8\u7f72","text":"<pre><code> &lt;!-- \u8fd9\u4e2a\u63d2\u4ef6\uff0c\u53ef\u4ee5\u5c06\u5e94\u7528\u6253\u5305\u6210\u4e00\u4e2a\u53ef\u6267\u884c\u7684jar\u5305\uff1b--&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre> <p>\u5c06\u8fd9\u4e2a\u5e94\u7528\u6253\u6210jar\u5305\uff0c\u76f4\u63a5\u4f7f\u7528java -jar\u7684\u547d\u4ee4\u8fdb\u884c\u6267\u884c\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#5hello-world","title":"5\u3001Hello World\u63a2\u7a76","text":""},{"location":"Java/SpringBoot/SpringBoot/#1pom","title":"1\u3001POM\u6587\u4ef6","text":""},{"location":"Java/SpringBoot/SpringBoot/#1","title":"1\u3001\u7236\u9879\u76ee","text":"<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n\n\u4ed6\u7684\u7236\u9879\u76ee\u662f\n&lt;parent&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n  &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;\n  &lt;relativePath&gt;../../spring-boot-dependencies&lt;/relativePath&gt;\n&lt;/parent&gt;\n\u4ed6\u6765\u771f\u6b63\u7ba1\u7406Spring Boot\u5e94\u7528\u91cc\u9762\u7684\u6240\u6709\u4f9d\u8d56\u7248\u672c\uff1b\n</code></pre> <p>Spring Boot\u7684\u7248\u672c\u4ef2\u88c1\u4e2d\u5fc3\uff1b</p> <p>\u4ee5\u540e\u6211\u4eec\u5bfc\u5165\u4f9d\u8d56\u9ed8\u8ba4\u662f\u4e0d\u9700\u8981\u5199\u7248\u672c\uff1b\uff08\u6ca1\u6709\u5728dependencies\u91cc\u9762\u7ba1\u7406\u7684\u4f9d\u8d56\u81ea\u7136\u9700\u8981\u58f0\u660e\u7248\u672c\u53f7\uff09</p>"},{"location":"Java/SpringBoot/SpringBoot/#2_1","title":"2\u3001\u542f\u52a8\u5668","text":"<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre> <p>spring-boot-starter-==web==\uff1a</p> <p>\u200b   spring-boot-starter\uff1aspring-boot\u573a\u666f\u542f\u52a8\u5668\uff1b\u5e2e\u6211\u4eec\u5bfc\u5165\u4e86web\u6a21\u5757\u6b63\u5e38\u8fd0\u884c\u6240\u4f9d\u8d56\u7684\u7ec4\u4ef6\uff1b</p> <p>Spring Boot\u5c06\u6240\u6709\u7684\u529f\u80fd\u573a\u666f\u90fd\u62bd\u53d6\u51fa\u6765\uff0c\u505a\u6210\u4e00\u4e2a\u4e2a\u7684starters\uff08\u542f\u52a8\u5668\uff09\uff0c\u53ea\u9700\u8981\u5728\u9879\u76ee\u91cc\u9762\u5f15\u5165\u8fd9\u4e9bstarter\u76f8\u5173\u573a\u666f\u7684\u6240\u6709\u4f9d\u8d56\u90fd\u4f1a\u5bfc\u5165\u8fdb\u6765\u3002\u8981\u7528\u4ec0\u4e48\u529f\u80fd\u5c31\u5bfc\u5165\u4ec0\u4e48\u573a\u666f\u7684\u542f\u52a8\u5668</p>"},{"location":"Java/SpringBoot/SpringBoot/#2_2","title":"2\u3001\u4e3b\u7a0b\u5e8f\u7c7b\uff0c\u4e3b\u5165\u53e3\u7c7b","text":"<pre><code>/**\n *  @SpringBootApplication \u6765\u6807\u6ce8\u4e00\u4e2a\u4e3b\u7a0b\u5e8f\u7c7b\uff0c\u8bf4\u660e\u8fd9\u662f\u4e00\u4e2aSpring Boot\u5e94\u7528\n */\n@SpringBootApplication\npublic class HelloWorldMainApplication {\n\n    public static void main(String[] args) {\n\n        // Spring\u5e94\u7528\u542f\u52a8\u8d77\u6765\n        SpringApplication.run(HelloWorldMainApplication.class,args);\n    }\n}\n</code></pre> <p>@SpringBootApplication:    Spring Boot\u5e94\u7528\u6807\u6ce8\u5728\u67d0\u4e2a\u7c7b\u4e0a\u8bf4\u660e\u8fd9\u4e2a\u7c7b\u662fSpringBoot\u7684\u4e3b\u914d\u7f6e\u7c7b\uff0cSpringBoot\u5c31\u5e94\u8be5\u8fd0\u884c\u8fd9\u4e2a\u7c7b\u7684main\u65b9\u6cd5\u6765\u542f\u52a8SpringBoot\u5e94\u7528\uff1b</p> <pre><code>@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Inherited\n@SpringBootConfiguration\n@EnableAutoConfiguration\n@ComponentScan(excludeFilters = {\n      @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),\n      @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })\npublic @interface SpringBootApplication {\n</code></pre> <p>@SpringBootConfiguration:Spring Boot\u7684\u914d\u7f6e\u7c7b\uff1b</p> <p>\u200b       \u6807\u6ce8\u5728\u67d0\u4e2a\u7c7b\u4e0a\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2aSpring Boot\u7684\u914d\u7f6e\u7c7b\uff1b</p> <p>\u200b       @Configuration:\u914d\u7f6e\u7c7b\u4e0a\u6765\u6807\u6ce8\u8fd9\u4e2a\u6ce8\u89e3\uff1b</p> <p>\u200b           \u914d\u7f6e\u7c7b -----  \u914d\u7f6e\u6587\u4ef6\uff1b\u914d\u7f6e\u7c7b\u4e5f\u662f\u5bb9\u5668\u4e2d\u7684\u4e00\u4e2a\u7ec4\u4ef6\uff1b@Component</p> <p>@EnableAutoConfiguration\uff1a\u5f00\u542f\u81ea\u52a8\u914d\u7f6e\u529f\u80fd\uff1b</p> <p>\u200b       \u4ee5\u524d\u6211\u4eec\u9700\u8981\u914d\u7f6e\u7684\u4e1c\u897f\uff0cSpring Boot\u5e2e\u6211\u4eec\u81ea\u52a8\u914d\u7f6e\uff1b@EnableAutoConfiguration\u544a\u8bc9SpringBoot\u5f00\u542f\u81ea\u52a8\u914d\u7f6e\u529f\u80fd\uff1b\u8fd9\u6837\u81ea\u52a8\u914d\u7f6e\u624d\u80fd\u751f\u6548\uff1b</p> <pre><code>@AutoConfigurationPackage\n@Import(EnableAutoConfigurationImportSelector.class)\npublic @interface EnableAutoConfiguration {\n</code></pre> <p>\u200b       @AutoConfigurationPackage\uff1a\u81ea\u52a8\u914d\u7f6e\u5305</p> <p>\u200b       @Import(AutoConfigurationPackages.Registrar.class)\uff1a</p> <p>\u200b       Spring\u7684\u5e95\u5c42\u6ce8\u89e3@Import\uff0c\u7ed9\u5bb9\u5668\u4e2d\u5bfc\u5165\u4e00\u4e2a\u7ec4\u4ef6\uff1b\u5bfc\u5165\u7684\u7ec4\u4ef6\u7531AutoConfigurationPackages.Registrar.class\uff1b</p> <p>==\u5c06\u4e3b\u914d\u7f6e\u7c7b\uff08@SpringBootApplication\u6807\u6ce8\u7684\u7c7b\uff09\u7684\u6240\u5728\u5305\u53ca\u4e0b\u9762\u6240\u6709\u5b50\u5305\u91cc\u9762\u7684\u6240\u6709\u7ec4\u4ef6\u626b\u63cf\u5230Spring\u5bb9\u5668\uff1b==</p> <p>\u200b   @Import(EnableAutoConfigurationImportSelector.class)\uff1b</p> <p>\u200b       \u7ed9\u5bb9\u5668\u4e2d\u5bfc\u5165\u7ec4\u4ef6\uff1f</p> <p>\u200b       EnableAutoConfigurationImportSelector\uff1a\u5bfc\u5165\u54ea\u4e9b\u7ec4\u4ef6\u7684\u9009\u62e9\u5668\uff1b</p> <p>\u200b       \u5c06\u6240\u6709\u9700\u8981\u5bfc\u5165\u7684\u7ec4\u4ef6\u4ee5\u5168\u7c7b\u540d\u7684\u65b9\u5f0f\u8fd4\u56de\uff1b\u8fd9\u4e9b\u7ec4\u4ef6\u5c31\u4f1a\u88ab\u6dfb\u52a0\u5230\u5bb9\u5668\u4e2d\uff1b</p> <p>\u200b       \u4f1a\u7ed9\u5bb9\u5668\u4e2d\u5bfc\u5165\u975e\u5e38\u591a\u7684\u81ea\u52a8\u914d\u7f6e\u7c7b\uff08xxxAutoConfiguration\uff09\uff1b\u5c31\u662f\u7ed9\u5bb9\u5668\u4e2d\u5bfc\u5165\u8fd9\u4e2a\u573a\u666f\u9700\u8981\u7684\u6240\u6709\u7ec4\u4ef6\uff0c\u5e76\u914d\u7f6e\u597d\u8fd9\u4e9b\u7ec4\u4ef6\uff1b        </p> <p>\u6709\u4e86\u81ea\u52a8\u914d\u7f6e\u7c7b\uff0c\u514d\u53bb\u4e86\u6211\u4eec\u624b\u52a8\u7f16\u5199\u914d\u7f6e\u6ce8\u5165\u529f\u80fd\u7ec4\u4ef6\u7b49\u7684\u5de5\u4f5c\uff1b</p> <p>\u200b       SpringFactoriesLoader.loadFactoryNames(EnableAutoConfiguration.class,classLoader)\uff1b</p> <p>==Spring Boot\u5728\u542f\u52a8\u7684\u65f6\u5019\u4ece\u7c7b\u8def\u5f84\u4e0b\u7684META-INF/spring.factories\u4e2d\u83b7\u53d6EnableAutoConfiguration\u6307\u5b9a\u7684\u503c\uff0c\u5c06\u8fd9\u4e9b\u503c\u4f5c\u4e3a\u81ea\u52a8\u914d\u7f6e\u7c7b\u5bfc\u5165\u5230\u5bb9\u5668\u4e2d\uff0c\u81ea\u52a8\u914d\u7f6e\u7c7b\u5c31\u751f\u6548\uff0c\u5e2e\u6211\u4eec\u8fdb\u884c\u81ea\u52a8\u914d\u7f6e\u5de5\u4f5c\uff1b==\u4ee5\u524d\u6211\u4eec\u9700\u8981\u81ea\u5df1\u914d\u7f6e\u7684\u4e1c\u897f\uff0c\u81ea\u52a8\u914d\u7f6e\u7c7b\u90fd\u5e2e\u6211\u4eec\uff1b</p> <p>J2EE\u7684\u6574\u4f53\u6574\u5408\u89e3\u51b3\u65b9\u6848\u548c\u81ea\u52a8\u914d\u7f6e\u90fd\u5728spring-boot-autoconfigure-1.5.9.RELEASE.jar\uff1b</p> <p>\u200b       </p> <p>==Spring\u6ce8\u89e3\u7248\uff08\u8c37\u7c92\u5b66\u9662\uff09==</p>"},{"location":"Java/SpringBoot/SpringBoot/#6spring-initializerspring-boot","title":"6\u3001\u4f7f\u7528Spring Initializer\u5feb\u901f\u521b\u5efaSpring Boot\u9879\u76ee","text":""},{"location":"Java/SpringBoot/SpringBoot/#1idea-spring-initializer","title":"1\u3001IDEA\uff1a\u4f7f\u7528 Spring Initializer\u5feb\u901f\u521b\u5efa\u9879\u76ee","text":"<p>IDE\u90fd\u652f\u6301\u4f7f\u7528Spring\u7684\u9879\u76ee\u521b\u5efa\u5411\u5bfc\u5feb\u901f\u521b\u5efa\u4e00\u4e2aSpring Boot\u9879\u76ee\uff1b</p> <p>\u9009\u62e9\u6211\u4eec\u9700\u8981\u7684\u6a21\u5757\uff1b\u5411\u5bfc\u4f1a\u8054\u7f51\u521b\u5efaSpring Boot\u9879\u76ee\uff1b</p> <p>\u9ed8\u8ba4\u751f\u6210\u7684Spring Boot\u9879\u76ee\uff1b</p> <ul> <li>\u4e3b\u7a0b\u5e8f\u5df2\u7ecf\u751f\u6210\u597d\u4e86\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6211\u4eec\u81ea\u5df1\u7684\u903b\u8f91</li> <li>resources\u6587\u4ef6\u5939\u4e2d\u76ee\u5f55\u7ed3\u6784</li> <li>static\uff1a\u4fdd\u5b58\u6240\u6709\u7684\u9759\u6001\u8d44\u6e90\uff1b js css  images\uff1b</li> <li>templates\uff1a\u4fdd\u5b58\u6240\u6709\u7684\u6a21\u677f\u9875\u9762\uff1b\uff08Spring Boot\u9ed8\u8ba4jar\u5305\u4f7f\u7528\u5d4c\u5165\u5f0f\u7684Tomcat\uff0c\u9ed8\u8ba4\u4e0d\u652f\u6301JSP\u9875\u9762\uff09\uff1b\u53ef\u4ee5\u4f7f\u7528\u6a21\u677f\u5f15\u64ce\uff08freemarker\u3001thymeleaf\uff09\uff1b</li> <li>application.properties\uff1aSpring Boot\u5e94\u7528\u7684\u914d\u7f6e\u6587\u4ef6\uff1b\u53ef\u4ee5\u4fee\u6539\u4e00\u4e9b\u9ed8\u8ba4\u8bbe\u7f6e\uff1b</li> </ul>"},{"location":"Java/SpringBoot/SpringBoot/#2sts-spring-starter-project","title":"2\u3001STS\u4f7f\u7528 Spring Starter Project\u5feb\u901f\u521b\u5efa\u9879\u76ee","text":""},{"location":"Java/SpringBoot/SpringBoot/#_1","title":"\u4e8c\u3001\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"Java/SpringBoot/SpringBoot/#1_1","title":"1\u3001\u914d\u7f6e\u6587\u4ef6","text":"<p>SpringBoot\u4f7f\u7528\u4e00\u4e2a\u5168\u5c40\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u914d\u7f6e\u6587\u4ef6\u540d\u662f\u56fa\u5b9a\u7684\uff1b</p> <p>\u2022application.properties</p> <p>\u2022application.yml</p> <p>\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\uff1a\u4fee\u6539SpringBoot\u81ea\u52a8\u914d\u7f6e\u7684\u9ed8\u8ba4\u503c\uff1bSpringBoot\u5728\u5e95\u5c42\u90fd\u7ed9\u6211\u4eec\u81ea\u52a8\u914d\u7f6e\u597d\uff1b</p> <p>YAML\uff08YAML Ain't Markup Language\uff09</p> <p>\u200b   YAML  A Markup Language\uff1a\u662f\u4e00\u4e2a\u6807\u8bb0\u8bed\u8a00</p> <p>\u200b   YAML   isn't Markup Language\uff1a\u4e0d\u662f\u4e00\u4e2a\u6807\u8bb0\u8bed\u8a00\uff1b</p> <p>\u6807\u8bb0\u8bed\u8a00\uff1a</p> <p>\u200b   \u4ee5\u524d\u7684\u914d\u7f6e\u6587\u4ef6\uff1b\u5927\u591a\u90fd\u4f7f\u7528\u7684\u662f  xxxx.xml\u6587\u4ef6\uff1b</p> <p>\u200b   YAML\uff1a\u4ee5\u6570\u636e\u4e3a\u4e2d\u5fc3\uff0c\u6bd4json\u3001xml\u7b49\u66f4\u9002\u5408\u505a\u914d\u7f6e\u6587\u4ef6\uff1b</p> <p>\u200b   YAML\uff1a\u914d\u7f6e\u4f8b\u5b50</p> <pre><code>server:\n  port: 8081\n</code></pre> <p>\u200b   XML\uff1a</p> <pre><code>&lt;server&gt;\n    &lt;port&gt;8081&lt;/port&gt;\n&lt;/server&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#2yaml","title":"2\u3001YAML\u8bed\u6cd5\uff1a","text":""},{"location":"Java/SpringBoot/SpringBoot/#1_2","title":"1\u3001\u57fa\u672c\u8bed\u6cd5","text":"<p>k:(\u7a7a\u683c)v\uff1a\u8868\u793a\u4e00\u5bf9\u952e\u503c\u5bf9\uff08\u7a7a\u683c\u5fc5\u987b\u6709\uff09\uff1b</p> <p>\u4ee5\u7a7a\u683c\u7684\u7f29\u8fdb\u6765\u63a7\u5236\u5c42\u7ea7\u5173\u7cfb\uff1b\u53ea\u8981\u662f\u5de6\u5bf9\u9f50\u7684\u4e00\u5217\u6570\u636e\uff0c\u90fd\u662f\u540c\u4e00\u4e2a\u5c42\u7ea7\u7684</p> <pre><code>server:\n    port: 8081\n    path: /hello\n</code></pre> <p>\u5c5e\u6027\u548c\u503c\u4e5f\u662f\u5927\u5c0f\u5199\u654f\u611f\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#2_3","title":"2\u3001\u503c\u7684\u5199\u6cd5","text":""},{"location":"Java/SpringBoot/SpringBoot/#_2","title":"\u5b57\u9762\u91cf\uff1a\u666e\u901a\u7684\u503c\uff08\u6570\u5b57\uff0c\u5b57\u7b26\u4e32\uff0c\u5e03\u5c14\uff09","text":"<p>\u200b   k: v\uff1a\u5b57\u9762\u76f4\u63a5\u6765\u5199\uff1b</p> <p>\u200b       \u5b57\u7b26\u4e32\u9ed8\u8ba4\u4e0d\u7528\u52a0\u4e0a\u5355\u5f15\u53f7\u6216\u8005\u53cc\u5f15\u53f7\uff1b</p> <p>\u200b       \"\"\uff1a\u53cc\u5f15\u53f7\uff1b\u4e0d\u4f1a\u8f6c\u4e49\u5b57\u7b26\u4e32\u91cc\u9762\u7684\u7279\u6b8a\u5b57\u7b26\uff1b\u7279\u6b8a\u5b57\u7b26\u4f1a\u4f5c\u4e3a\u672c\u8eab\u60f3\u8868\u793a\u7684\u610f\u601d</p> <p>\u200b               name:   \"zhangsan \\n lisi\"\uff1a\u8f93\u51fa\uff1bzhangsan \u6362\u884c  lisi</p> <p>\u200b       ''\uff1a\u5355\u5f15\u53f7\uff1b\u4f1a\u8f6c\u4e49\u7279\u6b8a\u5b57\u7b26\uff0c\u7279\u6b8a\u5b57\u7b26\u6700\u7ec8\u53ea\u662f\u4e00\u4e2a\u666e\u901a\u7684\u5b57\u7b26\u4e32\u6570\u636e</p> <p>\u200b               name:   \u2018zhangsan \\n lisi\u2019\uff1a\u8f93\u51fa\uff1bzhangsan \\n  lisi</p>"},{"location":"Java/SpringBoot/SpringBoot/#map","title":"\u5bf9\u8c61\u3001Map\uff08\u5c5e\u6027\u548c\u503c\uff09\uff08\u952e\u503c\u5bf9\uff09\uff1a","text":"<p>\u200b   k: v\uff1a\u5728\u4e0b\u4e00\u884c\u6765\u5199\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u503c\u7684\u5173\u7cfb\uff1b\u6ce8\u610f\u7f29\u8fdb</p> <p>\u200b       \u5bf9\u8c61\u8fd8\u662fk: v\u7684\u65b9\u5f0f</p> <pre><code>friends:\n        lastName: zhangsan\n        age: 20\n</code></pre> <p>\u884c\u5185\u5199\u6cd5\uff1a</p> <pre><code>friends: {lastName: zhangsan,age: 18}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#listset","title":"\u6570\u7ec4\uff08List\u3001Set\uff09\uff1a","text":"<p>\u7528- \u503c\u8868\u793a\u6570\u7ec4\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20</p> <pre><code>pets:\n - cat\n - dog\n - pig\n</code></pre> <p>\u884c\u5185\u5199\u6cd5</p> <pre><code>pets: [cat,dog,pig]\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#3_1","title":"3\u3001\u914d\u7f6e\u6587\u4ef6\u503c\u6ce8\u5165","text":"<p>\u914d\u7f6e\u6587\u4ef6</p> <pre><code>person:\n    lastName: hello\n    age: 18\n    boss: false\n    birth: 2017/12/12\n    maps: {k1: v1,k2: 12}\n    lists:\n      - lisi\n      - zhaoliu\n    dog:\n      name: \u5c0f\u72d7\n      age: 12\n</code></pre> <p>javaBean\uff1a</p> <pre><code>/**\n * \u5c06\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684\u6bcf\u4e00\u4e2a\u5c5e\u6027\u7684\u503c\uff0c\u6620\u5c04\u5230\u8fd9\u4e2a\u7ec4\u4ef6\u4e2d\n * @ConfigurationProperties\uff1a\u544a\u8bc9SpringBoot\u5c06\u672c\u7c7b\u4e2d\u7684\u6240\u6709\u5c5e\u6027\u548c\u914d\u7f6e\u6587\u4ef6\u4e2d\u76f8\u5173\u7684\u914d\u7f6e\u8fdb\u884c\u7ed1\u5b9a\uff1b\n *      prefix = \"person\"\uff1a\u914d\u7f6e\u6587\u4ef6\u4e2d\u54ea\u4e2a\u4e0b\u9762\u7684\u6240\u6709\u5c5e\u6027\u8fdb\u884c\u4e00\u4e00\u6620\u5c04\n *\n * \u53ea\u6709\u8fd9\u4e2a\u7ec4\u4ef6\u662f\u5bb9\u5668\u4e2d\u7684\u7ec4\u4ef6\uff0c\u624d\u80fd\u5bb9\u5668\u63d0\u4f9b\u7684@ConfigurationProperties\u529f\u80fd\uff1b\n *\n */\n@Component\n@ConfigurationProperties(prefix = \"person\")\npublic class Person {\n\n    private String lastName;\n    private Integer age;\n    private Boolean boss;\n    private Date birth;\n\n    private Map&lt;String,Object&gt; maps;\n    private List&lt;Object&gt; lists;\n    private Dog dog;\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u5bfc\u5165\u914d\u7f6e\u6587\u4ef6\u5904\u7406\u5668\uff0c\u4ee5\u540e\u7f16\u5199\u914d\u7f6e\u5c31\u6709\u63d0\u793a\u4e86</p> <pre><code>&lt;!--\u5bfc\u5165\u914d\u7f6e\u6587\u4ef6\u5904\u7406\u5668\uff0c\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u7ed1\u5b9a\u5c31\u4f1a\u6709\u63d0\u793a--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#1propertiesideautf-8","title":"1\u3001properties\u914d\u7f6e\u6587\u4ef6\u5728idea\u4e2d\u9ed8\u8ba4utf-8\u53ef\u80fd\u4f1a\u4e71\u7801","text":"<p>\u8c03\u6574</p> <p></p>"},{"location":"Java/SpringBoot/SpringBoot/#2valueconfigurationproperties","title":"2\u3001@Value\u83b7\u53d6\u503c\u548c@ConfigurationProperties\u83b7\u53d6\u503c\u6bd4\u8f83","text":"@ConfigurationProperties @Value \u529f\u80fd \u6279\u91cf\u6ce8\u5165\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u5c5e\u6027 \u4e00\u4e2a\u4e2a\u6307\u5b9a \u677e\u6563\u7ed1\u5b9a\uff08\u677e\u6563\u8bed\u6cd5\uff09 \u652f\u6301 \u4e0d\u652f\u6301 SpEL \u4e0d\u652f\u6301 \u652f\u6301 JSR303\u6570\u636e\u6821\u9a8c \u652f\u6301 \u4e0d\u652f\u6301 \u590d\u6742\u7c7b\u578b\u5c01\u88c5 \u652f\u6301 \u4e0d\u652f\u6301 <p>\u914d\u7f6e\u6587\u4ef6yml\u8fd8\u662fproperties\u4ed6\u4eec\u90fd\u80fd\u83b7\u53d6\u5230\u503c\uff1b</p> <p>\u5982\u679c\u8bf4\uff0c\u6211\u4eec\u53ea\u662f\u5728\u67d0\u4e2a\u4e1a\u52a1\u903b\u8f91\u4e2d\u9700\u8981\u83b7\u53d6\u4e00\u4e0b\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u67d0\u9879\u503c\uff0c\u4f7f\u7528@Value\uff1b</p> <p>\u5982\u679c\u8bf4\uff0c\u6211\u4eec\u4e13\u95e8\u7f16\u5199\u4e86\u4e00\u4e2ajavaBean\u6765\u548c\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u6620\u5c04\uff0c\u6211\u4eec\u5c31\u76f4\u63a5\u4f7f\u7528@ConfigurationProperties\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#3_2","title":"3\u3001\u914d\u7f6e\u6587\u4ef6\u6ce8\u5165\u503c\u6570\u636e\u6821\u9a8c","text":"<pre><code>@Component\n@ConfigurationProperties(prefix = \"person\")\n@Validated\npublic class Person {\n\n    /**\n     * &lt;bean class=\"Person\"&gt;\n     *      &lt;property name=\"lastName\" value=\"\u5b57\u9762\u91cf/${key}\u4ece\u73af\u5883\u53d8\u91cf\u3001\u914d\u7f6e\u6587\u4ef6\u4e2d\u83b7\u53d6\u503c/#{SpEL}\"&gt;&lt;/property&gt;\n     * &lt;bean/&gt;\n     */\n\n   //lastName\u5fc5\u987b\u662f\u90ae\u7bb1\u683c\u5f0f\n    @Email\n    //@Value(\"${person.last-name}\")\n    private String lastName;\n    //@Value(\"#{11*2}\")\n    private Integer age;\n    //@Value(\"true\")\n    private Boolean boss;\n\n    private Date birth;\n    private Map&lt;String,Object&gt; maps;\n    private List&lt;Object&gt; lists;\n    private Dog dog;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#4propertysourceimportresourcebean","title":"4\u3001@PropertySource&amp;@ImportResource&amp;@Bean","text":"<p>@PropertySource\uff1a\u52a0\u8f7d\u6307\u5b9a\u7684\u914d\u7f6e\u6587\u4ef6\uff1b</p> <pre><code>/**\n * \u5c06\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684\u6bcf\u4e00\u4e2a\u5c5e\u6027\u7684\u503c\uff0c\u6620\u5c04\u5230\u8fd9\u4e2a\u7ec4\u4ef6\u4e2d\n * @ConfigurationProperties\uff1a\u544a\u8bc9SpringBoot\u5c06\u672c\u7c7b\u4e2d\u7684\u6240\u6709\u5c5e\u6027\u548c\u914d\u7f6e\u6587\u4ef6\u4e2d\u76f8\u5173\u7684\u914d\u7f6e\u8fdb\u884c\u7ed1\u5b9a\uff1b\n *      prefix = \"person\"\uff1a\u914d\u7f6e\u6587\u4ef6\u4e2d\u54ea\u4e2a\u4e0b\u9762\u7684\u6240\u6709\u5c5e\u6027\u8fdb\u884c\u4e00\u4e00\u6620\u5c04\n *\n * \u53ea\u6709\u8fd9\u4e2a\u7ec4\u4ef6\u662f\u5bb9\u5668\u4e2d\u7684\u7ec4\u4ef6\uff0c\u624d\u80fd\u5bb9\u5668\u63d0\u4f9b\u7684@ConfigurationProperties\u529f\u80fd\uff1b\n *  @ConfigurationProperties(prefix = \"person\")\u9ed8\u8ba4\u4ece\u5168\u5c40\u914d\u7f6e\u6587\u4ef6\u4e2d\u83b7\u53d6\u503c\uff1b\n *\n */\n@PropertySource(value = {\"classpath:person.properties\"})\n@Component\n@ConfigurationProperties(prefix = \"person\")\n//@Validated\npublic class Person {\n\n    /**\n     * &lt;bean class=\"Person\"&gt;\n     *      &lt;property name=\"lastName\" value=\"\u5b57\u9762\u91cf/${key}\u4ece\u73af\u5883\u53d8\u91cf\u3001\u914d\u7f6e\u6587\u4ef6\u4e2d\u83b7\u53d6\u503c/#{SpEL}\"&gt;&lt;/property&gt;\n     * &lt;bean/&gt;\n     */\n\n   //lastName\u5fc5\u987b\u662f\u90ae\u7bb1\u683c\u5f0f\n   // @Email\n    //@Value(\"${person.last-name}\")\n    private String lastName;\n    //@Value(\"#{11*2}\")\n    private Integer age;\n    //@Value(\"true\")\n    private Boolean boss;\n</code></pre> <p>@ImportResource\uff1a\u5bfc\u5165Spring\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8ba9\u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u7684\u5185\u5bb9\u751f\u6548\uff1b</p> <p>Spring Boot\u91cc\u9762\u6ca1\u6709Spring\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u6211\u4eec\u81ea\u5df1\u7f16\u5199\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4e5f\u4e0d\u80fd\u81ea\u52a8\u8bc6\u522b\uff1b</p> <p>\u60f3\u8ba9Spring\u7684\u914d\u7f6e\u6587\u4ef6\u751f\u6548\uff0c\u52a0\u8f7d\u8fdb\u6765\uff1b@ImportResource\u6807\u6ce8\u5728\u4e00\u4e2a\u914d\u7f6e\u7c7b\u4e0a</p> <pre><code>@ImportResource(locations = {\"classpath:beans.xml\"})\n\u5bfc\u5165Spring\u7684\u914d\u7f6e\u6587\u4ef6\u8ba9\u5176\u751f\u6548\n</code></pre> <p>\u4e0d\u6765\u7f16\u5199Spring\u7684\u914d\u7f6e\u6587\u4ef6</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;\n\n\n    &lt;bean id=\"helloService\" class=\"com.atguigu.springboot.service.HelloService\"&gt;&lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre> <p>SpringBoot\u63a8\u8350\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u7ec4\u4ef6\u7684\u65b9\u5f0f\uff1b\u63a8\u8350\u4f7f\u7528\u5168\u6ce8\u89e3\u7684\u65b9\u5f0f</p> <p>1\u3001\u914d\u7f6e\u7c7b@Configuration------&gt;Spring\u914d\u7f6e\u6587\u4ef6</p> <p>2\u3001\u4f7f\u7528@Bean\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u7ec4\u4ef6</p> <pre><code>/**\n * @Configuration\uff1a\u6307\u660e\u5f53\u524d\u7c7b\u662f\u4e00\u4e2a\u914d\u7f6e\u7c7b\uff1b\u5c31\u662f\u6765\u66ff\u4ee3\u4e4b\u524d\u7684Spring\u914d\u7f6e\u6587\u4ef6\n *\n * \u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u7528&lt;bean&gt;&lt;bean/&gt;\u6807\u7b7e\u6dfb\u52a0\u7ec4\u4ef6\n *\n */\n@Configuration\npublic class MyAppConfig {\n\n    //\u5c06\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u6dfb\u52a0\u5230\u5bb9\u5668\u4e2d\uff1b\u5bb9\u5668\u4e2d\u8fd9\u4e2a\u7ec4\u4ef6\u9ed8\u8ba4\u7684id\u5c31\u662f\u65b9\u6cd5\u540d\n    @Bean\n    public HelloService helloService02(){\n        System.out.println(\"\u914d\u7f6e\u7c7b@Bean\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u7ec4\u4ef6\u4e86...\");\n        return new HelloService();\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#4","title":"4\u3001\u914d\u7f6e\u6587\u4ef6\u5360\u4f4d\u7b26","text":""},{"location":"Java/SpringBoot/SpringBoot/#1_3","title":"1\u3001\u968f\u673a\u6570","text":"<pre><code>${random.value}\u3001${random.int}\u3001${random.long}\n${random.int(10)}\u3001${random.int[1024,65536]}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#2_4","title":"2\u3001\u5360\u4f4d\u7b26\u83b7\u53d6\u4e4b\u524d\u914d\u7f6e\u7684\u503c\uff0c\u5982\u679c\u6ca1\u6709\u53ef\u4ee5\u662f\u7528:\u6307\u5b9a\u9ed8\u8ba4\u503c","text":"<pre><code>person.last-name=\u5f20\u4e09${random.uuid}\nperson.age=${random.int}\nperson.birth=2017/12/15\nperson.boss=false\nperson.maps.k1=v1\nperson.maps.k2=14\nperson.lists=a,b,c\nperson.dog.name=${person.hello:hello}_dog\nperson.dog.age=15\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#5profile","title":"5\u3001Profile","text":""},{"location":"Java/SpringBoot/SpringBoot/#1profile","title":"1\u3001\u591aProfile\u6587\u4ef6","text":"<p>\u6211\u4eec\u5728\u4e3b\u914d\u7f6e\u6587\u4ef6\u7f16\u5199\u7684\u65f6\u5019\uff0c\u6587\u4ef6\u540d\u53ef\u4ee5\u662f   application-{profile}.properties/yml</p> <p>\u9ed8\u8ba4\u4f7f\u7528application.properties\u7684\u914d\u7f6e\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#2yml","title":"2\u3001yml\u652f\u6301\u591a\u6587\u6863\u5757\u65b9\u5f0f","text":"<pre><code>server:\n  port: 8081\nspring:\n  profiles:\n    active: prod\n\n---\nserver:\n  port: 8083\nspring:\n  profiles: dev\n\n\n---\n\nserver:\n  port: 8084\nspring:\n  profiles: prod  #\u6307\u5b9a\u5c5e\u4e8e\u54ea\u4e2a\u73af\u5883\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#3profile","title":"3\u3001\u6fc0\u6d3b\u6307\u5b9aprofile","text":"<p>\u200b   1\u3001\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a  spring.profiles.active=dev</p> <p>\u200b   2\u3001\u547d\u4ee4\u884c\uff1a</p> <p>\u200b       java -jar spring-boot-02-config-0.0.1-SNAPSHOT.jar --spring.profiles.active=dev\uff1b</p> <p>\u200b       \u53ef\u4ee5\u76f4\u63a5\u5728\u6d4b\u8bd5\u7684\u65f6\u5019\uff0c\u914d\u7f6e\u4f20\u5165\u547d\u4ee4\u884c\u53c2\u6570</p> <p>\u200b   3\u3001\u865a\u62df\u673a\u53c2\u6570\uff1b</p> <p>\u200b       -Dspring.profiles.active=dev</p>"},{"location":"Java/SpringBoot/SpringBoot/#6_1","title":"6\u3001\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u4f4d\u7f6e","text":"<p>springboot \u542f\u52a8\u4f1a\u626b\u63cf\u4ee5\u4e0b\u4f4d\u7f6e\u7684application.properties\u6216\u8005application.yml\u6587\u4ef6\u4f5c\u4e3aSpring boot\u7684\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6</p> <p>\u2013file:./config/</p> <p>\u2013file:./</p> <p>\u2013classpath:/config/</p> <p>\u2013classpath:/</p> <p>\u4f18\u5148\u7ea7\u7531\u9ad8\u5230\u5e95\uff0c\u9ad8\u4f18\u5148\u7ea7\u7684\u914d\u7f6e\u4f1a\u8986\u76d6\u4f4e\u4f18\u5148\u7ea7\u7684\u914d\u7f6e\uff1b</p> <p>SpringBoot\u4f1a\u4ece\u8fd9\u56db\u4e2a\u4f4d\u7f6e\u5168\u90e8\u52a0\u8f7d\u4e3b\u914d\u7f6e\u6587\u4ef6\uff1b\u4e92\u8865\u914d\u7f6e\uff1b</p> <p>==\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7spring.config.location\u6765\u6539\u53d8\u9ed8\u8ba4\u7684\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e==</p> <p>\u9879\u76ee\u6253\u5305\u597d\u4ee5\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u884c\u53c2\u6570\u7684\u5f62\u5f0f\uff0c\u542f\u52a8\u9879\u76ee\u7684\u65f6\u5019\u6765\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u7684\u65b0\u4f4d\u7f6e\uff1b\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u548c\u9ed8\u8ba4\u52a0\u8f7d\u7684\u8fd9\u4e9b\u914d\u7f6e\u6587\u4ef6\u5171\u540c\u8d77\u4f5c\u7528\u5f62\u6210\u4e92\u8865\u914d\u7f6e\uff1b</p> <p>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar --spring.config.location=G:/application.properties</p>"},{"location":"Java/SpringBoot/SpringBoot/#7","title":"7\u3001\u5916\u90e8\u914d\u7f6e\u52a0\u8f7d\u987a\u5e8f","text":"<p>==SpringBoot\u4e5f\u53ef\u4ee5\u4ece\u4ee5\u4e0b\u4f4d\u7f6e\u52a0\u8f7d\u914d\u7f6e\uff1b \u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\uff1b\u9ad8\u4f18\u5148\u7ea7\u7684\u914d\u7f6e\u8986\u76d6\u4f4e\u4f18\u5148\u7ea7\u7684\u914d\u7f6e\uff0c\u6240\u6709\u7684\u914d\u7f6e\u4f1a\u5f62\u6210\u4e92\u8865\u914d\u7f6e==</p> <p>1.\u547d\u4ee4\u884c\u53c2\u6570</p> <p>\u6240\u6709\u7684\u914d\u7f6e\u90fd\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u4e0a\u8fdb\u884c\u6307\u5b9a</p> <p>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar --server.port=8087  --server.context-path=/abc</p> <p>\u591a\u4e2a\u914d\u7f6e\u7528\u7a7a\u683c\u5206\u5f00\uff1b --\u914d\u7f6e\u9879=\u503c</p> <p>2.\u6765\u81eajava:comp/env\u7684JNDI\u5c5e\u6027</p> <p>3.Java\u7cfb\u7edf\u5c5e\u6027\uff08System.getProperties()\uff09</p> <p>4.\u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\u53d8\u91cf</p> <p>5.RandomValuePropertySource\u914d\u7f6e\u7684random.*\u5c5e\u6027\u503c</p> <p>==\u7531jar\u5305\u5916\u5411jar\u5305\u5185\u8fdb\u884c\u5bfb\u627e\uff1b==</p> <p>==\u4f18\u5148\u52a0\u8f7d\u5e26profile==</p> <p>6.jar\u5305\u5916\u90e8\u7684application-{profile}.properties\u6216application.yml(\u5e26spring.profile)\u914d\u7f6e\u6587\u4ef6</p> <p>7.jar\u5305\u5185\u90e8\u7684application-{profile}.properties\u6216application.yml(\u5e26spring.profile)\u914d\u7f6e\u6587\u4ef6</p> <p>==\u518d\u6765\u52a0\u8f7d\u4e0d\u5e26profile==</p> <p>8.jar\u5305\u5916\u90e8\u7684application.properties\u6216application.yml(\u4e0d\u5e26spring.profile)\u914d\u7f6e\u6587\u4ef6</p> <p>9.jar\u5305\u5185\u90e8\u7684application.properties\u6216application.yml(\u4e0d\u5e26spring.profile)\u914d\u7f6e\u6587\u4ef6</p> <p>10.@Configuration\u6ce8\u89e3\u7c7b\u4e0a\u7684@PropertySource</p> <p>11.\u901a\u8fc7SpringApplication.setDefaultProperties\u6307\u5b9a\u7684\u9ed8\u8ba4\u5c5e\u6027</p> <p>\u6240\u6709\u652f\u6301\u7684\u914d\u7f6e\u52a0\u8f7d\u6765\u6e90\uff1b</p> <p>\u53c2\u8003\u5b98\u65b9\u6587\u6863</p>"},{"location":"Java/SpringBoot/SpringBoot/#8","title":"8\u3001\u81ea\u52a8\u914d\u7f6e\u539f\u7406","text":"<p>\u914d\u7f6e\u6587\u4ef6\u5230\u5e95\u80fd\u5199\u4ec0\u4e48\uff1f\u600e\u4e48\u5199\uff1f\u81ea\u52a8\u914d\u7f6e\u539f\u7406\uff1b</p> <p>\u914d\u7f6e\u6587\u4ef6\u80fd\u914d\u7f6e\u7684\u5c5e\u6027\u53c2\u7167</p>"},{"location":"Java/SpringBoot/SpringBoot/#1_4","title":"1\u3001\u81ea\u52a8\u914d\u7f6e\u539f\u7406\uff1a","text":"<p>1\uff09\u3001SpringBoot\u542f\u52a8\u7684\u65f6\u5019\u52a0\u8f7d\u4e3b\u914d\u7f6e\u7c7b\uff0c\u5f00\u542f\u4e86\u81ea\u52a8\u914d\u7f6e\u529f\u80fd ==@EnableAutoConfiguration==</p> <p>2\uff09\u3001@EnableAutoConfiguration \u4f5c\u7528\uff1a</p> <ul> <li> <p>\u5229\u7528EnableAutoConfigurationImportSelector\u7ed9\u5bb9\u5668\u4e2d\u5bfc\u5165\u4e00\u4e9b\u7ec4\u4ef6\uff1f</p> </li> <li> <p>\u53ef\u4ee5\u67e5\u770bselectImports()\u65b9\u6cd5\u7684\u5185\u5bb9\uff1b</p> </li> <li> <p>List configurations = getCandidateConfigurations(annotationMetadata,      attributes);\u83b7\u53d6\u5019\u9009\u7684\u914d\u7f6e <li> <p>```java     SpringFactoriesLoader.loadFactoryNames()     \u626b\u63cf\u6240\u6709jar\u5305\u7c7b\u8def\u5f84\u4e0b  META-INF/spring.factories     \u628a\u626b\u63cf\u5230\u7684\u8fd9\u4e9b\u6587\u4ef6\u7684\u5185\u5bb9\u5305\u88c5\u6210properties\u5bf9\u8c61     \u4eceproperties\u4e2d\u83b7\u53d6\u5230EnableAutoConfiguration.class\u7c7b\uff08\u7c7b\u540d\uff09\u5bf9\u5e94\u7684\u503c\uff0c\u7136\u540e\u628a\u4ed6\u4eec\u6dfb\u52a0\u5728\u5bb9\u5668\u4e2d</p> <p>```</p> <p>\u200b</p> </li> <p>==\u5c06 \u7c7b\u8def\u5f84\u4e0b  META-INF/spring.factories \u91cc\u9762\u914d\u7f6e\u7684\u6240\u6709EnableAutoConfiguration\u7684\u503c\u52a0\u5165\u5230\u4e86\u5bb9\u5668\u4e2d\uff1b==</p> <pre><code># Auto Configure\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\norg.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\\\norg.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\\\norg.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\\\norg.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\\\norg.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\\\norg.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\\\norg.springframework.boot.autoconfigure.cloud.CloudAutoConfiguration,\\\norg.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\\\norg.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\\\norg.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\\\norg.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\\\norg.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.ldap.LdapDataAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\\\norg.springframework.boot.autoconfigure.elasticsearch.jest.JestAutoConfiguration,\\\norg.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\\\norg.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\\\norg.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\\\norg.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\\\norg.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\\\norg.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\\\norg.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\\\norg.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\\\norg.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\\\norg.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\\\norg.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\\\norg.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\\\norg.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\\\norg.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\\\norg.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\\\norg.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\\\norg.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\\\norg.springframework.boot.autoconfigure.mobile.DeviceResolverAutoConfiguration,\\\norg.springframework.boot.autoconfigure.mobile.DeviceDelegatingViewResolverAutoConfiguration,\\\norg.springframework.boot.autoconfigure.mobile.SitePreferenceAutoConfiguration,\\\norg.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\\\norg.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\\\norg.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\\\norg.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\\\norg.springframework.boot.autoconfigure.reactor.ReactorAutoConfiguration,\\\norg.springframework.boot.autoconfigure.security.SecurityAutoConfiguration,\\\norg.springframework.boot.autoconfigure.security.SecurityFilterAutoConfiguration,\\\norg.springframework.boot.autoconfigure.security.FallbackWebSecurityAutoConfiguration,\\\norg.springframework.boot.autoconfigure.security.oauth2.OAuth2AutoConfiguration,\\\norg.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\\\norg.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\\\norg.springframework.boot.autoconfigure.social.SocialWebAutoConfiguration,\\\norg.springframework.boot.autoconfigure.social.FacebookAutoConfiguration,\\\norg.springframework.boot.autoconfigure.social.LinkedInAutoConfiguration,\\\norg.springframework.boot.autoconfigure.social.TwitterAutoConfiguration,\\\norg.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\\\norg.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\\\norg.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\\\norg.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\\\norg.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\\\norg.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration,\\\norg.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration,\\\norg.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration,\\\norg.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration,\\\norg.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration,\\\norg.springframework.boot.autoconfigure.web.MultipartAutoConfiguration,\\\norg.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration,\\\norg.springframework.boot.autoconfigure.web.WebClientAutoConfiguration,\\\norg.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration,\\\norg.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration,\\\norg.springframework.boot.autoconfigure.websocket.WebSocketMessagingAutoConfiguration,\\\norg.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration\n</code></pre> <p>\u6bcf\u4e00\u4e2a\u8fd9\u6837\u7684  xxxAutoConfiguration\u7c7b\u90fd\u662f\u5bb9\u5668\u4e2d\u7684\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u90fd\u52a0\u5165\u5230\u5bb9\u5668\u4e2d\uff1b\u7528\u4ed6\u4eec\u6765\u505a\u81ea\u52a8\u914d\u7f6e\uff1b</p> <p>3\uff09\u3001\u6bcf\u4e00\u4e2a\u81ea\u52a8\u914d\u7f6e\u7c7b\u8fdb\u884c\u81ea\u52a8\u914d\u7f6e\u529f\u80fd\uff1b</p> <p>4\uff09\u3001\u4ee5HttpEncodingAutoConfiguration\uff08Http\u7f16\u7801\u81ea\u52a8\u914d\u7f6e\uff09\u4e3a\u4f8b\u89e3\u91ca\u81ea\u52a8\u914d\u7f6e\u539f\u7406\uff1b</p> <pre><code>@Configuration   //\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u914d\u7f6e\u7c7b\uff0c\u4ee5\u524d\u7f16\u5199\u7684\u914d\u7f6e\u6587\u4ef6\u4e00\u6837\uff0c\u4e5f\u53ef\u4ee5\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u7ec4\u4ef6\n@EnableConfigurationProperties(HttpEncodingProperties.class)  //\u542f\u52a8\u6307\u5b9a\u7c7b\u7684ConfigurationProperties\u529f\u80fd\uff1b\u5c06\u914d\u7f6e\u6587\u4ef6\u4e2d\u5bf9\u5e94\u7684\u503c\u548cHttpEncodingProperties\u7ed1\u5b9a\u8d77\u6765\uff1b\u5e76\u628aHttpEncodingProperties\u52a0\u5165\u5230ioc\u5bb9\u5668\u4e2d\n\n@ConditionalOnWebApplication //Spring\u5e95\u5c42@Conditional\u6ce8\u89e3\uff08Spring\u6ce8\u89e3\u7248\uff09\uff0c\u6839\u636e\u4e0d\u540c\u7684\u6761\u4ef6\uff0c\u5982\u679c\u6ee1\u8db3\u6307\u5b9a\u7684\u6761\u4ef6\uff0c\u6574\u4e2a\u914d\u7f6e\u7c7b\u91cc\u9762\u7684\u914d\u7f6e\u5c31\u4f1a\u751f\u6548\uff1b    \u5224\u65ad\u5f53\u524d\u5e94\u7528\u662f\u5426\u662fweb\u5e94\u7528\uff0c\u5982\u679c\u662f\uff0c\u5f53\u524d\u914d\u7f6e\u7c7b\u751f\u6548\n\n@ConditionalOnClass(CharacterEncodingFilter.class)  //\u5224\u65ad\u5f53\u524d\u9879\u76ee\u6709\u6ca1\u6709\u8fd9\u4e2a\u7c7bCharacterEncodingFilter\uff1bSpringMVC\u4e2d\u8fdb\u884c\u4e71\u7801\u89e3\u51b3\u7684\u8fc7\u6ee4\u5668\uff1b\n\n@ConditionalOnProperty(prefix = \"spring.http.encoding\", value = \"enabled\", matchIfMissing = true)  //\u5224\u65ad\u914d\u7f6e\u6587\u4ef6\u4e2d\u662f\u5426\u5b58\u5728\u67d0\u4e2a\u914d\u7f6e  spring.http.encoding.enabled\uff1b\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5224\u65ad\u4e5f\u662f\u6210\u7acb\u7684\n//\u5373\u4f7f\u6211\u4eec\u914d\u7f6e\u6587\u4ef6\u4e2d\u4e0d\u914d\u7f6epring.http.encoding.enabled=true\uff0c\u4e5f\u662f\u9ed8\u8ba4\u751f\u6548\u7684\uff1b\npublic class HttpEncodingAutoConfiguration {\n\n    //\u4ed6\u5df2\u7ecf\u548cSpringBoot\u7684\u914d\u7f6e\u6587\u4ef6\u6620\u5c04\u4e86\n    private final HttpEncodingProperties properties;\n\n   //\u53ea\u6709\u4e00\u4e2a\u6709\u53c2\u6784\u9020\u5668\u7684\u60c5\u51b5\u4e0b\uff0c\u53c2\u6570\u7684\u503c\u5c31\u4f1a\u4ece\u5bb9\u5668\u4e2d\u62ff\n    public HttpEncodingAutoConfiguration(HttpEncodingProperties properties) {\n        this.properties = properties;\n    }\n\n    @Bean   //\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u7ec4\u4ef6\u7684\u67d0\u4e9b\u503c\u9700\u8981\u4eceproperties\u4e2d\u83b7\u53d6\n    @ConditionalOnMissingBean(CharacterEncodingFilter.class) //\u5224\u65ad\u5bb9\u5668\u6ca1\u6709\u8fd9\u4e2a\u7ec4\u4ef6\uff1f\n    public CharacterEncodingFilter characterEncodingFilter() {\n        CharacterEncodingFilter filter = new OrderedCharacterEncodingFilter();\n        filter.setEncoding(this.properties.getCharset().name());\n        filter.setForceRequestEncoding(this.properties.shouldForce(Type.REQUEST));\n        filter.setForceResponseEncoding(this.properties.shouldForce(Type.RESPONSE));\n        return filter;\n    }\n</code></pre> <p>\u6839\u636e\u5f53\u524d\u4e0d\u540c\u7684\u6761\u4ef6\u5224\u65ad\uff0c\u51b3\u5b9a\u8fd9\u4e2a\u914d\u7f6e\u7c7b\u662f\u5426\u751f\u6548\uff1f</p> <p>\u4e00\u4f46\u8fd9\u4e2a\u914d\u7f6e\u7c7b\u751f\u6548\uff1b\u8fd9\u4e2a\u914d\u7f6e\u7c7b\u5c31\u4f1a\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u5404\u79cd\u7ec4\u4ef6\uff1b\u8fd9\u4e9b\u7ec4\u4ef6\u7684\u5c5e\u6027\u662f\u4ece\u5bf9\u5e94\u7684properties\u7c7b\u4e2d\u83b7\u53d6\u7684\uff0c\u8fd9\u4e9b\u7c7b\u91cc\u9762\u7684\u6bcf\u4e00\u4e2a\u5c5e\u6027\u53c8\u662f\u548c\u914d\u7f6e\u6587\u4ef6\u7ed1\u5b9a\u7684\uff1b</p> <p>5\uff09\u3001\u6240\u6709\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u80fd\u914d\u7f6e\u7684\u5c5e\u6027\u90fd\u662f\u5728xxxxProperties\u7c7b\u4e2d\u5c01\u88c5\u8005\u2018\uff1b\u914d\u7f6e\u6587\u4ef6\u80fd\u914d\u7f6e\u4ec0\u4e48\u5c31\u53ef\u4ee5\u53c2\u7167\u67d0\u4e2a\u529f\u80fd\u5bf9\u5e94\u7684\u8fd9\u4e2a\u5c5e\u6027\u7c7b</p> <pre><code>@ConfigurationProperties(prefix = \"spring.http.encoding\")  //\u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u83b7\u53d6\u6307\u5b9a\u7684\u503c\u548cbean\u7684\u5c5e\u6027\u8fdb\u884c\u7ed1\u5b9a\npublic class HttpEncodingProperties {\n\n   public static final Charset DEFAULT_CHARSET = Charset.forName(\"UTF-8\");\n</code></pre> <p>\u7cbe\u9ad3\uff1a</p> <p>\u200b   1\uff09\u3001SpringBoot\u542f\u52a8\u4f1a\u52a0\u8f7d\u5927\u91cf\u7684\u81ea\u52a8\u914d\u7f6e\u7c7b</p> <p>\u200b   2\uff09\u3001\u6211\u4eec\u770b\u6211\u4eec\u9700\u8981\u7684\u529f\u80fd\u6709\u6ca1\u6709SpringBoot\u9ed8\u8ba4\u5199\u597d\u7684\u81ea\u52a8\u914d\u7f6e\u7c7b\uff1b</p> <p>\u200b   3\uff09\u3001\u6211\u4eec\u518d\u6765\u770b\u8fd9\u4e2a\u81ea\u52a8\u914d\u7f6e\u7c7b\u4e2d\u5230\u5e95\u914d\u7f6e\u4e86\u54ea\u4e9b\u7ec4\u4ef6\uff1b\uff08\u53ea\u8981\u6211\u4eec\u8981\u7528\u7684\u7ec4\u4ef6\u6709\uff0c\u6211\u4eec\u5c31\u4e0d\u9700\u8981\u518d\u6765\u914d\u7f6e\u4e86\uff09</p> <p>\u200b   4\uff09\u3001\u7ed9\u5bb9\u5668\u4e2d\u81ea\u52a8\u914d\u7f6e\u7c7b\u6dfb\u52a0\u7ec4\u4ef6\u7684\u65f6\u5019\uff0c\u4f1a\u4eceproperties\u7c7b\u4e2d\u83b7\u53d6\u67d0\u4e9b\u5c5e\u6027\u3002\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u8fd9\u4e9b\u5c5e\u6027\u7684\u503c\uff1b</p> <p>xxxxAutoConfigurartion\uff1a\u81ea\u52a8\u914d\u7f6e\u7c7b\uff1b</p> <p>\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u7ec4\u4ef6</p> <p>xxxxProperties:\u5c01\u88c5\u914d\u7f6e\u6587\u4ef6\u4e2d\u76f8\u5173\u5c5e\u6027\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#2_5","title":"2\u3001\u7ec6\u8282","text":""},{"location":"Java/SpringBoot/SpringBoot/#1conditionalspringconditional","title":"1\u3001@Conditional\u6d3e\u751f\u6ce8\u89e3\uff08Spring\u6ce8\u89e3\u7248\u539f\u751f\u7684@Conditional\u4f5c\u7528\uff09","text":"<p>\u4f5c\u7528\uff1a\u5fc5\u987b\u662f@Conditional\u6307\u5b9a\u7684\u6761\u4ef6\u6210\u7acb\uff0c\u624d\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u7ec4\u4ef6\uff0c\u914d\u7f6e\u914d\u91cc\u9762\u7684\u6240\u6709\u5185\u5bb9\u624d\u751f\u6548\uff1b</p> @Conditional\u6269\u5c55\u6ce8\u89e3 \u4f5c\u7528\uff08\u5224\u65ad\u662f\u5426\u6ee1\u8db3\u5f53\u524d\u6307\u5b9a\u6761\u4ef6\uff09 @ConditionalOnJava \u7cfb\u7edf\u7684java\u7248\u672c\u662f\u5426\u7b26\u5408\u8981\u6c42 @ConditionalOnBean \u5bb9\u5668\u4e2d\u5b58\u5728\u6307\u5b9aBean\uff1b @ConditionalOnMissingBean \u5bb9\u5668\u4e2d\u4e0d\u5b58\u5728\u6307\u5b9aBean\uff1b @ConditionalOnExpression \u6ee1\u8db3SpEL\u8868\u8fbe\u5f0f\u6307\u5b9a @ConditionalOnClass \u7cfb\u7edf\u4e2d\u6709\u6307\u5b9a\u7684\u7c7b @ConditionalOnMissingClass \u7cfb\u7edf\u4e2d\u6ca1\u6709\u6307\u5b9a\u7684\u7c7b @ConditionalOnSingleCandidate \u5bb9\u5668\u4e2d\u53ea\u6709\u4e00\u4e2a\u6307\u5b9a\u7684Bean\uff0c\u6216\u8005\u8fd9\u4e2aBean\u662f\u9996\u9009Bean @ConditionalOnProperty \u7cfb\u7edf\u4e2d\u6307\u5b9a\u7684\u5c5e\u6027\u662f\u5426\u6709\u6307\u5b9a\u7684\u503c @ConditionalOnResource \u7c7b\u8def\u5f84\u4e0b\u662f\u5426\u5b58\u5728\u6307\u5b9a\u8d44\u6e90\u6587\u4ef6 @ConditionalOnWebApplication \u5f53\u524d\u662fweb\u73af\u5883 @ConditionalOnNotWebApplication \u5f53\u524d\u4e0d\u662fweb\u73af\u5883 @ConditionalOnJndi JNDI\u5b58\u5728\u6307\u5b9a\u9879 <p>\u81ea\u52a8\u914d\u7f6e\u7c7b\u5fc5\u987b\u5728\u4e00\u5b9a\u7684\u6761\u4ef6\u4e0b\u624d\u80fd\u751f\u6548\uff1b</p> <p>\u6211\u4eec\u600e\u4e48\u77e5\u9053\u54ea\u4e9b\u81ea\u52a8\u914d\u7f6e\u7c7b\u751f\u6548\uff1b</p> <p>==\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u542f\u7528  debug=true\u5c5e\u6027\uff1b\u6765\u8ba9\u63a7\u5236\u53f0\u6253\u5370\u81ea\u52a8\u914d\u7f6e\u62a5\u544a==\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u77e5\u9053\u54ea\u4e9b\u81ea\u52a8\u914d\u7f6e\u7c7b\u751f\u6548\uff1b</p> <pre><code>=========================\nAUTO-CONFIGURATION REPORT\n=========================\n\n\nPositive matches:\uff08\u81ea\u52a8\u914d\u7f6e\u7c7b\u542f\u7528\u7684\uff09\n-----------------\n\n   DispatcherServletAutoConfiguration matched:\n      - @ConditionalOnClass found required class 'org.springframework.web.servlet.DispatcherServlet'; @ConditionalOnMissingClass did not find unwanted class (OnClassCondition)\n      - @ConditionalOnWebApplication (required) found StandardServletEnvironment (OnWebApplicationCondition)\n\n\nNegative matches:\uff08\u6ca1\u6709\u542f\u52a8\uff0c\u6ca1\u6709\u5339\u914d\u6210\u529f\u7684\u81ea\u52a8\u914d\u7f6e\u7c7b\uff09\n-----------------\n\n   ActiveMQAutoConfiguration:\n      Did not match:\n         - @ConditionalOnClass did not find required classes 'javax.jms.ConnectionFactory', 'org.apache.activemq.ActiveMQConnectionFactory' (OnClassCondition)\n\n   AopAutoConfiguration:\n      Did not match:\n         - @ConditionalOnClass did not find required classes 'org.aspectj.lang.annotation.Aspect', 'org.aspectj.lang.reflect.Advice' (OnClassCondition)\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#_3","title":"\u4e09\u3001\u65e5\u5fd7","text":""},{"location":"Java/SpringBoot/SpringBoot/#1_5","title":"1\u3001\u65e5\u5fd7\u6846\u67b6","text":"<p>\u5c0f\u5f20\uff1b\u5f00\u53d1\u4e00\u4e2a\u5927\u578b\u7cfb\u7edf\uff1b</p> <p>\u200b       1\u3001System.out.println(\"\")\uff1b\u5c06\u5173\u952e\u6570\u636e\u6253\u5370\u5728\u63a7\u5236\u53f0\uff1b\u53bb\u6389\uff1f\u5199\u5728\u4e00\u4e2a\u6587\u4ef6\uff1f</p> <p>\u200b       2\u3001\u6846\u67b6\u6765\u8bb0\u5f55\u7cfb\u7edf\u7684\u4e00\u4e9b\u8fd0\u884c\u65f6\u4fe1\u606f\uff1b\u65e5\u5fd7\u6846\u67b6 \uff1b  zhanglogging.jar\uff1b</p> <p>\u200b       3\u3001\u9ad8\u5927\u4e0a\u7684\u51e0\u4e2a\u529f\u80fd\uff1f\u5f02\u6b65\u6a21\u5f0f\uff1f\u81ea\u52a8\u5f52\u6863\uff1fxxxx\uff1f  zhanglogging-good.jar\uff1f</p> <p>\u200b       4\u3001\u5c06\u4ee5\u524d\u6846\u67b6\u5378\u4e0b\u6765\uff1f\u6362\u4e0a\u65b0\u7684\u6846\u67b6\uff0c\u91cd\u65b0\u4fee\u6539\u4e4b\u524d\u76f8\u5173\u7684API\uff1bzhanglogging-prefect.jar\uff1b</p> <p>\u200b       5\u3001JDBC---\u6570\u636e\u5e93\u9a71\u52a8\uff1b</p> <p>\u200b           \u5199\u4e86\u4e00\u4e2a\u7edf\u4e00\u7684\u63a5\u53e3\u5c42\uff1b\u65e5\u5fd7\u95e8\u9762\uff08\u65e5\u5fd7\u7684\u4e00\u4e2a\u62bd\u8c61\u5c42\uff09\uff1blogging-abstract.jar\uff1b</p> <p>\u200b           \u7ed9\u9879\u76ee\u4e2d\u5bfc\u5165\u5177\u4f53\u7684\u65e5\u5fd7\u5b9e\u73b0\u5c31\u884c\u4e86\uff1b\u6211\u4eec\u4e4b\u524d\u7684\u65e5\u5fd7\u6846\u67b6\u90fd\u662f\u5b9e\u73b0\u7684\u62bd\u8c61\u5c42\uff1b</p> <p>\u5e02\u9762\u4e0a\u7684\u65e5\u5fd7\u6846\u67b6\uff1b</p> <p>JUL\u3001JCL\u3001Jboss-logging\u3001logback\u3001log4j\u3001log4j2\u3001slf4j....</p> \u65e5\u5fd7\u95e8\u9762  \uff08\u65e5\u5fd7\u7684\u62bd\u8c61\u5c42\uff09 \u65e5\u5fd7\u5b9e\u73b0 ~~JCL\uff08Jakarta  Commons Logging\uff09~~    SLF4j\uff08Simple  Logging Facade for Java\uff09    ~~jboss-logging~~ Log4j  JUL\uff08java.util.logging\uff09  Log4j2  Logback <p>\u5de6\u8fb9\u9009\u4e00\u4e2a\u95e8\u9762\uff08\u62bd\u8c61\u5c42\uff09\u3001\u53f3\u8fb9\u6765\u9009\u4e00\u4e2a\u5b9e\u73b0\uff1b</p> <p>\u65e5\u5fd7\u95e8\u9762\uff1a  SLF4J\uff1b</p> <p>\u65e5\u5fd7\u5b9e\u73b0\uff1aLogback\uff1b</p> <p>SpringBoot\uff1a\u5e95\u5c42\u662fSpring\u6846\u67b6\uff0cSpring\u6846\u67b6\u9ed8\u8ba4\u662f\u7528JCL\uff1b\u2018</p> <p>\u200b   ==SpringBoot\u9009\u7528 SLF4j\u548clogback\uff1b==</p>"},{"location":"Java/SpringBoot/SpringBoot/#2slf4j","title":"2\u3001SLF4j\u4f7f\u7528","text":""},{"location":"Java/SpringBoot/SpringBoot/#1slf4j-httpswwwslf4jorg","title":"1\u3001\u5982\u4f55\u5728\u7cfb\u7edf\u4e2d\u4f7f\u7528SLF4j   https://www.slf4j.org","text":"<p>\u4ee5\u540e\u5f00\u53d1\u7684\u65f6\u5019\uff0c\u65e5\u5fd7\u8bb0\u5f55\u65b9\u6cd5\u7684\u8c03\u7528\uff0c\u4e0d\u5e94\u8be5\u6765\u76f4\u63a5\u8c03\u7528\u65e5\u5fd7\u7684\u5b9e\u73b0\u7c7b\uff0c\u800c\u662f\u8c03\u7528\u65e5\u5fd7\u62bd\u8c61\u5c42\u91cc\u9762\u7684\u65b9\u6cd5\uff1b</p> <p>\u7ed9\u7cfb\u7edf\u91cc\u9762\u5bfc\u5165slf4j\u7684jar\u548c  logback\u7684\u5b9e\u73b0jar</p> <pre><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class HelloWorld {\n  public static void main(String[] args) {\n    Logger logger = LoggerFactory.getLogger(HelloWorld.class);\n    logger.info(\"Hello World\");\n  }\n}\n</code></pre> <p>\u56fe\u793a\uff1b</p> <p></p> <p>\u6bcf\u4e00\u4e2a\u65e5\u5fd7\u7684\u5b9e\u73b0\u6846\u67b6\u90fd\u6709\u81ea\u5df1\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u4f7f\u7528slf4j\u4ee5\u540e\uff0c\u914d\u7f6e\u6587\u4ef6\u8fd8\u662f\u505a\u6210\u65e5\u5fd7\u5b9e\u73b0\u6846\u67b6\u81ea\u5df1\u672c\u8eab\u7684\u914d\u7f6e\u6587\u4ef6\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#2_6","title":"2\u3001\u9057\u7559\u95ee\u9898","text":"<p>a\uff08slf4j+logback\uff09: Spring\uff08commons-logging\uff09\u3001Hibernate\uff08jboss-logging\uff09\u3001MyBatis\u3001xxxx</p> <p>\u7edf\u4e00\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5373\u4f7f\u662f\u522b\u7684\u6846\u67b6\u548c\u6211\u4e00\u8d77\u7edf\u4e00\u4f7f\u7528slf4j\u8fdb\u884c\u8f93\u51fa\uff1f</p> <p></p> <p>\u5982\u4f55\u8ba9\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u65e5\u5fd7\u90fd\u7edf\u4e00\u5230slf4j\uff1b</p> <p>==1\u3001\u5c06\u7cfb\u7edf\u4e2d\u5176\u4ed6\u65e5\u5fd7\u6846\u67b6\u5148\u6392\u9664\u51fa\u53bb\uff1b==</p> <p>==2\u3001\u7528\u4e2d\u95f4\u5305\u6765\u66ff\u6362\u539f\u6709\u7684\u65e5\u5fd7\u6846\u67b6\uff1b==</p> <p>==3\u3001\u6211\u4eec\u5bfc\u5165slf4j\u5176\u4ed6\u7684\u5b9e\u73b0==</p>"},{"location":"Java/SpringBoot/SpringBoot/#3springboot","title":"3\u3001SpringBoot\u65e5\u5fd7\u5173\u7cfb","text":"<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>SpringBoot\u4f7f\u7528\u5b83\u6765\u505a\u65e5\u5fd7\u529f\u80fd\uff1b</p> <pre><code>    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>\u5e95\u5c42\u4f9d\u8d56\u5173\u7cfb</p> <p></p> <p>\u603b\u7ed3\uff1a</p> <p>\u200b   1\uff09\u3001SpringBoot\u5e95\u5c42\u4e5f\u662f\u4f7f\u7528slf4j+logback\u7684\u65b9\u5f0f\u8fdb\u884c\u65e5\u5fd7\u8bb0\u5f55</p> <p>\u200b   2\uff09\u3001SpringBoot\u4e5f\u628a\u5176\u4ed6\u7684\u65e5\u5fd7\u90fd\u66ff\u6362\u6210\u4e86slf4j\uff1b</p> <p>\u200b   3\uff09\u3001\u4e2d\u95f4\u66ff\u6362\u5305\uff1f</p> <pre><code>@SuppressWarnings(\"rawtypes\")\npublic abstract class LogFactory {\n\n    static String UNSUPPORTED_OPERATION_IN_JCL_OVER_SLF4J = \"http://www.slf4j.org/codes.html#unsupported_operation_in_jcl_over_slf4j\";\n\n    static LogFactory logFactory = new SLF4JLogFactory();\n</code></pre> <p></p> <p>\u200b   4\uff09\u3001\u5982\u679c\u6211\u4eec\u8981\u5f15\u5165\u5176\u4ed6\u6846\u67b6\uff1f\u4e00\u5b9a\u8981\u628a\u8fd9\u4e2a\u6846\u67b6\u7684\u9ed8\u8ba4\u65e5\u5fd7\u4f9d\u8d56\u79fb\u9664\u6389\uff1f</p> <p>\u200b           Spring\u6846\u67b6\u7528\u7684\u662fcommons-logging\uff1b</p> <pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>==SpringBoot\u80fd\u81ea\u52a8\u9002\u914d\u6240\u6709\u7684\u65e5\u5fd7\uff0c\u800c\u4e14\u5e95\u5c42\u4f7f\u7528slf4j+logback\u7684\u65b9\u5f0f\u8bb0\u5f55\u65e5\u5fd7\uff0c\u5f15\u5165\u5176\u4ed6\u6846\u67b6\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u628a\u8fd9\u4e2a\u6846\u67b6\u4f9d\u8d56\u7684\u65e5\u5fd7\u6846\u67b6\u6392\u9664\u6389\u5373\u53ef\uff1b==</p>"},{"location":"Java/SpringBoot/SpringBoot/#4_1","title":"4\u3001\u65e5\u5fd7\u4f7f\u7528\uff1b","text":""},{"location":"Java/SpringBoot/SpringBoot/#1_6","title":"1\u3001\u9ed8\u8ba4\u914d\u7f6e","text":"<p>SpringBoot\u9ed8\u8ba4\u5e2e\u6211\u4eec\u914d\u7f6e\u597d\u4e86\u65e5\u5fd7\uff1b</p> <pre><code>    //\u8bb0\u5f55\u5668\n    Logger logger = LoggerFactory.getLogger(getClass());\n    @Test\n    public void contextLoads() {\n        //System.out.println();\n\n        //\u65e5\u5fd7\u7684\u7ea7\u522b\uff1b\n        //\u7531\u4f4e\u5230\u9ad8   trace&lt;debug&lt;info&lt;warn&lt;error\n        //\u53ef\u4ee5\u8c03\u6574\u8f93\u51fa\u7684\u65e5\u5fd7\u7ea7\u522b\uff1b\u65e5\u5fd7\u5c31\u53ea\u4f1a\u5728\u8fd9\u4e2a\u7ea7\u522b\u4ee5\u4ee5\u540e\u7684\u9ad8\u7ea7\u522b\u751f\u6548\n        logger.trace(\"\u8fd9\u662ftrace\u65e5\u5fd7...\");\n        logger.debug(\"\u8fd9\u662fdebug\u65e5\u5fd7...\");\n        //SpringBoot\u9ed8\u8ba4\u7ed9\u6211\u4eec\u4f7f\u7528\u7684\u662finfo\u7ea7\u522b\u7684\uff0c\u6ca1\u6709\u6307\u5b9a\u7ea7\u522b\u7684\u5c31\u7528SpringBoot\u9ed8\u8ba4\u89c4\u5b9a\u7684\u7ea7\u522b\uff1broot\u7ea7\u522b\n        logger.info(\"\u8fd9\u662finfo\u65e5\u5fd7...\");\n        logger.warn(\"\u8fd9\u662fwarn\u65e5\u5fd7...\");\n        logger.error(\"\u8fd9\u662ferror\u65e5\u5fd7...\");\n\n\n    }\n</code></pre> <pre><code>    \u65e5\u5fd7\u8f93\u51fa\u683c\u5f0f\uff1a\n        %d\u8868\u793a\u65e5\u671f\u65f6\u95f4\uff0c\n        %thread\u8868\u793a\u7ebf\u7a0b\u540d\uff0c\n        %-5level\uff1a\u7ea7\u522b\u4ece\u5de6\u663e\u793a5\u4e2a\u5b57\u7b26\u5bbd\u5ea6\n        %logger{50} \u8868\u793alogger\u540d\u5b57\u6700\u957f50\u4e2a\u5b57\u7b26\uff0c\u5426\u5219\u6309\u7167\u53e5\u70b9\u5206\u5272\u3002 \n        %msg\uff1a\u65e5\u5fd7\u6d88\u606f\uff0c\n        %n\u662f\u6362\u884c\u7b26\n    --&gt;\n    %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n\n</code></pre> <p>SpringBoot\u4fee\u6539\u65e5\u5fd7\u7684\u9ed8\u8ba4\u914d\u7f6e</p> <pre><code>logging.level.com.atguigu=trace\n\n\n#logging.path=\n# \u4e0d\u6307\u5b9a\u8def\u5f84\u5728\u5f53\u524d\u9879\u76ee\u4e0b\u751f\u6210springboot.log\u65e5\u5fd7\n# \u53ef\u4ee5\u6307\u5b9a\u5b8c\u6574\u7684\u8def\u5f84\uff1b\n#logging.file=G:/springboot.log\n\n# \u5728\u5f53\u524d\u78c1\u76d8\u7684\u6839\u8def\u5f84\u4e0b\u521b\u5efaspring\u6587\u4ef6\u5939\u548c\u91cc\u9762\u7684log\u6587\u4ef6\u5939\uff1b\u4f7f\u7528\u00a0spring.log \u4f5c\u4e3a\u9ed8\u8ba4\u6587\u4ef6\nlogging.path=/spring/log\n\n#  \u5728\u63a7\u5236\u53f0\u8f93\u51fa\u7684\u65e5\u5fd7\u7684\u683c\u5f0f\nlogging.pattern.console=%d{yyyy-MM-dd} [%thread] %-5level %logger{50} - %msg%n\n# \u6307\u5b9a\u6587\u4ef6\u4e2d\u65e5\u5fd7\u8f93\u51fa\u7684\u683c\u5f0f\nlogging.pattern.file=%d{yyyy-MM-dd} === [%thread] === %-5level === %logger{50} ==== %msg%n\n</code></pre> logging.file logging.path Example Description (none) (none) \u53ea\u5728\u63a7\u5236\u53f0\u8f93\u51fa \u6307\u5b9a\u6587\u4ef6\u540d (none) my.log \u8f93\u51fa\u65e5\u5fd7\u5230my.log\u6587\u4ef6 (none) \u6307\u5b9a\u76ee\u5f55 /var/log \u8f93\u51fa\u5230\u6307\u5b9a\u76ee\u5f55\u7684 spring.log \u6587\u4ef6\u4e2d"},{"location":"Java/SpringBoot/SpringBoot/#2_7","title":"2\u3001\u6307\u5b9a\u914d\u7f6e","text":"<p>\u7ed9\u7c7b\u8def\u5f84\u4e0b\u653e\u4e0a\u6bcf\u4e2a\u65e5\u5fd7\u6846\u67b6\u81ea\u5df1\u7684\u914d\u7f6e\u6587\u4ef6\u5373\u53ef\uff1bSpringBoot\u5c31\u4e0d\u4f7f\u7528\u4ed6\u9ed8\u8ba4\u914d\u7f6e\u7684\u4e86</p> Logging System Customization Logback <code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code> or <code>logback.groovy</code> Log4j2 <code>log4j2-spring.xml</code> or <code>log4j2.xml</code> JDK (Java Util Logging) <code>logging.properties</code> <p>logback.xml\uff1a\u76f4\u63a5\u5c31\u88ab\u65e5\u5fd7\u6846\u67b6\u8bc6\u522b\u4e86\uff1b</p> <p>logback-spring.xml\uff1a\u65e5\u5fd7\u6846\u67b6\u5c31\u4e0d\u76f4\u63a5\u52a0\u8f7d\u65e5\u5fd7\u7684\u914d\u7f6e\u9879\uff0c\u7531SpringBoot\u89e3\u6790\u65e5\u5fd7\u914d\u7f6e\uff0c\u53ef\u4ee5\u4f7f\u7528SpringBoot\u7684\u9ad8\u7ea7Profile\u529f\u80fd</p> <pre><code>&lt;springProfile name=\"staging\"&gt;\n    &lt;!-- configuration to be enabled when the \"staging\" profile is active --&gt;\n    \u53ef\u4ee5\u6307\u5b9a\u67d0\u6bb5\u914d\u7f6e\u53ea\u5728\u67d0\u4e2a\u73af\u5883\u4e0b\u751f\u6548\n&lt;/springProfile&gt;\n</code></pre> <p>\u5982\uff1a</p> <pre><code>&lt;appender name=\"stdout\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;!--\n        \u65e5\u5fd7\u8f93\u51fa\u683c\u5f0f\uff1a\n            %d\u8868\u793a\u65e5\u671f\u65f6\u95f4\uff0c\n            %thread\u8868\u793a\u7ebf\u7a0b\u540d\uff0c\n            %-5level\uff1a\u7ea7\u522b\u4ece\u5de6\u663e\u793a5\u4e2a\u5b57\u7b26\u5bbd\u5ea6\n            %logger{50} \u8868\u793alogger\u540d\u5b57\u6700\u957f50\u4e2a\u5b57\u7b26\uff0c\u5426\u5219\u6309\u7167\u53e5\u70b9\u5206\u5272\u3002 \n            %msg\uff1a\u65e5\u5fd7\u6d88\u606f\uff0c\n            %n\u662f\u6362\u884c\u7b26\n        --&gt;\n        &lt;layout class=\"ch.qos.logback.classic.PatternLayout\"&gt;\n            &lt;springProfile name=\"dev\"&gt;\n                &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} ----&gt; [%thread] ---&gt; %-5level %logger{50} - %msg%n&lt;/pattern&gt;\n            &lt;/springProfile&gt;\n            &lt;springProfile name=\"!dev\"&gt;\n                &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} ==== [%thread] ==== %-5level %logger{50} - %msg%n&lt;/pattern&gt;\n            &lt;/springProfile&gt;\n        &lt;/layout&gt;\n    &lt;/appender&gt;\n</code></pre> <p>\u5982\u679c\u4f7f\u7528logback.xml\u4f5c\u4e3a\u65e5\u5fd7\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd8\u8981\u4f7f\u7528profile\u529f\u80fd\uff0c\u4f1a\u6709\u4ee5\u4e0b\u9519\u8bef</p> <p><code>no applicable action for [springProfile]</code></p>"},{"location":"Java/SpringBoot/SpringBoot/#5_1","title":"5\u3001\u5207\u6362\u65e5\u5fd7\u6846\u67b6","text":"<p>\u53ef\u4ee5\u6309\u7167slf4j\u7684\u65e5\u5fd7\u9002\u914d\u56fe\uff0c\u8fdb\u884c\u76f8\u5173\u7684\u5207\u6362\uff1b</p> <p>slf4j+log4j\u7684\u65b9\u5f0f\uff1b</p> <pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n  &lt;exclusions&gt;\n    &lt;exclusion&gt;\n      &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n      &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n    &lt;/exclusion&gt;\n    &lt;exclusion&gt;\n      &lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;\n      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;/exclusion&gt;\n  &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n  &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre> <p>\u5207\u6362\u4e3alog4j2</p> <pre><code>   &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#web","title":"\u56db\u3001Web\u5f00\u53d1","text":""},{"location":"Java/SpringBoot/SpringBoot/#1_7","title":"1\u3001\u7b80\u4ecb","text":"<p>\u4f7f\u7528SpringBoot\uff1b</p> <p>1\uff09\u3001\u521b\u5efaSpringBoot\u5e94\u7528\uff0c\u9009\u4e2d\u6211\u4eec\u9700\u8981\u7684\u6a21\u5757\uff1b</p> <p>2\uff09\u3001SpringBoot\u5df2\u7ecf\u9ed8\u8ba4\u5c06\u8fd9\u4e9b\u573a\u666f\u914d\u7f6e\u597d\u4e86\uff0c\u53ea\u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u5c11\u91cf\u914d\u7f6e\u5c31\u53ef\u4ee5\u8fd0\u884c\u8d77\u6765</p> <p>3\uff09\u3001\u81ea\u5df1\u7f16\u5199\u4e1a\u52a1\u4ee3\u7801\uff1b</p> <p>\u81ea\u52a8\u914d\u7f6e\u539f\u7406\uff1f</p> <p>\u8fd9\u4e2a\u573a\u666fSpringBoot\u5e2e\u6211\u4eec\u914d\u7f6e\u4e86\u4ec0\u4e48\uff1f\u80fd\u4e0d\u80fd\u4fee\u6539\uff1f\u80fd\u4fee\u6539\u54ea\u4e9b\u914d\u7f6e\uff1f\u80fd\u4e0d\u80fd\u6269\u5c55\uff1fxxx</p> <pre><code>xxxxAutoConfiguration\uff1a\u5e2e\u6211\u4eec\u7ed9\u5bb9\u5668\u4e2d\u81ea\u52a8\u914d\u7f6e\u7ec4\u4ef6\uff1b\nxxxxProperties:\u914d\u7f6e\u7c7b\u6765\u5c01\u88c5\u914d\u7f6e\u6587\u4ef6\u7684\u5185\u5bb9\uff1b\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#2springboot","title":"2\u3001SpringBoot\u5bf9\u9759\u6001\u8d44\u6e90\u7684\u6620\u5c04\u89c4\u5219\uff1b","text":"<pre><code>@ConfigurationProperties(prefix = \"spring.resources\", ignoreUnknownFields = false)\npublic class ResourceProperties implements ResourceLoaderAware {\n  //\u53ef\u4ee5\u8bbe\u7f6e\u548c\u9759\u6001\u8d44\u6e90\u6709\u5173\u7684\u53c2\u6570\uff0c\u7f13\u5b58\u65f6\u95f4\u7b49\n</code></pre> <pre><code>    WebMvcAuotConfiguration\uff1a\n        @Override\n        public void addResourceHandlers(ResourceHandlerRegistry registry) {\n            if (!this.resourceProperties.isAddMappings()) {\n                logger.debug(\"Default resource handling disabled\");\n                return;\n            }\n            Integer cachePeriod = this.resourceProperties.getCachePeriod();\n            if (!registry.hasMappingForPattern(\"/webjars/**\")) {\n                customizeResourceHandlerRegistration(\n                        registry.addResourceHandler(\"/webjars/**\")\n                                .addResourceLocations(\n                                        \"classpath:/META-INF/resources/webjars/\")\n                        .setCachePeriod(cachePeriod));\n            }\n            String staticPathPattern = this.mvcProperties.getStaticPathPattern();\n            //\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u5939\u6620\u5c04\n            if (!registry.hasMappingForPattern(staticPathPattern)) {\n                customizeResourceHandlerRegistration(\n                        registry.addResourceHandler(staticPathPattern)\n                                .addResourceLocations(\n                                        this.resourceProperties.getStaticLocations())\n                        .setCachePeriod(cachePeriod));\n            }\n        }\n\n        //\u914d\u7f6e\u6b22\u8fce\u9875\u6620\u5c04\n        @Bean\n        public WelcomePageHandlerMapping welcomePageHandlerMapping(\n                ResourceProperties resourceProperties) {\n            return new WelcomePageHandlerMapping(resourceProperties.getWelcomePage(),\n                    this.mvcProperties.getStaticPathPattern());\n        }\n\n       //\u914d\u7f6e\u559c\u6b22\u7684\u56fe\u6807\n        @Configuration\n        @ConditionalOnProperty(value = \"spring.mvc.favicon.enabled\", matchIfMissing = true)\n        public static class FaviconConfiguration {\n\n            private final ResourceProperties resourceProperties;\n\n            public FaviconConfiguration(ResourceProperties resourceProperties) {\n                this.resourceProperties = resourceProperties;\n            }\n\n            @Bean\n            public SimpleUrlHandlerMapping faviconHandlerMapping() {\n                SimpleUrlHandlerMapping mapping = new SimpleUrlHandlerMapping();\n                mapping.setOrder(Ordered.HIGHEST_PRECEDENCE + 1);\n                //\u6240\u6709  **/favicon.ico \n                mapping.setUrlMap(Collections.singletonMap(\"**/favicon.ico\",\n                        faviconRequestHandler()));\n                return mapping;\n            }\n\n            @Bean\n            public ResourceHttpRequestHandler faviconRequestHandler() {\n                ResourceHttpRequestHandler requestHandler = new ResourceHttpRequestHandler();\n                requestHandler\n                        .setLocations(this.resourceProperties.getFaviconLocations());\n                return requestHandler;\n            }\n\n        }\n</code></pre> <p>==1\uff09\u3001\u6240\u6709 /webjars/** \uff0c\u90fd\u53bb classpath:/META-INF/resources/webjars/ \u627e\u8d44\u6e90\uff1b==</p> <p>\u200b   webjars\uff1a\u4ee5jar\u5305\u7684\u65b9\u5f0f\u5f15\u5165\u9759\u6001\u8d44\u6e90\uff1b</p> <p>http://www.webjars.org/</p> <p></p> <p>localhost:8080/webjars/jquery/3.3.1/jquery.js</p> <pre><code>&lt;!--\u5f15\u5165jquery-webjar--&gt;\u5728\u8bbf\u95ee\u7684\u65f6\u5019\u53ea\u9700\u8981\u5199webjars\u4e0b\u9762\u8d44\u6e90\u7684\u540d\u79f0\u5373\u53ef\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;jquery&lt;/artifactId&gt;\n            &lt;version&gt;3.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>==2\uff09\u3001\"/**\" \u8bbf\u95ee\u5f53\u524d\u9879\u76ee\u7684\u4efb\u4f55\u8d44\u6e90\uff0c\u90fd\u53bb\uff08\u9759\u6001\u8d44\u6e90\u7684\u6587\u4ef6\u5939\uff09\u627e\u6620\u5c04==</p> <pre><code>\"classpath:/META-INF/resources/\", \n\"classpath:/resources/\",\n\"classpath:/static/\", \n\"classpath:/public/\" \n\"/\"\uff1a\u5f53\u524d\u9879\u76ee\u7684\u6839\u8def\u5f84\n</code></pre> <p>localhost:8080/abc ===  \u53bb\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u5939\u91cc\u9762\u627eabc</p> <p>==3\uff09\u3001\u6b22\u8fce\u9875\uff1b \u9759\u6001\u8d44\u6e90\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709index.html\u9875\u9762\uff1b\u88ab\"/**\"\u6620\u5c04\uff1b==</p> <p>\u200b   localhost:8080/   \u627eindex\u9875\u9762</p> <p>==4\uff09\u3001\u6240\u6709\u7684 **/favicon.ico  \u90fd\u662f\u5728\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u4e0b\u627e\uff1b==</p>"},{"location":"Java/SpringBoot/SpringBoot/#3_3","title":"3\u3001\u6a21\u677f\u5f15\u64ce","text":"<p>JSP\u3001Velocity\u3001Freemarker\u3001Thymeleaf</p> <p></p> <p>SpringBoot\u63a8\u8350\u7684Thymeleaf\uff1b</p> <p>\u8bed\u6cd5\u66f4\u7b80\u5355\uff0c\u529f\u80fd\u66f4\u5f3a\u5927\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#1thymeleaf","title":"1\u3001\u5f15\u5165thymeleaf\uff1b","text":"<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n            2.1.6\n        &lt;/dependency&gt;\n\u5207\u6362thymeleaf\u7248\u672c\n&lt;properties&gt;\n        &lt;thymeleaf.version&gt;3.0.9.RELEASE&lt;/thymeleaf.version&gt;\n        &lt;!-- \u5e03\u5c40\u529f\u80fd\u7684\u652f\u6301\u7a0b\u5e8f  thymeleaf3\u4e3b\u7a0b\u5e8f  layout2\u4ee5\u4e0a\u7248\u672c --&gt;\n        &lt;!-- thymeleaf2   layout1--&gt;\n        &lt;thymeleaf-layout-dialect.version&gt;2.2.2&lt;/thymeleaf-layout-dialect.version&gt;\n  &lt;/properties&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#2thymeleaf","title":"2\u3001Thymeleaf\u4f7f\u7528","text":"<pre><code>@ConfigurationProperties(prefix = \"spring.thymeleaf\")\npublic class ThymeleafProperties {\n\n    private static final Charset DEFAULT_ENCODING = Charset.forName(\"UTF-8\");\n\n    private static final MimeType DEFAULT_CONTENT_TYPE = MimeType.valueOf(\"text/html\");\n\n    public static final String DEFAULT_PREFIX = \"classpath:/templates/\";\n\n    public static final String DEFAULT_SUFFIX = \".html\";\n    //\n</code></pre> <p>\u53ea\u8981\u6211\u4eec\u628aHTML\u9875\u9762\u653e\u5728classpath:/templates/\uff0cthymeleaf\u5c31\u80fd\u81ea\u52a8\u6e32\u67d3\uff1b</p> <p>\u4f7f\u7528\uff1a</p> <p>1\u3001\u5bfc\u5165thymeleaf\u7684\u540d\u79f0\u7a7a\u95f4</p> <pre><code>&lt;html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\"&gt;\n</code></pre> <p>2\u3001\u4f7f\u7528thymeleaf\u8bed\u6cd5\uff1b</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;\u6210\u529f\uff01&lt;/h1&gt;\n    &lt;!--th:text \u5c06div\u91cc\u9762\u7684\u6587\u672c\u5185\u5bb9\u8bbe\u7f6e\u4e3a --&gt;\n    &lt;div th:text=\"${hello}\"&gt;\u8fd9\u662f\u663e\u793a\u6b22\u8fce\u4fe1\u606f&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#3_4","title":"3\u3001\u8bed\u6cd5\u89c4\u5219","text":"<p>1\uff09\u3001th:text\uff1b\u6539\u53d8\u5f53\u524d\u5143\u7d20\u91cc\u9762\u7684\u6587\u672c\u5185\u5bb9\uff1b</p> <p>\u200b   th\uff1a\u4efb\u610fhtml\u5c5e\u6027\uff1b\u6765\u66ff\u6362\u539f\u751f\u5c5e\u6027\u7684\u503c</p> <p></p> <p>2\uff09\u3001\u8868\u8fbe\u5f0f\uff1f</p> <pre><code>Simple expressions:\uff08\u8868\u8fbe\u5f0f\u8bed\u6cd5\uff09\n    Variable Expressions: ${...}\uff1a\u83b7\u53d6\u53d8\u91cf\u503c\uff1bOGNL\uff1b\n            1\uff09\u3001\u83b7\u53d6\u5bf9\u8c61\u7684\u5c5e\u6027\u3001\u8c03\u7528\u65b9\u6cd5\n            2\uff09\u3001\u4f7f\u7528\u5185\u7f6e\u7684\u57fa\u672c\u5bf9\u8c61\uff1a\n                #ctx : the context object.\n                #vars: the context variables.\n                #locale : the context locale.\n                #request : (only in Web Contexts) the HttpServletRequest object.\n                #response : (only in Web Contexts) the HttpServletResponse object.\n                #session : (only in Web Contexts) the HttpSession object.\n                #servletContext : (only in Web Contexts) the ServletContext object.\n\n                ${session.foo}\n            3\uff09\u3001\u5185\u7f6e\u7684\u4e00\u4e9b\u5de5\u5177\u5bf9\u8c61\uff1a\n#execInfo : information about the template being processed.\n#messages : methods for obtaining externalized messages inside variables expressions, in the same way as they would be obtained using #{\u2026} syntax.\n#uris : methods for escaping parts of URLs/URIs\n#conversions : methods for executing the configured conversion service (if any).\n#dates : methods for java.util.Date objects: formatting, component extraction, etc.\n#calendars : analogous to #dates , but for java.util.Calendar objects.\n#numbers : methods for formatting numeric objects.\n#strings : methods for String objects: contains, startsWith, prepending/appending, etc.\n#objects : methods for objects in general.\n#bools : methods for boolean evaluation.\n#arrays : methods for arrays.\n#lists : methods for lists.\n#sets : methods for sets.\n#maps : methods for maps.\n#aggregates : methods for creating aggregates on arrays or collections.\n#ids : methods for dealing with id attributes that might be repeated (for example, as a result of an iteration).\n\n    Selection Variable Expressions: *{...}\uff1a\u9009\u62e9\u8868\u8fbe\u5f0f\uff1a\u548c${}\u5728\u529f\u80fd\u4e0a\u662f\u4e00\u6837\uff1b\n        \u8865\u5145\uff1a\u914d\u5408 th:object=\"${session.user}\uff1a\n   &lt;div th:object=\"${session.user}\"&gt;\n    &lt;p&gt;Name: &lt;span th:text=\"*{firstName}\"&gt;Sebastian&lt;/span&gt;.&lt;/p&gt;\n    &lt;p&gt;Surname: &lt;span th:text=\"*{lastName}\"&gt;Pepper&lt;/span&gt;.&lt;/p&gt;\n    &lt;p&gt;Nationality: &lt;span th:text=\"*{nationality}\"&gt;Saturn&lt;/span&gt;.&lt;/p&gt;\n    &lt;/div&gt;\n\n    Message Expressions: #{...}\uff1a\u83b7\u53d6\u56fd\u9645\u5316\u5185\u5bb9\n    Link URL Expressions: @{...}\uff1a\u5b9a\u4e49URL\uff1b\n            @{/order/process(execId=${execId},execType='FAST')}\n    Fragment Expressions: ~{...}\uff1a\u7247\u6bb5\u5f15\u7528\u8868\u8fbe\u5f0f\n            &lt;div th:insert=\"~{commons :: main}\"&gt;...&lt;/div&gt;\n\nLiterals\uff08\u5b57\u9762\u91cf\uff09\n      Text literals: 'one text' , 'Another one!' ,\u2026\n      Number literals: 0 , 34 , 3.0 , 12.3 ,\u2026\n      Boolean literals: true , false\n      Null literal: null\n      Literal tokens: one , sometext , main ,\u2026\nText operations:\uff08\u6587\u672c\u64cd\u4f5c\uff09\n    String concatenation: +\n    Literal substitutions: |The name is ${name}|\nArithmetic operations:\uff08\u6570\u5b66\u8fd0\u7b97\uff09\n    Binary operators: + , - , * , / , %\n    Minus sign (unary operator): -\nBoolean operations:\uff08\u5e03\u5c14\u8fd0\u7b97\uff09\n    Binary operators: and , or\n    Boolean negation (unary operator): ! , not\nComparisons and equality:\uff08\u6bd4\u8f83\u8fd0\u7b97\uff09\n    Comparators: &gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )\n    Equality operators: == , != ( eq , ne )\nConditional operators:\u6761\u4ef6\u8fd0\u7b97\uff08\u4e09\u5143\u8fd0\u7b97\u7b26\uff09\n    If-then: (if) ? (then)\n    If-then-else: (if) ? (then) : (else)\n    Default: (value) ?: (defaultvalue)\nSpecial tokens:\n    No-Operation: _ \n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#4springmvc","title":"4\u3001SpringMVC\u81ea\u52a8\u914d\u7f6e","text":"<p>https://docs.spring.io/spring-boot/docs/1.5.10.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications</p>"},{"location":"Java/SpringBoot/SpringBoot/#1-spring-mvc-auto-configuration","title":"1. Spring MVC auto-configuration","text":"<p>Spring Boot \u81ea\u52a8\u914d\u7f6e\u597d\u4e86SpringMVC</p> <p>\u4ee5\u4e0b\u662fSpringBoot\u5bf9SpringMVC\u7684\u9ed8\u8ba4\u914d\u7f6e:==\uff08WebMvcAutoConfiguration\uff09==</p> <ul> <li>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</li> <li>\u81ea\u52a8\u914d\u7f6e\u4e86ViewResolver\uff08\u89c6\u56fe\u89e3\u6790\u5668\uff1a\u6839\u636e\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u5f97\u5230\u89c6\u56fe\u5bf9\u8c61\uff08View\uff09\uff0c\u89c6\u56fe\u5bf9\u8c61\u51b3\u5b9a\u5982\u4f55\u6e32\u67d3\uff08\u8f6c\u53d1\uff1f\u91cd\u5b9a\u5411\uff1f\uff09\uff09</li> <li>ContentNegotiatingViewResolver\uff1a\u7ec4\u5408\u6240\u6709\u7684\u89c6\u56fe\u89e3\u6790\u5668\u7684\uff1b</li> <li> <p>==\u5982\u4f55\u5b9a\u5236\uff1a\u6211\u4eec\u53ef\u4ee5\u81ea\u5df1\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u89c6\u56fe\u89e3\u6790\u5668\uff1b\u81ea\u52a8\u7684\u5c06\u5176\u7ec4\u5408\u8fdb\u6765\uff1b==</p> </li> <li> <p>Support for serving static resources, including support for WebJars (see below).\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u5939\u8def\u5f84,webjars</p> </li> <li> <p>Static <code>index.html</code> support. \u9759\u6001\u9996\u9875\u8bbf\u95ee</p> </li> <li> <p>Custom <code>Favicon</code> support (see below).  favicon.ico</p> </li> </ul> <p>\u200b</p> <ul> <li> <p>\u81ea\u52a8\u6ce8\u518c\u4e86 of <code>Converter</code>, <code>GenericConverter</code>, <code>Formatter</code> beans.</p> </li> <li> <p>Converter\uff1a\u8f6c\u6362\u5668\uff1b  public String hello(User user)\uff1a\u7c7b\u578b\u8f6c\u6362\u4f7f\u7528Converter</p> </li> <li><code>Formatter</code>  \u683c\u5f0f\u5316\u5668\uff1b  2017.12.17===Date\uff1b</li> </ul> <pre><code>        @Bean\n        @ConditionalOnProperty(prefix = \"spring.mvc\", name = \"date-format\")//\u5728\u6587\u4ef6\u4e2d\u914d\u7f6e\u65e5\u671f\u683c\u5f0f\u5316\u7684\u89c4\u5219\n        public Formatter&lt;Date&gt; dateFormatter() {\n            return new DateFormatter(this.mvcProperties.getDateFormat());//\u65e5\u671f\u683c\u5f0f\u5316\u7ec4\u4ef6\n        }\n</code></pre> <p>\u200b   ==\u81ea\u5df1\u6dfb\u52a0\u7684\u683c\u5f0f\u5316\u5668\u8f6c\u6362\u5668\uff0c\u6211\u4eec\u53ea\u9700\u8981\u653e\u5728\u5bb9\u5668\u4e2d\u5373\u53ef==</p> <ul> <li> <p>Support for <code>HttpMessageConverters</code> (see below).</p> </li> <li> <p>HttpMessageConverter\uff1aSpringMVC\u7528\u6765\u8f6c\u6362Http\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\uff1bUser---Json\uff1b</p> </li> <li> <p><code>HttpMessageConverters</code> \u662f\u4ece\u5bb9\u5668\u4e2d\u786e\u5b9a\uff1b\u83b7\u53d6\u6240\u6709\u7684HttpMessageConverter\uff1b</p> <p>==\u81ea\u5df1\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0HttpMessageConverter\uff0c\u53ea\u9700\u8981\u5c06\u81ea\u5df1\u7684\u7ec4\u4ef6\u6ce8\u518c\u5bb9\u5668\u4e2d\uff08@Bean,@Component\uff09==</p> <p>\u200b</p> </li> <li> <p>Automatic registration of <code>MessageCodesResolver</code> (see below).\u5b9a\u4e49\u9519\u8bef\u4ee3\u7801\u751f\u6210\u89c4\u5219</p> </li> <li> <p>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (see below).</p> </li> </ul> <p>==\u6211\u4eec\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e2aConfigurableWebBindingInitializer\u6765\u66ff\u6362\u9ed8\u8ba4\u7684\uff1b\uff08\u6dfb\u52a0\u5230\u5bb9\u5668\uff09==</p> <pre><code>\u521d\u59cb\u5316WebDataBinder\uff1b\n\u8bf7\u6c42\u6570\u636e=====JavaBean\uff1b\n</code></pre> <p>org.springframework.boot.autoconfigure.web\uff1aweb\u7684\u6240\u6709\u81ea\u52a8\u573a\u666f\uff1b</p> <p>If you want to keep Spring Boot MVC features, and you just want to add additional MVC configuration (interceptors, formatters, view controllers etc.) you can add your own <code>@Configuration</code> class of type <code>WebMvcConfigurerAdapter</code>, but without <code>@EnableWebMvc</code>. If you wish to provide custom instances of <code>RequestMappingHandlerMapping</code>, <code>RequestMappingHandlerAdapter</code> or <code>ExceptionHandlerExceptionResolver</code> you can declare a <code>WebMvcRegistrationsAdapter</code> instance providing such components.</p> <p>If you want to take complete control of Spring MVC, you can add your own <code>@Configuration</code> annotated with <code>@EnableWebMvc</code>.</p>"},{"location":"Java/SpringBoot/SpringBoot/#2springmvc","title":"2\u3001\u6269\u5c55SpringMVC","text":"<pre><code>    &lt;mvc:view-controller path=\"/hello\" view-name=\"success\"/&gt;\n    &lt;mvc:interceptors&gt;\n        &lt;mvc:interceptor&gt;\n            &lt;mvc:mapping path=\"/hello\"/&gt;\n            &lt;bean&gt;&lt;/bean&gt;\n        &lt;/mvc:interceptor&gt;\n    &lt;/mvc:interceptors&gt;\n</code></pre> <p>==\u7f16\u5199\u4e00\u4e2a\u914d\u7f6e\u7c7b\uff08@Configuration\uff09\uff0c\u662fWebMvcConfigurerAdapter\u7c7b\u578b\uff1b\u4e0d\u80fd\u6807\u6ce8@EnableWebMvc==;</p> <p>\u65e2\u4fdd\u7559\u4e86\u6240\u6709\u7684\u81ea\u52a8\u914d\u7f6e\uff0c\u4e5f\u80fd\u7528\u6211\u4eec\u6269\u5c55\u7684\u914d\u7f6e\uff1b</p> <pre><code>//\u4f7f\u7528WebMvcConfigurerAdapter\u53ef\u4ee5\u6765\u6269\u5c55SpringMVC\u7684\u529f\u80fd\n@Configuration\npublic class MyMvcConfig extends WebMvcConfigurerAdapter {\n\n    @Override\n    public void addViewControllers(ViewControllerRegistry registry) {\n       // super.addViewControllers(registry);\n        //\u6d4f\u89c8\u5668\u53d1\u9001 /atguigu \u8bf7\u6c42\u6765\u5230 success\n        registry.addViewController(\"/atguigu\").setViewName(\"success\");\n    }\n}\n</code></pre> <p>\u539f\u7406\uff1a</p> <p>\u200b   1\uff09\u3001WebMvcAutoConfiguration\u662fSpringMVC\u7684\u81ea\u52a8\u914d\u7f6e\u7c7b</p> <p>\u200b   2\uff09\u3001\u5728\u505a\u5176\u4ed6\u81ea\u52a8\u914d\u7f6e\u65f6\u4f1a\u5bfc\u5165\uff1b@Import(EnableWebMvcConfiguration.class)</p> <pre><code>    @Configuration\n    public static class EnableWebMvcConfiguration extends DelegatingWebMvcConfiguration {\n      private final WebMvcConfigurerComposite configurers = new WebMvcConfigurerComposite();\n\n     //\u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6\u6240\u6709\u7684WebMvcConfigurer\n      @Autowired(required = false)\n      public void setConfigurers(List&lt;WebMvcConfigurer&gt; configurers) {\n          if (!CollectionUtils.isEmpty(configurers)) {\n              this.configurers.addWebMvcConfigurers(configurers);\n                //\u4e00\u4e2a\u53c2\u8003\u5b9e\u73b0\uff1b\u5c06\u6240\u6709\u7684WebMvcConfigurer\u76f8\u5173\u914d\u7f6e\u90fd\u6765\u4e00\u8d77\u8c03\u7528\uff1b  \n                @Override\n             // public void addViewControllers(ViewControllerRegistry registry) {\n              //    for (WebMvcConfigurer delegate : this.delegates) {\n               //       delegate.addViewControllers(registry);\n               //   }\n              }\n          }\n    }\n</code></pre> <p>\u200b   3\uff09\u3001\u5bb9\u5668\u4e2d\u6240\u6709\u7684WebMvcConfigurer\u90fd\u4f1a\u4e00\u8d77\u8d77\u4f5c\u7528\uff1b</p> <p>\u200b   4\uff09\u3001\u6211\u4eec\u7684\u914d\u7f6e\u7c7b\u4e5f\u4f1a\u88ab\u8c03\u7528\uff1b</p> <p>\u200b   \u6548\u679c\uff1aSpringMVC\u7684\u81ea\u52a8\u914d\u7f6e\u548c\u6211\u4eec\u7684\u6269\u5c55\u914d\u7f6e\u90fd\u4f1a\u8d77\u4f5c\u7528\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#3springmvc","title":"3\u3001\u5168\u9762\u63a5\u7ba1SpringMVC\uff1b","text":"<p>SpringBoot\u5bf9SpringMVC\u7684\u81ea\u52a8\u914d\u7f6e\u4e0d\u9700\u8981\u4e86\uff0c\u6240\u6709\u90fd\u662f\u6211\u4eec\u81ea\u5df1\u914d\u7f6e\uff1b\u6240\u6709\u7684SpringMVC\u7684\u81ea\u52a8\u914d\u7f6e\u90fd\u5931\u6548\u4e86</p> <p>\u6211\u4eec\u9700\u8981\u5728\u914d\u7f6e\u7c7b\u4e2d\u6dfb\u52a0@EnableWebMvc\u5373\u53ef\uff1b</p> <pre><code>//\u4f7f\u7528WebMvcConfigurerAdapter\u53ef\u4ee5\u6765\u6269\u5c55SpringMVC\u7684\u529f\u80fd\n@EnableWebMvc\n@Configuration\npublic class MyMvcConfig extends WebMvcConfigurerAdapter {\n\n    @Override\n    public void addViewControllers(ViewControllerRegistry registry) {\n       // super.addViewControllers(registry);\n        //\u6d4f\u89c8\u5668\u53d1\u9001 /atguigu \u8bf7\u6c42\u6765\u5230 success\n        registry.addViewController(\"/atguigu\").setViewName(\"success\");\n    }\n}\n</code></pre> <p>\u539f\u7406\uff1a</p> <p>\u4e3a\u4ec0\u4e48@EnableWebMvc\u81ea\u52a8\u914d\u7f6e\u5c31\u5931\u6548\u4e86\uff1b</p> <p>1\uff09@EnableWebMvc\u7684\u6838\u5fc3</p> <pre><code>@Import(DelegatingWebMvcConfiguration.class)\npublic @interface EnableWebMvc {\n</code></pre> <p>2\uff09\u3001</p> <pre><code>@Configuration\npublic class DelegatingWebMvcConfiguration extends WebMvcConfigurationSupport {\n</code></pre> <p>3\uff09\u3001</p> <pre><code>@Configuration\n@ConditionalOnWebApplication\n@ConditionalOnClass({ Servlet.class, DispatcherServlet.class,\n        WebMvcConfigurerAdapter.class })\n//\u5bb9\u5668\u4e2d\u6ca1\u6709\u8fd9\u4e2a\u7ec4\u4ef6\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u81ea\u52a8\u914d\u7f6e\u7c7b\u624d\u751f\u6548\n@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)\n@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)\n@AutoConfigureAfter({ DispatcherServletAutoConfiguration.class,\n        ValidationAutoConfiguration.class })\npublic class WebMvcAutoConfiguration {\n</code></pre> <p>4\uff09\u3001@EnableWebMvc\u5c06WebMvcConfigurationSupport\u7ec4\u4ef6\u5bfc\u5165\u8fdb\u6765\uff1b</p> <p>5\uff09\u3001\u5bfc\u5165\u7684WebMvcConfigurationSupport\u53ea\u662fSpringMVC\u6700\u57fa\u672c\u7684\u529f\u80fd\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#5springboot","title":"5\u3001\u5982\u4f55\u4fee\u6539SpringBoot\u7684\u9ed8\u8ba4\u914d\u7f6e","text":"<p>\u6a21\u5f0f\uff1a</p> <p>\u200b   1\uff09\u3001SpringBoot\u5728\u81ea\u52a8\u914d\u7f6e\u5f88\u591a\u7ec4\u4ef6\u7684\u65f6\u5019\uff0c\u5148\u770b\u5bb9\u5668\u4e2d\u6709\u6ca1\u6709\u7528\u6237\u81ea\u5df1\u914d\u7f6e\u7684\uff08@Bean\u3001@Component\uff09\u5982\u679c\u6709\u5c31\u7528\u7528\u6237\u914d\u7f6e\u7684\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u624d\u81ea\u52a8\u914d\u7f6e\uff1b\u5982\u679c\u6709\u4e9b\u7ec4\u4ef6\u53ef\u4ee5\u6709\u591a\u4e2a\uff08ViewResolver\uff09\u5c06\u7528\u6237\u914d\u7f6e\u7684\u548c\u81ea\u5df1\u9ed8\u8ba4\u7684\u7ec4\u5408\u8d77\u6765\uff1b</p> <p>\u200b   2\uff09\u3001\u5728SpringBoot\u4e2d\u4f1a\u6709\u975e\u5e38\u591a\u7684xxxConfigurer\u5e2e\u52a9\u6211\u4eec\u8fdb\u884c\u6269\u5c55\u914d\u7f6e</p> <p>\u200b   3\uff09\u3001\u5728SpringBoot\u4e2d\u4f1a\u6709\u5f88\u591a\u7684xxxCustomizer\u5e2e\u52a9\u6211\u4eec\u8fdb\u884c\u5b9a\u5236\u914d\u7f6e</p>"},{"location":"Java/SpringBoot/SpringBoot/#6restfulcrud","title":"6\u3001RestfulCRUD","text":""},{"location":"Java/SpringBoot/SpringBoot/#1_8","title":"1\uff09\u3001\u9ed8\u8ba4\u8bbf\u95ee\u9996\u9875","text":"<pre><code>//\u4f7f\u7528WebMvcConfigurerAdapter\u53ef\u4ee5\u6765\u6269\u5c55SpringMVC\u7684\u529f\u80fd\n//@EnableWebMvc   \u4e0d\u8981\u63a5\u7ba1SpringMVC\n@Configuration\npublic class MyMvcConfig extends WebMvcConfigurerAdapter {\n\n    @Override\n    public void addViewControllers(ViewControllerRegistry registry) {\n       // super.addViewControllers(registry);\n        //\u6d4f\u89c8\u5668\u53d1\u9001 /atguigu \u8bf7\u6c42\u6765\u5230 success\n        registry.addViewController(\"/atguigu\").setViewName(\"success\");\n    }\n\n    //\u6240\u6709\u7684WebMvcConfigurerAdapter\u7ec4\u4ef6\u90fd\u4f1a\u4e00\u8d77\u8d77\u4f5c\u7528\n    @Bean //\u5c06\u7ec4\u4ef6\u6ce8\u518c\u5728\u5bb9\u5668\n    public WebMvcConfigurerAdapter webMvcConfigurerAdapter(){\n        WebMvcConfigurerAdapter adapter = new WebMvcConfigurerAdapter() {\n            @Override\n            public void addViewControllers(ViewControllerRegistry registry) {\n                registry.addViewController(\"/\").setViewName(\"login\");\n                registry.addViewController(\"/index.html\").setViewName(\"login\");\n            }\n        };\n        return adapter;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#2_8","title":"2\uff09\u3001\u56fd\u9645\u5316","text":"<p>1\uff09\u3001\u7f16\u5199\u56fd\u9645\u5316\u914d\u7f6e\u6587\u4ef6\uff1b</p> <p>2\uff09\u3001\u4f7f\u7528ResourceBundleMessageSource\u7ba1\u7406\u56fd\u9645\u5316\u8d44\u6e90\u6587\u4ef6</p> <p>3\uff09\u3001\u5728\u9875\u9762\u4f7f\u7528fmt:message\u53d6\u51fa\u56fd\u9645\u5316\u5185\u5bb9</p> <p>\u6b65\u9aa4\uff1a</p> <p>1\uff09\u3001\u7f16\u5199\u56fd\u9645\u5316\u914d\u7f6e\u6587\u4ef6\uff0c\u62bd\u53d6\u9875\u9762\u9700\u8981\u663e\u793a\u7684\u56fd\u9645\u5316\u6d88\u606f</p> <p></p> <p>2\uff09\u3001SpringBoot\u81ea\u52a8\u914d\u7f6e\u597d\u4e86\u7ba1\u7406\u56fd\u9645\u5316\u8d44\u6e90\u6587\u4ef6\u7684\u7ec4\u4ef6\uff1b</p> <pre><code>@ConfigurationProperties(prefix = \"spring.messages\")\npublic class MessageSourceAutoConfiguration {\n\n    /**\n     * Comma-separated list of basenames (essentially a fully-qualified classpath\n     * location), each following the ResourceBundle convention with relaxed support for\n     * slash based locations. If it doesn't contain a package qualifier (such as\n     * \"org.mypackage\"), it will be resolved from the classpath root.\n     */\n    private String basename = \"messages\";  \n    //\u6211\u4eec\u7684\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u76f4\u63a5\u653e\u5728\u7c7b\u8def\u5f84\u4e0b\u53ebmessages.properties\uff1b\n\n    @Bean\n    public MessageSource messageSource() {\n        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();\n        if (StringUtils.hasText(this.basename)) {\n            //\u8bbe\u7f6e\u56fd\u9645\u5316\u8d44\u6e90\u6587\u4ef6\u7684\u57fa\u7840\u540d\uff08\u53bb\u6389\u8bed\u8a00\u56fd\u5bb6\u4ee3\u7801\u7684\uff09\n            messageSource.setBasenames(StringUtils.commaDelimitedListToStringArray(\n                    StringUtils.trimAllWhitespace(this.basename)));\n        }\n        if (this.encoding != null) {\n            messageSource.setDefaultEncoding(this.encoding.name());\n        }\n        messageSource.setFallbackToSystemLocale(this.fallbackToSystemLocale);\n        messageSource.setCacheSeconds(this.cacheSeconds);\n        messageSource.setAlwaysUseMessageFormat(this.alwaysUseMessageFormat);\n        return messageSource;\n    }\n</code></pre> <p>3\uff09\u3001\u53bb\u9875\u9762\u83b7\u53d6\u56fd\u9645\u5316\u7684\u503c\uff1b</p> <p></p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"  xmlns:th=\"http://www.thymeleaf.org\"&gt;\n    &lt;head&gt;\n        &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n        &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"&gt;\n        &lt;meta name=\"description\" content=\"\"&gt;\n        &lt;meta name=\"author\" content=\"\"&gt;\n        &lt;title&gt;Signin Template for Bootstrap&lt;/title&gt;\n        &lt;!-- Bootstrap core CSS --&gt;\n        &lt;link href=\"asserts/css/bootstrap.min.css\" th:href=\"@{/webjars/bootstrap/4.0.0/css/bootstrap.css}\" rel=\"stylesheet\"&gt;\n        &lt;!-- Custom styles for this template --&gt;\n        &lt;link href=\"asserts/css/signin.css\" th:href=\"@{/asserts/css/signin.css}\" rel=\"stylesheet\"&gt;\n    &lt;/head&gt;\n\n    &lt;body class=\"text-center\"&gt;\n        &lt;form class=\"form-signin\" action=\"dashboard.html\"&gt;\n            &lt;img class=\"mb-4\" th:src=\"@{/asserts/img/bootstrap-solid.svg}\" src=\"asserts/img/bootstrap-solid.svg\" alt=\"\" width=\"72\" height=\"72\"&gt;\n            &lt;h1 class=\"h3 mb-3 font-weight-normal\" th:text=\"#{login.tip}\"&gt;Please sign in&lt;/h1&gt;\n            &lt;label class=\"sr-only\" th:text=\"#{login.username}\"&gt;Username&lt;/label&gt;\n            &lt;input type=\"text\" class=\"form-control\" placeholder=\"Username\" th:placeholder=\"#{login.username}\" required=\"\" autofocus=\"\"&gt;\n            &lt;label class=\"sr-only\" th:text=\"#{login.password}\"&gt;Password&lt;/label&gt;\n            &lt;input type=\"password\" class=\"form-control\" placeholder=\"Password\" th:placeholder=\"#{login.password}\" required=\"\"&gt;\n            &lt;div class=\"checkbox mb-3\"&gt;\n                &lt;label&gt;\n                &lt;input type=\"checkbox\" value=\"remember-me\"/&gt; [[#{login.remember}]]\n        &lt;/label&gt;\n            &lt;/div&gt;\n            &lt;button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\" th:text=\"#{login.btn}\"&gt;Sign in&lt;/button&gt;\n            &lt;p class=\"mt-5 mb-3 text-muted\"&gt;\u00a9 2017-2018&lt;/p&gt;\n            &lt;a class=\"btn btn-sm\"&gt;\u4e2d\u6587&lt;/a&gt;\n            &lt;a class=\"btn btn-sm\"&gt;English&lt;/a&gt;\n        &lt;/form&gt;\n\n    &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre> <p>\u6548\u679c\uff1a\u6839\u636e\u6d4f\u89c8\u5668\u8bed\u8a00\u8bbe\u7f6e\u7684\u4fe1\u606f\u5207\u6362\u4e86\u56fd\u9645\u5316\uff1b</p> <p>\u539f\u7406\uff1a</p> <p>\u200b   \u56fd\u9645\u5316Locale\uff08\u533a\u57df\u4fe1\u606f\u5bf9\u8c61\uff09\uff1bLocaleResolver\uff08\u83b7\u53d6\u533a\u57df\u4fe1\u606f\u5bf9\u8c61\uff09\uff1b</p> <pre><code>        @Bean\n        @ConditionalOnMissingBean\n        @ConditionalOnProperty(prefix = \"spring.mvc\", name = \"locale\")\n        public LocaleResolver localeResolver() {\n            if (this.mvcProperties\n                    .getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) {\n                return new FixedLocaleResolver(this.mvcProperties.getLocale());\n            }\n            AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();\n            localeResolver.setDefaultLocale(this.mvcProperties.getLocale());\n            return localeResolver;\n        }\n\u9ed8\u8ba4\u7684\u5c31\u662f\u6839\u636e\u8bf7\u6c42\u5934\u5e26\u6765\u7684\u533a\u57df\u4fe1\u606f\u83b7\u53d6Locale\u8fdb\u884c\u56fd\u9645\u5316\n</code></pre> <p>4\uff09\u3001\u70b9\u51fb\u94fe\u63a5\u5207\u6362\u56fd\u9645\u5316</p> <pre><code>/**\n * \u53ef\u4ee5\u5728\u8fde\u63a5\u4e0a\u643a\u5e26\u533a\u57df\u4fe1\u606f\n */\npublic class MyLocaleResolver implements LocaleResolver {\n\n    @Override\n    public Locale resolveLocale(HttpServletRequest request) {\n        String l = request.getParameter(\"l\");\n        Locale locale = Locale.getDefault();\n        if(!StringUtils.isEmpty(l)){\n            String[] split = l.split(\"_\");\n            locale = new Locale(split[0],split[1]);\n        }\n        return locale;\n    }\n\n    @Override\n    public void setLocale(HttpServletRequest request, HttpServletResponse response, Locale locale) {\n\n    }\n}\n\n\n @Bean\n    public LocaleResolver localeResolver(){\n        return new MyLocaleResolver();\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#3_5","title":"3\uff09\u3001\u767b\u9646","text":"<p>\u5f00\u53d1\u671f\u95f4\u6a21\u677f\u5f15\u64ce\u9875\u9762\u4fee\u6539\u4ee5\u540e\uff0c\u8981\u5b9e\u65f6\u751f\u6548</p> <p>1\uff09\u3001\u7981\u7528\u6a21\u677f\u5f15\u64ce\u7684\u7f13\u5b58</p> <pre><code># \u7981\u7528\u7f13\u5b58\nspring.thymeleaf.cache=false \n</code></pre> <p>2\uff09\u3001\u9875\u9762\u4fee\u6539\u5b8c\u6210\u4ee5\u540ectrl+f9\uff1a\u91cd\u65b0\u7f16\u8bd1\uff1b</p> <p>\u767b\u9646\u9519\u8bef\u6d88\u606f\u7684\u663e\u793a</p> <pre><code>&lt;p style=\"color: red\" th:text=\"${msg}\" th:if=\"${not #strings.isEmpty(msg)}\"&gt;&lt;/p&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#4_2","title":"4\uff09\u3001\u62e6\u622a\u5668\u8fdb\u884c\u767b\u9646\u68c0\u67e5","text":"<p>\u62e6\u622a\u5668</p> <pre><code>/**\n * \u767b\u9646\u68c0\u67e5\uff0c\n */\npublic class LoginHandlerInterceptor implements HandlerInterceptor {\n    //\u76ee\u6807\u65b9\u6cd5\u6267\u884c\u4e4b\u524d\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n        Object user = request.getSession().getAttribute(\"loginUser\");\n        if(user == null){\n            //\u672a\u767b\u9646\uff0c\u8fd4\u56de\u767b\u9646\u9875\u9762\n            request.setAttribute(\"msg\",\"\u6ca1\u6709\u6743\u9650\u8bf7\u5148\u767b\u9646\");\n            request.getRequestDispatcher(\"/index.html\").forward(request,response);\n            return false;\n        }else{\n            //\u5df2\u767b\u9646\uff0c\u653e\u884c\u8bf7\u6c42\n            return true;\n        }\n\n    }\n\n    @Override\n    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {\n\n    }\n\n    @Override\n    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {\n\n    }\n}\n</code></pre> <p>\u6ce8\u518c\u62e6\u622a\u5668</p> <pre><code>  //\u6240\u6709\u7684WebMvcConfigurerAdapter\u7ec4\u4ef6\u90fd\u4f1a\u4e00\u8d77\u8d77\u4f5c\u7528\n    @Bean //\u5c06\u7ec4\u4ef6\u6ce8\u518c\u5728\u5bb9\u5668\n    public WebMvcConfigurerAdapter webMvcConfigurerAdapter(){\n        WebMvcConfigurerAdapter adapter = new WebMvcConfigurerAdapter() {\n            @Override\n            public void addViewControllers(ViewControllerRegistry registry) {\n                registry.addViewController(\"/\").setViewName(\"login\");\n                registry.addViewController(\"/index.html\").setViewName(\"login\");\n                registry.addViewController(\"/main.html\").setViewName(\"dashboard\");\n            }\n\n            //\u6ce8\u518c\u62e6\u622a\u5668\n            @Override\n            public void addInterceptors(InterceptorRegistry registry) {\n                //super.addInterceptors(registry);\n                //\u9759\u6001\u8d44\u6e90\uff1b  *.css , *.js\n                //SpringBoot\u5df2\u7ecf\u505a\u597d\u4e86\u9759\u6001\u8d44\u6e90\u6620\u5c04\n                registry.addInterceptor(new LoginHandlerInterceptor()).addPathPatterns(\"/**\")\n                        .excludePathPatterns(\"/index.html\",\"/\",\"/user/login\");\n            }\n        };\n        return adapter;\n    }\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#5crud-","title":"5\uff09\u3001CRUD-\u5458\u5de5\u5217\u8868","text":"<p>\u5b9e\u9a8c\u8981\u6c42\uff1a</p> <p>1\uff09\u3001RestfulCRUD\uff1aCRUD\u6ee1\u8db3Rest\u98ce\u683c\uff1b</p> <p>URI\uff1a  /\u8d44\u6e90\u540d\u79f0/\u8d44\u6e90\u6807\u8bc6       HTTP\u8bf7\u6c42\u65b9\u5f0f\u533a\u5206\u5bf9\u8d44\u6e90CRUD\u64cd\u4f5c</p> \u666e\u901aCRUD\uff08uri\u6765\u533a\u5206\u64cd\u4f5c\uff09 RestfulCRUD \u67e5\u8be2 getEmp emp---GET \u6dfb\u52a0 addEmp?xxx emp---POST \u4fee\u6539 updateEmp?id=xxx&amp;xxx=xx emp/{id}---PUT \u5220\u9664 deleteEmp?id=1 emp/{id}---DELETE <p>2\uff09\u3001\u5b9e\u9a8c\u7684\u8bf7\u6c42\u67b6\u6784;</p> \u5b9e\u9a8c\u529f\u80fd \u8bf7\u6c42URI \u8bf7\u6c42\u65b9\u5f0f \u67e5\u8be2\u6240\u6709\u5458\u5de5 emps GET \u67e5\u8be2\u67d0\u4e2a\u5458\u5de5(\u6765\u5230\u4fee\u6539\u9875\u9762) emp/1 GET \u6765\u5230\u6dfb\u52a0\u9875\u9762 emp GET \u6dfb\u52a0\u5458\u5de5 emp POST \u6765\u5230\u4fee\u6539\u9875\u9762\uff08\u67e5\u51fa\u5458\u5de5\u8fdb\u884c\u4fe1\u606f\u56de\u663e\uff09 emp/1 GET \u4fee\u6539\u5458\u5de5 emp PUT \u5220\u9664\u5458\u5de5 emp/1 DELETE <p>3\uff09\u3001\u5458\u5de5\u5217\u8868\uff1a</p>"},{"location":"Java/SpringBoot/SpringBoot/#thymeleaf","title":"thymeleaf\u516c\u5171\u9875\u9762\u5143\u7d20\u62bd\u53d6","text":"<pre><code>1\u3001\u62bd\u53d6\u516c\u5171\u7247\u6bb5\n&lt;div th:fragment=\"copy\"&gt;\n&amp;copy; 2011 The Good Thymes Virtual Grocery\n&lt;/div&gt;\n\n2\u3001\u5f15\u5165\u516c\u5171\u7247\u6bb5\n&lt;div th:insert=\"~{footer :: copy}\"&gt;&lt;/div&gt;\n~{templatename::selector}\uff1a\u6a21\u677f\u540d::\u9009\u62e9\u5668\n~{templatename::fragmentname}:\u6a21\u677f\u540d::\u7247\u6bb5\u540d\n\n3\u3001\u9ed8\u8ba4\u6548\u679c\uff1a\ninsert\u7684\u516c\u5171\u7247\u6bb5\u5728div\u6807\u7b7e\u4e2d\n\u5982\u679c\u4f7f\u7528th:insert\u7b49\u5c5e\u6027\u8fdb\u884c\u5f15\u5165\uff0c\u53ef\u4ee5\u4e0d\u7528\u5199~{}\uff1a\n\u884c\u5185\u5199\u6cd5\u53ef\u4ee5\u52a0\u4e0a\uff1a[[~{}]];[(~{})]\uff1b\n</code></pre> <p>\u4e09\u79cd\u5f15\u5165\u516c\u5171\u7247\u6bb5\u7684th\u5c5e\u6027\uff1a</p> <p>th:insert\uff1a\u5c06\u516c\u5171\u7247\u6bb5\u6574\u4e2a\u63d2\u5165\u5230\u58f0\u660e\u5f15\u5165\u7684\u5143\u7d20\u4e2d</p> <p>th:replace\uff1a\u5c06\u58f0\u660e\u5f15\u5165\u7684\u5143\u7d20\u66ff\u6362\u4e3a\u516c\u5171\u7247\u6bb5</p> <p>th:include\uff1a\u5c06\u88ab\u5f15\u5165\u7684\u7247\u6bb5\u7684\u5185\u5bb9\u5305\u542b\u8fdb\u8fd9\u4e2a\u6807\u7b7e\u4e2d</p> <pre><code>&lt;footer th:fragment=\"copy\"&gt;\n&amp;copy; 2011 The Good Thymes Virtual Grocery\n&lt;/footer&gt;\n\n\u5f15\u5165\u65b9\u5f0f\n&lt;div th:insert=\"footer :: copy\"&gt;&lt;/div&gt;\n&lt;div th:replace=\"footer :: copy\"&gt;&lt;/div&gt;\n&lt;div th:include=\"footer :: copy\"&gt;&lt;/div&gt;\n\n\u6548\u679c\n&lt;div&gt;\n    &lt;footer&gt;\n    &amp;copy; 2011 The Good Thymes Virtual Grocery\n    &lt;/footer&gt;\n&lt;/div&gt;\n\n&lt;footer&gt;\n&amp;copy; 2011 The Good Thymes Virtual Grocery\n&lt;/footer&gt;\n\n&lt;div&gt;\n&amp;copy; 2011 The Good Thymes Virtual Grocery\n&lt;/div&gt;\n</code></pre> <p>\u5f15\u5165\u7247\u6bb5\u7684\u65f6\u5019\u4f20\u5165\u53c2\u6570\uff1a </p> <pre><code>&lt;nav class=\"col-md-2 d-none d-md-block bg-light sidebar\" id=\"sidebar\"&gt;\n    &lt;div class=\"sidebar-sticky\"&gt;\n        &lt;ul class=\"nav flex-column\"&gt;\n            &lt;li class=\"nav-item\"&gt;\n                &lt;a class=\"nav-link active\"\n                   th:class=\"${activeUri=='main.html'?'nav-link active':'nav-link'}\"\n                   href=\"#\" th:href=\"@{/main.html}\"&gt;\n                    &lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-home\"&gt;\n                        &lt;path d=\"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"&gt;&lt;/path&gt;\n                        &lt;polyline points=\"9 22 9 12 15 12 15 22\"&gt;&lt;/polyline&gt;\n                    &lt;/svg&gt;\n                    Dashboard &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;\n                &lt;/a&gt;\n            &lt;/li&gt;\n\n&lt;!--\u5f15\u5165\u4fa7\u8fb9\u680f;\u4f20\u5165\u53c2\u6570--&gt;\n&lt;div th:replace=\"commons/bar::#sidebar(activeUri='emps')\"&gt;&lt;/div&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#6crud-","title":"6\uff09\u3001CRUD-\u5458\u5de5\u6dfb\u52a0","text":"<p>\u6dfb\u52a0\u9875\u9762</p> <pre><code>&lt;form&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;LastName&lt;/label&gt;\n        &lt;input type=\"text\" class=\"form-control\" placeholder=\"zhangsan\"&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Email&lt;/label&gt;\n        &lt;input type=\"email\" class=\"form-control\" placeholder=\"zhangsan@atguigu.com\"&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Gender&lt;/label&gt;&lt;br/&gt;\n        &lt;div class=\"form-check form-check-inline\"&gt;\n            &lt;input class=\"form-check-input\" type=\"radio\" name=\"gender\"  value=\"1\"&gt;\n            &lt;label class=\"form-check-label\"&gt;\u7537&lt;/label&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-check form-check-inline\"&gt;\n            &lt;input class=\"form-check-input\" type=\"radio\" name=\"gender\"  value=\"0\"&gt;\n            &lt;label class=\"form-check-label\"&gt;\u5973&lt;/label&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;department&lt;/label&gt;\n        &lt;select class=\"form-control\"&gt;\n            &lt;option&gt;1&lt;/option&gt;\n            &lt;option&gt;2&lt;/option&gt;\n            &lt;option&gt;3&lt;/option&gt;\n            &lt;option&gt;4&lt;/option&gt;\n            &lt;option&gt;5&lt;/option&gt;\n        &lt;/select&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Birth&lt;/label&gt;\n        &lt;input type=\"text\" class=\"form-control\" placeholder=\"zhangsan\"&gt;\n    &lt;/div&gt;\n    &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;\u6dfb\u52a0&lt;/button&gt;\n&lt;/form&gt;\n</code></pre> <p>\u63d0\u4ea4\u7684\u6570\u636e\u683c\u5f0f\u4e0d\u5bf9\uff1a\u751f\u65e5\uff1a\u65e5\u671f\uff1b</p> <p>2017-12-12\uff1b2017/12/12\uff1b2017.12.12\uff1b</p> <p>\u65e5\u671f\u7684\u683c\u5f0f\u5316\uff1bSpringMVC\u5c06\u9875\u9762\u63d0\u4ea4\u7684\u503c\u9700\u8981\u8f6c\u6362\u4e3a\u6307\u5b9a\u7684\u7c7b\u578b;</p> <p>2017-12-12---Date\uff1b \u7c7b\u578b\u8f6c\u6362\uff0c\u683c\u5f0f\u5316;</p> <p>\u9ed8\u8ba4\u65e5\u671f\u662f\u6309\u7167/\u7684\u65b9\u5f0f\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#7crud-","title":"7\uff09\u3001CRUD-\u5458\u5de5\u4fee\u6539","text":"<p>\u4fee\u6539\u6dfb\u52a0\u4e8c\u5408\u4e00\u8868\u5355</p> <pre><code>&lt;!--\u9700\u8981\u533a\u5206\u662f\u5458\u5de5\u4fee\u6539\u8fd8\u662f\u6dfb\u52a0\uff1b--&gt;\n&lt;form th:action=\"@{/emp}\" method=\"post\"&gt;\n    &lt;!--\u53d1\u9001put\u8bf7\u6c42\u4fee\u6539\u5458\u5de5\u6570\u636e--&gt;\n    &lt;!--\n1\u3001SpringMVC\u4e2d\u914d\u7f6eHiddenHttpMethodFilter;\uff08SpringBoot\u81ea\u52a8\u914d\u7f6e\u597d\u7684\uff09\n2\u3001\u9875\u9762\u521b\u5efa\u4e00\u4e2apost\u8868\u5355\n3\u3001\u521b\u5efa\u4e00\u4e2ainput\u9879\uff0cname=\"_method\";\u503c\u5c31\u662f\u6211\u4eec\u6307\u5b9a\u7684\u8bf7\u6c42\u65b9\u5f0f\n--&gt;\n    &lt;input type=\"hidden\" name=\"_method\" value=\"put\" th:if=\"${emp!=null}\"/&gt;\n    &lt;input type=\"hidden\" name=\"id\" th:if=\"${emp!=null}\" th:value=\"${emp.id}\"&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;LastName&lt;/label&gt;\n        &lt;input name=\"lastName\" type=\"text\" class=\"form-control\" placeholder=\"zhangsan\" th:value=\"${emp!=null}?${emp.lastName}\"&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Email&lt;/label&gt;\n        &lt;input name=\"email\" type=\"email\" class=\"form-control\" placeholder=\"zhangsan@atguigu.com\" th:value=\"${emp!=null}?${emp.email}\"&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Gender&lt;/label&gt;&lt;br/&gt;\n        &lt;div class=\"form-check form-check-inline\"&gt;\n            &lt;input class=\"form-check-input\" type=\"radio\" name=\"gender\" value=\"1\" th:checked=\"${emp!=null}?${emp.gender==1}\"&gt;\n            &lt;label class=\"form-check-label\"&gt;\u7537&lt;/label&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-check form-check-inline\"&gt;\n            &lt;input class=\"form-check-input\" type=\"radio\" name=\"gender\" value=\"0\" th:checked=\"${emp!=null}?${emp.gender==0}\"&gt;\n            &lt;label class=\"form-check-label\"&gt;\u5973&lt;/label&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;department&lt;/label&gt;\n        &lt;!--\u63d0\u4ea4\u7684\u662f\u90e8\u95e8\u7684id--&gt;\n        &lt;select class=\"form-control\" name=\"department.id\"&gt;\n            &lt;option th:selected=\"${emp!=null}?${dept.id == emp.department.id}\" th:value=\"${dept.id}\" th:each=\"dept:${depts}\" th:text=\"${dept.departmentName}\"&gt;1&lt;/option&gt;\n        &lt;/select&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Birth&lt;/label&gt;\n        &lt;input name=\"birth\" type=\"text\" class=\"form-control\" placeholder=\"zhangsan\" th:value=\"${emp!=null}?${#dates.format(emp.birth, 'yyyy-MM-dd HH:mm')}\"&gt;\n    &lt;/div&gt;\n    &lt;button type=\"submit\" class=\"btn btn-primary\" th:text=\"${emp!=null}?'\u4fee\u6539':'\u6dfb\u52a0'\"&gt;\u6dfb\u52a0&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#8crud-","title":"8\uff09\u3001CRUD-\u5458\u5de5\u5220\u9664","text":"<pre><code>&lt;tr th:each=\"emp:${emps}\"&gt;\n    &lt;td th:text=\"${emp.id}\"&gt;&lt;/td&gt;\n    &lt;td&gt;[[${emp.lastName}]]&lt;/td&gt;\n    &lt;td th:text=\"${emp.email}\"&gt;&lt;/td&gt;\n    &lt;td th:text=\"${emp.gender}==0?'\u5973':'\u7537'\"&gt;&lt;/td&gt;\n    &lt;td th:text=\"${emp.department.departmentName}\"&gt;&lt;/td&gt;\n    &lt;td th:text=\"${#dates.format(emp.birth, 'yyyy-MM-dd HH:mm')}\"&gt;&lt;/td&gt;\n    &lt;td&gt;\n        &lt;a class=\"btn btn-sm btn-primary\" th:href=\"@{/emp/}+${emp.id}\"&gt;\u7f16\u8f91&lt;/a&gt;\n        &lt;button th:attr=\"del_uri=@{/emp/}+${emp.id}\" class=\"btn btn-sm btn-danger deleteBtn\"&gt;\u5220\u9664&lt;/button&gt;\n    &lt;/td&gt;\n&lt;/tr&gt;\n\n\n&lt;script&gt;\n    $(\".deleteBtn\").click(function(){\n        //\u5220\u9664\u5f53\u524d\u5458\u5de5\u7684\n        $(\"#deleteEmpForm\").attr(\"action\",$(this).attr(\"del_uri\")).submit();\n        return false;\n    });\n&lt;/script&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#7_1","title":"7\u3001\u9519\u8bef\u5904\u7406\u673a\u5236","text":""},{"location":"Java/SpringBoot/SpringBoot/#1springboot","title":"1\uff09\u3001SpringBoot\u9ed8\u8ba4\u7684\u9519\u8bef\u5904\u7406\u673a\u5236","text":"<p>\u9ed8\u8ba4\u6548\u679c\uff1a</p> <p>\u200b       1\uff09\u3001\u6d4f\u89c8\u5668\uff0c\u8fd4\u56de\u4e00\u4e2a\u9ed8\u8ba4\u7684\u9519\u8bef\u9875\u9762</p> <p></p> <p>\u6d4f\u89c8\u5668\u53d1\u9001\u8bf7\u6c42\u7684\u8bf7\u6c42\u5934\uff1a</p> <p></p> <p>\u200b       2\uff09\u3001\u5982\u679c\u662f\u5176\u4ed6\u5ba2\u6237\u7aef\uff0c\u9ed8\u8ba4\u54cd\u5e94\u4e00\u4e2ajson\u6570\u636e</p> <p></p> <p>\u200b       </p> <p>\u539f\u7406\uff1a</p> <p>\u200b   \u53ef\u4ee5\u53c2\u7167ErrorMvcAutoConfiguration\uff1b\u9519\u8bef\u5904\u7406\u7684\u81ea\u52a8\u914d\u7f6e\uff1b</p> <pre><code>\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u4e86\u4ee5\u4e0b\u7ec4\u4ef6\n</code></pre> <p>\u200b   1\u3001DefaultErrorAttributes\uff1a</p> <pre><code>\u5e2e\u6211\u4eec\u5728\u9875\u9762\u5171\u4eab\u4fe1\u606f\uff1b\n@Override\n    public Map&lt;String, Object&gt; getErrorAttributes(RequestAttributes requestAttributes,\n            boolean includeStackTrace) {\n        Map&lt;String, Object&gt; errorAttributes = new LinkedHashMap&lt;String, Object&gt;();\n        errorAttributes.put(\"timestamp\", new Date());\n        addStatus(errorAttributes, requestAttributes);\n        addErrorDetails(errorAttributes, requestAttributes, includeStackTrace);\n        addPath(errorAttributes, requestAttributes);\n        return errorAttributes;\n    }\n</code></pre> <p>\u200b   2\u3001BasicErrorController\uff1a\u5904\u7406\u9ed8\u8ba4/error\u8bf7\u6c42</p> <pre><code>@Controller\n@RequestMapping(\"${server.error.path:${error.path:/error}}\")\npublic class BasicErrorController extends AbstractErrorController {\n\n    @RequestMapping(produces = \"text/html\")//\u4ea7\u751fhtml\u7c7b\u578b\u7684\u6570\u636e\uff1b\u6d4f\u89c8\u5668\u53d1\u9001\u7684\u8bf7\u6c42\u6765\u5230\u8fd9\u4e2a\u65b9\u6cd5\u5904\u7406\n    public ModelAndView errorHtml(HttpServletRequest request,\n            HttpServletResponse response) {\n        HttpStatus status = getStatus(request);\n        Map&lt;String, Object&gt; model = Collections.unmodifiableMap(getErrorAttributes(\n                request, isIncludeStackTrace(request, MediaType.TEXT_HTML)));\n        response.setStatus(status.value());\n\n        //\u53bb\u54ea\u4e2a\u9875\u9762\u4f5c\u4e3a\u9519\u8bef\u9875\u9762\uff1b\u5305\u542b\u9875\u9762\u5730\u5740\u548c\u9875\u9762\u5185\u5bb9\n        ModelAndView modelAndView = resolveErrorView(request, response, status, model);\n        return (modelAndView == null ? new ModelAndView(\"error\", model) : modelAndView);\n    }\n\n    @RequestMapping\n    @ResponseBody    //\u4ea7\u751fjson\u6570\u636e\uff0c\u5176\u4ed6\u5ba2\u6237\u7aef\u6765\u5230\u8fd9\u4e2a\u65b9\u6cd5\u5904\u7406\uff1b\n    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; error(HttpServletRequest request) {\n        Map&lt;String, Object&gt; body = getErrorAttributes(request,\n                isIncludeStackTrace(request, MediaType.ALL));\n        HttpStatus status = getStatus(request);\n        return new ResponseEntity&lt;Map&lt;String, Object&gt;&gt;(body, status);\n    }\n</code></pre> <p>\u200b   3\u3001ErrorPageCustomizer\uff1a</p> <pre><code>    @Value(\"${error.path:/error}\")\n    private String path = \"/error\";  \u7cfb\u7edf\u51fa\u73b0\u9519\u8bef\u4ee5\u540e\u6765\u5230error\u8bf7\u6c42\u8fdb\u884c\u5904\u7406\uff1b\uff08web.xml\u6ce8\u518c\u7684\u9519\u8bef\u9875\u9762\u89c4\u5219\uff09\n</code></pre> <p>\u200b   4\u3001DefaultErrorViewResolver\uff1a</p> <pre><code>@Override\n    public ModelAndView resolveErrorView(HttpServletRequest request, HttpStatus status,\n            Map&lt;String, Object&gt; model) {\n        ModelAndView modelAndView = resolve(String.valueOf(status), model);\n        if (modelAndView == null &amp;&amp; SERIES_VIEWS.containsKey(status.series())) {\n            modelAndView = resolve(SERIES_VIEWS.get(status.series()), model);\n        }\n        return modelAndView;\n    }\n\n    private ModelAndView resolve(String viewName, Map&lt;String, Object&gt; model) {\n        //\u9ed8\u8ba4SpringBoot\u53ef\u4ee5\u53bb\u627e\u5230\u4e00\u4e2a\u9875\u9762\uff1f  error/404\n        String errorViewName = \"error/\" + viewName;\n\n        //\u6a21\u677f\u5f15\u64ce\u53ef\u4ee5\u89e3\u6790\u8fd9\u4e2a\u9875\u9762\u5730\u5740\u5c31\u7528\u6a21\u677f\u5f15\u64ce\u89e3\u6790\n        TemplateAvailabilityProvider provider = this.templateAvailabilityProviders\n                .getProvider(errorViewName, this.applicationContext);\n        if (provider != null) {\n            //\u6a21\u677f\u5f15\u64ce\u53ef\u7528\u7684\u60c5\u51b5\u4e0b\u8fd4\u56de\u5230errorViewName\u6307\u5b9a\u7684\u89c6\u56fe\u5730\u5740\n            return new ModelAndView(errorViewName, model);\n        }\n        //\u6a21\u677f\u5f15\u64ce\u4e0d\u53ef\u7528\uff0c\u5c31\u5728\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u5939\u4e0b\u627eerrorViewName\u5bf9\u5e94\u7684\u9875\u9762   error/404.html\n        return resolveResource(errorViewName, model);\n    }\n</code></pre> <p>\u200b   \u6b65\u9aa4\uff1a</p> <p>\u200b       \u4e00\u4f46\u7cfb\u7edf\u51fa\u73b04xx\u6216\u80055xx\u4e4b\u7c7b\u7684\u9519\u8bef\uff1bErrorPageCustomizer\u5c31\u4f1a\u751f\u6548\uff08\u5b9a\u5236\u9519\u8bef\u7684\u54cd\u5e94\u89c4\u5219\uff09\uff1b\u5c31\u4f1a\u6765\u5230/error\u8bf7\u6c42\uff1b\u5c31\u4f1a\u88abBasicErrorController\u5904\u7406\uff1b</p> <p>\u200b       1\uff09\u54cd\u5e94\u9875\u9762\uff1b\u53bb\u54ea\u4e2a\u9875\u9762\u662f\u7531DefaultErrorViewResolver\u89e3\u6790\u5f97\u5230\u7684\uff1b</p> <pre><code>protected ModelAndView resolveErrorView(HttpServletRequest request,\n      HttpServletResponse response, HttpStatus status, Map&lt;String, Object&gt; model) {\n    //\u6240\u6709\u7684ErrorViewResolver\u5f97\u5230ModelAndView\n   for (ErrorViewResolver resolver : this.errorViewResolvers) {\n      ModelAndView modelAndView = resolver.resolveErrorView(request, status, model);\n      if (modelAndView != null) {\n         return modelAndView;\n      }\n   }\n   return null;\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#2_9","title":"2\uff09\u3001\u5982\u679c\u5b9a\u5236\u9519\u8bef\u54cd\u5e94\uff1a","text":""},{"location":"Java/SpringBoot/SpringBoot/#1_9","title":"1\uff09\u3001\u5982\u4f55\u5b9a\u5236\u9519\u8bef\u7684\u9875\u9762\uff1b","text":"<p>\u200b           1\uff09\u3001\u6709\u6a21\u677f\u5f15\u64ce\u7684\u60c5\u51b5\u4e0b\uff1berror/\u72b6\u6001\u7801; \u3010\u5c06\u9519\u8bef\u9875\u9762\u547d\u540d\u4e3a  \u9519\u8bef\u72b6\u6001\u7801.html \u653e\u5728\u6a21\u677f\u5f15\u64ce\u6587\u4ef6\u5939\u91cc\u9762\u7684 error\u6587\u4ef6\u5939\u4e0b\u3011\uff0c\u53d1\u751f\u6b64\u72b6\u6001\u7801\u7684\u9519\u8bef\u5c31\u4f1a\u6765\u5230  \u5bf9\u5e94\u7684\u9875\u9762\uff1b</p> <p>\u200b           \u6211\u4eec\u53ef\u4ee5\u4f7f\u75284xx\u548c5xx\u4f5c\u4e3a\u9519\u8bef\u9875\u9762\u7684\u6587\u4ef6\u540d\u6765\u5339\u914d\u8fd9\u79cd\u7c7b\u578b\u7684\u6240\u6709\u9519\u8bef\uff0c\u7cbe\u786e\u4f18\u5148\uff08\u4f18\u5148\u5bfb\u627e\u7cbe\u786e\u7684\u72b6\u6001\u7801.html\uff09\uff1b      </p> <p>\u200b           \u9875\u9762\u80fd\u83b7\u53d6\u7684\u4fe1\u606f\uff1b</p> <p>\u200b               timestamp\uff1a\u65f6\u95f4\u6233</p> <p>\u200b               status\uff1a\u72b6\u6001\u7801</p> <p>\u200b               error\uff1a\u9519\u8bef\u63d0\u793a</p> <p>\u200b               exception\uff1a\u5f02\u5e38\u5bf9\u8c61</p> <p>\u200b               message\uff1a\u5f02\u5e38\u6d88\u606f</p> <p>\u200b               errors\uff1aJSR303\u6570\u636e\u6821\u9a8c\u7684\u9519\u8bef\u90fd\u5728\u8fd9\u91cc</p> <p>\u200b           2\uff09\u3001\u6ca1\u6709\u6a21\u677f\u5f15\u64ce\uff08\u6a21\u677f\u5f15\u64ce\u627e\u4e0d\u5230\u8fd9\u4e2a\u9519\u8bef\u9875\u9762\uff09\uff0c\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u5939\u4e0b\u627e\uff1b</p> <p>\u200b           3\uff09\u3001\u4ee5\u4e0a\u90fd\u6ca1\u6709\u9519\u8bef\u9875\u9762\uff0c\u5c31\u662f\u9ed8\u8ba4\u6765\u5230SpringBoot\u9ed8\u8ba4\u7684\u9519\u8bef\u63d0\u793a\u9875\u9762\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#2json","title":"2\uff09\u3001\u5982\u4f55\u5b9a\u5236\u9519\u8bef\u7684json\u6570\u636e\uff1b","text":"<p>\u200b       1\uff09\u3001\u81ea\u5b9a\u4e49\u5f02\u5e38\u5904\u7406&amp;\u8fd4\u56de\u5b9a\u5236json\u6570\u636e\uff1b</p> <pre><code>@ControllerAdvice\npublic class MyExceptionHandler {\n\n    @ResponseBody\n    @ExceptionHandler(UserNotExistException.class)\n    public Map&lt;String,Object&gt; handleException(Exception e){\n        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();\n        map.put(\"code\",\"user.notexist\");\n        map.put(\"message\",e.getMessage());\n        return map;\n    }\n}\n//\u6ca1\u6709\u81ea\u9002\u5e94\u6548\u679c...\n</code></pre> <p>\u200b       2\uff09\u3001\u8f6c\u53d1\u5230/error\u8fdb\u884c\u81ea\u9002\u5e94\u54cd\u5e94\u6548\u679c\u5904\u7406</p> <pre><code> @ExceptionHandler(UserNotExistException.class)\n    public String handleException(Exception e, HttpServletRequest request){\n        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();\n        //\u4f20\u5165\u6211\u4eec\u81ea\u5df1\u7684\u9519\u8bef\u72b6\u6001\u7801  4xx 5xx\uff0c\u5426\u5219\u5c31\u4e0d\u4f1a\u8fdb\u5165\u5b9a\u5236\u9519\u8bef\u9875\u9762\u7684\u89e3\u6790\u6d41\u7a0b\n        /**\n         * Integer statusCode = (Integer) request\n         .getAttribute(\"javax.servlet.error.status_code\");\n         */\n        request.setAttribute(\"javax.servlet.error.status_code\",500);\n        map.put(\"code\",\"user.notexist\");\n        map.put(\"message\",e.getMessage());\n        //\u8f6c\u53d1\u5230/error\n        return \"forward:/error\";\n    }\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#3_6","title":"3\uff09\u3001\u5c06\u6211\u4eec\u7684\u5b9a\u5236\u6570\u636e\u643a\u5e26\u51fa\u53bb\uff1b","text":"<p>\u51fa\u73b0\u9519\u8bef\u4ee5\u540e\uff0c\u4f1a\u6765\u5230/error\u8bf7\u6c42\uff0c\u4f1a\u88abBasicErrorController\u5904\u7406\uff0c\u54cd\u5e94\u51fa\u53bb\u53ef\u4ee5\u83b7\u53d6\u7684\u6570\u636e\u662f\u7531getErrorAttributes\u5f97\u5230\u7684\uff08\u662fAbstractErrorController\uff08ErrorController\uff09\u89c4\u5b9a\u7684\u65b9\u6cd5\uff09\uff1b</p> <p>\u200b   1\u3001\u5b8c\u5168\u6765\u7f16\u5199\u4e00\u4e2aErrorController\u7684\u5b9e\u73b0\u7c7b\u3010\u6216\u8005\u662f\u7f16\u5199AbstractErrorController\u7684\u5b50\u7c7b\u3011\uff0c\u653e\u5728\u5bb9\u5668\u4e2d\uff1b</p> <p>\u200b   2\u3001\u9875\u9762\u4e0a\u80fd\u7528\u7684\u6570\u636e\uff0c\u6216\u8005\u662fjson\u8fd4\u56de\u80fd\u7528\u7684\u6570\u636e\u90fd\u662f\u901a\u8fc7errorAttributes.getErrorAttributes\u5f97\u5230\uff1b</p> <p>\u200b           \u5bb9\u5668\u4e2dDefaultErrorAttributes.getErrorAttributes()\uff1b\u9ed8\u8ba4\u8fdb\u884c\u6570\u636e\u5904\u7406\u7684\uff1b</p> <p>\u81ea\u5b9a\u4e49ErrorAttributes</p> <pre><code>//\u7ed9\u5bb9\u5668\u4e2d\u52a0\u5165\u6211\u4eec\u81ea\u5df1\u5b9a\u4e49\u7684ErrorAttributes\n@Component\npublic class MyErrorAttributes extends DefaultErrorAttributes {\n\n    @Override\n    public Map&lt;String, Object&gt; getErrorAttributes(RequestAttributes requestAttributes, boolean includeStackTrace) {\n        Map&lt;String, Object&gt; map = super.getErrorAttributes(requestAttributes, includeStackTrace);\n        map.put(\"company\",\"atguigu\");\n        return map;\n    }\n}\n</code></pre> <p>\u6700\u7ec8\u7684\u6548\u679c\uff1a\u54cd\u5e94\u662f\u81ea\u9002\u5e94\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b9a\u5236ErrorAttributes\u6539\u53d8\u9700\u8981\u8fd4\u56de\u7684\u5185\u5bb9\uff0c</p> <p></p>"},{"location":"Java/SpringBoot/SpringBoot/#8servlet","title":"8\u3001\u914d\u7f6e\u5d4c\u5165\u5f0fServlet\u5bb9\u5668","text":"<p>SpringBoot\u9ed8\u8ba4\u4f7f\u7528Tomcat\u4f5c\u4e3a\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\uff1b</p> <p></p> <p>\u95ee\u9898\uff1f</p>"},{"location":"Java/SpringBoot/SpringBoot/#1servlet","title":"1\uff09\u3001\u5982\u4f55\u5b9a\u5236\u548c\u4fee\u6539Servlet\u5bb9\u5668\u7684\u76f8\u5173\u914d\u7f6e\uff1b","text":"<p>1\u3001\u4fee\u6539\u548cserver\u6709\u5173\u7684\u914d\u7f6e\uff08ServerProperties\u3010\u4e5f\u662fEmbeddedServletContainerCustomizer\u3011\uff09\uff1b</p> <pre><code>server.port=8081\nserver.context-path=/crud\n\nserver.tomcat.uri-encoding=UTF-8\n\n//\u901a\u7528\u7684Servlet\u5bb9\u5668\u8bbe\u7f6e\nserver.xxx\n//Tomcat\u7684\u8bbe\u7f6e\nserver.tomcat.xxx\n</code></pre> <p>2\u3001\u7f16\u5199\u4e00\u4e2aEmbeddedServletContainerCustomizer\uff1a\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\u7684\u5b9a\u5236\u5668\uff1b\u6765\u4fee\u6539Servlet\u5bb9\u5668\u7684\u914d\u7f6e</p> <pre><code>@Bean  //\u4e00\u5b9a\u8981\u5c06\u8fd9\u4e2a\u5b9a\u5236\u5668\u52a0\u5165\u5230\u5bb9\u5668\u4e2d\npublic EmbeddedServletContainerCustomizer embeddedServletContainerCustomizer(){\n    return new EmbeddedServletContainerCustomizer() {\n\n        //\u5b9a\u5236\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\u76f8\u5173\u7684\u89c4\u5219\n        @Override\n        public void customize(ConfigurableEmbeddedServletContainer container) {\n            container.setPort(8083);\n        }\n    };\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#2servletservletfilterlistener","title":"2\uff09\u3001\u6ce8\u518cServlet\u4e09\u5927\u7ec4\u4ef6\u3010Servlet\u3001Filter\u3001Listener\u3011","text":"<p>\u7531\u4e8eSpringBoot\u9ed8\u8ba4\u662f\u4ee5jar\u5305\u7684\u65b9\u5f0f\u542f\u52a8\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\u6765\u542f\u52a8SpringBoot\u7684web\u5e94\u7528\uff0c\u6ca1\u6709web.xml\u6587\u4ef6\u3002</p> <p>\u6ce8\u518c\u4e09\u5927\u7ec4\u4ef6\u7528\u4ee5\u4e0b\u65b9\u5f0f</p> <p>ServletRegistrationBean</p> <pre><code>//\u6ce8\u518c\u4e09\u5927\u7ec4\u4ef6\n@Bean\npublic ServletRegistrationBean myServlet(){\n    ServletRegistrationBean registrationBean = new ServletRegistrationBean(new MyServlet(),\"/myServlet\");\n    return registrationBean;\n}\n</code></pre> <p>FilterRegistrationBean</p> <pre><code>@Bean\npublic FilterRegistrationBean myFilter(){\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\n    registrationBean.setFilter(new MyFilter());\n    registrationBean.setUrlPatterns(Arrays.asList(\"/hello\",\"/myServlet\"));\n    return registrationBean;\n}\n</code></pre> <p>ServletListenerRegistrationBean</p> <pre><code>@Bean\npublic ServletListenerRegistrationBean myListener(){\n    ServletListenerRegistrationBean&lt;MyListener&gt; registrationBean = new ServletListenerRegistrationBean&lt;&gt;(new MyListener());\n    return registrationBean;\n}\n</code></pre> <p>SpringBoot\u5e2e\u6211\u4eec\u81ea\u52a8SpringMVC\u7684\u65f6\u5019\uff0c\u81ea\u52a8\u7684\u6ce8\u518cSpringMVC\u7684\u524d\u7aef\u63a7\u5236\u5668\uff1bDIspatcherServlet\uff1b</p> <p>DispatcherServletAutoConfiguration\u4e2d\uff1a</p> <pre><code>@Bean(name = DEFAULT_DISPATCHER_SERVLET_REGISTRATION_BEAN_NAME)\n@ConditionalOnBean(value = DispatcherServlet.class, name = DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)\npublic ServletRegistrationBean dispatcherServletRegistration(\n      DispatcherServlet dispatcherServlet) {\n   ServletRegistrationBean registration = new ServletRegistrationBean(\n         dispatcherServlet, this.serverProperties.getServletMapping());\n    //\u9ed8\u8ba4\u62e6\u622a\uff1a /  \u6240\u6709\u8bf7\u6c42\uff1b\u5305\u9759\u6001\u8d44\u6e90\uff0c\u4f46\u662f\u4e0d\u62e6\u622ajsp\u8bf7\u6c42\uff1b   /*\u4f1a\u62e6\u622ajsp\n    //\u53ef\u4ee5\u901a\u8fc7server.servletPath\u6765\u4fee\u6539SpringMVC\u524d\u7aef\u63a7\u5236\u5668\u9ed8\u8ba4\u62e6\u622a\u7684\u8bf7\u6c42\u8def\u5f84\n\n   registration.setName(DEFAULT_DISPATCHER_SERVLET_BEAN_NAME);\n   registration.setLoadOnStartup(\n         this.webMvcProperties.getServlet().getLoadOnStartup());\n   if (this.multipartConfig != null) {\n      registration.setMultipartConfig(this.multipartConfig);\n   }\n   return registration;\n}\n</code></pre> <p>2\uff09\u3001SpringBoot\u80fd\u4e0d\u80fd\u652f\u6301\u5176\u4ed6\u7684Servlet\u5bb9\u5668\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#3servlet","title":"3\uff09\u3001\u66ff\u6362\u4e3a\u5176\u4ed6\u5d4c\u5165\u5f0fServlet\u5bb9\u5668","text":"<p>\u9ed8\u8ba4\u652f\u6301\uff1a</p> <p>Tomcat\uff08\u9ed8\u8ba4\u4f7f\u7528\uff09</p> <pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n   \u5f15\u5165web\u6a21\u5757\u9ed8\u8ba4\u5c31\u662f\u4f7f\u7528\u5d4c\u5165\u5f0f\u7684Tomcat\u4f5c\u4e3aServlet\u5bb9\u5668\uff1b\n&lt;/dependency&gt;\n</code></pre> <p>Jetty</p> <pre><code>&lt;!-- \u5f15\u5165web\u6a21\u5757 --&gt;\n&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n   &lt;exclusions&gt;\n      &lt;exclusion&gt;\n         &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;/exclusion&gt;\n   &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n&lt;!--\u5f15\u5165\u5176\u4ed6\u7684Servlet\u5bb9\u5668--&gt;\n&lt;dependency&gt;\n   &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;/dependency&gt;\n</code></pre> <p>Undertow</p> <pre><code>&lt;!-- \u5f15\u5165web\u6a21\u5757 --&gt;\n&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n   &lt;exclusions&gt;\n      &lt;exclusion&gt;\n         &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;/exclusion&gt;\n   &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n&lt;!--\u5f15\u5165\u5176\u4ed6\u7684Servlet\u5bb9\u5668--&gt;\n&lt;dependency&gt;\n   &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#4servlet","title":"4\uff09\u3001\u5d4c\u5165\u5f0fServlet\u5bb9\u5668\u81ea\u52a8\u914d\u7f6e\u539f\u7406\uff1b","text":"<p>EmbeddedServletContainerAutoConfiguration\uff1a\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\u81ea\u52a8\u914d\u7f6e\uff1f</p> <pre><code>@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)\n@Configuration\n@ConditionalOnWebApplication\n@Import(BeanPostProcessorsRegistrar.class)\n//\u5bfc\u5165BeanPostProcessorsRegistrar\uff1aSpring\u6ce8\u89e3\u7248\uff1b\u7ed9\u5bb9\u5668\u4e2d\u5bfc\u5165\u4e00\u4e9b\u7ec4\u4ef6\n//\u5bfc\u5165\u4e86EmbeddedServletContainerCustomizerBeanPostProcessor\uff1a\n//\u540e\u7f6e\u5904\u7406\u5668\uff1abean\u521d\u59cb\u5316\u524d\u540e\uff08\u521b\u5efa\u5b8c\u5bf9\u8c61\uff0c\u8fd8\u6ca1\u8d4b\u503c\u8d4b\u503c\uff09\u6267\u884c\u521d\u59cb\u5316\u5de5\u4f5c\npublic class EmbeddedServletContainerAutoConfiguration {\n\n    @Configuration\n    @ConditionalOnClass({ Servlet.class, Tomcat.class })//\u5224\u65ad\u5f53\u524d\u662f\u5426\u5f15\u5165\u4e86Tomcat\u4f9d\u8d56\uff1b\n    @ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT)//\u5224\u65ad\u5f53\u524d\u5bb9\u5668\u6ca1\u6709\u7528\u6237\u81ea\u5df1\u5b9a\u4e49EmbeddedServletContainerFactory\uff1a\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\u5de5\u5382\uff1b\u4f5c\u7528\uff1a\u521b\u5efa\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\n    public static class EmbeddedTomcat {\n\n        @Bean\n        public TomcatEmbeddedServletContainerFactory tomcatEmbeddedServletContainerFactory() {\n            return new TomcatEmbeddedServletContainerFactory();\n        }\n\n    }\n\n    /**\n     * Nested configuration if Jetty is being used.\n     */\n    @Configuration\n    @ConditionalOnClass({ Servlet.class, Server.class, Loader.class,\n            WebAppContext.class })\n    @ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT)\n    public static class EmbeddedJetty {\n\n        @Bean\n        public JettyEmbeddedServletContainerFactory jettyEmbeddedServletContainerFactory() {\n            return new JettyEmbeddedServletContainerFactory();\n        }\n\n    }\n\n    /**\n     * Nested configuration if Undertow is being used.\n     */\n    @Configuration\n    @ConditionalOnClass({ Servlet.class, Undertow.class, SslClientAuthMode.class })\n    @ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT)\n    public static class EmbeddedUndertow {\n\n        @Bean\n        public UndertowEmbeddedServletContainerFactory undertowEmbeddedServletContainerFactory() {\n            return new UndertowEmbeddedServletContainerFactory();\n        }\n\n    }\n</code></pre> <p>1\uff09\u3001EmbeddedServletContainerFactory\uff08\u5d4c\u5165\u5f0fServlet\u5bb9\u5668\u5de5\u5382\uff09</p> <pre><code>public interface EmbeddedServletContainerFactory {\n\n   //\u83b7\u53d6\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\n   EmbeddedServletContainer getEmbeddedServletContainer(\n         ServletContextInitializer... initializers);\n\n}\n</code></pre> <p></p> <p>2\uff09\u3001EmbeddedServletContainer\uff1a\uff08\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\uff09</p> <p></p> <p>3\uff09\u3001\u4ee5TomcatEmbeddedServletContainerFactory\u4e3a\u4f8b</p> <pre><code>@Override\npublic EmbeddedServletContainer getEmbeddedServletContainer(\n      ServletContextInitializer... initializers) {\n    //\u521b\u5efa\u4e00\u4e2aTomcat\n   Tomcat tomcat = new Tomcat();\n\n    //\u914d\u7f6eTomcat\u7684\u57fa\u672c\u73af\u8282\n   File baseDir = (this.baseDirectory != null ? this.baseDirectory\n         : createTempDir(\"tomcat\"));\n   tomcat.setBaseDir(baseDir.getAbsolutePath());\n   Connector connector = new Connector(this.protocol);\n   tomcat.getService().addConnector(connector);\n   customizeConnector(connector);\n   tomcat.setConnector(connector);\n   tomcat.getHost().setAutoDeploy(false);\n   configureEngine(tomcat.getEngine());\n   for (Connector additionalConnector : this.additionalTomcatConnectors) {\n      tomcat.getService().addConnector(additionalConnector);\n   }\n   prepareContext(tomcat.getHost(), initializers);\n\n    //\u5c06\u914d\u7f6e\u597d\u7684Tomcat\u4f20\u5165\u8fdb\u53bb\uff0c\u8fd4\u56de\u4e00\u4e2aEmbeddedServletContainer\uff1b\u5e76\u4e14\u542f\u52a8Tomcat\u670d\u52a1\u5668\n   return getTomcatEmbeddedServletContainer(tomcat);\n}\n</code></pre> <p>4\uff09\u3001\u6211\u4eec\u5bf9\u5d4c\u5165\u5f0f\u5bb9\u5668\u7684\u914d\u7f6e\u4fee\u6539\u662f\u600e\u4e48\u751f\u6548\uff1f</p> <pre><code>ServerProperties\u3001EmbeddedServletContainerCustomizer\n</code></pre> <p>EmbeddedServletContainerCustomizer\uff1a\u5b9a\u5236\u5668\u5e2e\u6211\u4eec\u4fee\u6539\u4e86Servlet\u5bb9\u5668\u7684\u914d\u7f6e\uff1f</p> <p>\u600e\u4e48\u4fee\u6539\u7684\u539f\u7406\uff1f</p> <p>5\uff09\u3001\u5bb9\u5668\u4e2d\u5bfc\u5165\u4e86EmbeddedServletContainerCustomizerBeanPostProcessor</p> <pre><code>//\u521d\u59cb\u5316\u4e4b\u524d\n@Override\npublic Object postProcessBeforeInitialization(Object bean, String beanName)\n      throws BeansException {\n    //\u5982\u679c\u5f53\u524d\u521d\u59cb\u5316\u7684\u662f\u4e00\u4e2aConfigurableEmbeddedServletContainer\u7c7b\u578b\u7684\u7ec4\u4ef6\n   if (bean instanceof ConfigurableEmbeddedServletContainer) {\n       //\n      postProcessBeforeInitialization((ConfigurableEmbeddedServletContainer) bean);\n   }\n   return bean;\n}\n\nprivate void postProcessBeforeInitialization(\n            ConfigurableEmbeddedServletContainer bean) {\n    //\u83b7\u53d6\u6240\u6709\u7684\u5b9a\u5236\u5668\uff0c\u8c03\u7528\u6bcf\u4e00\u4e2a\u5b9a\u5236\u5668\u7684customize\u65b9\u6cd5\u6765\u7ed9Servlet\u5bb9\u5668\u8fdb\u884c\u5c5e\u6027\u8d4b\u503c\uff1b\n    for (EmbeddedServletContainerCustomizer customizer : getCustomizers()) {\n        customizer.customize(bean);\n    }\n}\n\nprivate Collection&lt;EmbeddedServletContainerCustomizer&gt; getCustomizers() {\n    if (this.customizers == null) {\n        // Look up does not include the parent context\n        this.customizers = new ArrayList&lt;EmbeddedServletContainerCustomizer&gt;(\n            this.beanFactory\n            //\u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6\u6240\u6709\u8fd9\u845b\u7c7b\u578b\u7684\u7ec4\u4ef6\uff1aEmbeddedServletContainerCustomizer\n            //\u5b9a\u5236Servlet\u5bb9\u5668\uff0c\u7ed9\u5bb9\u5668\u4e2d\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2aEmbeddedServletContainerCustomizer\u7c7b\u578b\u7684\u7ec4\u4ef6\n            .getBeansOfType(EmbeddedServletContainerCustomizer.class,\n                            false, false)\n            .values());\n        Collections.sort(this.customizers, AnnotationAwareOrderComparator.INSTANCE);\n        this.customizers = Collections.unmodifiableList(this.customizers);\n    }\n    return this.customizers;\n}\n\nServerProperties\u4e5f\u662f\u5b9a\u5236\u5668\n</code></pre> <p>\u6b65\u9aa4\uff1a</p> <p>1\uff09\u3001SpringBoot\u6839\u636e\u5bfc\u5165\u7684\u4f9d\u8d56\u60c5\u51b5\uff0c\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u76f8\u5e94\u7684EmbeddedServletContainerFactory\u3010TomcatEmbeddedServletContainerFactory\u3011</p> <p>2\uff09\u3001\u5bb9\u5668\u4e2d\u67d0\u4e2a\u7ec4\u4ef6\u8981\u521b\u5efa\u5bf9\u8c61\u5c31\u4f1a\u60ca\u52a8\u540e\u7f6e\u5904\u7406\u5668\uff1bEmbeddedServletContainerCustomizerBeanPostProcessor\uff1b</p> <p>\u53ea\u8981\u662f\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\u5de5\u5382\uff0c\u540e\u7f6e\u5904\u7406\u5668\u5c31\u5de5\u4f5c\uff1b</p> <p>3\uff09\u3001\u540e\u7f6e\u5904\u7406\u5668\uff0c\u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6\u6240\u6709\u7684EmbeddedServletContainerCustomizer\uff0c\u8c03\u7528\u5b9a\u5236\u5668\u7684\u5b9a\u5236\u65b9\u6cd5</p>"},{"location":"Java/SpringBoot/SpringBoot/#5servlet","title":"5\uff09\u3001\u5d4c\u5165\u5f0fServlet\u5bb9\u5668\u542f\u52a8\u539f\u7406\uff1b","text":"<p>\u4ec0\u4e48\u65f6\u5019\u521b\u5efa\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\u5de5\u5382\uff1f\u4ec0\u4e48\u65f6\u5019\u83b7\u53d6\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\u5e76\u542f\u52a8Tomcat\uff1b</p> <p>\u83b7\u53d6\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\u5de5\u5382\uff1a</p> <p>1\uff09\u3001SpringBoot\u5e94\u7528\u542f\u52a8\u8fd0\u884crun\u65b9\u6cd5</p> <p>2\uff09\u3001refreshContext(context);SpringBoot\u5237\u65b0IOC\u5bb9\u5668\u3010\u521b\u5efaIOC\u5bb9\u5668\u5bf9\u8c61\uff0c\u5e76\u521d\u59cb\u5316\u5bb9\u5668\uff0c\u521b\u5efa\u5bb9\u5668\u4e2d\u7684\u6bcf\u4e00\u4e2a\u7ec4\u4ef6\u3011\uff1b\u5982\u679c\u662fweb\u5e94\u7528\u521b\u5efaAnnotationConfigEmbeddedWebApplicationContext\uff0c\u5426\u5219\uff1aAnnotationConfigApplicationContext</p> <p>3\uff09\u3001refresh(context);\u5237\u65b0\u521a\u624d\u521b\u5efa\u597d\u7684ioc\u5bb9\u5668\uff1b</p> <pre><code>public void refresh() throws BeansException, IllegalStateException {\n   synchronized (this.startupShutdownMonitor) {\n      // Prepare this context for refreshing.\n      prepareRefresh();\n\n      // Tell the subclass to refresh the internal bean factory.\n      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();\n\n      // Prepare the bean factory for use in this context.\n      prepareBeanFactory(beanFactory);\n\n      try {\n         // Allows post-processing of the bean factory in context subclasses.\n         postProcessBeanFactory(beanFactory);\n\n         // Invoke factory processors registered as beans in the context.\n         invokeBeanFactoryPostProcessors(beanFactory);\n\n         // Register bean processors that intercept bean creation.\n         registerBeanPostProcessors(beanFactory);\n\n         // Initialize message source for this context.\n         initMessageSource();\n\n         // Initialize event multicaster for this context.\n         initApplicationEventMulticaster();\n\n         // Initialize other special beans in specific context subclasses.\n         onRefresh();\n\n         // Check for listener beans and register them.\n         registerListeners();\n\n         // Instantiate all remaining (non-lazy-init) singletons.\n         finishBeanFactoryInitialization(beanFactory);\n\n         // Last step: publish corresponding event.\n         finishRefresh();\n      }\n\n      catch (BeansException ex) {\n         if (logger.isWarnEnabled()) {\n            logger.warn(\"Exception encountered during context initialization - \" +\n                  \"cancelling refresh attempt: \" + ex);\n         }\n\n         // Destroy already created singletons to avoid dangling resources.\n         destroyBeans();\n\n         // Reset 'active' flag.\n         cancelRefresh(ex);\n\n         // Propagate exception to caller.\n         throw ex;\n      }\n\n      finally {\n         // Reset common introspection caches in Spring's core, since we\n         // might not ever need metadata for singleton beans anymore...\n         resetCommonCaches();\n      }\n   }\n}\n</code></pre> <p>4\uff09\u3001  onRefresh(); web\u7684ioc\u5bb9\u5668\u91cd\u5199\u4e86onRefresh\u65b9\u6cd5</p> <p>5\uff09\u3001webioc\u5bb9\u5668\u4f1a\u521b\u5efa\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\uff1bcreateEmbeddedServletContainer();</p> <p>6\uff09\u3001\u83b7\u53d6\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\u5de5\u5382\uff1a</p> <p>EmbeddedServletContainerFactory containerFactory = getEmbeddedServletContainerFactory();</p> <p>\u200b   \u4eceioc\u5bb9\u5668\u4e2d\u83b7\u53d6EmbeddedServletContainerFactory \u7ec4\u4ef6\uff1bTomcatEmbeddedServletContainerFactory\u521b\u5efa\u5bf9\u8c61\uff0c\u540e\u7f6e\u5904\u7406\u5668\u4e00\u770b\u662f\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u5c31\u83b7\u53d6\u6240\u6709\u7684\u5b9a\u5236\u5668\u6765\u5148\u5b9a\u5236Servlet\u5bb9\u5668\u7684\u76f8\u5173\u914d\u7f6e\uff1b</p> <p>7\uff09\u3001\u4f7f\u7528\u5bb9\u5668\u5de5\u5382\u83b7\u53d6\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\uff1athis.embeddedServletContainer = containerFactory      .getEmbeddedServletContainer(getSelfInitializer());</p> <p>8\uff09\u3001\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\u521b\u5efa\u5bf9\u8c61\u5e76\u542f\u52a8Servlet\u5bb9\u5668\uff1b</p> <p>\u5148\u542f\u52a8\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\uff0c\u518d\u5c06ioc\u5bb9\u5668\u4e2d\u5269\u4e0b\u6ca1\u6709\u521b\u5efa\u51fa\u7684\u5bf9\u8c61\u83b7\u53d6\u51fa\u6765\uff1b</p> <p>==IOC\u5bb9\u5668\u542f\u52a8\u521b\u5efa\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668==</p>"},{"location":"Java/SpringBoot/SpringBoot/#9servlet","title":"9\u3001\u4f7f\u7528\u5916\u7f6e\u7684Servlet\u5bb9\u5668","text":"<p>\u5d4c\u5165\u5f0fServlet\u5bb9\u5668\uff1a\u5e94\u7528\u6253\u6210\u53ef\u6267\u884c\u7684jar</p> <p>\u200b       \u4f18\u70b9\uff1a\u7b80\u5355\u3001\u4fbf\u643a\uff1b</p> <p>\u200b       \u7f3a\u70b9\uff1a\u9ed8\u8ba4\u4e0d\u652f\u6301JSP\u3001\u4f18\u5316\u5b9a\u5236\u6bd4\u8f83\u590d\u6742\uff08\u4f7f\u7528\u5b9a\u5236\u5668\u3010ServerProperties\u3001\u81ea\u5b9a\u4e49EmbeddedServletContainerCustomizer\u3011\uff0c\u81ea\u5df1\u7f16\u5199\u5d4c\u5165\u5f0fServlet\u5bb9\u5668\u7684\u521b\u5efa\u5de5\u5382\u3010EmbeddedServletContainerFactory\u3011\uff09\uff1b</p> <p>\u5916\u7f6e\u7684Servlet\u5bb9\u5668\uff1a\u5916\u9762\u5b89\u88c5Tomcat---\u5e94\u7528war\u5305\u7684\u65b9\u5f0f\u6253\u5305\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#_4","title":"\u6b65\u9aa4","text":"<p>1\uff09\u3001\u5fc5\u987b\u521b\u5efa\u4e00\u4e2awar\u9879\u76ee\uff1b\uff08\u5229\u7528idea\u521b\u5efa\u597d\u76ee\u5f55\u7ed3\u6784\uff09</p> <p>2\uff09\u3001\u5c06\u5d4c\u5165\u5f0f\u7684Tomcat\u6307\u5b9a\u4e3aprovided\uff1b</p> <pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n   &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre> <p>3\uff09\u3001\u5fc5\u987b\u7f16\u5199\u4e00\u4e2aSpringBootServletInitializer\u7684\u5b50\u7c7b\uff0c\u5e76\u8c03\u7528configure\u65b9\u6cd5</p> <pre><code>public class ServletInitializer extends SpringBootServletInitializer {\n\n   @Override\n   protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n       //\u4f20\u5165SpringBoot\u5e94\u7528\u7684\u4e3b\u7a0b\u5e8f\n      return application.sources(SpringBoot04WebJspApplication.class);\n   }\n\n}\n</code></pre> <p>4\uff09\u3001\u542f\u52a8\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u4f7f\u7528\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#_5","title":"\u539f\u7406","text":"<p>jar\u5305\uff1a\u6267\u884cSpringBoot\u4e3b\u7c7b\u7684main\u65b9\u6cd5\uff0c\u542f\u52a8ioc\u5bb9\u5668\uff0c\u521b\u5efa\u5d4c\u5165\u5f0f\u7684Servlet\u5bb9\u5668\uff1b</p> <p>war\u5305\uff1a\u542f\u52a8\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u542f\u52a8SpringBoot\u5e94\u7528\u3010SpringBootServletInitializer\u3011\uff0c\u542f\u52a8ioc\u5bb9\u5668\uff1b</p> <p>servlet3.0\uff08Spring\u6ce8\u89e3\u7248\uff09\uff1a</p> <p>8.2.4 Shared libraries / runtimes pluggability\uff1a</p> <p>\u89c4\u5219\uff1a</p> <p>\u200b   1\uff09\u3001\u670d\u52a1\u5668\u542f\u52a8\uff08web\u5e94\u7528\u542f\u52a8\uff09\u4f1a\u521b\u5efa\u5f53\u524dweb\u5e94\u7528\u91cc\u9762\u6bcf\u4e00\u4e2ajar\u5305\u91cc\u9762ServletContainerInitializer\u5b9e\u4f8b\uff1a</p> <p>\u200b   2\uff09\u3001ServletContainerInitializer\u7684\u5b9e\u73b0\u653e\u5728jar\u5305\u7684META-INF/services\u6587\u4ef6\u5939\u4e0b\uff0c\u6709\u4e00\u4e2a\u540d\u4e3ajavax.servlet.ServletContainerInitializer\u7684\u6587\u4ef6\uff0c\u5185\u5bb9\u5c31\u662fServletContainerInitializer\u7684\u5b9e\u73b0\u7c7b\u7684\u5168\u7c7b\u540d</p> <p>\u200b   3\uff09\u3001\u8fd8\u53ef\u4ee5\u4f7f\u7528@HandlesTypes\uff0c\u5728\u5e94\u7528\u542f\u52a8\u7684\u65f6\u5019\u52a0\u8f7d\u6211\u4eec\u611f\u5174\u8da3\u7684\u7c7b\uff1b</p> <p>\u6d41\u7a0b\uff1a</p> <p>1\uff09\u3001\u542f\u52a8Tomcat</p> <p>2\uff09\u3001org\\springframework\\spring-web\\4.3.14.RELEASE\\spring-web-4.3.14.RELEASE.jar!\\META-INF\\services\\javax.servlet.ServletContainerInitializer\uff1a</p> <p>Spring\u7684web\u6a21\u5757\u91cc\u9762\u6709\u8fd9\u4e2a\u6587\u4ef6\uff1aorg.springframework.web.SpringServletContainerInitializer</p> <p>3\uff09\u3001SpringServletContainerInitializer\u5c06@HandlesTypes(WebApplicationInitializer.class)\u6807\u6ce8\u7684\u6240\u6709\u8fd9\u4e2a\u7c7b\u578b\u7684\u7c7b\u90fd\u4f20\u5165\u5230onStartup\u65b9\u6cd5\u7684Set&lt;Class&lt;?&gt;&gt;\uff1b\u4e3a\u8fd9\u4e9bWebApplicationInitializer\u7c7b\u578b\u7684\u7c7b\u521b\u5efa\u5b9e\u4f8b\uff1b</p> <p>4\uff09\u3001\u6bcf\u4e00\u4e2aWebApplicationInitializer\u90fd\u8c03\u7528\u81ea\u5df1\u7684onStartup\uff1b</p> <p></p> <p>5\uff09\u3001\u76f8\u5f53\u4e8e\u6211\u4eec\u7684SpringBootServletInitializer\u7684\u7c7b\u4f1a\u88ab\u521b\u5efa\u5bf9\u8c61\uff0c\u5e76\u6267\u884conStartup\u65b9\u6cd5</p> <p>6\uff09\u3001SpringBootServletInitializer\u5b9e\u4f8b\u6267\u884conStartup\u7684\u65f6\u5019\u4f1acreateRootApplicationContext\uff1b\u521b\u5efa\u5bb9\u5668</p> <pre><code>protected WebApplicationContext createRootApplicationContext(\n      ServletContext servletContext) {\n    //1\u3001\u521b\u5efaSpringApplicationBuilder\n   SpringApplicationBuilder builder = createSpringApplicationBuilder();\n   StandardServletEnvironment environment = new StandardServletEnvironment();\n   environment.initPropertySources(servletContext, null);\n   builder.environment(environment);\n   builder.main(getClass());\n   ApplicationContext parent = getExistingRootWebApplicationContext(servletContext);\n   if (parent != null) {\n      this.logger.info(\"Root context already created (using as parent).\");\n      servletContext.setAttribute(\n            WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, null);\n      builder.initializers(new ParentContextApplicationContextInitializer(parent));\n   }\n   builder.initializers(\n         new ServletContextApplicationContextInitializer(servletContext));\n   builder.contextClass(AnnotationConfigEmbeddedWebApplicationContext.class);\n\n    //\u8c03\u7528configure\u65b9\u6cd5\uff0c\u5b50\u7c7b\u91cd\u5199\u4e86\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u5c06SpringBoot\u7684\u4e3b\u7a0b\u5e8f\u7c7b\u4f20\u5165\u4e86\u8fdb\u6765\n   builder = configure(builder);\n\n    //\u4f7f\u7528builder\u521b\u5efa\u4e00\u4e2aSpring\u5e94\u7528\n   SpringApplication application = builder.build();\n   if (application.getSources().isEmpty() &amp;&amp; AnnotationUtils\n         .findAnnotation(getClass(), Configuration.class) != null) {\n      application.getSources().add(getClass());\n   }\n   Assert.state(!application.getSources().isEmpty(),\n         \"No SpringApplication sources have been defined. Either override the \"\n               + \"configure method or add an @Configuration annotation\");\n   // Ensure error pages are registered\n   if (this.registerErrorPageFilter) {\n      application.getSources().add(ErrorPageFilterConfiguration.class);\n   }\n    //\u542f\u52a8Spring\u5e94\u7528\n   return run(application);\n}\n</code></pre> <p>7\uff09\u3001Spring\u7684\u5e94\u7528\u5c31\u542f\u52a8\u5e76\u4e14\u521b\u5efaIOC\u5bb9\u5668</p> <pre><code>public ConfigurableApplicationContext run(String... args) {\n   StopWatch stopWatch = new StopWatch();\n   stopWatch.start();\n   ConfigurableApplicationContext context = null;\n   FailureAnalyzers analyzers = null;\n   configureHeadlessProperty();\n   SpringApplicationRunListeners listeners = getRunListeners(args);\n   listeners.starting();\n   try {\n      ApplicationArguments applicationArguments = new DefaultApplicationArguments(\n            args);\n      ConfigurableEnvironment environment = prepareEnvironment(listeners,\n            applicationArguments);\n      Banner printedBanner = printBanner(environment);\n      context = createApplicationContext();\n      analyzers = new FailureAnalyzers(context);\n      prepareContext(context, environment, listeners, applicationArguments,\n            printedBanner);\n\n       //\u5237\u65b0IOC\u5bb9\u5668\n      refreshContext(context);\n      afterRefresh(context, applicationArguments);\n      listeners.finished(context, null);\n      stopWatch.stop();\n      if (this.logStartupInfo) {\n         new StartupInfoLogger(this.mainApplicationClass)\n               .logStarted(getApplicationLog(), stopWatch);\n      }\n      return context;\n   }\n   catch (Throwable ex) {\n      handleRunFailure(context, listeners, analyzers, ex);\n      throw new IllegalStateException(ex);\n   }\n}\n</code></pre> <p>==\u542f\u52a8Servlet\u5bb9\u5668\uff0c\u518d\u542f\u52a8SpringBoot\u5e94\u7528==</p>"},{"location":"Java/SpringBoot/SpringBoot/#docker","title":"\u4e94\u3001Docker","text":""},{"location":"Java/SpringBoot/SpringBoot/#1_10","title":"1\u3001\u7b80\u4ecb","text":"<p>Docker\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5e94\u7528\u5bb9\u5668\u5f15\u64ce\uff1b\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u5bb9\u5668\u6280\u672f\uff1b</p> <p>Docker\u652f\u6301\u5c06\u8f6f\u4ef6\u7f16\u8bd1\u6210\u4e00\u4e2a\u955c\u50cf\uff1b\u7136\u540e\u5728\u955c\u50cf\u4e2d\u5404\u79cd\u8f6f\u4ef6\u505a\u597d\u914d\u7f6e\uff0c\u5c06\u955c\u50cf\u53d1\u5e03\u51fa\u53bb\uff0c\u5176\u4ed6\u4f7f\u7528\u8005\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e2a\u955c\u50cf\uff1b</p> <p>\u8fd0\u884c\u4e2d\u7684\u8fd9\u4e2a\u955c\u50cf\u79f0\u4e3a\u5bb9\u5668\uff0c\u5bb9\u5668\u542f\u52a8\u662f\u975e\u5e38\u5feb\u901f\u7684\u3002</p> <p></p> <p></p>"},{"location":"Java/SpringBoot/SpringBoot/#2_10","title":"2\u3001\u6838\u5fc3\u6982\u5ff5","text":"<p>docker\u4e3b\u673a(Host)\uff1a\u5b89\u88c5\u4e86Docker\u7a0b\u5e8f\u7684\u673a\u5668\uff08Docker\u76f4\u63a5\u5b89\u88c5\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u4e0a\uff09\uff1b</p> <p>docker\u5ba2\u6237\u7aef(Client)\uff1a\u8fde\u63a5docker\u4e3b\u673a\u8fdb\u884c\u64cd\u4f5c\uff1b</p> <p>docker\u4ed3\u5e93(Registry)\uff1a\u7528\u6765\u4fdd\u5b58\u5404\u79cd\u6253\u5305\u597d\u7684\u8f6f\u4ef6\u955c\u50cf\uff1b</p> <p>docker\u955c\u50cf(Images)\uff1a\u8f6f\u4ef6\u6253\u5305\u597d\u7684\u955c\u50cf\uff1b\u653e\u5728docker\u4ed3\u5e93\u4e2d\uff1b</p> <p>docker\u5bb9\u5668(Container)\uff1a\u955c\u50cf\u542f\u52a8\u540e\u7684\u5b9e\u4f8b\u79f0\u4e3a\u4e00\u4e2a\u5bb9\u5668\uff1b\u5bb9\u5668\u662f\u72ec\u7acb\u8fd0\u884c\u7684\u4e00\u4e2a\u6216\u4e00\u7ec4\u5e94\u7528</p> <p></p> <p>\u4f7f\u7528Docker\u7684\u6b65\u9aa4\uff1a</p> <p>1\uff09\u3001\u5b89\u88c5Docker</p> <p>2\uff09\u3001\u53bbDocker\u4ed3\u5e93\u627e\u5230\u8fd9\u4e2a\u8f6f\u4ef6\u5bf9\u5e94\u7684\u955c\u50cf\uff1b</p> <p>3\uff09\u3001\u4f7f\u7528Docker\u8fd0\u884c\u8fd9\u4e2a\u955c\u50cf\uff0c\u8fd9\u4e2a\u955c\u50cf\u5c31\u4f1a\u751f\u6210\u4e00\u4e2aDocker\u5bb9\u5668\uff1b</p> <p>4\uff09\u3001\u5bf9\u5bb9\u5668\u7684\u542f\u52a8\u505c\u6b62\u5c31\u662f\u5bf9\u8f6f\u4ef6\u7684\u542f\u52a8\u505c\u6b62\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#3docker","title":"3\u3001\u5b89\u88c5Docker","text":""},{"location":"Java/SpringBoot/SpringBoot/#1linux","title":"1\uff09\u3001\u5b89\u88c5linux\u865a\u62df\u673a","text":"<p>\u200b   1\uff09\u3001VMWare\u3001VirtualBox\uff08\u5b89\u88c5\uff09\uff1b</p> <p>\u200b   2\uff09\u3001\u5bfc\u5165\u865a\u62df\u673a\u6587\u4ef6centos7-atguigu.ova\uff1b</p> <p>\u200b   3\uff09\u3001\u53cc\u51fb\u542f\u52a8linux\u865a\u62df\u673a;\u4f7f\u7528  root/ 123456\u767b\u9646</p> <p>\u200b   4\uff09\u3001\u4f7f\u7528\u5ba2\u6237\u7aef\u8fde\u63a5linux\u670d\u52a1\u5668\u8fdb\u884c\u547d\u4ee4\u64cd\u4f5c\uff1b</p> <p>\u200b   5\uff09\u3001\u8bbe\u7f6e\u865a\u62df\u673a\u7f51\u7edc\uff1b</p> <p>\u200b       \u6865\u63a5\u7f51\u7edc===\u9009\u597d\u7f51\u5361====\u63a5\u5165\u7f51\u7ebf\uff1b</p> <p>\u200b   6\uff09\u3001\u8bbe\u7f6e\u597d\u7f51\u7edc\u4ee5\u540e\u4f7f\u7528\u547d\u4ee4\u91cd\u542f\u865a\u62df\u673a\u7684\u7f51\u7edc</p> <pre><code>service network restart\n</code></pre> <p>\u200b   7\uff09\u3001\u67e5\u770blinux\u7684ip\u5730\u5740</p> <pre><code>ip addr\n</code></pre> <p>\u200b   8\uff09\u3001\u4f7f\u7528\u5ba2\u6237\u7aef\u8fde\u63a5linux\uff1b</p>"},{"location":"Java/SpringBoot/SpringBoot/#2linuxdocker","title":"2\uff09\u3001\u5728linux\u865a\u62df\u673a\u4e0a\u5b89\u88c5docker","text":"<p>\u6b65\u9aa4\uff1a</p> <pre><code>1\u3001\u68c0\u67e5\u5185\u6838\u7248\u672c\uff0c\u5fc5\u987b\u662f3.10\u53ca\u4ee5\u4e0a\nuname -r\n2\u3001\u5b89\u88c5docker\nyum install docker\n3\u3001\u8f93\u5165y\u786e\u8ba4\u5b89\u88c5\n4\u3001\u542f\u52a8docker\n[root@localhost ~]# systemctl start docker\n[root@localhost ~]# docker -v\nDocker version 1.12.6, build 3e8e77d/1.12.6\n5\u3001\u5f00\u673a\u542f\u52a8docker\n[root@localhost ~]# systemctl enable docker\nCreated symlink from /etc/systemd/system/multi-user.target.wants/docker.service to /usr/lib/systemd/system/docker.service.\n6\u3001\u505c\u6b62docker\nsystemctl stop docker\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#4docker","title":"4\u3001Docker\u5e38\u7528\u547d\u4ee4&amp;\u64cd\u4f5c","text":""},{"location":"Java/SpringBoot/SpringBoot/#1_11","title":"1\uff09\u3001\u955c\u50cf\u64cd\u4f5c","text":"\u64cd\u4f5c \u547d\u4ee4 \u8bf4\u660e \u68c0\u7d22 docker  search \u5173\u952e\u5b57  eg\uff1adocker  search redis \u6211\u4eec\u7ecf\u5e38\u53bbdocker  hub\u4e0a\u68c0\u7d22\u955c\u50cf\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5982\u955c\u50cf\u7684TAG\u3002 \u62c9\u53d6 docker pull \u955c\u50cf\u540d:tag :tag\u662f\u53ef\u9009\u7684\uff0ctag\u8868\u793a\u6807\u7b7e\uff0c\u591a\u4e3a\u8f6f\u4ef6\u7684\u7248\u672c\uff0c\u9ed8\u8ba4\u662flatest \u5217\u8868 docker images \u67e5\u770b\u6240\u6709\u672c\u5730\u955c\u50cf \u5220\u9664 docker rmi image-id \u5220\u9664\u6307\u5b9a\u7684\u672c\u5730\u955c\u50cf <p>https://hub.docker.com/</p>"},{"location":"Java/SpringBoot/SpringBoot/#2_11","title":"2\uff09\u3001\u5bb9\u5668\u64cd\u4f5c","text":"<p>\u8f6f\u4ef6\u955c\u50cf\uff08QQ\u5b89\u88c5\u7a0b\u5e8f\uff09----\u8fd0\u884c\u955c\u50cf----\u4ea7\u751f\u4e00\u4e2a\u5bb9\u5668\uff08\u6b63\u5728\u8fd0\u884c\u7684\u8f6f\u4ef6\uff0c\u8fd0\u884c\u7684QQ\uff09\uff1b</p> <p>\u6b65\u9aa4\uff1a</p> <pre><code>1\u3001\u641c\u7d22\u955c\u50cf\n[root@localhost ~]# docker search tomcat\n2\u3001\u62c9\u53d6\u955c\u50cf\n[root@localhost ~]# docker pull tomcat\n3\u3001\u6839\u636e\u955c\u50cf\u542f\u52a8\u5bb9\u5668\ndocker run --name mytomcat -d tomcat:latest\n4\u3001docker ps  \n\u67e5\u770b\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\n5\u3001 \u505c\u6b62\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\ndocker stop  \u5bb9\u5668\u7684id\n6\u3001\u67e5\u770b\u6240\u6709\u7684\u5bb9\u5668\ndocker ps -a\n7\u3001\u542f\u52a8\u5bb9\u5668\ndocker start \u5bb9\u5668id\n8\u3001\u5220\u9664\u4e00\u4e2a\u5bb9\u5668\n docker rm \u5bb9\u5668id\n9\u3001\u542f\u52a8\u4e00\u4e2a\u505a\u4e86\u7aef\u53e3\u6620\u5c04\u7684tomcat\n[root@localhost ~]# docker run -d -p 8888:8080 tomcat\n-d\uff1a\u540e\u53f0\u8fd0\u884c\n-p: \u5c06\u4e3b\u673a\u7684\u7aef\u53e3\u6620\u5c04\u5230\u5bb9\u5668\u7684\u4e00\u4e2a\u7aef\u53e3    \u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u5185\u90e8\u7684\u7aef\u53e3\n\n10\u3001\u4e3a\u4e86\u6f14\u793a\u7b80\u5355\u5173\u95ed\u4e86linux\u7684\u9632\u706b\u5899\nservice firewalld status \uff1b\u67e5\u770b\u9632\u706b\u5899\u72b6\u6001\nservice firewalld stop\uff1a\u5173\u95ed\u9632\u706b\u5899\n11\u3001\u67e5\u770b\u5bb9\u5668\u7684\u65e5\u5fd7\ndocker logs container-name/container-id\n\n\u66f4\u591a\u547d\u4ee4\u53c2\u770b\nhttps://docs.docker.com/engine/reference/commandline/docker/\n\u53ef\u4ee5\u53c2\u8003\u6bcf\u4e00\u4e2a\u955c\u50cf\u7684\u6587\u6863\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#3mysql","title":"3\uff09\u3001\u5b89\u88c5MySQL\u793a\u4f8b","text":"<pre><code>docker pull mysql\n</code></pre> <p>\u9519\u8bef\u7684\u542f\u52a8</p> <pre><code>[root@localhost ~]# docker run --name mysql01 -d mysql\n42f09819908bb72dd99ae19e792e0a5d03c48638421fa64cce5f8ba0f40f5846\n\nmysql\u9000\u51fa\u4e86\n[root@localhost ~]# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                           PORTS               NAMES\n42f09819908b        mysql               \"docker-entrypoint.sh\"   34 seconds ago      Exited (1) 33 seconds ago                            mysql01\n538bde63e500        tomcat              \"catalina.sh run\"        About an hour ago   Exited (143) About an hour ago                       compassionate_\ngoldstine\nc4f1ac60b3fc        tomcat              \"catalina.sh run\"        About an hour ago   Exited (143) About an hour ago                       lonely_fermi\n81ec743a5271        tomcat              \"catalina.sh run\"        About an hour ago   Exited (143) About an hour ago                       sick_ramanujan\n\n\n//\u9519\u8bef\u65e5\u5fd7\n[root@localhost ~]# docker logs 42f09819908b\nerror: database is uninitialized and password option is not specified \n  You need to specify one of MYSQL_ROOT_PASSWORD, MYSQL_ALLOW_EMPTY_PASSWORD and MYSQL_RANDOM_ROOT_PASSWORD\uff1b\u8fd9\u4e2a\u4e09\u4e2a\u53c2\u6570\u5fc5\u987b\u6307\u5b9a\u4e00\u4e2a\n</code></pre> <p>\u6b63\u786e\u7684\u542f\u52a8</p> <pre><code>[root@localhost ~]# docker run --name mysql01 -e MYSQL_ROOT_PASSWORD=123456 -d mysql\nb874c56bec49fb43024b3805ab51e9097da779f2f572c22c695305dedd684c5f\n[root@localhost ~]# docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES\nb874c56bec49        mysql               \"docker-entrypoint.sh\"   4 seconds ago       Up 3 seconds        3306/tcp            mysql01\n</code></pre> <p>\u505a\u4e86\u7aef\u53e3\u6620\u5c04</p> <pre><code>[root@localhost ~]# docker run -p 3306:3306 --name mysql02 -e MYSQL_ROOT_PASSWORD=123456 -d mysql\nad10e4bc5c6a0f61cbad43898de71d366117d120e39db651844c0e73863b9434\n[root@localhost ~]# docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES\nad10e4bc5c6a        mysql               \"docker-entrypoint.sh\"   4 seconds ago       Up 2 seconds        0.0.0.0:3306-&gt;3306/tcp   mysql02\n</code></pre> <p>\u51e0\u4e2a\u5176\u4ed6\u7684\u9ad8\u7ea7\u64cd\u4f5c</p> <pre><code>docker run --name mysql03 -v /conf/mysql:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag\n\u628a\u4e3b\u673a\u7684/conf/mysql\u6587\u4ef6\u5939\u6302\u8f7d\u5230 mysqldocker\u5bb9\u5668\u7684/etc/mysql/conf.d\u6587\u4ef6\u5939\u91cc\u9762\n\u6539mysql\u7684\u914d\u7f6e\u6587\u4ef6\u5c31\u53ea\u9700\u8981\u628amysql\u914d\u7f6e\u6587\u4ef6\u653e\u5728\u81ea\u5b9a\u4e49\u7684\u6587\u4ef6\u5939\u4e0b\uff08/conf/mysql\uff09\n\ndocker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci\n\u6307\u5b9amysql\u7684\u4e00\u4e9b\u914d\u7f6e\u53c2\u6570\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#springboot","title":"\u516d\u3001SpringBoot\u4e0e\u6570\u636e\u8bbf\u95ee","text":""},{"location":"Java/SpringBoot/SpringBoot/#1jdbc","title":"1\u3001JDBC","text":"<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre> <pre><code>spring:\n  datasource:\n    username: root\n    password: 123456\n    url: jdbc:mysql://192.168.15.22:3306/jdbc\n    driver-class-name: com.mysql.jdbc.Driver\n</code></pre> <p>\u6548\u679c\uff1a</p> <p>\u200b   \u9ed8\u8ba4\u662f\u7528org.apache.tomcat.jdbc.pool.DataSource\u4f5c\u4e3a\u6570\u636e\u6e90\uff1b</p> <p>\u200b   \u6570\u636e\u6e90\u7684\u76f8\u5173\u914d\u7f6e\u90fd\u5728DataSourceProperties\u91cc\u9762\uff1b</p> <p>\u81ea\u52a8\u914d\u7f6e\u539f\u7406\uff1a</p> <p>org.springframework.boot.autoconfigure.jdbc\uff1a</p> <p>1\u3001\u53c2\u8003DataSourceConfiguration\uff0c\u6839\u636e\u914d\u7f6e\u521b\u5efa\u6570\u636e\u6e90\uff0c\u9ed8\u8ba4\u4f7f\u7528Tomcat\u8fde\u63a5\u6c60\uff1b\u53ef\u4ee5\u4f7f\u7528spring.datasource.type\u6307\u5b9a\u81ea\u5b9a\u4e49\u7684\u6570\u636e\u6e90\u7c7b\u578b\uff1b</p> <p>2\u3001SpringBoot\u9ed8\u8ba4\u53ef\u4ee5\u652f\u6301\uff1b</p> <pre><code>org.apache.tomcat.jdbc.pool.DataSource\u3001HikariDataSource\u3001BasicDataSource\u3001\n</code></pre> <p>3\u3001\u81ea\u5b9a\u4e49\u6570\u636e\u6e90\u7c7b\u578b</p> <pre><code>/**\n * Generic DataSource configuration.\n */\n@ConditionalOnMissingBean(DataSource.class)\n@ConditionalOnProperty(name = \"spring.datasource.type\")\nstatic class Generic {\n\n   @Bean\n   public DataSource dataSource(DataSourceProperties properties) {\n       //\u4f7f\u7528DataSourceBuilder\u521b\u5efa\u6570\u636e\u6e90\uff0c\u5229\u7528\u53cd\u5c04\u521b\u5efa\u54cd\u5e94type\u7684\u6570\u636e\u6e90\uff0c\u5e76\u4e14\u7ed1\u5b9a\u76f8\u5173\u5c5e\u6027\n      return properties.initializeDataSourceBuilder().build();\n   }\n\n}\n</code></pre> <p>4\u3001DataSourceInitializer\uff1aApplicationListener\uff1b</p> <p>\u200b   \u4f5c\u7528\uff1a</p> <p>\u200b       1\uff09\u3001runSchemaScripts();\u8fd0\u884c\u5efa\u8868\u8bed\u53e5\uff1b</p> <p>\u200b       2\uff09\u3001runDataScripts();\u8fd0\u884c\u63d2\u5165\u6570\u636e\u7684sql\u8bed\u53e5\uff1b</p> <p>\u9ed8\u8ba4\u53ea\u9700\u8981\u5c06\u6587\u4ef6\u547d\u540d\u4e3a\uff1a</p> <pre><code>schema-*.sql\u3001data-*.sql\n\u9ed8\u8ba4\u89c4\u5219\uff1aschema.sql\uff0cschema-all.sql\uff1b\n\u53ef\u4ee5\u4f7f\u7528   \n    schema:\n      - classpath:department.sql\n      \u6307\u5b9a\u4f4d\u7f6e\n</code></pre> <p>5\u3001\u64cd\u4f5c\u6570\u636e\u5e93\uff1a\u81ea\u52a8\u914d\u7f6e\u4e86JdbcTemplate\u64cd\u4f5c\u6570\u636e\u5e93</p>"},{"location":"Java/SpringBoot/SpringBoot/#2druid","title":"2\u3001\u6574\u5408Druid\u6570\u636e\u6e90","text":"<pre><code>\u5bfc\u5165druid\u6570\u636e\u6e90\n@Configuration\npublic class DruidConfig {\n\n    @ConfigurationProperties(prefix = \"spring.datasource\")\n    @Bean\n    public DataSource druid(){\n       return  new DruidDataSource();\n    }\n\n    //\u914d\u7f6eDruid\u7684\u76d1\u63a7\n    //1\u3001\u914d\u7f6e\u4e00\u4e2a\u7ba1\u7406\u540e\u53f0\u7684Servlet\n    @Bean\n    public ServletRegistrationBean statViewServlet(){\n        ServletRegistrationBean bean = new ServletRegistrationBean(new StatViewServlet(), \"/druid/*\");\n        Map&lt;String,String&gt; initParams = new HashMap&lt;&gt;();\n\n        initParams.put(\"loginUsername\",\"admin\");\n        initParams.put(\"loginPassword\",\"123456\");\n        initParams.put(\"allow\",\"\");//\u9ed8\u8ba4\u5c31\u662f\u5141\u8bb8\u6240\u6709\u8bbf\u95ee\n        initParams.put(\"deny\",\"192.168.15.21\");\n\n        bean.setInitParameters(initParams);\n        return bean;\n    }\n\n\n    //2\u3001\u914d\u7f6e\u4e00\u4e2aweb\u76d1\u63a7\u7684filter\n    @Bean\n    public FilterRegistrationBean webStatFilter(){\n        FilterRegistrationBean bean = new FilterRegistrationBean();\n        bean.setFilter(new WebStatFilter());\n\n        Map&lt;String,String&gt; initParams = new HashMap&lt;&gt;();\n        initParams.put(\"exclusions\",\"*.js,*.css,/druid/*\");\n\n        bean.setInitParameters(initParams);\n\n        bean.setUrlPatterns(Arrays.asList(\"/*\"));\n\n        return  bean;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#3mybatis","title":"3\u3001\u6574\u5408MyBatis","text":"<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;1.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>\u6b65\u9aa4\uff1a</p> <p>\u200b   1\uff09\u3001\u914d\u7f6e\u6570\u636e\u6e90\u76f8\u5173\u5c5e\u6027\uff08\u89c1\u4e0a\u4e00\u8282Druid\uff09</p> <p>\u200b   2\uff09\u3001\u7ed9\u6570\u636e\u5e93\u5efa\u8868</p> <p>\u200b   3\uff09\u3001\u521b\u5efaJavaBean</p>"},{"location":"Java/SpringBoot/SpringBoot/#4_3","title":"4\uff09\u3001\u6ce8\u89e3\u7248","text":"<pre><code>//\u6307\u5b9a\u8fd9\u662f\u4e00\u4e2a\u64cd\u4f5c\u6570\u636e\u5e93\u7684mapper\n@Mapper\npublic interface DepartmentMapper {\n\n    @Select(\"select * from department where id=#{id}\")\n    public Department getDeptById(Integer id);\n\n    @Delete(\"delete from department where id=#{id}\")\n    public int deleteDeptById(Integer id);\n\n    @Options(useGeneratedKeys = true,keyProperty = \"id\")\n    @Insert(\"insert into department(departmentName) values(#{departmentName})\")\n    public int insertDept(Department department);\n\n    @Update(\"update department set departmentName=#{departmentName} where id=#{id}\")\n    public int updateDept(Department department);\n}\n</code></pre> <p>\u95ee\u9898\uff1a</p> <p>\u81ea\u5b9a\u4e49MyBatis\u7684\u914d\u7f6e\u89c4\u5219\uff1b\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u4e00\u4e2aConfigurationCustomizer\uff1b</p> <pre><code>@org.springframework.context.annotation.Configuration\npublic class MyBatisConfig {\n\n    @Bean\n    public ConfigurationCustomizer configurationCustomizer(){\n        return new ConfigurationCustomizer(){\n\n            @Override\n            public void customize(Configuration configuration) {\n                configuration.setMapUnderscoreToCamelCase(true);\n            }\n        };\n    }\n}\n</code></pre> <pre><code>\u4f7f\u7528MapperScan\u6279\u91cf\u626b\u63cf\u6240\u6709\u7684Mapper\u63a5\u53e3\uff1b\n@MapperScan(value = \"com.atguigu.springboot.mapper\")\n@SpringBootApplication\npublic class SpringBoot06DataMybatisApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringBoot06DataMybatisApplication.class, args);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#5_2","title":"5\uff09\u3001\u914d\u7f6e\u6587\u4ef6\u7248","text":"<pre><code>mybatis:\n  config-location: classpath:mybatis/mybatis-config.xml \u6307\u5b9a\u5168\u5c40\u914d\u7f6e\u6587\u4ef6\u7684\u4f4d\u7f6e\n  mapper-locations: classpath:mybatis/mapper/*.xml  \u6307\u5b9asql\u6620\u5c04\u6587\u4ef6\u7684\u4f4d\u7f6e\n</code></pre> <p>\u66f4\u591a\u4f7f\u7528\u53c2\u7167</p> <p>http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/</p>"},{"location":"Java/SpringBoot/SpringBoot/#4springdata-jpa","title":"4\u3001\u6574\u5408SpringData JPA","text":""},{"location":"Java/SpringBoot/SpringBoot/#1springdata","title":"1\uff09\u3001SpringData\u7b80\u4ecb","text":""},{"location":"Java/SpringBoot/SpringBoot/#2springdata-jpa","title":"2\uff09\u3001\u6574\u5408SpringData JPA","text":"<p>JPA:ORM\uff08Object Relational Mapping\uff09\uff1b</p> <p>1\uff09\u3001\u7f16\u5199\u4e00\u4e2a\u5b9e\u4f53\u7c7b\uff08bean\uff09\u548c\u6570\u636e\u8868\u8fdb\u884c\u6620\u5c04\uff0c\u5e76\u4e14\u914d\u7f6e\u597d\u6620\u5c04\u5173\u7cfb\uff1b</p> <pre><code>//\u4f7f\u7528JPA\u6ce8\u89e3\u914d\u7f6e\u6620\u5c04\u5173\u7cfb\n@Entity //\u544a\u8bc9JPA\u8fd9\u662f\u4e00\u4e2a\u5b9e\u4f53\u7c7b\uff08\u548c\u6570\u636e\u8868\u6620\u5c04\u7684\u7c7b\uff09\n@Table(name = \"tbl_user\") //@Table\u6765\u6307\u5b9a\u548c\u54ea\u4e2a\u6570\u636e\u8868\u5bf9\u5e94;\u5982\u679c\u7701\u7565\u9ed8\u8ba4\u8868\u540d\u5c31\u662fuser\uff1b\npublic class User {\n\n    @Id //\u8fd9\u662f\u4e00\u4e2a\u4e3b\u952e\n    @GeneratedValue(strategy = GenerationType.IDENTITY)//\u81ea\u589e\u4e3b\u952e\n    private Integer id;\n\n    @Column(name = \"last_name\",length = 50) //\u8fd9\u662f\u548c\u6570\u636e\u8868\u5bf9\u5e94\u7684\u4e00\u4e2a\u5217\n    private String lastName;\n    @Column //\u7701\u7565\u9ed8\u8ba4\u5217\u540d\u5c31\u662f\u5c5e\u6027\u540d\n    private String email;\n</code></pre> <p>2\uff09\u3001\u7f16\u5199\u4e00\u4e2aDao\u63a5\u53e3\u6765\u64cd\u4f5c\u5b9e\u4f53\u7c7b\u5bf9\u5e94\u7684\u6570\u636e\u8868\uff08Repository\uff09</p> <pre><code>//\u7ee7\u627fJpaRepository\u6765\u5b8c\u6210\u5bf9\u6570\u636e\u5e93\u7684\u64cd\u4f5c\npublic interface UserRepository extends JpaRepository&lt;User,Integer&gt; {\n}\n</code></pre> <p>3\uff09\u3001\u57fa\u672c\u7684\u914d\u7f6eJpaProperties</p> <pre><code>spring:  \n jpa:\n    hibernate:\n#     \u66f4\u65b0\u6216\u8005\u521b\u5efa\u6570\u636e\u8868\u7ed3\u6784\n      ddl-auto: update\n#    \u63a7\u5236\u53f0\u663e\u793aSQL\n    show-sql: true\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#_6","title":"\u4e03\u3001\u542f\u52a8\u914d\u7f6e\u539f\u7406","text":"<p>\u51e0\u4e2a\u91cd\u8981\u7684\u4e8b\u4ef6\u56de\u8c03\u673a\u5236</p> <p>\u914d\u7f6e\u5728META-INF/spring.factories</p> <p>ApplicationContextInitializer</p> <p>SpringApplicationRunListener</p> <p>\u53ea\u9700\u8981\u653e\u5728ioc\u5bb9\u5668\u4e2d</p> <p>ApplicationRunner</p> <p>CommandLineRunner</p> <p>\u542f\u52a8\u6d41\u7a0b\uff1a</p>"},{"location":"Java/SpringBoot/SpringBoot/#1springapplication","title":"1\u3001\u521b\u5efaSpringApplication\u5bf9\u8c61","text":"<pre><code>initialize(sources);\nprivate void initialize(Object[] sources) {\n    //\u4fdd\u5b58\u4e3b\u914d\u7f6e\u7c7b\n    if (sources != null &amp;&amp; sources.length &gt; 0) {\n        this.sources.addAll(Arrays.asList(sources));\n    }\n    //\u5224\u65ad\u5f53\u524d\u662f\u5426\u4e00\u4e2aweb\u5e94\u7528\n    this.webEnvironment = deduceWebEnvironment();\n    //\u4ece\u7c7b\u8def\u5f84\u4e0b\u627e\u5230META-INF/spring.factories\u914d\u7f6e\u7684\u6240\u6709ApplicationContextInitializer\uff1b\u7136\u540e\u4fdd\u5b58\u8d77\u6765\n    setInitializers((Collection) getSpringFactoriesInstances(\n        ApplicationContextInitializer.class));\n    //\u4ece\u7c7b\u8def\u5f84\u4e0b\u627e\u5230ETA-INF/spring.factories\u914d\u7f6e\u7684\u6240\u6709ApplicationListener\n    setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));\n    //\u4ece\u591a\u4e2a\u914d\u7f6e\u7c7b\u4e2d\u627e\u5230\u6709main\u65b9\u6cd5\u7684\u4e3b\u914d\u7f6e\u7c7b\n    this.mainApplicationClass = deduceMainApplicationClass();\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#2run","title":"2\u3001\u8fd0\u884crun\u65b9\u6cd5","text":"<pre><code>public ConfigurableApplicationContext run(String... args) {\n   StopWatch stopWatch = new StopWatch();\n   stopWatch.start();\n   ConfigurableApplicationContext context = null;\n   FailureAnalyzers analyzers = null;\n   configureHeadlessProperty();\n\n   //\u83b7\u53d6SpringApplicationRunListeners\uff1b\u4ece\u7c7b\u8def\u5f84\u4e0bMETA-INF/spring.factories\n   SpringApplicationRunListeners listeners = getRunListeners(args);\n    //\u56de\u8c03\u6240\u6709\u7684\u83b7\u53d6SpringApplicationRunListener.starting()\u65b9\u6cd5\n   listeners.starting();\n   try {\n       //\u5c01\u88c5\u547d\u4ee4\u884c\u53c2\u6570\n      ApplicationArguments applicationArguments = new DefaultApplicationArguments(\n            args);\n      //\u51c6\u5907\u73af\u5883\n      ConfigurableEnvironment environment = prepareEnvironment(listeners,\n            applicationArguments);\n            //\u521b\u5efa\u73af\u5883\u5b8c\u6210\u540e\u56de\u8c03SpringApplicationRunListener.environmentPrepared()\uff1b\u8868\u793a\u73af\u5883\u51c6\u5907\u5b8c\u6210\n\n      Banner printedBanner = printBanner(environment);\n\n       //\u521b\u5efaApplicationContext\uff1b\u51b3\u5b9a\u521b\u5efaweb\u7684ioc\u8fd8\u662f\u666e\u901a\u7684ioc\n      context = createApplicationContext();\n\n      analyzers = new FailureAnalyzers(context);\n       //\u51c6\u5907\u4e0a\u4e0b\u6587\u73af\u5883;\u5c06environment\u4fdd\u5b58\u5230ioc\u4e2d\uff1b\u800c\u4e14applyInitializers()\uff1b\n       //applyInitializers()\uff1a\u56de\u8c03\u4e4b\u524d\u4fdd\u5b58\u7684\u6240\u6709\u7684ApplicationContextInitializer\u7684initialize\u65b9\u6cd5\n       //\u56de\u8c03\u6240\u6709\u7684SpringApplicationRunListener\u7684contextPrepared()\uff1b\n       //\n      prepareContext(context, environment, listeners, applicationArguments,\n            printedBanner);\n       //prepareContext\u8fd0\u884c\u5b8c\u6210\u4ee5\u540e\u56de\u8c03\u6240\u6709\u7684SpringApplicationRunListener\u7684contextLoaded\uff08\uff09\uff1b\n\n       //s\u5237\u65b0\u5bb9\u5668\uff1bioc\u5bb9\u5668\u521d\u59cb\u5316\uff08\u5982\u679c\u662fweb\u5e94\u7528\u8fd8\u4f1a\u521b\u5efa\u5d4c\u5165\u5f0f\u7684Tomcat\uff09\uff1bSpring\u6ce8\u89e3\u7248\n       //\u626b\u63cf\uff0c\u521b\u5efa\uff0c\u52a0\u8f7d\u6240\u6709\u7ec4\u4ef6\u7684\u5730\u65b9\uff1b\uff08\u914d\u7f6e\u7c7b\uff0c\u7ec4\u4ef6\uff0c\u81ea\u52a8\u914d\u7f6e\uff09\n      refreshContext(context);\n       //\u4eceioc\u5bb9\u5668\u4e2d\u83b7\u53d6\u6240\u6709\u7684ApplicationRunner\u548cCommandLineRunner\u8fdb\u884c\u56de\u8c03\n       //ApplicationRunner\u5148\u56de\u8c03\uff0cCommandLineRunner\u518d\u56de\u8c03\n      afterRefresh(context, applicationArguments);\n       //\u6240\u6709\u7684SpringApplicationRunListener\u56de\u8c03finished\u65b9\u6cd5\n      listeners.finished(context, null);\n      stopWatch.stop();\n      if (this.logStartupInfo) {\n         new StartupInfoLogger(this.mainApplicationClass)\n               .logStarted(getApplicationLog(), stopWatch);\n      }\n       //\u6574\u4e2aSpringBoot\u5e94\u7528\u542f\u52a8\u5b8c\u6210\u4ee5\u540e\u8fd4\u56de\u542f\u52a8\u7684ioc\u5bb9\u5668\uff1b\n      return context;\n   }\n   catch (Throwable ex) {\n      handleRunFailure(context, listeners, analyzers, ex);\n      throw new IllegalStateException(ex);\n   }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#3_7","title":"3\u3001\u4e8b\u4ef6\u76d1\u542c\u673a\u5236","text":"<p>\u914d\u7f6e\u5728META-INF/spring.factories</p> <p>ApplicationContextInitializer</p> <pre><code>public class HelloApplicationContextInitializer implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt; {\n    @Override\n    public void initialize(ConfigurableApplicationContext applicationContext) {\n        System.out.println(\"ApplicationContextInitializer...initialize...\"+applicationContext);\n    }\n}\n</code></pre> <p>SpringApplicationRunListener</p> <pre><code>public class HelloSpringApplicationRunListener implements SpringApplicationRunListener {\n\n    //\u5fc5\u987b\u6709\u7684\u6784\u9020\u5668\n    public HelloSpringApplicationRunListener(SpringApplication application, String[] args){\n\n    }\n\n    @Override\n    public void starting() {\n        System.out.println(\"SpringApplicationRunListener...starting...\");\n    }\n\n    @Override\n    public void environmentPrepared(ConfigurableEnvironment environment) {\n        Object o = environment.getSystemProperties().get(\"os.name\");\n        System.out.println(\"SpringApplicationRunListener...environmentPrepared..\"+o);\n    }\n\n    @Override\n    public void contextPrepared(ConfigurableApplicationContext context) {\n        System.out.println(\"SpringApplicationRunListener...contextPrepared...\");\n    }\n\n    @Override\n    public void contextLoaded(ConfigurableApplicationContext context) {\n        System.out.println(\"SpringApplicationRunListener...contextLoaded...\");\n    }\n\n    @Override\n    public void finished(ConfigurableApplicationContext context, Throwable exception) {\n        System.out.println(\"SpringApplicationRunListener...finished...\");\n    }\n}\n</code></pre> <p>\u914d\u7f6e\uff08META-INF/spring.factories\uff09</p> <pre><code>org.springframework.context.ApplicationContextInitializer=\\\ncom.atguigu.springboot.listener.HelloApplicationContextInitializer\n\norg.springframework.boot.SpringApplicationRunListener=\\\ncom.atguigu.springboot.listener.HelloSpringApplicationRunListener\n</code></pre> <p>\u53ea\u9700\u8981\u653e\u5728ioc\u5bb9\u5668\u4e2d</p> <p>ApplicationRunner</p> <pre><code>@Component\npublic class HelloApplicationRunner implements ApplicationRunner {\n    @Override\n    public void run(ApplicationArguments args) throws Exception {\n        System.out.println(\"ApplicationRunner...run....\");\n    }\n}\n</code></pre> <p>CommandLineRunner</p> <pre><code>@Component\npublic class HelloCommandLineRunner implements CommandLineRunner {\n    @Override\n    public void run(String... args) throws Exception {\n        System.out.println(\"CommandLineRunner...run...\"+ Arrays.asList(args));\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#starter","title":"\u516b\u3001\u81ea\u5b9a\u4e49starter","text":"<p>starter\uff1a</p> <p>\u200b   1\u3001\u8fd9\u4e2a\u573a\u666f\u9700\u8981\u4f7f\u7528\u5230\u7684\u4f9d\u8d56\u662f\u4ec0\u4e48\uff1f</p> <p>\u200b   2\u3001\u5982\u4f55\u7f16\u5199\u81ea\u52a8\u914d\u7f6e</p> <pre><code>@Configuration  //\u6307\u5b9a\u8fd9\u4e2a\u7c7b\u662f\u4e00\u4e2a\u914d\u7f6e\u7c7b\n@ConditionalOnXXX  //\u5728\u6307\u5b9a\u6761\u4ef6\u6210\u7acb\u7684\u60c5\u51b5\u4e0b\u81ea\u52a8\u914d\u7f6e\u7c7b\u751f\u6548\n@AutoConfigureAfter  //\u6307\u5b9a\u81ea\u52a8\u914d\u7f6e\u7c7b\u7684\u987a\u5e8f\n@Bean  //\u7ed9\u5bb9\u5668\u4e2d\u6dfb\u52a0\u7ec4\u4ef6\n\n@ConfigurationPropertie\u7ed3\u5408\u76f8\u5173xxxProperties\u7c7b\u6765\u7ed1\u5b9a\u76f8\u5173\u7684\u914d\u7f6e\n@EnableConfigurationProperties //\u8ba9xxxProperties\u751f\u6548\u52a0\u5165\u5230\u5bb9\u5668\u4e2d\n\n\u81ea\u52a8\u914d\u7f6e\u7c7b\u8981\u80fd\u52a0\u8f7d\n\u5c06\u9700\u8981\u542f\u52a8\u5c31\u52a0\u8f7d\u7684\u81ea\u52a8\u914d\u7f6e\u7c7b\uff0c\u914d\u7f6e\u5728META-INF/spring.factories\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\norg.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\\\norg.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\\\n</code></pre> <p>\u200b   3\u3001\u6a21\u5f0f\uff1a</p> <p>\u542f\u52a8\u5668\u53ea\u7528\u6765\u505a\u4f9d\u8d56\u5bfc\u5165\uff1b</p> <p>\u4e13\u95e8\u6765\u5199\u4e00\u4e2a\u81ea\u52a8\u914d\u7f6e\u6a21\u5757\uff1b</p> <p>\u542f\u52a8\u5668\u4f9d\u8d56\u81ea\u52a8\u914d\u7f6e\uff1b\u522b\u4eba\u53ea\u9700\u8981\u5f15\u5165\u542f\u52a8\u5668\uff08starter\uff09</p> <p>mybatis-spring-boot-starter\uff1b\u81ea\u5b9a\u4e49\u542f\u52a8\u5668\u540d-spring-boot-starter</p> <p>\u6b65\u9aa4\uff1a</p> <p>1\uff09\u3001\u542f\u52a8\u5668\u6a21\u5757</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.atguigu.starter&lt;/groupId&gt;\n    &lt;artifactId&gt;atguigu-spring-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;!--\u542f\u52a8\u5668--&gt;\n    &lt;dependencies&gt;\n\n        &lt;!--\u5f15\u5165\u81ea\u52a8\u914d\u7f6e\u6a21\u5757--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.atguigu.starter&lt;/groupId&gt;\n            &lt;artifactId&gt;atguigu-spring-boot-starter-autoconfigurer&lt;/artifactId&gt;\n            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre> <p>2\uff09\u3001\u81ea\u52a8\u914d\u7f6e\u6a21\u5757</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n   &lt;groupId&gt;com.atguigu.starter&lt;/groupId&gt;\n   &lt;artifactId&gt;atguigu-spring-boot-starter-autoconfigurer&lt;/artifactId&gt;\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n   &lt;packaging&gt;jar&lt;/packaging&gt;\n\n   &lt;name&gt;atguigu-spring-boot-starter-autoconfigurer&lt;/name&gt;\n   &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n   &lt;parent&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n      &lt;version&gt;1.5.10.RELEASE&lt;/version&gt;\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n   &lt;/parent&gt;\n\n   &lt;properties&gt;\n      &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n      &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n      &lt;java.version&gt;1.8&lt;/java.version&gt;\n   &lt;/properties&gt;\n\n   &lt;dependencies&gt;\n\n      &lt;!--\u5f15\u5165spring-boot-starter\uff1b\u6240\u6709starter\u7684\u57fa\u672c\u914d\u7f6e--&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n\n   &lt;/dependencies&gt;\n\n\n\n&lt;/project&gt;\n</code></pre> <pre><code>package com.atguigu.starter;\n\nimport org.springframework.boot.context.properties.ConfigurationProperties;\n\n@ConfigurationProperties(prefix = \"atguigu.hello\")\npublic class HelloProperties {\n\n    private String prefix;\n    private String suffix;\n\n    public String getPrefix() {\n        return prefix;\n    }\n\n    public void setPrefix(String prefix) {\n        this.prefix = prefix;\n    }\n\n    public String getSuffix() {\n        return suffix;\n    }\n\n    public void setSuffix(String suffix) {\n        this.suffix = suffix;\n    }\n}\n</code></pre> <pre><code>package com.atguigu.starter;\n\npublic class HelloService {\n\n    HelloProperties helloProperties;\n\n    public HelloProperties getHelloProperties() {\n        return helloProperties;\n    }\n\n    public void setHelloProperties(HelloProperties helloProperties) {\n        this.helloProperties = helloProperties;\n    }\n\n    public String sayHellAtguigu(String name){\n        return helloProperties.getPrefix()+\"-\" +name + helloProperties.getSuffix();\n    }\n}\n</code></pre> <pre><code>package com.atguigu.starter;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ConditionalOnWebApplication //web\u5e94\u7528\u624d\u751f\u6548\n@EnableConfigurationProperties(HelloProperties.class)\npublic class HelloServiceAutoConfiguration {\n\n    @Autowired\n    HelloProperties helloProperties;\n    @Bean\n    public HelloService helloService(){\n        HelloService service = new HelloService();\n        service.setHelloProperties(helloProperties);\n        return service;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot/#springboot_1","title":"\u66f4\u591aSpringBoot\u6574\u5408\u793a\u4f8b","text":"<p>https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/","title":"SpringMVC","text":"<ul> <li>\u4e00\u3001SpringMVC\u7b80\u4ecb<ul> <li>1\u3001\u4ec0\u4e48\u662fMVC</li> <li>2\u3001\u4ec0\u4e48\u662fSpringMVC</li> <li>3\u3001SpringMVC\u7684\u7279\u70b9</li> </ul> </li> <li>\u4e8c\u3001HelloWorld<ul> <li>1\u3001\u5f00\u53d1\u73af\u5883</li> <li>2\u3001\u521b\u5efamaven\u5de5\u7a0b<ul> <li>a&gt;\u6dfb\u52a0web\u6a21\u5757</li> <li>b&gt;\u6253\u5305\u65b9\u5f0f\uff1awar</li> <li>c&gt;\u5f15\u5165\u4f9d\u8d56</li> </ul> </li> <li>3\u3001\u914d\u7f6eweb.xml<ul> <li>a&gt;\u9ed8\u8ba4\u914d\u7f6e\u65b9\u5f0f</li> <li>b&gt;\u6269\u5c55\u914d\u7f6e\u65b9\u5f0f</li> </ul> </li> <li>4\u3001\u521b\u5efa\u8bf7\u6c42\u63a7\u5236\u5668</li> <li>5\u3001\u521b\u5efaspringMVC\u7684\u914d\u7f6e\u6587\u4ef6</li> <li>6\u3001\u6d4b\u8bd5HelloWorld<ul> <li>a&gt;\u5b9e\u73b0\u5bf9\u9996\u9875\u7684\u8bbf\u95ee</li> <li>b&gt;\u901a\u8fc7\u8d85\u94fe\u63a5\u8df3\u8f6c\u5230\u6307\u5b9a\u9875\u9762</li> </ul> </li> <li>7\u3001\u603b\u7ed3</li> </ul> </li> <li>\u4e09\u3001@RequestMapping\u6ce8\u89e3<ul> <li>1\u3001@RequestMapping\u6ce8\u89e3\u7684\u529f\u80fd</li> <li>2\u3001@RequestMapping\u6ce8\u89e3\u7684\u4f4d\u7f6e</li> <li>3\u3001@RequestMapping\u6ce8\u89e3\u7684value\u5c5e\u6027</li> <li>4\u3001@RequestMapping\u6ce8\u89e3\u7684method\u5c5e\u6027</li> <li>5\u3001@RequestMapping\u6ce8\u89e3\u7684params\u5c5e\u6027\uff08\u4e86\u89e3\uff09</li> <li>6\u3001@RequestMapping\u6ce8\u89e3\u7684headers\u5c5e\u6027\uff08\u4e86\u89e3\uff09</li> <li>7\u3001SpringMVC\u652f\u6301ant\u98ce\u683c\u7684\u8def\u5f84</li> <li>8\u3001SpringMVC\u652f\u6301\u8def\u5f84\u4e2d\u7684\u5360\u4f4d\u7b26\uff08\u91cd\u70b9\uff09</li> </ul> </li> <li>\u56db\u3001SpringMVC\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570<ul> <li>1\u3001\u901a\u8fc7ServletAPI\u83b7\u53d6</li> <li>2\u3001\u901a\u8fc7\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u5f62\u53c2\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570</li> <li>3\u3001@RequestParam</li> <li>4\u3001@RequestHeader</li> <li>5\u3001@CookieValue</li> <li>6\u3001\u901a\u8fc7POJO\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570</li> <li>7\u3001\u89e3\u51b3\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\u7684\u4e71\u7801\u95ee\u9898</li> </ul> </li> <li>\u4e94\u3001\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e<ul> <li>1\u3001\u4f7f\u7528ServletAPI\u5411request\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e</li> <li>2\u3001\u4f7f\u7528ModelAndView\u5411request\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e</li> <li>3\u3001\u4f7f\u7528Model\u5411request\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e</li> <li>4\u3001\u4f7f\u7528map\u5411request\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e</li> <li>5\u3001\u4f7f\u7528ModelMap\u5411request\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e</li> <li>6\u3001Model\u3001ModelMap\u3001Map\u7684\u5173\u7cfb</li> <li>7\u3001\u5411session\u57df\u5171\u4eab\u6570\u636e</li> <li>8\u3001\u5411application\u57df\u5171\u4eab\u6570\u636e</li> </ul> </li> <li>\u516d\u3001SpringMVC\u7684\u89c6\u56fe<ul> <li>1\u3001ThymeleafView</li> <li>2\u3001\u8f6c\u53d1\u89c6\u56fe</li> <li>3\u3001\u91cd\u5b9a\u5411\u89c6\u56fe</li> <li>4\u3001\u89c6\u56fe\u63a7\u5236\u5668view-controller</li> </ul> </li> <li>\u4e03\u3001RESTful<ul> <li>1\u3001RESTful\u7b80\u4ecb<ul> <li>a&gt;\u8d44\u6e90</li> <li>b&gt;\u8d44\u6e90\u7684\u8868\u8ff0</li> <li>c&gt;\u72b6\u6001\u8f6c\u79fb</li> </ul> </li> <li>2\u3001RESTful\u7684\u5b9e\u73b0</li> <li>3\u3001HiddenHttpMethodFilter</li> </ul> </li> <li>\u516b\u3001RESTful\u6848\u4f8b<ul> <li>1\u3001\u51c6\u5907\u5de5\u4f5c</li> <li>2\u3001\u529f\u80fd\u6e05\u5355</li> <li>3\u3001\u5177\u4f53\u529f\u80fd\uff1a\u8bbf\u95ee\u9996\u9875<ul> <li>a&gt;\u914d\u7f6eview-controller</li> <li>b&gt;\u521b\u5efa\u9875\u9762</li> </ul> </li> <li>4\u3001\u5177\u4f53\u529f\u80fd\uff1a\u67e5\u8be2\u6240\u6709\u5458\u5de5\u6570\u636e<ul> <li>a&gt;\u63a7\u5236\u5668\u65b9\u6cd5</li> <li>b&gt;\u521b\u5efaemployee_list.html</li> </ul> </li> <li>5\u3001\u5177\u4f53\u529f\u80fd\uff1a\u5220\u9664<ul> <li>a&gt;\u521b\u5efa\u5904\u7406delete\u8bf7\u6c42\u65b9\u5f0f\u7684\u8868\u5355</li> <li>b&gt;\u5220\u9664\u8d85\u94fe\u63a5\u7ed1\u5b9a\u70b9\u51fb\u4e8b\u4ef6</li> <li>c&gt;\u63a7\u5236\u5668\u65b9\u6cd5</li> </ul> </li> <li>6\u3001\u5177\u4f53\u529f\u80fd\uff1a\u8df3\u8f6c\u5230\u6dfb\u52a0\u6570\u636e\u9875\u9762<ul> <li>a&gt;\u914d\u7f6eview-controller</li> <li>b&gt;\u521b\u5efaemployee_add.html</li> </ul> </li> <li>7\u3001\u5177\u4f53\u529f\u80fd\uff1a\u6267\u884c\u4fdd\u5b58<ul> <li>a&gt;\u63a7\u5236\u5668\u65b9\u6cd5</li> </ul> </li> <li>8\u3001\u5177\u4f53\u529f\u80fd\uff1a\u8df3\u8f6c\u5230\u66f4\u65b0\u6570\u636e\u9875\u9762<ul> <li>a&gt;\u4fee\u6539\u8d85\u94fe\u63a5</li> <li>b&gt;\u63a7\u5236\u5668\u65b9\u6cd5</li> <li>c&gt;\u521b\u5efaemployee_update.html</li> </ul> </li> <li>9\u3001\u5177\u4f53\u529f\u80fd\uff1a\u6267\u884c\u66f4\u65b0<ul> <li>a&gt;\u63a7\u5236\u5668\u65b9\u6cd5</li> </ul> </li> </ul> </li> <li>\u516b\u3001HttpMessageConverter<ul> <li>1\u3001@RequestBody</li> <li>2\u3001RequestEntity</li> <li>3\u3001@ResponseBody</li> <li>4\u3001SpringMVC\u5904\u7406json</li> <li>5\u3001SpringMVC\u5904\u7406ajax</li> <li>6\u3001@RestController\u6ce8\u89e3</li> <li>7\u3001ResponseEntity</li> </ul> </li> <li>\u4e5d\u3001\u6587\u4ef6\u4e0a\u4f20\u548c\u4e0b\u8f7d<ul> <li>1\u3001\u6587\u4ef6\u4e0b\u8f7d</li> <li>2\u3001\u6587\u4ef6\u4e0a\u4f20</li> </ul> </li> <li>\u5341\u3001\u62e6\u622a\u5668<ul> <li>1\u3001\u62e6\u622a\u5668\u7684\u914d\u7f6e</li> <li>2\u3001\u62e6\u622a\u5668\u7684\u4e09\u4e2a\u62bd\u8c61\u65b9\u6cd5</li> <li>3\u3001\u591a\u4e2a\u62e6\u622a\u5668\u7684\u6267\u884c\u987a\u5e8f</li> </ul> </li> <li>\u5341\u4e00\u3001\u5f02\u5e38\u5904\u7406\u5668<ul> <li>1\u3001\u57fa\u4e8e\u914d\u7f6e\u7684\u5f02\u5e38\u5904\u7406</li> <li>2\u3001\u57fa\u4e8e\u6ce8\u89e3\u7684\u5f02\u5e38\u5904\u7406</li> </ul> </li> <li>\u5341\u4e8c\u3001\u6ce8\u89e3\u914d\u7f6eSpringMVC<ul> <li>1\u3001\u521b\u5efa\u521d\u59cb\u5316\u7c7b\uff0c\u4ee3\u66ffweb.xml</li> <li>2\u3001\u521b\u5efaSpringConfig\u914d\u7f6e\u7c7b\uff0c\u4ee3\u66ffspring\u7684\u914d\u7f6e\u6587\u4ef6</li> <li>3\u3001\u521b\u5efaWebConfig\u914d\u7f6e\u7c7b\uff0c\u4ee3\u66ffSpringMVC\u7684\u914d\u7f6e\u6587\u4ef6</li> <li>4\u3001\u6d4b\u8bd5\u529f\u80fd</li> </ul> </li> <li>\u5341\u4e09\u3001SpringMVC\u6267\u884c\u6d41\u7a0b<ul> <li>1\u3001SpringMVC\u5e38\u7528\u7ec4\u4ef6</li> <li>2\u3001DispatcherServlet\u521d\u59cb\u5316\u8fc7\u7a0b<ul> <li>a&gt;\u521d\u59cb\u5316WebApplicationContext</li> <li>b&gt;\u521b\u5efaWebApplicationContext</li> <li>c&gt;DispatcherServlet\u521d\u59cb\u5316\u7b56\u7565</li> </ul> </li> <li>3\u3001DispatcherServlet\u8c03\u7528\u7ec4\u4ef6\u5904\u7406\u8bf7\u6c42<ul> <li>a&gt;processRequest()</li> <li>b&gt;doService()</li> <li>c&gt;doDispatch()</li> <li>d&gt;processDispatchResult()</li> </ul> </li> <li>4\u3001SpringMVC\u7684\u6267\u884c\u6d41\u7a0b</li> </ul> </li> </ul>"},{"location":"Java/SpringMVC/SpringMVCNotes/#springmvc","title":"\u4e00\u3001SpringMVC\u7b80\u4ecb","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#1mvc","title":"1\u3001\u4ec0\u4e48\u662fMVC","text":"<p>MVC\u662f\u4e00\u79cd\u8f6f\u4ef6\u67b6\u6784\u7684\u601d\u60f3\uff0c\u5c06\u8f6f\u4ef6\u6309\u7167\u6a21\u578b\u3001\u89c6\u56fe\u3001\u63a7\u5236\u5668\u6765\u5212\u5206</p> <p>M\uff1aModel\uff0c\u6a21\u578b\u5c42\uff0c\u6307\u5de5\u7a0b\u4e2d\u7684JavaBean\uff0c\u4f5c\u7528\u662f\u5904\u7406\u6570\u636e</p> <p>JavaBean\u5206\u4e3a\u4e24\u7c7b\uff1a</p> <ul> <li>\u4e00\u7c7b\u79f0\u4e3a\u5b9e\u4f53\u7c7bBean\uff1a\u4e13\u95e8\u5b58\u50a8\u4e1a\u52a1\u6570\u636e\u7684\uff0c\u5982 Student\u3001User \u7b49</li> <li>\u4e00\u7c7b\u79f0\u4e3a\u4e1a\u52a1\u5904\u7406 Bean\uff1a\u6307 Service \u6216 Dao \u5bf9\u8c61\uff0c\u4e13\u95e8\u7528\u4e8e\u5904\u7406\u4e1a\u52a1\u903b\u8f91\u548c\u6570\u636e\u8bbf\u95ee\u3002</li> </ul> <p>V\uff1aView\uff0c\u89c6\u56fe\u5c42\uff0c\u6307\u5de5\u7a0b\u4e2d\u7684html\u6216jsp\u7b49\u9875\u9762\uff0c\u4f5c\u7528\u662f\u4e0e\u7528\u6237\u8fdb\u884c\u4ea4\u4e92\uff0c\u5c55\u793a\u6570\u636e</p> <p>C\uff1aController\uff0c\u63a7\u5236\u5c42\uff0c\u6307\u5de5\u7a0b\u4e2d\u7684servlet\uff0c\u4f5c\u7528\u662f\u63a5\u6536\u8bf7\u6c42\u548c\u54cd\u5e94\u6d4f\u89c8\u5668</p> <p>MVC\u7684\u5de5\u4f5c\u6d41\u7a0b\uff1a \u7528\u6237\u901a\u8fc7\u89c6\u56fe\u5c42\u53d1\u9001\u8bf7\u6c42\u5230\u670d\u52a1\u5668\uff0c\u5728\u670d\u52a1\u5668\u4e2d\u8bf7\u6c42\u88abController\u63a5\u6536\uff0cController\u8c03\u7528\u76f8\u5e94\u7684Model\u5c42\u5904\u7406\u8bf7\u6c42\uff0c\u5904\u7406\u5b8c\u6bd5\u5c06\u7ed3\u679c\u8fd4\u56de\u5230Controller\uff0cController\u518d\u6839\u636e\u8bf7\u6c42\u5904\u7406\u7684\u7ed3\u679c\u627e\u5230\u76f8\u5e94\u7684View\u89c6\u56fe\uff0c\u6e32\u67d3\u6570\u636e\u540e\u6700\u7ec8\u54cd\u5e94\u7ed9\u6d4f\u89c8\u5668</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2springmvc","title":"2\u3001\u4ec0\u4e48\u662fSpringMVC","text":"<p>SpringMVC\u662fSpring\u7684\u4e00\u4e2a\u540e\u7eed\u4ea7\u54c1\uff0c\u662fSpring\u7684\u4e00\u4e2a\u5b50\u9879\u76ee</p> <p>SpringMVC \u662f Spring \u4e3a\u8868\u8ff0\u5c42\u5f00\u53d1\u63d0\u4f9b\u7684\u4e00\u6574\u5957\u5b8c\u5907\u7684\u89e3\u51b3\u65b9\u6848\u3002\u5728\u8868\u8ff0\u5c42\u6846\u67b6\u5386\u7ecf Strust\u3001WebWork\u3001Strust2 \u7b49\u8bf8\u591a\u4ea7\u54c1\u7684\u5386\u4ee3\u66f4\u8fed\u4e4b\u540e\uff0c\u76ee\u524d\u4e1a\u754c\u666e\u904d\u9009\u62e9\u4e86 SpringMVC \u4f5c\u4e3a Java EE \u9879\u76ee\u8868\u8ff0\u5c42\u5f00\u53d1\u7684\u9996\u9009\u65b9\u6848\u3002</p> <p>\u6ce8\uff1a\u4e09\u5c42\u67b6\u6784\u5206\u4e3a\u8868\u8ff0\u5c42\uff08\u6216\u8868\u793a\u5c42\uff09\u3001\u4e1a\u52a1\u903b\u8f91\u5c42\u3001\u6570\u636e\u8bbf\u95ee\u5c42\uff0c\u8868\u8ff0\u5c42\u8868\u793a\u524d\u53f0\u9875\u9762\u548c\u540e\u53f0servlet</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#3springmvc","title":"3\u3001SpringMVC\u7684\u7279\u70b9","text":"<ul> <li>Spring \u5bb6\u65cf\u539f\u751f\u4ea7\u54c1\uff0c\u4e0e IOC \u5bb9\u5668\u7b49\u57fa\u7840\u8bbe\u65bd\u65e0\u7f1d\u5bf9\u63a5</li> <li>\u57fa\u4e8e\u539f\u751f\u7684Servlet\uff0c\u901a\u8fc7\u4e86\u529f\u80fd\u5f3a\u5927\u7684\u524d\u7aef\u63a7\u5236\u5668DispatcherServlet\uff0c\u5bf9\u8bf7\u6c42\u548c\u54cd\u5e94\u8fdb\u884c\u7edf\u4e00\u5904\u7406</li> <li>\u8868\u8ff0\u5c42\u5404\u7ec6\u5206\u9886\u57df\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\u5168\u65b9\u4f4d\u8986\u76d6\uff0c\u63d0\u4f9b\u5168\u9762\u89e3\u51b3\u65b9\u6848</li> <li>\u4ee3\u7801\u6e05\u65b0\u7b80\u6d01\uff0c\u5927\u5e45\u5ea6\u63d0\u5347\u5f00\u53d1\u6548\u7387</li> <li>\u5185\u90e8\u7ec4\u4ef6\u5316\u7a0b\u5ea6\u9ad8\uff0c\u53ef\u63d2\u62d4\u5f0f\u7ec4\u4ef6\u5373\u63d2\u5373\u7528\uff0c\u60f3\u8981\u4ec0\u4e48\u529f\u80fd\u914d\u7f6e\u76f8\u5e94\u7ec4\u4ef6\u5373\u53ef</li> <li>\u6027\u80fd\u5353\u8457\uff0c\u5c24\u5176\u9002\u5408\u73b0\u4ee3\u5927\u578b\u3001\u8d85\u5927\u578b\u4e92\u8054\u7f51\u9879\u76ee\u8981\u6c42</li> </ul>"},{"location":"Java/SpringMVC/SpringMVCNotes/#helloworld","title":"\u4e8c\u3001HelloWorld","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#1","title":"1\u3001\u5f00\u53d1\u73af\u5883","text":"<p>IDE\uff1aidea 2019.2</p> <p>\u6784\u5efa\u5de5\u5177\uff1amaven3.5.4</p> <p>\u670d\u52a1\u5668\uff1atomcat7</p> <p>Spring\u7248\u672c\uff1a5.3.1</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2maven","title":"2\u3001\u521b\u5efamaven\u5de5\u7a0b","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#aweb","title":"a&gt;\u6dfb\u52a0web\u6a21\u5757","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#bwar","title":"b&gt;\u6253\u5305\u65b9\u5f0f\uff1awar","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#c","title":"c&gt;\u5f15\u5165\u4f9d\u8d56","text":"<pre><code>&lt;dependencies&gt;\n    &lt;!-- SpringMVC --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;5.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- \u65e5\u5fd7 --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n        &lt;version&gt;1.2.3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- ServletAPI --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Spring5\u548cThymeleaf\u6574\u5408\u5305 --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n        &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\n        &lt;version&gt;3.0.12.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre> <p>\u6ce8\uff1a\u7531\u4e8e Maven \u7684\u4f20\u9012\u6027\uff0c\u6211\u4eec\u4e0d\u5fc5\u5c06\u6240\u6709\u9700\u8981\u7684\u5305\u5168\u90e8\u914d\u7f6e\u4f9d\u8d56\uff0c\u800c\u662f\u914d\u7f6e\u6700\u9876\u7aef\u7684\u4f9d\u8d56\uff0c\u5176\u4ed6\u9760\u4f20\u9012\u6027\u5bfc\u5165\u3002</p> <p></p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#3webxml","title":"3\u3001\u914d\u7f6eweb.xml","text":"<p>\u6ce8\u518cSpringMVC\u7684\u524d\u7aef\u63a7\u5236\u5668DispatcherServlet</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#a","title":"a&gt;\u9ed8\u8ba4\u914d\u7f6e\u65b9\u5f0f","text":"<p>\u6b64\u914d\u7f6e\u4f5c\u7528\u4e0b\uff0cSpringMVC\u7684\u914d\u7f6e\u6587\u4ef6\u9ed8\u8ba4\u4f4d\u4e8eWEB-INF\u4e0b\uff0c\u9ed8\u8ba4\u540d\u79f0\u4e3a\\-servlet.xml\uff0c\u4f8b\u5982\uff0c\u4ee5\u4e0b\u914d\u7f6e\u6240\u5bf9\u5e94SpringMVC\u7684\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8eWEB-INF\u4e0b\uff0c\u6587\u4ef6\u540d\u4e3aspringMVC-servlet.xml <pre><code>&lt;!-- \u914d\u7f6eSpringMVC\u7684\u524d\u7aef\u63a7\u5236\u5668\uff0c\u5bf9\u6d4f\u89c8\u5668\u53d1\u9001\u7684\u8bf7\u6c42\u7edf\u4e00\u8fdb\u884c\u5904\u7406 --&gt;\n&lt;servlet&gt;\n    &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt;\n    &lt;!--\n        \u8bbe\u7f6espringMVC\u7684\u6838\u5fc3\u63a7\u5236\u5668\u6240\u80fd\u5904\u7406\u7684\u8bf7\u6c42\u7684\u8bf7\u6c42\u8def\u5f84\n        /\u6240\u5339\u914d\u7684\u8bf7\u6c42\u53ef\u4ee5\u662f/login\u6216.html\u6216.js\u6216.css\u65b9\u5f0f\u7684\u8bf7\u6c42\u8def\u5f84\n        \u4f46\u662f/\u4e0d\u80fd\u5339\u914d.jsp\u8bf7\u6c42\u8def\u5f84\u7684\u8bf7\u6c42\n    --&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#b","title":"b&gt;\u6269\u5c55\u914d\u7f6e\u65b9\u5f0f","text":"<p>\u53ef\u901a\u8fc7init-param\u6807\u7b7e\u8bbe\u7f6eSpringMVC\u914d\u7f6e\u6587\u4ef6\u7684\u4f4d\u7f6e\u548c\u540d\u79f0\uff0c\u901a\u8fc7load-on-startup\u6807\u7b7e\u8bbe\u7f6eSpringMVC\u524d\u7aef\u63a7\u5236\u5668DispatcherServlet\u7684\u521d\u59cb\u5316\u65f6\u95f4</p> <pre><code>&lt;!-- \u914d\u7f6eSpringMVC\u7684\u524d\u7aef\u63a7\u5236\u5668\uff0c\u5bf9\u6d4f\u89c8\u5668\u53d1\u9001\u7684\u8bf7\u6c42\u7edf\u4e00\u8fdb\u884c\u5904\u7406 --&gt;\n&lt;servlet&gt;\n    &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;!-- \u901a\u8fc7\u521d\u59cb\u5316\u53c2\u6570\u6307\u5b9aSpringMVC\u914d\u7f6e\u6587\u4ef6\u7684\u4f4d\u7f6e\u548c\u540d\u79f0 --&gt;\n    &lt;init-param&gt;\n        &lt;!-- contextConfigLocation\u4e3a\u56fa\u5b9a\u503c --&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;!-- \u4f7f\u7528classpath:\u8868\u793a\u4ece\u7c7b\u8def\u5f84\u67e5\u627e\u914d\u7f6e\u6587\u4ef6\uff0c\u4f8b\u5982maven\u5de5\u7a0b\u4e2d\u7684src/main/resources --&gt;\n        &lt;param-value&gt;classpath:springMVC.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;!-- \n        \u4f5c\u4e3a\u6846\u67b6\u7684\u6838\u5fc3\u7ec4\u4ef6\uff0c\u5728\u542f\u52a8\u8fc7\u7a0b\u4e2d\u6709\u5927\u91cf\u7684\u521d\u59cb\u5316\u64cd\u4f5c\u8981\u505a\n        \u800c\u8fd9\u4e9b\u64cd\u4f5c\u653e\u5728\u7b2c\u4e00\u6b21\u8bf7\u6c42\u65f6\u624d\u6267\u884c\u4f1a\u4e25\u91cd\u5f71\u54cd\u8bbf\u95ee\u901f\u5ea6\n        \u56e0\u6b64\u9700\u8981\u901a\u8fc7\u6b64\u6807\u7b7e\u5c06\u542f\u52a8\u63a7\u5236DispatcherServlet\u7684\u521d\u59cb\u5316\u65f6\u95f4\u63d0\u524d\u5230\u670d\u52a1\u5668\u542f\u52a8\u65f6\n    --&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt;\n    &lt;!--\n        \u8bbe\u7f6espringMVC\u7684\u6838\u5fc3\u63a7\u5236\u5668\u6240\u80fd\u5904\u7406\u7684\u8bf7\u6c42\u7684\u8bf7\u6c42\u8def\u5f84\n        /\u6240\u5339\u914d\u7684\u8bf7\u6c42\u53ef\u4ee5\u662f/login\u6216.html\u6216.js\u6216.css\u65b9\u5f0f\u7684\u8bf7\u6c42\u8def\u5f84\n        \u4f46\u662f/\u4e0d\u80fd\u5339\u914d.jsp\u8bf7\u6c42\u8def\u5f84\u7684\u8bf7\u6c42\n    --&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre> <p>\u6ce8\uff1a</p> <p>\\\u6807\u7b7e\u4e2d\u4f7f\u7528/\u548c/*\u7684\u533a\u522b\uff1a <p>/\u6240\u5339\u914d\u7684\u8bf7\u6c42\u53ef\u4ee5\u662f/login\u6216.html\u6216.js\u6216.css\u65b9\u5f0f\u7684\u8bf7\u6c42\u8def\u5f84\uff0c\u4f46\u662f/\u4e0d\u80fd\u5339\u914d.jsp\u8bf7\u6c42\u8def\u5f84\u7684\u8bf7\u6c42</p> <p>\u56e0\u6b64\u5c31\u53ef\u4ee5\u907f\u514d\u5728\u8bbf\u95eejsp\u9875\u9762\u65f6\uff0c\u8be5\u8bf7\u6c42\u88abDispatcherServlet\u5904\u7406\uff0c\u4ece\u800c\u627e\u4e0d\u5230\u76f8\u5e94\u7684\u9875\u9762</p> <p>/*\u5219\u80fd\u591f\u5339\u914d\u6240\u6709\u8bf7\u6c42\uff0c\u4f8b\u5982\u5728\u4f7f\u7528\u8fc7\u6ee4\u5668\u65f6\uff0c\u82e5\u9700\u8981\u5bf9\u6240\u6709\u8bf7\u6c42\u8fdb\u884c\u8fc7\u6ee4\uff0c\u5c31\u9700\u8981\u4f7f\u7528/*\u7684\u5199\u6cd5</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#4","title":"4\u3001\u521b\u5efa\u8bf7\u6c42\u63a7\u5236\u5668","text":"<p>\u7531\u4e8e\u524d\u7aef\u63a7\u5236\u5668\u5bf9\u6d4f\u89c8\u5668\u53d1\u9001\u7684\u8bf7\u6c42\u8fdb\u884c\u4e86\u7edf\u4e00\u7684\u5904\u7406\uff0c\u4f46\u662f\u5177\u4f53\u7684\u8bf7\u6c42\u6709\u4e0d\u540c\u7684\u5904\u7406\u8fc7\u7a0b\uff0c\u56e0\u6b64\u9700\u8981\u521b\u5efa\u5904\u7406\u5177\u4f53\u8bf7\u6c42\u7684\u7c7b\uff0c\u5373\u8bf7\u6c42\u63a7\u5236\u5668</p> <p>\u8bf7\u6c42\u63a7\u5236\u5668\u4e2d\u6bcf\u4e00\u4e2a\u5904\u7406\u8bf7\u6c42\u7684\u65b9\u6cd5\u6210\u4e3a\u63a7\u5236\u5668\u65b9\u6cd5</p> <p>\u56e0\u4e3aSpringMVC\u7684\u63a7\u5236\u5668\u7531\u4e00\u4e2aPOJO\uff08\u666e\u901a\u7684Java\u7c7b\uff09\u62c5\u4efb\uff0c\u56e0\u6b64\u9700\u8981\u901a\u8fc7@Controller\u6ce8\u89e3\u5c06\u5176\u6807\u8bc6\u4e3a\u4e00\u4e2a\u63a7\u5236\u5c42\u7ec4\u4ef6\uff0c\u4ea4\u7ed9Spring\u7684IoC\u5bb9\u5668\u7ba1\u7406\uff0c\u6b64\u65f6SpringMVC\u624d\u80fd\u591f\u8bc6\u522b\u63a7\u5236\u5668\u7684\u5b58\u5728</p> <pre><code>@Controller\npublic class HelloController {\n\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#5springmvc","title":"5\u3001\u521b\u5efaspringMVC\u7684\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>&lt;!-- \u81ea\u52a8\u626b\u63cf\u5305 --&gt;\n&lt;context:component-scan base-package=\"com.atguigu.mvc.controller\"/&gt;\n\n&lt;!-- \u914d\u7f6eThymeleaf\u89c6\u56fe\u89e3\u6790\u5668 --&gt;\n&lt;bean id=\"viewResolver\" class=\"org.thymeleaf.spring5.view.ThymeleafViewResolver\"&gt;\n    &lt;property name=\"order\" value=\"1\"/&gt;\n    &lt;property name=\"characterEncoding\" value=\"UTF-8\"/&gt;\n    &lt;property name=\"templateEngine\"&gt;\n        &lt;bean class=\"org.thymeleaf.spring5.SpringTemplateEngine\"&gt;\n            &lt;property name=\"templateResolver\"&gt;\n                &lt;bean class=\"org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver\"&gt;\n\n                    &lt;!-- \u89c6\u56fe\u524d\u7f00 --&gt;\n                    &lt;property name=\"prefix\" value=\"/WEB-INF/templates/\"/&gt;\n\n                    &lt;!-- \u89c6\u56fe\u540e\u7f00 --&gt;\n                    &lt;property name=\"suffix\" value=\".html\"/&gt;\n                    &lt;property name=\"templateMode\" value=\"HTML5\"/&gt;\n                    &lt;property name=\"characterEncoding\" value=\"UTF-8\" /&gt;\n                &lt;/bean&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;!-- \n   \u5904\u7406\u9759\u6001\u8d44\u6e90\uff0c\u4f8b\u5982html\u3001js\u3001css\u3001jpg\n  \u82e5\u53ea\u8bbe\u7f6e\u8be5\u6807\u7b7e\uff0c\u5219\u53ea\u80fd\u8bbf\u95ee\u9759\u6001\u8d44\u6e90\uff0c\u5176\u4ed6\u8bf7\u6c42\u5219\u65e0\u6cd5\u8bbf\u95ee\n  \u6b64\u65f6\u5fc5\u987b\u8bbe\u7f6e&lt;mvc:annotation-driven/&gt;\u89e3\u51b3\u95ee\u9898\n --&gt;\n&lt;mvc:default-servlet-handler/&gt;\n\n&lt;!-- \u5f00\u542fmvc\u6ce8\u89e3\u9a71\u52a8 --&gt;\n&lt;mvc:annotation-driven&gt;\n    &lt;mvc:message-converters&gt;\n        &lt;!-- \u5904\u7406\u54cd\u5e94\u4e2d\u6587\u5185\u5bb9\u4e71\u7801 --&gt;\n        &lt;bean class=\"org.springframework.http.converter.StringHttpMessageConverter\"&gt;\n            &lt;property name=\"defaultCharset\" value=\"UTF-8\" /&gt;\n            &lt;property name=\"supportedMediaTypes\"&gt;\n                &lt;list&gt;\n                    &lt;value&gt;text/html&lt;/value&gt;\n                    &lt;value&gt;application/json&lt;/value&gt;\n                &lt;/list&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/mvc:message-converters&gt;\n&lt;/mvc:annotation-driven&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#6helloworld","title":"6\u3001\u6d4b\u8bd5HelloWorld","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#a_1","title":"a&gt;\u5b9e\u73b0\u5bf9\u9996\u9875\u7684\u8bbf\u95ee","text":"<p>\u5728\u8bf7\u6c42\u63a7\u5236\u5668\u4e2d\u521b\u5efa\u5904\u7406\u8bf7\u6c42\u7684\u65b9\u6cd5</p> <pre><code>// @RequestMapping\u6ce8\u89e3\uff1a\u5904\u7406\u8bf7\u6c42\u548c\u63a7\u5236\u5668\u65b9\u6cd5\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\n// @RequestMapping\u6ce8\u89e3\u7684value\u5c5e\u6027\u53ef\u4ee5\u901a\u8fc7\u8bf7\u6c42\u5730\u5740\u5339\u914d\u8bf7\u6c42\uff0c/\u8868\u793a\u7684\u5f53\u524d\u5de5\u7a0b\u7684\u4e0a\u4e0b\u6587\u8def\u5f84\n// localhost:8080/springMVC/\n@RequestMapping(\"/\")\npublic String index() {\n    //\u8bbe\u7f6e\u89c6\u56fe\u540d\u79f0\n    return \"index\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#b_1","title":"b&gt;\u901a\u8fc7\u8d85\u94fe\u63a5\u8df3\u8f6c\u5230\u6307\u5b9a\u9875\u9762","text":"<p>\u5728\u4e3b\u9875index.html\u4e2d\u8bbe\u7f6e\u8d85\u94fe\u63a5</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;\u9996\u9875&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;\u9996\u9875&lt;/h1&gt;\n    &lt;a th:href=\"@{/hello}\"&gt;HelloWorld&lt;/a&gt;&lt;br/&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u5728\u8bf7\u6c42\u63a7\u5236\u5668\u4e2d\u521b\u5efa\u5904\u7406\u8bf7\u6c42\u7684\u65b9\u6cd5</p> <pre><code>@RequestMapping(\"/hello\")\npublic String HelloWorld() {\n    return \"target\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#7","title":"7\u3001\u603b\u7ed3","text":"<p>\u6d4f\u89c8\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u82e5\u8bf7\u6c42\u5730\u5740\u7b26\u5408\u524d\u7aef\u63a7\u5236\u5668\u7684url-pattern\uff0c\u8be5\u8bf7\u6c42\u5c31\u4f1a\u88ab\u524d\u7aef\u63a7\u5236\u5668DispatcherServlet\u5904\u7406\u3002\u524d\u7aef\u63a7\u5236\u5668\u4f1a\u8bfb\u53d6SpringMVC\u7684\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6\uff0c\u901a\u8fc7\u626b\u63cf\u7ec4\u4ef6\u627e\u5230\u63a7\u5236\u5668\uff0c\u5c06\u8bf7\u6c42\u5730\u5740\u548c\u63a7\u5236\u5668\u4e2d@RequestMapping\u6ce8\u89e3\u7684value\u5c5e\u6027\u503c\u8fdb\u884c\u5339\u914d\uff0c\u82e5\u5339\u914d\u6210\u529f\uff0c\u8be5\u6ce8\u89e3\u6240\u6807\u8bc6\u7684\u63a7\u5236\u5668\u65b9\u6cd5\u5c31\u662f\u5904\u7406\u8bf7\u6c42\u7684\u65b9\u6cd5\u3002\u5904\u7406\u8bf7\u6c42\u7684\u65b9\u6cd5\u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u89c6\u56fe\u540d\u79f0\uff0c\u8be5\u89c6\u56fe\u540d\u79f0\u4f1a\u88ab\u89c6\u56fe\u89e3\u6790\u5668\u89e3\u6790\uff0c\u52a0\u4e0a\u524d\u7f00\u548c\u540e\u7f00\u7ec4\u6210\u89c6\u56fe\u7684\u8def\u5f84\uff0c\u901a\u8fc7Thymeleaf\u5bf9\u89c6\u56fe\u8fdb\u884c\u6e32\u67d3\uff0c\u6700\u7ec8\u8f6c\u53d1\u5230\u89c6\u56fe\u6240\u5bf9\u5e94\u9875\u9762</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#requestmapping","title":"\u4e09\u3001@RequestMapping\u6ce8\u89e3","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#1requestmapping","title":"1\u3001@RequestMapping\u6ce8\u89e3\u7684\u529f\u80fd","text":"<p>\u4ece\u6ce8\u89e3\u540d\u79f0\u4e0a\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c@RequestMapping\u6ce8\u89e3\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u8bf7\u6c42\u548c\u5904\u7406\u8bf7\u6c42\u7684\u63a7\u5236\u5668\u65b9\u6cd5\u5173\u8054\u8d77\u6765\uff0c\u5efa\u7acb\u6620\u5c04\u5173\u7cfb\u3002</p> <p>SpringMVC \u63a5\u6536\u5230\u6307\u5b9a\u7684\u8bf7\u6c42\uff0c\u5c31\u4f1a\u6765\u627e\u5230\u5728\u6620\u5c04\u5173\u7cfb\u4e2d\u5bf9\u5e94\u7684\u63a7\u5236\u5668\u65b9\u6cd5\u6765\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u3002</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2requestmapping","title":"2\u3001@RequestMapping\u6ce8\u89e3\u7684\u4f4d\u7f6e","text":"<p>@RequestMapping\u6807\u8bc6\u4e00\u4e2a\u7c7b\uff1a\u8bbe\u7f6e\u6620\u5c04\u8bf7\u6c42\u7684\u8bf7\u6c42\u8def\u5f84\u7684\u521d\u59cb\u4fe1\u606f</p> <p>@RequestMapping\u6807\u8bc6\u4e00\u4e2a\u65b9\u6cd5\uff1a\u8bbe\u7f6e\u6620\u5c04\u8bf7\u6c42\u8bf7\u6c42\u8def\u5f84\u7684\u5177\u4f53\u4fe1\u606f</p> <pre><code>@Controller\n@RequestMapping(\"/test\")\npublic class RequestMappingController {\n\n    //\u6b64\u65f6\u8bf7\u6c42\u6620\u5c04\u6240\u6620\u5c04\u7684\u8bf7\u6c42\u7684\u8bf7\u6c42\u8def\u5f84\u4e3a\uff1a/test/testRequestMapping\n    @RequestMapping(\"/testRequestMapping\")\n    public String testRequestMapping(){\n        return \"success\";\n    }\n\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#3requestmappingvalue","title":"3\u3001@RequestMapping\u6ce8\u89e3\u7684value\u5c5e\u6027","text":"<p>@RequestMapping\u6ce8\u89e3\u7684value\u5c5e\u6027\u901a\u8fc7\u8bf7\u6c42\u7684\u8bf7\u6c42\u5730\u5740\u5339\u914d\u8bf7\u6c42\u6620\u5c04</p> <p>@RequestMapping\u6ce8\u89e3\u7684value\u5c5e\u6027\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u6570\u7ec4\uff0c\u8868\u793a\u8be5\u8bf7\u6c42\u6620\u5c04\u80fd\u591f\u5339\u914d\u591a\u4e2a\u8bf7\u6c42\u5730\u5740\u6240\u5bf9\u5e94\u7684\u8bf7\u6c42</p> <p>@RequestMapping\u6ce8\u89e3\u7684value\u5c5e\u6027\u5fc5\u987b\u8bbe\u7f6e\uff0c\u81f3\u5c11\u901a\u8fc7\u8bf7\u6c42\u5730\u5740\u5339\u914d\u8bf7\u6c42\u6620\u5c04</p> <pre><code>&lt;a th:href=\"@{/testRequestMapping}\"&gt;\u6d4b\u8bd5@RequestMapping\u7684value\u5c5e\u6027--&gt;/testRequestMapping&lt;/a&gt;&lt;br&gt;\n&lt;a th:href=\"@{/test}\"&gt;\u6d4b\u8bd5@RequestMapping\u7684value\u5c5e\u6027--&gt;/test&lt;/a&gt;&lt;br&gt;\n</code></pre> <pre><code>@RequestMapping(\n        value = {\"/testRequestMapping\", \"/test\"}\n)\npublic String testRequestMapping(){\n    return \"success\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#4requestmappingmethod","title":"4\u3001@RequestMapping\u6ce8\u89e3\u7684method\u5c5e\u6027","text":"<p>@RequestMapping\u6ce8\u89e3\u7684method\u5c5e\u6027\u901a\u8fc7\u8bf7\u6c42\u7684\u8bf7\u6c42\u65b9\u5f0f\uff08get\u6216post\uff09\u5339\u914d\u8bf7\u6c42\u6620\u5c04</p> <p>@RequestMapping\u6ce8\u89e3\u7684method\u5c5e\u6027\u662f\u4e00\u4e2aRequestMethod\u7c7b\u578b\u7684\u6570\u7ec4\uff0c\u8868\u793a\u8be5\u8bf7\u6c42\u6620\u5c04\u80fd\u591f\u5339\u914d\u591a\u79cd\u8bf7\u6c42\u65b9\u5f0f\u7684\u8bf7\u6c42</p> <p>\u82e5\u5f53\u524d\u8bf7\u6c42\u7684\u8bf7\u6c42\u5730\u5740\u6ee1\u8db3\u8bf7\u6c42\u6620\u5c04\u7684value\u5c5e\u6027\uff0c\u4f46\u662f\u8bf7\u6c42\u65b9\u5f0f\u4e0d\u6ee1\u8db3method\u5c5e\u6027\uff0c\u5219\u6d4f\u89c8\u5668\u62a5\u9519405\uff1aRequest method 'POST' not supported</p> <pre><code>&lt;a th:href=\"@{/test}\"&gt;\u6d4b\u8bd5@RequestMapping\u7684value\u5c5e\u6027--&gt;/test&lt;/a&gt;&lt;br&gt;\n&lt;form th:action=\"@{/test}\" method=\"post\"&gt;\n    &lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n</code></pre> <pre><code>@RequestMapping(\n        value = {\"/testRequestMapping\", \"/test\"},\n        method = {RequestMethod.GET, RequestMethod.POST}\n)\npublic String testRequestMapping(){\n    return \"success\";\n}\n</code></pre> <p>\u6ce8\uff1a</p> <p>1\u3001\u5bf9\u4e8e\u5904\u7406\u6307\u5b9a\u8bf7\u6c42\u65b9\u5f0f\u7684\u63a7\u5236\u5668\u65b9\u6cd5\uff0cSpringMVC\u4e2d\u63d0\u4f9b\u4e86@RequestMapping\u7684\u6d3e\u751f\u6ce8\u89e3</p> <p>\u5904\u7406get\u8bf7\u6c42\u7684\u6620\u5c04--&gt;@GetMapping</p> <p>\u5904\u7406post\u8bf7\u6c42\u7684\u6620\u5c04--&gt;@PostMapping</p> <p>\u5904\u7406put\u8bf7\u6c42\u7684\u6620\u5c04--&gt;@PutMapping</p> <p>\u5904\u7406delete\u8bf7\u6c42\u7684\u6620\u5c04--&gt;@DeleteMapping</p> <p>2\u3001\u5e38\u7528\u7684\u8bf7\u6c42\u65b9\u5f0f\u6709get\uff0cpost\uff0cput\uff0cdelete</p> <p>\u4f46\u662f\u76ee\u524d\u6d4f\u89c8\u5668\u53ea\u652f\u6301get\u548cpost\uff0c\u82e5\u5728form\u8868\u5355\u63d0\u4ea4\u65f6\uff0c\u4e3amethod\u8bbe\u7f6e\u4e86\u5176\u4ed6\u8bf7\u6c42\u65b9\u5f0f\u7684\u5b57\u7b26\u4e32\uff08put\u6216delete\uff09\uff0c\u5219\u6309\u7167\u9ed8\u8ba4\u7684\u8bf7\u6c42\u65b9\u5f0fget\u5904\u7406</p> <p>\u82e5\u8981\u53d1\u9001put\u548cdelete\u8bf7\u6c42\uff0c\u5219\u9700\u8981\u901a\u8fc7spring\u63d0\u4f9b\u7684\u8fc7\u6ee4\u5668HiddenHttpMethodFilter\uff0c\u5728RESTful\u90e8\u5206\u4f1a\u8bb2\u5230</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#5requestmappingparams","title":"5\u3001@RequestMapping\u6ce8\u89e3\u7684params\u5c5e\u6027\uff08\u4e86\u89e3\uff09","text":"<p>@RequestMapping\u6ce8\u89e3\u7684params\u5c5e\u6027\u901a\u8fc7\u8bf7\u6c42\u7684\u8bf7\u6c42\u53c2\u6570\u5339\u914d\u8bf7\u6c42\u6620\u5c04</p> <p>@RequestMapping\u6ce8\u89e3\u7684params\u5c5e\u6027\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u6570\u7ec4\uff0c\u53ef\u4ee5\u901a\u8fc7\u56db\u79cd\u8868\u8fbe\u5f0f\u8bbe\u7f6e\u8bf7\u6c42\u53c2\u6570\u548c\u8bf7\u6c42\u6620\u5c04\u7684\u5339\u914d\u5173\u7cfb</p> <p>\"param\"\uff1a\u8981\u6c42\u8bf7\u6c42\u6620\u5c04\u6240\u5339\u914d\u7684\u8bf7\u6c42\u5fc5\u987b\u643a\u5e26param\u8bf7\u6c42\u53c2\u6570</p> <p>\"!param\"\uff1a\u8981\u6c42\u8bf7\u6c42\u6620\u5c04\u6240\u5339\u914d\u7684\u8bf7\u6c42\u5fc5\u987b\u4e0d\u80fd\u643a\u5e26param\u8bf7\u6c42\u53c2\u6570</p> <p>\"param=value\"\uff1a\u8981\u6c42\u8bf7\u6c42\u6620\u5c04\u6240\u5339\u914d\u7684\u8bf7\u6c42\u5fc5\u987b\u643a\u5e26param\u8bf7\u6c42\u53c2\u6570\u4e14param=value</p> <p>\"param!=value\"\uff1a\u8981\u6c42\u8bf7\u6c42\u6620\u5c04\u6240\u5339\u914d\u7684\u8bf7\u6c42\u5fc5\u987b\u643a\u5e26param\u8bf7\u6c42\u53c2\u6570\u4f46\u662fparam!=value</p> <pre><code>&lt;a th:href=\"@{/test(username='admin',password=123456)\"&gt;\u6d4b\u8bd5@RequestMapping\u7684params\u5c5e\u6027--&gt;/test&lt;/a&gt;&lt;br&gt;\n</code></pre> <pre><code>@RequestMapping(\n        value = {\"/testRequestMapping\", \"/test\"}\n        ,method = {RequestMethod.GET, RequestMethod.POST}\n        ,params = {\"username\",\"password!=123456\"}\n)\npublic String testRequestMapping(){\n    return \"success\";\n}\n</code></pre> <p>\u6ce8\uff1a</p> <p>\u82e5\u5f53\u524d\u8bf7\u6c42\u6ee1\u8db3@RequestMapping\u6ce8\u89e3\u7684value\u548cmethod\u5c5e\u6027\uff0c\u4f46\u662f\u4e0d\u6ee1\u8db3params\u5c5e\u6027\uff0c\u6b64\u65f6\u9875\u9762\u56de\u62a5\u9519400\uff1aParameter conditions \"username, password!=123456\" not met for actual request parameters: username={admin}, password={123456}</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#6requestmappingheaders","title":"6\u3001@RequestMapping\u6ce8\u89e3\u7684headers\u5c5e\u6027\uff08\u4e86\u89e3\uff09","text":"<p>@RequestMapping\u6ce8\u89e3\u7684headers\u5c5e\u6027\u901a\u8fc7\u8bf7\u6c42\u7684\u8bf7\u6c42\u5934\u4fe1\u606f\u5339\u914d\u8bf7\u6c42\u6620\u5c04</p> <p>@RequestMapping\u6ce8\u89e3\u7684headers\u5c5e\u6027\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u6570\u7ec4\uff0c\u53ef\u4ee5\u901a\u8fc7\u56db\u79cd\u8868\u8fbe\u5f0f\u8bbe\u7f6e\u8bf7\u6c42\u5934\u4fe1\u606f\u548c\u8bf7\u6c42\u6620\u5c04\u7684\u5339\u914d\u5173\u7cfb</p> <p>\"header\"\uff1a\u8981\u6c42\u8bf7\u6c42\u6620\u5c04\u6240\u5339\u914d\u7684\u8bf7\u6c42\u5fc5\u987b\u643a\u5e26header\u8bf7\u6c42\u5934\u4fe1\u606f</p> <p>\"!header\"\uff1a\u8981\u6c42\u8bf7\u6c42\u6620\u5c04\u6240\u5339\u914d\u7684\u8bf7\u6c42\u5fc5\u987b\u4e0d\u80fd\u643a\u5e26header\u8bf7\u6c42\u5934\u4fe1\u606f</p> <p>\"header=value\"\uff1a\u8981\u6c42\u8bf7\u6c42\u6620\u5c04\u6240\u5339\u914d\u7684\u8bf7\u6c42\u5fc5\u987b\u643a\u5e26header\u8bf7\u6c42\u5934\u4fe1\u606f\u4e14header=value</p> <p>\"header!=value\"\uff1a\u8981\u6c42\u8bf7\u6c42\u6620\u5c04\u6240\u5339\u914d\u7684\u8bf7\u6c42\u5fc5\u987b\u643a\u5e26header\u8bf7\u6c42\u5934\u4fe1\u606f\u4e14header!=value</p> <p>\u82e5\u5f53\u524d\u8bf7\u6c42\u6ee1\u8db3@RequestMapping\u6ce8\u89e3\u7684value\u548cmethod\u5c5e\u6027\uff0c\u4f46\u662f\u4e0d\u6ee1\u8db3headers\u5c5e\u6027\uff0c\u6b64\u65f6\u9875\u9762\u663e\u793a404\u9519\u8bef\uff0c\u5373\u8d44\u6e90\u672a\u627e\u5230</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#7springmvcant","title":"7\u3001SpringMVC\u652f\u6301ant\u98ce\u683c\u7684\u8def\u5f84","text":"<p>\uff1f\uff1a\u8868\u793a\u4efb\u610f\u7684\u5355\u4e2a\u5b57\u7b26</p> <p>*\uff1a\u8868\u793a\u4efb\u610f\u76840\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26</p> <p>**\uff1a\u8868\u793a\u4efb\u610f\u7684\u4e00\u5c42\u6216\u591a\u5c42\u76ee\u5f55</p> <p>\u6ce8\u610f\uff1a\u5728\u4f7f\u7528*\u65f6\uff0c\u53ea\u80fd\u4f7f\u7528/*/xxx\u7684\u65b9\u5f0f</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#8springmvc","title":"8\u3001SpringMVC\u652f\u6301\u8def\u5f84\u4e2d\u7684\u5360\u4f4d\u7b26\uff08\u91cd\u70b9\uff09","text":"<p>\u539f\u59cb\u65b9\u5f0f\uff1a/deleteUser?id=1</p> <p>rest\u65b9\u5f0f\uff1a/deleteUser/1</p> <p>SpringMVC\u8def\u5f84\u4e2d\u7684\u5360\u4f4d\u7b26\u5e38\u7528\u4e8eRESTful\u98ce\u683c\u4e2d\uff0c\u5f53\u8bf7\u6c42\u8def\u5f84\u4e2d\u5c06\u67d0\u4e9b\u6570\u636e\u901a\u8fc7\u8def\u5f84\u7684\u65b9\u5f0f\u4f20\u8f93\u5230\u670d\u52a1\u5668\u4e2d\uff0c\u5c31\u53ef\u4ee5\u5728\u76f8\u5e94\u7684@RequestMapping\u6ce8\u89e3\u7684value\u5c5e\u6027\u4e2d\u901a\u8fc7\u5360\u4f4d\u7b26{xxx}\u8868\u793a\u4f20\u8f93\u7684\u6570\u636e\uff0c\u5728\u901a\u8fc7@PathVariable\u6ce8\u89e3\uff0c\u5c06\u5360\u4f4d\u7b26\u6240\u8868\u793a\u7684\u6570\u636e\u8d4b\u503c\u7ed9\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u5f62\u53c2</p> <pre><code>&lt;a th:href=\"@{/testRest/1/admin}\"&gt;\u6d4b\u8bd5\u8def\u5f84\u4e2d\u7684\u5360\u4f4d\u7b26--&gt;/testRest&lt;/a&gt;&lt;br&gt;\n</code></pre> <pre><code>@RequestMapping(\"/testRest/{id}/{username}\")\npublic String testRest(@PathVariable(\"id\") String id, @PathVariable(\"username\") String username){\n    System.out.println(\"id:\"+id+\",username:\"+username);\n    return \"success\";\n}\n//\u6700\u7ec8\u8f93\u51fa\u7684\u5185\u5bb9\u4e3a--&gt;id:1,username:admin\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#springmvc_1","title":"\u56db\u3001SpringMVC\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#1servletapi","title":"1\u3001\u901a\u8fc7ServletAPI\u83b7\u53d6","text":"<p>\u5c06HttpServletRequest\u4f5c\u4e3a\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u5f62\u53c2\uff0c\u6b64\u65f6HttpServletRequest\u7c7b\u578b\u7684\u53c2\u6570\u8868\u793a\u5c01\u88c5\u4e86\u5f53\u524d\u8bf7\u6c42\u7684\u8bf7\u6c42\u62a5\u6587\u7684\u5bf9\u8c61</p> <pre><code>@RequestMapping(\"/testParam\")\npublic String testParam(HttpServletRequest request){\n    String username = request.getParameter(\"username\");\n    String password = request.getParameter(\"password\");\n    System.out.println(\"username:\"+username+\",password:\"+password);\n    return \"success\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2","title":"2\u3001\u901a\u8fc7\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u5f62\u53c2\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570","text":"<p>\u5728\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u5f62\u53c2\u4f4d\u7f6e\uff0c\u8bbe\u7f6e\u548c\u8bf7\u6c42\u53c2\u6570\u540c\u540d\u7684\u5f62\u53c2\uff0c\u5f53\u6d4f\u89c8\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u5339\u914d\u5230\u8bf7\u6c42\u6620\u5c04\u65f6\uff0c\u5728DispatcherServlet\u4e2d\u5c31\u4f1a\u5c06\u8bf7\u6c42\u53c2\u6570\u8d4b\u503c\u7ed9\u76f8\u5e94\u7684\u5f62\u53c2</p> <pre><code>&lt;a th:href=\"@{/testParam(username='admin',password=123456)}\"&gt;\u6d4b\u8bd5\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570--&gt;/testParam&lt;/a&gt;&lt;br&gt;\n</code></pre> <pre><code>@RequestMapping(\"/testParam\")\npublic String testParam(String username, String password){\n    System.out.println(\"username:\"+username+\",password:\"+password);\n    return \"success\";\n}\n</code></pre> <p>\u6ce8\uff1a</p> <p>\u82e5\u8bf7\u6c42\u6240\u4f20\u8f93\u7684\u8bf7\u6c42\u53c2\u6570\u4e2d\u6709\u591a\u4e2a\u540c\u540d\u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u6b64\u65f6\u53ef\u4ee5\u5728\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u5f62\u53c2\u4e2d\u8bbe\u7f6e\u5b57\u7b26\u4e32\u6570\u7ec4\u6216\u8005\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u5f62\u53c2\u63a5\u6536\u6b64\u8bf7\u6c42\u53c2\u6570</p> <p>\u82e5\u4f7f\u7528\u5b57\u7b26\u4e32\u6570\u7ec4\u7c7b\u578b\u7684\u5f62\u53c2\uff0c\u6b64\u53c2\u6570\u7684\u6570\u7ec4\u4e2d\u5305\u542b\u4e86\u6bcf\u4e00\u4e2a\u6570\u636e</p> <p>\u82e5\u4f7f\u7528\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u5f62\u53c2\uff0c\u6b64\u53c2\u6570\u7684\u503c\u4e3a\u6bcf\u4e2a\u6570\u636e\u4e2d\u95f4\u4f7f\u7528\u9017\u53f7\u62fc\u63a5\u7684\u7ed3\u679c</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#3requestparam","title":"3\u3001@RequestParam","text":"<p>@RequestParam\u662f\u5c06\u8bf7\u6c42\u53c2\u6570\u548c\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u5f62\u53c2\u521b\u5efa\u6620\u5c04\u5173\u7cfb</p> <p>@RequestParam\u6ce8\u89e3\u4e00\u5171\u6709\u4e09\u4e2a\u5c5e\u6027\uff1a</p> <p>value\uff1a\u6307\u5b9a\u4e3a\u5f62\u53c2\u8d4b\u503c\u7684\u8bf7\u6c42\u53c2\u6570\u7684\u53c2\u6570\u540d</p> <p>required\uff1a\u8bbe\u7f6e\u662f\u5426\u5fc5\u987b\u4f20\u8f93\u6b64\u8bf7\u6c42\u53c2\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3atrue</p> <p>\u82e5\u8bbe\u7f6e\u4e3atrue\u65f6\uff0c\u5219\u5f53\u524d\u8bf7\u6c42\u5fc5\u987b\u4f20\u8f93value\u6240\u6307\u5b9a\u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u82e5\u6ca1\u6709\u4f20\u8f93\u8be5\u8bf7\u6c42\u53c2\u6570\uff0c\u4e14\u6ca1\u6709\u8bbe\u7f6edefaultValue\u5c5e\u6027\uff0c\u5219\u9875\u9762\u62a5\u9519400\uff1aRequired String parameter 'xxx' is not present\uff1b\u82e5\u8bbe\u7f6e\u4e3afalse\uff0c\u5219\u5f53\u524d\u8bf7\u6c42\u4e0d\u662f\u5fc5\u987b\u4f20\u8f93value\u6240\u6307\u5b9a\u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u82e5\u6ca1\u6709\u4f20\u8f93\uff0c\u5219\u6ce8\u89e3\u6240\u6807\u8bc6\u7684\u5f62\u53c2\u7684\u503c\u4e3anull</p> <p>defaultValue\uff1a\u4e0d\u7ba1required\u5c5e\u6027\u503c\u4e3atrue\u6216false\uff0c\u5f53value\u6240\u6307\u5b9a\u7684\u8bf7\u6c42\u53c2\u6570\u6ca1\u6709\u4f20\u8f93\u6216\u4f20\u8f93\u7684\u503c\u4e3a\"\"\u65f6\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u4e3a\u5f62\u53c2\u8d4b\u503c</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#4requestheader","title":"4\u3001@RequestHeader","text":"<p>@RequestHeader\u662f\u5c06\u8bf7\u6c42\u5934\u4fe1\u606f\u548c\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u5f62\u53c2\u521b\u5efa\u6620\u5c04\u5173\u7cfb</p> <p>@RequestHeader\u6ce8\u89e3\u4e00\u5171\u6709\u4e09\u4e2a\u5c5e\u6027\uff1avalue\u3001required\u3001defaultValue\uff0c\u7528\u6cd5\u540c@RequestParam</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#5cookievalue","title":"5\u3001@CookieValue","text":"<p>@CookieValue\u662f\u5c06cookie\u6570\u636e\u548c\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u5f62\u53c2\u521b\u5efa\u6620\u5c04\u5173\u7cfb</p> <p>@CookieValue\u6ce8\u89e3\u4e00\u5171\u6709\u4e09\u4e2a\u5c5e\u6027\uff1avalue\u3001required\u3001defaultValue\uff0c\u7528\u6cd5\u540c@RequestParam</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#6pojo","title":"6\u3001\u901a\u8fc7POJO\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570","text":"<p>\u53ef\u4ee5\u5728\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u5f62\u53c2\u4f4d\u7f6e\u8bbe\u7f6e\u4e00\u4e2a\u5b9e\u4f53\u7c7b\u7c7b\u578b\u7684\u5f62\u53c2\uff0c\u6b64\u65f6\u82e5\u6d4f\u89c8\u5668\u4f20\u8f93\u7684\u8bf7\u6c42\u53c2\u6570\u7684\u53c2\u6570\u540d\u548c\u5b9e\u4f53\u7c7b\u4e2d\u7684\u5c5e\u6027\u540d\u4e00\u81f4\uff0c\u90a3\u4e48\u8bf7\u6c42\u53c2\u6570\u5c31\u4f1a\u4e3a\u6b64\u5c5e\u6027\u8d4b\u503c</p> <pre><code>&lt;form th:action=\"@{/testpojo}\" method=\"post\"&gt;\n    \u7528\u6237\u540d\uff1a&lt;input type=\"text\" name=\"username\"&gt;&lt;br&gt;\n    \u5bc6\u7801\uff1a&lt;input type=\"password\" name=\"password\"&gt;&lt;br&gt;\n    \u6027\u522b\uff1a&lt;input type=\"radio\" name=\"sex\" value=\"\u7537\"&gt;\u7537&lt;input type=\"radio\" name=\"sex\" value=\"\u5973\"&gt;\u5973&lt;br&gt;\n    \u5e74\u9f84\uff1a&lt;input type=\"text\" name=\"age\"&gt;&lt;br&gt;\n    \u90ae\u7bb1\uff1a&lt;input type=\"text\" name=\"email\"&gt;&lt;br&gt;\n    &lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n</code></pre> <pre><code>@RequestMapping(\"/testpojo\")\npublic String testPOJO(User user){\n    System.out.println(user);\n    return \"success\";\n}\n//\u6700\u7ec8\u7ed3\u679c--&gt;User{id=null, username='\u5f20\u4e09', password='123', age=23, sex='\u7537', email='123@qq.com'}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#7_1","title":"7\u3001\u89e3\u51b3\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\u7684\u4e71\u7801\u95ee\u9898","text":"<p>\u89e3\u51b3\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\u7684\u4e71\u7801\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528SpringMVC\u63d0\u4f9b\u7684\u7f16\u7801\u8fc7\u6ee4\u5668CharacterEncodingFilter\uff0c\u4f46\u662f\u5fc5\u987b\u5728web.xml\u4e2d\u8fdb\u884c\u6ce8\u518c</p> <pre><code>&lt;!--\u914d\u7f6espringMVC\u7684\u7f16\u7801\u8fc7\u6ee4\u5668--&gt;\n&lt;filter&gt;\n    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;encoding&lt;/param-name&gt;\n        &lt;param-value&gt;UTF-8&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;forceResponseEncoding&lt;/param-name&gt;\n        &lt;param-value&gt;true&lt;/param-value&gt;\n    &lt;/init-param&gt;\n&lt;/filter&gt;\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre> <p>\u6ce8\uff1a</p> <p>SpringMVC\u4e2d\u5904\u7406\u7f16\u7801\u7684\u8fc7\u6ee4\u5668\u4e00\u5b9a\u8981\u914d\u7f6e\u5230\u5176\u4ed6\u8fc7\u6ee4\u5668\u4e4b\u524d\uff0c\u5426\u5219\u65e0\u6548</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#_1","title":"\u4e94\u3001\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#1servletapirequest","title":"1\u3001\u4f7f\u7528ServletAPI\u5411request\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e","text":"<pre><code>@RequestMapping(\"/testServletAPI\")\npublic String testServletAPI(HttpServletRequest request){\n    request.setAttribute(\"testScope\", \"hello,servletAPI\");\n    return \"success\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2modelandviewrequest","title":"2\u3001\u4f7f\u7528ModelAndView\u5411request\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e","text":"<pre><code>@RequestMapping(\"/testModelAndView\")\npublic ModelAndView testModelAndView(){\n    /**\n     * ModelAndView\u6709Model\u548cView\u7684\u529f\u80fd\n     * Model\u4e3b\u8981\u7528\u4e8e\u5411\u8bf7\u6c42\u57df\u5171\u4eab\u6570\u636e\n     * View\u4e3b\u8981\u7528\u4e8e\u8bbe\u7f6e\u89c6\u56fe\uff0c\u5b9e\u73b0\u9875\u9762\u8df3\u8f6c\n     */\n    ModelAndView mav = new ModelAndView();\n    //\u5411\u8bf7\u6c42\u57df\u5171\u4eab\u6570\u636e\n    mav.addObject(\"testScope\", \"hello,ModelAndView\");\n    //\u8bbe\u7f6e\u89c6\u56fe\uff0c\u5b9e\u73b0\u9875\u9762\u8df3\u8f6c\n    mav.setViewName(\"success\");\n    return mav;\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#3modelrequest","title":"3\u3001\u4f7f\u7528Model\u5411request\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e","text":"<pre><code>@RequestMapping(\"/testModel\")\npublic String testModel(Model model){\n    model.addAttribute(\"testScope\", \"hello,Model\");\n    return \"success\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#4maprequest","title":"4\u3001\u4f7f\u7528map\u5411request\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e","text":"<pre><code>@RequestMapping(\"/testMap\")\npublic String testMap(Map&lt;String, Object&gt; map){\n    map.put(\"testScope\", \"hello,Map\");\n    return \"success\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#5modelmaprequest","title":"5\u3001\u4f7f\u7528ModelMap\u5411request\u57df\u5bf9\u8c61\u5171\u4eab\u6570\u636e","text":"<pre><code>@RequestMapping(\"/testModelMap\")\npublic String testModelMap(ModelMap modelMap){\n    modelMap.addAttribute(\"testScope\", \"hello,ModelMap\");\n    return \"success\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#6modelmodelmapmap","title":"6\u3001Model\u3001ModelMap\u3001Map\u7684\u5173\u7cfb","text":"<p>Model\u3001ModelMap\u3001Map\u7c7b\u578b\u7684\u53c2\u6570\u5176\u5b9e\u672c\u8d28\u4e0a\u90fd\u662f BindingAwareModelMap \u7c7b\u578b\u7684</p> <pre><code>public interface Model{}\npublic class ModelMap extends LinkedHashMap&lt;String, Object&gt; {}\npublic class ExtendedModelMap extends ModelMap implements Model {}\npublic class BindingAwareModelMap extends ExtendedModelMap {}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#7session","title":"7\u3001\u5411session\u57df\u5171\u4eab\u6570\u636e","text":"<pre><code>@RequestMapping(\"/testSession\")\npublic String testSession(HttpSession session){\n    session.setAttribute(\"testSessionScope\", \"hello,session\");\n    return \"success\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#8application","title":"8\u3001\u5411application\u57df\u5171\u4eab\u6570\u636e","text":"<pre><code>@RequestMapping(\"/testApplication\")\npublic String testApplication(HttpSession session){\n    ServletContext application = session.getServletContext();\n    application.setAttribute(\"testApplicationScope\", \"hello,application\");\n    return \"success\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#springmvc_2","title":"\u516d\u3001SpringMVC\u7684\u89c6\u56fe","text":"<p>SpringMVC\u4e2d\u7684\u89c6\u56fe\u662fView\u63a5\u53e3\uff0c\u89c6\u56fe\u7684\u4f5c\u7528\u6e32\u67d3\u6570\u636e\uff0c\u5c06\u6a21\u578bModel\u4e2d\u7684\u6570\u636e\u5c55\u793a\u7ed9\u7528\u6237</p> <p>SpringMVC\u89c6\u56fe\u7684\u79cd\u7c7b\u5f88\u591a\uff0c\u9ed8\u8ba4\u6709\u8f6c\u53d1\u89c6\u56fe\u548c\u91cd\u5b9a\u5411\u89c6\u56fe</p> <p>\u5f53\u5de5\u7a0b\u5f15\u5165jstl\u7684\u4f9d\u8d56\uff0c\u8f6c\u53d1\u89c6\u56fe\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3aJstlView</p> <p>\u82e5\u4f7f\u7528\u7684\u89c6\u56fe\u6280\u672f\u4e3aThymeleaf\uff0c\u5728SpringMVC\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u4e86Thymeleaf\u7684\u89c6\u56fe\u89e3\u6790\u5668\uff0c\u7531\u6b64\u89c6\u56fe\u89e3\u6790\u5668\u89e3\u6790\u4e4b\u540e\u6240\u5f97\u5230\u7684\u662fThymeleafView</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#1thymeleafview","title":"1\u3001ThymeleafView","text":"<p>\u5f53\u63a7\u5236\u5668\u65b9\u6cd5\u4e2d\u6240\u8bbe\u7f6e\u7684\u89c6\u56fe\u540d\u79f0\u6ca1\u6709\u4efb\u4f55\u524d\u7f00\u65f6\uff0c\u6b64\u65f6\u7684\u89c6\u56fe\u540d\u79f0\u4f1a\u88abSpringMVC\u914d\u7f6e\u6587\u4ef6\u4e2d\u6240\u914d\u7f6e\u7684\u89c6\u56fe\u89e3\u6790\u5668\u89e3\u6790\uff0c\u89c6\u56fe\u540d\u79f0\u62fc\u63a5\u89c6\u56fe\u524d\u7f00\u548c\u89c6\u56fe\u540e\u7f00\u6240\u5f97\u5230\u7684\u6700\u7ec8\u8def\u5f84\uff0c\u4f1a\u901a\u8fc7\u8f6c\u53d1\u7684\u65b9\u5f0f\u5b9e\u73b0\u8df3\u8f6c</p> <pre><code>@RequestMapping(\"/testHello\")\npublic String testHello(){\n    return \"hello\";\n}\n</code></pre> <p></p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2_1","title":"2\u3001\u8f6c\u53d1\u89c6\u56fe","text":"<p>SpringMVC\u4e2d\u9ed8\u8ba4\u7684\u8f6c\u53d1\u89c6\u56fe\u662fInternalResourceView</p> <p>SpringMVC\u4e2d\u521b\u5efa\u8f6c\u53d1\u89c6\u56fe\u7684\u60c5\u51b5\uff1a</p> <p>\u5f53\u63a7\u5236\u5668\u65b9\u6cd5\u4e2d\u6240\u8bbe\u7f6e\u7684\u89c6\u56fe\u540d\u79f0\u4ee5\"forward:\"\u4e3a\u524d\u7f00\u65f6\uff0c\u521b\u5efaInternalResourceView\u89c6\u56fe\uff0c\u6b64\u65f6\u7684\u89c6\u56fe\u540d\u79f0\u4e0d\u4f1a\u88abSpringMVC\u914d\u7f6e\u6587\u4ef6\u4e2d\u6240\u914d\u7f6e\u7684\u89c6\u56fe\u89e3\u6790\u5668\u89e3\u6790\uff0c\u800c\u662f\u4f1a\u5c06\u524d\u7f00\"forward:\"\u53bb\u6389\uff0c\u5269\u4f59\u90e8\u5206\u4f5c\u4e3a\u6700\u7ec8\u8def\u5f84\u901a\u8fc7\u8f6c\u53d1\u7684\u65b9\u5f0f\u5b9e\u73b0\u8df3\u8f6c</p> <p>\u4f8b\u5982\"forward:/\"\uff0c\"forward:/employee\"</p> <pre><code>@RequestMapping(\"/testForward\")\npublic String testForward(){\n    return \"forward:/testHello\";\n}\n</code></pre> <p></p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#3","title":"3\u3001\u91cd\u5b9a\u5411\u89c6\u56fe","text":"<p>SpringMVC\u4e2d\u9ed8\u8ba4\u7684\u91cd\u5b9a\u5411\u89c6\u56fe\u662fRedirectView</p> <p>\u5f53\u63a7\u5236\u5668\u65b9\u6cd5\u4e2d\u6240\u8bbe\u7f6e\u7684\u89c6\u56fe\u540d\u79f0\u4ee5\"redirect:\"\u4e3a\u524d\u7f00\u65f6\uff0c\u521b\u5efaRedirectView\u89c6\u56fe\uff0c\u6b64\u65f6\u7684\u89c6\u56fe\u540d\u79f0\u4e0d\u4f1a\u88abSpringMVC\u914d\u7f6e\u6587\u4ef6\u4e2d\u6240\u914d\u7f6e\u7684\u89c6\u56fe\u89e3\u6790\u5668\u89e3\u6790\uff0c\u800c\u662f\u4f1a\u5c06\u524d\u7f00\"redirect:\"\u53bb\u6389\uff0c\u5269\u4f59\u90e8\u5206\u4f5c\u4e3a\u6700\u7ec8\u8def\u5f84\u901a\u8fc7\u91cd\u5b9a\u5411\u7684\u65b9\u5f0f\u5b9e\u73b0\u8df3\u8f6c</p> <p>\u4f8b\u5982\"redirect:/\"\uff0c\"redirect:/employee\"</p> <pre><code>@RequestMapping(\"/testRedirect\")\npublic String testRedirect(){\n    return \"redirect:/testHello\";\n}\n</code></pre> <p></p> <p>\u6ce8\uff1a</p> <p>\u91cd\u5b9a\u5411\u89c6\u56fe\u5728\u89e3\u6790\u65f6\uff0c\u4f1a\u5148\u5c06redirect:\u524d\u7f00\u53bb\u6389\uff0c\u7136\u540e\u4f1a\u5224\u65ad\u5269\u4f59\u90e8\u5206\u662f\u5426\u4ee5/\u5f00\u5934\uff0c\u82e5\u662f\u5219\u4f1a\u81ea\u52a8\u62fc\u63a5\u4e0a\u4e0b\u6587\u8def\u5f84</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#4view-controller","title":"4\u3001\u89c6\u56fe\u63a7\u5236\u5668view-controller","text":"<p>\u5f53\u63a7\u5236\u5668\u65b9\u6cd5\u4e2d\uff0c\u4ec5\u4ec5\u7528\u6765\u5b9e\u73b0\u9875\u9762\u8df3\u8f6c\uff0c\u5373\u53ea\u9700\u8981\u8bbe\u7f6e\u89c6\u56fe\u540d\u79f0\u65f6\uff0c\u53ef\u4ee5\u5c06\u5904\u7406\u5668\u65b9\u6cd5\u4f7f\u7528view-controller\u6807\u7b7e\u8fdb\u884c\u8868\u793a</p> <pre><code>&lt;!--\n    path\uff1a\u8bbe\u7f6e\u5904\u7406\u7684\u8bf7\u6c42\u5730\u5740\n    view-name\uff1a\u8bbe\u7f6e\u8bf7\u6c42\u5730\u5740\u6240\u5bf9\u5e94\u7684\u89c6\u56fe\u540d\u79f0\n--&gt;\n&lt;mvc:view-controller path=\"/testView\" view-name=\"success\"&gt;&lt;/mvc:view-controller&gt;\n</code></pre> <p>\u6ce8\uff1a</p> <p>\u5f53SpringMVC\u4e2d\u8bbe\u7f6e\u4efb\u4f55\u4e00\u4e2aview-controller\u65f6\uff0c\u5176\u4ed6\u63a7\u5236\u5668\u4e2d\u7684\u8bf7\u6c42\u6620\u5c04\u5c06\u5168\u90e8\u5931\u6548\uff0c\u6b64\u65f6\u9700\u8981\u5728SpringMVC\u7684\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u5f00\u542fmvc\u6ce8\u89e3\u9a71\u52a8\u7684\u6807\u7b7e\uff1a</p> <p></p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#restful","title":"\u4e03\u3001RESTful","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#1restful","title":"1\u3001RESTful\u7b80\u4ecb","text":"<p>REST\uff1aRepresentational State Transfer\uff0c\u8868\u73b0\u5c42\u8d44\u6e90\u72b6\u6001\u8f6c\u79fb\u3002</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#a_2","title":"a&gt;\u8d44\u6e90","text":"<p>\u8d44\u6e90\u662f\u4e00\u79cd\u770b\u5f85\u670d\u52a1\u5668\u7684\u65b9\u5f0f\uff0c\u5373\uff0c\u5c06\u670d\u52a1\u5668\u770b\u4f5c\u662f\u7531\u5f88\u591a\u79bb\u6563\u7684\u8d44\u6e90\u7ec4\u6210\u3002\u6bcf\u4e2a\u8d44\u6e90\u662f\u670d\u52a1\u5668\u4e0a\u4e00\u4e2a\u53ef\u547d\u540d\u7684\u62bd\u8c61\u6982\u5ff5\u3002\u56e0\u4e3a\u8d44\u6e90\u662f\u4e00\u4e2a\u62bd\u8c61\u7684\u6982\u5ff5\uff0c\u6240\u4ee5\u5b83\u4e0d\u4ec5\u4ec5\u80fd\u4ee3\u8868\u670d\u52a1\u5668\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e2a\u6587\u4ef6\u3001\u6570\u636e\u5e93\u4e2d\u7684\u4e00\u5f20\u8868\u7b49\u7b49\u5177\u4f53\u7684\u4e1c\u897f\uff0c\u53ef\u4ee5\u5c06\u8d44\u6e90\u8bbe\u8ba1\u7684\u8981\u591a\u62bd\u8c61\u6709\u591a\u62bd\u8c61\uff0c\u53ea\u8981\u60f3\u8c61\u529b\u5141\u8bb8\u800c\u4e14\u5ba2\u6237\u7aef\u5e94\u7528\u5f00\u53d1\u8005\u80fd\u591f\u7406\u89e3\u3002\u4e0e\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u7c7b\u4f3c\uff0c\u8d44\u6e90\u662f\u4ee5\u540d\u8bcd\u4e3a\u6838\u5fc3\u6765\u7ec4\u7ec7\u7684\uff0c\u9996\u5148\u5173\u6ce8\u7684\u662f\u540d\u8bcd\u3002\u4e00\u4e2a\u8d44\u6e90\u53ef\u4ee5\u7531\u4e00\u4e2a\u6216\u591a\u4e2aURI\u6765\u6807\u8bc6\u3002URI\u65e2\u662f\u8d44\u6e90\u7684\u540d\u79f0\uff0c\u4e5f\u662f\u8d44\u6e90\u5728Web\u4e0a\u7684\u5730\u5740\u3002\u5bf9\u67d0\u4e2a\u8d44\u6e90\u611f\u5174\u8da3\u7684\u5ba2\u6237\u7aef\u5e94\u7528\uff0c\u53ef\u4ee5\u901a\u8fc7\u8d44\u6e90\u7684URI\u4e0e\u5176\u8fdb\u884c\u4ea4\u4e92\u3002</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#b_2","title":"b&gt;\u8d44\u6e90\u7684\u8868\u8ff0","text":"<p>\u8d44\u6e90\u7684\u8868\u8ff0\u662f\u4e00\u6bb5\u5bf9\u4e8e\u8d44\u6e90\u5728\u67d0\u4e2a\u7279\u5b9a\u65f6\u523b\u7684\u72b6\u6001\u7684\u63cf\u8ff0\u3002\u53ef\u4ee5\u5728\u5ba2\u6237\u7aef-\u670d\u52a1\u5668\u7aef\u4e4b\u95f4\u8f6c\u79fb\uff08\u4ea4\u6362\uff09\u3002\u8d44\u6e90\u7684\u8868\u8ff0\u53ef\u4ee5\u6709\u591a\u79cd\u683c\u5f0f\uff0c\u4f8b\u5982HTML/XML/JSON/\u7eaf\u6587\u672c/\u56fe\u7247/\u89c6\u9891/\u97f3\u9891\u7b49\u7b49\u3002\u8d44\u6e90\u7684\u8868\u8ff0\u683c\u5f0f\u53ef\u4ee5\u901a\u8fc7\u534f\u5546\u673a\u5236\u6765\u786e\u5b9a\u3002\u8bf7\u6c42-\u54cd\u5e94\u65b9\u5411\u7684\u8868\u8ff0\u901a\u5e38\u4f7f\u7528\u4e0d\u540c\u7684\u683c\u5f0f\u3002</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#c_1","title":"c&gt;\u72b6\u6001\u8f6c\u79fb","text":"<p>\u72b6\u6001\u8f6c\u79fb\u8bf4\u7684\u662f\uff1a\u5728\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7aef\u4e4b\u95f4\u8f6c\u79fb\uff08transfer\uff09\u4ee3\u8868\u8d44\u6e90\u72b6\u6001\u7684\u8868\u8ff0\u3002\u901a\u8fc7\u8f6c\u79fb\u548c\u64cd\u4f5c\u8d44\u6e90\u7684\u8868\u8ff0\uff0c\u6765\u95f4\u63a5\u5b9e\u73b0\u64cd\u4f5c\u8d44\u6e90\u7684\u76ee\u7684\u3002</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2restful","title":"2\u3001RESTful\u7684\u5b9e\u73b0","text":"<p>\u5177\u4f53\u8bf4\uff0c\u5c31\u662f HTTP \u534f\u8bae\u91cc\u9762\uff0c\u56db\u4e2a\u8868\u793a\u64cd\u4f5c\u65b9\u5f0f\u7684\u52a8\u8bcd\uff1aGET\u3001POST\u3001PUT\u3001DELETE\u3002</p> <p>\u5b83\u4eec\u5206\u522b\u5bf9\u5e94\u56db\u79cd\u57fa\u672c\u64cd\u4f5c\uff1aGET \u7528\u6765\u83b7\u53d6\u8d44\u6e90\uff0cPOST \u7528\u6765\u65b0\u5efa\u8d44\u6e90\uff0cPUT \u7528\u6765\u66f4\u65b0\u8d44\u6e90\uff0cDELETE \u7528\u6765\u5220\u9664\u8d44\u6e90\u3002</p> <p>REST \u98ce\u683c\u63d0\u5021 URL \u5730\u5740\u4f7f\u7528\u7edf\u4e00\u7684\u98ce\u683c\u8bbe\u8ba1\uff0c\u4ece\u524d\u5230\u540e\u5404\u4e2a\u5355\u8bcd\u4f7f\u7528\u659c\u6760\u5206\u5f00\uff0c\u4e0d\u4f7f\u7528\u95ee\u53f7\u952e\u503c\u5bf9\u65b9\u5f0f\u643a\u5e26\u8bf7\u6c42\u53c2\u6570\uff0c\u800c\u662f\u5c06\u8981\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7684\u6570\u636e\u4f5c\u4e3a URL \u5730\u5740\u7684\u4e00\u90e8\u5206\uff0c\u4ee5\u4fdd\u8bc1\u6574\u4f53\u98ce\u683c\u7684\u4e00\u81f4\u6027\u3002</p> \u64cd\u4f5c \u4f20\u7edf\u65b9\u5f0f REST\u98ce\u683c \u67e5\u8be2\u64cd\u4f5c getUserById?id=1 user/1--&gt;get\u8bf7\u6c42\u65b9\u5f0f \u4fdd\u5b58\u64cd\u4f5c saveUser user--&gt;post\u8bf7\u6c42\u65b9\u5f0f \u5220\u9664\u64cd\u4f5c deleteUser?id=1 user/1--&gt;delete\u8bf7\u6c42\u65b9\u5f0f \u66f4\u65b0\u64cd\u4f5c updateUser user--&gt;put\u8bf7\u6c42\u65b9\u5f0f"},{"location":"Java/SpringMVC/SpringMVCNotes/#3hiddenhttpmethodfilter","title":"3\u3001HiddenHttpMethodFilter","text":"<p>\u7531\u4e8e\u6d4f\u89c8\u5668\u53ea\u652f\u6301\u53d1\u9001get\u548cpost\u65b9\u5f0f\u7684\u8bf7\u6c42\uff0c\u90a3\u4e48\u8be5\u5982\u4f55\u53d1\u9001put\u548cdelete\u8bf7\u6c42\u5462\uff1f</p> <p>SpringMVC \u63d0\u4f9b\u4e86 HiddenHttpMethodFilter \u5e2e\u52a9\u6211\u4eec\u5c06 POST \u8bf7\u6c42\u8f6c\u6362\u4e3a DELETE \u6216 PUT \u8bf7\u6c42</p> <p>HiddenHttpMethodFilter \u5904\u7406put\u548cdelete\u8bf7\u6c42\u7684\u6761\u4ef6\uff1a</p> <p>a&gt;\u5f53\u524d\u8bf7\u6c42\u7684\u8bf7\u6c42\u65b9\u5f0f\u5fc5\u987b\u4e3apost</p> <p>b&gt;\u5f53\u524d\u8bf7\u6c42\u5fc5\u987b\u4f20\u8f93\u8bf7\u6c42\u53c2\u6570_method</p> <p>\u6ee1\u8db3\u4ee5\u4e0a\u6761\u4ef6\uff0cHiddenHttpMethodFilter \u8fc7\u6ee4\u5668\u5c31\u4f1a\u5c06\u5f53\u524d\u8bf7\u6c42\u7684\u8bf7\u6c42\u65b9\u5f0f\u8f6c\u6362\u4e3a\u8bf7\u6c42\u53c2\u6570_method\u7684\u503c\uff0c\u56e0\u6b64\u8bf7\u6c42\u53c2\u6570_method\u7684\u503c\u624d\u662f\u6700\u7ec8\u7684\u8bf7\u6c42\u65b9\u5f0f</p> <p>\u5728web.xml\u4e2d\u6ce8\u518cHiddenHttpMethodFilter </p> <pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre> <p>\u6ce8\uff1a</p> <p>\u76ee\u524d\u4e3a\u6b62\uff0cSpringMVC\u4e2d\u63d0\u4f9b\u4e86\u4e24\u4e2a\u8fc7\u6ee4\u5668\uff1aCharacterEncodingFilter\u548cHiddenHttpMethodFilter</p> <p>\u5728web.xml\u4e2d\u6ce8\u518c\u65f6\uff0c\u5fc5\u987b\u5148\u6ce8\u518cCharacterEncodingFilter\uff0c\u518d\u6ce8\u518cHiddenHttpMethodFilter</p> <p>\u539f\u56e0\uff1a</p> <ul> <li> <p>\u5728 CharacterEncodingFilter \u4e2d\u901a\u8fc7 request.setCharacterEncoding(encoding) \u65b9\u6cd5\u8bbe\u7f6e\u5b57\u7b26\u96c6\u7684</p> </li> <li> <p>request.setCharacterEncoding(encoding) \u65b9\u6cd5\u8981\u6c42\u524d\u9762\u4e0d\u80fd\u6709\u4efb\u4f55\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\u7684\u64cd\u4f5c</p> </li> <li> <p>\u800c HiddenHttpMethodFilter \u6070\u6070\u6709\u4e00\u4e2a\u83b7\u53d6\u8bf7\u6c42\u65b9\u5f0f\u7684\u64cd\u4f5c\uff1a</p> </li> <li> <p><code>String paramValue = request.getParameter(this.methodParam);</code></p> </li> </ul>"},{"location":"Java/SpringMVC/SpringMVCNotes/#restful_1","title":"\u516b\u3001RESTful\u6848\u4f8b","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#1_1","title":"1\u3001\u51c6\u5907\u5de5\u4f5c","text":"<p>\u548c\u4f20\u7edf CRUD \u4e00\u6837\uff0c\u5b9e\u73b0\u5bf9\u5458\u5de5\u4fe1\u606f\u7684\u589e\u5220\u6539\u67e5\u3002</p> <ul> <li> <p>\u642d\u5efa\u73af\u5883</p> </li> <li> <p>\u51c6\u5907\u5b9e\u4f53\u7c7b</p> </li> </ul> <pre><code>package com.atguigu.mvc.bean;\n\npublic class Employee {\n\n   private Integer id;\n   private String lastName;\n\n   private String email;\n   //1 male, 0 female\n   private Integer gender;\n\n   public Integer getId() {\n      return id;\n   }\n\n   public void setId(Integer id) {\n      this.id = id;\n   }\n\n   public String getLastName() {\n      return lastName;\n   }\n\n   public void setLastName(String lastName) {\n      this.lastName = lastName;\n   }\n\n   public String getEmail() {\n      return email;\n   }\n\n   public void setEmail(String email) {\n      this.email = email;\n   }\n\n   public Integer getGender() {\n      return gender;\n   }\n\n   public void setGender(Integer gender) {\n      this.gender = gender;\n   }\n\n   public Employee(Integer id, String lastName, String email, Integer gender) {\n      super();\n      this.id = id;\n      this.lastName = lastName;\n      this.email = email;\n      this.gender = gender;\n   }\n\n   public Employee() {\n   }\n}\n</code></pre> <ul> <li>\u51c6\u5907dao\u6a21\u62df\u6570\u636e</li> </ul> <pre><code>package com.atguigu.mvc.dao;\n\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport com.atguigu.mvc.bean.Employee;\nimport org.springframework.stereotype.Repository;\n\n\n@Repository\npublic class EmployeeDao {\n\n   private static Map&lt;Integer, Employee&gt; employees = null;\n\n   static{\n      employees = new HashMap&lt;Integer, Employee&gt;();\n\n      employees.put(1001, new Employee(1001, \"E-AA\", \"aa@163.com\", 1));\n      employees.put(1002, new Employee(1002, \"E-BB\", \"bb@163.com\", 1));\n      employees.put(1003, new Employee(1003, \"E-CC\", \"cc@163.com\", 0));\n      employees.put(1004, new Employee(1004, \"E-DD\", \"dd@163.com\", 0));\n      employees.put(1005, new Employee(1005, \"E-EE\", \"ee@163.com\", 1));\n   }\n\n   private static Integer initId = 1006;\n\n   public void save(Employee employee){\n      if(employee.getId() == null){\n         employee.setId(initId++);\n      }\n      employees.put(employee.getId(), employee);\n   }\n\n   public Collection&lt;Employee&gt; getAll(){\n      return employees.values();\n   }\n\n   public Employee get(Integer id){\n      return employees.get(id);\n   }\n\n   public void delete(Integer id){\n      employees.remove(id);\n   }\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2_2","title":"2\u3001\u529f\u80fd\u6e05\u5355","text":"\u529f\u80fd URL \u5730\u5740 \u8bf7\u6c42\u65b9\u5f0f \u8bbf\u95ee\u9996\u9875\u221a / GET \u67e5\u8be2\u5168\u90e8\u6570\u636e\u221a /employee GET \u5220\u9664\u221a /employee/2 DELETE \u8df3\u8f6c\u5230\u6dfb\u52a0\u6570\u636e\u9875\u9762\u221a /toAdd GET \u6267\u884c\u4fdd\u5b58\u221a /employee POST \u8df3\u8f6c\u5230\u66f4\u65b0\u6570\u636e\u9875\u9762\u221a /employee/2 GET \u6267\u884c\u66f4\u65b0\u221a /employee PUT"},{"location":"Java/SpringMVC/SpringMVCNotes/#3_1","title":"3\u3001\u5177\u4f53\u529f\u80fd\uff1a\u8bbf\u95ee\u9996\u9875","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#aview-controller","title":"a&gt;\u914d\u7f6eview-controller","text":"<pre><code>&lt;mvc:view-controller path=\"/\" view-name=\"index\"/&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#b_3","title":"b&gt;\u521b\u5efa\u9875\u9762","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\" &gt;\n    &lt;title&gt;Title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;\u9996\u9875&lt;/h1&gt;\n&lt;a th:href=\"@{/employee}\"&gt;\u8bbf\u95ee\u5458\u5de5\u4fe1\u606f&lt;/a&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#4_1","title":"4\u3001\u5177\u4f53\u529f\u80fd\uff1a\u67e5\u8be2\u6240\u6709\u5458\u5de5\u6570\u636e","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#a_3","title":"a&gt;\u63a7\u5236\u5668\u65b9\u6cd5","text":"<pre><code>@RequestMapping(value = \"/employee\", method = RequestMethod.GET)\npublic String getEmployeeList(Model model){\n    Collection&lt;Employee&gt; employeeList = employeeDao.getAll();\n    model.addAttribute(\"employeeList\", employeeList);\n    return \"employee_list\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#bemployee_listhtml","title":"b&gt;\u521b\u5efaemployee_list.html","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;Employee Info&lt;/title&gt;\n    &lt;script type=\"text/javascript\" th:src=\"@{/static/js/vue.js}\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;table border=\"1\" cellpadding=\"0\" cellspacing=\"0\" style=\"text-align: center;\" id=\"dataTable\"&gt;\n        &lt;tr&gt;\n            &lt;th colspan=\"5\"&gt;Employee Info&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;th&gt;id&lt;/th&gt;\n            &lt;th&gt;lastName&lt;/th&gt;\n            &lt;th&gt;email&lt;/th&gt;\n            &lt;th&gt;gender&lt;/th&gt;\n            &lt;th&gt;options(&lt;a th:href=\"@{/toAdd}\"&gt;add&lt;/a&gt;)&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;tr th:each=\"employee : ${employeeList}\"&gt;\n            &lt;td th:text=\"${employee.id}\"&gt;&lt;/td&gt;\n            &lt;td th:text=\"${employee.lastName}\"&gt;&lt;/td&gt;\n            &lt;td th:text=\"${employee.email}\"&gt;&lt;/td&gt;\n            &lt;td th:text=\"${employee.gender}\"&gt;&lt;/td&gt;\n            &lt;td&gt;\n                &lt;a class=\"deleteA\" @click=\"deleteEmployee\" th:href=\"@{'/employee/'+${employee.id}}\"&gt;delete&lt;/a&gt;\n                &lt;a th:href=\"@{'/employee/'+${employee.id}}\"&gt;update&lt;/a&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#5","title":"5\u3001\u5177\u4f53\u529f\u80fd\uff1a\u5220\u9664","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#adelete","title":"a&gt;\u521b\u5efa\u5904\u7406delete\u8bf7\u6c42\u65b9\u5f0f\u7684\u8868\u5355","text":"<pre><code>&lt;!-- \u4f5c\u7528\uff1a\u901a\u8fc7\u8d85\u94fe\u63a5\u63a7\u5236\u8868\u5355\u7684\u63d0\u4ea4\uff0c\u5c06post\u8bf7\u6c42\u8f6c\u6362\u4e3adelete\u8bf7\u6c42 --&gt;\n&lt;form id=\"delete_form\" method=\"post\"&gt;\n    &lt;!-- HiddenHttpMethodFilter\u8981\u6c42\uff1a\u5fc5\u987b\u4f20\u8f93_method\u8bf7\u6c42\u53c2\u6570\uff0c\u5e76\u4e14\u503c\u4e3a\u6700\u7ec8\u7684\u8bf7\u6c42\u65b9\u5f0f --&gt;\n    &lt;input type=\"hidden\" name=\"_method\" value=\"delete\"/&gt;\n&lt;/form&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#b_4","title":"b&gt;\u5220\u9664\u8d85\u94fe\u63a5\u7ed1\u5b9a\u70b9\u51fb\u4e8b\u4ef6","text":"<p>\u5f15\u5165vue.js</p> <pre><code>&lt;script type=\"text/javascript\" th:src=\"@{/static/js/vue.js}\"&gt;&lt;/script&gt;\n</code></pre> <p>\u5220\u9664\u8d85\u94fe\u63a5</p> <pre><code>&lt;a class=\"deleteA\" @click=\"deleteEmployee\" th:href=\"@{'/employee/'+${employee.id}}\"&gt;delete&lt;/a&gt;\n</code></pre> <p>\u901a\u8fc7vue\u5904\u7406\u70b9\u51fb\u4e8b\u4ef6</p> <pre><code>&lt;script type=\"text/javascript\"&gt;\n    var vue = new Vue({\n        el:\"#dataTable\",\n        methods:{\n            //event\u8868\u793a\u5f53\u524d\u4e8b\u4ef6\n            deleteEmployee:function (event) {\n                //\u901a\u8fc7id\u83b7\u53d6\u8868\u5355\u6807\u7b7e\n                var delete_form = document.getElementById(\"delete_form\");\n                //\u5c06\u89e6\u53d1\u4e8b\u4ef6\u7684\u8d85\u94fe\u63a5\u7684href\u5c5e\u6027\u4e3a\u8868\u5355\u7684action\u5c5e\u6027\u8d4b\u503c\n                delete_form.action = event.target.href;\n                //\u63d0\u4ea4\u8868\u5355\n                delete_form.submit();\n                //\u963b\u6b62\u8d85\u94fe\u63a5\u7684\u9ed8\u8ba4\u8df3\u8f6c\u884c\u4e3a\n                event.preventDefault();\n            }\n        }\n    });\n&lt;/script&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#c_2","title":"c&gt;\u63a7\u5236\u5668\u65b9\u6cd5","text":"<pre><code>@RequestMapping(value = \"/employee/{id}\", method = RequestMethod.DELETE)\npublic String deleteEmployee(@PathVariable(\"id\") Integer id){\n    employeeDao.delete(id);\n    return \"redirect:/employee\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#6","title":"6\u3001\u5177\u4f53\u529f\u80fd\uff1a\u8df3\u8f6c\u5230\u6dfb\u52a0\u6570\u636e\u9875\u9762","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#aview-controller_1","title":"a&gt;\u914d\u7f6eview-controller","text":"<pre><code>&lt;mvc:view-controller path=\"/toAdd\" view-name=\"employee_add\"&gt;&lt;/mvc:view-controller&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#bemployee_addhtml","title":"b&gt;\u521b\u5efaemployee_add.html","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;Add Employee&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;form th:action=\"@{/employee}\" method=\"post\"&gt;\n    lastName:&lt;input type=\"text\" name=\"lastName\"&gt;&lt;br&gt;\n    email:&lt;input type=\"text\" name=\"email\"&gt;&lt;br&gt;\n    gender:&lt;input type=\"radio\" name=\"gender\" value=\"1\"&gt;male\n    &lt;input type=\"radio\" name=\"gender\" value=\"0\"&gt;female&lt;br&gt;\n    &lt;input type=\"submit\" value=\"add\"&gt;&lt;br&gt;\n&lt;/form&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#7_2","title":"7\u3001\u5177\u4f53\u529f\u80fd\uff1a\u6267\u884c\u4fdd\u5b58","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#a_4","title":"a&gt;\u63a7\u5236\u5668\u65b9\u6cd5","text":"<pre><code>@RequestMapping(value = \"/employee\", method = RequestMethod.POST)\npublic String addEmployee(Employee employee){\n    employeeDao.save(employee);\n    return \"redirect:/employee\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#8","title":"8\u3001\u5177\u4f53\u529f\u80fd\uff1a\u8df3\u8f6c\u5230\u66f4\u65b0\u6570\u636e\u9875\u9762","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#a_5","title":"a&gt;\u4fee\u6539\u8d85\u94fe\u63a5","text":"<pre><code>&lt;a th:href=\"@{'/employee/'+${employee.id}}\"&gt;update&lt;/a&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#b_5","title":"b&gt;\u63a7\u5236\u5668\u65b9\u6cd5","text":"<pre><code>@RequestMapping(value = \"/employee/{id}\", method = RequestMethod.GET)\npublic String getEmployeeById(@PathVariable(\"id\") Integer id, Model model){\n    Employee employee = employeeDao.get(id);\n    model.addAttribute(\"employee\", employee);\n    return \"employee_update\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#cemployee_updatehtml","title":"c&gt;\u521b\u5efaemployee_update.html","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;Update Employee&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;form th:action=\"@{/employee}\" method=\"post\"&gt;\n    &lt;input type=\"hidden\" name=\"_method\" value=\"put\"&gt;\n    &lt;input type=\"hidden\" name=\"id\" th:value=\"${employee.id}\"&gt;\n    lastName:&lt;input type=\"text\" name=\"lastName\" th:value=\"${employee.lastName}\"&gt;&lt;br&gt;\n    email:&lt;input type=\"text\" name=\"email\" th:value=\"${employee.email}\"&gt;&lt;br&gt;\n    &lt;!--\n        th:field=\"${employee.gender}\"\u53ef\u7528\u4e8e\u5355\u9009\u6846\u6216\u590d\u9009\u6846\u7684\u56de\u663e\n        \u82e5\u5355\u9009\u6846\u7684value\u548cemployee.gender\u7684\u503c\u4e00\u81f4\uff0c\u5219\u6dfb\u52a0checked=\"checked\"\u5c5e\u6027\n    --&gt;\n    gender:&lt;input type=\"radio\" name=\"gender\" value=\"1\" th:field=\"${employee.gender}\"&gt;male\n    &lt;input type=\"radio\" name=\"gender\" value=\"0\" th:field=\"${employee.gender}\"&gt;female&lt;br&gt;\n    &lt;input type=\"submit\" value=\"update\"&gt;&lt;br&gt;\n&lt;/form&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#9","title":"9\u3001\u5177\u4f53\u529f\u80fd\uff1a\u6267\u884c\u66f4\u65b0","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#a_6","title":"a&gt;\u63a7\u5236\u5668\u65b9\u6cd5","text":"<pre><code>@RequestMapping(value = \"/employee\", method = RequestMethod.PUT)\npublic String updateEmployee(Employee employee){\n    employeeDao.save(employee);\n    return \"redirect:/employee\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#httpmessageconverter","title":"\u516b\u3001HttpMessageConverter","text":"<p>HttpMessageConverter\uff0c\u62a5\u6587\u4fe1\u606f\u8f6c\u6362\u5668\uff0c\u5c06\u8bf7\u6c42\u62a5\u6587\u8f6c\u6362\u4e3aJava\u5bf9\u8c61\uff0c\u6216\u5c06Java\u5bf9\u8c61\u8f6c\u6362\u4e3a\u54cd\u5e94\u62a5\u6587</p> <p>HttpMessageConverter\u63d0\u4f9b\u4e86\u4e24\u4e2a\u6ce8\u89e3\u548c\u4e24\u4e2a\u7c7b\u578b\uff1a@RequestBody\uff0c@ResponseBody\uff0cRequestEntity\uff0c</p> <p>ResponseEntity</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#1requestbody","title":"1\u3001@RequestBody","text":"<p>@RequestBody\u53ef\u4ee5\u83b7\u53d6\u8bf7\u6c42\u4f53\uff0c\u9700\u8981\u5728\u63a7\u5236\u5668\u65b9\u6cd5\u8bbe\u7f6e\u4e00\u4e2a\u5f62\u53c2\uff0c\u4f7f\u7528@RequestBody\u8fdb\u884c\u6807\u8bc6\uff0c\u5f53\u524d\u8bf7\u6c42\u7684\u8bf7\u6c42\u4f53\u5c31\u4f1a\u4e3a\u5f53\u524d\u6ce8\u89e3\u6240\u6807\u8bc6\u7684\u5f62\u53c2\u8d4b\u503c</p> <pre><code>&lt;form th:action=\"@{/testRequestBody}\" method=\"post\"&gt;\n    \u7528\u6237\u540d\uff1a&lt;input type=\"text\" name=\"username\"&gt;&lt;br&gt;\n    \u5bc6\u7801\uff1a&lt;input type=\"password\" name=\"password\"&gt;&lt;br&gt;\n    &lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n</code></pre> <pre><code>@RequestMapping(\"/testRequestBody\")\npublic String testRequestBody(@RequestBody String requestBody){\n    System.out.println(\"requestBody:\"+requestBody);\n    return \"success\";\n}\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a</p> <p>requestBody:username=admin&amp;password=123456</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2requestentity","title":"2\u3001RequestEntity","text":"<p>RequestEntity\u5c01\u88c5\u8bf7\u6c42\u62a5\u6587\u7684\u4e00\u79cd\u7c7b\u578b\uff0c\u9700\u8981\u5728\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u5f62\u53c2\u4e2d\u8bbe\u7f6e\u8be5\u7c7b\u578b\u7684\u5f62\u53c2\uff0c\u5f53\u524d\u8bf7\u6c42\u7684\u8bf7\u6c42\u62a5\u6587\u5c31\u4f1a\u8d4b\u503c\u7ed9\u8be5\u5f62\u53c2\uff0c\u53ef\u4ee5\u901a\u8fc7getHeaders()\u83b7\u53d6\u8bf7\u6c42\u5934\u4fe1\u606f\uff0c\u901a\u8fc7getBody()\u83b7\u53d6\u8bf7\u6c42\u4f53\u4fe1\u606f</p> <pre><code>@RequestMapping(\"/testRequestEntity\")\npublic String testRequestEntity(RequestEntity&lt;String&gt; requestEntity){\n    System.out.println(\"requestHeader:\"+requestEntity.getHeaders());\n    System.out.println(\"requestBody:\"+requestEntity.getBody());\n    return \"success\";\n}\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\uff1a requestHeader:[host:\"localhost:8080\", connection:\"keep-alive\", content-length:\"27\", cache-control:\"max-age=0\", sec-ch-ua:\"\" Not A;Brand\";v=\"99\", \"Chromium\";v=\"90\", \"Google Chrome\";v=\"90\"\", sec-ch-ua-mobile:\"?0\", upgrade-insecure-requests:\"1\", origin:\"http://localhost:8080\", user-agent:\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36\"] requestBody:username=admin&amp;password=123</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#3responsebody","title":"3\u3001@ResponseBody","text":"<p>@ResponseBody\u7528\u4e8e\u6807\u8bc6\u4e00\u4e2a\u63a7\u5236\u5668\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5c06\u8be5\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u76f4\u63a5\u4f5c\u4e3a\u54cd\u5e94\u62a5\u6587\u7684\u54cd\u5e94\u4f53\u54cd\u5e94\u5230\u6d4f\u89c8\u5668</p> <pre><code>@RequestMapping(\"/testResponseBody\")\n@ResponseBody\npublic String testResponseBody(){\n    return \"success\";\n}\n</code></pre> <p>\u7ed3\u679c\uff1a\u6d4f\u89c8\u5668\u9875\u9762\u663e\u793asuccess</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#4springmvcjson","title":"4\u3001SpringMVC\u5904\u7406json","text":"<p>@ResponseBody\u5904\u7406json\u7684\u6b65\u9aa4\uff1a</p> <p>a&gt;\u5bfc\u5165jackson\u7684\u4f9d\u8d56</p> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.12.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>b&gt;\u5728SpringMVC\u7684\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6\u4e2d\u5f00\u542fmvc\u7684\u6ce8\u89e3\u9a71\u52a8\uff0c\u6b64\u65f6\u5728HandlerAdaptor\u4e2d\u4f1a\u81ea\u52a8\u88c5\u914d\u4e00\u4e2a\u6d88\u606f\u8f6c\u6362\u5668\uff1aMappingJackson2HttpMessageConverter\uff0c\u53ef\u4ee5\u5c06\u54cd\u5e94\u5230\u6d4f\u89c8\u5668\u7684Java\u5bf9\u8c61\u8f6c\u6362\u4e3aJson\u683c\u5f0f\u7684\u5b57\u7b26\u4e32</p> <pre><code>&lt;mvc:annotation-driven /&gt;\n</code></pre> <p>c&gt;\u5728\u5904\u7406\u5668\u65b9\u6cd5\u4e0a\u4f7f\u7528@ResponseBody\u6ce8\u89e3\u8fdb\u884c\u6807\u8bc6</p> <p>d&gt;\u5c06Java\u5bf9\u8c61\u76f4\u63a5\u4f5c\u4e3a\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u8fd4\u56de\uff0c\u5c31\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3aJson\u683c\u5f0f\u7684\u5b57\u7b26\u4e32</p> <pre><code>@RequestMapping(\"/testResponseUser\")\n@ResponseBody\npublic User testResponseUser(){\n    return new User(1001,\"admin\",\"123456\",23,\"\u7537\");\n}\n</code></pre> <p>\u6d4f\u89c8\u5668\u7684\u9875\u9762\u4e2d\u5c55\u793a\u7684\u7ed3\u679c\uff1a</p> <p>{\"id\":1001,\"username\":\"admin\",\"password\":\"123456\",\"age\":23,\"sex\":\"\u7537\"}</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#5springmvcajax","title":"5\u3001SpringMVC\u5904\u7406ajax","text":"<p>a&gt;\u8bf7\u6c42\u8d85\u94fe\u63a5\uff1a</p> <pre><code>&lt;div id=\"app\"&gt;\n    &lt;a th:href=\"@{/testAjax}\" @click=\"testAjax\"&gt;testAjax&lt;/a&gt;&lt;br&gt;\n&lt;/div&gt;\n</code></pre> <p>b&gt;\u901a\u8fc7vue\u548caxios\u5904\u7406\u70b9\u51fb\u4e8b\u4ef6\uff1a</p> <pre><code>&lt;script type=\"text/javascript\" th:src=\"@{/static/js/vue.js}\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" th:src=\"@{/static/js/axios.min.js}\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    var vue = new Vue({\n        el:\"#app\",\n        methods:{\n            testAjax:function (event) {\n                axios({\n                    method:\"post\",\n                    url:event.target.href,\n                    params:{\n                        username:\"admin\",\n                        password:\"123456\"\n                    }\n                }).then(function (response) {\n                    alert(response.data);\n                });\n                event.preventDefault();\n            }\n        }\n    });\n&lt;/script&gt;\n</code></pre> <p>c&gt;\u63a7\u5236\u5668\u65b9\u6cd5\uff1a</p> <pre><code>@RequestMapping(\"/testAjax\")\n@ResponseBody\npublic String testAjax(String username, String password){\n    System.out.println(\"username:\"+username+\",password:\"+password);\n    return \"hello,ajax\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#6restcontroller","title":"6\u3001@RestController\u6ce8\u89e3","text":"<p>@RestController\u6ce8\u89e3\u662fspringMVC\u63d0\u4f9b\u7684\u4e00\u4e2a\u590d\u5408\u6ce8\u89e3\uff0c\u6807\u8bc6\u5728\u63a7\u5236\u5668\u7684\u7c7b\u4e0a\uff0c\u5c31\u76f8\u5f53\u4e8e\u4e3a\u7c7b\u6dfb\u52a0\u4e86@Controller\u6ce8\u89e3\uff0c\u5e76\u4e14\u4e3a\u5176\u4e2d\u7684\u6bcf\u4e2a\u65b9\u6cd5\u6dfb\u52a0\u4e86@ResponseBody\u6ce8\u89e3</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#7responseentity","title":"7\u3001ResponseEntity","text":"<p>ResponseEntity\u7528\u4e8e\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u7c7b\u578b\uff0c\u8be5\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u5c31\u662f\u54cd\u5e94\u5230\u6d4f\u89c8\u5668\u7684\u54cd\u5e94\u62a5\u6587</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#_2","title":"\u4e5d\u3001\u6587\u4ef6\u4e0a\u4f20\u548c\u4e0b\u8f7d","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#1_2","title":"1\u3001\u6587\u4ef6\u4e0b\u8f7d","text":"<p>\u4f7f\u7528ResponseEntity\u5b9e\u73b0\u4e0b\u8f7d\u6587\u4ef6\u7684\u529f\u80fd</p> <pre><code>@RequestMapping(\"/testDown\")\npublic ResponseEntity&lt;byte[]&gt; testResponseEntity(HttpSession session) throws IOException {\n    //\u83b7\u53d6ServletContext\u5bf9\u8c61\n    ServletContext servletContext = session.getServletContext();\n    //\u83b7\u53d6\u670d\u52a1\u5668\u4e2d\u6587\u4ef6\u7684\u771f\u5b9e\u8def\u5f84\n    String realPath = servletContext.getRealPath(\"/static/img/1.jpg\");\n    //\u521b\u5efa\u8f93\u5165\u6d41\n    InputStream is = new FileInputStream(realPath);\n    //\u521b\u5efa\u5b57\u8282\u6570\u7ec4\n    byte[] bytes = new byte[is.available()];\n    //\u5c06\u6d41\u8bfb\u5230\u5b57\u8282\u6570\u7ec4\u4e2d\n    is.read(bytes);\n    //\u521b\u5efaHttpHeaders\u5bf9\u8c61\u8bbe\u7f6e\u54cd\u5e94\u5934\u4fe1\u606f\n    MultiValueMap&lt;String, String&gt; headers = new HttpHeaders();\n    //\u8bbe\u7f6e\u8981\u4e0b\u8f7d\u65b9\u5f0f\u4ee5\u53ca\u4e0b\u8f7d\u6587\u4ef6\u7684\u540d\u5b57\n    headers.add(\"Content-Disposition\", \"attachment;filename=1.jpg\");\n    //\u8bbe\u7f6e\u54cd\u5e94\u72b6\u6001\u7801\n    HttpStatus statusCode = HttpStatus.OK;\n    //\u521b\u5efaResponseEntity\u5bf9\u8c61\n    ResponseEntity&lt;byte[]&gt; responseEntity = new ResponseEntity&lt;&gt;(bytes, headers, statusCode);\n    //\u5173\u95ed\u8f93\u5165\u6d41\n    is.close();\n    return responseEntity;\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2_3","title":"2\u3001\u6587\u4ef6\u4e0a\u4f20","text":"<p>\u6587\u4ef6\u4e0a\u4f20\u8981\u6c42form\u8868\u5355\u7684\u8bf7\u6c42\u65b9\u5f0f\u5fc5\u987b\u4e3apost\uff0c\u5e76\u4e14\u6dfb\u52a0\u5c5e\u6027enctype=\"multipart/form-data\"</p> <p>SpringMVC\u4e2d\u5c06\u4e0a\u4f20\u7684\u6587\u4ef6\u5c01\u88c5\u5230MultipartFile\u5bf9\u8c61\u4e2d\uff0c\u901a\u8fc7\u6b64\u5bf9\u8c61\u53ef\u4ee5\u83b7\u53d6\u6587\u4ef6\u76f8\u5173\u4fe1\u606f</p> <p>\u4e0a\u4f20\u6b65\u9aa4\uff1a</p> <p>a&gt;\u6dfb\u52a0\u4f9d\u8d56\uff1a</p> <pre><code>&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\n    &lt;version&gt;1.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>b&gt;\u5728SpringMVC\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u914d\u7f6e\uff1a</p> <pre><code>&lt;!--\u5fc5\u987b\u901a\u8fc7\u6587\u4ef6\u89e3\u6790\u5668\u7684\u89e3\u6790\u624d\u80fd\u5c06\u6587\u4ef6\u8f6c\u6362\u4e3aMultipartFile\u5bf9\u8c61--&gt;\n&lt;bean id=\"multipartResolver\" class=\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"&gt;&lt;/bean&gt;\n</code></pre> <p>c&gt;\u63a7\u5236\u5668\u65b9\u6cd5\uff1a</p> <pre><code>@RequestMapping(\"/testUp\")\npublic String testUp(MultipartFile photo, HttpSession session) throws IOException {\n    //\u83b7\u53d6\u4e0a\u4f20\u7684\u6587\u4ef6\u7684\u6587\u4ef6\u540d\n    String fileName = photo.getOriginalFilename();\n    //\u5904\u7406\u6587\u4ef6\u91cd\u540d\u95ee\u9898\n    String hzName = fileName.substring(fileName.lastIndexOf(\".\"));\n    fileName = UUID.randomUUID().toString() + hzName;\n    //\u83b7\u53d6\u670d\u52a1\u5668\u4e2dphoto\u76ee\u5f55\u7684\u8def\u5f84\n    ServletContext servletContext = session.getServletContext();\n    String photoPath = servletContext.getRealPath(\"photo\");\n    File file = new File(photoPath);\n    if(!file.exists()){\n        file.mkdir();\n    }\n    String finalPath = photoPath + File.separator + fileName;\n    //\u5b9e\u73b0\u4e0a\u4f20\u529f\u80fd\n    photo.transferTo(new File(finalPath));\n    return \"success\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#_3","title":"\u5341\u3001\u62e6\u622a\u5668","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#1_3","title":"1\u3001\u62e6\u622a\u5668\u7684\u914d\u7f6e","text":"<p>SpringMVC\u4e2d\u7684\u62e6\u622a\u5668\u7528\u4e8e\u62e6\u622a\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u6267\u884c</p> <p>SpringMVC\u4e2d\u7684\u62e6\u622a\u5668\u9700\u8981\u5b9e\u73b0HandlerInterceptor</p> <p>SpringMVC\u7684\u62e6\u622a\u5668\u5fc5\u987b\u5728SpringMVC\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u8fdb\u884c\u914d\u7f6e\uff1a</p> <pre><code>&lt;bean class=\"com.atguigu.interceptor.FirstInterceptor\"&gt;&lt;/bean&gt;\n&lt;ref bean=\"firstInterceptor\"&gt;&lt;/ref&gt;\n&lt;!-- \u4ee5\u4e0a\u4e24\u79cd\u914d\u7f6e\u65b9\u5f0f\u90fd\u662f\u5bf9DispatcherServlet\u6240\u5904\u7406\u7684\u6240\u6709\u7684\u8bf7\u6c42\u8fdb\u884c\u62e6\u622a --&gt;\n&lt;mvc:interceptor&gt;\n    &lt;mvc:mapping path=\"/**\"/&gt;\n    &lt;mvc:exclude-mapping path=\"/testRequestEntity\"/&gt;\n    &lt;ref bean=\"firstInterceptor\"&gt;&lt;/ref&gt;\n&lt;/mvc:interceptor&gt;\n&lt;!-- \n    \u4ee5\u4e0a\u914d\u7f6e\u65b9\u5f0f\u53ef\u4ee5\u901a\u8fc7ref\u6216bean\u6807\u7b7e\u8bbe\u7f6e\u62e6\u622a\u5668\uff0c\u901a\u8fc7mvc:mapping\u8bbe\u7f6e\u9700\u8981\u62e6\u622a\u7684\u8bf7\u6c42\uff0c\u901a\u8fc7mvc:exclude-mapping\u8bbe\u7f6e\u9700\u8981\u6392\u9664\u7684\u8bf7\u6c42\uff0c\u5373\u4e0d\u9700\u8981\u62e6\u622a\u7684\u8bf7\u6c42\n--&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2_4","title":"2\u3001\u62e6\u622a\u5668\u7684\u4e09\u4e2a\u62bd\u8c61\u65b9\u6cd5","text":"<p>SpringMVC\u4e2d\u7684\u62e6\u622a\u5668\u6709\u4e09\u4e2a\u62bd\u8c61\u65b9\u6cd5\uff1a</p> <p>preHandle\uff1a\u63a7\u5236\u5668\u65b9\u6cd5\u6267\u884c\u4e4b\u524d\u6267\u884cpreHandle()\uff0c\u5176boolean\u7c7b\u578b\u7684\u8fd4\u56de\u503c\u8868\u793a\u662f\u5426\u62e6\u622a\u6216\u653e\u884c\uff0c\u8fd4\u56detrue\u4e3a\u653e\u884c\uff0c\u5373\u8c03\u7528\u63a7\u5236\u5668\u65b9\u6cd5\uff1b\u8fd4\u56defalse\u8868\u793a\u62e6\u622a\uff0c\u5373\u4e0d\u8c03\u7528\u63a7\u5236\u5668\u65b9\u6cd5</p> <p>postHandle\uff1a\u63a7\u5236\u5668\u65b9\u6cd5\u6267\u884c\u4e4b\u540e\u6267\u884cpostHandle()</p> <p>afterComplation\uff1a\u5904\u7406\u5b8c\u89c6\u56fe\u548c\u6a21\u578b\u6570\u636e\uff0c\u6e32\u67d3\u89c6\u56fe\u5b8c\u6bd5\u4e4b\u540e\u6267\u884cafterComplation()</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#3_2","title":"3\u3001\u591a\u4e2a\u62e6\u622a\u5668\u7684\u6267\u884c\u987a\u5e8f","text":"<p>a&gt;\u82e5\u6bcf\u4e2a\u62e6\u622a\u5668\u7684preHandle()\u90fd\u8fd4\u56detrue</p> <p>\u6b64\u65f6\u591a\u4e2a\u62e6\u622a\u5668\u7684\u6267\u884c\u987a\u5e8f\u548c\u62e6\u622a\u5668\u5728SpringMVC\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u914d\u7f6e\u987a\u5e8f\u6709\u5173\uff1a</p> <p>preHandle()\u4f1a\u6309\u7167\u914d\u7f6e\u7684\u987a\u5e8f\u6267\u884c\uff0c\u800cpostHandle()\u548cafterComplation()\u4f1a\u6309\u7167\u914d\u7f6e\u7684\u53cd\u5e8f\u6267\u884c</p> <p>b&gt;\u82e5\u67d0\u4e2a\u62e6\u622a\u5668\u7684preHandle()\u8fd4\u56de\u4e86false</p> <p>preHandle()\u8fd4\u56defalse\u548c\u5b83\u4e4b\u524d\u7684\u62e6\u622a\u5668\u7684preHandle()\u90fd\u4f1a\u6267\u884c\uff0cpostHandle()\u90fd\u4e0d\u6267\u884c\uff0c\u8fd4\u56defalse\u7684\u62e6\u622a\u5668\u4e4b\u524d\u7684\u62e6\u622a\u5668\u7684afterComplation()\u4f1a\u6267\u884c</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#_4","title":"\u5341\u4e00\u3001\u5f02\u5e38\u5904\u7406\u5668","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#1_4","title":"1\u3001\u57fa\u4e8e\u914d\u7f6e\u7684\u5f02\u5e38\u5904\u7406","text":"<p>SpringMVC\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5904\u7406\u63a7\u5236\u5668\u65b9\u6cd5\u6267\u884c\u8fc7\u7a0b\u4e2d\u6240\u51fa\u73b0\u7684\u5f02\u5e38\u7684\u63a5\u53e3\uff1aHandlerExceptionResolver</p> <p>HandlerExceptionResolver\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u6709\uff1aDefaultHandlerExceptionResolver\u548cSimpleMappingExceptionResolver</p> <p>SpringMVC\u63d0\u4f9b\u4e86\u81ea\u5b9a\u4e49\u7684\u5f02\u5e38\u5904\u7406\u5668SimpleMappingExceptionResolver\uff0c\u4f7f\u7528\u65b9\u5f0f\uff1a</p> <pre><code>&lt;bean class=\"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver\"&gt;\n    &lt;property name=\"exceptionMappings\"&gt;\n        &lt;props&gt;\n            &lt;!--\n                properties\u7684\u952e\u8868\u793a\u5904\u7406\u5668\u65b9\u6cd5\u6267\u884c\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u5f02\u5e38\n                properties\u7684\u503c\u8868\u793a\u82e5\u51fa\u73b0\u6307\u5b9a\u5f02\u5e38\u65f6\uff0c\u8bbe\u7f6e\u4e00\u4e2a\u65b0\u7684\u89c6\u56fe\u540d\u79f0\uff0c\u8df3\u8f6c\u5230\u6307\u5b9a\u9875\u9762\n            --&gt;\n            &lt;prop key=\"java.lang.ArithmeticException\"&gt;error&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n    &lt;!--\n        exceptionAttribute\u5c5e\u6027\u8bbe\u7f6e\u4e00\u4e2a\u5c5e\u6027\u540d\uff0c\u5c06\u51fa\u73b0\u7684\u5f02\u5e38\u4fe1\u606f\u5728\u8bf7\u6c42\u57df\u4e2d\u8fdb\u884c\u5171\u4eab\n    --&gt;\n    &lt;property name=\"exceptionAttribute\" value=\"ex\"&gt;&lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2_5","title":"2\u3001\u57fa\u4e8e\u6ce8\u89e3\u7684\u5f02\u5e38\u5904\u7406","text":"<pre><code>//@ControllerAdvice\u5c06\u5f53\u524d\u7c7b\u6807\u8bc6\u4e3a\u5f02\u5e38\u5904\u7406\u7684\u7ec4\u4ef6\n@ControllerAdvice\npublic class ExceptionController {\n\n    //@ExceptionHandler\u7528\u4e8e\u8bbe\u7f6e\u6240\u6807\u8bc6\u65b9\u6cd5\u5904\u7406\u7684\u5f02\u5e38\n    @ExceptionHandler(ArithmeticException.class)\n    //ex\u8868\u793a\u5f53\u524d\u8bf7\u6c42\u5904\u7406\u4e2d\u51fa\u73b0\u7684\u5f02\u5e38\u5bf9\u8c61\n    public String handleArithmeticException(Exception ex, Model model){\n        model.addAttribute(\"ex\", ex);\n        return \"error\";\n    }\n\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#springmvc_3","title":"\u5341\u4e8c\u3001\u6ce8\u89e3\u914d\u7f6eSpringMVC","text":"<p>\u4f7f\u7528\u914d\u7f6e\u7c7b\u548c\u6ce8\u89e3\u4ee3\u66ffweb.xml\u548cSpringMVC\u914d\u7f6e\u6587\u4ef6\u7684\u529f\u80fd</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#1webxml","title":"1\u3001\u521b\u5efa\u521d\u59cb\u5316\u7c7b\uff0c\u4ee3\u66ffweb.xml","text":"<p>\u5728Servlet3.0\u73af\u5883\u4e2d\uff0c\u5bb9\u5668\u4f1a\u5728\u7c7b\u8def\u5f84\u4e2d\u67e5\u627e\u5b9e\u73b0javax.servlet.ServletContainerInitializer\u63a5\u53e3\u7684\u7c7b\uff0c\u5982\u679c\u627e\u5230\u7684\u8bdd\u5c31\u7528\u5b83\u6765\u914d\u7f6eServlet\u5bb9\u5668\u3002 Spring\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u63a5\u53e3\u7684\u5b9e\u73b0\uff0c\u540d\u4e3aSpringServletContainerInitializer\uff0c\u8fd9\u4e2a\u7c7b\u53cd\u8fc7\u6765\u53c8\u4f1a\u67e5\u627e\u5b9e\u73b0WebApplicationInitializer\u7684\u7c7b\u5e76\u5c06\u914d\u7f6e\u7684\u4efb\u52a1\u4ea4\u7ed9\u5b83\u4eec\u6765\u5b8c\u6210\u3002Spring3.2\u5f15\u5165\u4e86\u4e00\u4e2a\u4fbf\u5229\u7684WebApplicationInitializer\u57fa\u7840\u5b9e\u73b0\uff0c\u540d\u4e3aAbstractAnnotationConfigDispatcherServletInitializer\uff0c\u5f53\u6211\u4eec\u7684\u7c7b\u6269\u5c55\u4e86AbstractAnnotationConfigDispatcherServletInitializer\u5e76\u5c06\u5176\u90e8\u7f72\u5230Servlet3.0\u5bb9\u5668\u7684\u65f6\u5019\uff0c\u5bb9\u5668\u4f1a\u81ea\u52a8\u53d1\u73b0\u5b83\uff0c\u5e76\u7528\u5b83\u6765\u914d\u7f6eServlet\u4e0a\u4e0b\u6587\u3002</p> <pre><code>public class WebInit extends AbstractAnnotationConfigDispatcherServletInitializer {\n\n    /**\n     * \u6307\u5b9aspring\u7684\u914d\u7f6e\u7c7b\n     * @return\n     */\n    @Override\n    protected Class&lt;?&gt;[] getRootConfigClasses() {\n        return new Class[]{SpringConfig.class};\n    }\n\n    /**\n     * \u6307\u5b9aSpringMVC\u7684\u914d\u7f6e\u7c7b\n     * @return\n     */\n    @Override\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        return new Class[]{WebConfig.class};\n    }\n\n    /**\n     * \u6307\u5b9aDispatcherServlet\u7684\u6620\u5c04\u89c4\u5219\uff0c\u5373url-pattern\n     * @return\n     */\n    @Override\n    protected String[] getServletMappings() {\n        return new String[]{\"/\"};\n    }\n\n    /**\n     * \u6dfb\u52a0\u8fc7\u6ee4\u5668\n     * @return\n     */\n    @Override\n    protected Filter[] getServletFilters() {\n        CharacterEncodingFilter encodingFilter = new CharacterEncodingFilter();\n        encodingFilter.setEncoding(\"UTF-8\");\n        encodingFilter.setForceRequestEncoding(true);\n        HiddenHttpMethodFilter hiddenHttpMethodFilter = new HiddenHttpMethodFilter();\n        return new Filter[]{encodingFilter, hiddenHttpMethodFilter};\n    }\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2springconfigspring","title":"2\u3001\u521b\u5efaSpringConfig\u914d\u7f6e\u7c7b\uff0c\u4ee3\u66ffspring\u7684\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>@Configuration\npublic class SpringConfig {\n    //ssm\u6574\u5408\u4e4b\u540e\uff0cspring\u7684\u914d\u7f6e\u4fe1\u606f\u5199\u5728\u6b64\u7c7b\u4e2d\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#3webconfigspringmvc","title":"3\u3001\u521b\u5efaWebConfig\u914d\u7f6e\u7c7b\uff0c\u4ee3\u66ffSpringMVC\u7684\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>@Configuration\n//\u626b\u63cf\u7ec4\u4ef6\n@ComponentScan(\"com.atguigu.mvc.controller\")\n//\u5f00\u542fMVC\u6ce8\u89e3\u9a71\u52a8\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    //\u4f7f\u7528\u9ed8\u8ba4\u7684servlet\u5904\u7406\u9759\u6001\u8d44\u6e90\n    @Override\n    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {\n        configurer.enable();\n    }\n\n    //\u914d\u7f6e\u6587\u4ef6\u4e0a\u4f20\u89e3\u6790\u5668\n    @Bean\n    public CommonsMultipartResolver multipartResolver(){\n        return new CommonsMultipartResolver();\n    }\n\n    //\u914d\u7f6e\u62e6\u622a\u5668\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        FirstInterceptor firstInterceptor = new FirstInterceptor();\n        registry.addInterceptor(firstInterceptor).addPathPatterns(\"/**\");\n    }\n\n    //\u914d\u7f6e\u89c6\u56fe\u63a7\u5236\n\n    /*@Override\n    public void addViewControllers(ViewControllerRegistry registry) {\n        registry.addViewController(\"/\").setViewName(\"index\");\n    }*/\n\n    //\u914d\u7f6e\u5f02\u5e38\u6620\u5c04\n    /*@Override\n    public void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) {\n        SimpleMappingExceptionResolver exceptionResolver = new SimpleMappingExceptionResolver();\n        Properties prop = new Properties();\n        prop.setProperty(\"java.lang.ArithmeticException\", \"error\");\n        //\u8bbe\u7f6e\u5f02\u5e38\u6620\u5c04\n        exceptionResolver.setExceptionMappings(prop);\n        //\u8bbe\u7f6e\u5171\u4eab\u5f02\u5e38\u4fe1\u606f\u7684\u952e\n        exceptionResolver.setExceptionAttribute(\"ex\");\n        resolvers.add(exceptionResolver);\n    }*/\n\n    //\u914d\u7f6e\u751f\u6210\u6a21\u677f\u89e3\u6790\u5668\n    @Bean\n    public ITemplateResolver templateResolver() {\n        WebApplicationContext webApplicationContext = ContextLoader.getCurrentWebApplicationContext();\n        // ServletContextTemplateResolver\u9700\u8981\u4e00\u4e2aServletContext\u4f5c\u4e3a\u6784\u9020\u53c2\u6570\uff0c\u53ef\u901a\u8fc7WebApplicationContext \u7684\u65b9\u6cd5\u83b7\u5f97\n        ServletContextTemplateResolver templateResolver = new ServletContextTemplateResolver(\n                webApplicationContext.getServletContext());\n        templateResolver.setPrefix(\"/WEB-INF/templates/\");\n        templateResolver.setSuffix(\".html\");\n        templateResolver.setCharacterEncoding(\"UTF-8\");\n        templateResolver.setTemplateMode(TemplateMode.HTML);\n        return templateResolver;\n    }\n\n    //\u751f\u6210\u6a21\u677f\u5f15\u64ce\u5e76\u4e3a\u6a21\u677f\u5f15\u64ce\u6ce8\u5165\u6a21\u677f\u89e3\u6790\u5668\n    @Bean\n    public SpringTemplateEngine templateEngine(ITemplateResolver templateResolver) {\n        SpringTemplateEngine templateEngine = new SpringTemplateEngine();\n        templateEngine.setTemplateResolver(templateResolver);\n        return templateEngine;\n    }\n\n    //\u751f\u6210\u89c6\u56fe\u89e3\u6790\u5668\u5e76\u672a\u89e3\u6790\u5668\u6ce8\u5165\u6a21\u677f\u5f15\u64ce\n    @Bean\n    public ViewResolver viewResolver(SpringTemplateEngine templateEngine) {\n        ThymeleafViewResolver viewResolver = new ThymeleafViewResolver();\n        viewResolver.setCharacterEncoding(\"UTF-8\");\n        viewResolver.setTemplateEngine(templateEngine);\n        return viewResolver;\n    }\n\n\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#4_2","title":"4\u3001\u6d4b\u8bd5\u529f\u80fd","text":"<pre><code>@RequestMapping(\"/\")\npublic String index(){\n    return \"index\";\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#springmvc_4","title":"\u5341\u4e09\u3001SpringMVC\u6267\u884c\u6d41\u7a0b","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#1springmvc","title":"1\u3001SpringMVC\u5e38\u7528\u7ec4\u4ef6","text":"<ul> <li>DispatcherServlet\uff1a\u524d\u7aef\u63a7\u5236\u5668\uff0c\u4e0d\u9700\u8981\u5de5\u7a0b\u5e08\u5f00\u53d1\uff0c\u7531\u6846\u67b6\u63d0\u4f9b</li> </ul> <p>\u4f5c\u7528\uff1a\u7edf\u4e00\u5904\u7406\u8bf7\u6c42\u548c\u54cd\u5e94\uff0c\u6574\u4e2a\u6d41\u7a0b\u63a7\u5236\u7684\u4e2d\u5fc3\uff0c\u7531\u5b83\u8c03\u7528\u5176\u5b83\u7ec4\u4ef6\u5904\u7406\u7528\u6237\u7684\u8bf7\u6c42</p> <ul> <li>HandlerMapping\uff1a\u5904\u7406\u5668\u6620\u5c04\u5668\uff0c\u4e0d\u9700\u8981\u5de5\u7a0b\u5e08\u5f00\u53d1\uff0c\u7531\u6846\u67b6\u63d0\u4f9b</li> </ul> <p>\u4f5c\u7528\uff1a\u6839\u636e\u8bf7\u6c42\u7684url\u3001method\u7b49\u4fe1\u606f\u67e5\u627eHandler\uff0c\u5373\u63a7\u5236\u5668\u65b9\u6cd5</p> <ul> <li>Handler\uff1a\u5904\u7406\u5668\uff0c\u9700\u8981\u5de5\u7a0b\u5e08\u5f00\u53d1</li> </ul> <p>\u4f5c\u7528\uff1a\u5728DispatcherServlet\u7684\u63a7\u5236\u4e0bHandler\u5bf9\u5177\u4f53\u7684\u7528\u6237\u8bf7\u6c42\u8fdb\u884c\u5904\u7406</p> <ul> <li>HandlerAdapter\uff1a\u5904\u7406\u5668\u9002\u914d\u5668\uff0c\u4e0d\u9700\u8981\u5de5\u7a0b\u5e08\u5f00\u53d1\uff0c\u7531\u6846\u67b6\u63d0\u4f9b</li> </ul> <p>\u4f5c\u7528\uff1a\u901a\u8fc7HandlerAdapter\u5bf9\u5904\u7406\u5668\uff08\u63a7\u5236\u5668\u65b9\u6cd5\uff09\u8fdb\u884c\u6267\u884c</p> <ul> <li>ViewResolver\uff1a\u89c6\u56fe\u89e3\u6790\u5668\uff0c\u4e0d\u9700\u8981\u5de5\u7a0b\u5e08\u5f00\u53d1\uff0c\u7531\u6846\u67b6\u63d0\u4f9b</li> </ul> <p>\u4f5c\u7528\uff1a\u8fdb\u884c\u89c6\u56fe\u89e3\u6790\uff0c\u5f97\u5230\u76f8\u5e94\u7684\u89c6\u56fe\uff0c\u4f8b\u5982\uff1aThymeleafView\u3001InternalResourceView\u3001RedirectView</p> <ul> <li>View\uff1a\u89c6\u56fe</li> </ul> <p>\u4f5c\u7528\uff1a\u5c06\u6a21\u578b\u6570\u636e\u901a\u8fc7\u9875\u9762\u5c55\u793a\u7ed9\u7528\u6237</p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#2dispatcherservlet","title":"2\u3001DispatcherServlet\u521d\u59cb\u5316\u8fc7\u7a0b","text":"<p>DispatcherServlet \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a Servlet\uff0c\u6240\u4ee5\u5929\u7136\u7684\u9075\u5faa Servlet \u7684\u751f\u547d\u5468\u671f\u3002\u6240\u4ee5\u5b8f\u89c2\u4e0a\u662f Servlet \u751f\u547d\u5468\u671f\u6765\u8fdb\u884c\u8c03\u5ea6\u3002</p> <p></p>"},{"location":"Java/SpringMVC/SpringMVCNotes/#awebapplicationcontext","title":"a&gt;\u521d\u59cb\u5316WebApplicationContext","text":"<p>\u6240\u5728\u7c7b\uff1aorg.springframework.web.servlet.FrameworkServlet</p> <pre><code>protected WebApplicationContext initWebApplicationContext() {\n    WebApplicationContext rootContext =\n        WebApplicationContextUtils.getWebApplicationContext(getServletContext());\n    WebApplicationContext wac = null;\n\n    if (this.webApplicationContext != null) {\n        // A context instance was injected at construction time -&gt; use it\n        wac = this.webApplicationContext;\n        if (wac instanceof ConfigurableWebApplicationContext) {\n            ConfigurableWebApplicationContext cwac = (ConfigurableWebApplicationContext) wac;\n            if (!cwac.isActive()) {\n                // The context has not yet been refreshed -&gt; provide services such as\n                // setting the parent context, setting the application context id, etc\n                if (cwac.getParent() == null) {\n                    // The context instance was injected without an explicit parent -&gt; set\n                    // the root application context (if any; may be null) as the parent\n                    cwac.setParent(rootContext);\n                }\n                configureAndRefreshWebApplicationContext(cwac);\n            }\n        }\n    }\n    if (wac == null) {\n        // No context instance was injected at construction time -&gt; see if one\n        // has been registered in the servlet context. If one exists, it is assumed\n        // that the parent context (if any) has already been set and that the\n        // user has performed any initialization such as setting the context id\n        wac = findWebApplicationContext();\n    }\n    if (wac == null) {\n        // No context instance is defined for this servlet -&gt; create a local one\n        // \u521b\u5efaWebApplicationContext\n        wac = createWebApplicationContext(rootContext);\n    }\n\n    if (!this.refreshEventReceived) {\n        // Either the context is not a ConfigurableApplicationContext with refresh\n        // support or the context injected at construction time had already been\n        // refreshed -&gt; trigger initial onRefresh manually here.\n        synchronized (this.onRefreshMonitor) {\n            // \u5237\u65b0WebApplicationContext\n            onRefresh(wac);\n        }\n    }\n\n    if (this.publishContext) {\n        // Publish the context as a servlet context attribute.\n        // \u5c06IOC\u5bb9\u5668\u5728\u5e94\u7528\u57df\u5171\u4eab\n        String attrName = getServletContextAttributeName();\n        getServletContext().setAttribute(attrName, wac);\n    }\n\n    return wac;\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#bwebapplicationcontext","title":"b&gt;\u521b\u5efaWebApplicationContext","text":"<p>\u6240\u5728\u7c7b\uff1aorg.springframework.web.servlet.FrameworkServlet</p> <pre><code>protected WebApplicationContext createWebApplicationContext(@Nullable ApplicationContext parent) {\n    Class&lt;?&gt; contextClass = getContextClass();\n    if (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass)) {\n        throw new ApplicationContextException(\n            \"Fatal initialization error in servlet with name '\" + getServletName() +\n            \"': custom WebApplicationContext class [\" + contextClass.getName() +\n            \"] is not of type ConfigurableWebApplicationContext\");\n    }\n    // \u901a\u8fc7\u53cd\u5c04\u521b\u5efa IOC \u5bb9\u5668\u5bf9\u8c61\n    ConfigurableWebApplicationContext wac =\n        (ConfigurableWebApplicationContext) BeanUtils.instantiateClass(contextClass);\n\n    wac.setEnvironment(getEnvironment());\n    // \u8bbe\u7f6e\u7236\u5bb9\u5668\n    wac.setParent(parent);\n    String configLocation = getContextConfigLocation();\n    if (configLocation != null) {\n        wac.setConfigLocation(configLocation);\n    }\n    configureAndRefreshWebApplicationContext(wac);\n\n    return wac;\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#cdispatcherservlet","title":"c&gt;DispatcherServlet\u521d\u59cb\u5316\u7b56\u7565","text":"<p>FrameworkServlet\u521b\u5efaWebApplicationContext\u540e\uff0c\u5237\u65b0\u5bb9\u5668\uff0c\u8c03\u7528onRefresh(wac)\uff0c\u6b64\u65b9\u6cd5\u5728DispatcherServlet\u4e2d\u8fdb\u884c\u4e86\u91cd\u5199\uff0c\u8c03\u7528\u4e86initStrategies(context)\u65b9\u6cd5\uff0c\u521d\u59cb\u5316\u7b56\u7565\uff0c\u5373\u521d\u59cb\u5316DispatcherServlet\u7684\u5404\u4e2a\u7ec4\u4ef6</p> <p>\u6240\u5728\u7c7b\uff1aorg.springframework.web.servlet.DispatcherServlet</p> <pre><code>protected void initStrategies(ApplicationContext context) {\n   initMultipartResolver(context);\n   initLocaleResolver(context);\n   initThemeResolver(context);\n   initHandlerMappings(context);\n   initHandlerAdapters(context);\n   initHandlerExceptionResolvers(context);\n   initRequestToViewNameTranslator(context);\n   initViewResolvers(context);\n   initFlashMapManager(context);\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#3dispatcherservlet","title":"3\u3001DispatcherServlet\u8c03\u7528\u7ec4\u4ef6\u5904\u7406\u8bf7\u6c42","text":""},{"location":"Java/SpringMVC/SpringMVCNotes/#aprocessrequest","title":"a&gt;processRequest()","text":"<p>FrameworkServlet\u91cd\u5199HttpServlet\u4e2d\u7684service()\u548cdoXxx()\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u4e2d\u8c03\u7528\u4e86processRequest(request, response)</p> <p>\u6240\u5728\u7c7b\uff1aorg.springframework.web.servlet.FrameworkServlet</p> <pre><code>protected final void processRequest(HttpServletRequest request, HttpServletResponse response)\n    throws ServletException, IOException {\n\n    long startTime = System.currentTimeMillis();\n    Throwable failureCause = null;\n\n    LocaleContext previousLocaleContext = LocaleContextHolder.getLocaleContext();\n    LocaleContext localeContext = buildLocaleContext(request);\n\n    RequestAttributes previousAttributes = RequestContextHolder.getRequestAttributes();\n    ServletRequestAttributes requestAttributes = buildRequestAttributes(request, response, previousAttributes);\n\n    WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);\n    asyncManager.registerCallableInterceptor(FrameworkServlet.class.getName(), new RequestBindingInterceptor());\n\n    initContextHolders(request, localeContext, requestAttributes);\n\n    try {\n        // \u6267\u884c\u670d\u52a1\uff0cdoService()\u662f\u4e00\u4e2a\u62bd\u8c61\u65b9\u6cd5\uff0c\u5728DispatcherServlet\u4e2d\u8fdb\u884c\u4e86\u91cd\u5199\n        doService(request, response);\n    }\n    catch (ServletException | IOException ex) {\n        failureCause = ex;\n        throw ex;\n    }\n    catch (Throwable ex) {\n        failureCause = ex;\n        throw new NestedServletException(\"Request processing failed\", ex);\n    }\n\n    finally {\n        resetContextHolders(request, previousLocaleContext, previousAttributes);\n        if (requestAttributes != null) {\n            requestAttributes.requestCompleted();\n        }\n        logResult(request, response, failureCause, asyncManager);\n        publishRequestHandledEvent(request, response, startTime, failureCause);\n    }\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#bdoservice","title":"b&gt;doService()","text":"<p>\u6240\u5728\u7c7b\uff1aorg.springframework.web.servlet.DispatcherServlet</p> <pre><code>@Override\nprotected void doService(HttpServletRequest request, HttpServletResponse response) throws Exception {\n    logRequest(request);\n\n    // Keep a snapshot of the request attributes in case of an include,\n    // to be able to restore the original attributes after the include.\n    Map&lt;String, Object&gt; attributesSnapshot = null;\n    if (WebUtils.isIncludeRequest(request)) {\n        attributesSnapshot = new HashMap&lt;&gt;();\n        Enumeration&lt;?&gt; attrNames = request.getAttributeNames();\n        while (attrNames.hasMoreElements()) {\n            String attrName = (String) attrNames.nextElement();\n            if (this.cleanupAfterInclude || attrName.startsWith(DEFAULT_STRATEGIES_PREFIX)) {\n                attributesSnapshot.put(attrName, request.getAttribute(attrName));\n            }\n        }\n    }\n\n    // Make framework objects available to handlers and view objects.\n    request.setAttribute(WEB_APPLICATION_CONTEXT_ATTRIBUTE, getWebApplicationContext());\n    request.setAttribute(LOCALE_RESOLVER_ATTRIBUTE, this.localeResolver);\n    request.setAttribute(THEME_RESOLVER_ATTRIBUTE, this.themeResolver);\n    request.setAttribute(THEME_SOURCE_ATTRIBUTE, getThemeSource());\n\n    if (this.flashMapManager != null) {\n        FlashMap inputFlashMap = this.flashMapManager.retrieveAndUpdate(request, response);\n        if (inputFlashMap != null) {\n            request.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE, Collections.unmodifiableMap(inputFlashMap));\n        }\n        request.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, new FlashMap());\n        request.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, this.flashMapManager);\n    }\n\n    RequestPath requestPath = null;\n    if (this.parseRequestPath &amp;&amp; !ServletRequestPathUtils.hasParsedRequestPath(request)) {\n        requestPath = ServletRequestPathUtils.parseAndCache(request);\n    }\n\n    try {\n        // \u5904\u7406\u8bf7\u6c42\u548c\u54cd\u5e94\n        doDispatch(request, response);\n    }\n    finally {\n        if (!WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) {\n            // Restore the original attribute snapshot, in case of an include.\n            if (attributesSnapshot != null) {\n                restoreAttributesAfterInclude(request, attributesSnapshot);\n            }\n        }\n        if (requestPath != null) {\n            ServletRequestPathUtils.clearParsedRequestPath(request);\n        }\n    }\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#cdodispatch","title":"c&gt;doDispatch()","text":"<p>\u6240\u5728\u7c7b\uff1aorg.springframework.web.servlet.DispatcherServlet</p> <pre><code>protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {\n    HttpServletRequest processedRequest = request;\n    HandlerExecutionChain mappedHandler = null;\n    boolean multipartRequestParsed = false;\n\n    WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);\n\n    try {\n        ModelAndView mv = null;\n        Exception dispatchException = null;\n\n        try {\n            processedRequest = checkMultipart(request);\n            multipartRequestParsed = (processedRequest != request);\n\n            // Determine handler for the current request.\n            /*\n                mappedHandler\uff1a\u8c03\u7528\u94fe\n                \u5305\u542bhandler\u3001interceptorList\u3001interceptorIndex\n                handler\uff1a\u6d4f\u89c8\u5668\u53d1\u9001\u7684\u8bf7\u6c42\u6240\u5339\u914d\u7684\u63a7\u5236\u5668\u65b9\u6cd5\n                interceptorList\uff1a\u5904\u7406\u63a7\u5236\u5668\u65b9\u6cd5\u7684\u6240\u6709\u62e6\u622a\u5668\u96c6\u5408\n                interceptorIndex\uff1a\u62e6\u622a\u5668\u7d22\u5f15\uff0c\u63a7\u5236\u62e6\u622a\u5668afterCompletion()\u7684\u6267\u884c\n            */\n            mappedHandler = getHandler(processedRequest);\n            if (mappedHandler == null) {\n                noHandlerFound(processedRequest, response);\n                return;\n            }\n\n            // Determine handler adapter for the current request.\n            // \u901a\u8fc7\u63a7\u5236\u5668\u65b9\u6cd5\u521b\u5efa\u76f8\u5e94\u7684\u5904\u7406\u5668\u9002\u914d\u5668\uff0c\u8c03\u7528\u6240\u5bf9\u5e94\u7684\u63a7\u5236\u5668\u65b9\u6cd5\n            HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());\n\n            // Process last-modified header, if supported by the handler.\n            String method = request.getMethod();\n            boolean isGet = \"GET\".equals(method);\n            if (isGet || \"HEAD\".equals(method)) {\n                long lastModified = ha.getLastModified(request, mappedHandler.getHandler());\n                if (new ServletWebRequest(request, response).checkNotModified(lastModified) &amp;&amp; isGet) {\n                    return;\n                }\n            }\n\n            // \u8c03\u7528\u62e6\u622a\u5668\u7684preHandle()\n            if (!mappedHandler.applyPreHandle(processedRequest, response)) {\n                return;\n            }\n\n            // Actually invoke the handler.\n            // \u7531\u5904\u7406\u5668\u9002\u914d\u5668\u8c03\u7528\u5177\u4f53\u7684\u63a7\u5236\u5668\u65b9\u6cd5\uff0c\u6700\u7ec8\u83b7\u5f97ModelAndView\u5bf9\u8c61\n            mv = ha.handle(processedRequest, response, mappedHandler.getHandler());\n\n            if (asyncManager.isConcurrentHandlingStarted()) {\n                return;\n            }\n\n            applyDefaultViewName(processedRequest, mv);\n            // \u8c03\u7528\u62e6\u622a\u5668\u7684postHandle()\n            mappedHandler.applyPostHandle(processedRequest, response, mv);\n        }\n        catch (Exception ex) {\n            dispatchException = ex;\n        }\n        catch (Throwable err) {\n            // As of 4.3, we're processing Errors thrown from handler methods as well,\n            // making them available for @ExceptionHandler methods and other scenarios.\n            dispatchException = new NestedServletException(\"Handler dispatch failed\", err);\n        }\n        // \u540e\u7eed\u5904\u7406\uff1a\u5904\u7406\u6a21\u578b\u6570\u636e\u548c\u6e32\u67d3\u89c6\u56fe\n        processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);\n    }\n    catch (Exception ex) {\n        triggerAfterCompletion(processedRequest, response, mappedHandler, ex);\n    }\n    catch (Throwable err) {\n        triggerAfterCompletion(processedRequest, response, mappedHandler,\n                               new NestedServletException(\"Handler processing failed\", err));\n    }\n    finally {\n        if (asyncManager.isConcurrentHandlingStarted()) {\n            // Instead of postHandle and afterCompletion\n            if (mappedHandler != null) {\n                mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);\n            }\n        }\n        else {\n            // Clean up any resources used by a multipart request.\n            if (multipartRequestParsed) {\n                cleanupMultipart(processedRequest);\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#dprocessdispatchresult","title":"d&gt;processDispatchResult()","text":"<pre><code>private void processDispatchResult(HttpServletRequest request, HttpServletResponse response,\n                                   @Nullable HandlerExecutionChain mappedHandler, @Nullable ModelAndView mv,\n                                   @Nullable Exception exception) throws Exception {\n\n    boolean errorView = false;\n\n    if (exception != null) {\n        if (exception instanceof ModelAndViewDefiningException) {\n            logger.debug(\"ModelAndViewDefiningException encountered\", exception);\n            mv = ((ModelAndViewDefiningException) exception).getModelAndView();\n        }\n        else {\n            Object handler = (mappedHandler != null ? mappedHandler.getHandler() : null);\n            mv = processHandlerException(request, response, handler, exception);\n            errorView = (mv != null);\n        }\n    }\n\n    // Did the handler return a view to render?\n    if (mv != null &amp;&amp; !mv.wasCleared()) {\n        // \u5904\u7406\u6a21\u578b\u6570\u636e\u548c\u6e32\u67d3\u89c6\u56fe\n        render(mv, request, response);\n        if (errorView) {\n            WebUtils.clearErrorRequestAttributes(request);\n        }\n    }\n    else {\n        if (logger.isTraceEnabled()) {\n            logger.trace(\"No view rendering, null ModelAndView returned.\");\n        }\n    }\n\n    if (WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) {\n        // Concurrent handling started during a forward\n        return;\n    }\n\n    if (mappedHandler != null) {\n        // Exception (if any) is already handled..\n        // \u8c03\u7528\u62e6\u622a\u5668\u7684afterCompletion()\n        mappedHandler.triggerAfterCompletion(request, response, null);\n    }\n}\n</code></pre>"},{"location":"Java/SpringMVC/SpringMVCNotes/#4springmvc","title":"4\u3001SpringMVC\u7684\u6267\u884c\u6d41\u7a0b","text":"<p>1) \u7528\u6237\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u8bf7\u6c42\u88abSpringMVC \u524d\u7aef\u63a7\u5236\u5668 DispatcherServlet\u6355\u83b7\u3002</p> <p>2) DispatcherServlet\u5bf9\u8bf7\u6c42URL\u8fdb\u884c\u89e3\u6790\uff0c\u5f97\u5230\u8bf7\u6c42\u8d44\u6e90\u6807\u8bc6\u7b26\uff08URI\uff09\uff0c\u5224\u65ad\u8bf7\u6c42URI\u5bf9\u5e94\u7684\u6620\u5c04\uff1a</p> <p>a) \u4e0d\u5b58\u5728</p> <p>i. \u518d\u5224\u65ad\u662f\u5426\u914d\u7f6e\u4e86mvc:default-servlet-handler</p> <p>ii. \u5982\u679c\u6ca1\u914d\u7f6e\uff0c\u5219\u63a7\u5236\u53f0\u62a5\u6620\u5c04\u67e5\u627e\u4e0d\u5230\uff0c\u5ba2\u6237\u7aef\u5c55\u793a404\u9519\u8bef</p> <p></p> <p></p> <p>iii. \u5982\u679c\u6709\u914d\u7f6e\uff0c\u5219\u8bbf\u95ee\u76ee\u6807\u8d44\u6e90\uff08\u4e00\u822c\u4e3a\u9759\u6001\u8d44\u6e90\uff0c\u5982\uff1aJS,CSS,HTML\uff09\uff0c\u627e\u4e0d\u5230\u5ba2\u6237\u7aef\u4e5f\u4f1a\u5c55\u793a404\u9519\u8bef</p> <p></p> <p></p> <p>b) \u5b58\u5728\u5219\u6267\u884c\u4e0b\u9762\u7684\u6d41\u7a0b</p> <p>3) \u6839\u636e\u8be5URI\uff0c\u8c03\u7528HandlerMapping\u83b7\u5f97\u8be5Handler\u914d\u7f6e\u7684\u6240\u6709\u76f8\u5173\u7684\u5bf9\u8c61\uff08\u5305\u62ecHandler\u5bf9\u8c61\u4ee5\u53caHandler\u5bf9\u8c61\u5bf9\u5e94\u7684\u62e6\u622a\u5668\uff09\uff0c\u6700\u540e\u4ee5HandlerExecutionChain\u6267\u884c\u94fe\u5bf9\u8c61\u7684\u5f62\u5f0f\u8fd4\u56de\u3002</p> <p>4) DispatcherServlet \u6839\u636e\u83b7\u5f97\u7684Handler\uff0c\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684HandlerAdapter\u3002</p> <p>5) \u5982\u679c\u6210\u529f\u83b7\u5f97HandlerAdapter\uff0c\u6b64\u65f6\u5c06\u5f00\u59cb\u6267\u884c\u62e6\u622a\u5668\u7684preHandler(\u2026)\u65b9\u6cd5\u3010\u6b63\u5411\u3011</p> <p>6) \u63d0\u53d6Request\u4e2d\u7684\u6a21\u578b\u6570\u636e\uff0c\u586b\u5145Handler\u5165\u53c2\uff0c\u5f00\u59cb\u6267\u884cHandler\uff08Controller)\u65b9\u6cd5\uff0c\u5904\u7406\u8bf7\u6c42\u3002\u5728\u586b\u5145Handler\u7684\u5165\u53c2\u8fc7\u7a0b\u4e2d\uff0c\u6839\u636e\u4f60\u7684\u914d\u7f6e\uff0cSpring\u5c06\u5e2e\u4f60\u505a\u4e00\u4e9b\u989d\u5916\u7684\u5de5\u4f5c\uff1a</p> <p>a) HttpMessageConveter\uff1a \u5c06\u8bf7\u6c42\u6d88\u606f\uff08\u5982Json\u3001xml\u7b49\u6570\u636e\uff09\u8f6c\u6362\u6210\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c06\u5bf9\u8c61\u8f6c\u6362\u4e3a\u6307\u5b9a\u7684\u54cd\u5e94\u4fe1\u606f</p> <p>b) \u6570\u636e\u8f6c\u6362\uff1a\u5bf9\u8bf7\u6c42\u6d88\u606f\u8fdb\u884c\u6570\u636e\u8f6c\u6362\u3002\u5982String\u8f6c\u6362\u6210Integer\u3001Double\u7b49</p> <p>c) \u6570\u636e\u683c\u5f0f\u5316\uff1a\u5bf9\u8bf7\u6c42\u6d88\u606f\u8fdb\u884c\u6570\u636e\u683c\u5f0f\u5316\u3002 \u5982\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u683c\u5f0f\u5316\u6570\u5b57\u6216\u683c\u5f0f\u5316\u65e5\u671f\u7b49</p> <p>d) \u6570\u636e\u9a8c\u8bc1\uff1a \u9a8c\u8bc1\u6570\u636e\u7684\u6709\u6548\u6027\uff08\u957f\u5ea6\u3001\u683c\u5f0f\u7b49\uff09\uff0c\u9a8c\u8bc1\u7ed3\u679c\u5b58\u50a8\u5230BindingResult\u6216Error\u4e2d</p> <p>7) Handler\u6267\u884c\u5b8c\u6210\u540e\uff0c\u5411DispatcherServlet \u8fd4\u56de\u4e00\u4e2aModelAndView\u5bf9\u8c61\u3002</p> <p>8) \u6b64\u65f6\u5c06\u5f00\u59cb\u6267\u884c\u62e6\u622a\u5668\u7684postHandle(...)\u65b9\u6cd5\u3010\u9006\u5411\u3011\u3002</p> <p>9) \u6839\u636e\u8fd4\u56de\u7684ModelAndView\uff08\u6b64\u65f6\u4f1a\u5224\u65ad\u662f\u5426\u5b58\u5728\u5f02\u5e38\uff1a\u5982\u679c\u5b58\u5728\u5f02\u5e38\uff0c\u5219\u6267\u884cHandlerExceptionResolver\u8fdb\u884c\u5f02\u5e38\u5904\u7406\uff09\u9009\u62e9\u4e00\u4e2a\u9002\u5408\u7684ViewResolver\u8fdb\u884c\u89c6\u56fe\u89e3\u6790\uff0c\u6839\u636eModel\u548cView\uff0c\u6765\u6e32\u67d3\u89c6\u56fe\u3002</p> <p>10) \u6e32\u67d3\u89c6\u56fe\u5b8c\u6bd5\u6267\u884c\u62e6\u622a\u5668\u7684afterCompletion(\u2026)\u65b9\u6cd5\u3010\u9006\u5411\u3011\u3002</p> <p>11) \u5c06\u6e32\u67d3\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002</p>"},{"location":"Java/SpringSecurity/SpringSecurity/","title":"SpringSecurity\u4ece\u5165\u95e8\u5230\u7cbe\u901a","text":""},{"location":"Java/SpringSecurity/SpringSecurity/#_1","title":"\u8bfe\u7a0b\u4ecb\u7ecd","text":""},{"location":"Java/SpringSecurity/SpringSecurity/#0","title":"0. \u7b80\u4ecb","text":"<p>\u200b   Spring Security \u662f Spring \u5bb6\u65cf\u4e2d\u7684\u4e00\u4e2a\u5b89\u5168\u7ba1\u7406\u6846\u67b6\u3002\u76f8\u6bd4\u4e0e\u53e6\u5916\u4e00\u4e2a\u5b89\u5168\u6846\u67b6Shiro\uff0c\u5b83\u63d0\u4f9b\u4e86\u66f4\u4e30\u5bcc\u7684\u529f\u80fd\uff0c\u793e\u533a\u8d44\u6e90\u4e5f\u6bd4Shiro\u4e30\u5bcc\u3002</p> <p>\u200b   \u4e00\u822c\u6765\u8bf4\u4e2d\u5927\u578b\u7684\u9879\u76ee\u90fd\u662f\u4f7f\u7528SpringSecurity \u6765\u505a\u5b89\u5168\u6846\u67b6\u3002\u5c0f\u9879\u76ee\u6709Shiro\u7684\u6bd4\u8f83\u591a\uff0c\u56e0\u4e3a\u76f8\u6bd4\u4e0eSpringSecurity\uff0cShiro\u7684\u4e0a\u624b\u66f4\u52a0\u7684\u7b80\u5355\u3002</p> <p>\u200b    \u4e00\u822cWeb\u5e94\u7528\u7684\u9700\u8981\u8fdb\u884c\u8ba4\u8bc1\u548c\u6388\u6743\u3002</p> <p>\u200b       \u8ba4\u8bc1\uff1a\u9a8c\u8bc1\u5f53\u524d\u8bbf\u95ee\u7cfb\u7edf\u7684\u662f\u4e0d\u662f\u672c\u7cfb\u7edf\u7684\u7528\u6237\uff0c\u5e76\u4e14\u8981\u786e\u8ba4\u5177\u4f53\u662f\u54ea\u4e2a\u7528\u6237</p> <p>\u200b       \u6388\u6743\uff1a\u7ecf\u8fc7\u8ba4\u8bc1\u540e\u5224\u65ad\u5f53\u524d\u7528\u6237\u662f\u5426\u6709\u6743\u9650\u8fdb\u884c\u67d0\u4e2a\u64cd\u4f5c</p> <p>\u200b   \u800c\u8ba4\u8bc1\u548c\u6388\u6743\u4e5f\u662fSpringSecurity\u4f5c\u4e3a\u5b89\u5168\u6846\u67b6\u7684\u6838\u5fc3\u529f\u80fd\u3002</p>"},{"location":"Java/SpringSecurity/SpringSecurity/#1","title":"1. \u5feb\u901f\u5165\u95e8","text":""},{"location":"Java/SpringSecurity/SpringSecurity/#11","title":"1.1 \u51c6\u5907\u5de5\u4f5c","text":"<p>\u200b   \u6211\u4eec\u5148\u8981\u642d\u5efa\u4e00\u4e2a\u7b80\u5355\u7684SpringBoot\u5de5\u7a0b</p> <p>\u2460 \u8bbe\u7f6e\u7236\u5de5\u7a0b \u6dfb\u52a0\u4f9d\u8d56</p> <pre><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.0&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre> <p>\u2461 \u521b\u5efa\u542f\u52a8\u7c7b</p> <pre><code>@SpringBootApplication\npublic class SecurityApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SecurityApplication.class,args);\n    }\n}\n</code></pre> <p>\u2462 \u521b\u5efaController</p> <pre><code>import org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class HelloController {\n\n    @RequestMapping(\"/hello\")\n    public String hello(){\n        return \"hello\";\n    }\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#12-springsecurity","title":"1.2 \u5f15\u5165SpringSecurity","text":"<p>\u200b   \u5728SpringBoot\u9879\u76ee\u4e2d\u4f7f\u7528SpringSecurity\u6211\u4eec\u53ea\u9700\u8981\u5f15\u5165\u4f9d\u8d56\u5373\u53ef\u5b9e\u73b0\u5165\u95e8\u6848\u4f8b\u3002</p> <pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>\u200b   \u5f15\u5165\u4f9d\u8d56\u540e\u6211\u4eec\u5728\u5c1d\u8bd5\u53bb\u8bbf\u95ee\u4e4b\u524d\u7684\u63a5\u53e3\u5c31\u4f1a\u81ea\u52a8\u8df3\u8f6c\u5230\u4e00\u4e2aSpringSecurity\u7684\u9ed8\u8ba4\u767b\u9646\u9875\u9762\uff0c\u9ed8\u8ba4\u7528\u6237\u540d\u662fuser,\u5bc6\u7801\u4f1a\u8f93\u51fa\u5728\u63a7\u5236\u53f0\u3002</p> <p>\u200b   \u5fc5\u987b\u767b\u9646\u4e4b\u540e\u624d\u80fd\u5bf9\u63a5\u53e3\u8fdb\u884c\u8bbf\u95ee\u3002</p>"},{"location":"Java/SpringSecurity/SpringSecurity/#2","title":"2. \u8ba4\u8bc1","text":""},{"location":"Java/SpringSecurity/SpringSecurity/#21","title":"2.1 \u767b\u9646\u6821\u9a8c\u6d41\u7a0b","text":""},{"location":"Java/SpringSecurity/SpringSecurity/#22","title":"2.2 \u539f\u7406\u521d\u63a2","text":"<p>\u200b   \u60f3\u8981\u77e5\u9053\u5982\u4f55\u5b9e\u73b0\u81ea\u5df1\u7684\u767b\u9646\u6d41\u7a0b\u5c31\u5fc5\u987b\u8981\u5148\u77e5\u9053\u5165\u95e8\u6848\u4f8b\u4e2dSpringSecurity\u7684\u6d41\u7a0b\u3002</p>"},{"location":"Java/SpringSecurity/SpringSecurity/#221-springsecurity","title":"2.2.1 SpringSecurity\u5b8c\u6574\u6d41\u7a0b","text":"<p>\u200b   SpringSecurity\u7684\u539f\u7406\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u8fc7\u6ee4\u5668\u94fe\uff0c\u5185\u90e8\u5305\u542b\u4e86\u63d0\u4f9b\u5404\u79cd\u529f\u80fd\u7684\u8fc7\u6ee4\u5668\u3002\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u770b\u770b\u5165\u95e8\u6848\u4f8b\u4e2d\u7684\u8fc7\u6ee4\u5668\u3002</p> <p></p> <p>\u200b   \u56fe\u4e2d\u53ea\u5c55\u793a\u4e86\u6838\u5fc3\u8fc7\u6ee4\u5668\uff0c\u5176\u5b83\u7684\u975e\u6838\u5fc3\u8fc7\u6ee4\u5668\u5e76\u6ca1\u6709\u5728\u56fe\u4e2d\u5c55\u793a\u3002</p> <p>UsernamePasswordAuthenticationFilter:\u8d1f\u8d23\u5904\u7406\u6211\u4eec\u5728\u767b\u9646\u9875\u9762\u586b\u5199\u4e86\u7528\u6237\u540d\u5bc6\u7801\u540e\u7684\u767b\u9646\u8bf7\u6c42\u3002\u5165\u95e8\u6848\u4f8b\u7684\u8ba4\u8bc1\u5de5\u4f5c\u4e3b\u8981\u6709\u5b83\u8d1f\u8d23\u3002</p> <p>ExceptionTranslationFilter\uff1a\u5904\u7406\u8fc7\u6ee4\u5668\u94fe\u4e2d\u629b\u51fa\u7684\u4efb\u4f55AccessDeniedException\u548cAuthenticationException \u3002</p> <p>FilterSecurityInterceptor\uff1a\u8d1f\u8d23\u6743\u9650\u6821\u9a8c\u7684\u8fc7\u6ee4\u5668\u3002</p> <p>\u200b   </p> <p>\u200b   \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7Debug\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u4e2dSpringSecurity\u8fc7\u6ee4\u5668\u94fe\u4e2d\u6709\u54ea\u4e9b\u8fc7\u6ee4\u5668\u53ca\u5b83\u4eec\u7684\u987a\u5e8f\u3002</p> <p></p>"},{"location":"Java/SpringSecurity/SpringSecurity/#222","title":"2.2.2 \u8ba4\u8bc1\u6d41\u7a0b\u8be6\u89e3","text":"<p>\u6982\u5ff5\u901f\u67e5:</p> <p>Authentication\u63a5\u53e3: \u5b83\u7684\u5b9e\u73b0\u7c7b\uff0c\u8868\u793a\u5f53\u524d\u8bbf\u95ee\u7cfb\u7edf\u7684\u7528\u6237\uff0c\u5c01\u88c5\u4e86\u7528\u6237\u76f8\u5173\u4fe1\u606f\u3002</p> <p>AuthenticationManager\u63a5\u53e3\uff1a\u5b9a\u4e49\u4e86\u8ba4\u8bc1Authentication\u7684\u65b9\u6cd5 </p> <p>UserDetailsService\u63a5\u53e3\uff1a\u52a0\u8f7d\u7528\u6237\u7279\u5b9a\u6570\u636e\u7684\u6838\u5fc3\u63a5\u53e3\u3002\u91cc\u9762\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6839\u636e\u7528\u6237\u540d\u67e5\u8be2\u7528\u6237\u4fe1\u606f\u7684\u65b9\u6cd5\u3002</p> <p>UserDetails\u63a5\u53e3\uff1a\u63d0\u4f9b\u6838\u5fc3\u7528\u6237\u4fe1\u606f\u3002\u901a\u8fc7UserDetailsService\u6839\u636e\u7528\u6237\u540d\u83b7\u53d6\u5904\u7406\u7684\u7528\u6237\u4fe1\u606f\u8981\u5c01\u88c5\u6210UserDetails\u5bf9\u8c61\u8fd4\u56de\u3002\u7136\u540e\u5c06\u8fd9\u4e9b\u4fe1\u606f\u5c01\u88c5\u5230Authentication\u5bf9\u8c61\u4e2d\u3002</p>"},{"location":"Java/SpringSecurity/SpringSecurity/#23","title":"2.3 \u89e3\u51b3\u95ee\u9898","text":""},{"location":"Java/SpringSecurity/SpringSecurity/#231","title":"2.3.1 \u601d\u8def\u5206\u6790","text":"<p>\u767b\u5f55</p> <p>\u200b   \u2460\u81ea\u5b9a\u4e49\u767b\u5f55\u63a5\u53e3  </p> <p>\u200b               \u8c03\u7528ProviderManager\u7684\u65b9\u6cd5\u8fdb\u884c\u8ba4\u8bc1 \u5982\u679c\u8ba4\u8bc1\u901a\u8fc7\u751f\u6210jwt</p> <p>\u200b               \u628a\u7528\u6237\u4fe1\u606f\u5b58\u5165redis\u4e2d</p> <p>\u200b   \u2461\u81ea\u5b9a\u4e49UserDetailsService </p> <p>\u200b               \u5728\u8fd9\u4e2a\u5b9e\u73b0\u7c7b\u4e2d\u53bb\u67e5\u8be2\u6570\u636e\u5e93</p> <p>\u6821\u9a8c\uff1a</p> <p>\u200b   \u2460\u5b9a\u4e49Jwt\u8ba4\u8bc1\u8fc7\u6ee4\u5668</p> <p>\u200b               \u83b7\u53d6token</p> <p>\u200b               \u89e3\u6790token\u83b7\u53d6\u5176\u4e2d\u7684userid</p> <p>\u200b               \u4eceredis\u4e2d\u83b7\u53d6\u7528\u6237\u4fe1\u606f</p> <p>\u200b               \u5b58\u5165SecurityContextHolder</p>"},{"location":"Java/SpringSecurity/SpringSecurity/#232","title":"2.3.2 \u51c6\u5907\u5de5\u4f5c","text":"<p>\u2460\u6dfb\u52a0\u4f9d\u8d56</p> <pre><code>        &lt;!--redis\u4f9d\u8d56--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!--fastjson\u4f9d\u8d56--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;\n            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;\n            &lt;version&gt;1.2.33&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--jwt\u4f9d\u8d56--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>\u2461 \u6dfb\u52a0Redis\u76f8\u5173\u914d\u7f6e</p> <pre><code>import com.alibaba.fastjson.JSON;\nimport com.alibaba.fastjson.serializer.SerializerFeature;\nimport com.fasterxml.jackson.databind.JavaType;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.type.TypeFactory;\nimport org.springframework.data.redis.serializer.RedisSerializer;\nimport org.springframework.data.redis.serializer.SerializationException;\nimport com.alibaba.fastjson.parser.ParserConfig;\nimport org.springframework.util.Assert;\nimport java.nio.charset.Charset;\n\n/**\n * Redis\u4f7f\u7528FastJson\u5e8f\u5217\u5316\n * \n * @author sg\n */\npublic class FastJsonRedisSerializer&lt;T&gt; implements RedisSerializer&lt;T&gt;\n{\n\n    public static final Charset DEFAULT_CHARSET = Charset.forName(\"UTF-8\");\n\n    private Class&lt;T&gt; clazz;\n\n    static\n    {\n        ParserConfig.getGlobalInstance().setAutoTypeSupport(true);\n    }\n\n    public FastJsonRedisSerializer(Class&lt;T&gt; clazz)\n    {\n        super();\n        this.clazz = clazz;\n    }\n\n    @Override\n    public byte[] serialize(T t) throws SerializationException\n    {\n        if (t == null)\n        {\n            return new byte[0];\n        }\n        return JSON.toJSONString(t, SerializerFeature.WriteClassName).getBytes(DEFAULT_CHARSET);\n    }\n\n    @Override\n    public T deserialize(byte[] bytes) throws SerializationException\n    {\n        if (bytes == null || bytes.length &lt;= 0)\n        {\n            return null;\n        }\n        String str = new String(bytes, DEFAULT_CHARSET);\n\n        return JSON.parseObject(str, clazz);\n    }\n\n\n    protected JavaType getJavaType(Class&lt;?&gt; clazz)\n    {\n        return TypeFactory.defaultInstance().constructType(clazz);\n    }\n}\n</code></pre> <pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.redis.connection.RedisConnectionFactory;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.data.redis.serializer.StringRedisSerializer;\n\n@Configuration\npublic class RedisConfig {\n\n    @Bean\n    @SuppressWarnings(value = { \"unchecked\", \"rawtypes\" })\n    public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory connectionFactory)\n    {\n        RedisTemplate&lt;Object, Object&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(connectionFactory);\n\n        FastJsonRedisSerializer serializer = new FastJsonRedisSerializer(Object.class);\n\n        // \u4f7f\u7528StringRedisSerializer\u6765\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316redis\u7684key\u503c\n        template.setKeySerializer(new StringRedisSerializer());\n        template.setValueSerializer(serializer);\n\n        // Hash\u7684key\u4e5f\u91c7\u7528StringRedisSerializer\u7684\u5e8f\u5217\u5316\u65b9\u5f0f\n        template.setHashKeySerializer(new StringRedisSerializer());\n        template.setHashValueSerializer(serializer);\n\n        template.afterPropertiesSet();\n        return template;\n    }\n}\n</code></pre> <p>\u2462 \u54cd\u5e94\u7c7b</p> <pre><code>import com.fasterxml.jackson.annotation.JsonInclude;\n\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class ResponseResult&lt;T&gt; {\n    /**\n     * \u72b6\u6001\u7801\n     */\n    private Integer code;\n    /**\n     * \u63d0\u793a\u4fe1\u606f\uff0c\u5982\u679c\u6709\u9519\u8bef\u65f6\uff0c\u524d\u7aef\u53ef\u4ee5\u83b7\u53d6\u8be5\u5b57\u6bb5\u8fdb\u884c\u63d0\u793a\n     */\n    private String msg;\n    /**\n     * \u67e5\u8be2\u5230\u7684\u7ed3\u679c\u6570\u636e\uff0c\n     */\n    private T data;\n\n    public ResponseResult(Integer code, String msg) {\n        this.code = code;\n        this.msg = msg;\n    }\n\n    public ResponseResult(Integer code, T data) {\n        this.code = code;\n        this.data = data;\n    }\n\n    public Integer getCode() {\n        return code;\n    }\n\n    public void setCode(Integer code) {\n        this.code = code;\n    }\n\n    public String getMsg() {\n        return msg;\n    }\n\n    public void setMsg(String msg) {\n        this.msg = msg;\n    }\n\n    public T getData() {\n        return data;\n    }\n\n    public void setData(T data) {\n        this.data = data;\n    }\n\n    public ResponseResult(Integer code, String msg, T data) {\n        this.code = code;\n        this.msg = msg;\n        this.data = data;\n    }\n}\n</code></pre> <p>\u2463\u5de5\u5177\u7c7b</p> <pre><code>import io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.JwtBuilder;\nimport io.jsonwebtoken.Jwts;\nimport io.jsonwebtoken.SignatureAlgorithm;\n\nimport javax.crypto.SecretKey;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.util.Base64;\nimport java.util.Date;\nimport java.util.UUID;\n\n/**\n * JWT\u5de5\u5177\u7c7b\n */\npublic class JwtUtil {\n\n    //\u6709\u6548\u671f\u4e3a\n    public static final Long JWT_TTL = 60 * 60 *1000L;// 60 * 60 *1000  \u4e00\u4e2a\u5c0f\u65f6\n    //\u8bbe\u7f6e\u79d8\u94a5\u660e\u6587\n    public static final String JWT_KEY = \"sangeng\";\n\n    public static String getUUID(){\n        String token = UUID.randomUUID().toString().replaceAll(\"-\", \"\");\n        return token;\n    }\n\n    /**\n     * \u751f\u6210jtw\n     * @param subject token\u4e2d\u8981\u5b58\u653e\u7684\u6570\u636e\uff08json\u683c\u5f0f\uff09\n     * @return\n     */\n    public static String createJWT(String subject) {\n        JwtBuilder builder = getJwtBuilder(subject, null, getUUID());// \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n        return builder.compact();\n    }\n\n    /**\n     * \u751f\u6210jtw\n     * @param subject token\u4e2d\u8981\u5b58\u653e\u7684\u6570\u636e\uff08json\u683c\u5f0f\uff09\n     * @param ttlMillis token\u8d85\u65f6\u65f6\u95f4\n     * @return\n     */\n    public static String createJWT(String subject, Long ttlMillis) {\n        JwtBuilder builder = getJwtBuilder(subject, ttlMillis, getUUID());// \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n        return builder.compact();\n    }\n\n    private static JwtBuilder getJwtBuilder(String subject, Long ttlMillis, String uuid) {\n        SignatureAlgorithm signatureAlgorithm = SignatureAlgorithm.HS256;\n        SecretKey secretKey = generalKey();\n        long nowMillis = System.currentTimeMillis();\n        Date now = new Date(nowMillis);\n        if(ttlMillis==null){\n            ttlMillis=JwtUtil.JWT_TTL;\n        }\n        long expMillis = nowMillis + ttlMillis;\n        Date expDate = new Date(expMillis);\n        return Jwts.builder()\n                .setId(uuid)              //\u552f\u4e00\u7684ID\n                .setSubject(subject)   // \u4e3b\u9898  \u53ef\u4ee5\u662fJSON\u6570\u636e\n                .setIssuer(\"sg\")     // \u7b7e\u53d1\u8005\n                .setIssuedAt(now)      // \u7b7e\u53d1\u65f6\u95f4\n                .signWith(signatureAlgorithm, secretKey) //\u4f7f\u7528HS256\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u7b7e\u540d, \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u79d8\u94a5\n                .setExpiration(expDate);\n    }\n\n    /**\n     * \u521b\u5efatoken\n     * @param id\n     * @param subject\n     * @param ttlMillis\n     * @return\n     */\n    public static String createJWT(String id, String subject, Long ttlMillis) {\n        JwtBuilder builder = getJwtBuilder(subject, ttlMillis, id);// \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n        return builder.compact();\n    }\n\n    public static void main(String[] args) throws Exception {\n        String token = \"eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJjYWM2ZDVhZi1mNjVlLTQ0MDAtYjcxMi0zYWEwOGIyOTIwYjQiLCJzdWIiOiJzZyIsImlzcyI6InNnIiwiaWF0IjoxNjM4MTA2NzEyLCJleHAiOjE2MzgxMTAzMTJ9.JVsSbkP94wuczb4QryQbAke3ysBDIL5ou8fWsbt_ebg\";\n        Claims claims = parseJWT(token);\n        System.out.println(claims);\n    }\n\n    /**\n     * \u751f\u6210\u52a0\u5bc6\u540e\u7684\u79d8\u94a5 secretKey\n     * @return\n     */\n    public static SecretKey generalKey() {\n        byte[] encodedKey = Base64.getDecoder().decode(JwtUtil.JWT_KEY);\n        SecretKey key = new SecretKeySpec(encodedKey, 0, encodedKey.length, \"AES\");\n        return key;\n    }\n\n    /**\n     * \u89e3\u6790\n     *\n     * @param jwt\n     * @return\n     * @throws Exception\n     */\n    public static Claims parseJWT(String jwt) throws Exception {\n        SecretKey secretKey = generalKey();\n        return Jwts.parser()\n                .setSigningKey(secretKey)\n                .parseClaimsJws(jwt)\n                .getBody();\n    }\n\n\n}\n</code></pre> <pre><code>import java.util.*;\nimport java.util.concurrent.TimeUnit;\n\n@SuppressWarnings(value = { \"unchecked\", \"rawtypes\" })\n@Component\npublic class RedisCache\n{\n    @Autowired\n    public RedisTemplate redisTemplate;\n\n    /**\n     * \u7f13\u5b58\u57fa\u672c\u7684\u5bf9\u8c61\uff0cInteger\u3001String\u3001\u5b9e\u4f53\u7c7b\u7b49\n     *\n     * @param key \u7f13\u5b58\u7684\u952e\u503c\n     * @param value \u7f13\u5b58\u7684\u503c\n     */\n    public &lt;T&gt; void setCacheObject(final String key, final T value)\n    {\n        redisTemplate.opsForValue().set(key, value);\n    }\n\n    /**\n     * \u7f13\u5b58\u57fa\u672c\u7684\u5bf9\u8c61\uff0cInteger\u3001String\u3001\u5b9e\u4f53\u7c7b\u7b49\n     *\n     * @param key \u7f13\u5b58\u7684\u952e\u503c\n     * @param value \u7f13\u5b58\u7684\u503c\n     * @param timeout \u65f6\u95f4\n     * @param timeUnit \u65f6\u95f4\u9897\u7c92\u5ea6\n     */\n    public &lt;T&gt; void setCacheObject(final String key, final T value, final Integer timeout, final TimeUnit timeUnit)\n    {\n        redisTemplate.opsForValue().set(key, value, timeout, timeUnit);\n    }\n\n    /**\n     * \u8bbe\u7f6e\u6709\u6548\u65f6\u95f4\n     *\n     * @param key Redis\u952e\n     * @param timeout \u8d85\u65f6\u65f6\u95f4\n     * @return true=\u8bbe\u7f6e\u6210\u529f\uff1bfalse=\u8bbe\u7f6e\u5931\u8d25\n     */\n    public boolean expire(final String key, final long timeout)\n    {\n        return expire(key, timeout, TimeUnit.SECONDS);\n    }\n\n    /**\n     * \u8bbe\u7f6e\u6709\u6548\u65f6\u95f4\n     *\n     * @param key Redis\u952e\n     * @param timeout \u8d85\u65f6\u65f6\u95f4\n     * @param unit \u65f6\u95f4\u5355\u4f4d\n     * @return true=\u8bbe\u7f6e\u6210\u529f\uff1bfalse=\u8bbe\u7f6e\u5931\u8d25\n     */\n    public boolean expire(final String key, final long timeout, final TimeUnit unit)\n    {\n        return redisTemplate.expire(key, timeout, unit);\n    }\n\n    /**\n     * \u83b7\u5f97\u7f13\u5b58\u7684\u57fa\u672c\u5bf9\u8c61\u3002\n     *\n     * @param key \u7f13\u5b58\u952e\u503c\n     * @return \u7f13\u5b58\u952e\u503c\u5bf9\u5e94\u7684\u6570\u636e\n     */\n    public &lt;T&gt; T getCacheObject(final String key)\n    {\n        ValueOperations&lt;String, T&gt; operation = redisTemplate.opsForValue();\n        return operation.get(key);\n    }\n\n    /**\n     * \u5220\u9664\u5355\u4e2a\u5bf9\u8c61\n     *\n     * @param key\n     */\n    public boolean deleteObject(final String key)\n    {\n        return redisTemplate.delete(key);\n    }\n\n    /**\n     * \u5220\u9664\u96c6\u5408\u5bf9\u8c61\n     *\n     * @param collection \u591a\u4e2a\u5bf9\u8c61\n     * @return\n     */\n    public long deleteObject(final Collection collection)\n    {\n        return redisTemplate.delete(collection);\n    }\n\n    /**\n     * \u7f13\u5b58List\u6570\u636e\n     *\n     * @param key \u7f13\u5b58\u7684\u952e\u503c\n     * @param dataList \u5f85\u7f13\u5b58\u7684List\u6570\u636e\n     * @return \u7f13\u5b58\u7684\u5bf9\u8c61\n     */\n    public &lt;T&gt; long setCacheList(final String key, final List&lt;T&gt; dataList)\n    {\n        Long count = redisTemplate.opsForList().rightPushAll(key, dataList);\n        return count == null ? 0 : count;\n    }\n\n    /**\n     * \u83b7\u5f97\u7f13\u5b58\u7684list\u5bf9\u8c61\n     *\n     * @param key \u7f13\u5b58\u7684\u952e\u503c\n     * @return \u7f13\u5b58\u952e\u503c\u5bf9\u5e94\u7684\u6570\u636e\n     */\n    public &lt;T&gt; List&lt;T&gt; getCacheList(final String key)\n    {\n        return redisTemplate.opsForList().range(key, 0, -1);\n    }\n\n    /**\n     * \u7f13\u5b58Set\n     *\n     * @param key \u7f13\u5b58\u952e\u503c\n     * @param dataSet \u7f13\u5b58\u7684\u6570\u636e\n     * @return \u7f13\u5b58\u6570\u636e\u7684\u5bf9\u8c61\n     */\n    public &lt;T&gt; BoundSetOperations&lt;String, T&gt; setCacheSet(final String key, final Set&lt;T&gt; dataSet)\n    {\n        BoundSetOperations&lt;String, T&gt; setOperation = redisTemplate.boundSetOps(key);\n        Iterator&lt;T&gt; it = dataSet.iterator();\n        while (it.hasNext())\n        {\n            setOperation.add(it.next());\n        }\n        return setOperation;\n    }\n\n    /**\n     * \u83b7\u5f97\u7f13\u5b58\u7684set\n     *\n     * @param key\n     * @return\n     */\n    public &lt;T&gt; Set&lt;T&gt; getCacheSet(final String key)\n    {\n        return redisTemplate.opsForSet().members(key);\n    }\n\n    /**\n     * \u7f13\u5b58Map\n     *\n     * @param key\n     * @param dataMap\n     */\n    public &lt;T&gt; void setCacheMap(final String key, final Map&lt;String, T&gt; dataMap)\n    {\n        if (dataMap != null) {\n            redisTemplate.opsForHash().putAll(key, dataMap);\n        }\n    }\n\n    /**\n     * \u83b7\u5f97\u7f13\u5b58\u7684Map\n     *\n     * @param key\n     * @return\n     */\n    public &lt;T&gt; Map&lt;String, T&gt; getCacheMap(final String key)\n    {\n        return redisTemplate.opsForHash().entries(key);\n    }\n\n    /**\n     * \u5f80Hash\u4e2d\u5b58\u5165\u6570\u636e\n     *\n     * @param key Redis\u952e\n     * @param hKey Hash\u952e\n     * @param value \u503c\n     */\n    public &lt;T&gt; void setCacheMapValue(final String key, final String hKey, final T value)\n    {\n        redisTemplate.opsForHash().put(key, hKey, value);\n    }\n\n    /**\n     * \u83b7\u53d6Hash\u4e2d\u7684\u6570\u636e\n     *\n     * @param key Redis\u952e\n     * @param hKey Hash\u952e\n     * @return Hash\u4e2d\u7684\u5bf9\u8c61\n     */\n    public &lt;T&gt; T getCacheMapValue(final String key, final String hKey)\n    {\n        HashOperations&lt;String, String, T&gt; opsForHash = redisTemplate.opsForHash();\n        return opsForHash.get(key, hKey);\n    }\n\n    /**\n     * \u5220\u9664Hash\u4e2d\u7684\u6570\u636e\n     * \n     * @param key\n     * @param hkey\n     */\n    public void delCacheMapValue(final String key, final String hkey)\n    {\n        HashOperations hashOperations = redisTemplate.opsForHash();\n        hashOperations.delete(key, hkey);\n    }\n\n    /**\n     * \u83b7\u53d6\u591a\u4e2aHash\u4e2d\u7684\u6570\u636e\n     *\n     * @param key Redis\u952e\n     * @param hKeys Hash\u952e\u96c6\u5408\n     * @return Hash\u5bf9\u8c61\u96c6\u5408\n     */\n    public &lt;T&gt; List&lt;T&gt; getMultiCacheMapValue(final String key, final Collection&lt;Object&gt; hKeys)\n    {\n        return redisTemplate.opsForHash().multiGet(key, hKeys);\n    }\n\n    /**\n     * \u83b7\u5f97\u7f13\u5b58\u7684\u57fa\u672c\u5bf9\u8c61\u5217\u8868\n     *\n     * @param pattern \u5b57\u7b26\u4e32\u524d\u7f00\n     * @return \u5bf9\u8c61\u5217\u8868\n     */\n    public Collection&lt;String&gt; keys(final String pattern)\n    {\n        return redisTemplate.keys(pattern);\n    }\n}\n</code></pre> <pre><code>import javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\npublic class WebUtils\n{\n    /**\n     * \u5c06\u5b57\u7b26\u4e32\u6e32\u67d3\u5230\u5ba2\u6237\u7aef\n     * \n     * @param response \u6e32\u67d3\u5bf9\u8c61\n     * @param string \u5f85\u6e32\u67d3\u7684\u5b57\u7b26\u4e32\n     * @return null\n     */\n    public static String renderString(HttpServletResponse response, String string) {\n        try\n        {\n            response.setStatus(200);\n            response.setContentType(\"application/json\");\n            response.setCharacterEncoding(\"utf-8\");\n            response.getWriter().print(string);\n        }\n        catch (IOException e)\n        {\n            e.printStackTrace();\n        }\n        return null;\n    }\n}\n</code></pre> <p>\u2464\u5b9e\u4f53\u7c7b</p> <pre><code>import java.io.Serializable;\nimport java.util.Date;\n\n\n/**\n * \u7528\u6237\u8868(User)\u5b9e\u4f53\u7c7b\n *\n * @author \u4e09\u66f4\n */\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class User implements Serializable {\n    private static final long serialVersionUID = -40356785423868312L;\n\n    /**\n    * \u4e3b\u952e\n    */\n    private Long id;\n    /**\n    * \u7528\u6237\u540d\n    */\n    private String userName;\n    /**\n    * \u6635\u79f0\n    */\n    private String nickName;\n    /**\n    * \u5bc6\u7801\n    */\n    private String password;\n    /**\n    * \u8d26\u53f7\u72b6\u6001\uff080\u6b63\u5e38 1\u505c\u7528\uff09\n    */\n    private String status;\n    /**\n    * \u90ae\u7bb1\n    */\n    private String email;\n    /**\n    * \u624b\u673a\u53f7\n    */\n    private String phonenumber;\n    /**\n    * \u7528\u6237\u6027\u522b\uff080\u7537\uff0c1\u5973\uff0c2\u672a\u77e5\uff09\n    */\n    private String sex;\n    /**\n    * \u5934\u50cf\n    */\n    private String avatar;\n    /**\n    * \u7528\u6237\u7c7b\u578b\uff080\u7ba1\u7406\u5458\uff0c1\u666e\u901a\u7528\u6237\uff09\n    */\n    private String userType;\n    /**\n    * \u521b\u5efa\u4eba\u7684\u7528\u6237id\n    */\n    private Long createBy;\n    /**\n    * \u521b\u5efa\u65f6\u95f4\n    */\n    private Date createTime;\n    /**\n    * \u66f4\u65b0\u4eba\n    */\n    private Long updateBy;\n    /**\n    * \u66f4\u65b0\u65f6\u95f4\n    */\n    private Date updateTime;\n    /**\n    * \u5220\u9664\u6807\u5fd7\uff080\u4ee3\u8868\u672a\u5220\u9664\uff0c1\u4ee3\u8868\u5df2\u5220\u9664\uff09\n    */\n    private Integer delFlag;\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#233","title":"2.3.3 \u5b9e\u73b0","text":""},{"location":"Java/SpringSecurity/SpringSecurity/#2331","title":"2.3.3.1 \u6570\u636e\u5e93\u6821\u9a8c\u7528\u6237","text":"<p>\u200b   \u4ece\u4e4b\u524d\u7684\u5206\u6790\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c\u6211\u4eec\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e2aUserDetailsService,\u8ba9SpringSecurity\u4f7f\u7528\u6211\u4eec\u7684UserDetailsService\u3002\u6211\u4eec\u81ea\u5df1\u7684UserDetailsService\u53ef\u4ee5\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</p>"},{"location":"Java/SpringSecurity/SpringSecurity/#_2","title":"\u51c6\u5907\u5de5\u4f5c","text":"<p>\u200b   \u6211\u4eec\u5148\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u8868\uff0c \u5efa\u8868\u8bed\u53e5\u5982\u4e0b\uff1a</p> <pre><code>CREATE TABLE `sys_user` (\n  `id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT '\u4e3b\u952e',\n  `user_name` VARCHAR(64) NOT NULL DEFAULT 'NULL' COMMENT '\u7528\u6237\u540d',\n  `nick_name` VARCHAR(64) NOT NULL DEFAULT 'NULL' COMMENT '\u6635\u79f0',\n  `password` VARCHAR(64) NOT NULL DEFAULT 'NULL' COMMENT '\u5bc6\u7801',\n  `status` CHAR(1) DEFAULT '0' COMMENT '\u8d26\u53f7\u72b6\u6001\uff080\u6b63\u5e38 1\u505c\u7528\uff09',\n  `email` VARCHAR(64) DEFAULT NULL COMMENT '\u90ae\u7bb1',\n  `phonenumber` VARCHAR(32) DEFAULT NULL COMMENT '\u624b\u673a\u53f7',\n  `sex` CHAR(1) DEFAULT NULL COMMENT '\u7528\u6237\u6027\u522b\uff080\u7537\uff0c1\u5973\uff0c2\u672a\u77e5\uff09',\n  `avatar` VARCHAR(128) DEFAULT NULL COMMENT '\u5934\u50cf',\n  `user_type` CHAR(1) NOT NULL DEFAULT '1' COMMENT '\u7528\u6237\u7c7b\u578b\uff080\u7ba1\u7406\u5458\uff0c1\u666e\u901a\u7528\u6237\uff09',\n  `create_by` BIGINT(20) DEFAULT NULL COMMENT '\u521b\u5efa\u4eba\u7684\u7528\u6237id',\n  `create_time` DATETIME DEFAULT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\n  `update_by` BIGINT(20) DEFAULT NULL COMMENT '\u66f4\u65b0\u4eba',\n  `update_time` DATETIME DEFAULT NULL COMMENT '\u66f4\u65b0\u65f6\u95f4',\n  `del_flag` INT(11) DEFAULT '0' COMMENT '\u5220\u9664\u6807\u5fd7\uff080\u4ee3\u8868\u672a\u5220\u9664\uff0c1\u4ee3\u8868\u5df2\u5220\u9664\uff09',\n  PRIMARY KEY (`id`)\n) ENGINE=INNODB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COMMENT='\u7528\u6237\u8868'\n</code></pre> <p>\u200b       \u5f15\u5165MybatisPuls\u548cmysql\u9a71\u52a8\u7684\u4f9d\u8d56</p> <pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;\n            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.4.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>\u200b       \u914d\u7f6e\u6570\u636e\u5e93\u4fe1\u606f</p> <pre><code>spring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/sg_security?characterEncoding=utf-8&amp;serverTimezone=UTC\n    username: root\n    password: root\n    driver-class-name: com.mysql.cj.jdbc.Driver\n</code></pre> <p>\u200b       \u5b9a\u4e49Mapper\u63a5\u53e3</p> <pre><code>public interface UserMapper extends BaseMapper&lt;User&gt; {\n}\n</code></pre> <p>\u200b       \u4fee\u6539User\u5b9e\u4f53\u7c7b</p> <pre><code>\u7c7b\u540d\u4e0a\u52a0@TableName(value = \"sys_user\") ,id\u5b57\u6bb5\u4e0a\u52a0 @TableId\n</code></pre> <p>\u200b       \u914d\u7f6eMapper\u626b\u63cf</p> <pre><code>@SpringBootApplication\n@MapperScan(\"com.sangeng.mapper\")\npublic class SimpleSecurityApplication {\n    public static void main(String[] args) {\n        ConfigurableApplicationContext run = SpringApplication.run(SimpleSecurityApplication.class);\n        System.out.println(run);\n    }\n}\n</code></pre> <p>\u200b       \u6dfb\u52a0junit\u4f9d\u8d56</p> <pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre> <p>\u200b      \u6d4b\u8bd5MP\u662f\u5426\u80fd\u6b63\u5e38\u4f7f\u7528</p> <pre><code>/**\n * @Author \u4e09\u66f4  B\u7ad9\uff1a https://space.bilibili.com/663528522\n */\n@SpringBootTest\npublic class MapperTest {\n\n    @Autowired\n    private UserMapper userMapper;\n\n    @Test\n    public void testUserMapper(){\n        List&lt;User&gt; users = userMapper.selectList(null);\n        System.out.println(users);\n    }\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#_3","title":"\u6838\u5fc3\u4ee3\u7801\u5b9e\u73b0","text":"<p>\u521b\u5efa\u4e00\u4e2a\u7c7b\u5b9e\u73b0UserDetailsService\u63a5\u53e3\uff0c\u91cd\u5199\u5176\u4e2d\u7684\u65b9\u6cd5\u3002\u66f4\u52a0\u7528\u6237\u540d\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u7528\u6237\u4fe1\u606f</p> <pre><code>/**\n * @Author \u4e09\u66f4  B\u7ad9\uff1a https://space.bilibili.com/663528522\n */\n@Service\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    @Autowired\n    private UserMapper userMapper;\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        //\u6839\u636e\u7528\u6237\u540d\u67e5\u8be2\u7528\u6237\u4fe1\u606f\n        LambdaQueryWrapper&lt;User&gt; wrapper = new LambdaQueryWrapper&lt;&gt;();\n        wrapper.eq(User::getUserName,username);\n        User user = userMapper.selectOne(wrapper);\n        //\u5982\u679c\u67e5\u8be2\u4e0d\u5230\u6570\u636e\u5c31\u901a\u8fc7\u629b\u51fa\u5f02\u5e38\u6765\u7ed9\u51fa\u63d0\u793a\n        if(Objects.isNull(user)){\n            throw new RuntimeException(\"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\");\n        }\n        //TODO \u6839\u636e\u7528\u6237\u67e5\u8be2\u6743\u9650\u4fe1\u606f \u6dfb\u52a0\u5230LoginUser\u4e2d\n\n        //\u5c01\u88c5\u6210UserDetails\u5bf9\u8c61\u8fd4\u56de \n        return new LoginUser(user);\n    }\n}\n</code></pre> <p>\u56e0\u4e3aUserDetailsService\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u662fUserDetails\u7c7b\u578b\uff0c\u6240\u4ee5\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u7c7b\uff0c\u5b9e\u73b0\u8be5\u63a5\u53e3\uff0c\u628a\u7528\u6237\u4fe1\u606f\u5c01\u88c5\u5728\u5176\u4e2d\u3002</p> <pre><code>/**\n * @Author \u4e09\u66f4  B\u7ad9\uff1a https://space.bilibili.com/663528522\n */\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class LoginUser implements UserDetails {\n\n    private User user;\n\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return null;\n    }\n\n    @Override\n    public String getPassword() {\n        return user.getPassword();\n    }\n\n    @Override\n    public String getUsername() {\n        return user.getUserName();\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n</code></pre> <p>\u6ce8\u610f\uff1a\u5982\u679c\u8981\u6d4b\u8bd5\uff0c\u9700\u8981\u5f80\u7528\u6237\u8868\u4e2d\u5199\u5165\u7528\u6237\u6570\u636e\uff0c\u5e76\u4e14\u5982\u679c\u4f60\u60f3\u8ba9\u7528\u6237\u7684\u5bc6\u7801\u662f\u660e\u6587\u5b58\u50a8\uff0c\u9700\u8981\u5728\u5bc6\u7801\u524d\u52a0{noop}\u3002\u4f8b\u5982</p> <p></p> <p>\u8fd9\u6837\u767b\u9646\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u7528sg\u4f5c\u4e3a\u7528\u6237\u540d\uff0c1234\u4f5c\u4e3a\u5bc6\u7801\u6765\u767b\u9646\u4e86\u3002</p>"},{"location":"Java/SpringSecurity/SpringSecurity/#2332","title":"2.3.3.2 \u5bc6\u7801\u52a0\u5bc6\u5b58\u50a8","text":"<p>\u200b   \u5b9e\u9645\u9879\u76ee\u4e2d\u6211\u4eec\u4e0d\u4f1a\u628a\u5bc6\u7801\u660e\u6587\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002</p> <p>\u200b   \u9ed8\u8ba4\u4f7f\u7528\u7684PasswordEncoder\u8981\u6c42\u6570\u636e\u5e93\u4e2d\u7684\u5bc6\u7801\u683c\u5f0f\u4e3a\uff1a{id}password \u3002\u5b83\u4f1a\u6839\u636eid\u53bb\u5224\u65ad\u5bc6\u7801\u7684\u52a0\u5bc6\u65b9\u5f0f\u3002\u4f46\u662f\u6211\u4eec\u4e00\u822c\u4e0d\u4f1a\u91c7\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002\u6240\u4ee5\u5c31\u9700\u8981\u66ff\u6362PasswordEncoder\u3002</p> <p>\u200b   \u6211\u4eec\u4e00\u822c\u4f7f\u7528SpringSecurity\u4e3a\u6211\u4eec\u63d0\u4f9b\u7684BCryptPasswordEncoder\u3002</p> <p>\u200b   \u6211\u4eec\u53ea\u9700\u8981\u4f7f\u7528\u628aBCryptPasswordEncoder\u5bf9\u8c61\u6ce8\u5165Spring\u5bb9\u5668\u4e2d\uff0cSpringSecurity\u5c31\u4f1a\u4f7f\u7528\u8be5PasswordEncoder\u6765\u8fdb\u884c\u5bc6\u7801\u6821\u9a8c\u3002</p> <p>\u200b   \u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2aSpringSecurity\u7684\u914d\u7f6e\u7c7b\uff0cSpringSecurity\u8981\u6c42\u8fd9\u4e2a\u914d\u7f6e\u7c7b\u8981\u7ee7\u627fWebSecurityConfigurerAdapter\u3002</p> <pre><code>@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#2333","title":"2.3.3.3 \u767b\u9646\u63a5\u53e3","text":"<p>\u200b   \u63a5\u4e0b\u6211\u4eec\u9700\u8981\u81ea\u5b9a\u4e49\u767b\u9646\u63a5\u53e3\uff0c\u7136\u540e\u8ba9SpringSecurity\u5bf9\u8fd9\u4e2a\u63a5\u53e3\u653e\u884c,\u8ba9\u7528\u6237\u8bbf\u95ee\u8fd9\u4e2a\u63a5\u53e3\u7684\u65f6\u5019\u4e0d\u7528\u767b\u5f55\u4e5f\u80fd\u8bbf\u95ee\u3002</p> <p>\u200b   \u5728\u63a5\u53e3\u4e2d\u6211\u4eec\u901a\u8fc7AuthenticationManager\u7684authenticate\u65b9\u6cd5\u6765\u8fdb\u884c\u7528\u6237\u8ba4\u8bc1,\u6240\u4ee5\u9700\u8981\u5728SecurityConfig\u4e2d\u914d\u7f6e\u628aAuthenticationManager\u6ce8\u5165\u5bb9\u5668\u3002</p> <p>\u200b   \u8ba4\u8bc1\u6210\u529f\u7684\u8bdd\u8981\u751f\u6210\u4e00\u4e2ajwt\uff0c\u653e\u5165\u54cd\u5e94\u4e2d\u8fd4\u56de\u3002\u5e76\u4e14\u4e3a\u4e86\u8ba9\u7528\u6237\u4e0b\u56de\u8bf7\u6c42\u65f6\u80fd\u901a\u8fc7jwt\u8bc6\u522b\u51fa\u5177\u4f53\u7684\u662f\u54ea\u4e2a\u7528\u6237\uff0c\u6211\u4eec\u9700\u8981\u628a\u7528\u6237\u4fe1\u606f\u5b58\u5165redis\uff0c\u53ef\u4ee5\u628a\u7528\u6237id\u4f5c\u4e3akey\u3002</p> <pre><code>@RestController\npublic class LoginController {\n\n    @Autowired\n    private LoginServcie loginServcie;\n\n    @PostMapping(\"/user/login\")\n    public ResponseResult login(@RequestBody User user){\n        return loginServcie.login(user);\n    }\n}\n</code></pre> <pre><code>@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                //\u5173\u95edcsrf\n                .csrf().disable()\n                //\u4e0d\u901a\u8fc7Session\u83b7\u53d6SecurityContext\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeRequests()\n                // \u5bf9\u4e8e\u767b\u5f55\u63a5\u53e3 \u5141\u8bb8\u533f\u540d\u8bbf\u95ee\n                .antMatchers(\"/user/login\").anonymous()\n                // \u9664\u4e0a\u9762\u5916\u7684\u6240\u6709\u8bf7\u6c42\u5168\u90e8\u9700\u8981\u9274\u6743\u8ba4\u8bc1\n                .anyRequest().authenticated();\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n}\n</code></pre> <p>\u200b   </p> <pre><code>@Service\npublic class LoginServiceImpl implements LoginServcie {\n\n    @Autowired\n    private AuthenticationManager authenticationManager;\n    @Autowired\n    private RedisCache redisCache;\n\n    @Override\n    public ResponseResult login(User user) {\n        UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(user.getUserName(),user.getPassword());\n        Authentication authenticate = authenticationManager.authenticate(authenticationToken);\n        if(Objects.isNull(authenticate)){\n            throw new RuntimeException(\"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\");\n        }\n        //\u4f7f\u7528userid\u751f\u6210token\n        LoginUser loginUser = (LoginUser) authenticate.getPrincipal();\n        String userId = loginUser.getUser().getId().toString();\n        String jwt = JwtUtil.createJWT(userId);\n        //authenticate\u5b58\u5165redis\n        redisCache.setCacheObject(\"login:\"+userId,loginUser);\n        //\u628atoken\u54cd\u5e94\u7ed9\u524d\u7aef\n        HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;();\n        map.put(\"token\",jwt);\n        return new ResponseResult(200,\"\u767b\u9646\u6210\u529f\",map);\n    }\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#2334","title":"2.3.3.4 \u8ba4\u8bc1\u8fc7\u6ee4\u5668","text":"<p>\u200b   \u6211\u4eec\u9700\u8981\u81ea\u5b9a\u4e49\u4e00\u4e2a\u8fc7\u6ee4\u5668\uff0c\u8fd9\u4e2a\u8fc7\u6ee4\u5668\u4f1a\u53bb\u83b7\u53d6\u8bf7\u6c42\u5934\u4e2d\u7684token\uff0c\u5bf9token\u8fdb\u884c\u89e3\u6790\u53d6\u51fa\u5176\u4e2d\u7684userid\u3002</p> <p>\u200b   \u4f7f\u7528userid\u53bbredis\u4e2d\u83b7\u53d6\u5bf9\u5e94\u7684LoginUser\u5bf9\u8c61\u3002</p> <p>\u200b   \u7136\u540e\u5c01\u88c5Authentication\u5bf9\u8c61\u5b58\u5165SecurityContextHolder</p> <pre><code>@Component\npublic class JwtAuthenticationTokenFilter extends OncePerRequestFilter {\n\n    @Autowired\n    private RedisCache redisCache;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        //\u83b7\u53d6token\n        String token = request.getHeader(\"token\");\n        if (!StringUtils.hasText(token)) {\n            //\u653e\u884c\n            filterChain.doFilter(request, response);\n            return;\n        }\n        //\u89e3\u6790token\n        String userid;\n        try {\n            Claims claims = JwtUtil.parseJWT(token);\n            userid = claims.getSubject();\n        } catch (Exception e) {\n            e.printStackTrace();\n            throw new RuntimeException(\"token\u975e\u6cd5\");\n        }\n        //\u4eceredis\u4e2d\u83b7\u53d6\u7528\u6237\u4fe1\u606f\n        String redisKey = \"login:\" + userid;\n        LoginUser loginUser = redisCache.getCacheObject(redisKey);\n        if(Objects.isNull(loginUser)){\n            throw new RuntimeException(\"\u7528\u6237\u672a\u767b\u5f55\");\n        }\n        //\u5b58\u5165SecurityContextHolder\n        //TODO \u83b7\u53d6\u6743\u9650\u4fe1\u606f\u5c01\u88c5\u5230Authentication\u4e2d\n        UsernamePasswordAuthenticationToken authenticationToken =\n                new UsernamePasswordAuthenticationToken(loginUser,null,null);\n        SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n        //\u653e\u884c\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre> <pre><code>@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n\n\n    @Autowired\n    JwtAuthenticationTokenFilter jwtAuthenticationTokenFilter;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                //\u5173\u95edcsrf\n                .csrf().disable()\n                //\u4e0d\u901a\u8fc7Session\u83b7\u53d6SecurityContext\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeRequests()\n                // \u5bf9\u4e8e\u767b\u5f55\u63a5\u53e3 \u5141\u8bb8\u533f\u540d\u8bbf\u95ee\n                .antMatchers(\"/user/login\").anonymous()\n                // \u9664\u4e0a\u9762\u5916\u7684\u6240\u6709\u8bf7\u6c42\u5168\u90e8\u9700\u8981\u9274\u6743\u8ba4\u8bc1\n                .anyRequest().authenticated();\n\n        //\u628atoken\u6821\u9a8c\u8fc7\u6ee4\u5668\u6dfb\u52a0\u5230\u8fc7\u6ee4\u5668\u94fe\u4e2d\n        http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#2335","title":"2.3.3.5 \u9000\u51fa\u767b\u9646","text":"<p>\u200b   \u6211\u4eec\u53ea\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u767b\u9646\u63a5\u53e3\uff0c\u7136\u540e\u83b7\u53d6SecurityContextHolder\u4e2d\u7684\u8ba4\u8bc1\u4fe1\u606f\uff0c\u5220\u9664redis\u4e2d\u5bf9\u5e94\u7684\u6570\u636e\u5373\u53ef\u3002</p> <pre><code>@Service\npublic class LoginServiceImpl implements LoginServcie {\n\n    @Autowired\n    private AuthenticationManager authenticationManager;\n    @Autowired\n    private RedisCache redisCache;\n\n    @Override\n    public ResponseResult login(User user) {\n        UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(user.getUserName(),user.getPassword());\n        Authentication authenticate = authenticationManager.authenticate(authenticationToken);\n        if(Objects.isNull(authenticate)){\n            throw new RuntimeException(\"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\");\n        }\n        //\u4f7f\u7528userid\u751f\u6210token\n        LoginUser loginUser = (LoginUser) authenticate.getPrincipal();\n        String userId = loginUser.getUser().getId().toString();\n        String jwt = JwtUtil.createJWT(userId);\n        //authenticate\u5b58\u5165redis\n        redisCache.setCacheObject(\"login:\"+userId,loginUser);\n        //\u628atoken\u54cd\u5e94\u7ed9\u524d\u7aef\n        HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;();\n        map.put(\"token\",jwt);\n        return new ResponseResult(200,\"\u767b\u9646\u6210\u529f\",map);\n    }\n\n    @Override\n    public ResponseResult logout() {\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        LoginUser loginUser = (LoginUser) authentication.getPrincipal();\n        Long userid = loginUser.getUser().getId();\n        redisCache.deleteObject(\"login:\"+userid);\n        return new ResponseResult(200,\"\u9000\u51fa\u6210\u529f\");\n    }\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#3","title":"3. \u6388\u6743","text":""},{"location":"Java/SpringSecurity/SpringSecurity/#30","title":"3.0 \u6743\u9650\u7cfb\u7edf\u7684\u4f5c\u7528","text":"<p>\u200b   \u4f8b\u5982\u4e00\u4e2a\u5b66\u6821\u56fe\u4e66\u9986\u7684\u7ba1\u7406\u7cfb\u7edf\uff0c\u5982\u679c\u662f\u666e\u901a\u5b66\u751f\u767b\u5f55\u5c31\u80fd\u770b\u5230\u501f\u4e66\u8fd8\u4e66\u76f8\u5173\u7684\u529f\u80fd\uff0c\u4e0d\u53ef\u80fd\u8ba9\u4ed6\u770b\u5230\u5e76\u4e14\u53bb\u4f7f\u7528\u6dfb\u52a0\u4e66\u7c4d\u4fe1\u606f\uff0c\u5220\u9664\u4e66\u7c4d\u4fe1\u606f\u7b49\u529f\u80fd\u3002\u4f46\u662f\u5982\u679c\u662f\u4e00\u4e2a\u56fe\u4e66\u9986\u7ba1\u7406\u5458\u7684\u8d26\u53f7\u767b\u5f55\u4e86\uff0c\u5e94\u8be5\u5c31\u80fd\u770b\u5230\u5e76\u4f7f\u7528\u6dfb\u52a0\u4e66\u7c4d\u4fe1\u606f\uff0c\u5220\u9664\u4e66\u7c4d\u4fe1\u606f\u7b49\u529f\u80fd\u3002</p> <p>\u200b   \u603b\u7ed3\u8d77\u6765\u5c31\u662f\u4e0d\u540c\u7684\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u529f\u80fd\u3002\u8fd9\u5c31\u662f\u6743\u9650\u7cfb\u7edf\u8981\u53bb\u5b9e\u73b0\u7684\u6548\u679c\u3002</p> <p>\u200b   \u6211\u4eec\u4e0d\u80fd\u53ea\u4f9d\u8d56\u524d\u7aef\u53bb\u5224\u65ad\u7528\u6237\u7684\u6743\u9650\u6765\u9009\u62e9\u663e\u793a\u54ea\u4e9b\u83dc\u5355\u54ea\u4e9b\u6309\u94ae\u3002\u56e0\u4e3a\u5982\u679c\u53ea\u662f\u8fd9\u6837\uff0c\u5982\u679c\u6709\u4eba\u77e5\u9053\u4e86\u5bf9\u5e94\u529f\u80fd\u7684\u63a5\u53e3\u5730\u5740\u5c31\u53ef\u4ee5\u4e0d\u901a\u8fc7\u524d\u7aef\uff0c\u76f4\u63a5\u53bb\u53d1\u9001\u8bf7\u6c42\u6765\u5b9e\u73b0\u76f8\u5173\u529f\u80fd\u64cd\u4f5c\u3002</p> <p>\u200b   \u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u5728\u540e\u53f0\u8fdb\u884c\u7528\u6237\u6743\u9650\u7684\u5224\u65ad\uff0c\u5224\u65ad\u5f53\u524d\u7528\u6237\u662f\u5426\u6709\u76f8\u5e94\u7684\u6743\u9650\uff0c\u5fc5\u987b\u5177\u6709\u6240\u9700\u6743\u9650\u624d\u80fd\u8fdb\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\u3002</p> <p>\u200b   </p>"},{"location":"Java/SpringSecurity/SpringSecurity/#31","title":"3.1 \u6388\u6743\u57fa\u672c\u6d41\u7a0b","text":"<p>\u200b   \u5728SpringSecurity\u4e2d\uff0c\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u7684FilterSecurityInterceptor\u6765\u8fdb\u884c\u6743\u9650\u6821\u9a8c\u3002\u5728FilterSecurityInterceptor\u4e2d\u4f1a\u4eceSecurityContextHolder\u83b7\u53d6\u5176\u4e2d\u7684Authentication\uff0c\u7136\u540e\u83b7\u53d6\u5176\u4e2d\u7684\u6743\u9650\u4fe1\u606f\u3002\u5f53\u524d\u7528\u6237\u662f\u5426\u62e5\u6709\u8bbf\u95ee\u5f53\u524d\u8d44\u6e90\u6240\u9700\u7684\u6743\u9650\u3002</p> <p>\u200b   \u6240\u4ee5\u6211\u4eec\u5728\u9879\u76ee\u4e2d\u53ea\u9700\u8981\u628a\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u6743\u9650\u4fe1\u606f\u4e5f\u5b58\u5165Authentication\u3002</p> <p>\u200b   \u7136\u540e\u8bbe\u7f6e\u6211\u4eec\u7684\u8d44\u6e90\u6240\u9700\u8981\u7684\u6743\u9650\u5373\u53ef\u3002</p>"},{"location":"Java/SpringSecurity/SpringSecurity/#32","title":"3.2 \u6388\u6743\u5b9e\u73b0","text":""},{"location":"Java/SpringSecurity/SpringSecurity/#321","title":"3.2.1 \u9650\u5236\u8bbf\u95ee\u8d44\u6e90\u6240\u9700\u6743\u9650","text":"<p>\u200b   SpringSecurity\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u57fa\u4e8e\u6ce8\u89e3\u7684\u6743\u9650\u63a7\u5236\u65b9\u6848\uff0c\u8fd9\u4e5f\u662f\u6211\u4eec\u9879\u76ee\u4e2d\u4e3b\u8981\u91c7\u7528\u7684\u65b9\u5f0f\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6ce8\u89e3\u53bb\u6307\u5b9a\u8bbf\u95ee\u5bf9\u5e94\u7684\u8d44\u6e90\u6240\u9700\u7684\u6743\u9650\u3002</p> <p>\u200b   \u4f46\u662f\u8981\u4f7f\u7528\u5b83\u6211\u4eec\u9700\u8981\u5148\u5f00\u542f\u76f8\u5173\u914d\u7f6e\u3002</p> <pre><code>@EnableGlobalMethodSecurity(prePostEnabled = true)\n</code></pre> <p>\u200b   \u7136\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528\u5bf9\u5e94\u7684\u6ce8\u89e3\u3002@PreAuthorize</p> <pre><code>@RestController\npublic class HelloController {\n\n    @RequestMapping(\"/hello\")\n    @PreAuthorize(\"hasAuthority('test')\")\n    public String hello(){\n        return \"hello\";\n    }\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#322","title":"3.2.2 \u5c01\u88c5\u6743\u9650\u4fe1\u606f","text":"<p>\u200b   \u6211\u4eec\u524d\u9762\u5728\u5199UserDetailsServiceImpl\u7684\u65f6\u5019\u8bf4\u8fc7\uff0c\u5728\u67e5\u8be2\u51fa\u7528\u6237\u540e\u8fd8\u8981\u83b7\u53d6\u5bf9\u5e94\u7684\u6743\u9650\u4fe1\u606f\uff0c\u5c01\u88c5\u5230UserDetails\u4e2d\u8fd4\u56de\u3002</p> <p>\u200b   \u6211\u4eec\u5148\u76f4\u63a5\u628a\u6743\u9650\u4fe1\u606f\u5199\u6b7b\u5c01\u88c5\u5230UserDetails\u4e2d\u8fdb\u884c\u6d4b\u8bd5\u3002</p> <p>\u200b   \u6211\u4eec\u4e4b\u524d\u5b9a\u4e49\u4e86UserDetails\u7684\u5b9e\u73b0\u7c7bLoginUser\uff0c\u60f3\u8981\u8ba9\u5176\u80fd\u5c01\u88c5\u6743\u9650\u4fe1\u606f\u5c31\u8981\u5bf9\u5176\u8fdb\u884c\u4fee\u6539\u3002</p> <pre><code>package com.sangeng.domain;\n\nimport com.alibaba.fastjson.annotation.JSONField;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n\n@Data\n@NoArgsConstructor\npublic class LoginUser implements UserDetails {\n\n    private User user;\n\n    //\u5b58\u50a8\u6743\u9650\u4fe1\u606f\n    private List&lt;String&gt; permissions;\n\n\n    public LoginUser(User user,List&lt;String&gt; permissions) {\n        this.user = user;\n        this.permissions = permissions;\n    }\n\n\n    //\u5b58\u50a8SpringSecurity\u6240\u9700\u8981\u7684\u6743\u9650\u4fe1\u606f\u7684\u96c6\u5408\n    @JSONField(serialize = false)\n    private List&lt;GrantedAuthority&gt; authorities;\n\n    @Override\n    public  Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        if(authorities!=null){\n            return authorities;\n        }\n        //\u628apermissions\u4e2d\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u6743\u9650\u4fe1\u606f\u8f6c\u6362\u6210GrantedAuthority\u5bf9\u8c61\u5b58\u5165authorities\u4e2d\n        authorities = permissions.stream().\n                map(SimpleGrantedAuthority::new)\n                .collect(Collectors.toList());\n        return authorities;\n    }\n\n    @Override\n    public String getPassword() {\n        return user.getPassword();\n    }\n\n    @Override\n    public String getUsername() {\n        return user.getUserName();\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n</code></pre> <p>\u200b       LoginUser\u4fee\u6539\u5b8c\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5728UserDetailsServiceImpl\u4e2d\u53bb\u628a\u6743\u9650\u4fe1\u606f\u5c01\u88c5\u5230LoginUser\u4e2d\u4e86\u3002\u6211\u4eec\u5199\u6b7b\u6743\u9650\u8fdb\u884c\u6d4b\u8bd5\uff0c\u540e\u9762\u6211\u4eec\u518d\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u6743\u9650\u4fe1\u606f\u3002</p> <pre><code>package com.sangeng.service.impl;\n\nimport com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\nimport com.baomidou.mybatisplus.extension.conditions.query.LambdaQueryChainWrapper;\nimport com.sangeng.domain.LoginUser;\nimport com.sangeng.domain.User;\nimport com.sangeng.mapper.UserMapper;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Objects;\n\n\n@Service\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    @Autowired\n    private UserMapper userMapper;\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        LambdaQueryWrapper&lt;User&gt; wrapper = new LambdaQueryWrapper&lt;&gt;();\n        wrapper.eq(User::getUserName,username);\n        User user = userMapper.selectOne(wrapper);\n        if(Objects.isNull(user)){\n            throw new RuntimeException(\"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\");\n        }\n        //TODO \u6839\u636e\u7528\u6237\u67e5\u8be2\u6743\u9650\u4fe1\u606f \u6dfb\u52a0\u5230LoginUser\u4e2d\n        List&lt;String&gt; list = new ArrayList&lt;&gt;(Arrays.asList(\"test\"));\n        return new LoginUser(user,list);\n    }\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#323","title":"3.2.3 \u4ece\u6570\u636e\u5e93\u67e5\u8be2\u6743\u9650\u4fe1\u606f","text":""},{"location":"Java/SpringSecurity/SpringSecurity/#3231-rbac","title":"3.2.3.1 RBAC\u6743\u9650\u6a21\u578b","text":"<p>\u200b   RBAC\u6743\u9650\u6a21\u578b\uff08Role-Based Access Control\uff09\u5373\uff1a\u57fa\u4e8e\u89d2\u8272\u7684\u6743\u9650\u63a7\u5236\u3002\u8fd9\u662f\u76ee\u524d\u6700\u5e38\u88ab\u5f00\u53d1\u8005\u4f7f\u7528\u4e5f\u662f\u76f8\u5bf9\u6613\u7528\u3001\u901a\u7528\u6743\u9650\u6a21\u578b\u3002</p> <p>\u200b   </p>"},{"location":"Java/SpringSecurity/SpringSecurity/#3232","title":"3.2.3.2 \u51c6\u5907\u5de5\u4f5c","text":"<pre><code>CREATE DATABASE /*!32312 IF NOT EXISTS*/`sg_security` /*!40100 DEFAULT CHARACTER SET utf8mb4 */;\n\nUSE `sg_security`;\n\n/*Table structure for table `sys_menu` */\n\nDROP TABLE IF EXISTS `sys_menu`;\n\nCREATE TABLE `sys_menu` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `menu_name` varchar(64) NOT NULL DEFAULT 'NULL' COMMENT '\u83dc\u5355\u540d',\n  `path` varchar(200) DEFAULT NULL COMMENT '\u8def\u7531\u5730\u5740',\n  `component` varchar(255) DEFAULT NULL COMMENT '\u7ec4\u4ef6\u8def\u5f84',\n  `visible` char(1) DEFAULT '0' COMMENT '\u83dc\u5355\u72b6\u6001\uff080\u663e\u793a 1\u9690\u85cf\uff09',\n  `status` char(1) DEFAULT '0' COMMENT '\u83dc\u5355\u72b6\u6001\uff080\u6b63\u5e38 1\u505c\u7528\uff09',\n  `perms` varchar(100) DEFAULT NULL COMMENT '\u6743\u9650\u6807\u8bc6',\n  `icon` varchar(100) DEFAULT '#' COMMENT '\u83dc\u5355\u56fe\u6807',\n  `create_by` bigint(20) DEFAULT NULL,\n  `create_time` datetime DEFAULT NULL,\n  `update_by` bigint(20) DEFAULT NULL,\n  `update_time` datetime DEFAULT NULL,\n  `del_flag` int(11) DEFAULT '0' COMMENT '\u662f\u5426\u5220\u9664\uff080\u672a\u5220\u9664 1\u5df2\u5220\u9664\uff09',\n  `remark` varchar(500) DEFAULT NULL COMMENT '\u5907\u6ce8',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COMMENT='\u83dc\u5355\u8868';\n\n/*Table structure for table `sys_role` */\n\nDROP TABLE IF EXISTS `sys_role`;\n\nCREATE TABLE `sys_role` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `name` varchar(128) DEFAULT NULL,\n  `role_key` varchar(100) DEFAULT NULL COMMENT '\u89d2\u8272\u6743\u9650\u5b57\u7b26\u4e32',\n  `status` char(1) DEFAULT '0' COMMENT '\u89d2\u8272\u72b6\u6001\uff080\u6b63\u5e38 1\u505c\u7528\uff09',\n  `del_flag` int(1) DEFAULT '0' COMMENT 'del_flag',\n  `create_by` bigint(200) DEFAULT NULL,\n  `create_time` datetime DEFAULT NULL,\n  `update_by` bigint(200) DEFAULT NULL,\n  `update_time` datetime DEFAULT NULL,\n  `remark` varchar(500) DEFAULT NULL COMMENT '\u5907\u6ce8',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COMMENT='\u89d2\u8272\u8868';\n\n/*Table structure for table `sys_role_menu` */\n\nDROP TABLE IF EXISTS `sys_role_menu`;\n\nCREATE TABLE `sys_role_menu` (\n  `role_id` bigint(200) NOT NULL AUTO_INCREMENT COMMENT '\u89d2\u8272ID',\n  `menu_id` bigint(200) NOT NULL DEFAULT '0' COMMENT '\u83dc\u5355id',\n  PRIMARY KEY (`role_id`,`menu_id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4;\n\n/*Table structure for table `sys_user` */\n\nDROP TABLE IF EXISTS `sys_user`;\n\nCREATE TABLE `sys_user` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '\u4e3b\u952e',\n  `user_name` varchar(64) NOT NULL DEFAULT 'NULL' COMMENT '\u7528\u6237\u540d',\n  `nick_name` varchar(64) NOT NULL DEFAULT 'NULL' COMMENT '\u6635\u79f0',\n  `password` varchar(64) NOT NULL DEFAULT 'NULL' COMMENT '\u5bc6\u7801',\n  `status` char(1) DEFAULT '0' COMMENT '\u8d26\u53f7\u72b6\u6001\uff080\u6b63\u5e38 1\u505c\u7528\uff09',\n  `email` varchar(64) DEFAULT NULL COMMENT '\u90ae\u7bb1',\n  `phonenumber` varchar(32) DEFAULT NULL COMMENT '\u624b\u673a\u53f7',\n  `sex` char(1) DEFAULT NULL COMMENT '\u7528\u6237\u6027\u522b\uff080\u7537\uff0c1\u5973\uff0c2\u672a\u77e5\uff09',\n  `avatar` varchar(128) DEFAULT NULL COMMENT '\u5934\u50cf',\n  `user_type` char(1) NOT NULL DEFAULT '1' COMMENT '\u7528\u6237\u7c7b\u578b\uff080\u7ba1\u7406\u5458\uff0c1\u666e\u901a\u7528\u6237\uff09',\n  `create_by` bigint(20) DEFAULT NULL COMMENT '\u521b\u5efa\u4eba\u7684\u7528\u6237id',\n  `create_time` datetime DEFAULT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\n  `update_by` bigint(20) DEFAULT NULL COMMENT '\u66f4\u65b0\u4eba',\n  `update_time` datetime DEFAULT NULL COMMENT '\u66f4\u65b0\u65f6\u95f4',\n  `del_flag` int(11) DEFAULT '0' COMMENT '\u5220\u9664\u6807\u5fd7\uff080\u4ee3\u8868\u672a\u5220\u9664\uff0c1\u4ee3\u8868\u5df2\u5220\u9664\uff09',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COMMENT='\u7528\u6237\u8868';\n\n/*Table structure for table `sys_user_role` */\n\nDROP TABLE IF EXISTS `sys_user_role`;\n\nCREATE TABLE `sys_user_role` (\n  `user_id` bigint(200) NOT NULL AUTO_INCREMENT COMMENT '\u7528\u6237id',\n  `role_id` bigint(200) NOT NULL DEFAULT '0' COMMENT '\u89d2\u8272id',\n  PRIMARY KEY (`user_id`,`role_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n</code></pre> <pre><code>SELECT \n    DISTINCT m.`perms`\nFROM\n    sys_user_role ur\n    LEFT JOIN `sys_role` r ON ur.`role_id` = r.`id`\n    LEFT JOIN `sys_role_menu` rm ON ur.`role_id` = rm.`role_id`\n    LEFT JOIN `sys_menu` m ON m.`id` = rm.`menu_id`\nWHERE\n    user_id = 2\n    AND r.`status` = 0\n    AND m.`status` = 0\n</code></pre> <pre><code>package com.sangeng.domain;\n\nimport com.baomidou.mybatisplus.annotation.TableId;\nimport com.baomidou.mybatisplus.annotation.TableName;\nimport com.fasterxml.jackson.annotation.JsonInclude;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.io.Serializable;\nimport java.util.Date;\n\n/**\n * \u83dc\u5355\u8868(Menu)\u5b9e\u4f53\u7c7b\n *\n */\n@TableName(value=\"sys_menu\")\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class Menu implements Serializable {\n    private static final long serialVersionUID = -54979041104113736L;\n\n        @TableId\n    private Long id;\n    /**\n    * \u83dc\u5355\u540d\n    */\n    private String menuName;\n    /**\n    * \u8def\u7531\u5730\u5740\n    */\n    private String path;\n    /**\n    * \u7ec4\u4ef6\u8def\u5f84\n    */\n    private String component;\n    /**\n    * \u83dc\u5355\u72b6\u6001\uff080\u663e\u793a 1\u9690\u85cf\uff09\n    */\n    private String visible;\n    /**\n    * \u83dc\u5355\u72b6\u6001\uff080\u6b63\u5e38 1\u505c\u7528\uff09\n    */\n    private String status;\n    /**\n    * \u6743\u9650\u6807\u8bc6\n    */\n    private String perms;\n    /**\n    * \u83dc\u5355\u56fe\u6807\n    */\n    private String icon;\n\n    private Long createBy;\n\n    private Date createTime;\n\n    private Long updateBy;\n\n    private Date updateTime;\n    /**\n    * \u662f\u5426\u5220\u9664\uff080\u672a\u5220\u9664 1\u5df2\u5220\u9664\uff09\n    */\n    private Integer delFlag;\n    /**\n    * \u5907\u6ce8\n    */\n    private String remark;\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#3233","title":"3.2.3.3 \u4ee3\u7801\u5b9e\u73b0","text":"<p>\u200b   \u6211\u4eec\u53ea\u9700\u8981\u6839\u636e\u7528\u6237id\u53bb\u67e5\u8be2\u5230\u5176\u6240\u5bf9\u5e94\u7684\u6743\u9650\u4fe1\u606f\u5373\u53ef\u3002</p> <p>\u200b   \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5148\u5b9a\u4e49\u4e2amapper\uff0c\u5176\u4e2d\u63d0\u4f9b\u4e00\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6839\u636euserid\u67e5\u8be2\u6743\u9650\u4fe1\u606f\u3002</p> <pre><code>import com.baomidou.mybatisplus.core.mapper.BaseMapper;\nimport com.sangeng.domain.Menu;\n\nimport java.util.List;\n\n\npublic interface MenuMapper extends BaseMapper&lt;Menu&gt; {\n    List&lt;String&gt; selectPermsByUserId(Long id);\n}\n</code></pre> <p>\u200b   \u5c24\u5176\u662f\u81ea\u5b9a\u4e49\u65b9\u6cd5\uff0c\u6240\u4ee5\u9700\u8981\u521b\u5efa\u5bf9\u5e94\u7684mapper\u6587\u4ef6\uff0c\u5b9a\u4e49\u5bf9\u5e94\u7684sql\u8bed\u53e5</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\" &gt;\n&lt;mapper namespace=\"com.sangeng.mapper.MenuMapper\"&gt;\n\n\n    &lt;select id=\"selectPermsByUserId\" resultType=\"java.lang.String\"&gt;\n        SELECT\n            DISTINCT m.`perms`\n        FROM\n            sys_user_role ur\n            LEFT JOIN `sys_role` r ON ur.`role_id` = r.`id`\n            LEFT JOIN `sys_role_menu` rm ON ur.`role_id` = rm.`role_id`\n            LEFT JOIN `sys_menu` m ON m.`id` = rm.`menu_id`\n        WHERE\n            user_id = #{userid}\n            AND r.`status` = 0\n            AND m.`status` = 0\n    &lt;/select&gt;\n&lt;/mapper&gt;\n</code></pre> <p>\u200b   \u5728application.yml\u4e2d\u914d\u7f6emapperXML\u6587\u4ef6\u7684\u4f4d\u7f6e</p> <pre><code>spring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/sg_security?characterEncoding=utf-8&amp;serverTimezone=UTC\n    username: root\n    password: root\n    driver-class-name: com.mysql.cj.jdbc.Driver\n  redis:\n    host: localhost\n    port: 6379\nmybatis-plus:\n  mapper-locations: classpath*:/mapper/**/*.xml \n</code></pre> <p>\u200b   \u7136\u540e\u6211\u4eec\u53ef\u4ee5\u5728UserDetailsServiceImpl\u4e2d\u53bb\u8c03\u7528\u8be5mapper\u7684\u65b9\u6cd5\u67e5\u8be2\u6743\u9650\u4fe1\u606f\u5c01\u88c5\u5230LoginUser\u5bf9\u8c61\u4e2d\u5373\u53ef\u3002</p> <pre><code>@Service\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    @Autowired\n    private UserMapper userMapper;\n\n    @Autowired\n    private MenuMapper menuMapper;\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        LambdaQueryWrapper&lt;User&gt; wrapper = new LambdaQueryWrapper&lt;&gt;();\n        wrapper.eq(User::getUserName,username);\n        User user = userMapper.selectOne(wrapper);\n        if(Objects.isNull(user)){\n            throw new RuntimeException(\"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\");\n        }\n        List&lt;String&gt; permissionKeyList =  menuMapper.selectPermsByUserId(user.getId());\n//        //\u6d4b\u8bd5\u5199\u6cd5\n//        List&lt;String&gt; list = new ArrayList&lt;&gt;(Arrays.asList(\"test\"));\n        return new LoginUser(user,permissionKeyList);\n    }\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#4","title":"4. \u81ea\u5b9a\u4e49\u5931\u8d25\u5904\u7406","text":"<p>\u200b   \u6211\u4eec\u8fd8\u5e0c\u671b\u5728\u8ba4\u8bc1\u5931\u8d25\u6216\u8005\u662f\u6388\u6743\u5931\u8d25\u7684\u60c5\u51b5\u4e0b\u4e5f\u80fd\u548c\u6211\u4eec\u7684\u63a5\u53e3\u4e00\u6837\u8fd4\u56de\u76f8\u540c\u7ed3\u6784\u7684json\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9\u524d\u7aef\u80fd\u5bf9\u54cd\u5e94\u8fdb\u884c\u7edf\u4e00\u7684\u5904\u7406\u3002\u8981\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u6211\u4eec\u9700\u8981\u77e5\u9053SpringSecurity\u7684\u5f02\u5e38\u5904\u7406\u673a\u5236\u3002</p> <p>\u200b   \u5728SpringSecurity\u4e2d\uff0c\u5982\u679c\u6211\u4eec\u5728\u8ba4\u8bc1\u6216\u8005\u6388\u6743\u7684\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u4e86\u5f02\u5e38\u4f1a\u88abExceptionTranslationFilter\u6355\u83b7\u5230\u3002\u5728ExceptionTranslationFilter\u4e2d\u4f1a\u53bb\u5224\u65ad\u662f\u8ba4\u8bc1\u5931\u8d25\u8fd8\u662f\u6388\u6743\u5931\u8d25\u51fa\u73b0\u7684\u5f02\u5e38\u3002</p> <p>\u200b   \u5982\u679c\u662f\u8ba4\u8bc1\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u5f02\u5e38\u4f1a\u88ab\u5c01\u88c5\u6210AuthenticationException\u7136\u540e\u8c03\u7528AuthenticationEntryPoint\u5bf9\u8c61\u7684\u65b9\u6cd5\u53bb\u8fdb\u884c\u5f02\u5e38\u5904\u7406\u3002</p> <p>\u200b   \u5982\u679c\u662f\u6388\u6743\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u5f02\u5e38\u4f1a\u88ab\u5c01\u88c5\u6210AccessDeniedException\u7136\u540e\u8c03\u7528AccessDeniedHandler\u5bf9\u8c61\u7684\u65b9\u6cd5\u53bb\u8fdb\u884c\u5f02\u5e38\u5904\u7406\u3002</p> <p>\u200b   \u6240\u4ee5\u5982\u679c\u6211\u4eec\u9700\u8981\u81ea\u5b9a\u4e49\u5f02\u5e38\u5904\u7406\uff0c\u6211\u4eec\u53ea\u9700\u8981\u81ea\u5b9a\u4e49AuthenticationEntryPoint\u548cAccessDeniedHandler\u7136\u540e\u914d\u7f6e\u7ed9SpringSecurity\u5373\u53ef\u3002</p> <p>\u2460\u81ea\u5b9a\u4e49\u5b9e\u73b0\u7c7b</p> <pre><code>@Component\npublic class AccessDeniedHandlerImpl implements AccessDeniedHandler {\n    @Override\n    public void handle(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException) throws IOException, ServletException {\n        ResponseResult result = new ResponseResult(HttpStatus.FORBIDDEN.value(), \"\u6743\u9650\u4e0d\u8db3\");\n        String json = JSON.toJSONString(result);\n        WebUtils.renderString(response,json);\n\n    }\n}\n</code></pre> <pre><code>@Component\npublic class AuthenticationEntryPointImpl implements AuthenticationEntryPoint {\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\n        ResponseResult result = new ResponseResult(HttpStatus.UNAUTHORIZED.value(), \"\u8ba4\u8bc1\u5931\u8d25\u8bf7\u91cd\u65b0\u767b\u5f55\");\n        String json = JSON.toJSONString(result);\n        WebUtils.renderString(response,json);\n    }\n}\n</code></pre> <p>\u2461\u914d\u7f6e\u7ed9SpringSecurity</p> <p>\u200b   </p> <p>\u200b   \u5148\u6ce8\u5165\u5bf9\u5e94\u7684\u5904\u7406\u5668</p> <pre><code>    @Autowired\n    private AuthenticationEntryPoint authenticationEntryPoint;\n\n    @Autowired\n    private AccessDeniedHandler accessDeniedHandler;\n</code></pre> <p>\u200b   \u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528HttpSecurity\u5bf9\u8c61\u7684\u65b9\u6cd5\u53bb\u914d\u7f6e\u3002</p> <pre><code>        http.exceptionHandling().authenticationEntryPoint(authenticationEntryPoint).\n                accessDeniedHandler(accessDeniedHandler);\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#5","title":"5. \u8de8\u57df","text":"<p>\u200b   \u6d4f\u89c8\u5668\u51fa\u4e8e\u5b89\u5168\u7684\u8003\u8651\uff0c\u4f7f\u7528 XMLHttpRequest\u5bf9\u8c61\u53d1\u8d77 HTTP\u8bf7\u6c42\u65f6\u5fc5\u987b\u9075\u5b88\u540c\u6e90\u7b56\u7565\uff0c\u5426\u5219\u5c31\u662f\u8de8\u57df\u7684HTTP\u8bf7\u6c42\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u88ab\u7981\u6b62\u7684\u3002 \u540c\u6e90\u7b56\u7565\u8981\u6c42\u6e90\u76f8\u540c\u624d\u80fd\u6b63\u5e38\u8fdb\u884c\u901a\u4fe1\uff0c\u5373\u534f\u8bae\u3001\u57df\u540d\u3001\u7aef\u53e3\u53f7\u90fd\u5b8c\u5168\u4e00\u81f4\u3002 </p> <p>\u200b   \u524d\u540e\u7aef\u5206\u79bb\u9879\u76ee\uff0c\u524d\u7aef\u9879\u76ee\u548c\u540e\u7aef\u9879\u76ee\u4e00\u822c\u90fd\u4e0d\u662f\u540c\u6e90\u7684\uff0c\u6240\u4ee5\u80af\u5b9a\u4f1a\u5b58\u5728\u8de8\u57df\u8bf7\u6c42\u7684\u95ee\u9898\u3002</p> <p>\u200b   \u6240\u4ee5\u6211\u4eec\u5c31\u8981\u5904\u7406\u4e00\u4e0b\uff0c\u8ba9\u524d\u7aef\u80fd\u8fdb\u884c\u8de8\u57df\u8bf7\u6c42\u3002</p> <p>\u2460\u5148\u5bf9SpringBoot\u914d\u7f6e\uff0c\u8fd0\u884c\u8de8\u57df\u8bf7\u6c42</p> <pre><code>@Configuration\npublic class CorsConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n      // \u8bbe\u7f6e\u5141\u8bb8\u8de8\u57df\u7684\u8def\u5f84\n        registry.addMapping(\"/**\")\n                // \u8bbe\u7f6e\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684\u57df\u540d\n                .allowedOriginPatterns(\"*\")\n                // \u662f\u5426\u5141\u8bb8cookie\n                .allowCredentials(true)\n                // \u8bbe\u7f6e\u5141\u8bb8\u7684\u8bf7\u6c42\u65b9\u5f0f\n                .allowedMethods(\"GET\", \"POST\", \"DELETE\", \"PUT\")\n                // \u8bbe\u7f6e\u5141\u8bb8\u7684header\u5c5e\u6027\n                .allowedHeaders(\"*\")\n                // \u8de8\u57df\u5141\u8bb8\u65f6\u95f4\n                .maxAge(3600);\n    }\n}\n</code></pre> <p>\u2461\u5f00\u542fSpringSecurity\u7684\u8de8\u57df\u8bbf\u95ee</p> <p>\u7531\u4e8e\u6211\u4eec\u7684\u8d44\u6e90\u90fd\u4f1a\u6536\u5230SpringSecurity\u7684\u4fdd\u62a4\uff0c\u6240\u4ee5\u60f3\u8981\u8de8\u57df\u8bbf\u95ee\u8fd8\u8981\u8ba9SpringSecurity\u8fd0\u884c\u8de8\u57df\u8bbf\u95ee\u3002</p> <pre><code>    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                //\u5173\u95edcsrf\n                .csrf().disable()\n                //\u4e0d\u901a\u8fc7Session\u83b7\u53d6SecurityContext\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeRequests()\n                // \u5bf9\u4e8e\u767b\u5f55\u63a5\u53e3 \u5141\u8bb8\u533f\u540d\u8bbf\u95ee\n                .antMatchers(\"/user/login\").anonymous()\n                // \u9664\u4e0a\u9762\u5916\u7684\u6240\u6709\u8bf7\u6c42\u5168\u90e8\u9700\u8981\u9274\u6743\u8ba4\u8bc1\n                .anyRequest().authenticated();\n\n        //\u6dfb\u52a0\u8fc7\u6ee4\u5668\n        http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);\n\n        //\u914d\u7f6e\u5f02\u5e38\u5904\u7406\u5668\n        http.exceptionHandling()\n                //\u914d\u7f6e\u8ba4\u8bc1\u5931\u8d25\u5904\u7406\u5668\n                .authenticationEntryPoint(authenticationEntryPoint)\n                .accessDeniedHandler(accessDeniedHandler);\n\n        //\u5141\u8bb8\u8de8\u57df\n        http.cors();\n    }\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#6","title":"6. \u9057\u7559\u5c0f\u95ee\u9898","text":""},{"location":"Java/SpringSecurity/SpringSecurity/#_4","title":"\u5176\u5b83\u6743\u9650\u6821\u9a8c\u65b9\u6cd5","text":"<p>\u200b   \u6211\u4eec\u524d\u9762\u90fd\u662f\u4f7f\u7528@PreAuthorize\u6ce8\u89e3\uff0c\u7136\u540e\u5728\u5728\u5176\u4e2d\u4f7f\u7528\u7684\u662fhasAuthority\u65b9\u6cd5\u8fdb\u884c\u6821\u9a8c\u3002SpringSecurity\u8fd8\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u5176\u5b83\u65b9\u6cd5\u4f8b\u5982\uff1ahasAnyAuthority\uff0chasRole\uff0chasAnyRole\u7b49\u3002</p> <p>\u200b    </p> <p>\u200b   \u8fd9\u91cc\u6211\u4eec\u5148\u4e0d\u6025\u7740\u53bb\u4ecb\u7ecd\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u6211\u4eec\u5148\u53bb\u7406\u89e3hasAuthority\u7684\u539f\u7406\uff0c\u7136\u540e\u518d\u53bb\u5b66\u4e60\u5176\u4ed6\u65b9\u6cd5\u4f60\u5c31\u66f4\u5bb9\u6613\u7406\u89e3\uff0c\u800c\u4e0d\u662f\u6b7b\u8bb0\u786c\u80cc\u533a\u522b\u3002\u5e76\u4e14\u6211\u4eec\u4e5f\u53ef\u4ee5\u9009\u62e9\u5b9a\u4e49\u6821\u9a8c\u65b9\u6cd5\uff0c\u5b9e\u73b0\u6211\u4eec\u81ea\u5df1\u7684\u6821\u9a8c\u903b\u8f91\u3002</p> <p>\u200b   hasAuthority\u65b9\u6cd5\u5b9e\u9645\u662f\u6267\u884c\u5230\u4e86SecurityExpressionRoot\u7684hasAuthority\uff0c\u5927\u5bb6\u53ea\u8981\u65ad\u70b9\u8c03\u8bd5\u65e2\u53ef\u77e5\u9053\u5b83\u5185\u90e8\u7684\u6821\u9a8c\u539f\u7406\u3002</p> <p>\u200b   \u5b83\u5185\u90e8\u5176\u5b9e\u662f\u8c03\u7528authentication\u7684getAuthorities\u65b9\u6cd5\u83b7\u53d6\u7528\u6237\u7684\u6743\u9650\u5217\u8868\u3002\u7136\u540e\u5224\u65ad\u6211\u4eec\u5b58\u5165\u7684\u65b9\u6cd5\u53c2\u6570\u6570\u636e\u5728\u6743\u9650\u5217\u8868\u4e2d\u3002</p> <p>\u200b   hasAnyAuthority\u65b9\u6cd5\u53ef\u4ee5\u4f20\u5165\u591a\u4e2a\u6743\u9650\uff0c\u53ea\u6709\u7528\u6237\u6709\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u6743\u9650\u90fd\u53ef\u4ee5\u8bbf\u95ee\u5bf9\u5e94\u8d44\u6e90\u3002</p> <pre><code>    @PreAuthorize(\"hasAnyAuthority('admin','test','system:dept:list')\")\n    public String hello(){\n        return \"hello\";\n    }\n</code></pre> <p>\u200b   hasRole\u8981\u6c42\u6709\u5bf9\u5e94\u7684\u89d2\u8272\u624d\u53ef\u4ee5\u8bbf\u95ee\uff0c\u4f46\u662f\u5b83\u5185\u90e8\u4f1a\u628a\u6211\u4eec\u4f20\u5165\u7684\u53c2\u6570\u62fc\u63a5\u4e0a ROLE_ \u540e\u518d\u53bb\u6bd4\u8f83\u3002\u6240\u4ee5\u8fd9\u79cd\u60c5\u51b5\u4e0b\u8981\u7528\u7528\u6237\u5bf9\u5e94\u7684\u6743\u9650\u4e5f\u8981\u6709 ROLE_ \u8fd9\u4e2a\u524d\u7f00\u624d\u53ef\u4ee5\u3002</p> <pre><code>    @PreAuthorize(\"hasRole('system:dept:list')\")\n    public String hello(){\n        return \"hello\";\n    }\n</code></pre> <p>\u200b   hasAnyRole \u6709\u4efb\u610f\u7684\u89d2\u8272\u5c31\u53ef\u4ee5\u8bbf\u95ee\u3002\u5b83\u5185\u90e8\u4e5f\u4f1a\u628a\u6211\u4eec\u4f20\u5165\u7684\u53c2\u6570\u62fc\u63a5\u4e0a ROLE_ \u540e\u518d\u53bb\u6bd4\u8f83\u3002\u6240\u4ee5\u8fd9\u79cd\u60c5\u51b5\u4e0b\u8981\u7528\u7528\u6237\u5bf9\u5e94\u7684\u6743\u9650\u4e5f\u8981\u6709 ROLE_ \u8fd9\u4e2a\u524d\u7f00\u624d\u53ef\u4ee5\u3002</p> <pre><code>    @PreAuthorize(\"hasAnyRole('admin','system:dept:list')\")\n    public String hello(){\n        return \"hello\";\n    }\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#_5","title":"\u81ea\u5b9a\u4e49\u6743\u9650\u6821\u9a8c\u65b9\u6cd5","text":"<p>\u200b   \u6211\u4eec\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5df1\u7684\u6743\u9650\u6821\u9a8c\u65b9\u6cd5\uff0c\u5728@PreAuthorize\u6ce8\u89e3\u4e2d\u4f7f\u7528\u6211\u4eec\u7684\u65b9\u6cd5\u3002</p> <pre><code>@Component(\"ex\")\npublic class SGExpressionRoot {\n\n    public boolean hasAuthority(String authority){\n        //\u83b7\u53d6\u5f53\u524d\u7528\u6237\u7684\u6743\u9650\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        LoginUser loginUser = (LoginUser) authentication.getPrincipal();\n        List&lt;String&gt; permissions = loginUser.getPermissions();\n        //\u5224\u65ad\u7528\u6237\u6743\u9650\u96c6\u5408\u4e2d\u662f\u5426\u5b58\u5728authority\n        return permissions.contains(authority);\n    }\n}\n</code></pre> <p>\u200b    \u5728SPEL\u8868\u8fbe\u5f0f\u4e2d\u4f7f\u7528 @ex\u76f8\u5f53\u4e8e\u83b7\u53d6\u5bb9\u5668\u4e2dbean\u7684\u540d\u5b57\u672aex\u7684\u5bf9\u8c61\u3002\u7136\u540e\u518d\u8c03\u7528\u8fd9\u4e2a\u5bf9\u8c61\u7684hasAuthority\u65b9\u6cd5</p> <pre><code>    @RequestMapping(\"/hello\")\n    @PreAuthorize(\"@ex.hasAuthority('system:dept:list')\")\n    public String hello(){\n        return \"hello\";\n    }\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#_6","title":"\u57fa\u4e8e\u914d\u7f6e\u7684\u6743\u9650\u63a7\u5236","text":"<p>\u200b   \u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u914d\u7f6e\u7c7b\u4e2d\u4f7f\u7528\u4f7f\u7528\u914d\u7f6e\u7684\u65b9\u5f0f\u5bf9\u8d44\u6e90\u8fdb\u884c\u6743\u9650\u63a7\u5236\u3002</p> <pre><code>    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                //\u5173\u95edcsrf\n                .csrf().disable()\n                //\u4e0d\u901a\u8fc7Session\u83b7\u53d6SecurityContext\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeRequests()\n                // \u5bf9\u4e8e\u767b\u5f55\u63a5\u53e3 \u5141\u8bb8\u533f\u540d\u8bbf\u95ee\n                .antMatchers(\"/user/login\").anonymous()\n                .antMatchers(\"/testCors\").hasAuthority(\"system:dept:list222\")\n                // \u9664\u4e0a\u9762\u5916\u7684\u6240\u6709\u8bf7\u6c42\u5168\u90e8\u9700\u8981\u9274\u6743\u8ba4\u8bc1\n                .anyRequest().authenticated();\n\n        //\u6dfb\u52a0\u8fc7\u6ee4\u5668\n        http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);\n\n        //\u914d\u7f6e\u5f02\u5e38\u5904\u7406\u5668\n        http.exceptionHandling()\n                //\u914d\u7f6e\u8ba4\u8bc1\u5931\u8d25\u5904\u7406\u5668\n                .authenticationEntryPoint(authenticationEntryPoint)\n                .accessDeniedHandler(accessDeniedHandler);\n\n        //\u5141\u8bb8\u8de8\u57df\n        http.cors();\n    }\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#csrf","title":"CSRF","text":"<p>\u200b   CSRF\u662f\u6307\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\uff08Cross-site request forgery\uff09\uff0c\u662fweb\u5e38\u89c1\u7684\u653b\u51fb\u4e4b\u4e00\u3002</p> <p>\u200b   https://blog.csdn.net/freeking101/article/details/86537087</p> <p>\u200b   SpringSecurity\u53bb\u9632\u6b62CSRF\u653b\u51fb\u7684\u65b9\u5f0f\u5c31\u662f\u901a\u8fc7csrf_token\u3002\u540e\u7aef\u4f1a\u751f\u6210\u4e00\u4e2acsrf_token\uff0c\u524d\u7aef\u53d1\u8d77\u8bf7\u6c42\u7684\u65f6\u5019\u9700\u8981\u643a\u5e26\u8fd9\u4e2acsrf_token,\u540e\u7aef\u4f1a\u6709\u8fc7\u6ee4\u5668\u8fdb\u884c\u6821\u9a8c\uff0c\u5982\u679c\u6ca1\u6709\u643a\u5e26\u6216\u8005\u662f\u4f2a\u9020\u7684\u5c31\u4e0d\u5141\u8bb8\u8bbf\u95ee\u3002</p> <p>\u200b   \u6211\u4eec\u53ef\u4ee5\u53d1\u73b0CSRF\u653b\u51fb\u4f9d\u9760\u7684\u662fcookie\u4e2d\u6240\u643a\u5e26\u7684\u8ba4\u8bc1\u4fe1\u606f\u3002\u4f46\u662f\u5728\u524d\u540e\u7aef\u5206\u79bb\u7684\u9879\u76ee\u4e2d\u6211\u4eec\u7684\u8ba4\u8bc1\u4fe1\u606f\u5176\u5b9e\u662ftoken\uff0c\u800ctoken\u5e76\u4e0d\u662f\u5b58\u50a8\u4e2dcookie\u4e2d\uff0c\u5e76\u4e14\u9700\u8981\u524d\u7aef\u4ee3\u7801\u53bb\u628atoken\u8bbe\u7f6e\u5230\u8bf7\u6c42\u5934\u4e2d\u624d\u53ef\u4ee5\uff0c\u6240\u4ee5CSRF\u653b\u51fb\u4e5f\u5c31\u4e0d\u7528\u62c5\u5fc3\u4e86\u3002</p>"},{"location":"Java/SpringSecurity/SpringSecurity/#_7","title":"\u8ba4\u8bc1\u6210\u529f\u5904\u7406\u5668","text":"<p>\u200b   \u5b9e\u9645\u4e0a\u5728UsernamePasswordAuthenticationFilter\u8fdb\u884c\u767b\u5f55\u8ba4\u8bc1\u7684\u65f6\u5019\uff0c\u5982\u679c\u767b\u5f55\u6210\u529f\u4e86\u662f\u4f1a\u8c03\u7528AuthenticationSuccessHandler\u7684\u65b9\u6cd5\u8fdb\u884c\u8ba4\u8bc1\u6210\u529f\u540e\u7684\u5904\u7406\u7684\u3002AuthenticationSuccessHandler\u5c31\u662f\u767b\u5f55\u6210\u529f\u5904\u7406\u5668\u3002</p> <p>\u200b   \u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u53bb\u81ea\u5b9a\u4e49\u6210\u529f\u5904\u7406\u5668\u8fdb\u884c\u6210\u529f\u540e\u7684\u76f8\u5e94\u5904\u7406\u3002</p> <pre><code>@Component\npublic class SGSuccessHandler implements AuthenticationSuccessHandler {\n\n    @Override\n    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {\n        System.out.println(\"\u8ba4\u8bc1\u6210\u529f\u4e86\");\n    }\n}\n</code></pre> <pre><code>@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private AuthenticationSuccessHandler successHandler;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.formLogin().successHandler(successHandler);\n\n        http.authorizeRequests().anyRequest().authenticated();\n    }\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#_8","title":"\u8ba4\u8bc1\u5931\u8d25\u5904\u7406\u5668","text":"<p>\u200b   \u5b9e\u9645\u4e0a\u5728UsernamePasswordAuthenticationFilter\u8fdb\u884c\u767b\u5f55\u8ba4\u8bc1\u7684\u65f6\u5019\uff0c\u5982\u679c\u8ba4\u8bc1\u5931\u8d25\u4e86\u662f\u4f1a\u8c03\u7528AuthenticationFailureHandler\u7684\u65b9\u6cd5\u8fdb\u884c\u8ba4\u8bc1\u5931\u8d25\u540e\u7684\u5904\u7406\u7684\u3002AuthenticationFailureHandler\u5c31\u662f\u767b\u5f55\u5931\u8d25\u5904\u7406\u5668\u3002</p> <p>\u200b   \u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u53bb\u81ea\u5b9a\u4e49\u5931\u8d25\u5904\u7406\u5668\u8fdb\u884c\u5931\u8d25\u540e\u7684\u76f8\u5e94\u5904\u7406\u3002</p> <pre><code>@Component\npublic class SGFailureHandler implements AuthenticationFailureHandler {\n    @Override\n    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) throws IOException, ServletException {\n        System.out.println(\"\u8ba4\u8bc1\u5931\u8d25\u4e86\");\n    }\n}\n</code></pre> <pre><code>@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private AuthenticationSuccessHandler successHandler;\n\n    @Autowired\n    private AuthenticationFailureHandler failureHandler;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.formLogin()\n//                \u914d\u7f6e\u8ba4\u8bc1\u6210\u529f\u5904\u7406\u5668\n                .successHandler(successHandler)\n//                \u914d\u7f6e\u8ba4\u8bc1\u5931\u8d25\u5904\u7406\u5668\n                .failureHandler(failureHandler);\n\n        http.authorizeRequests().anyRequest().authenticated();\n    }\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#_9","title":"\u767b\u51fa\u6210\u529f\u5904\u7406\u5668","text":"<pre><code>@Component\npublic class SGLogoutSuccessHandler implements LogoutSuccessHandler {\n    @Override\n    public void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {\n        System.out.println(\"\u6ce8\u9500\u6210\u529f\");\n    }\n}\n</code></pre> <pre><code>@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private AuthenticationSuccessHandler successHandler;\n\n    @Autowired\n    private AuthenticationFailureHandler failureHandler;\n\n    @Autowired\n    private LogoutSuccessHandler logoutSuccessHandler;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.formLogin()\n//                \u914d\u7f6e\u8ba4\u8bc1\u6210\u529f\u5904\u7406\u5668\n                .successHandler(successHandler)\n//                \u914d\u7f6e\u8ba4\u8bc1\u5931\u8d25\u5904\u7406\u5668\n                .failureHandler(failureHandler);\n\n        http.logout()\n                //\u914d\u7f6e\u6ce8\u9500\u6210\u529f\u5904\u7406\u5668\n                .logoutSuccessHandler(logoutSuccessHandler);\n\n        http.authorizeRequests().anyRequest().authenticated();\n    }\n}\n</code></pre>"},{"location":"Java/SpringSecurity/SpringSecurity/#_10","title":"\u5176\u4ed6\u8ba4\u8bc1\u65b9\u6848\u7545\u60f3","text":""},{"location":"Java/designpattern/designpattern/","title":"\u8bbe\u8ba1\u6a21\u5f0f(Java)","text":""},{"location":"Java/designpattern/designpattern/#_1","title":"\u4e00\u3001\u4ec0\u4e48\u662f\u8bbe\u8ba1\u6a21\u5f0f","text":"<p>\u8f6f\u4ef6\u5de5\u7a0b\u4e2d\uff0c\u8bbe\u8ba1\u6a21\u5f0f\u662f\u5bf9\u8f6f\u4ef6\u8bbe\u8ba1\u8fc7\u7a0b\u4e2d\u666e\u904d\u5b58\u5728\uff08\u53cd\u590d\u51fa\u73b0\uff09\u7684\u5404\u79cd\u95ee\u9898\uff0c\u6240\u63d0\u51fa\u7684\u89e3\u51b3\u65b9\u6848\u3002\u8fd9\u4e9b\u89e3\u51b3\u65b9\u6848\u662f\u4f17\u591a\u8f6f\u4ef6\u5f00\u53d1\u4eba\u5458\u7ecf\u8fc7\u76f8\u5f53\u957f\u7684\u4e00\u6bb5\u65f6\u95f4\u7684\u8bd5\u9a8c\u548c\u9519\u8bef\u603b\u7ed3\u51fa\u6765\u7684\u3002\u8bbe\u8ba1\u6a21\u5f0f\u4ee3\u8868\u4e86\u6700\u4f73\u7684\u5b9e\u8df5\uff0c\u8fd9\u4e2a\u672f\u8bed\u662f\u7531\u57c3\u91cc\u5e0c\u00b7\u4f3d\u739b\uff08Erich Gamma\uff09\u7b49\u4eba\u57281990\u5e74\u4ee3\u4ece\u5efa\u7b51\u8bbe\u8ba1\u9886\u57df\u5f15\u5165\u5230\u8ba1\u7b97\u673a\u79d1\u5b66\u7684\u3002</p>"},{"location":"Java/designpattern/designpattern/#_2","title":"\u4e8c\u3001\u8bbe\u8ba1\u6a21\u5f0f\u7684\u76ee\u7684\u548c\u539f\u5219","text":""},{"location":"Java/designpattern/designpattern/#1","title":"1\u3001\u76ee\u7684","text":"<p>\u5728\u7f16\u5199\u8f6f\u4ef6\u8fc7\u7a0b\u4e2d\uff0c\u7a0b\u5e8f\u5458\u9762\u4e34\u7740\u6765\u81ea\u8026\u5408\u6027\uff0c\u5185\u805a\u6027\u4ee5\u53ca\u53ef\u7ef4\u62a4\u6027\uff0c\u53ef\u6269\u5c55\u6027\uff0c\u91cd\u7528\u6027\uff0c\u7075\u6d3b\u6027\u7b49\u591a\u65b9\u9762\u7684\u6311\u6218\uff0c\u8bbe\u8ba1\u6a21\u5f0f\u662f\u4e3a\u4e86\u8ba9\u7a0b\u5e8f(\u8f6f\u4ef6)\u5177\u6709\u66f4\u597d\u7684\uff1a</p> <ul> <li>\u4ee3\u7801\u91cd\u7528\u6027\uff08\u76f8\u540c\u529f\u80fd\u7684\u4ee3\u7801\uff0c\u4e0d\u7528\u591a\u6b21\u7f16\u5199\uff09</li> <li>\u53ef\u8bfb\u6027\uff08\u7f16\u7a0b\u89c4\u8303\u6027\uff0c\u4fbf\u4e8e\u5176\u5b83\u7a0b\u5e8f\u5458\u7684\u9605\u8bfb\u548c\u7406\u89e3\uff09</li> <li>\u53ef\u6269\u5c55\u6027\uff08\u5f53\u9700\u8981\u65b0\u589e\u529f\u80fd\u65f6\uff0c\u975e\u5e38\u7684\u65b9\u4fbf\uff09</li> <li>\u53ef\u9760\u6027\uff08\u5f53\u6211\u4eec\u65b0\u589e\u65b0\u7684\u529f\u80fd\u540e\uff0c\u5bf9\u539f\u6765\u7684\u529f\u80fd\u6ca1\u6709\u5f71\u54cd\uff09</li> <li>\u4f7f\u7a0b\u5e8f\u5448\u73b0\u9ad8\u5185\u805a\uff0c\u4f4e\u8026\u5408\u7684\u7279\u6027</li> </ul>"},{"location":"Java/designpattern/designpattern/#2","title":"2\u3001\u539f\u5219","text":"<p>\u8bbe\u8ba1\u6a21\u5f0f\u7684\u539f\u5219\uff0c\u5176\u5b9e\u5c31\u662f\u7a0b\u5e8f\u5458\u5728\u7f16\u7a0b\u65f6\uff0c\u5e94\u5f53\u9075\u5b88\u7684\u89c4\u5219\uff0c\u4e5f\u5c31\u662f\u5404\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u7684\u57fa\u7840\uff0c\u4e0b\u9762\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u5e38\u7528\u7684\u4e03\u5927\u539f\u5219\uff1a\u5355\u4e00\u804c\u8d23\u539f\u5219\u3001\u63a5\u53e3\u9694\u79bb\u539f\u5219\u3001\u4f9d\u8d56\u5012\u8f6c\uff08\u5012\u7f6e\uff09\u539f\u5219\u3001\u91cc\u6c0f\u66ff\u6362\u539f\u5219\u3001\u5f00\u95ed\u539f\u5219\u3001\u8fea\u7c73\u7279\u6cd5\u5219\u3001\u5408\u6210\u590d\u7528\u539f\u5219\u3002</p>"},{"location":"Java/designpattern/designpattern/#1_1","title":"1\u3001\u5355\u4e00\u804c\u8d23\u539f\u5219","text":"<p>\u5bf9\u7c7b\u6765\u8bf4\uff0c\u4e00\u4e2a\u7c7b\u5e94\u8be5\u53ea\u8d1f\u8d23\u4e00\u9879\u539f\u5219\uff0c\u5982\u679c\u7c7bA\u8d1f\u8d23\u4e24\u4e2a\u4e0d\u540c\u804c\u8d23\uff1a\u804c\u8d231\u3001\u804c\u8d232\u3002\u5f53\u804c\u8d231\u9700\u6c42\u53d8\u66f4\u800c\u6539\u53d8A\u65f6\uff0c\u53ef\u80fd\u9020\u6210\u804c\u8d232\u6267\u884c\u9519\u8bef\uff0c\u6240\u4ee5\u9700\u8981\u5c06\u7c7bA\u7684\u7c92\u5ea6\u5206\u89e3\u4e3aA1\u3001A2\u3002\u4e0b\u9762\u4ee5\u4ee5\u4ea4\u901a\u5de5\u5177\u4e3a\u6848\u4f8b\u8bb2\u89e3\u3002</p> <p>\uff081\uff09\u6848\u4f8b1 <pre><code>package com.principle.singleresponsibility;\n\npublic class SingleResponsibility1 {\n    public static void main(String[] args) {\n        Vehicle vehicle=new Vehicle();\n        vehicle.run(\"\u6c7d\u8f66\");\n        vehicle.run(\"\u6469\u6258\u8f66\");\n        vehicle.run(\"\u98de\u673a\");\n    }\n}\n// \u4ea4\u901a\u5de5\u5177\u7c7b\nclass Vehicle{\n    public void run(String vehicle){\n        System.out.println(vehicle+\"\u5728\u516c\u8def\u4e0a\u8fd0\u884c\u3002\u3002\u3002\");\n    }\n}\n</code></pre> \u5728\u8fd9\u79cd\u65b9\u5f0f\u7684run\u65b9\u6cd5\u4e2d\uff0c\u8fdd\u80cc\u4e86\u5355\u4e00\u804c\u8d23\u539f\u5219\uff0c\u4e0b\u9762\u662f\u89e3\u51b3\u65b9\u6cd5\uff0c\u6839\u636e\u4ea4\u901a\u5de5\u5177\u8fd0\u884c\u7684\u65b9\u6cd5\u4e0d\u540c\uff0c\u5206\u89e3\u6210\u4e0d\u540c\u7684\u7c7b\u3002</p> <p>\uff082\uff09\u6848\u4f8b2 <pre><code>package com.principle.singleresponsibility;\n\npublic class SingleResponsibility2 {\n    public static void main(String[] args) {\n        RoadVehicle roadVehicle=new RoadVehicle();\n        roadVehicle.run(\"\u6c7d\u8f66\");\n        roadVehicle.run(\"\u6469\u6258\u8f66\");\n\n        AirVehicle airVehicle=new AirVehicle();\n        airVehicle.run(\"\u98de\u673a\");\n    }\n}\n\n// \u5355\u4e00\u804c\u8d23\u539f\u5219\uff0c\u4f46\u662f\u6539\u52a8\u5f88\u5927\nclass RoadVehicle{\n    public void run(String vehicle){\n        System.out.println(vehicle+\"\u5728\u516c\u8def\u8fd0\u884c\");\n    }\n}\n\nclass AirVehicle{\n    public void run(String vehicle){\n        System.out.println(vehicle+\"\u5728\u5929\u7a7a\u8fd0\u884c\");\n    }\n}\n\nclass WaterVehicle{\n    public void run(String vehicle){\n        System.out.println(vehicle+\"\u5728\u6c34\u4e0a\u8fd0\u884c\");\n    }\n}\n</code></pre> \u8fd9\u79cd\u65b9\u5f0f\u9075\u5faa\u4e86\u5355\u4e00\u804c\u8d23\u539f\u5219\uff0c\u4f46\u662f\u8fd9\u6837\u505a\u7684\u6539\u52a8\u5f88\u5927\uff0c\u5373\u5c06\u7c7b\u5206\u89e3\uff0c\u540c\u65f6\u4fee\u6539\u4e86\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u76f4\u63a5\u4fee\u6539Vehicle\u7c7b\uff0c\u6539\u52a8\u7684\u4ee3\u7801\u4f1a\u6bd4\u8f83\u5c11\u3002 \uff083\uff09\u6848\u4f8b3 <pre><code>package com.principle.singleresponsibility;\n\npublic class SingleResponsibility3 {\n    public static void main(String[] args) {\n        Vehicle2 vehicle2=new Vehicle2();\n        vehicle2.run(\"\u6c7d\u8f66\");\n        vehicle2.runWater(\"\u8f6e\u8239\");\n        vehicle2.runAir(\"\u98de\u673a\");\n    }\n}\nclass Vehicle2{\n    public void run(String vehicle){\n        System.out.println(vehicle+\"\u5728\u516c\u8def\u4e0a\u8fd0\u884c\u3002\u3002\u3002\");\n    }\n\n    public void runAir(String vehicle){\n        System.out.println(vehicle+\"\u5728\u5929\u7a7a\u8fd0\u884c\u3002\u3002\u3002\");\n    }\n\n    public void runWater(String vehicle){\n        System.out.println(vehicle+\"\u5728\u6c34\u4e2d\u8fd0\u884c\u3002\u3002\u3002\");\n    }\n}   \n</code></pre> \u8fd9\u79cd\u4fee\u6539\u65b9\u6cd5\u6ca1\u6709\u5bf9\u539f\u6765\u7684\u7c7b\u505a\u5f88\u5927\u7684\u4fee\u6539\uff0c\u53ea\u662f\u589e\u52a0\u4e86\u65b9\u6cd5\uff0c\u8fd9\u91cc\u867d\u7136\u6ca1\u6709\u5728\u7c7b\u7ea7\u522b\u4e0a\u9075\u5b88\u5355\u4e00\u804c\u8d23\u539f\u5219\uff0c\u4f46\u662f\u5728\u65b9\u6cd5\u7ea7\u522b\u4e0a\uff0c\u4ecd\u7136\u662f\u9075\u5b88\u5355\u4e00\u804c\u8d23\u7684\u3002</p> <p>\uff084\uff09\u6ce8\u610f\u7684\u4e8b\u9879\u548c\u7ec6\u8282</p> <ul> <li>\u964d\u4f4e\u7c7b\u7684\u590d\u6742\u5ea6\uff0c\u4e00\u4e2a\u7c7b\u53ea\u8d1f\u8d23\u4e00\u9879\u804c\u8d23\u3002</li> <li>\u63d0\u9ad8\u7c7b\u7684\u53ef\u8bfb\u6027\uff0c\u53ef\u7ef4\u62a4\u6027\u3002</li> <li>\u964d\u4f4e\u53d8\u66f4\u5f15\u8d77\u7684\u98ce\u9669\u3002</li> <li>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e94\u5f53\u9075\u5b88\u5355\u4e00\u804c\u8d23\u539f\u5219\uff0c\u53ea\u8981\u903b\u8f91\u8db3\u591f\u7b80\u5355\uff0c\u624d\u53ef\u4ee5\u5728\u4ee3\u7801\u7ea7\u8fdd\u53cd\u5355\u4e00\u804c\u8d23\u539f\u5219\uff1b\u53ea\u6709\u7c7b\u4e2d\u65b9\u6cd5\u8db3\u591f\u5c11\uff0c\u53ef\u4ee5\u5728\u65b9\u6cd5\u7ea7\u522b\u4fdd\u6301\u5355\u4e00\u804c\u8d23\u539f\u5219\u3002</li> </ul>"},{"location":"Java/designpattern/designpattern/#2_1","title":"2\u3001\u63a5\u53e3\u9694\u79bb\u539f\u5219","text":"<p>\u5ba2\u6237\u7aef\u4e0d\u5e94\u8be5\u4f9d\u8d56\u5b83\u4e0d\u9700\u8981\u7684\u63a5\u53e3\uff0c\u5373\u4e00\u4e2a\u7c7b\u5bf9\u53e6\u4e00\u4e2a\u7c7b\u7684\u4f9d\u8d56\u5e94\u8be5\u5efa\u7acb\u5728\u6700\u5c0f\u7684\u63a5\u53e3\u4e0a\u3002\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\u3002  \u56fe\u4e2d\u6848\u4f8b\uff0c\u7c7bA\u901a\u8fc7\u63a5\u53e3Interface1\u4f9d\u8d56\u7c7bB\uff0c\u7c7bC\u901a\u8fc7\u63a5\u53e3Interface1\u4f9d\u8d56\u7c7bD\uff0c\u5982\u679c\u63a5\u53e3Interface1\u5bf9\u4e8e\u7c7bA\u548c\u7c7bC\u6765\u8bf4\u4e0d\u662f\u6700\u5c0f\u63a5\u53e3\uff0c\u90a3\u4e48\u7c7bB\u548c\u7c7bD\u5fc5\u987b\u8981\u53bb\u5b9e\u73b0\u5b83\u4eec\u4e0d\u9700\u8981\u7684\u65b9\u6cd5\u3002\u6839\u636e\u63a5\u53e3\u9694\u79bb\u539f\u5219\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06Interface1\u62c6\u5206\u4e3a\u72ec\u7acb\u7684\u51e0\u4e2a\u63a5\u53e3\uff0c\u7c7bA\u548c\u7c7bC\u5206\u522b\u4e0e\u5b83\u4eec\u9700\u8981\u7684\u63a5\u53e3\u5efa\u7acb\u4f9d\u8d56\u5173\u7cfb\u3002\u4e0b\u9762\u901a\u8fc7\u6848\u4f8b\u6765\u5bf9\u63a5\u53e3\u9694\u79bb\u539f\u5219\u8fdb\u884c\u89e3\u91ca\u3002</p> <p>\uff081\uff09\u6848\u4f8b1</p> <p>\u8fd9\u4e2a\u6848\u4f8b\u662f\u6700\u539f\u59cb\u7684\u6848\u4f8b\uff0c\u4e5f\u5c31\u662f\u4e0a\u56fe\u4e2d\u6ca1\u6709\u4f7f\u7528\u63a5\u53e3\u9694\u79bb\u539f\u5219\u7684\u4ee3\u7801\u3002 <pre><code>package com.principle.segregation;\n\npublic class Segregation1 {\n\n}\n\ninterface Interface1{\n    void operation1();\n    void operation2();\n    void operation3();\n    void operation4();\n    void operation5();\n}\n\nclass B implements Interface1{\n\n    @Override\n    public void operation1() {\n        System.out.println(\"B\u5b9e\u73b0\u4e86operation1\");\n    }\n\n    @Override\n    public void operation2() {\n        System.out.println(\"B\u5b9e\u73b0\u4e86operation2\");\n    }\n\n    @Override\n    public void operation3() {\n        System.out.println(\"B\u5b9e\u73b0\u4e86operation3\");\n    }\n\n    @Override\n    public void operation4() {\n        System.out.println(\"B\u5b9e\u73b0\u4e86operation4\");\n    }\n\n    @Override\n    public void operation5() {\n        System.out.println(\"B\u5b9e\u73b0\u4e86operation5\");\n    }\n\n}\n\nclass D implements Interface1{\n\n    @Override\n    public void operation1() {\n        System.out.println(\"D\u5b9e\u73b0\u4e86operation1\");\n    }\n\n    @Override\n    public void operation2() {\n        System.out.println(\"D\u5b9e\u73b0\u4e86operation2\");\n    }\n\n    @Override\n    public void operation3() {\n        System.out.println(\"D\u5b9e\u73b0\u4e86operation3\");\n    }\n\n    @Override\n    public void operation4() {\n        System.out.println(\"D\u5b9e\u73b0\u4e86operation4\");\n    }\n\n    @Override\n    public void operation5() {\n        System.out.println(\"D\u5b9e\u73b0\u4e86operation5\");\n    }\n}\n\nclass A{\n    // A\u7c7b\u901a\u8fc7\u63a5\u53e3Interface1 \u4f9d\u8d56B\u7c7b\uff0c\u4f46\u662f\u53ea\u4f1a\u4f7f\u7528\u5230123\u65b9\u6cd5\n    public void depend1(Interface1 i){\n        i.operation1();\n    }\n    public void depend2(Interface1 i){\n        i.operation2();\n    }\n    public void depend3(Interface1 i){\n        i.operation3();\n    }\n}\n\nclass C{\n    // C\u7c7b\u901a\u8fc7\u63a5\u53e3Interface1 \u4f9d\u8d56D\u7c7b\uff0c\u4f46\u662f\u53ea\u4f1a\u4f7f\u7528\u5230145\u65b9\u6cd5\n    public void depend1(Interface1 i){\n        i.operation1();\n    }\n    public void depend4(Interface1 i){\n        i.operation4();\n    }\n    public void depend5(Interface1 i){\n        i.operation5();\n    }\n}\n</code></pre> \u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff0c\u6ca1\u6709\u5c06Interface1\u62c6\u5206\uff0c\u4ece\u800c\u7834\u574f\u4e86\u63a5\u53e3\u9694\u79bb\u539f\u5219\uff0c\u53ef\u4ee5\u5c06Interface1\u8fdb\u884c\u62c6\u5206\u4e3a\u51e0\u4e2a\u72ec\u7acb\u7684\u63a5\u53e3\uff0c\u7c7bA\u548c\u7c7bC\u5206\u522b\u4e0e\u5b83\u4eec\u9700\u8981\u7684\u63a5\u53e3\u5efa\u7acb\u4f9d\u8d56\u5173\u7cfb\uff0c\u4e5f\u5c31\u662f\u91c7\u7528\u63a5\u53e3\u9694\u79bb\u539f\u5219\uff0c\u770b\u4e0b\u4e00\u4e2a\u6848\u4f8b\u3002</p> <p>\uff082\uff09\u6848\u4f8b2</p> <p>\u5c06Interface1\u62c6\u5206\u4e3a\u4e09\u4e2a\u63a5\u53e3\uff0c\u5982\u4e0b\u56fe\u3002 </p> <p>\u7c7bA\u6839\u636e\u9700\u8981\u4f9d\u8d56Interface1\u548c2\uff0c\u7c7bC\u6839\u636e\u9700\u8981\u4f9d\u8d56Interface2\u548c3\uff0c\u6848\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a <pre><code>package com.principle.segregation.improve;\n\npublic class Segregation1 {\n    public static void main(String[] args) {\n\n        A a = new A();\n        a.depend1(new B());//A\u7c7b\u901a\u8fc7\u63a5\u53e3\u53bb\u4f9d\u8d56\n        a.depend2(new B());\n        a.depend3(new B());\n        C c=new C();\n        c.depend1(new D());\n        c.depend4(new D());\n        c.depend5(new D());\n    }    \n}\n\ninterface Interface1{\n    void operation1();\n}\n\ninterface Interface2{\n    void operation2();\n    void operation3();\n}\n\ninterface Interface3{\n    void operation4();\n    void operation5();\n}\n\nclass B implements Interface1,Interface2{\n\n    @Override\n    public void operation1() {\n        System.out.println(\"B\u5b9e\u73b0\u4e86operation1\");\n    }\n\n    @Override\n    public void operation2() {\n        System.out.println(\"B\u5b9e\u73b0\u4e86operation2\");\n    }\n\n    @Override\n    public void operation3() {\n        System.out.println(\"B\u5b9e\u73b0\u4e86operation3\");\n    }\n\n}\n\nclass D implements Interface1,Interface3{\n\n    @Override\n    public void operation1() {\n        System.out.println(\"D\u5b9e\u73b0\u4e86operation1\");\n    }\n\n    @Override\n    public void operation4() {\n        System.out.println(\"D\u5b9e\u73b0\u4e86operation4\");\n    }\n\n    @Override\n    public void operation5() {\n        System.out.println(\"D\u5b9e\u73b0\u4e86operation5\");\n    }\n\n}\n\nclass A{\n    // A\u7c7b\u901a\u8fc7\u63a5\u53e3Interface1,Interface2 \u4f9d\u8d56B\u7c7b\uff0c\u4f46\u662f\u53ea\u4f1a\u4f7f\u7528\u5230123\u65b9\u6cd5\n    public void depend1(Interface1 i){\n        i.operation1();\n    }\n    public void depend2(Interface2 i){\n        i.operation2();\n    }\n    public void depend3(Interface2 i){\n        i.operation3();\n    }\n}\n\nclass C{\n    // C\u7c7b\u901a\u8fc7\u63a5\u53e3Interface1,interface3 \u4f9d\u8d56D\u7c7b\uff0c\u4f46\u662f\u53ea\u4f1a\u4f7f\u7528\u5230145\u65b9\u6cd5\n    public void depend1(Interface1 i){\n        i.operation1();\n    }\n    public void depend4(Interface3 i){\n        i.operation4();\n    }\n    public void depend5(Interface3 i){\n        i.operation5();\n    }\n}\n</code></pre> \u6848\u4f8b\u4e2d\u7c7bB\u548c\u7c7bD\u5206\u522b\u5b9e\u73b0\u4e86\u7c7bA\u548c\u7c7bC\u9700\u8981\u7684\u63a5\u53e3\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u63a5\u53e3\u9694\u79bb\u539f\u5219\u3002</p>"},{"location":"Java/designpattern/designpattern/#3","title":"3\u3001\u4f9d\u8d56\u5012\u8f6c\u539f\u5219","text":"<p>\u4f9d\u8d56\u5012\u8f6c\u539f\u5219\u662f\u6307\uff1a\u9ad8\u5c42\u6a21\u5757\u4e0d\u5e94\u8be5\u4f9d\u8d56\u5e95\u5c42\u6a21\u5757\uff0c\u4e8c\u8005\u90fd\u5e94\u8be5\u4f9d\u8d56\u5176\u62bd\u8c61\uff1b\u62bd\u8c61\u4e0d\u5e94\u8be5\u4f9d\u8d56\u7ec6\u8282\uff0c\u7ec6\u8282\u5e94\u8be5\u4f9d\u8d56\u62bd\u8c61\uff1b\u4e2d\u5fc3\u601d\u60f3\u662f\u9762\u5411\u63a5\u53e3\u7f16\u7a0b\uff1b\u8bbe\u8ba1\u7406\u5ff5\uff1a\u76f8\u5bf9\u4e8e\u7ec6\u8282\u7684\u591a\u53d8\u6027\uff0c\u62bd\u8c61\u7684\u4e1c\u897f\u8981\u7a33\u5b9a\u7684\u591a\uff0c\u4ee5\u62bd\u8c61\u4e3a\u57fa\u7840\u642d\u5efa\u7684\u67b6\u6784\u6bd4\u4ee5\u7ec6\u8282\u4e3a\u57fa\u7840\u7684\u67b6\u6784\u8981\u7a33\u5b9a\u7684\u591a\uff08\u5728Java\u4e2d\uff0c\u62bd\u8c61\u6307\u7684\u662f\u63a5\u53e3\u6216\u62bd\u8c61\u7c7b\uff0c\u7ec6\u8282\u5c31\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u7c7b\uff09\u3002\u4f7f\u7528\u63a5\u53e3\u6216\u62bd\u8c61\u7c7b\u7684\u76ee\u7684\u662f\u5236\u5b9a\u597d\u89c4\u8303\uff0c\u800c\u4e0d\u6d89\u53ca\u4efb\u4f55\u5177\u4f53\u7684\u64cd\u4f5c\uff0c\u628a\u5c55\u73b0\u7ec6\u8282\u7684\u4efb\u52a1\u4ea4\u7ed9\u4ed6\u4eec\u7684\u5b9e\u73b0\u7c7b\u53bb\u5b8c\u6210\u3002</p> <p>(1)\u6848\u4f8b1</p> <p>\u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff0c\u5b9e\u73b0\u4e86Person\u63a5\u6536\u6d88\u606f\u7684\u529f\u80fd\u3002 <pre><code>package com.principle.inversion;\n\npublic class DependencyInversion {\n    public static void main(String[] args) {\n        Person person=new Person();\n        person.receive(new Email());\n    }\n}\nclass Email{\n    public String getInfo(){\n        return \"\u7535\u5b50\u90ae\u4ef6\u4fe1\u606f:hello world!\";\n    }\n}\n// \u5b8c\u6210Person\u63a5\u6536\u6d88\u606f\u7684\u529f\u80fd\n// \u65b9\u5f0f1\nclass Person {\n    public void receive(Email email){\n        System.out.println(email.getInfo());\n    }\n}\n</code></pre> \u4f46\u662f\u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff0cPerson\u901a\u8fc7Email\u53d1\u9001\u6d88\u606f\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u901a\u8fc7\u5fae\u4fe1\u3001\u77ed\u4fe1\u7b49\u53d1\u9001\u6d88\u606f\uff0c\u6211\u4eec\u9700\u8981\u65b0\u589e\u7c7b\uff0c\u540c\u65f6\u4e5f\u8981\u5728Person\u4e2d\u65b0\u589e\u76f8\u5e94\u7684\u63a5\u6536\u65b9\u6cd5\u3002</p> <p>\uff082\uff09\u6848\u4f8b2</p> <p>\u5bf9\u4e0a\u4e00\u4e2a\u6848\u4f8b\u7684\u6539\u8fdb\uff0c\u5f15\u5165\u4e00\u4e2a\u62bd\u8c61\u63a5\u53e3IReceiver\uff0c\u8868\u793a\u63a5\u6536\u8005\uff0c\u8fd9\u6837Person\u7c7b\u4e0e\u63a5\u53e3IReceiver\u53d1\u751f\u4f9d\u8d56\uff0c\u56e0\u4e3aEmail,WeiXin\u7b49\u7b49\u5c5e\u4e8e\u63a5\u6536\u8303\u56f4\uff0c\u5b83\u4eec\u5404\u81ea\u5b9e\u73b0IReceiver\u63a5\u53e3\u5c31\u884c\u4e86\uff0c\u8fd9\u6837\u5c31\u662f\u4f9d\u8d56\u5012\u8f6c\u539f\u5219\u3002 <pre><code>package com.principle.inversion.improve;\n\npublic class DependencyInversion {\n    public static void main(String[] args) {\n        Person person=new Person();\n        person.receive(new Email());\n        person.receive(new WeiXin());\n    }\n}\n// \u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\ninterface IReceiver{\n    public String getInfo();\n}\nclass Email implements IReceiver{\n    public String getInfo(){\n        return \"\u7535\u5b50\u90ae\u4ef6\u4fe1\u606f:hello world!\";\n    }\n}\n// \u589e\u52a0\u5fae\u4fe1\nclass WeiXin implements IReceiver{\n    @Override\n    public String getInfo() {\n        return \"\u5fae\u4fe1\u6d88\u606f:hello wechat\";\n    }   \n}\n// \u5b8c\u6210Person\u63a5\u6536\u6d88\u606f\u7684\u529f\u80fd\n// \u65b9\u5f0f2\nclass Person {\n    public void receive(IReceiver receiver){\n        System.out.println(receiver.getInfo());\n    }\n}\n</code></pre> \u4ee5\u4e0a\u6848\u4f8b\u901a\u8fc7\u63a5\u53e3\u6765\u5b9e\u73b0\u4f9d\u8d56\u5012\u8f6c\u539f\u5219\u3002</p> <p>\uff083\uff09\u4e09\u79cd\u5b9e\u73b0\u4f9d\u8d56\u5012\u8f6c\u7684\u65b9\u5f0f</p> <p>\u5b9e\u73b0\u4f9d\u8d56\u5012\u8f6c\u9664\u4e86\u53ef\u4ee5\u901a\u8fc7\u4e0a\u9762\u7684\u63a5\u53e3\u4f20\u9012\u7684\u65b9\u5f0f\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u4f20\u9012\u548csetter\u65b9\u5f0f\u4f20\u9012\u3002 <pre><code>package com.principle.inversion;\n\npublic class DependencyPass {\n    public static void main(String[] args) {\n        ChangHong changHong1 = new ChangHong();\n        OpenAndClose openAndClose = new OpenAndClose();\n        openAndClose.open(changHong1);\n        // \u901a\u8fc7\u6784\u9020\u5668\u8fdb\u884c\u4f9d\u8d56\u4f20\u9012\n        OpenAndClose1 openAndClose1 = new OpenAndClose1(changHong1);\n        openAndClose1.open();\n        // \u901a\u8fc7 setter \u65b9\u6cd5\u8fdb\u884c\u4f9d\u8d56\u4f20\u9012\n        ChangHong2 changHong2 = new ChangHong2();\n        OpenAndClose2 openAndClose2 = new OpenAndClose2();\n        openAndClose2.setTv(changHong2);\n        openAndClose2.open();\n    }\n}\n\n// \u65b9\u5f0f 1\uff1a \u901a\u8fc7\u63a5\u53e3\u4f20\u9012\u5b9e\u73b0\u4f9d\u8d56\n// \u5f00\u5173\u7684\u63a5\u53e3\ninterface IOpenAndClose {\n    public void open(ITV tv); // \u62bd\u8c61\u65b9\u6cd5,\u63a5\u6536\u63a5\u53e3\n}\n\ninterface ITV { // ITV \u63a5\u53e3\n    public void play();\n}\n\nclass ChangHong implements ITV {\n    @Override\n    public void play() {\n        System.out.println(\"\u957f\u8679\u7535\u89c6\u673a\uff0c\u6253\u5f00\");\n    }\n}\n\n// \u5b9e\u73b0\u63a5\u53e3\nclass OpenAndClose implements IOpenAndClose {\n    public void open(ITV tv) {\n        tv.play();\n    }\n}\n\n// \u65b9\u5f0f 2: \u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u4f9d\u8d56\u4f20\u9012\ninterface IOpenAndClose1 {\n    public void open(); // \u62bd\u8c61\u65b9\u6cd5\n}\n\nclass OpenAndClose1 implements IOpenAndClose1 {\n    public ITV tv; // \u6210\u5458\n\n    public OpenAndClose1(ITV tv) { // \u6784\u9020\u5668\n        this.tv = tv;\n    }\n\n    public void open() {\n        this.tv.play();\n    }\n}\n\n// \u65b9\u5f0f 3 , \u901a\u8fc7 setter \u65b9\u6cd5\u4f20\u9012\ninterface IOpenAndClose2 {\n    public void open(); // \u62bd\u8c61\u65b9\u6cd5\n    public void setTv(ITV2 tv);\n}\n\ninterface ITV2 { // ITV \u63a5\u53e3\n    public void play();\n}\n\nclass OpenAndClose2 implements IOpenAndClose2 {\n    private ITV2 tv;\n\n    public void setTv(ITV2 tv) {\n        this.tv = tv;\n    }\n\n    public void open() {\n        this.tv.play();\n    }\n}\n\nclass ChangHong2 implements ITV2 {\n    @Override\n    public void play() {\n        System.out.println(\"\u957f\u8679\u7535\u89c6\u673a\uff0c\u6253\u5f00\");\n    }\n}\n</code></pre> \u4f9d\u8d56\u5012\u8f6c\u539f\u5219\u4e2d\u9700\u8981\u6ce8\u610f\uff1a\u5e95\u5c42\u6a21\u5757\u5c3d\u91cf\u90fd\u8981\u7531\u62bd\u8c61\u7c7b\u6216\u63a5\u53e3\uff0c\u6216\u8005\u4e24\u8005\u90fd\u6709\uff0c\u7a0b\u5e8f\u7a33\u5b9a\u6027\u66f4\u597d\uff0c\u53d8\u91cf\u7684\u58f0\u660e\u7c7b\u578b\u5c3d\u91cf\u662f\u62bd\u8c61\u7c7b\u6216\u63a5\u53e3\uff0c\u8fd9\u6837\u6211\u4eec\u7684\u53d8\u91cf\u5f15\u7528\u548c\u5b9e\u9645\u5bf9\u8c61\u95f4\uff0c\u5c31\u5b58\u5728\u4e00\u4e2a\u7f13\u51b2\u5c42\uff0c\u5229\u4e8e\u7a0b\u5e8f\u6269\u5c55\u548c\u4f18\u5316\uff0c\u7ee7\u627f\u9075\u5faa\u91cc\u6c0f\u66ff\u6362\u539f\u5219\u3002</p>"},{"location":"Java/designpattern/designpattern/#4","title":"4\u3001\u91cc\u6c0f\u66ff\u6362\u539f\u5219","text":"<p>\u7ee7\u627f\u5b58\u5728\u7684\u95ee\u9898\uff1a\u7ee7\u627f\u5305\u542b\u8fd9\u6837\u4e00\u5c42\u542b\u4e49\uff1a\u7236\u7c7b\u4e2d\u51e1\u662f\u5df2\u7ecf\u5b9e\u73b0\u597d\u7684\u65b9\u6cd5\uff0c\u5b9e\u9645\u4e0a\u662f\u5728\u8bbe\u5b9a\u89c4\u8303\u548c\u5951\u7ea6\uff0c\u867d\u7136\u5b83\u4e0d\u5f3a\u5236\u8981\u6c42\u6240\u6709\u7684\u5b50\u7c7b\u5fc5\u987b\u9075\u5faa\u8fd9\u4e9b\u5951\u7ea6\uff0c\u4f46\u662f\u5982\u679c\u5b50\u7c7b\u5bf9\u8fd9\u4e9b\u5df2\u7ecf\u5b9e\u73b0\u7684\u65b9\u6cd5\u4efb\u610f\u4fee\u6539\uff0c\u5c31\u4f1a\u5bf9\u6574\u4e2a\u7ee7\u627f\u4f53\u7cfb\u9020\u6210\u7834\u574f\u3002 \u7ee7\u627f\u5728\u7ed9\u7a0b\u5e8f\u8bbe\u8ba1\u5e26\u6765\u4fbf\u5229\u7684\u540c\u65f6\uff0c\u4e5f\u5e26\u6765\u4e86\u5f0a\u7aef\u3002\u6bd4\u5982\u4f7f\u7528\u7ee7\u627f\u4f1a\u7ed9\u7a0b\u5e8f\u5e26\u6765\u4fb5\u5165\u6027\uff0c\u7a0b\u5e8f\u7684\u53ef\u79fb\u690d\u6027\u964d\u4f4e\uff0c\u589e\u52a0\u5bf9\u8c61\u95f4\u7684\u8026\u5408\u6027\uff0c\u5982\u679c\u4e00\u4e2a\u7c7b\u88ab\u5176\u4ed6\u7684\u7c7b\u6240\u7ee7\u627f\uff0c\u5219\u5f53\u8fd9\u4e2a\u7c7b\u9700\u8981\u4fee\u6539\u65f6\uff0c\u5fc5\u987b\u8003\u8651\u5230\u6240\u6709\u7684\u5b50\u7c7b\uff0c\u5e76\u4e14\u7236\u7c7b\u4fee\u6539\u540e\uff0c\u6240\u6709\u6d89\u53ca\u5230\u5b50\u7c7b\u7684\u529f\u80fd\u90fd\u6709\u53ef\u80fd\u4ea7\u751f\u6545\u969c\u3002</p> <p>\u91cc\u6c0f\u66ff\u6362\u539f\u5219\u7684\u4ecb\u7ecd\uff1a \u5982\u679c\u5bf9\u6bcf\u4e2a\u7c7b\u578b\u4e3a T1 \u7684\u5bf9\u8c61 o1\uff0c\u90fd\u6709\u7c7b\u578b\u4e3a T2 \u7684\u5bf9\u8c61 o2\uff0c\u4f7f\u5f97\u4ee5 T1 \u5b9a\u4e49\u7684\u6240\u6709\u7a0b\u5e8f P \u5728\u6240\u6709\u7684\u5bf9\u8c61 o1 \u90fd\u4ee3\u6362\u6210 o2 \u65f6\uff0c\u7a0b\u5e8f P \u7684\u884c\u4e3a\u6ca1\u6709\u53d1\u751f\u53d8\u5316\uff0c\u90a3\u4e48\u7c7b\u578b T2 \u662f\u7c7b\u578b T1 \u7684\u5b50\u7c7b\u578b\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u6240\u6709\u5f15\u7528\u57fa\u7c7b\u7684\u5730\u65b9\u5fc5\u987b\u80fd\u900f\u660e\u5730\u4f7f\u7528\u5176\u5b50\u7c7b\u7684\u5bf9\u8c61\u3002\u5728\u7ee7\u627f\u65f6\uff0c\u5b50\u7c7b\u4e2d\u5c3d\u91cf\u4e0d\u8981\u91cd\u5199\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u5b9e\u9645\u4e0a\uff0c\u7ee7\u627f\u4f7f\u4e24\u4e2a\u7c7b\u7684\u8026\u5408\u6027\u589e\u5f3a\u4e86\uff0c\u5728\u9002\u5f53\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u901a\u8fc7\u805a\u5408\u3001\u7ec4\u5408\u3001\u4f9d\u8d56\u6765\u89e3\u51b3\u95ee\u9898\u3002</p> <p>\uff081\uff09\u6848\u4f8b1 <pre><code>package com.principle.liskov;\n\npublic class Liskov {\n    public static void main(String[] args) {\n        A a=new A();\n        System.out.println(\"11-3=\"+a.func1(11, 3));\n        System.out.println(\"1-8=\"+a.func1(1, 8));\n        System.out.println(\"--------------------------\");\n        B b=new B();\n        System.out.println(\"11-3=\"+b.func1(11, 3));\n        System.out.println(\"1-8=\"+b.func1(1, 8));\n        System.out.println(\"11+3+9=\"+b.func2(11, 3));\n    }\n}\n// A\u7c7b\uff0c\u8fd4\u56de\u4e24\u4e2a\u6570\u5b57\u7684\u5dee\nclass A {\n    public int func1(int num1,int num2){\n        return num1-num2;\n    }\n}\n// B\u7c7b\uff0c\u7ee7\u627f\u4e86A\u7c7b\nclass B extends A{\n    public int func1(int a, int b) {\n        return a+b;\n    }\n    public int func2(int a,int b){\n        return func1(a,b)+9;\n    }\n}\n</code></pre></p> <p>\u6211\u4eec\u53d1\u73b0\u539f\u6765\u8fd0\u884c\u6b63\u5e38\u7684\u76f8\u51cf\u529f\u80fd\u53d1\u751f\u4e86\u9519\u8bef\u3002\u539f\u56e0\u5c31\u662f\u7c7b B \u65e0\u610f\u4e2d\u91cd\u5199\u4e86\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u9020\u6210\u539f\u6709\u529f\u80fd\u51fa\u73b0\u9519\u8bef\u3002\u5728\u5b9e\u9645\u7f16\u7a0b\u4e2d\uff0c\u6211\u4eec\u5e38\u5e38\u4f1a\u901a\u8fc7\u91cd\u5199\u7236\u7c7b\u7684\u65b9\u6cd5\u5b8c\u6210\u65b0\u7684\u529f\u80fd\uff0c\u8fd9\u6837\u5199\u8d77\u6765\u867d\u7136\u7b80\u5355\uff0c\u4f46\u6574\u4e2a\u7ee7\u627f\u4f53\u7cfb\u7684\u590d\u7528\u6027\u4f1a\u6bd4\u8f83\u5dee\u3002\u7279\u522b\u662f\u8fd0\u884c\u591a\u6001\u6bd4\u8f83\u9891\u7e41\u7684\u65f6\u5019\u3002 \u901a\u7528\u7684\u505a\u6cd5\u662f\uff1a\u539f\u6765\u7684\u7236\u7c7b\u548c\u5b50\u7c7b\u90fd\u7ee7\u627f\u4e00\u4e2a\u66f4\u901a\u4fd7\u7684\u57fa\u7c7b\uff0c\u539f\u6709\u7684\u7ee7\u627f\u5173\u7cfb\u53bb\u6389\uff0c\u91c7\u7528\u4f9d\u8d56\uff0c\u805a\u5408\uff0c\u7ec4\u5408\u7b49\u5173\u7cfb\u4ee3\u66ff\u3002</p> <p>\uff082\uff09\u6848\u4f8b\u4e8c <pre><code>package com.principle.liskov.improve;\n\npublic class Liskov {\n    public static void main(String[] args) {\n        A a=new A();\n        System.out.println(\"11-3=\"+a.func1(11, 3));\n        System.out.println(\"1-8=\"+a.func1(1, 8));\n        System.out.println(\"--------------------------\");\n        B b=new B();\n        System.out.println(\"11+3=\"+b.func1(11, 3));\n        System.out.println(\"1+8=\"+b.func1(1, 8));\n        System.out.println(\"11+3+9=\"+b.func2(11, 3));\n        System.out.println(\"11-3=\"+b.func3(11, 3));\n    }\n}\n//\u521b\u5efa\u4e00\u4e2a\u66f4\u52a0\u57fa\u7840\u7684\u57fa\u7c7b\nclass Base {\n    // \u628a\u66f4\u52a0\u57fa\u7840\u7684\u65b9\u6cd5\u548c\u6210\u5458\u5199\u5230\u79ef\u7d2f\u91cc\u9762\n}\n// A\u7c7b\uff0c\u8fd4\u56de\u4e24\u4e2a\u6570\u5b57\u7684\u5dee\nclass A extends Base {\n    public int func1(int num1,int num2){\n        return num1-num2;\n    }\n}\n// B\u7c7b\uff0c\u7ee7\u627f\u4e86Base\u7c7b\nclass B extends Base{\n    // \u5982\u679cB\u9700\u8981\u4f7f\u7528A\u7c7b\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528\u7ec4\u5408\u5173\u7cfb\n    private A a=new A();\n    public int func1(int a, int b) {\n        return a+b;\n    }\n    public int func2(int a,int b){\n        return func1(a,b)+9;\n    }\n    //\u6211\u4eec\u4ecd\u7136\u8981\u4f7f\u7528A\u7684\u65b9\u6cd5\n    public int func3(int a,int b){\n        return this.a.func1(a, b);\n    }\n}\n</code></pre> \u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u66f4\u52a0\u57fa\u7840\u7684\u57fa\u7c7b\uff0c\u628a\u66f4\u52a0\u57fa\u7840\u7684\u65b9\u6cd5\u548c\u6210\u5458\u5199\u5230Base\u7c7b\u4e2d\uff0c\u4f7fA\u548cB\u7c7b\u540c\u65f6\u7ee7\u627f\u57fa\u7c7bBase\uff0c\u5982\u679cB\u8981\u4f7f\u7528A\u7c7b\u4e2d\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528\u7ec4\u5408\u5173\u7cfb\u3002</p>"},{"location":"Java/designpattern/designpattern/#5","title":"5\u3001\u5f00\u95ed\u539f\u5219","text":"<p>\u5f00\u95ed\u539f\u5219\uff08Open Closed Principle\uff09\u662f\u7f16\u7a0b\u4e2d\u6700\u57fa\u7840\u3001\u6700\u91cd\u8981\u7684\u8bbe\u8ba1\u539f\u5219\u3002\u4e00\u4e2a\u8f6f\u4ef6\u5b9e\u4f53\u5982\u7c7b\uff0c\u6a21\u5757\u548c\u51fd\u6570\u5e94\u8be5\u5bf9\u6269\u5c55\u5f00\u653e\uff08\u5bf9\u63d0\u4f9b\u65b9\uff09\uff0c\u5bf9\u4fee\u6539\u5173\u95ed\uff08\u5bf9\u4f7f\u7528\u65b9\uff09\u3002\u7528\u62bd\u8c61\u6784\u5efa\u6846\u67b6\uff0c\u7528\u5b9e\u73b0\u6269\u5c55\u7ec6\u8282\u3002\u5f53\u8f6f\u4ef6\u9700\u8981\u53d8\u5316\u65f6\uff0c\u5c3d\u91cf\u901a\u8fc7\u6269\u5c55\u8f6f\u4ef6\u5b9e\u4f53\u7684\u884c\u4e3a\u6765\u5b9e\u73b0\u53d8\u5316\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u4fee\u6539\u5df2\u6709\u4ee3\u7801\u6765\u5b9e\u73b0\u53d8\u5316\u3002</p> <p>\uff081\uff09\u6848\u4f8b1 <pre><code>package com.principle.ocp;\n\npublic class Ocp {\n    public static void main(String[] args) {\n        GraphicEditor graphicEditor=new GraphicEditor();\n        graphicEditor.drawRectangle(new Rectangle());\n        graphicEditor.drawCircle(new Circle()); \n    }\n}\n\n// \u8fd9\u662f\u4e00\u4e2a\u7528\u4e8e\u7ed8\u56fe\u7684\u7c7b\nclass GraphicEditor{\n    public void drawShape(Shape s){\n        if(s.m_type==1){\n            drawRectangle(s);\n        }else if(s.m_type==2){\n            drawCircle(s);\n        }\n    }\n    public void drawRectangle(Shape r){\n        System.out.println(\"\u7ed8\u5236\u77e9\u5f62\");\n    }\n    public void drawCircle(Shape r){\n        System.out.println(\"\u7ed8\u5236\u5706\u5f62\");\n    }\n}\nclass Shape{\n    int m_type;\n}\nclass Rectangle extends Shape{\n    Rectangle(){\n        super.m_type=1;\n    }\n}\nclass Circle extends Shape{\n    Circle(){\n        super.m_type=2;\n    }\n}\n</code></pre> \u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff0c\u5e76\u6ca1\u6709\u9075\u5b88\u5f00\u95ed\u539f\u5219\uff0c\u5373\u5f53\u6211\u4eec\u7ed9\u7c7b\u589e\u52a0\u65b0\u529f\u80fd\u7684\u65f6\u5019\uff0c\u5c3d\u91cf\u4e0d\u4fee\u6539\u4ee3\u7801\uff0c\u6216\u8005\u5c3d\u53ef\u80fd\u5c11\u4fee\u6539\u4ee3\u7801\uff0c\u4f46\u662f\u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u65b0\u589e\u4e00\u4e2a\u56fe\u5f62\u79cd\u7c7b\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u4fee\u6539\u8f83\u591a\u7684\u5730\u65b9\u3002</p> <p>\uff082\uff09\u6848\u4f8b2</p> <p>\u628a\u521b\u5efa Shape \u7c7b\u505a\u6210\u62bd\u8c61\u7c7b\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e2a\u62bd\u8c61\u7684 draw \u65b9\u6cd5\uff0c\u8ba9\u5b50\u7c7b\u53bb\u5b9e\u73b0\u5373\u53ef\uff0c\u8fd9\u6837\u6211\u4eec\u6709\u65b0\u7684\u56fe\u5f62\u79cd\u7c7b\u65f6\uff0c\u53ea\u9700\u8981\u8ba9\u65b0\u7684\u56fe\u5f62\u7c7b\u7ee7\u627f Shape\uff0c\u5e76\u5b9e\u73b0 draw \u65b9\u6cd5\u5373\u53ef\uff0c\u4f7f\u7528\u65b9\u7684\u4ee3\u7801\u5c31\u4e0d\u9700\u8981\u4fee\u6539\uff0c\u6ee1\u8db3\u4e86\u5f00\u95ed\u539f\u5219\u3002 <pre><code>package com.principle.ocp.improve;\n\npublic class Ocp {\n    public static void main(String[] args) {\n        GraphicEditor graphicEditor=new GraphicEditor();\n        graphicEditor.drawShape(new Rectangle());\n        graphicEditor.drawShape(new Circle()); \n    }\n}\n\n// \u8fd9\u662f\u4e00\u4e2a\u7528\u4e8e\u7ed8\u56fe\u7684\u7c7b\nclass GraphicEditor{\n    public void drawShape(Shape s){\n       s.draw();\n    }\n}\nabstract class Shape{\n    int m_type;\n    public abstract void draw();//\u62bd\u8c61\u65b9\u6cd5\n}\nclass Rectangle extends Shape{\n    Rectangle(){\n        super.m_type=1;\n    }\n\n    @Override\n    public void draw() {\n        System.out.println(\"\u7ed8\u5236\u77e9\u5f62\");\n    }\n\n\n}\nclass Circle extends Shape{\n    Circle(){\n        super.m_type=2;\n    }\n    @Override\n    public void draw() {\n        System.out.println(\"\u7ed8\u5236\u5706\u5f62\");\n    }\n}\n</code></pre> \u8fd9\u4e2a\u6848\u4f8b\u6ee1\u8db3\u4e86\u5f00\u95ed\u539f\u5219\uff0c\u5728\u65b0\u589e\u529f\u80fd\u7684\u65f6\u5019\uff0c\u4fee\u6539\u5c11\u91cf\u7684\u4ee3\u7801\u5c31\u53ef\u4ee5\u5b8c\u6210\u3002</p>"},{"location":"Java/designpattern/designpattern/#6","title":"6\u3001\u8fea\u7c73\u7279\u6cd5\u5219","text":"<p>\u8fea\u7c73\u7279\u6cd5\u5219\u53c8\u53eb\u6700\u5c11\u77e5\u9053\u539f\u5219\uff0c\u5373\u4e00\u4e2a\u7c7b\u5bf9\u81ea\u5df1\u4f9d\u8d56\u7684\u7c7b\u77e5\u9053\u7684\u8d8a\u5c11\u8d8a\u597d\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u88ab\u4f9d\u8d56\u7684\u7c7b\u4e0d\u7ba1\u591a\u4e48\u590d\u6742\uff0c\u90fd\u5c3d\u91cf\u5c06\u903b\u8f91\u5c01\u88c5\u5728\u7c7b\u7684\u5185\u90e8\uff0c\u5bf9\u5916\u9664\u4e86\u63d0\u4f9b\u7684public\u65b9\u6cd5\uff0c\u4e0d\u5bf9\u5916\u6cc4\u9732\u4efb\u4f55\u4fe1\u606f\u3002\u6216\u8005\u66f4\u7b80\u5355\u7684\u5b9a\u4e49\uff1a\u53ea\u4e0e\u76f4\u63a5\u670b\u53cb\u901a\u4fe1\u3002 \u76f4\u63a5\u7684\u670b\u53cb\uff1a\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u4f1a\u4e0e\u5176\u4ed6\u5bf9\u8c61\u6709\u8026\u5408\u5173\u7cfb\uff0c\u53ea\u8981\u4e24\u4e2a\u5bf9\u8c61\u4e4b\u95f4\u6709\u8026\u5408\u5173\u7cfb\uff0c\u6211\u4eec\u5c31\u8bf4\u8fd9\u4e24\u4e2a\u5bf9\u8c61\u4e4b\u95f4\u662f\u670b\u53cb\u5173\u7cfb\u3002\u8026\u5408\u7684\u65b9\u5f0f\u5f88\u591a\uff0c\u4f9d\u8d56\uff0c\u5173\u8054\uff0c\u7ec4\u5408\uff0c\u805a\u5408\u7b49\u3002\u5176\u4e2d\uff0c\u6211\u4eec\u79f0\u51fa\u73b0\u7684\u6210\u5458\u53d8\u91cf\uff0c\u65b9\u6cd5\u53c2\u6570\uff0c\u65b9\u6cd5\u8fd4\u56de\u503c\u4e2d\u7684\u7c7b\u4e3a\u76f4\u63a5\u7684\u670b\u53cb\uff0c\u800c\u51fa\u73b0\u5728\u5c40\u90e8\u53d8\u91cf\u4e2d\u7684\u7c7b\u4e0d\u662f\u76f4\u63a5\u7684\u670b\u53cb\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u964c\u751f\u7684\u7c7b\u6700\u597d\u4e0d\u8981\u4ee5\u5c40\u90e8\u53d8\u91cf\u7684\u5f62\u5f0f\u51fa\u73b0\u5728\u7c7b\u7684\u5185\u90e8\u3002</p> <p>\uff081\uff09\u6848\u4f8b1</p> <p>\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff1a\u6709\u4e00\u4e2a\u5b66\u6821\uff0c\u4e0b\u5c5e\u6709\u5404\u4e2a\u5b66\u9662\u548c\u603b\u90e8\uff0c\u6253\u5370\u51fa\u5b66\u6821\u603b\u90e8\u5458\u5de5 ID \u548c\u5b66\u9662\u5458\u5de5\u7684 id\u3002 <pre><code>package com.principle.demeter;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Demeter1 {\n    public static void main(String[] args) {\n        // \u521b\u5efa\u4e00\u4e2aSchoolManager\u5bf9\u8c61\n        SchoolManager schoolManager=new SchoolManager();\n        schoolManager.printAllEmployee(new CollegeManager());\n    }   \n}\nclass Employee {\n    private String id;\n\n    public void setId(String id) {\n        this.id = id;\n    }\n    public String getId() {\n        return id;\n    }\n}\nclass CollegeEmployee {\n    private String id;\n    public void setId(String id) {\n        this.id = id;\n    }\n    public String getId() {\n        return id;\n    }\n}\n\nclass CollegeManager {\n    public List&lt;CollegeEmployee&gt; getAllEmployee() {\n        List&lt;CollegeEmployee&gt; list = new ArrayList&lt;CollegeEmployee&gt;();\n        for (int i = 0; i &lt; 10; i++) {\n            CollegeEmployee emp = new CollegeEmployee();\n            emp.setId(\"\u5b66\u9662\u5458\u5de5id= \" + i);\n            list.add(emp);\n        }\n        return list;\n    }\n}\n// SchoolManager\u7c7b\u7684\u76f4\u63a5\u670b\u53cb\u6709Employee\u548cCollegeManager\n// CollegeEmployee\u4e0d\u662f\u76f4\u63a5\u670b\u53cb\uff0c\u8fd9\u6837\u505a\u8fdd\u53cd\u4e86\u8fea\u7c73\u7279\u6cd5\u5219\nclass SchoolManager {\n    public List&lt;Employee&gt; getAllEmployee() {\n        List&lt;Employee&gt; list = new ArrayList&lt;Employee&gt;();    \n        for (int i = 0; i &lt; 5; i++) {\n            Employee emp = new Employee();\n            emp.setId(\"\u5b66\u6821\u603b\u90e8\u5458\u5de5id= \" + i);\n            list.add(emp);\n        }\n        return list;\n    }\n    void printAllEmployee(CollegeManager sub) { \n        List&lt;CollegeEmployee&gt; list1 = sub.getAllEmployee();\n        System.out.println(\"------------\u5206\u516c\u53f8\u5458\u5de5------------\");\n        // CollegeEmployee\u4e0d\u662fSchoolManager\u7684\u76f4\u63a5\u670b\u53cb\n        // \u56e0\u4e3a\u5b83\u662f\u4ee5\u5c40\u90e8\u53d8\u91cf\u7684\u5f62\u5f0f\u5b58\u5728\n        for (CollegeEmployee e : list1) {\n            System.out.println(e.getId());\n        }\n        List&lt;Employee&gt; list2 = this.getAllEmployee();\n        System.out.println(\"------------\u5b66\u6821\u603b\u90e8\u5458\u5de5------------\");\n        for (Employee e : list2) {\n            System.out.println(e.getId());\n        }\n    }\n}\n</code></pre> \u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2dSchoolManager\u7c7b\u7684\u76f4\u63a5\u670b\u53cb\u6709Employee\u548cCollegeManager\uff0cCollegeEmployee\u4e0d\u662f\u76f4\u63a5\u670b\u53cb\uff08\u56e0\u4e3a\u5b83\u662f\u4ee5\u5c40\u90e8\u53d8\u91cf\u7684\u5f62\u5f0f\u5b58\u5728\u7684\uff09\uff0c\u8fd9\u6837\u505a\u8fdd\u53cd\u4e86\u8fea\u7c73\u7279\u6cd5\u5219\u3002</p> <p>\uff082)\u6848\u4f8b2</p> <p>\u524d\u9762\u8bbe\u8ba1\u7684\u95ee\u9898\u5728\u4e8e SchoolManager \u4e2d\uff0cCollegeEmployee \u7c7b\u5e76\u4e0d\u662f SchoolManager \u7c7b\u7684\u76f4\u63a5\u670b\u53cb\u3002 \u6309\u7167\u8fea\u7c73\u7279\u6cd5\u5219\uff0c\u5e94\u8be5\u907f\u514d\u7c7b\u4e2d\u51fa\u73b0\u8fd9\u6837\u975e\u76f4\u63a5\u670b\u53cb\u5173\u7cfb\u7684\u8026\u5408\u3002 <pre><code>package com.principle.demeter.improve;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Demeter1 {\n    public static void main(String[] args) {\n        // \u521b\u5efa\u4e00\u4e2aSchoolManager\u5bf9\u8c61\n        SchoolManager schoolManager=new SchoolManager();\n        schoolManager.printAllEmployee(new CollegeManager());\n    }\n}\n\nclass Employee {\n    private String id;\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getId() {\n        return id;\n    }\n}\n\n\nclass CollegeEmployee {\n    private String id;\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getId() {\n        return id;\n    }\n}\n\n\nclass CollegeManager {\n    public List&lt;CollegeEmployee&gt; getAllEmployee() {\n        List&lt;CollegeEmployee&gt; list = new ArrayList&lt;CollegeEmployee&gt;();\n        for (int i = 0; i &lt; 10; i++) {\n            CollegeEmployee emp = new CollegeEmployee();\n            emp.setId(\"\u5b66\u9662\u5458\u5de5id= \" + i);\n            list.add(emp);\n        }\n        return list;\n    }\n\n    // \u8f93\u51fa\u5b66\u9662\u5458\u5de5\u7684\u4fe1\u606f\n    public void printEmployee(){\n        List&lt;CollegeEmployee&gt; list1 = this.getAllEmployee();\n        System.out.println(\"------------\u5b66\u9662\u5458\u5de5------------\");\n        for (CollegeEmployee e : list1) {\n            System.out.println(e.getId());\n        }\n    }\n\n}\n\nclass SchoolManager {\n    public List&lt;Employee&gt; getAllEmployee() {\n        List&lt;Employee&gt; list = new ArrayList&lt;Employee&gt;();\n\n        for (int i = 0; i &lt; 5; i++) {\n            Employee emp = new Employee();\n            emp.setId(\"\u5b66\u6821\u603b\u90e8\u5458\u5de5id= \" + i);\n            list.add(emp);\n        }\n        return list;\n    }\n\n    void printAllEmployee(CollegeManager sub) {\n        sub.printEmployee();        \n        List&lt;Employee&gt; list2 = this.getAllEmployee();\n        System.out.println(\"------------\u5b66\u6821\u603b\u90e8\u5458\u5de5------------\");\n        for (Employee e : list2) {\n            System.out.println(e.getId());\n        }\n    }\n}\n</code></pre> \u8fea\u7c73\u7279\u6cd5\u5219\u7684\u6838\u5fc3\u662f\u964d\u4f4e\u7c7b\u4e4b\u95f4\u7684\u8026\u5408,  \u4f46\u662f\u6ce8\u610f\uff1a\u7531\u4e8e\u6bcf\u4e2a\u7c7b\u90fd\u51cf\u5c11\u4e86\u4e0d\u5fc5\u8981\u7684\u4f9d\u8d56\uff0c\u56e0\u6b64\u8fea\u7c73\u7279\u6cd5\u5219\u53ea\u662f\u8981\u6c42\u964d\u4f4e\u7c7b\u95f4(\u5bf9\u8c61\u95f4)\u8026\u5408\u5173\u7cfb\uff0c\u5e76\u4e0d\u662f\u8981\u6c42\u5b8c\u5168\u6ca1\u6709\u4f9d\u8d56\u5173\u7cfb\u3002</p>"},{"location":"Java/designpattern/designpattern/#7","title":"7\u3001\u5408\u6210\u590d\u7528\u539f\u5219","text":"<p>\u5408\u6210\u590d\u7528\u539f\u5219\u662f\u5c3d\u91cf\u4f7f\u7528\u5408\u6210/\u805a\u5408\u7684\u65b9\u5f0f\uff0c\u800c\u4e0d\u662f\u7ee7\u627f\u3002\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u627e\u51fa\u5e94\u7528\u4e2d\u53ef\u80fd\u9700\u8981\u53d8\u5316\u4e4b\u5904\uff0c\u628a\u5b83\u4eec\u72ec\u7acb\u51fa\u6765\uff0c\u4e0d\u8981\u548c\u90a3\u4e9b\u4e0d\u9700\u8981\u53d8\u5316\u7684\u4ee3\u7801\u6df7\u5728\u4e00\u8d77\u3002\u9488\u5bf9\u63a5\u53e3\u7f16\u7a0b\uff0c\u800c\u4e0d\u662f\u9488\u5bf9\u5b9e\u73b0\u7f16\u7a0b\uff0c\u4e3a\u4e86\u4ea4\u4e92\u5bf9\u8c61\u4e4b\u95f4\u7684\u677e\u8026\u5408\u8bbe\u8ba1\u800c\u52aa\u529b\u3002</p>"},{"location":"Java/designpattern/designpattern/#_3","title":"\u4e09\u3001\u8bbe\u8ba1\u6a21\u5f0f\u6982\u8ff0","text":"<p>\u8bbe\u8ba1\u6a21\u5f0f\u662f\u7a0b\u5e8f\u5458\u5728\u9762\u5bf9\u540c\u7c7b\u8f6f\u4ef6\u5de5\u7a0b\u8bbe\u8ba1\u95ee\u9898\u6240\u603b\u7ed3\u51fa\u6765\u7684\u6709\u7528\u7684\u7ecf\u9a8c\uff0c\u6a21\u5f0f\u4e0d\u662f\u4ee3\u7801\uff0c\u800c\u662f\u67d0\u7c7b\u95ee\u9898\u7684\u901a\u7528\u89e3\u51b3\u65b9\u6848\uff0c\u8bbe\u8ba1\u6a21\u5f0f\uff08Design pattern\uff09\u4ee3\u8868\u4e86\u6700\u4f73\u7684\u5b9e\u8df5\u3002\u8fd9\u4e9b\u89e3\u51b3\u65b9\u6848\u662f\u4f17\u591a\u8f6f\u4ef6\u5f00\u53d1\u4eba\u5458\u7ecf\u8fc7\u76f8\u5f53\u957f\u7684\u4e00\u6bb5\u65f6\u95f4\u7684\u8bd5\u9a8c\u548c\u9519\u8bef\u603b\u7ed3\u51fa\u6765\u7684\u3002\u8bbe\u8ba1\u6a21\u5f0f\u7684\u672c\u8d28\u63d0\u9ad8\u8f6f\u4ef6\u7684\u7ef4\u62a4\u6027\u3001\u901a\u7528\u6027\u548c\u6269\u5c55\u6027\uff0c\u5e76\u964d\u4f4e\u8f6f\u4ef6\u7684\u590d\u6742\u5ea6\u3002\u8bbe\u8ba1\u6a21\u5f0f\u5e76\u4e0d\u5c40\u9650\u4e8e\u67d0\u79cd\u8bed\u8a00\uff0cjava\uff0cphp\uff0cc++ \u90fd\u6709\u8bbe\u8ba1\u6a21\u5f0f\u3002\u8bbe\u8ba1\u6a21\u5f0f\u5206\u4e3a\u4e09\u79cd\u7c7b\u578b\uff0c\u517123\u79cd\u3002</p> <ul> <li>\u521b\u5efa\u578b\u6a21\u5f0f\uff1a\u5355\u4f8b\u6a21\u5f0f\u3001\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u3001\u539f\u578b\u6a21\u5f0f\u3001\u5efa\u9020\u8005\u6a21\u5f0f\u3001\u5de5\u5382\u6a21\u5f0f\u3002</li> <li>\u7ed3\u6784\u578b\u6a21\u5f0f\uff1a\u9002\u914d\u5668\u6a21\u5f0f\u3001\u6865\u63a5\u6a21\u5f0f\u3001\u88c5\u9970\u6a21\u5f0f\u3001\u7ec4\u5408\u6a21\u5f0f\u3001\u5916\u89c2\u6a21\u5f0f\u3001\u4eab\u5143\u6a21\u5f0f\u3001\u4ee3\u7406\u6a21\u5f0f\u3002</li> <li>\u884c\u4e3a\u578b\u6a21\u5f0f\uff1a \u6a21\u7248\u65b9\u6cd5\u6a21\u5f0f\u3001\u547d\u4ee4\u6a21\u5f0f\u3001\u8bbf\u95ee\u8005\u6a21\u5f0f\u3001\u8fed\u4ee3\u5668\u6a21\u5f0f\u3001\u89c2\u5bdf\u8005\u6a21\u5f0f\u3001\u4e2d\u4ecb\u8005\u6a21\u5f0f\u3001\u5907\u5fd8\u5f55\u6a21\u5f0f\u3001\u89e3\u91ca\u5668\u6a21\u5f0f\uff08Interpreter \u6a21\u5f0f\uff09\u3001\u72b6\u6001\u6a21\u5f0f\u3001\u7b56\u7565\u6a21\u5f0f\u3001\u804c\u8d23\u94fe\u6a21\u5f0f(\u8d23\u4efb\u94fe\u6a21\u5f0f)</li> </ul> <p>\u4e0d\u540c\u7684\u4e66\u7c4d\u4e0a\u5bf9\u5206\u7c7b\u548c\u540d\u79f0\u7565\u6709\u5dee\u5f02</p>"},{"location":"Java/designpattern/designpattern/#_4","title":"\u56db\u3001\u5355\u4f8b\u8bbe\u8ba1\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#1_2","title":"1\u3001\u7b80\u4ecb","text":"<p>\u6240\u8c13\u7c7b\u7684\u5355\u4f8b\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5c31\u662f\u91c7\u53d6\u4e00\u5b9a\u7684\u65b9\u6cd5\u4fdd\u8bc1\u5728\u6574\u4e2a\u7684\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u5bf9\u67d0\u4e2a\u7c7b\u53ea\u80fd\u5b58\u5728\u4e00\u4e2a\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u5e76\u4e14\u8be5\u7c7b\u53ea\u63d0\u4f9b\u4e00\u4e2a\u53d6\u5f97\u5176\u5bf9\u8c61\u5b9e\u4f8b\u7684\u65b9\u6cd5(\u9759\u6001\u65b9\u6cd5)\u3002</p> <p>\u6bd4\u5982 Hibernate \u7684 SessionFactory\uff0c\u5b83\u5145\u5f53\u6570\u636e\u5b58\u50a8\u6e90\u7684\u4ee3\u7406\uff0c\u5e76\u8d1f\u8d23\u521b\u5efa Session \u5bf9\u8c61\u3002SessionFactory \u5e76\u4e0d\u662f\u8f7b\u91cf\u7ea7\u7684\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u9879\u76ee\u901a\u5e38\u53ea\u9700\u8981\u4e00\u4e2a SessionFactory \u5c31\u591f\uff0c\u8fd9\u662f\u5c31\u4f1a\u4f7f\u7528\u5230\u5355\u4f8b\u6a21\u5f0f\u3002</p>"},{"location":"Java/designpattern/designpattern/#2_2","title":"2\u3001\u5355\u4f8b\u8bbe\u8ba1\u6a21\u5f0f\u7684\u516b\u79cd\u65b9\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#1_3","title":"\uff081\uff09\u997f\u6c49\u5f0f\uff08\u9759\u6001\u5e38\u91cf\uff09","text":"<p>\u521b\u5efa\u4e00\u4e2a\u997f\u6c49\u5f0f\uff08\u9759\u6001\u5e38\u91cf\uff09\u5e94\u7528\u5b9e\u4f8b\u7684\u6b65\u9aa4\u53ef\u4ee5\u5206\u4e3a\u4e00\u4e0b\u51e0\u6b65\uff1a</p> <ul> <li>\u6784\u9020\u5668\u79c1\u6709\u5316\uff08\u9632\u6b62\u5916\u90e8new\uff09</li> <li>\u7c7b\u7684\u5185\u90e8\u521b\u5efa\u5bf9\u8c61</li> <li>\u5411\u5916\u66b4\u9732\u4e00\u4e2a\u9759\u6001\u7684\u516c\u5171\u65b9\u6cd5\u3002getInstance</li> </ul> <p>\u5b9e\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a <pre><code>package com.singleton.type1;\n\npublic class Singleton1 {\n    public static void main(String[] args) {\n        Singleton instance1=Singleton.getInstance();\n        Singleton instance2=Singleton.getInstance();\n        System.out.println(instance1==instance2);      \n        System.out.println(\"instance2.hashCode1=\"+instance1.hashCode());\n        System.out.println(\"instance2.hashCode1=\"+instance2.hashCode());\n    }\n}\n// \u997f\u6c49\u5f0f\uff08\u4f7f\u7528\u9759\u6001\u53d8\u91cf\u6765\u5199\uff09\nclass Singleton{\n    // 1\u3001\u5148\u5c06\u6784\u9020\u5668\u79c1\u6709\u5316\uff0c\u5916\u90e8\u4e0d\u80fdnew\n    private Singleton(){\n\n    }\n    // 2\u3001\u672c\u7c7b\u5185\u90e8\u521b\u5efa\u5bf9\u8c61\u5b9e\u4f8b\n    private final static Singleton instance = new Singleton();\n    // 3\u3001\u5bf9\u5916\u63d0\u4f9b\u4e00\u4e2a\u516c\u6709\u7684\u65b9\u6cd5\u8fd4\u56de\u5b9e\u4f8b\u5bf9\u8c61\n    public static Singleton getInstance(){\n        return instance;\n    }\n}\n</code></pre> \u6700\u540e\u7a0b\u5e8f\u4ee3\u7801\u8f93\u51fa\u7684\u7ed3\u679c\u662f\uff1a\u4e24\u4e2a\u5bf9\u8c61\u76f8\u7b49\uff0c\u5e76\u4e14\u8fd4\u56de\u7684hash\u503c\u4e5f\u662f\u4e00\u6837\u7684\u3002</p> <p>\u4f18\u7f3a\u70b9\u8bf4\u660e\uff1a</p> <ul> <li>\u4f18\u70b9\uff1a\u8fd9\u79cd\u5199\u6cd5\u6bd4\u8f83\u7b80\u5355\uff0c\u5c31\u662f\u5728\u7c7b\u88c5\u8f7d\u7684\u65f6\u5019\u5c31\u5b8c\u6210\u5b9e\u4f8b\u5316\u3002\u907f\u514d\u4e86\u7ebf\u7a0b\u540c\u6b65\u95ee\u9898\u3002</li> <li>\u5728\u7c7b\u88c5\u8f7d\u7684\u65f6\u5019\u5c31\u5b8c\u6210\u5b9e\u4f8b\u5316\uff0c\u6ca1\u6709\u8fbe\u5230 Lazy Loading\u7684\u6548\u679c\u3002\u5982\u679c\u4ece\u59cb\u81f3\u7ec8\u4ece\u672a\u4f7f\u7528\u8fc7\u8fd9\u4e2a\u5b9e\u4f8b\uff0c\u5219\u4f1a\u9020\u6210\u5185\u5b58\u7684\u6d6a\u8d39\u3002</li> <li>\u7ed3\u8bba\uff1a\u8fd9\u79cd\u5355\u4f8b\u6a21\u5f0f\u53ef\u7528\uff0c\u53ef\u80fd\u9020\u6210\u5185\u5b58\u6d6a\u8d39</li> </ul> <p>\u8fd9\u79cd\u65b9\u5f0f\u57fa\u4e8e classloder \u673a\u5236\u907f\u514d\u4e86\u591a\u7ebf\u7a0b\u7684\u540c\u6b65\u95ee\u9898\uff0c\u4e0d\u8fc7\uff0cinstance \u5728\u7c7b\u88c5\u8f7d\u65f6\u5c31\u5b9e\u4f8b\u5316\uff0c\u5728\u5355\u4f8b\u6a21\u5f0f\u4e2d\u5927\u591a\u6570\u90fd\u662f\u8c03\u7528 getInstance \u65b9\u6cd5\uff0c\u4f46\u662f\u5bfc\u81f4\u7c7b\u88c5\u8f7d\u7684\u539f\u56e0\u6709\u5f88\u591a\u79cd\uff0c\u56e0\u6b64\u4e0d\u80fd\u786e\u5b9a\u6709\u5176\u4ed6\u7684\u65b9\u5f0f\uff08\u6216\u8005\u5176\u4ed6\u7684\u9759\u6001\u65b9\u6cd5\uff09\u5bfc\u81f4\u7c7b\u88c5\u8f7d\uff0c\u8fd9\u65f6\u5019\u521d\u59cb\u5316 instance \u5c31\u6ca1\u6709\u8fbe\u5230 lazy loading \u7684\u6548\u679c\u3002</p>"},{"location":"Java/designpattern/designpattern/#2_3","title":"\uff082\uff09\u997f\u6c49\u5f0f\uff08\u9759\u6001\u4ee3\u7801\u5757\uff09","text":"<p>\u8fd9\u79cd\u65b9\u6cd5\u662f\u6839\u636e\u4e0a\u4e00\u79cd\u65b9\u6cd5\u8fdb\u884c\u6539\u8fdb\u7684\uff0c\u5c06\u4e0a\u4e00\u79cd\u7684\u9759\u6001\u53d8\u91cf\u6539\u4e3a\u9759\u6001\u4ee3\u7801\u5757\u3002 <pre><code>// \u997f\u6c49\u5f0f\uff08\u4f7f\u7528\u9759\u6001\u53d8\u91cf\u6765\u5199\uff09\nclass Singleton{\n    // 1\u3001\u5148\u5c06\u6784\u9020\u5668\u79c1\u6709\u5316\uff0c\u5916\u90e8\u4e0d\u80fdnew\n    private Singleton(){\n\n    }\n    // 2\u3001\u672c\u7c7b\u5185\u90e8\u521b\u5efa\u5bf9\u8c61\u5b9e\u4f8b\n    private final static Singleton instance;\n\n    static { //\u5728\u9759\u6001\u4ee3\u7801\u5757\u4e2d\u521b\u5efa\u5355\u4f8b\u5bf9\u8c61\n        instance = new Singleton();\n    }\n    // 3\u3001\u5bf9\u5916\u63d0\u4f9b\u4e00\u4e2a\u516c\u6709\u7684\u65b9\u6cd5\u8fd4\u56de\u5b9e\u4f8b\u5bf9\u8c61\n    public static Singleton getInstance(){\n        return instance;\n    }\n}\n</code></pre> \u6700\u7ec8\u7684\u8f93\u51fa\u7ed3\u679c\u548c\u4e0a\u4e00\u4e2a\u76f8\u540c</p> <p>\u4f18\u7f3a\u70b9\u8bf4\u660e</p> <ul> <li>\u8fd9\u79cd\u65b9\u5f0f\u548c\u4e0a\u9762\u7684\u65b9\u5f0f\u5176\u5b9e\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u5c06\u7c7b\u5b9e\u4f8b\u5316\u7684\u8fc7\u7a0b\u653e\u5728\u4e86\u9759\u6001\u4ee3\u7801\u5757\u4e2d\uff0c\u4e5f\u662f\u5728\u7c7b\u88c5\u8f7d\u7684\u65f6\u5019\uff0c\u5c31\u6267\u884c\u9759\u6001\u4ee3\u7801\u5757\u4e2d\u7684\u4ee3\u7801\uff0c\u521d\u59cb\u5316\u7c7b\u7684\u5b9e\u4f8b\u3002\u4f18\u7f3a\u70b9\u548c\u4e0a\u9762\u662f\u4e00\u6837\u7684\u3002</li> <li>\u7ed3\u8bba\uff1a\u8fd9\u79cd\u5355\u4f8b\u6a21\u5f0f\u53ef\u7528\uff0c\u4f46\u662f\u53ef\u80fd\u9020\u6210\u5185\u5b58\u6d6a\u8d39</li> </ul>"},{"location":"Java/designpattern/designpattern/#3_1","title":"\uff083\uff09\u61d2\u6c49\u5f0f\uff08\u7ebf\u7a0b\u4e0d\u5b89\u5168\uff09","text":"<p>\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u90fd\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u90fd\u4f1a\u9020\u6210\u7ebf\u7a0b\u7684\u6d6a\u8d39\u3002\u4e0b\u9762\u662f\u4e00\u79cd\u7ebf\u7a0b\u4e0d\u5b89\u5168\u7684\u65b9\u6cd5\u3002 <pre><code>package com.singleton.type3;\n\npublic class Singleton3 {\n    public static void main(String[] args) {\n        Singleton instance1=Singleton.getInstance();\n        Singleton instance2=Singleton.getInstance();\n        System.out.println(instance1==instance2);      \n        System.out.println(\"instance2.hashCode1=\"+instance1.hashCode());\n        System.out.println(\"instance2.hashCode1=\"+instance2.hashCode());\n    }\n}\n\nclass Singleton{\n    private static Singleton instance;\n    private Singleton(){}\n    // \u63d0\u4f9b\u4e00\u4e2a\u9759\u6001\u7684\u516c\u6709\u65b9\u6cd5\uff0c\u5f53\u4f7f\u7528\u8be5\u65b9\u6cd5\u65f6\uff0c\u624d\u53bb\u521b\u5efainstance\n    // \u61d2\u6c49\u5f0f\n    // \u7528\u5230\u65f6\u5019\u624d\u521b\u5efa\n    public static Singleton getInstance(){\n        if(instance==null){\n            instance=new Singleton();\n        }\n        return instance;\n    }\n}\n</code></pre></p> <p>\u4f18\u7f3a\u70b9\u8bf4\u660e</p> <ul> <li>\u8d77\u5230\u4e86Lazy Loading\u7684\u6548\u679c\uff0c\u4f46\u662f\u53ea\u80fd\u5728\u5355\u7ebf\u7a0b\u4e0b\u4f7f\u7528\u3002 </li> <li>\u5982\u679c\u5728\u591a\u7ebf\u7a0b\u4e0b\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u8fdb\u5165\u4e86 if (singleton == null)\u5224\u65ad\u8bed\u53e5\u5757\uff0c\u8fd8\u672a\u6765\u5f97\u53ca\u5f80\u4e0b\u6267\u884c\uff0c\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e5f\u901a\u8fc7\u4e86\u8fd9\u4e2a\u5224\u65ad\u8bed\u53e5\uff0c\u8fd9\u65f6\u4fbf\u4f1a\u4ea7\u751f\u591a\u4e2a\u5b9e\u4f8b\u3002\u6240\u4ee5\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u4e0d\u53ef\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002</li> <li>\u7ed3\u8bba\uff1a\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u4e0d\u8981\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002</li> </ul>"},{"location":"Java/designpattern/designpattern/#4_1","title":"\uff084\uff09\u61d2\u6c49\u5f0f\uff08\u7ebf\u7a0b\u5b89\u5168\uff0c\u540c\u6b65\u65b9\u6cd5\uff09","text":"<p>\u9488\u5bf9\u4e0a\u4e00\u79cd\u65b9\u6cd5\u7684\u7f3a\u9677\uff0c\u4f7f\u7528synchronized\u5173\u952e\u5b57\u53ef\u4ee5\u5b9e\u73b0\u7ebf\u7a0b\u5b89\u5168\u3002 <pre><code>package com.singleton.type4;\n\npublic class Singleton4 {\n    public static void main(String[] args) {\n        Singleton instance1=Singleton.getInstance();\n        Singleton instance2=Singleton.getInstance();\n        System.out.println(instance1==instance2);      \n        System.out.println(\"instance2.hashCode1=\"+instance1.hashCode());\n        System.out.println(\"instance2.hashCode1=\"+instance2.hashCode());\n    }\n}\n//\u61d2\u6c49\u5f0f\u7b2c\u4e8c\u79cd\uff08\u7ebf\u7a0b\u5b89\u5168\uff0c\u540c\u6b65\u65b9\u6cd5\uff09\nclass Singleton{\n    private static Singleton instance;\n    private Singleton(){}\n    // \u63d0\u4f9b\u4e00\u4e2a\u9759\u6001\u7684\u516c\u6709\u65b9\u6cd5\uff0c\u52a0\u5165\u4e86\u4e00\u4e2a\u540c\u6b65\u5904\u7406\u7684\u4ee3\u7801\uff0c\u5f53\u4f7f\u7528\u8be5\u65b9\u6cd5\u65f6\uff0c\u624d\u53bb\u521b\u5efainstance\n    // \u61d2\u6c49\u5f0f\n    // \u7528\u5230\u65f6\u5019\u624d\u521b\u5efa\n    public static synchronized Singleton getInstance(){\n        if(instance==null){\n            instance=new Singleton();\n        }\n        return instance;\n    }\n}\n</code></pre></p> <p>\u4f18\u7f3a\u70b9\u8bf4\u660e\uff1a</p> <ul> <li>\u89e3\u51b3\u4e86\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898</li> <li>\u6548\u7387\u592a\u4f4e\u4e86\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u5728\u60f3\u83b7\u5f97\u7c7b\u7684\u5b9e\u4f8b\u65f6\u5019\uff0c\u6267\u884cgetInstance()\u65b9\u6cd5\u90fd\u8981\u8fdb\u884c\u540c\u6b65\u3002\u800c\u5176\u5b9e\u8fd9\u4e2a\u65b9\u6cd5\u53ea\u6267\u884c\u4e00\u6b21\u5b9e\u4f8b\u5316\u4ee3\u7801\u5c31\u591f\u4e86\uff0c\u540e\u9762\u7684\u60f3\u83b7\u5f97\u8be5\u7c7b\u5b9e\u4f8b\uff0c\u76f4\u63a5 return \u5c31\u884c\u4e86\u3002\u65b9\u6cd5\u8fdb\u884c\u540c\u6b65\u6548\u7387\u592a\u4f4e\u3002</li> <li>\u7ed3\u8bba\uff1a\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u4e0d\u63a8\u8350\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f</li> </ul>"},{"location":"Java/designpattern/designpattern/#5_1","title":"\uff085\uff09\u61d2\u6c49\u5f0f\uff08\u7ebf\u7a0b\u5b89\u5168\uff0c\u540c\u6b65\u4ee3\u7801\u5757\uff09","text":"<p>\u8fd9\u79cd\u65b9\u5f0f\u53ea\u662f\u5bf9\u4e0a\u4e00\u79cd\u65b9\u5f0f\u7684\u6539\u8fdb\uff0c\u540c\u6837\u4e0d\u63a8\u8350\u4f7f\u7528\u3002\u53ea\u662f\u5c06synchronized\u5173\u952e\u5b57\u6362\u4e86\u4e00\u4e2a\u4f4d\u7f6e\u800c\u5df2\u3002 <pre><code> public static Singleton getInstance(){\n        if(instance==null){\n            synchronized (Singleton.class){\n                instance=new Singleton();\n            }\n        }\n        return instance;\n    }\n</code></pre></p>"},{"location":"Java/designpattern/designpattern/#6_1","title":"\uff086\uff09\u53cc\u91cd\u68c0\u67e5","text":"<p>\u6839\u636e\u4ee5\u4e0a\u65b9\u5f0f\u5b58\u5728\u7684\u4f18\u7f3a\u70b9\uff0c\u63d0\u51fa\u4e86\u53cc\u91cd\u68c0\u67e5\u7684\u65b9\u5f0f\uff0c\u63d0\u4f9b\u4e00\u4e2a\u9759\u6001\u7684\u516c\u6709\u65b9\u6cd5\uff0c\u52a0\u5165\u53cc\u91cd\u68c0\u67e5\u4ee3\u7801\uff0c\u89e3\u51b3\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898, \u540c\u65f6\u89e3\u51b3\u61d2\u52a0\u8f7d\u95ee\u9898 \u540c\u65f6\u4fdd\u8bc1\u4e86\u6548\u7387, \u63a8\u8350\u4f7f\u7528\u3002 <pre><code>//\u61d2\u6c49\u5f0f\u7b2c\u4e8c\u79cd\uff08\u7ebf\u7a0b\u5b89\u5168\uff0c\u540c\u6b65\u65b9\u6cd5\uff09\nclass Singleton{\n    private static volatile Singleton instance;\n    private Singleton(){}\n    // \u63d0\u4f9b\u4e00\u4e2a\u9759\u6001\u7684\u516c\u6709\u65b9\u6cd5\uff0c\u52a0\u5165\u53cc\u91cd\u68c0\u67e5\u7684\u4ee3\u7801\uff0c\u89e3\u51b3\u7ebf\u7a0b\u5b89\u5168\uff0c\u540c\u65f6\u89e3\u51b3\u61d2\u52a0\u8f7d\u7684\u95ee\u9898\n    // \u540c\u65f6\u4fdd\u8bc1\u4e86\u6548\u7387\n    public static Singleton getInstance(){\n        if(instance==null){\n            synchronized(Singleton.class){\n                if(instance==null){\n                    instance=new Singleton();\n                }\n            }\n        }\n        return instance;\n    }\n}\n</code></pre></p> <p>\u4f18\u7f3a\u70b9\u8bf4\u660e</p> <ul> <li>Double-Check \u6982\u5ff5\u662f\u591a\u7ebf\u7a0b\u5f00\u53d1\u4e2d\u5e38\u4f7f\u7528\u5230\u7684\uff0c\u5982\u4ee3\u7801\u4e2d\u6240\u793a\uff0c\u6211\u4eec\u8fdb\u884c\u4e86\u4e24\u6b21 if (singleton == null)\u68c0\u67e5\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\u4e86\u3002</li> <li>\u8fd9\u6837\uff0c\u5b9e\u4f8b\u5316\u4ee3\u7801\u53ea\u7528\u6267\u884c\u4e00\u6b21\uff0c\u540e\u9762\u518d\u6b21\u8bbf\u95ee\u65f6\uff0c\u5224\u65ad if (singleton == null)\uff0c\u76f4\u63a5 return \u5b9e\u4f8b\u5316\u5bf9\u8c61\uff0c\u4e5f\u907f\u514d\u7684\u53cd\u590d\u8fdb\u884c\u65b9\u6cd5\u540c\u6b65\u3002</li> <li>\u7ebf\u7a0b\u5b89\u5168\uff0c\u5ef6\u8fdf\u52a0\u8f7d\uff0c\u6548\u7387\u8f83\u9ad8</li> <li>\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u63a8\u8350\u4f7f\u7528\u8fd9\u79cd\u5355\u4f8b\u8bbe\u8ba1\u6a21\u5f0f\u3002</li> </ul>"},{"location":"Java/designpattern/designpattern/#7_1","title":"\uff087\uff09\u9759\u6001\u5185\u90e8\u7c7b","text":"<p>\u4e0a\u8ff0\u65b9\u6cd5\u90fd\u662f\u4f5c\u7528\u4e8e\u65b9\u6cd5\u4e0a\u7684\uff0c\u53ef\u4ee5\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a\u5185\u90e8\u7c7b\u6765\u4f7f\u7528\u3002 <pre><code>//\u9759\u6001\u5185\u90e8\u7c7b\u5b8c\u6210\uff0c\u63a8\u8350\u4f7f\u7528\nclass Singleton{\n    private Singleton(){}\n\n    // \u5199\u4e00\u4e2a\u9759\u6001\u5185\u90e8\u7c7b\uff0c\u8be5\u7c7b\u6709\u4e00\u4e2a\u9759\u6001\u5c5e\u6027Singleton\n    private static class SingletonInstance{\n        private static final Singleton INSTANCE =new Singleton();\n    }\n\n    // \u63d0\u4f9b\u4e00\u4e2a\u9759\u6001\u7684\u516c\u6709\u65b9\u6cd5\uff0c\u52a0\u5165\u53cc\u91cd\u68c0\u67e5\u7684\u4ee3\u7801\uff0c\u89e3\u51b3\u7ebf\u7a0b\u5b89\u5168\uff0c\u540c\u65f6\u89e3\u51b3\u61d2\u52a0\u8f7d\u7684\u95ee\u9898\n    // \u540c\u65f6\u4fdd\u8bc1\u4e86\u6548\u7387\n    public static Singleton getInstance(){\n        return SingletonInstance.INSTANCE;\n    }\n}\n</code></pre></p> <p>\u4f18\u7f3a\u70b9\u8bf4\u660e</p> <ul> <li>\u8fd9\u79cd\u65b9\u5f0f\u91c7\u7528\u4e86\u7c7b\u88c5\u8f7d\u7684\u673a\u5236\u6765\u4fdd\u8bc1\u521d\u59cb\u5316\u5b9e\u4f8b\u65f6\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u3002</li> <li>\u9759\u6001\u5185\u90e8\u7c7b\u65b9\u5f0f\u5728 Singleton \u7c7b\u88ab\u88c5\u8f7d\u65f6\u5e76\u4e0d\u4f1a\u7acb\u5373\u5b9e\u4f8b\u5316\uff0c\u800c\u662f\u5728\u9700\u8981\u5b9e\u4f8b\u5316\u65f6\uff0c\u8c03\u7528 getInstance \u65b9\u6cd5\uff0c\u624d\u4f1a\u88c5\u8f7d SingletonInstance \u7c7b\uff0c\u4ece\u800c\u5b8c\u6210 Singleton \u7684\u5b9e\u4f8b\u5316\u3002</li> <li>\u7c7b\u7684\u9759\u6001\u5c5e\u6027\u53ea\u4f1a\u5728\u7b2c\u4e00\u6b21\u52a0\u8f7d\u7c7b\u7684\u65f6\u5019\u521d\u59cb\u5316\uff0c\u6240\u4ee5\u5728\u8fd9\u91cc\uff0cJVM \u5e2e\u52a9\u6211\u4eec\u4fdd\u8bc1\u4e86\u7ebf\u7a0b\u7684\u5b89\u5168\u6027\uff0c\u5728\u7c7b\u8fdb\u884c\u521d\u59cb\u5316\u65f6\uff0c\u522b\u7684\u7ebf\u7a0b\u662f\u65e0\u6cd5\u8fdb\u5165\u7684\u3002</li> <li>\u4f18\u70b9\uff1a\u907f\u514d\u4e86\u7ebf\u7a0b\u4e0d\u5b89\u5168\uff0c\u5229\u7528\u9759\u6001\u5185\u90e8\u7c7b\u7279\u70b9\u5b9e\u73b0\u5ef6\u8fdf\u52a0\u8f7d\uff0c\u6548\u7387\u9ad8\u3002</li> <li>\u5f00\u53d1\u4e2d\u63a8\u8350\u4f7f\u7528</li> </ul>"},{"location":"Java/designpattern/designpattern/#8","title":"\uff088\uff09\u679a\u4e3e","text":"<p>\u901a\u8fc7\u679a\u4e3e\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u5355\u4f8b <pre><code>package com.singleton.type8;\n\npublic class Singleton8 {\n    public static void main(String[] args) {\n        Singleton instance1=Singleton.INSTANCE;\n        Singleton instance2=Singleton.INSTANCE;\n        System.out.println(instance1==instance2);\n        System.out.println(\"instance2.hashCode1=\"+instance1.hashCode());\n        System.out.println(\"instance2.hashCode1=\"+instance2.hashCode());\n        instance1.sayOK();\n    }    \n}\n\n// \u4f7f\u7528\u679a\u4e3e\nenum Singleton {\n    INSTANCE; //\u5c5e\u6027\n    public void sayOK(){\n        System.out.println(\"ok~\");\n    }\n}\n</code></pre></p> <p>\u4f18\u7f3a\u70b9\u8bf4\u660e\uff1a</p> <ul> <li>\u8fd9\u501f\u52a9 JDK1.5 \u4e2d\u6dfb\u52a0\u7684\u679a\u4e3e\u6765\u5b9e\u73b0\u5355\u4f8b\u6a21\u5f0f\u3002\u4e0d\u4ec5\u80fd\u907f\u514d\u591a\u7ebf\u7a0b\u540c\u6b65\u95ee\u9898\uff0c\u800c\u4e14\u8fd8\u80fd\u9632\u6b62\u53cd\u5e8f\u5217\u5316\u91cd\u65b0\u521b\u5efa\u65b0\u7684\u5bf9\u8c61\u3002</li> <li>\u8fd9\u79cd\u65b9\u5f0f\u662f Effective Java \u4f5c\u8005 Josh Bloch \u63d0\u5021\u7684\u65b9\u5f0f \u7ed3\u8bba\uff1a\u63a8\u8350\u4f7f\u7528\u3002</li> </ul>"},{"location":"Java/designpattern/designpattern/#3_2","title":"3\u3001\u5355\u4f8b\u6a21\u5f0f\u6ce8\u610f\u4e8b\u9879\u548c\u7ec6\u8282\u8bf4\u660e","text":"<p>\u5355\u4f8b\u6a21\u5f0f\u4fdd\u8bc1\u4e86 \u7cfb\u7edf\u5185\u5b58\u4e2d\u8be5\u7c7b\u53ea\u5b58\u5728\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8282\u7701\u4e86\u7cfb\u7edf\u8d44\u6e90\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u9700\u8981\u9891\u7e41\u521b\u5efa\u9500\u6bc1\u7684\u5bf9\u8c61\uff0c\u4f7f\u7528\u5355\u4f8b\u6a21\u5f0f\u53ef\u4ee5\u63d0\u9ad8\u7cfb\u7edf\u6027\u80fd\u3002\u5f53\u60f3\u5b9e\u4f8b\u5316\u4e00\u4e2a\u5355\u4f8b\u7c7b\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u8981\u8bb0\u4f4f\u4f7f\u7528\u76f8\u5e94\u7684\u83b7\u53d6\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 new\u3002  \u5355\u4f8b\u6a21\u5f0f\u4f7f\u7528\u7684\u573a\u666f\uff1a\u9700\u8981\u9891\u7e41\u7684\u8fdb\u884c\u521b\u5efa\u548c\u9500\u6bc1\u7684\u5bf9\u8c61\u3001\u521b\u5efa\u5bf9\u8c61\u65f6\u8017\u65f6\u8fc7\u591a\u6216\u8017\u8d39\u8d44\u6e90\u8fc7\u591a(\u5373\uff1a\u91cd\u91cf\u7ea7\u5bf9\u8c61)\uff0c\u4f46\u53c8\u7ecf\u5e38\u7528\u5230\u7684\u5bf9\u8c61\u3001\u5de5\u5177\u7c7b\u5bf9\u8c61\u3001\u9891\u7e41\u8bbf\u95ee\u6570\u636e\u5e93\u6216\u6587\u4ef6\u7684\u5bf9\u8c61(\u6bd4\u5982\u6570\u636e\u6e90\u3001session\u5de5\u5382\u7b49)\u3002</p>"},{"location":"Java/designpattern/designpattern/#_5","title":"\u4e94\u3001\u5de5\u5382\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#1_4","title":"1\u3001\u95ee\u9898\u5f15\u5165","text":"<p>\u770b\u4e00\u4e2a\u62ab\u8428\u7684\u9879\u76ee\uff1a\u8981\u4fbf\u4e8e\u62ab\u8428\u79cd\u7c7b\u7684\u6269\u5c55\uff0c\u8981\u4fbf\u4e8e\u7ef4\u62a4\uff1a\uff081\uff09\u62ab\u8428\u7684\u79cd\u7c7b\u5f88\u591a(\u6bd4\u5982 GreekPizz\u3001CheesePizz\u7b49) \uff082\uff09\u62ab\u8428\u7684\u5236\u4f5c\u6709 prepare\uff0cbake, cut, box \uff083\uff09\u5b8c\u6210\u62ab\u8428\u5e97\u8ba2\u8d2d\u529f\u80fd\u3002</p> <p>\u8003\u8651\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u9996\u5148\u4f7f\u7528\u4f20\u7edf\u7684\u65b9\u6cd5\uff1a\u521b\u5efa\u4e00\u4e2a\u62bd\u8c61\u7684Pizza\u7c7b\uff0c\u91cc\u9762\u5305\u542b\u4e86\u62ab\u8428\u5236\u4f5c\u7684\u901a\u7528\u65b9\u6cd5\uff08\u5305\u62ecprepare\u3001bake\u7b49\uff09\uff0c\u7136\u540e\u5404\u79cd\u4e0d\u540c\u79cd\u7c7b\u7684Pizza\u9700\u8981\u7ee7\u627f\u8be5\u62bd\u8c61\u7c7b\u7136\u540e\u5b9e\u73b0\u5176\u4e2d\u7684\u62bd\u8c61\u65b9\u6cd5\u3002\u6700\u7ec8\u901a\u8fc7OrderPizza\u5bf9\u4e0d\u540c\u7684Pizza\u8fdb\u884c\u8ba2\u8d2d\u3002</p> <pre><code>public OrderPizza(){\n    Pizza pizza=null;\n    String orderType;//\u8ba2\u8d2d\u62ab\u8428\u7684\u7c7b\u578b\n    do{\n        orderType=gettype();\n        if(orderType.equals(\"greek\")){\n            pizza=new GreekPizza();\n            pizza.setName(\" \u5e0c\u814a\u62ab\u8428 \");\n        }else if(orderType.equals(\"cheese\")){\n            pizza=new CheesePizza();\n            pizza.setName(\" \u5976\u916a\u62ab\u8428 \");\n        }else if(orderType.equals(\"pepper\")){\n            pizza=new PepperPizza();\n            pizza.setName(\" \u80e1\u6912\u62ab\u8428 \");\n        }else {\n            break;\n        }\n        // \u8f93\u51fapizza\u5236\u4f5c\u7684\u8fc7\u7a0b\n        pizza.prepare();\n        pizza.bake();\n        pizza.cut();\n        pizza.box();\n    }while(true);\n}\n</code></pre> <p>\u4f20\u7edf\u65b9\u6cd5\u7684\u4f18\u7f3a\u70b9\uff1a\uff081\uff09\u4f18\u70b9\u662f\u6bd4\u8f83\u597d\u7406\u89e3\uff0c\u7b80\u5355\u6613\u64cd\u4f5c\u3002\uff082\uff09 \u7f3a\u70b9\u662f\u8fdd\u53cd\u4e86\u8bbe\u8ba1\u6a21\u5f0f\u7684 ocp \u539f\u5219\uff0c\u5373\u5bf9\u6269\u5c55\u5f00\u653e\uff0c\u5bf9\u4fee\u6539\u5173\u95ed\u3002\u5373\u5f53\u6211\u4eec\u7ed9\u7c7b\u589e\u52a0\u65b0\u529f\u80fd\u7684\u65f6\u5019\uff0c\u5c3d\u91cf\u4e0d\u4fee\u6539\u4ee3\u7801\uff0c\u6216\u8005\u5c3d\u53ef\u80fd\u5c11\u4fee\u6539\u4ee3\u7801\u3002\u6240\u4ee5\u5f53\u6211\u4eec\u9700\u8981\u65b0\u589e\u4e00\u4e2aPizza\u7c7b\u7684\u65f6\u5019\uff0c\u9700\u8981\u5728OrderPizza\u4e2d\u91cd\u65b0\u5199\u4e00\u6761if\u8bed\u53e5\u8fdb\u884c\u5224\u65ad\u3002 \u4e0b\u9762\u901a\u8fc7\u5de5\u5382\u6a21\u5f0f\u5bf9\u4e0a\u8ff0\u65b9\u6cd5\u8fdb\u884c\u6539\u8fdb\u3002</p>"},{"location":"Java/designpattern/designpattern/#2_4","title":"2\u3001\u7b80\u5355\u5de5\u5382\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#_6","title":"\u57fa\u672c\u4ecb\u7ecd","text":"<p>\uff081\uff09\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u662f\u5c5e\u4e8e\u521b\u5efa\u578b\u6a21\u5f0f\uff0c\u662f\u5de5\u5382\u6a21\u5f0f\u7684\u4e00\u79cd\u3002\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u662f\u7531\u4e00\u4e2a\u5de5\u5382\u5bf9\u8c61\u51b3\u5b9a\u521b\u5efa\u51fa\u54ea\u4e00\u79cd\u4ea7\u54c1\u7c7b\u7684\u5b9e\u4f8b\u3002\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u662f\u5de5\u5382\u6a21\u5f0f\u5bb6\u65cf\u4e2d\u6700\u7b80\u5355\u5b9e\u7528\u7684\u6a21\u5f0f\u3002</p> <p>\uff082\uff09\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\uff1a\u5b9a\u4e49\u4e86\u4e00\u4e2a\u521b\u5efa\u5bf9\u8c61\u7684\u7c7b\uff0c\u7531\u8fd9\u4e2a\u7c7b\u6765\u5c01\u88c5\u5b9e\u4f8b\u5316\u5bf9\u8c61\u7684\u884c\u4e3a(\u4ee3\u7801)</p> <p>\uff083\uff09 \u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\uff0c\u5f53\u6211\u4eec\u4f1a\u7528\u5230\u5927\u91cf\u7684\u521b\u5efa\u67d0\u79cd\u3001\u67d0\u7c7b\u6216\u8005\u67d0\u6279\u5bf9\u8c61\u65f6\uff0c\u5c31\u4f1a\u4f7f\u7528\u5230\u5de5\u5382\u6a21\u5f0f\u3002</p>"},{"location":"Java/designpattern/designpattern/#_7","title":"\u4f18\u5316\u4e0a\u9762\u7684\u5b9e\u4f8b","text":"<p>\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u7684\u8bbe\u8ba1\u65b9\u6848\uff1a\u5b9a\u4e49\u4e00\u4e2a\u53ef\u4ee5\u5b9e\u4f8b\u5316Pizza\u5bf9\u8c61\u7684\u7c7b\uff0c\u5c01\u88c5\u521b\u5efa\u5bf9\u8c61\u7684\u4ee3\u7801\u3002\u6240\u4ee5\u521b\u5efa\u4e00\u4e2aSimplePizzaFactory\uff0c\u5728\u8fd9\u4e2a\u7c7b\u4e2d\u8fdb\u884cPizza\u7684\u521b\u5efa\u3002 <pre><code>public class SimpleFactory {\n\n    public Pizza createPizza(String orderType){\n        Pizza pizza=null;\n        System.out.println(\"\u4f7f\u7528\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\");\n        if(orderType.equals(\"greek\")){\n            pizza=new GreekPizza();\n            pizza.setName(\" \u5e0c\u814a\u62ab\u8428 \");\n        }else if(orderType.equals(\"cheese\")){\n            pizza=new CheesePizza();\n            pizza.setName(\" \u5976\u916a\u62ab\u8428 \");\n        }else if(orderType.equals(\"pepper\")){\n            pizza=new PepperPizza();\n            pizza.setName(\" \u80e1\u6912\u62ab\u8428 \");\n        }\n        return pizza;\n    }\n}\n</code></pre> \u8fd9\u4e2a\u7b80\u5355\u5de5\u5382\u7c7b\u7528\u6765\u521b\u5efaPizza\uff0c\u5728OrderPizza\u8fdb\u884c\u8c03\u7528\u8fd9\u4e2a\u7c7b\u4e2d\u7684\u65b9\u6cd5\u6765\u521b\u5efa\u76f8\u5e94\u7684Pizza\u3002</p>"},{"location":"Java/designpattern/designpattern/#3_3","title":"3\u3001\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#_8","title":"\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u7684\u4e0d\u8db3","text":"<p>\u62ab\u8428\u9879\u76ee\u65b0\u7684\u9700\u6c42\uff1a\u5ba2\u6237\u5728\u70b9\u62ab\u8428\u65f6\uff0c\u53ef\u4ee5\u70b9\u4e0d\u540c\u53e3\u5473\u7684\u62ab\u8428\uff0c\u6bd4\u5982 \u5317\u4eac\u7684\u5976\u916a pizza\u3001\u5317\u4eac\u7684\u80e1\u6912pizza\u6216\u8005\u662f\u4f26\u6566\u7684\u5976\u916a pizza\u3001\u4f26\u6566\u7684\u80e1\u6912pizza\u3002</p> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a\u4f7f\u7528\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\uff0c\u521b\u5efa\u4e0d\u540c\u7684\u7b80\u5355\u5de5\u5382\u7c7b\uff0c\u6bd4\u5982BJPizzaSimpleFactory\u3001LDPizzaSimpleFactory\u7b49\u7b49.\u4ece\u5f53\u524d \u8fd9\u4e2a\u6848\u4f8b\u6765\u8bf4\uff0c\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u4f46\u662f\u8003\u8651\u5230\u9879\u76ee\u7684\u89c4\u6a21\uff0c\u4ee5\u53ca\u8f6f\u4ef6\u7684\u53ef\u7ef4\u62a4\u6027\u3001\u53ef\u6269\u5c55\u6027\u5e76\u4e0d\u662f\u7279\u522b\u597d\u3002\u4e0b\u9762\u4ecb\u7ecd\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u3002</p>"},{"location":"Java/designpattern/designpattern/#_9","title":"\u7b80\u5355\u4ecb\u7ecd","text":"<p>\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u8bbe\u8ba1\u65b9\u6848\uff1a\u5c06\u62ab\u8428\u9879\u76ee\u7684\u5b9e\u4f8b\u5316\u529f\u80fd\u62bd\u8c61\u6210\u62bd\u8c61\u65b9\u6cd5\uff0c\u5728\u4e0d\u540c\u7684\u53e3\u5473\u70b9\u9910\u5b50\u7c7b\u4e2d\u5177\u4f53\u5b9e\u73b0\u3002\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\uff1a\u5b9a\u4e49\u4e86\u4e00\u4e2a\u521b\u5efa\u5bf9\u8c61\u7684\u62bd\u8c61\u65b9\u6cd5\uff0c\u7531\u5b50\u7c7b\u51b3\u5b9a\u8981\u5b9e\u4f8b\u5316\u7684\u7c7b\u3002\u5de5\u5382\u65b9 \u6cd5\u6a21\u5f0f\u5c06\u5bf9\u8c61\u7684\u5b9e\u4f8b\u5316\u63a8\u8fdf\u5230\u5b50\u7c7b\u3002 <pre><code>public abstract class OrderPizza {\n    // \u5b9a\u4e49\u4e00\u4e2a\u62bd\u8c61\u65b9\u6cd5\uff0c\u8ba9\u5404\u4e2a\u5de5\u5382\u5b50\u7c7b\u81ea\u5df1\u5b9e\u73b0\n    abstract Pizza createPizza(String orderType);\n    public OrderPizza(){\n        Pizza pizza=null;\n        String orderType;//\u8ba2\u8d2d\u62ab\u8428\u7684\u7c7b\u578b\n        do{\n            orderType=gettype();\n            pizza = createPizza(orderType);\n            // \u8f93\u51fapizza\u5236\u4f5c\u7684\u8fc7\u7a0b\n            pizza.prepare();\n            pizza.bake();\n            pizza.cut();\n            pizza.box();\n        }while(true);\n    }\n    private String gettype(){\n        try{\n            BufferedReader strin=new BufferedReader(new InputStreamReader(System.in));\n            System.out.println(\"input pizza type\");\n            String str=strin.readLine();\n            return str;\n        } catch (IOException e){\n            e.printStackTrace();\n            return \"\";\n        }\n    }\n}\n</code></pre> \u8fd9\u4e2aOrderPizza\u7c7b\u4e0e\u4e0a\u9762\u4e0d\u540c\u7684\u662f\uff0c\u591a\u4e86\u4e00\u4e2a\u62bd\u8c61\u65b9\u6cd5createPizza\uff0c\u5e76\u5728\u5b50\u7c7b\u4e2d\u5b9e\u73b0\u8be5\u62bd\u8c61\u65b9\u6cd5\uff0c\u4f8b\u5982\u4e0b\u5217\u7684\u5317\u4eacPizza\u7684\u5b9e\u73b0\u7c7b\u3002 <pre><code>public class BJOrderPizza extends OrderPizza{\n    @Override\n    Pizza createPizza(String orderType) {\n        Pizza pizza=null;\n        if(orderType.equals(\"cheese\")){\n            pizza=new BJCheesePizza();\n        } else if(orderType.equals(\"pepper\")){\n            pizza=new BJPepperPizza();\n        }\n        return pizza;\n    }   \n}\n</code></pre> \u5728\u5b9e\u73b0\u7c7b\u4e2d\u5b9e\u73b0\u5177\u4f53\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u8fdb\u884c\u8d2d\u4e70BJOrderPizza\uff0ccheeses\u53e3\u5473\u7684\u548cpepper\u53e3\u5473\u7684\u3002</p>"},{"location":"Java/designpattern/designpattern/#4_2","title":"4\u3001\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#_10","title":"\u57fa\u672c\u4ecb\u7ecd","text":"<p>1) \u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\uff1a\u5b9a\u4e49\u4e86\u4e00\u4e2a interface \u7528\u4e8e\u521b\u5efa\u76f8\u5173\u6216\u6709\u4f9d\u8d56\u5173\u7cfb\u7684\u5bf9\u8c61\u7c07\uff0c\u800c\u65e0\u9700\u6307\u660e\u5177\u4f53\u7684\u7c7b 2) \u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u53ef\u4ee5\u5c06\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u548c\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u8fdb\u884c\u6574\u5408\u3002 3) \u4ece\u8bbe\u8ba1\u5c42\u9762\u770b\uff0c\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u5c31\u662f\u5bf9\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u7684\u6539\u8fdb(\u6216\u8005\u79f0\u4e3a\u8fdb\u4e00\u6b65\u7684\u62bd\u8c61)\u3002 4) \u5c06\u5de5\u5382\u62bd\u8c61\u6210\u4e24\u5c42\uff0cAbsFactory(\u62bd\u8c61\u5de5\u5382) \u548c \u5177\u4f53\u5b9e\u73b0\u7684\u5de5\u5382\u5b50\u7c7b\u3002\u7a0b\u5e8f\u5458\u53ef\u4ee5\u6839\u636e\u521b\u5efa\u5bf9\u8c61\u7c7b\u578b\u4f7f\u7528\u5bf9\u5e94\u7684\u5de5\u5382\u5b50\u7c7b\u3002\u8fd9\u6837\u5c06\u5355\u4e2a\u7684\u7b80\u5355\u5de5\u5382\u7c7b\u53d8\u6210\u4e86\u5de5\u5382\u7c07\uff0c\u66f4\u5229\u4e8e\u4ee3\u7801\u7684\u7ef4\u62a4\u548c\u6269\u5c55\u3002</p>"},{"location":"Java/designpattern/designpattern/#_11","title":"\u4ee3\u7801\u793a\u4f8b","text":"<p>\u5bf9\u4e0a\u8ff0\u4ee3\u7801\u7684\u4e00\u4e9b\u4fee\u6539 <pre><code>// \u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u7684\u62bd\u8c61\u5c42\npublic interface AbsFactory {\n    // \u8ba9\u4e0b\u9762\u7684\u5de5\u5382\u5b50\u7c7b\u5177\u4f53\u5b9e\u73b0\n    public Pizza createPizza(String orderType);\n}\n</code></pre> \u6240\u6709\u7684\u5de5\u5382\u5b50\u7c7b\u90fd\u9700\u8981\u7ee7\u627f\u8be5\u62bd\u8c61\u7c7b\uff0c\u4e0b\u9762\u4e3e\u4e00\u4e2aBJFactory\u7684\u5b9e\u73b0\u4f8b\u5b50\u3002 <pre><code>public class BJFactory implements AbsFactory {\n    @Override\n    public Pizza createPizza(String orderType) {\n        System.out.println(\"\u4f7f\u7528\u7684\u662f\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\");\n        Pizza pizza=null;\n        if(orderType.equals(\"cheese\")){\n            pizza=new BJCheesePizza();\n        } else if(orderType.equals(\"pepper\")){\n            pizza=new BJPepperPizza();\n        }\n        return pizza;\n    } \n}\n</code></pre> \u5728\u8fd9\u4e2a\u5de5\u5382\u5b50\u7c7b\u4e2d\uff0c\u7ee7\u627f\u6700\u4e0a\u5c42\u7684\u5de5\u5382\u7c7b\uff0c\u5b9e\u73b0\u4e86\u5176\u4e2d\u7684\u62bd\u8c61\u65b9\u6cd5\uff0c\u6700\u540e\u662f\u8fdb\u884c\u8ba2\u8d2d\u7684\u65b9\u6cd5\uff0c <pre><code>public class OrderPizza {\n    AbsFactory factory;\n    public OrderPizza(AbsFactory factory){\n        setFactory(factory);\n    }\n    private void setFactory(AbsFactory factory){\n        Pizza pizza=null;\n        String orderType=\"\";//\u7528\u6237\u8f93\u5165\n        this.factory=factory;\n        do {\n            orderType=gettype();\n            pizza=factory.createPizza(orderType);\n            if(pizza!=null){\n                pizza.prepare();\n                pizza.bake();\n                pizza.cut();\n                pizza.box();\n            }else{\n                System.out.println(\"\u8ba2\u8d2d\u5931\u8d25\");\n                break;\n            }      \n        }while(true);\n    }\n}\n</code></pre> \u6700\u7ec8\u901a\u8fc7new OrderPizza(new BJFactory()); \u5c31\u53ef\u4ee5\u5b8c\u6210\u5bf9BJPizza\u7684\u8ba2\u8d2d\u3002</p>"},{"location":"Java/designpattern/designpattern/#_12","title":"\u516d\u3001\u539f\u578b\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#1_5","title":"1\u3001\u95ee\u9898\u5f15\u5165","text":"<p>\u73b0\u5728\u6709\u4e00\u53ea\u7f8a tom\uff0c\u59d3\u540d\u4e3a: tom, \u5e74\u9f84\u4e3a\uff1a1\uff0c\u989c\u8272\u4e3a\uff1a\u767d\u8272\uff0c\u8bf7\u7f16\u5199\u7a0b\u5e8f\u521b\u5efa\u548c tom \u7f8a \u5c5e\u6027\u5b8c\u5168\u76f8\u540c\u7684 10\u53ea\u7f8a\u3002</p>"},{"location":"Java/designpattern/designpattern/#2_5","title":"2\u3001\u4f20\u7edf\u65b9\u6cd5\u89e3\u51b3","text":"<p>\u7528Sheep\u7684get\u548cset\u65b9\u6cd5\u8fdb\u884c\u5bf9\u8c61\u7684\u590d\u5236\uff0c\u4ee3\u7801\u793a\u4f8b\u5982\u4e0b\uff1a <pre><code>Sheep sheep=new Sheep(\"tom\",1,\"\u767d\u8272\");\n        Sheep sheep2=new Sheep(sheep.getName(),sheep.getAge(),sheep.getColor());\n        Sheep sheep3=new Sheep(sheep.getName(),sheep.getAge(),sheep.getColor());\n        Sheep sheep4=new Sheep(sheep.getName(),sheep.getAge(),sheep.getColor());\n        Sheep sheep5=new Sheep(sheep.getName(),sheep.getAge(),sheep.getColor());\n</code></pre> \u4f20\u7edf\u65b9\u5f0f\u7684\u4f18\u7f3a\u70b9\uff1a</p> <ul> <li>\u4f18\u70b9\u662f\u6bd4\u8f83\u597d\u7406\u89e3\uff0c\u7b80\u5355\u6613\u64cd\u4f5c\u3002</li> <li>\u5728\u521b\u5efa\u65b0\u7684\u5bf9\u8c61\u65f6\uff0c\u603b\u662f\u9700\u8981\u91cd\u65b0\u83b7\u53d6\u539f\u59cb\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u5982\u679c\u521b\u5efa\u7684\u5bf9\u8c61\u6bd4\u8f83\u590d\u6742\u65f6\uff0c\u6548\u7387\u8f83\u4f4e\u3002</li> <li>\u603b\u662f\u9700\u8981\u91cd\u65b0\u521d\u59cb\u5316\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u52a8\u6001\u5730\u83b7\u5f97\u5bf9\u8c61\u8fd0\u884c\u65f6\u7684\u72b6\u6001, \u4e0d\u591f\u7075\u6d3b\u3002</li> </ul>"},{"location":"Java/designpattern/designpattern/#_13","title":"\u539f\u578b\u6a21\u5f0f","text":"<p>Java \u4e2d Object \u7c7b\u662f\u6240\u6709\u7c7b\u7684\u6839\u7c7b\uff0cObject\u7c7b\u63d0\u4f9b\u4e86\u4e00\u4e2aclone()\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u53ef\u4ee5\u5c06\u4e00\u4e2a Java \u5bf9\u8c61\u590d\u5236\u4e00\u4efd\uff0c\u4f46\u662f\u9700\u8981\u5b9e\u73b0 clone \u7684 Java \u7c7b\u5fc5\u987b\u8981\u5b9e\u73b0\u4e00\u4e2a\u63a5\u53e3Cloneable\uff0c\u8be5\u63a5\u53e3\u8868\u793a\u8be5\u7c7b\u80fd\u591f\u590d\u5236\u4e14\u5177\u6709\u590d\u5236\u7684\u80fd\u529b =&gt;\u539f\u578b\u6a21\u5f0f\u3002 \u539f\u578b\u6a21\u5f0f(Prototype \u6a21\u5f0f)\u662f\u6307\uff1a\u7528\u539f\u578b\u5b9e\u4f8b\u6307\u5b9a\u521b\u5efa\u5bf9\u8c61\u7684\u79cd\u7c7b\uff0c\u5e76\u4e14\u901a\u8fc7\u62f7\u8d1d\u8fd9\u4e9b\u539f\u578b\uff0c\u521b\u5efa\u65b0\u7684\u5bf9\u8c61\u3002\u539f\u578b\u6a21\u5f0f\u662f\u4e00\u79cd\u521b\u5efa\u578b\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5141\u8bb8\u4e00\u4e2a\u5bf9\u8c61\u518d\u521b\u5efa\u53e6\u5916\u4e00\u4e2a\u53ef\u5b9a\u5236\u7684\u5bf9\u8c61\uff0c\u65e0\u9700\u77e5\u9053\u5982\u4f55\u521b\u5efa\u7684\u7ec6\u8282\u3002\u5de5\u4f5c\u539f\u7406\u662f:\u901a\u8fc7\u5c06\u4e00\u4e2a\u539f\u578b\u5bf9\u8c61\u4f20\u7ed9\u90a3\u4e2a\u8981\u53d1\u52a8\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u8981\u53d1\u52a8\u521b\u5efa\u7684\u5bf9\u8c61\u901a\u8fc7\u8bf7\u6c42\u539f\u578b\u5bf9\u8c61\u62f7\u8d1d\u5b83\u4eec\u81ea\u5df1\u6765\u5b9e\u65bd\u521b\u5efa\uff0c\u5373 \u5bf9\u8c61.clone()\u3002 <pre><code>public class Sheep implements Cloneable{\n    private String name;\n    private int age;\n    private String color;\n    public Sheep friend; //\u666e\u901a\u5bf9\u8c61\uff0c\u514b\u9686\u65f6\u5019\u5982\u4f55\u5904\u7406\uff0c\u9ed8\u8ba4\u662f\u6d45\u62f7\u8d1d\n\n    public Sheep() {\n    }\n\n    public Sheep(String name, int age, String color) {\n        this.name = name;\n        this.age = age;\n        this.color = color;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public String getColor() {\n        return color;\n    }\n\n    public void setColor(String color) {\n        this.color = color;\n    }\n    @Override\n    public String toString() {\n        return \"Sheep [name=\" + name + \", age=\" + age + \", color=\" + color + \"]\";\n    }\n    // \u514b\u9686\u8be5\u5b9e\u4f8b\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684clone\u65b9\u6cd5\n    @Override\n    protected Object clone(){   \n        Sheep sheep=null;\n        try{\n            sheep=(Sheep)super.clone();\n        }catch(Exception e){\n            System.out.println(e.getMessage());\n        }\n        return sheep;\n    }\n}\n</code></pre> \u4e0a\u8ff0\u4ee3\u7801\u662f\u6539\u8fdb\u7684Sheep\u5bf9\u8c61\uff0c\u4e3b\u8981\u662f\u589e\u52a0\u4e86\u4e00\u4e2aclone\u65b9\u6cd5\uff0c\u5177\u4f53\u5982\u4f55\u5b9e\u73b0\u514b\u9686\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u793a\u4f8b\uff1a <pre><code> Sheep sheep=new Sheep(\"tom\",1,\"\u767d\u8272\");\n        sheep.friend=new Sheep(\"jack\",2,\"\u9ed1\u8272\");\n        Sheep sheep2=(Sheep)sheep.clone();\n        Sheep sheep3=(Sheep)sheep.clone();\n        Sheep sheep4=(Sheep)sheep.clone();\n        Sheep sheep5=(Sheep)sheep.clone();\n</code></pre></p>"},{"location":"Java/designpattern/designpattern/#_14","title":"\u6d45\u62f7\u8d1d\u548c\u6df1\u62f7\u8d1d\u7684\u8ba8\u8bba","text":""},{"location":"Java/designpattern/designpattern/#_15","title":"\u6d45\u62f7\u8d1d\u7684\u4ecb\u7ecd","text":"<p>\u5bf9\u4e8e\u6570\u636e\u7c7b\u578b\u662f\u57fa\u672c\u6570\u636e\u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf\uff0c\u6d45\u62f7\u8d1d\u4f1a\u76f4\u63a5\u8fdb\u884c\u503c\u4f20\u9012\uff0c\u4e5f\u5c31\u662f\u5c06\u8be5\u5c5e\u6027\u503c\u590d\u5236\u4e00\u4efd\u7ed9\u65b0\u7684\u5bf9\u8c61\u3002 \u5bf9\u4e8e\u6570\u636e\u7c7b\u578b\u662f\u5f15\u7528\u6570\u636e\u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf\uff0c\u6bd4\u5982\u8bf4\u6210\u5458\u53d8\u91cf\u662f\u67d0\u4e2a\u6570\u7ec4\u3001\u67d0\u4e2a\u7c7b\u7684\u5bf9\u8c61\u7b49\uff0c\u90a3\u4e48\u6d45\u62f7\u8d1d\u4f1a\u8fdb\u884c \u5f15\u7528\u4f20\u9012\uff0c\u4e5f\u5c31\u662f\u53ea\u662f\u5c06\u8be5\u6210\u5458\u53d8\u91cf\u7684\u5f15\u7528\u503c\uff08\u5185\u5b58\u5730\u5740\uff09\u590d\u5236\u4e00\u4efd\u7ed9\u65b0\u7684\u5bf9\u8c61\u3002\u56e0\u4e3a\u5b9e\u9645\u4e0a\u4e24\u4e2a\u5bf9\u8c61\u7684\u8be5\u6210\u5458\u53d8\u91cf\u90fd\u6307\u5411\u540c\u4e00\u4e2a\u5b9e\u4f8b\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5728\u4e00\u4e2a\u5bf9\u8c61\u4e2d\u4fee\u6539\u8be5\u6210\u5458\u53d8\u91cf\u4f1a\u5f71\u54cd\u5230\u53e6\u4e00\u4e2a\u5bf9\u8c61\u7684\u8be5\u6210\u5458\u53d8\u91cf\u503c\u3002 \u524d\u9762\u6211\u4eec\u514b\u9686\u7f8a\u5c31\u662f\u6d45\u62f7\u8d1d</p> <p>\u6d45\u62f7\u8d1d\u662f\u4f7f\u7528\u9ed8\u8ba4\u7684 clone()\u65b9\u6cd5\u6765\u5b9e\u73b0\u3002sheep = (Sheep) super.clone();</p>"},{"location":"Java/designpattern/designpattern/#_16","title":"\u6df1\u62f7\u8d1d\u4ecb\u7ecd","text":"<p>\u590d\u5236\u5bf9\u8c61\u7684\u6240\u6709\u57fa\u672c\u6570\u636e\u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf\u503c\u3002\u4e3a\u6240\u6709\u5f15\u7528\u6570\u636e\u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf\u7533\u8bf7\u5b58\u50a8\u7a7a\u95f4\uff0c\u5e76\u590d\u5236\u6bcf\u4e2a\u5f15\u7528\u6570\u636e\u7c7b\u578b\u6210\u5458\u53d8\u91cf\u6240\u5f15\u7528\u7684\u5bf9\u8c61\uff0c\u76f4\u5230\u8be5\u5bf9\u8c61 \u53ef\u8fbe\u7684\u6240\u6709\u5bf9\u8c61\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u8c61\u8fdb\u884c\u6df1\u62f7\u8d1d\u8981\u5bf9\u6574\u4e2a\u5bf9\u8c61(\u5305\u62ec\u5bf9\u8c61\u7684\u5f15\u7528\u7c7b\u578b)\u8fdb\u884c\u62f7\u8d1d\u3002 * \u6df1\u62f7\u8d1d\u5b9e\u73b0\u65b9\u5f0f 1\uff1a\u91cd\u5199 clone \u65b9\u6cd5\u6765\u5b9e\u73b0\u6df1\u62f7\u8d1d\u3002 * \u6df1\u62f7\u8d1d\u5b9e\u73b0\u65b9\u5f0f 2\uff1a\u901a\u8fc7\u5bf9\u8c61\u5e8f\u5217\u5316\u5b9e\u73b0\u6df1\u62f7\u8d1d(\u63a8\u8350)</p> <p>\u9996\u5148\u662f\u7b2c\u4e00\u79cd\u65b9\u5f0f\uff0c\u91cd\u5199clone\u65b9\u6cd5\u6765\u8fdb\u884c\u6df1\u62f7\u8d1d\u3002 <pre><code>public class DeepProtoType implements Serializable, Cloneable  {\n    public String name;\n    public DeepCloneableTarget deepCloneableTarget;//\u5f15\u7528\u7c7b\u578b\n    public DeepProtoType() {\n    }\n\n// \u5b8c\u6210\u6df1\u62f7\u8d1d 1\u3001\u4f7f\u7528clone\u65b9\u6cd5\n    @Override\n    protected Object clone() throws CloneNotSupportedException {\n        Object deep=null;\n        //\u8fd9\u91cc\u5b8c\u6210\u5bf9\u57fa\u672c\u5c5e\u6027\u548cString\u7684\u514b\u9686\n        deep=super.clone();\n        //\u5bf9\u5f15\u7528\u6570\u636e\u7c7b\u578b\u7684\u5c5e\u6027\uff0c\u8fdb\u884c\u5355\u72ec\u5904\u7406\n        DeepProtoType deepProtoType=(DeepProtoType)deep;\n        deepProtoType.deepCloneableTarget=(DeepCloneableTarget)deepCloneableTarget.clone();\n        return deepProtoType;\n    }\n}\n</code></pre> \u8fd9\u4e00\u79cd\u65b9\u6cd5\u5c31\u662f\u5c06\u7c7b\u4e2d\u7684\u5c5e\u6027\u518d\u5229\u7528clone\u65b9\u6cd5\u8fdb\u884c\u590d\u5236\u514b\u9686\uff0c\u4f46\u662f\u66f4\u63a8\u8350\u4f7f\u7528\u4e0b\u5217\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662f\u4f7f\u7528\u5e8f\u5217\u5316\u7684\u65b9\u6cd5\u3002 <pre><code> // \u5b8c\u6210\u6df1\u62f7\u8d1d 2\u3001\u901a\u8fc7\u5bf9\u8c61\u5e8f\u5217\u5316\u65b9\u6cd5\n    public Object deepClone(){\n        //\u521b\u5efa\u6d41\u5bf9\u8c61\n        ByteArrayOutputStream bos=null;\n        ObjectOutputStream oos=null;\n        ByteArrayInputStream bis=null;\n        ObjectInputStream ois=null;\n        try {\n            bos=new ByteArrayOutputStream();\n            oos=new ObjectOutputStream(bos);\n            oos.writeObject(this); //\u5f53\u524d\u8fd9\u4e2a\u5bf9\u8c61\u4ee5\u5bf9\u8c61\u6d41\u7684\u65b9\u5f0f\u8f93\u51fa\n\n            // \u53cd\u5e8f\u5217\u5316\n            bis=new ByteArrayInputStream(bos.toByteArray());\n            ois=new ObjectInputStream(bis);\n\n            DeepProtoType copyObj=(DeepProtoType)ois.readObject();\n            return copyObj;\n\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n</code></pre> \u4e00\u822c\u63a8\u8350\u4f7f\u7528\u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff08\u867d\u7136\u6211\u81ea\u5df1\u4e2a\u4eba\u5bf9\u7b2c\u4e8c\u79cd\u65b9\u5f0f\u6ca1\u6709\u7279\u522b\u900f\u5f7b\u7684\u7406\u89e3\uff09\uff0c\u7b2c\u4e00\u79cd\u65b9\u5f0f\u7684\u65b9\u6cd5\u5982\u679c\u5b58\u5728\u591a\u4e2a\u5f15\u7528\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u5904\u7406\u8d77\u6765\u4f1a\u8f83\u4e3a\u9ebb\u70e6\u3002</p>"},{"location":"Java/designpattern/designpattern/#_17","title":"\u539f\u578b\u6a21\u5f0f\u7684\u7ec6\u8282","text":"<p>\uff081\uff09\u521b\u5efa\u65b0\u7684\u5bf9\u8c61\u6bd4\u8f83\u590d\u6742\u65f6\uff0c\u53ef\u4ee5\u5229\u7528\u539f\u578b\u6a21\u5f0f\u7b80\u5316\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\uff0c\u540c\u65f6\u4e5f\u80fd\u591f\u63d0\u9ad8\u6548\u7387</p> <p>\uff082\uff09 \u4e0d\u7528\u91cd\u65b0\u521d\u59cb\u5316\u5bf9\u8c61\uff0c\u800c\u662f\u52a8\u6001\u5730\u83b7\u5f97\u5bf9\u8c61\u8fd0\u884c\u65f6\u7684\u72b6\u6001 \uff083\uff09\u5982\u679c\u539f\u59cb\u5bf9\u8c61\u53d1\u751f\u53d8\u5316(\u589e\u52a0\u6216\u8005\u51cf\u5c11\u5c5e\u6027)\uff0c\u5176\u5b83\u514b\u9686\u5bf9\u8c61\u7684\u4e5f\u4f1a\u53d1\u751f\u76f8\u5e94\u7684\u53d8\u5316\uff0c\u65e0\u9700\u4fee\u6539\u4ee3\u7801</p> <p>\uff084\uff09 \u5728\u5b9e\u73b0\u6df1\u514b\u9686\u7684\u65f6\u5019\u53ef\u80fd\u9700\u8981\u6bd4\u8f83\u590d\u6742\u7684\u4ee3\u7801</p> <p>\uff085\uff09 \u7f3a\u70b9\uff1a\u9700\u8981\u4e3a\u6bcf\u4e00\u4e2a\u7c7b\u914d\u5907\u4e00\u4e2a\u514b\u9686\u65b9\u6cd5\uff0c\u8fd9\u5bf9\u5168\u65b0\u7684\u7c7b\u6765\u8bf4\u4e0d\u662f\u5f88\u96be\uff0c\u4f46\u5bf9\u5df2\u6709\u7684\u7c7b\u8fdb\u884c\u6539\u9020\u65f6\uff0c\u9700\u8981\u4fee\u6539\u5176\u6e90\u4ee3\u7801\uff0c\u8fdd\u80cc\u4e86 ocp \u539f\u5219\uff0c\u8fd9\u70b9\u8bf7\u540c\u5b66\u4eec\u6ce8\u610f.</p>"},{"location":"Java/designpattern/designpattern/#_18","title":"\u4e03\u3001\u5efa\u9020\u8005\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#_19","title":"\u95ee\u9898\u5f15\u5165","text":"<p>\u9700\u8981\u5efa\u623f\u5b50\uff1a\u8fd9\u4e00\u8fc7\u7a0b\u4e3a\u6253\u6869\u3001\u780c\u5899\u3001\u5c01\u9876\u3002\u623f\u5b50\u6709\u5404\u79cd\u5404\u6837\u7684\uff0c\u6bd4\u5982\u666e\u901a\u623f\uff0c\u9ad8\u697c\uff0c\u522b\u5885\uff0c\u5404\u79cd\u623f\u5b50\u7684\u8fc7\u7a0b\u867d\u7136\u4e00\u6837\uff0c\u4f46\u662f\u8981\u6c42\u4e0d\u8981\u76f8\u540c\u7684\u3002</p>"},{"location":"Java/designpattern/designpattern/#_20","title":"\u4f20\u7edf\u65b9\u5f0f\u89e3\u51b3","text":"<p>\u4f20\u7edf\u65b9\u5f0f\u89e3\u51b3\u8f83\u4e3a\u7b80\u5355\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u62bd\u8c61\u7684\u623f\u5b50\u7c7b\uff0c\u91cc\u9762\u5305\u542b\u4e86\u5efa\u623f\u5b50\u7684\u8fc7\u7a0b\uff1a\u6253\u6869\u3001\u780c\u5899\u3001\u5c01\u9876\u7684\u62bd\u8c61\u65b9\u6cd5\u3002\u7136\u540e\u4e0d\u540c\u7684\u623f\u5b50\u5b9e\u73b0\u5176\u4e2d\u7684\u65b9\u6cd5\u3002 <pre><code>public abstract class AbstractHouse {\n    // \u6253\u5730\u57fa\n    public abstract void buildBasic();\n    // \u780c\u5899\n    public abstract void buildWalls();\n    //\u5c01\u9876\n    public abstract void roofed();\n\n    public void build(){\n        buildBasic();\n        buildWalls();\n        roofed();\n    }\n}\n</code></pre> \u666e\u901a\u623f\u5b50\u5b9e\u73b0\u8fd9\u4e2a\u62bd\u8c61\u7684\u65b9\u6cd5\uff0c\u7136\u540e\u5efa\u9020\u666e\u901a\u623f\u5b50\u5c31\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0\u8fd9\u4e2a\u666e\u901a\u623f\u5b50\u7684\u7c7b\u5c31\u53ef\u4ee5\u4e86\u3002 <pre><code>public class CommonHouse extends AbstractHouse {\n    @Override\n    public void buildBasic() {\n       System.out.println(\"\u7ed9\u666e\u901a\u623f\u5b50\u6253\u5730\u57fa\"); \n    }\n\n    @Override\n    public void buildWalls() {\n        System.out.println(\"\u7ed9\u666e\u901a\u623f\u5b50\u780c\u5899\");   \n    }\n    @Override\n    public void roofed() {\n        System.out.println(\"\u7ed9\u666e\u901a\u623f\u5b50\u5c01\u9876\");\n    }   \n}\n</code></pre> \u4f20\u7edf\u65b9\u6cd5\u4f18\u70b9\u662f\u6bd4\u8f83\u597d\u7406\u89e3\uff0c\u7b80\u5355\u6613\u64cd\u4f5c\u3002 \u8bbe\u8ba1\u7684\u7a0b\u5e8f\u7ed3\u6784\uff0c\u8fc7\u4e8e\u7b80\u5355\uff0c\u6ca1\u6709\u8bbe\u8ba1\u7f13\u5b58\u5c42\u5bf9\u8c61\uff0c\u7a0b\u5e8f\u7684\u6269\u5c55\u548c\u7ef4\u62a4\u4e0d\u597d. \u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u79cd\u8bbe\u8ba1\u65b9\u6848\uff0c\u628a\u4ea7\u54c1(\u5373\uff1a\u623f\u5b50) \u548c \u521b\u5efa\u4ea7\u54c1\u7684\u8fc7\u7a0b(\u5373\uff1a\u5efa\u623f\u5b50\u6d41\u7a0b) \u5c01\u88c5\u5728\u4e00\u8d77\uff0c\u8026\u5408\u6027\u589e\u5f3a\u4e86\u3002</p>"},{"location":"Java/designpattern/designpattern/#_21","title":"\u5efa\u9020\u8005\u6a21\u5f0f\u4ecb\u7ecd","text":""},{"location":"Java/designpattern/designpattern/#_22","title":"\u57fa\u672c\u4ecb\u7ecd","text":"<p>\u5efa\u9020\u8005\u6a21\u5f0f\uff08Builder Pattern\uff09 \u53c8\u53eb\u751f\u6210\u5668\u6a21\u5f0f\uff0c\u662f\u4e00\u79cd\u5bf9\u8c61\u6784\u5efa\u6a21\u5f0f\u3002\u5b83\u53ef\u4ee5\u5c06\u590d\u6742\u5bf9\u8c61\u7684\u5efa\u9020\u8fc7\u7a0b\u62bd\u8c61\u51fa\u6765\uff08\u62bd\u8c61\u7c7b\u522b\uff09\uff0c\u4f7f\u8fd9\u4e2a\u62bd\u8c61\u8fc7\u7a0b\u7684\u4e0d\u540c\u5b9e\u73b0\u65b9\u6cd5\u53ef\u4ee5\u6784\u9020\u51fa\u4e0d\u540c\u8868\u73b0\uff08\u5c5e\u6027\uff09\u7684\u5bf9\u8c61\u3002 \u5efa\u9020\u8005\u6a21\u5f0f \u662f\u4e00\u6b65\u4e00\u6b65\u521b\u5efa\u4e00\u4e2a\u590d\u6742\u7684\u5bf9\u8c61\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u53ea\u901a\u8fc7\u6307\u5b9a\u590d\u6742\u5bf9\u8c61\u7684\u7c7b\u578b\u548c\u5185\u5bb9\u5c31\u53ef\u4ee5\u6784\u5efa\u5b83\u4eec\uff0c \u7528\u6237\u4e0d\u9700\u8981\u77e5\u9053\u5185\u90e8\u7684\u5177\u4f53\u6784\u5efa\u7ec6\u8282\u3002\u6709\u56db\u4e2a\u89d2\u8272\uff1a</p> <ul> <li>Product\uff08\u4ea7\u54c1\u89d2\u8272\uff09\uff1a \u4e00\u4e2a\u5177\u4f53\u7684\u4ea7\u54c1\u5bf9\u8c61\u3002</li> <li>Builder\uff08\u62bd\u8c61\u5efa\u9020\u8005\uff09\uff1a \u521b\u5efa\u4e00\u4e2a Product \u5bf9\u8c61\u7684\u5404\u4e2a\u90e8\u4ef6\u6307\u5b9a\u7684 \u63a5\u53e3/\u62bd\u8c61\u7c7b\u3002</li> <li>ConcreteBuilder\uff08\u5177\u4f53\u5efa\u9020\u8005\uff09\uff1a \u5b9e\u73b0\u63a5\u53e3\uff0c\u6784\u5efa\u548c\u88c5\u914d\u5404\u4e2a\u90e8\u4ef6\u3002</li> <li>Director\uff08\u6307\u6325\u8005\uff09\uff1a \u6784\u5efa\u4e00\u4e2a\u4f7f\u7528 Builder \u63a5\u53e3\u7684\u5bf9\u8c61\u3002\u5b83\u4e3b\u8981\u662f\u7528\u4e8e\u521b\u5efa\u4e00\u4e2a\u590d\u6742\u7684\u5bf9\u8c61\u3002\u5b83\u4e3b\u8981\u6709\u4e24\u4e2a\u4f5c\u7528\uff0c\u4e00\u662f\uff1a\u9694\u79bb\u4e86\u5ba2\u6237\u4e0e\u5bf9\u8c61\u7684\u751f\u4ea7\u8fc7\u7a0b\uff0c\u4e8c\u662f\uff1a\u8d1f\u8d23\u63a7\u5236\u4ea7\u54c1\u5bf9\u8c61\u7684\u751f\u4ea7\u8fc7\u7a0b\u3002</li> </ul> <p></p> <p>\u62bd\u8c61\u7684\u5efa\u9020\u8005\u4ee3\u7801\uff1a <pre><code>public abstract class HouseBuilder {\n    protected House house=new House();\n    // \u5c06\u5236\u4f5c\u7684\u6d41\u7a0b\u5199\u597d\uff0c\u62bd\u8c61\u7684\u65b9\u6cd5\n    // \u6253\u5730\u57fa\n    public abstract void buildBasic();\n    // \u780c\u5899\n    public abstract void buildWalls();\n    //\u5c01\u9876\n    public abstract void roofed();\n\n    // \u5efa\u9020\u597d\u623f\u5b50\uff0c\u5c06\u623f\u5b50\u8fd4\u56de\n    public House buildHouse(){\n        return house;\n    }\n}\n</code></pre> \u5c06\u5236\u4f5c\u7684\u6d41\u7a0b\u5199\u6210\u62bd\u8c61\u7684\u65b9\u6cd5\uff0c\u5e76\u5c06\u5efa\u597d\u7684\u623f\u5b50\u8fd4\u56de\u3002\u7136\u540e\u5177\u4f53\u7684\u623f\u5b50\u5efa\u9020\u7684\u7ec6\u8282\u9700\u8981\u7531\u5b9e\u73b0\u7684\u5b50\u7c7b\u5b9e\u73b0\uff0c\u6bd4\u5982\u6211\u8981\u5efa\u9020\u9ad8\u697c\uff0c\u8981\u7528\u4e00\u4e2a\u9ad8\u697c\u7684\u5b9e\u73b0\u7c7b\u6765\u7ee7\u627f\u8be5\u7c7b\uff0c\u4f8b\u5982\u4e0b\u9762\u7684HighBuild\u7c7b <pre><code>public class HighBuilding extends HouseBuilder{\n    @Override\n    public void buildBasic() {\n        System.out.println(\"\u9ad8\u697c\u6253\u5730\u57fa100\u7c73\");        \n    }\n    @Override\n    public void buildWalls() {\n        System.out.println(\"\u9ad8\u697c\u780c\u589920cm\");\n    }\n    @Override\n    public void roofed() {\n        System.out.println(\"\u9ad8\u697c\u7684\u5c4b\u9876\");\n    }\n}\n</code></pre> \u8fd9\u4e2a\u5c31\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u5efa\u9020\u8005\uff0c\u7528\u6765\u5efa\u9020\u5177\u4f53\u7684\u623f\u5b50\u3002\u4e0b\u9762\u6765\u770b\u4e00\u4e0b\u6307\u6325\u8005\uff0c\u4e3b\u8981\u662f\u7528\u6765\u521b\u5efa\u4e00\u4e2a\u590d\u6742\u7684\u5bf9\u8c61\u3002 <pre><code>public class HouseDirector {\n    HouseBuilder houseBuilder=null;\n    // \u901a\u8fc7\u6784\u9020\u5668\u4f20\u5165\n    public HouseDirector(HouseBuilder houseBuilder) {\n        this.houseBuilder = houseBuilder;\n    }\n    public void setHouseBuilder(HouseBuilder houseBuilder) {\n        this.houseBuilder = houseBuilder;\n    }\n    // \u5982\u4f55\u5904\u7406\u5efa\u9020\u623f\u5b50\u7684\u6d41\u7a0b\uff0c\u4ea4\u7ed9\u6307\u6325\u8005\n    public House constructHouse(){\n        houseBuilder.buildBasic();\n        houseBuilder.buildWalls();\n        houseBuilder.roofed();\n        return houseBuilder.buildHouse();\n    }\n}\n</code></pre> \u5728\u8fd9\u4e2a\u7c7b\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\uff08\u6216\u8005set\u65b9\u6cd5\uff09\u5c06HouseBuilder\u5bf9\u8c61\u4f20\u5165\u3002\u7136\u540e\u901a\u8fc7constructHouse\u5c06\u5177\u4f53\u6d41\u7a0b\u4ea4\u7ed9\u6307\u6325\u8005\u3002\u6700\u540e\u5728\u4e3b\u65b9\u6cd5\u4e2d\u8c03\u7528\u3002 <pre><code>public class Client {\n    public static void main(String[] args) {\n        // \u76d6\u666e\u901a\u7684\u623f\u5b50\n        CommonHouse commonHouse=new CommonHouse();\n        // \u51c6\u5907\u521b\u5efa\u623f\u5b50\u7684\u6307\u6325\u8005\n        HouseDirector houseDirector=new HouseDirector(commonHouse);\n        // \u5b8c\u6210\u76d6\u623f\u5b50\uff0c\u8fd4\u56de\u4ea7\u54c1\n        House house=houseDirector.constructHouse();\n    }\n}\n</code></pre></p>"},{"location":"Java/designpattern/designpattern/#_23","title":"\u5177\u4f53\u7ec6\u8282","text":"<p>\uff081\uff09\u5ba2\u6237\u7aef(\u4f7f\u7528\u7a0b\u5e8f)\u4e0d\u5fc5\u77e5\u9053\u4ea7\u54c1\u5185\u90e8\u7ec4\u6210\u7684\u7ec6\u8282\uff0c\u5c06\u4ea7\u54c1\u672c\u8eab\u4e0e\u4ea7\u54c1\u7684\u521b\u5efa\u8fc7\u7a0b\u89e3\u8026\uff0c\u4f7f\u5f97\u76f8\u540c\u7684\u521b\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u4ea7\u54c1\u5bf9\u8c61\u3002\uff082\uff09\u6bcf\u4e00\u4e2a\u5177\u4f53\u5efa\u9020\u8005\u90fd\u76f8\u5bf9\u72ec\u7acb\uff0c\u800c\u4e0e\u5176\u4ed6\u7684\u5177\u4f53\u5efa\u9020\u8005\u65e0\u5173\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u66ff\u6362\u5177\u4f53\u5efa\u9020\u8005\u6216\u589e\u52a0\u65b0\u7684\u5177\u4f53\u5efa\u9020\u8005\uff0c \u7528\u6237\u4f7f\u7528\u4e0d\u540c\u7684\u5177\u4f53\u5efa\u9020\u8005\u5373\u53ef\u5f97\u5230\u4e0d\u540c\u7684\u4ea7\u54c1\u5bf9\u8c61\u3002 \uff083\uff09\u53ef\u4ee5\u66f4\u52a0\u7cbe\u7ec6\u5730\u63a7\u5236\u4ea7\u54c1\u7684\u521b\u5efa\u8fc7\u7a0b \u3002\u5c06\u590d\u6742\u4ea7\u54c1\u7684\u521b\u5efa\u6b65\u9aa4\u5206\u89e3\u5728\u4e0d\u540c\u7684\u65b9\u6cd5\u4e2d\uff0c\u4f7f\u5f97\u521b\u5efa\u8fc7\u7a0b\u66f4\u52a0\u6e05\u6670\uff0c\u4e5f\u66f4\u65b9\u4fbf\u4f7f\u7528\u7a0b\u5e8f\u6765\u63a7\u5236\u521b\u5efa\u8fc7\u7a0b\uff084\uff09 \u589e\u52a0\u65b0\u7684\u5177\u4f53\u5efa\u9020\u8005\u65e0\u987b\u4fee\u6539\u539f\u6709\u7c7b\u5e93\u7684\u4ee3\u7801\uff0c\u6307\u6325\u8005\u7c7b\u9488\u5bf9\u62bd\u8c61\u5efa\u9020\u8005\u7c7b\u7f16\u7a0b\uff0c\u7cfb\u7edf\u6269\u5c55\u65b9\u4fbf\uff0c\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\uff085\uff09 \u5efa\u9020\u8005\u6a21\u5f0f\u6240\u521b\u5efa\u7684\u4ea7\u54c1\u4e00\u822c\u5177\u6709\u8f83\u591a\u7684\u5171\u540c\u70b9\uff0c\u5176\u7ec4\u6210\u90e8\u5206\u76f8\u4f3c\uff0c\u5982\u679c\u4ea7\u54c1\u4e4b\u95f4\u7684\u5dee\u5f02\u6027\u5f88\u5927\uff0c\u5219\u4e0d\u9002\u5408\u4f7f\u7528\u5efa\u9020\u8005\u6a21\u5f0f\uff0c\u56e0\u6b64\u5176\u4f7f\u7528\u8303\u56f4\u53d7\u5230\u4e00\u5b9a\u7684\u9650\u5236\u3002\uff086\uff09\u5982\u679c\u4ea7\u54c1\u7684\u5185\u90e8\u53d8\u5316\u590d\u6742\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u9700\u8981\u5b9a\u4e49\u5f88\u591a\u5177\u4f53\u5efa\u9020\u8005\u7c7b\u6765\u5b9e\u73b0\u8fd9\u79cd\u53d8\u5316\uff0c\u5bfc\u81f4\u7cfb\u7edf\u53d8\u5f97\u5f88\u5e9e\u5927\uff0c\u56e0\u6b64\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8981\u8003\u8651\u662f\u5426\u9009\u62e9\u5efa\u9020\u8005\u6a21\u5f0f\u3002</p> <p>\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f VS \u5efa\u9020\u8005\u6a21\u5f0f</p> <p>\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u5b9e\u73b0\u5bf9\u4ea7\u54c1\u5bb6\u65cf\u7684\u521b\u5efa\uff0c\u4e00\u4e2a\u4ea7\u54c1\u5bb6\u65cf\u662f\u8fd9\u6837\u7684\u4e00\u7cfb\u5217\u4ea7\u54c1\uff1a\u5177\u6709\u4e0d\u540c\u5206\u7c7b\u7ef4\u5ea6\u7684\u4ea7\u54c1\u7ec4\u5408\uff0c\u91c7\u7528\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u4e0d\u9700\u8981\u5173\u5fc3\u6784\u5efa\u8fc7\u7a0b\uff0c\u53ea\u5173\u5fc3\u4ec0\u4e48\u4ea7\u54c1\u7531\u4ec0\u4e48\u5de5\u5382\u751f\u4ea7\u5373\u53ef\u3002\u800c\u5efa\u9020\u8005\u6a21\u5f0f\u5219\u662f\u8981\u6c42\u6309\u7167\u6307\u5b9a\u7684\u84dd\u56fe\u5efa\u9020\u4ea7\u54c1\uff0c\u5b83\u7684\u4e3b\u8981\u76ee\u7684\u662f\u901a\u8fc7\u7ec4\u88c5\u96f6\u914d\u4ef6\u800c\u4ea7\u751f\u4e00\u4e2a\u65b0\u4ea7\u54c1\u3002</p>"},{"location":"Java/designpattern/designpattern/#_24","title":"\u516b\u3001\u8bbe\u914d\u5668\u6a21\u5f0f","text":"<p>\u9002\u914d\u5668\u6a21\u5f0f(Adapter Pattern)\u5c06\u67d0\u4e2a\u7c7b\u7684\u63a5\u53e3\u8f6c\u6362\u6210\u5ba2\u6237\u7aef\u671f\u671b\u7684\u53e6\u4e00\u4e2a\u63a5\u53e3\u8868\u793a\uff0c\u4e3b\u7684\u76ee\u7684\u662f\u517c\u5bb9\u6027\uff0c\u8ba9\u539f\u672c\u56e0\u63a5\u53e3\u4e0d\u5339\u914d\u4e0d\u80fd\u4e00\u8d77\u5de5\u4f5c\u7684\u4e24\u4e2a\u7c7b\u53ef\u4ee5\u534f\u540c\u5de5\u4f5c\u3002\u5176\u522b\u540d\u4e3a\u5305\u88c5\u5668(Wrapper)\u3002\u9002\u914d\u5668\u6a21\u5f0f\u5c5e\u4e8e\u7ed3\u6784\u578b\u6a21\u5f0f\u3002\u4e3b\u8981\u5206\u4e3a\u4e09\u7c7b\uff1a\u7c7b\u9002\u914d\u5668\u6a21\u5f0f\u3001\u5bf9\u8c61\u9002\u914d\u5668\u6a21\u5f0f\u3001\u63a5\u53e3\u9002\u914d\u5668\u6a21\u5f0f\u3002</p>"},{"location":"Java/designpattern/designpattern/#_25","title":"\u57fa\u672c\u539f\u7406","text":"<p>1) \u9002\u914d\u5668\u6a21\u5f0f\uff1a\u5c06\u4e00\u4e2a\u7c7b\u7684\u63a5\u53e3\u8f6c\u6362\u6210\u53e6\u4e00\u79cd\u63a5\u53e3.\u8ba9\u539f\u672c\u63a5\u53e3\u4e0d\u517c\u5bb9\u7684\u7c7b\u53ef\u4ee5\u517c\u5bb9 2) \u4ece\u7528\u6237\u7684\u89d2\u5ea6\u770b\u4e0d\u5230\u88ab\u9002\u914d\u8005\uff0c\u662f\u89e3\u8026\u7684 3) \u7528\u6237\u8c03\u7528\u9002\u914d\u5668\u8f6c\u5316\u51fa\u6765\u7684\u76ee\u6807\u63a5\u53e3\u65b9\u6cd5\uff0c\u9002\u914d\u5668\u518d\u8c03\u7528\u88ab\u9002\u914d\u8005\u7684\u76f8\u5173\u63a5\u53e3\u65b9\u6cd5 4) \u7528\u6237\u6536\u5230\u53cd\u9988\u7ed3\u679c\uff0c\u611f\u89c9\u53ea\u662f\u548c\u76ee\u6807\u63a5\u53e3\u4ea4\u4e92\u3002</p>"},{"location":"Java/designpattern/designpattern/#_26","title":"\u7c7b\u9002\u914d\u5668","text":"<p>Adapter\u7c7b\uff0c\u901a\u8fc7\u7ee7\u627fsrc\u7c7b\uff0c\u5b9e\u73b0dst\u7c7b\u63a5\u53e3\uff0c\u5b8c\u6210src-&gt;dst\u7684\u9002\u914d\u3002\u4ee5\u751f\u6d3b\u4e2d\u5145\u7535\u5668\u7684\u4f8b\u5b50\u6765\u8bb2\u89e3\u9002\u914d\u5668\uff0c\u5145\u7535\u5668\u672c\u8eab\u76f8\u5f53\u4e8eAdapter\uff0c220V \u4ea4\u6d41\u7535\u76f8\u5f53\u4e8e src (\u5373\u88ab\u9002\u914d\u8005)\uff0c\u6211\u4eec\u7684\u76ee\u7684 dst(\u5373\u76ee\u6807)\u662f 5V \u76f4\u6d41\u7535\u3002 <pre><code>public class Voltage220V {\n    public int output220V(){\n        int src=220;\n        System.out.println(\"\u7535\u538b=\"+src+\"\u4f0f\");\n        return src;\n    }\n}\n</code></pre></p> <p>\u4e0a\u9762\u8fd9\u4e2a\u662fsrc\u7c7b\uff0c\u4e0b\u9762\u662fdst\u7c7b\u63a5\u53e3 <pre><code>public interface IVoltage5V {\n    public int output5V();\n}\n</code></pre> \u6211\u4eec\u7684\u76ee\u7684\u662f\u5b9e\u73b0\u4e00\u4e2aAdapter\u7c7b\u6765\u5b8c\u6210\u9002\u914d\u3002 <pre><code>// \u9002\u914d\u5668\u7c7b\npublic class VoltageAdapter extends Voltage220V implements IVoltage5V {\n    @Override\n    public int output5V() {\n        // \u83b7\u53d6\u5230220V\u7684\u7535\u538b\n        int srcV=output220V();\n        int dstV=srcV/44; \n        return dstV;\n    }\n}\n</code></pre> \u901a\u8fc7\u7c7b\u9002\u914d\u5668\u5c31\u53ef\u4ee5\u5b8c\u6210\u7535\u538b\u7684\u8f6c\u6362\u3002\u4f46\u662f\u9700\u8981\u6ce8\u610f\uff1a</p> <p>Java \u662f\u5355\u7ee7\u627f\u673a\u5236\uff0c\u6240\u4ee5\u7c7b\u9002\u914d\u5668\u9700\u8981\u7ee7\u627f src \u7c7b\u8fd9\u4e00\u70b9\u7b97\u662f\u4e00\u4e2a\u7f3a\u70b9, \u56e0\u4e3a\u8fd9\u8981\u6c42 dst \u5fc5\u987b\u662f\u63a5\u53e3\uff0c\u6709\u4e00\u5b9a\u5c40\u9650\u6027; src \u7c7b\u7684\u65b9\u6cd5\u5728 Adapter \u4e2d\u90fd\u4f1a\u66b4\u9732\u51fa\u6765\uff0c\u4e5f\u589e\u52a0\u4e86\u4f7f\u7528\u7684\u6210\u672c\u3002\u7531\u4e8e\u5176\u7ee7\u627f\u4e86 src \u7c7b\uff0c\u6240\u4ee5\u5b83\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u91cd\u5199 src \u7c7b\u7684\u65b9\u6cd5\uff0c\u4f7f\u5f97 Adapter\u7684\u7075\u6d3b\u6027\u589e\u5f3a\u4e86\u3002</p>"},{"location":"Java/designpattern/designpattern/#_27","title":"\u5bf9\u8c61\u9002\u914d\u5668","text":"<p>\u57fa\u672c\u601d\u8def\u548c\u7c7b\u7684\u9002\u914d\u5668\u6a21\u5f0f\u76f8\u540c\uff0c\u53ea\u662f\u5c06Adapter \u7c7b\u4f5c\u4fee\u6539\uff0c\u4e0d\u662f\u7ee7\u627f src \u7c7b\uff0c\u800c\u662f\u6301\u6709 src \u7c7b\u7684\u5b9e\u4f8b\uff0c\u4ee5\u89e3\u51b3\u517c\u5bb9\u6027\u7684\u95ee\u9898\u3002 \u5373\uff1a\u6301\u6709src\u7c7b\uff0c\u5b9e\u73b0dst\u7c7b\u63a5\u53e3\uff0c\u5b8c\u6210 src-&gt;dst \u7684\u9002\u914d\u3002\u6839\u636e\u201c\u5408\u6210\u590d\u7528\u539f\u5219\u201d\uff0c\u5728\u7cfb\u7edf\u4e2d\u5c3d\u91cf\u4f7f\u7528\u5173\u8054\u5173\u7cfb\uff08\u805a\u5408\uff09\u6765\u66ff\u4ee3\u7ee7\u627f\u5173\u7cfb\u3002\u5bf9\u8c61\u9002\u914d\u5668\u6a21\u5f0f\u662f\u9002\u914d\u5668\u6a21\u5f0f\u5e38\u7528\u7684\u4e00\u79cd\u3002 <pre><code>// \u9002\u914d\u5668\u7c7b\npublic class VoltageAdapter implements IVoltage5V {\n    private Voltage220V voltage220v;\n    public VoltageAdapter(Voltage220V voltage220v) {\n        this.voltage220v = voltage220v;\n    }\n    @Override\n    public int output5V() {\n        int dst=0;\n        if(voltage220v!=null){\n            int src=voltage220v.output220V();\n            dst=src/44;\n        }\n        return dst;\n    }    \n}\n</code></pre> \u8fd9\u79cd\u65b9\u6cd5\uff0c\u4e0e\u4e0a\u9762\u7684\u65b9\u6cd5\u7c7b\u4f3c\uff0c\u4f46\u4e0d\u662f\u901a\u8fc7\u7ee7\u627f\u7684\u65b9\u5f0f\uff0c\u800c\u662f\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\uff08\u6216\u8005set\uff09\u83b7\u53d6\u5b9e\u4f8b\u3002</p> <p>\u5bf9\u8c61\u9002\u914d\u5668\u548c\u7c7b\u9002\u914d\u5668\u5176\u5b9e\u7b97\u662f\u540c\u4e00\u79cd\u601d\u60f3\uff0c\u53ea\u4e0d\u8fc7\u5b9e\u73b0\u65b9\u5f0f\u4e0d\u540c\u3002\u6839\u636e\u5408\u6210\u590d\u7528\u539f\u5219\uff0c\u4f7f\u7528\u7ec4\u5408\u66ff\u4ee3\u7ee7\u627f\uff0c \u6240\u4ee5\u5b83\u89e3\u51b3\u4e86\u7c7b\u9002\u914d\u5668\u5fc5\u987b\u7ee7\u627f src\u7684\u5c40\u9650\u6027\u95ee\u9898\uff0c\u4e5f\u4e0d\u518d\u8981\u6c42dst\u5fc5\u987b\u662f\u63a5\u53e3\u3002\u4f7f\u7528\u6210\u672c\u66f4\u4f4e\uff0c\u66f4\u7075\u6d3b</p>"},{"location":"Java/designpattern/designpattern/#_28","title":"\u63a5\u53e3\u9002\u914d\u5668","text":"<p>\u6838\u5fc3\u601d\u8def\uff1a\u5f53\u4e0d\u9700\u8981\u5168\u90e8\u5b9e\u73b0\u63a5\u53e3\u63d0\u4f9b\u7684\u65b9\u6cd5\u65f6\uff0c\u53ef\u5148\u8bbe\u8ba1\u4e00\u4e2a\u62bd\u8c61\u7c7b\u5b9e\u73b0\u63a5\u53e3\uff0c\u5e76\u4e3a\u8be5\u63a5\u53e3\u4e2d\u6bcf\u4e2a\u65b9\u6cd5\u63d0\u4f9b\u4e00\u4e2a\u9ed8\u8ba4\u5b9e\u73b0\uff08\u7a7a\u65b9\u6cd5\uff09\uff0c\u90a3\u4e48\u8be5\u62bd\u8c61\u7c7b\u7684\u5b50\u7c7b\u53ef\u6709\u9009\u62e9\u5730\u8986\u76d6\u7236\u7c7b\u7684\u67d0\u4e9b\u65b9\u6cd5\u6765\u5b9e\u73b0\u9700\u6c42\u3002\u9002\u7528\u4e8e\u4e00\u4e2a\u63a5\u53e3\u4e0d\u60f3\u4f7f\u7528\u5176\u6240\u6709\u7684\u65b9\u6cd5\u7684\u60c5\u51b5\u3002</p>"},{"location":"Java/designpattern/designpattern/#_29","title":"\u9002\u914d\u5668\u7ec6\u8282","text":"<p>\u4e09\u79cd\u547d\u540d\u65b9\u5f0f\uff0c\u662f\u6839\u636esrc\u662f\u4ee5\u600e\u6837\u7684\u5f62\u5f0f\u7ed9\u5230 Adapter\uff08\u5728Adapter\u91cc\u7684\u5f62\u5f0f\uff09\u6765\u547d\u540d\u7684\u3002\u7c7b\u9002\u914d\u5668\uff1a\u4ee5\u7c7b\u7ed9\u5230\uff0c\u5728Adapter\u91cc\uff0c\u5c31\u662f\u5c06src\u5f53\u505a\u7c7b\uff0c\u7ee7\u627f\u3002\u5bf9\u8c61\u9002\u914d\u5668\uff1a\u4ee5\u5bf9\u8c61\u7ed9\u5230\uff0c\u5728Adapter \u91cc\uff0c\u5c06 src \u4f5c\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6301\u6709\u3002\u63a5\u53e3\u9002\u914d\u5668\uff1a\u4ee5\u63a5\u53e3\u7ed9\u5230\uff0c\u5728Adapter\u91cc\uff0c\u5c06src\u4f5c\u4e3a\u4e00\u4e2a\u63a5\u53e3\uff0c\u5b9e\u73b0\u3002Adapter \u6a21\u5f0f\u6700\u5927\u7684\u4f5c\u7528\u8fd8\u662f\u5c06\u539f\u672c\u4e0d\u517c\u5bb9\u7684\u63a5\u53e3\u878d\u5408\u5728\u4e00\u8d77\u5de5\u4f5c\u3002</p>"},{"location":"Java/designpattern/designpattern/#_30","title":"\u4e5d\u3001\u6865\u63a5\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#_31","title":"\u57fa\u672c\u4ecb\u7ecd","text":"<p>\u6865\u63a5\u6a21\u5f0f(Bridge \u6a21\u5f0f)\u662f\u6307\uff1a\u5c06\u5b9e\u73b0\u4e0e\u62bd\u8c61\u653e\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u7c7b\u5c42\u6b21\u4e2d\uff0c\u4f7f\u4e24\u4e2a\u5c42\u6b21\u53ef\u4ee5\u72ec\u7acb\u6539\u53d8\u3002\u662f\u4e00\u79cd\u7ed3\u6784\u578b\u8bbe\u8ba1\u6a21\u5f0f\u3002  Bridge \u6a21\u5f0f\u57fa\u4e8e\u7c7b\u7684\u6700\u5c0f\u8bbe\u8ba1\u539f\u5219\uff0c\u901a\u8fc7\u4f7f\u7528\u5c01\u88c5\u3001\u805a\u5408\u53ca\u7ee7\u627f\u7b49\u884c\u4e3a\u8ba9\u4e0d\u540c\u7684\u7c7b\u627f\u62c5\u4e0d\u540c\u7684\u804c\u8d23\u3002\u5b83\u7684\u4e3b\u8981\u7279\u70b9\u662f\u628a\u62bd\u8c61(Abstraction)\u4e0e\u884c\u4e3a\u5b9e\u73b0(Implementation)\u5206\u79bb\u5f00\u6765\uff0c\u4ece\u800c\u53ef\u4ee5\u4fdd\u6301\u5404\u90e8\u5206\u7684\u72ec\u7acb\u6027\u4ee5\u53ca\u5e94\u5bf9\u4ed6\u4eec\u7684\u529f\u80fd\u6269\u5c55\u3002</p> <p></p> <p>\u62bd\u8c61\u7c7b(Abstraction)\uff1a\u7ef4\u62a4\u4e86 Implementor/\u5373\u5b83\u7684\u5b9e\u73b0\u7c7b ConcreteImplementorA\uff0c \u4e8c\u8005\u662f\u805a\u5408\u5173\u7cfb\uff0c Abstraction\u5145\u5f53\u6865\u63a5\u7c7b\u3002RefinedAbstraction\uff1a\u662fAbstraction\u62bd\u8c61\u7c7b\u7684\u5b50\u7c7b\u3002Implementor : \u884c\u4e3a\u5b9e\u73b0\u7c7b\u7684\u63a5\u53e3\u3002ConcreteImplementorA/B\uff1a\u884c\u4e3a\u7684\u5177\u4f53\u5b9e\u73b0\u7c7b\u3002</p>"},{"location":"Java/designpattern/designpattern/#_32","title":"\u793a\u4f8b\u4ee3\u7801","text":"<p>\u4e0b\u9762\u770b\u4e00\u4e9b\u5177\u4f53\u7684\u4f8b\u5b50\u3002 <pre><code>public abstract class Phone {\n    // \u7ec4\u5408\u54c1\u724c\n    private Brand brand;\n    // \u6784\u9020\u5668\n    public Phone(Brand brand) {\n        this.brand = brand;\n    }   \n    protected void open(){\n        this.brand.open();\n    }\n    protected void close(){\n        this.brand.close();\n    }\n    protected void call(){\n        this.brand.call();\n    }\n}\n</code></pre> \u9996\u5148\u8fd9\u662f\u4e00\u4e2a\u62bd\u8c61\u7684\u624b\u673a\u7c7b\uff0c\u7136\u540e\uff0c\u4e0b\u9762\u662f\u624b\u673a\u7684\u7c7b\u578b\uff08\u6298\u53e0\u5f0f\u6216\u8005\u6ed1\u76d6\u5f0f\uff09\u3002 <pre><code>public class UpRightPhone extends Phone {\n     // \u6784\u9020\u5668\n     public UpRightPhone(Brand brand){\n        super(brand);\n    }\n    public void open(){\n        super.open();\n        System.out.println(\"\u76f4\u7acb\u6837\u5f0f\u7684\u624b\u673a\");\n    }\n    public void close(){\n        super.close();\n        System.out.println(\"\u76f4\u7acb\u6837\u5f0f\u7684\u624b\u673a\");\n    }\n    public void call(){\n        super.call();\n        System.out.println(\"\u76f4\u7acb\u6837\u5f0f\u7684\u624b\u673a\");\n    }\n}\n</code></pre> \u7136\u540e\u662f\u624b\u673a\u7684\u529f\u80fd\u63a5\u53e3 <pre><code>public interface Brand {\n    void open();\n    void close();\n    void call();\n}\n</code></pre> \u4e0b\u9762\u662f\u5177\u4f53\u7684\u624b\u673a\u54c1\u724c <pre><code>public class XiaoMi implements Brand {\n\n    @Override\n    public void open() {\n       System.out.println(\"\u5c0f\u7c73\u624b\u673a\u5f00\u673a\u4e86\"); \n    }\n\n    @Override\n    public void close() {\n       System.out.println(\"\u5c0f\u7c73\u624b\u673a\u5173\u673a\u4e86\");\n    }\n\n    @Override\n    public void call() {\n        System.out.println(\"\u5c0f\u7c73\u624b\u673a\u6253\u7535\u8bdd\");\n    }\n\n}\n</code></pre> \u6700\u540e\u8c03\u7528\u8005\u8c03\u7528\u76f8\u5173\u7684\u65b9\u6cd5\u5b9e\u73b0\u5177\u4f53\u7684\u529f\u80fd\u3002 <pre><code>public static void main(String[] args) {\n        // \u83b7\u53d6\u6298\u53e0\u5f0f\u624b\u673a\uff08\u6837\u5f0f\u52a0\u54c1\u724c\uff09\n        Phone phone1 =new FoldedPhone(new XiaoMi());\n        phone1.open();\n        phone1.call();\n        phone1.close();\n    }\n</code></pre></p>"},{"location":"Java/designpattern/designpattern/#_33","title":"\u7ec6\u8282\u548c\u6ce8\u610f\u4e8b\u9879","text":"<p>\uff081\uff09\u5b9e\u73b0\u4e86\u62bd\u8c61\u548c\u5b9e\u73b0\u90e8\u5206\u7684\u5206\u79bb\uff0c\u4ece\u800c\u6781\u5927\u7684\u63d0\u4f9b\u4e86\u7cfb\u7edf\u7684\u7075\u6d3b\u6027\uff0c\u8ba9\u62bd\u8c61\u90e8\u5206\u548c\u5b9e\u73b0\u90e8\u5206\u72ec\u7acb\u5f00\u6765\uff0c\u8fd9\u6709\u52a9\u4e8e\u7cfb\u7edf\u8fdb\u884c\u5206\u5c42\u8bbe\u8ba1\uff0c\u4ece\u800c\u4ea7\u751f\u66f4\u597d\u7684\u7ed3\u6784\u5316\u7cfb\u7edf\u3002\uff082\uff09 \u5bf9\u4e8e\u7cfb\u7edf\u7684\u9ad8\u5c42\u90e8\u5206\uff0c\u53ea\u9700\u8981\u77e5\u9053\u62bd\u8c61\u90e8\u5206\u548c\u5b9e\u73b0\u90e8\u5206\u7684\u63a5\u53e3\u5c31\u53ef\u4ee5\u4e86\uff0c\u5176\u5b83\u7684\u90e8\u5206\u7531\u5177\u4f53\u4e1a\u52a1\u6765\u5b8c\u6210\u3002\uff083\uff09\u6865\u63a5\u6a21\u5f0f\u66ff\u4ee3\u591a\u5c42\u7ee7\u627f\u65b9\u6848\uff0c\u53ef\u4ee5\u51cf\u5c11\u5b50\u7c7b\u7684\u4e2a\u6570\uff0c\u964d\u4f4e\u7cfb\u7edf\u7684\u7ba1\u7406\u548c\u7ef4\u62a4\u6210\u672c\u3002\uff084\uff09\u6865\u63a5\u6a21\u5f0f\u7684\u5f15\u5165\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u7406\u89e3\u548c\u8bbe\u8ba1\u96be\u5ea6\uff0c\u7531\u4e8e\u805a\u5408\u5173\u8054\u5173\u7cfb\u5efa\u7acb\u5728\u62bd\u8c61\u5c42\uff0c\u8981\u6c42\u5f00\u53d1\u8005\u9488\u5bf9\u62bd\u8c61\u8fdb\u884c\u8bbe\u8ba1\u548c\u7f16\u7a0b\u3002 \u6865\u63a5\u6a21\u5f0f\u8981\u6c42\u6b63\u786e\u8bc6\u522b\u51fa\u7cfb\u7edf\u4e2d\u4e24\u4e2a\u72ec\u7acb\u53d8\u5316\u7684\u7ef4\u5ea6(\u62bd\u8c61\u3001\u548c\u5b9e\u73b0)\uff0c\u56e0\u6b64\u5176\u4f7f\u7528\u8303\u56f4\u6709\u4e00\u5b9a\u7684\u5c40\u9650\u6027\uff0c\u5373\u9700\u8981\u6709\u8fd9\u6837\u7684\u5e94\u7528\u573a\u666f\u3002</p>"},{"location":"Java/designpattern/designpattern/#_34","title":"\u5e38\u7528\u573a\u666f","text":"<p>1) -JDBC \u9a71\u52a8\u7a0b\u5e8f 2) -\u94f6\u884c\u8f6c\u8d26\u7cfb\u7edf \u8f6c\u8d26\u5206\u7c7b: \u7f51\u4e0a\u8f6c\u8d26\uff0c\u67dc\u53f0\u8f6c\u8d26\uff0cAMT \u8f6c\u8d26 \u8f6c\u8d26\u7528\u6237\u7c7b\u578b\uff1a\u666e\u901a\u7528\u6237\uff0c\u94f6\u5361\u7528\u6237\uff0c\u91d1\u5361\u7528\u6237..  3) -\u6d88\u606f\u7ba1\u7406 * \u6d88\u606f\u7c7b\u578b\uff1a\u5373\u65f6\u6d88\u606f\uff0c\u5ef6\u65f6\u6d88\u606f * \u6d88\u606f\u5206\u7c7b\uff1a\u624b\u673a\u77ed\u4fe1\uff0c\u90ae\u4ef6\u6d88\u606f\uff0cQQ \u6d88\u606f...</p>"},{"location":"Java/designpattern/designpattern/#_35","title":"\u5341\u3001\u88c5\u9970\u8005\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#_36","title":"\u95ee\u9898\u5f15\u5165","text":"<p>1) \u5496\u5561\u79cd\u7c7b/\u5355\u54c1\u5496\u5561\uff1aEspresso(\u610f\u5927\u5229\u6d53\u5496\u5561)\u3001ShortBlack\u3001LongBlack(\u7f8e\u5f0f\u5496\u5561)\u3001Decaf(\u65e0\u56e0\u5496\u5561) 2) \u8c03\u6599\uff1aMilk\u3001Soy(\u8c46\u6d46)\u3001Chocolate 3) \u8981\u6c42\u5728\u6269\u5c55\u65b0\u7684\u5496\u5561\u79cd\u7c7b\u65f6\uff0c\u5177\u6709\u826f\u597d\u7684\u6269\u5c55\u6027\u3001\u6539\u52a8\u65b9\u4fbf\u3001\u7ef4\u62a4\u65b9\u4fbf 4) \u4f7f\u7528 OO \u7684\u6765\u8ba1\u7b97\u4e0d\u540c\u79cd\u7c7b\u5496\u5561\u7684\u8d39\u7528: \u5ba2\u6237\u53ef\u4ee5\u70b9\u5355\u54c1\u5496\u5561\uff0c\u4e5f\u53ef\u4ee5\u5355\u54c1\u5496\u5561+\u8c03\u6599\u7ec4\u5408\u3002</p>"},{"location":"Java/designpattern/designpattern/#_37","title":"\u4f20\u7edf\u89e3\u51b3\u65b9\u6848","text":"<p>\u4e3a\u6bcf\u4e00\u79cd\u5355\u54c1Coffee\u521b\u5efa\u5bf9\u5e94\u7684\u7c7b\uff0c\u7136\u540e\u4e3a\u5bf9\u5e94\u7684\u8c03\u6599\u4e5f\u5efa\u7acb\u76f8\u5e94\u7684\u7c7b\uff0c\u7136\u540e\u8fdb\u884c\u7ec4\u5408\uff0c\u8fd9\u6837\u5904\u7406\u4f1a\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u662f\u4f1a\u5b58\u5728\u4e00\u4e2a\u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u5f53\u6211\u4eec\u589e\u52a0\u4e00\u4e2a\u5355\u54c1\u5496\u5561\uff0c\u6216\u8005\u4e00\u4e2a\u65b0\u7684\u8c03\u6599\uff0c\u7c7b\u7684\u6570\u91cf\u5c31\u4f1a\u500d\u589e\uff0c\u5c31\u4f1a\u51fa\u73b0\u7c7b\u7206\u70b8\u3002</p> <p>\u56e0\u4e3a\u5496\u5561\u5355\u54c1+\u8c03\u6599\u7ec4\u5408\u4f1a\u9020\u6210\u7c7b\u7684\u500d\u589e\uff0c\u56e0\u6b64\u53ef\u4ee5\u505a\u6539\u8fdb\uff0c\u5c06\u8c03\u6599\u5185\u7f6e\u5230 Drink \u7c7b\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u9020\u6210\u7c7b\u6570\u91cf\u8fc7\u591a\u3002\u4ece\u800c\u63d0\u9ad8\u9879\u76ee\u7684\u7ef4\u62a4\u6027\u3002\u8fd9\u6837\u53ef\u4ee5\u63a7\u5236\u7c7b\u7684\u6570\u91cf\uff0c\u4e0d\u81f3\u4e8e\u9020\u6210\u5f88\u591a\u7684\u7c7b\uff0c\u5728\u589e\u52a0\u6216\u8005\u5220\u9664\u8c03\u6599\u79cd\u7c7b\u65f6\uff0c\u4ee3\u7801\u7684\u7ef4\u62a4\u91cf\u5f88\u5927\u3002</p>"},{"location":"Java/designpattern/designpattern/#_38","title":"\u88c5\u9970\u8005\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#_39","title":"\u57fa\u672c\u539f\u7406","text":"<p>\u88c5\u9970\u8005\u6a21\u5f0f\uff1a\u52a8\u6001\u7684\u5c06\u65b0\u529f\u80fd\u9644\u52a0\u5230\u5bf9\u8c61\u4e0a\u3002\u5728\u5bf9\u8c61\u529f\u80fd\u6269\u5c55\u65b9\u9762\uff0c\u5b83\u6bd4\u7ee7\u627f\u66f4\u6709\u5f39\u6027\uff0c\u88c5\u9970\u8005\u6a21\u5f0f\u4e5f\u4f53\u73b0\u4e86\u5f00\u95ed\u539f\u5219(ocp)\u3002 + \u88c5\u9970\u8005\u6a21\u5f0f\u5c31\u50cf\u6253\u5305\u4e00\u4e2a\u5feb\u9012     - \u4e3b\u4f53\uff1a\u6bd4\u5982\uff1a\u9676\u74f7\u3001\u8863\u670d (Component) // \u88ab\u88c5\u9970\u8005     - \u5305\u88c5\uff1a\u6bd4\u5982\uff1a\u62a5\u7eb8\u586b\u5145\u3001\u5851\u6599\u6ce1\u6cab\u3001\u7eb8\u677f\u3001\u6728\u677f(Decorator) + Component \u4e3b\u4f53\uff1a\u6bd4\u5982\u7c7b\u4f3c\u524d\u9762\u7684 Drink + ConcreteComponent \u548c Decorator     - ConcreteComponent\uff1a\u5177\u4f53\u7684\u4e3b\u4f53\uff0c\u6bd4\u5982\u524d\u9762\u7684\u5404\u4e2a\u5355\u54c1\u5496\u5561     - Decorator: \u88c5\u9970\u8005\uff0c\u6bd4\u5982\u5404\u8c03\u6599\u3002</p>"},{"location":"Java/designpattern/designpattern/#_40","title":"\u4ee3\u7801\u793a\u4f8b","text":"<p>\u9996\u5148\u5f0f\u62bd\u8c61\u7684Drink\u7c7b <pre><code>public abstract class Drink {\n    public String des; //\u63cf\u8ff0\n    private float price=0.0f;\n    public String getDes() {\n        return des;\n    }\n    public void setDes(String des) {\n        this.des = des;\n    }\n    public float getPrice() {\n        return price;\n    }\n    public void setPrice(float price) {\n        this.price = price;\n    }\n    //\u8ba1\u7b97\u8d39\u7528\u7684\u62bd\u8c61\u65b9\u6cd5\n    // \u7531\u5b50\u7c7b\u6765\u5b9e\u73b0\n    public abstract float cost();\n}\n</code></pre> \u7136\u540e\u662f\u5b9e\u73b0\u4e86Drink\u7c7b\u7684Coffee\u7c7b\u3002\u4e3b\u8981\u662f\u5b9e\u73b0\u4e86\u5f97\u5230\u4ef7\u683c\u7684\u65b9\u6cd5\u3002 <pre><code>public class Coffee extends Drink {\n    @Override\n    public float cost() {\n        return super.getPrice();\n    }\n}\n</code></pre> \u7136\u540e\u662f\u7ee7\u627fCoffee\u5177\u4f53\u7684Coffee\u7c7b <pre><code>public class LongBlack extends Coffee {\n    public LongBlack(){\n        setDes(\"LongBlack\");\n        setPrice(5.0f);\n    }\n}\n</code></pre> \u7136\u540e\u662fDecorator\u7c7b\uff08\u4fee\u9970\u8005\u7c7b\uff09 <pre><code>public class Decorator extends Drink {\n    private Drink obj;\n    public Decorator(Drink obj){\n        this.obj=obj;\n    }\n    @Override\n    public float cost() {\n        return super.getPrice()+obj.cost();\n    }\n    @Override\n    public String getDes() {\n        return super.des+\" \"+super.getPrice()+\" &amp;&amp; \"+obj.getDes();\n    }\n}\n</code></pre> \u7136\u540e\u662f\u5177\u4f53\u7684Decorator\u7c7b\uff0c\u4f8b\u5982Choloate <pre><code>public class Chocolate extends Decorator {\n    public Chocolate(Drink obj){\n        super(obj);\n        setDes(\" \u5de7\u514b\u529b \");\n        setPrice(3.0f);  //\u5f53\u524d\u8c03\u5473\u54c1\u7684\u4ef7\u683c\n    }\n}\n</code></pre> \u901a\u8fc7\u7ee7\u627fDecorator\uff0c\u8bbe\u7f6e\u5176\u4e2d\u7684\u63cf\u8ff0\u548c\u4ef7\u683c\u3002\u6700\u540e\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0a\u7684\u7c7b\u8fdb\u884c\u6211\u4eec\u60f3\u8981\u7684\u5496\u5561\u7ec4\u5408\u4f8b\u5982\u4e00\u4efd\u5976+\u4e24\u4efd\u5de7\u514b\u529b\u7684LongBlack\u5496\u5561 <pre><code>public static void main(String[] args) {\n    // \u88c5\u9970\u7740\u6a21\u5f0f\u4e0b\u7684\u8ba2\u5355\uff1a2\u4efd\u5de7\u514b\u529b+\u4e00\u4efd\u725b\u5976\u7684LongBlack\n    // \u5148\u70b9\u4e00\u4efdLongBlack\n    Drink order=new LongBlack();\n    System.out.println(\"\u8d39\u75281=\"+order.cost());\n    System.out.println(\"\u63cf\u8ff0=\"+order.getDes());\n    // \u52a0\u5165\u4e00\u4efd\u725b\u5976\n    order =new Milk(order);\n    System.out.println(\"\u8d39\u75282=\"+order.cost());\n    System.out.println(\"\u63cf\u8ff0=\"+order.getDes());\n    // \u52a0\u5165\u4e00\u4efd\u5de7\u514b\u529b\n    order =new Chocolate(order);\n    System.out.println(\"\u8d39\u75283=\"+order.cost());\n    System.out.println(\"\u63cf\u8ff0=\"+order.getDes());\n    // \u52a0\u5165\u4e00\u4efd\u5de7\u514b\u529b\n    order =new Chocolate(order);\n    System.out.println(\"\u8d39\u75283=\"+order.cost());\n    System.out.println(\"\u63cf\u8ff0=\"+order.getDes());\n}\n</code></pre></p>"},{"location":"Java/designpattern/designpattern/#_41","title":"\u4f18\u7f3a\u70b9","text":"<ul> <li>Decorator\u6a21\u5f0f\u4e0e\u7ee7\u627f\u5173\u7cfb\u7684\u76ee\u7684\u90fd\u662f\u8981\u6269\u5c55\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u4f46\u662fDecorator\u53ef\u4ee5\u63d0\u4f9b\u6bd4\u7ee7\u627f\u66f4\u591a\u7684\u7075\u6d3b\u6027\u3002</li> <li>\u901a\u8fc7\u4f7f\u7528\u4e0d\u540c\u7684\u5177\u4f53\u88c5\u9970\u7c7b\u4ee5\u53ca\u8fd9\u4e9b\u88c5\u9970\u7c7b\u7684\u6392\u5217\u7ec4\u5408\uff0c\u8bbe\u8ba1\u5e08\u53ef\u4ee5\u521b\u9020\u51fa\u5f88\u591a\u4e0d\u540c\u884c\u4e3a\u7684\u7ec4\u5408\u3002</li> <li>\u8fd9\u79cd\u6bd4\u7ee7\u627f\u66f4\u52a0\u7075\u6d3b\u673a\u52a8\u7684\u7279\u6027\uff0c\u4e5f\u540c\u65f6\u610f\u5473\u7740\u66f4\u52a0\u591a\u7684\u590d\u6742\u6027\u3002</li> <li>\u88c5\u9970\u6a21\u5f0f\u4f1a\u5bfc\u81f4\u8bbe\u8ba1\u4e2d\u51fa\u73b0\u8bb8\u591a\u5c0f\u7c7b\uff0c\u5982\u679c\u8fc7\u5ea6\u4f7f\u7528\uff0c\u4f1a\u4f7f\u7a0b\u5e8f\u53d8\u5f97\u5f88\u590d\u6742\u3002</li> <li>\u88c5\u9970\u6a21\u5f0f\u662f\u9488\u5bf9\u62bd\u8c61\u7ec4\u4ef6\uff08Component\uff09\u7c7b\u578b\u7f16\u7a0b\u3002\u4f46\u662f\uff0c\u5982\u679c\u4f60\u8981\u9488\u5bf9\u5177\u4f53\u7ec4\u4ef6\u7f16\u7a0b\u65f6\uff0c\u5c31\u5e94\u8be5\u91cd\u65b0\u601d\u8003\u4f60\u7684\u5e94\u7528\u67b6\u6784\uff0c\u4ee5\u53ca\u88c5\u9970\u8005\u662f\u5426\u5408\u9002\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u6539\u53d8Component\u63a5\u53e3\uff0c\u589e\u52a0\u65b0\u7684\u516c\u5f00\u7684\u884c\u4e3a\uff0c\u5b9e\u73b0\u201c\u534a\u900f\u660e\u201d\u7684\u88c5\u9970\u8005\u6a21\u5f0f\u3002\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u8981\u505a\u51fa\u6700\u4f73\u9009\u62e9\u3002</li> </ul>"},{"location":"Java/designpattern/designpattern/#_42","title":"\u5341\u4e00\u3001\u7ec4\u5408\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#_43","title":"\u95ee\u9898\u5f15\u5165","text":"<p>\u7f16\u5199\u7a0b\u5e8f\u5c55\u793a\u4e00\u4e2a\u5b66\u6821\u9662\u7cfb\u7ed3\u6784\uff1a\u9700\u6c42\u662f\u8fd9\u6837\uff0c\u8981\u5728\u4e00\u4e2a\u9875\u9762\u4e2d\u5c55\u793a\u51fa\u5b66\u6821\u7684\u9662\u7cfb\u7ec4\u6210\uff0c\u4e00\u4e2a\u5b66\u6821\u6709\u591a\u4e2a\u5b66\u9662\uff0c\u4e00\u4e2a\u5b66\u9662\u6709\u591a\u4e2a\u7cfb\u3002\u4f7f\u7528\u5e38\u89c1\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\uff1a \u5c06\u5b66\u9662\u770b\u505a\u662f\u5b66\u6821\u7684\u5b50\u7c7b\uff0c\u7cfb\u662f\u5b66\u9662\u7684\u5b50\u7c7b\u3002</p> <p>\u5b9e\u9645\u4e0a\u6211\u4eec\u7684\u8981\u6c42\u662f \uff1a\u5728\u4e00\u4e2a\u9875\u9762\u4e2d\u5c55\u793a\u51fa\u5b66\u6821\u7684\u9662\u7cfb\u7ec4\u6210\uff0c\u4e00\u4e2a\u5b66\u6821\u6709\u591a\u4e2a\u5b66\u9662\uff0c\u4e00\u4e2a\u5b66\u9662\u6709\u591a\u4e2a\u7cfb\uff0c \u56e0\u6b64\u8fd9\u79cd\u65b9\u6848\uff0c\u4e0d\u80fd\u5f88\u597d\u5b9e\u73b0\u7684\u7ba1\u7406\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u5bf9\u5b66\u9662\u3001\u7cfb\u7684\u6dfb\u52a0\uff0c\u5220\u9664\uff0c\u904d\u5386\u7b49\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u628a\u5b66\u6821\u3001\u9662\u3001\u7cfb\u90fd\u770b\u505a\u662f\u7ec4\u7ec7\u7ed3\u6784\uff0c\u4ed6\u4eec\u4e4b\u95f4\u6ca1\u6709\u7ee7\u627f\u7684\u5173\u7cfb\uff0c\u800c\u662f\u4e00\u4e2a\u6811\u5f62\u7ed3\u6784\uff0c\u53ef\u4ee5\u66f4\u597d\u7684\u5b9e\u73b0\u7ba1\u7406\u64cd\u4f5c\u3002 =&gt; \u7ec4\u5408\u6a21\u5f0f</p>"},{"location":"Java/designpattern/designpattern/#_44","title":"\u57fa\u672c\u4ecb\u7ecd","text":"<p>\u7ec4\u5408\u6a21\u5f0f\uff08Composite Pattern\uff09\uff0c\u53c8\u53eb\u90e8\u5206\u6574\u4f53\u6a21\u5f0f\uff0c\u5b83\u521b\u5efa\u4e86\u5bf9\u8c61\u7ec4\u7684\u6811\u5f62\u7ed3\u6784\uff0c\u5c06\u5bf9\u8c61\u7ec4\u5408\u6210\u6811\u72b6\u7ed3\u6784\u4ee5\u8868\u793a\u201c\u6574\u4f53-\u90e8\u5206\u201d\u7684\u5c42\u6b21\u5173\u7cfb\u3002\u7ec4\u5408\u6a21\u5f0f\u4f9d\u636e\u6811\u5f62\u7ed3\u6784\u6765\u7ec4\u5408\u5bf9\u8c61\uff0c\u7528\u6765\u8868\u793a\u90e8\u5206\u4ee5\u53ca\u6574\u4f53\u5c42\u6b21\u3002\u7ec4\u5408\u6a21\u5f0f\u4f7f\u5f97\u7528\u6237\u5bf9\u5355\u4e2a\u5bf9\u8c61\u548c\u7ec4\u5408\u5bf9\u8c61\u7684\u8bbf\u95ee\u5177\u6709\u4e00\u81f4\u6027\uff0c\u5373\uff1a\u7ec4\u5408\u80fd\u8ba9\u5ba2\u6237\u4ee5\u4e00\u81f4\u7684\u65b9\u5f0f\u5904\u7406\u4e2a\u522b\u5bf9\u8c61\u4ee5\u53ca\u7ec4\u5408\u5bf9\u8c61\u3002\u4e0b\u9762\u770b\u4e00\u4e0b\u5177\u4f53\u7684\u4ee3\u7801\u5b9e\u73b0\u3002 <pre><code>public abstract class OrganizationComponent {\n    private String name;\n    private String des;\n\n    protected void add(OrganizationComponent organizationComponent){\n        throw new UnsupportedOperationException();\n    }\n\n    protected void remove(OrganizationComponent organizationComponent){\n\n        throw new UnsupportedOperationException();\n    }\n\n    public OrganizationComponent(String name, String des) {\n        this.name = name;\n        this.des = des;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getDes() {\n        return des;\n    }\n\n    public void setDes(String des) {\n        this.des = des;\n    }\n\n    // \u65b9\u6cd5print \u505a\u6210\u62bd\u8c61\uff0c\u4e0b\u9762\u7684\u5b50\u7c7b\u90fd\u9700\u8981\u5b9e\u73b0\n    protected abstract void print();   \n}\n</code></pre> \u4e0a\u9762\u662f\u4e00\u4e2a\u62bd\u8c61\u7684\u57fa\u7c7b\uff0c\u5176\u5b83\u7684\u7c7b\u7ee7\u627f\u8be5\u7c7b\uff0c\u5e76\u5b9e\u73b0\u5176\u4e2d\u7684\u62bd\u8c61\u65b9\u6cd5\u3002\u4e0b\u9762\u662f\u5b66\u6821\u7c7b\u3002 <pre><code>// University\u5c31\u662f Composite ,\u53ef\u4ee5\u7ba1\u7406College\npublic class University extends OrganizationComponent{\n\n    List&lt;OrganizationComponent&gt; organizationComponents=new ArrayList&lt;&gt;();\n\n    public University(String name, String des) {\n        super(name, des);\n    }\n\n    @Override\n    protected void add(OrganizationComponent organizationComponent) {\n        organizationComponents.add(organizationComponent);\n    }\n\n    @Override\n    protected void remove(OrganizationComponent organizationComponent) {\n        organizationComponents.remove(organizationComponent);\n    }\n\n    @Override\n    public String getName() {\n        return super.getName();\n    }\n\n    @Override\n    public String getDes() {\n        return super.getDes();\n    }\n\n    @Override\n    protected void print() {\n        System.out.println(\"---------------\"+getName()+\"-----------------\");\n        for (OrganizationComponent organizationComponent : organizationComponents) {\n            organizationComponent.print();\n        }\n    }\n}\n</code></pre> \u4e00\u4e2a\u5b66\u6821\u53ef\u4ee5\u6709\u591a\u4e2a\u5b66\u9662\uff0c\u5b66\u9662\u4e5f\u8981\u7ee7\u627f\u540c\u6837\u7684\u62bd\u8c61\u7c7b\u3002 <pre><code>public class College extends OrganizationComponent{\n    List&lt;OrganizationComponent&gt; organizationComponents=new ArrayList&lt;&gt;();\n\n    public College(String name, String des) {\n        super(name, des);\n    }\n\n    @Override\n    protected void add(OrganizationComponent organizationComponent) {\n        organizationComponents.add(organizationComponent);\n    }\n\n    @Override\n    protected void remove(OrganizationComponent organizationComponent) {\n        organizationComponents.remove(organizationComponent);\n    }\n\n    @Override\n    public String getName() {\n        return super.getName();\n    }\n\n    @Override\n    public String getDes() {\n        return super.getDes();\n    }\n\n    @Override\n    protected void print() {\n        System.out.println(\"---------------\"+getName()+\"-----------------\");\n        for (OrganizationComponent organizationComponent : organizationComponents) {\n            organizationComponent.print();\n        }\n    }\n}\n</code></pre> \u6700\u540e\u662f\u6bcf\u4e2a\u5b66\u9662\u53ef\u4ee5\u6709\u4e0d\u540c\u7684\u4e13\u4e1a\uff0c\u4e0d\u540c\u7684\u7cfb\uff0c\u4f46\u662f\u4e13\u4e1a\u4e0b\u9762\u6ca1\u6709\u989d\u5916\u7684\u7c7b\u4e86\uff0c\u4e0b\u9762\u662f\u4e13\u4e1a\u7c7b\uff0c\u540c\u6837\u7ee7\u627f\u62bd\u8c61\u7c7b\u3002 <pre><code>public class Department extends OrganizationComponent {\n\n    public Department(String name, String des) {\n        super(name, des);\n    }\n\n    @Override\n    public String getName() {\n        return super.getName();\n    }\n\n    @Override\n    public String getDes() {\n        return super.getDes();\n    }\n\n    @Override\n    protected void print() {\n        System.out.println(getName());\n    }   \n}\n</code></pre> \u4e0b\u9762\u770b\u4e00\u4e0b\u5982\u4f55\u5177\u4f53\u7684\u4f7f\u7528\u8fd9\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u3002 <pre><code>public static void main(String[] args) {\n        //\u521b\u5efa\u5b66\u6821\n        OrganizationComponent university = new University(\"\u6e05\u534e\u5927\u5b66\", \" \u4e2d\u56fd\u9876\u7ea7\u7684\u5927\u5b66 \");\n        // \u521b\u5efa\u5b66\u9662\n        OrganizationComponent computerCollege=new College(\"\u8ba1\u7b97\u673a\u5b66\u9662\", \"\u8ba1\u7b97\u673a\u4e13\u4e1a\");\n        OrganizationComponent softCollege=new College(\"\u8f6f\u4ef6\u5b66\u9662\", \"\u8f6f\u4ef6\u5de5\u7a0b\u4e13\u4e1a\");\n\n        // \u521b\u5efa\u5404\u4e2a\u5b66\u9662\u4e0b\u9762\u7684\u7cfb\n        computerCollege.add(new Department(\"\u8ba1\u7b97\u673a\u79d1\u5b66\u4e0e\u6280\u672f\", \"\u8ba1\u7b97\u673a\u79d1\u5b66\u4e0e\u6280\u672f\"));\n        computerCollege.add(new Department(\"\u4fe1\u606f\u5b89\u5168\", \"\u4fe1\u606f\u5b89\u5168\"));\n        computerCollege.add(new Department(\"\u7f51\u7edc\u5de5\u7a0b\", \"\u7f51\u7edc\u5de5\u7a0b\"));\n\n        softCollege.add(new Department(\"\u8f6f\u4ef6\u5de5\u7a0b\", \"\u8f6f\u4ef6\u5de5\u7a0b\"));\n        softCollege.add(new Department(\"\u4fe1\u606f\u5de5\u7a0b\", \"\u4fe1\u606f\u5de5\u7a0b\"));\n\n        university.add(computerCollege);\n        university.add(softCollege);\n        university.print();\n    }\n</code></pre></p>"},{"location":"Java/designpattern/designpattern/#_45","title":"\u6ce8\u610f\u4e8b\u9879\u548c\u7ec6\u8282","text":"<p>1) \u7b80\u5316\u5ba2\u6237\u7aef\u64cd\u4f5c\u3002\u5ba2\u6237\u7aef\u53ea\u9700\u8981\u9762\u5bf9\u4e00\u81f4\u7684\u5bf9\u8c61\u800c\u4e0d\u7528\u8003\u8651\u6574\u4f53\u90e8\u5206\u6216\u8005\u8282\u70b9\u53f6\u5b50\u7684\u95ee\u9898\u3002 2) \u5177\u6709\u8f83\u5f3a\u7684\u6269\u5c55\u6027\u3002\u5f53\u6211\u4eec\u8981\u66f4\u6539\u7ec4\u5408\u5bf9\u8c61\u65f6\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8c03\u6574\u5185\u90e8\u7684\u5c42\u6b21\u5173\u7cfb\uff0c\u5ba2\u6237\u7aef\u4e0d\u7528\u505a\u51fa\u4efb\u4f55\u6539\u52a8. 3) \u65b9\u4fbf\u521b\u5efa\u51fa\u590d\u6742\u7684\u5c42\u6b21\u7ed3\u6784\u3002\u5ba2\u6237\u7aef\u4e0d\u7528\u7406\u4f1a\u7ec4\u5408\u91cc\u9762\u7684\u7ec4\u6210\u7ec6\u8282\uff0c\u5bb9\u6613\u6dfb\u52a0\u8282\u70b9\u6216\u8005\u53f6\u5b50\u4ece\u800c\u521b\u5efa\u51fa\u590d\u6742\u7684\u6811\u5f62\u7ed3\u6784 4) \u9700\u8981\u904d\u5386\u7ec4\u7ec7\u673a\u6784\uff0c\u6216\u8005\u5904\u7406\u7684\u5bf9\u8c61\u5177\u6709\u6811\u5f62\u7ed3\u6784\u65f6, \u975e\u5e38\u9002\u5408\u4f7f\u7528\u7ec4\u5408\u6a21\u5f0f. 5) \u8981\u6c42\u8f83\u9ad8\u7684\u62bd\u8c61\u6027\uff0c\u5982\u679c\u8282\u70b9\u548c\u53f6\u5b50\u6709\u5f88\u591a\u5dee\u5f02\u6027\u7684\u8bdd\uff0c\u6bd4\u5982\u5f88\u591a\u65b9\u6cd5\u548c\u5c5e\u6027\u90fd\u4e0d\u4e00\u6837\uff0c\u4e0d\u9002\u5408\u4f7f\u7528\u7ec4\u5408\u6a21\u5f0f\u3002</p>"},{"location":"Java/designpattern/designpattern/#_46","title":"\u5341\u4e8c\u3001\u5916\u89c2\u6a21\u5f0f","text":""},{"location":"Java/designpattern/designpattern/#_47","title":"\u95ee\u9898\u5f15\u5165","text":"<p>\u7ec4\u5efa\u4e00\u4e2a\u5bb6\u5ead\u5f71\u9662\uff1a DVD \u64ad\u653e\u5668\u3001\u6295\u5f71\u4eea\u3001\u81ea\u52a8\u5c4f\u5e55\u3001\u73af\u7ed5\u7acb\u4f53\u58f0\u3001\u7206\u7c73\u82b1\u673a\uff0c\u8981\u6c42\u5b8c\u6210\u4f7f\u7528\u5bb6\u5ead\u5f71\u9662\u7684\u529f\u80fd\uff0c\u5176\u8fc7\u7a0b\u4e3a\uff0c\u76f4\u63a5\u7528\u9065\u63a7\u5668\uff0c\u7edf\u7b79\u5404\u8bbe\u5907\u5f00\u5173\u3002 \u5f00\u7206\u7c73\u82b1\u673a-&gt;\u653e\u4e0b\u5c4f\u5e55-&gt;\u5f00\u6295\u5f71\u4eea-&gt;\u5f00\u97f3\u54cd-&gt;\u5f00 DVD\uff0c\u9009 dvd-&gt;\u53bb\u62ff\u7206\u7c73\u82b1-&gt;\u8c03\u6697\u706f\u5149-&gt;\u64ad\u653e-&gt; \u89c2\u5f71\u7ed3\u675f\u540e\uff0c\u5173\u95ed\u5404\u79cd\u8bbe\u5907\u3002</p>"},{"location":"Java/designpattern/designpattern/#_48","title":"\u4f20\u7edf\u65b9\u5f0f\u89e3\u51b3","text":"<p>\u4e3a\u6bcf\u4e2a\u7528\u54c1\u521b\u5efa\u5bf9\u5e94\u7684\u7c7b\u4e0e\u5bf9\u8c61\uff0c\u4ee5\u53ca\u9700\u8981\u4f7f\u7528\u7684\u4e00\u7cfb\u5217\u65b9\u6cd5\uff0c\u7136\u540e\u8fdb\u884c\u8c03\u7528\u3002\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u5b58\u5728\u8f83\u5927\u7684\u95ee\u9898\u548c\u590d\u6742\u5ea6\u3002 </p> <p>\u521b\u5efa\u5404\u4e2a\u5b50\u7cfb\u7edf\u7684\u5bf9\u8c61\uff0c\u5e76\u76f4\u63a5\u53bb\u8c03\u7528\u5b50\u7cfb\u7edf\uff08\u5bf9\u8c61\uff09\u76f8\u5173\u65b9\u6cd5\uff0c\u4f1a\u9020\u6210\u8c03\u7528\u8fc7\u7a0b\u6df7\u4e71\uff0c\u6ca1\u6709\u6e05\u6670\u7684\u8fc7\u7a0b\u3002\u4e0d\u5229\u4e8e\u53bb\u7ef4\u62a4\u5bf9\u5b50\u7cfb\u7edf\u7684\u64cd\u4f5c\u3002</p> <p>\u89e3\u51b3\u601d\u8def\uff1a\u5b9a\u4e49\u4e00\u4e2a\u9ad8\u5c42\u63a5\u53e3\uff0c\u7ed9\u5b50\u7cfb\u7edf\u4e2d\u7684\u4e00\u7ec4\u63a5\u53e3\u63d0\u4f9b\u4e00\u4e2a\u4e00\u81f4\u7684\u754c\u9762(\u6bd4\u5982\u5728\u9ad8\u5c42\u63a5\u53e3\u63d0\u4f9b\u56db\u4e2a\u65b9\u6cd5ready, play, pause, end )\uff0c\u7528\u6765\u8bbf\u95ee\u5b50\u7cfb\u7edf\u4e2d\u7684\u4e00\u7fa4\u63a5\u53e3\u3002 \u4e5f\u5c31\u662f\u8bf4 \u5c31\u662f\u901a\u8fc7\u5b9a\u4e49\u4e00\u4e2a\u4e00\u81f4\u7684\u63a5\u53e3(\u754c\u9762\u7c7b)\uff0c\u7528\u4ee5\u5c4f\u853d\u5185\u90e8\u5b50\u7cfb\u7edf\u7684\u7ec6\u8282\uff0c\u4f7f\u5f97\u8c03\u7528\u7aef\u53ea\u9700\u8ddf\u8fd9\u4e2a\u63a5\u53e3\u53d1 \u751f\u8c03\u7528\uff0c\u800c\u65e0\u9700\u5173\u5fc3\u8fd9\u4e2a\u5b50\u7cfb\u7edf\u7684\u5185\u90e8\u7ec6\u8282 =&gt; \u5916\u89c2\u6a21\u5f0f\u3002\uff08\u81ea\u6211\u611f\u89c9\u5c31\u662f\u52a0\u4e86\u4e00\u5c42\uff0c\u6ca1\u4ec0\u4e48\u662f\u52a0\u4e00\u5c42\u89e3\u51b3\u4e0d\u4e86\u7684\uff0c\u5982\u679c\u6709\uff0c\u90a3\u5c31\u518d\u52a0\u4e00\u5c42\uff09\u3002</p>"},{"location":"Java/designpattern/designpattern/#_49","title":"\u5916\u89c2\u6a21\u5f0f\u4ecb\u7ecd","text":"<p>\u5916\u89c2\u6a21\u5f0f\uff08Facade\uff09\uff0c\u4e5f\u53eb\u8fc7\u7a0b\u6a21\u5f0f\uff1a\u5916\u89c2\u6a21\u5f0f\u4e3a\u5b50\u7cfb\u7edf\u4e2d\u7684\u4e00\u7ec4\u63a5\u53e3\u63d0\u4f9b\u4e00\u4e2a\u4e00\u81f4\u7684\u754c\u9762\uff0c\u6b64\u6a21\u5f0f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u9ad8\u5c42\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u4f7f\u5f97\u8fd9\u4e00\u5b50\u7cfb\u7edf\u66f4\u52a0\u5bb9\u6613\u4f7f\u7528\u3002\u5916\u89c2\u6a21\u5f0f\u901a\u8fc7\u5b9a\u4e49\u4e00\u4e2a\u4e00\u81f4\u7684\u63a5\u53e3\uff0c\u7528\u4ee5\u5c4f\u853d\u5185\u90e8\u5b50\u7cfb\u7edf\u7684\u7ec6\u8282\uff0c\u4f7f\u5f97\u8c03\u7528\u7aef\u53ea\u9700\u8ddf\u8fd9\u4e2a\u63a5\u53e3\u53d1\u751f\u8c03\u7528\uff0c\u800c\u65e0\u9700\u5173\u5fc3\u8fd9\u4e2a\u5b50\u7cfb\u7edf\u7684\u5185\u90e8\u7ec6\u8282\u3002</p> <p>\u4e0b\u9762\u662f\u4ee3\u7801\u793a\u4f8b <pre><code>public class DVDPlayer {\n    // \u4f7f\u7528\u5355\u4f8b\u6a21\u5f0f\uff0c\u997f\u6c49\u5f0f\n    private static DVDPlayer instance = new DVDPlayer();\n    public static DVDPlayer getInstance(){\n        return instance;\n    }\n\n    public void on(){\n        System.out.println(\" dvd on \");\n    }\n\n    public void off(){\n        System.out.println(\"dvd off\");\n    }\n\n    public void play(){\n        System.out.println(\"dvd is playing\");\n    }\n\n    public void pause(){\n        System.out.println(\"dvd pause\");\n    }\n}\n</code></pre> \u4e0a\u9762\u7684\u4ee3\u7801\u662fDVDPlayer\u7684\u4e00\u4e9b\u64cd\u4f5c <pre><code>public class Screen {\n    private static Screen instance = new Screen();\n    public static Screen getInstance(){\n        return instance;\n    }\n    public void up(){\n        System.out.println(\" screen up \");\n    }\n\n    public void down(){\n        System.out.println(\" screen down \");\n    }\n}\n</code></pre> \u4e0a\u9762\u662fScreen\u5c4f\u5e55\u7684\u4e00\u4e9b\u64cd\u4f5c\u3002\u8fd8\u6709\u8bb8\u591a\u7684\u64cd\u4f5c\u4e0e\u4e0a\u8ff0\u60c5\u51b5\u7c7b\u4f3c\uff0c\u4e0d\u518d\u5199\u4e86\uff0c\u4e0b\u9762\u662f\u591a\u52a0\u7684\u90a3\u4e00\u5c42\uff0c\u4e5f\u5c31\u662f\u8c03\u7528\u5404\u4e2a\u5b50\u7cfb\u7edf\u7684\u63a5\u53e3\u3002 <pre><code>public class HomeTheaterFacade {\n\n    // \u5b9a\u4e49\u5404\u4e2a\u5b50\u7cfb\u7edf\u7684\u5bf9\u8c61\n    private TheaterLight theaterLight;\n    private Popcorn popcorn;\n    private Projector projector;\n    private Screen screen;\n    private Setero setero;\n    private DVDPlayer dvdPlayer; \n\n    public HomeTheaterFacade() {\n        this.theaterLight = TheaterLight.getInstance();\n        this.popcorn = Popcorn.getInstance();\n        this.projector = Projector.getInstance();\n        this.screen = Screen.getInstance();\n        this.setero = Setero.getInstance();\n        this.dvdPlayer = DVDPlayer.getInstance();\n    }\n\n    // \u64cd\u4f5c\u5206\u4e3a4\u6b65\n    public void ready(){\n        popcorn.on();\n        popcorn.pop();\n        screen.down();\n        projector.on();\n        setero.on();\n        dvdPlayer.on();\n        theaterLight.dim();\n    }\n\n    public void play(){\n        dvdPlayer.play();\n    }\n\n    public void pause(){\n        dvdPlayer.pause();\n    }\n\n    public void end(){\n        popcorn.off();\n        theaterLight.bright();\n        screen.up();\n        projector.off();\n        setero.off();\n        dvdPlayer.off();\n    }\n}\n</code></pre> \u6700\u540e\u662f\u8c03\u7528\u8fd9\u4e2a\u7c7b\uff0c\u6765\u5b8c\u6210\u5bb6\u5ead\u5f71\u9662\u7684\u529f\u80fd\u3002 <pre><code> public static void main(String[] args) {\n        HomeTheaterFacade homeTheaterFacade=new HomeTheaterFacade();\n        homeTheaterFacade.ready();\n        homeTheaterFacade.play();\n    }\n</code></pre></p>"},{"location":"Java/designpattern/designpattern/#_50","title":"\u6ce8\u610f\u4e8b\u9879\u548c\u7ec6\u8282","text":"<ul> <li>\u5916\u89c2\u6a21\u5f0f\u5bf9\u5916\u5c4f\u853d\u4e86\u5b50\u7cfb\u7edf\u7684\u7ec6\u8282\uff0c\u56e0\u6b64\u5916\u89c2\u6a21\u5f0f\u964d\u4f4e\u4e86\u5ba2\u6237\u7aef\u5bf9\u5b50\u7cfb\u7edf\u4f7f\u7528\u7684\u590d\u6742\u6027</li> <li>\u5916\u89c2\u6a21\u5f0f\u5bf9\u5ba2\u6237\u7aef\u4e0e\u5b50\u7cfb\u7edf\u7684\u8026\u5408\u5173\u7cfb - \u89e3\u8026\uff0c\u8ba9\u5b50\u7cfb\u7edf\u5185\u90e8\u7684\u6a21\u5757\u66f4\u6613\u7ef4\u62a4\u548c\u6269\u5c55</li> <li>\u901a\u8fc7\u5408\u7406\u7684\u4f7f\u7528\u5916\u89c2\u6a21\u5f0f\uff0c\u53ef\u4ee5\u5e2e\u6211\u4eec\u66f4\u597d\u7684\u5212\u5206\u8bbf\u95ee\u7684\u5c42\u6b21</li> <li>\u5f53\u7cfb\u7edf\u9700\u8981\u8fdb\u884c\u5206\u5c42\u8bbe\u8ba1\u65f6\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 Facade \u6a21\u5f0f</li> <li>\u5728\u7ef4\u62a4\u4e00\u4e2a\u9057\u7559\u7684\u5927\u578b\u7cfb\u7edf\u65f6\uff0c\u53ef\u80fd\u8fd9\u4e2a\u7cfb\u7edf\u5df2\u7ecf\u53d8\u5f97\u975e\u5e38\u96be\u4ee5\u7ef4\u62a4\u548c\u6269\u5c55\uff0c\u6b64\u65f6\u53ef\u4ee5\u8003\u8651\u4e3a\u65b0\u7cfb\u7edf\u5f00\u53d1\u4e00\u4e2a Facade \u7c7b\uff0c\u6765\u63d0\u4f9b\u9057\u7559\u7cfb\u7edf\u7684\u6bd4\u8f83\u6e05\u6670\u7b80\u5355\u7684\u63a5\u53e3\uff0c\u8ba9\u65b0\u7cfb\u7edf\u4e0e Facade \u7c7b\u4ea4\u4e92\uff0c\u63d0\u9ad8\u590d\u7528\u6027</li> <li>\u4e0d\u80fd\u8fc7\u591a\u7684\u6216\u8005\u4e0d\u5408\u7406\u7684\u4f7f\u7528\u5916\u89c2\u6a21\u5f0f\uff0c\u4f7f\u7528\u5916\u89c2\u6a21\u5f0f\u597d\uff0c\u8fd8\u662f\u76f4\u63a5\u8c03\u7528\u6a21\u5757\u597d\u3002\u8981\u4ee5\u8ba9\u7cfb\u7edf\u6709\u5c42\u6b21\uff0c\u5229\u4e8e\u7ef4\u62a4\u4e3a\u76ee\u7684\u3002</li> </ul>"},{"location":"Python/","title":"python\u5b66\u4e60","text":"<p>\u70b9\u51fb\u5de6\u4fa7\u67e5\u770b\u76f8\u5173\u5185\u5bb9</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/","title":"Index","text":"<p>\u8fd9\u91cc\u4e3b\u8981\u662f\u5e73\u65f6\u5b66\u4e60ROS2\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-Gazebo%E4%BB%BF%E7%9C%9F/","title":"Gazebo\u4eff\u771f","text":"<p>Gazebo\u662fROS\u7cfb\u7edf\u4e2d\u6700\u4e3a\u5e38\u7528\u7684\u4e09\u7ef4\u7269\u7406\u4eff\u771f\u5e73\u53f0\uff0c\u652f\u6301\u52a8\u529b\u5b66\u5f15\u64ce\uff0c\u53ef\u4ee5\u5b9e\u73b0\u9ad8\u8d28\u91cf\u7684\u56fe\u5f62\u6e32\u67d3\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u6a21\u62df\u673a\u5668\u4eba\u53ca\u5468\u8fb9\u73af\u5883\uff0c\u8fd8\u53ef\u4ee5\u52a0\u5165\u6469\u64e6\u529b\u3001\u5f39\u6027\u7cfb\u6570\u7b49\u7269\u7406\u5c5e\u6027\u3002\u6240\u4ee5\u7c7b\u4f3cGazebo\u8fd9\u6837\u7684\u4eff\u771f\u5e73\u53f0\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u9a8c\u8bc1\u673a\u5668\u4eba\u7b97\u6cd5\u3001\u4f18\u5316\u673a\u5668\u4eba\u8bbe\u8ba1\u3001\u6d4b\u8bd5\u673a\u5668\u4eba\u573a\u666f\u5e94\u7528\uff0c\u4e3a\u673a\u5668\u4eba\u5f00\u53d1\u63d0\u4f9b\u66f4\u591a\u53ef\u80fd\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-Gazebo%E4%BB%BF%E7%9C%9F/#_1","title":"\u5b89\u88c5\u8fd0\u884c","text":"<p>\u901a\u8fc7\u547d\u4ee4apt\u8fdb\u884c\u5b89\u88c5 <pre><code>sudo apt install ros-humble-gazebo-*\n</code></pre> \u7136\u540e\u901a\u8fc7\u4e00\u4e0b\u547d\u4ee4\u53ef\u4ee5\u8fd0\u884c <pre><code> ros2 launch gazebo_ros gazebo.launch.py\n</code></pre> \u6216\u8005\u4e0b\u9762\u7684\u547d\u4ee4 <pre><code>gazebo --verbose -s libgazebo_ros_init.so -s libgazebo_ros_factory.so \n</code></pre> \u8fd0\u884c\u4e4b\u540e\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u9875\u9762\uff1a </p> <p>\u4e3a\u4fdd\u8bc1\u6a21\u578b\u987a\u5229\u52a0\u8f7d\uff0c\u8bf7\u5c06\u79bb\u7ebf\u6a21\u578b\u4e0b\u8f7d\u5e76\u653e\u7f6e\u5230~/.gazebo/models\u8def\u5f84\u4e0b\uff0c\u4e0b\u8f7d\u94fe\u63a5\u5982\u4e0b\uff1ahttps://github.com/osrf/gazebo_models</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-Gazebo%E4%BB%BF%E7%9C%9F/#gazebo_1","title":"gazebo\u542f\u52a8\u8282\u70b9\u4e0e\u670d\u52a1","text":"<p>\u9996\u5148\u67e5\u770b\u8282\u70b9 <pre><code>ros2 node list\n</code></pre> \u6b63\u786e\u8fd4\u56de\uff1a/gazebo \u4ea7\u770b\u8282\u70b9\u7684\u5bf9\u5916\u63d0\u4f9b\u7684\u670d\u52a1\uff1aros2 service list\u3002 \u53ef\u4ee5\u770b\u51fa\u5982\u4e0b\u7684\u7ed3\u679c\uff1a</p> <p>/delete_entity /get_model_list /spawn_entity /gazebo/describe_parameters /gazebo/get_parameter_types /gazebo/get_parameters /gazebo/list_parameters /gazebo/set_parameters /gazebo/set_parameters_atomically</p> <p>\u51fa\u53bb\u6700\u540e\u51e0\u4e2a\u5e38\u89c4\u7684\u670d\u52a1\uff0c\u6211\u4eec\u53ea\u6ce8\u610f\u524d\u4e09\u4e2a\u7279\u6b8a\u7684\u670d\u52a1\uff1a * /spawn_entity\uff0c\u7528\u4e8e\u52a0\u8f7d\u6a21\u578b\u5230gazebo\u4e2d * /get_model_list\uff0c\u7528\u4e8e\u83b7\u53d6\u6a21\u578b\u5217\u8868 * /delete_entity\uff0c\u7528\u4e8e\u5220\u9664gazbeo\u4e2d\u5df2\u7ecf\u52a0\u8f7d\u7684\u6a21\u578b</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-Gazebo%E4%BB%BF%E7%9C%9F/#_2","title":"\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4\u53ca\u529f\u80fd\u5305","text":"<p>\u521b\u5efa\u4e00\u4e2agazebo_demo\u7684\u6587\u4ef6\u5939\uff0c\u5728\u5176\u4e2d\u521b\u5efa\u4e00\u4e2asrc\u6587\u4ef6\uff0c\u7136\u540e\u5728src\u6587\u4ef6\u5939\u4e2d\u521b\u5efa\u6211\u4eec\u7684\u529f\u80fd\u5305myrobot(\u4ee5c++\u4e3a\u4f8b)\u3002 <pre><code>mkdir -p gazebo_demo/src\ncd gazebo_demo/src\nros2 pkg create myrobot --build-type ament_camke\n</code></pre> \u8fdb\u5165\u5230myrobot\u7684\u76ee\u5f55\u4e0b\uff0c\u521b\u5efalaunch\u3001urdf\u6587\u4ef6\u5939\uff0c\u4fee\u6539CMakeLists.txt\u6587\u4ef6\uff0c\u8fd9\u4e00\u6b65\u9aa4\u548crviz\u4e2d\u7c7b\u4f3c\u3002\u5728urdf\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u4e00\u4e2ademo01_base.urdf\u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6f14\u793a\u6587\u4ef6\uff0c\u53ea\u6709\u4e00\u4e2a\u57fa\u7840\u7684\u7acb\u65b9\u4f53\u3002 <pre><code>&lt;robot name=\"myrobot\"&gt;\n    &lt;link name=\"base_link\"&gt;\n        &lt;visual&gt;\n            &lt;geometry&gt;\n                &lt;box size=\"0.2 0.2 0.2\"/&gt;\n            &lt;/geometry&gt;\n            &lt;origin xyz=\"0.0 0.0 0.0\"/&gt;\n        &lt;/visual&gt;\n        &lt;collision&gt;\n            &lt;geometry&gt;\n                &lt;box size=\"0.2 0.2 0.2\"/&gt;\n            &lt;/geometry&gt;\n            &lt;origin xyz=\"0.0 0.0 0.0\"/&gt;\n        &lt;/collision&gt;\n        &lt;inertial&gt;\n            &lt;mass value=\"0.1\"/&gt;\n            &lt;inertia ixx=\"0.000190416666667\" ixy=\"0\" ixz=\"0\" iyy=\"0.0001904\" iyz=\"0\" izz=\"0.00036\"/&gt;\n        &lt;/inertial&gt;\n    &lt;/link&gt;\n    &lt;gazebo reference=\"base_link\"&gt;\n        &lt;material&gt;Gazebo/Red&lt;/material&gt;\n    &lt;/gazebo&gt;\n&lt;/robot&gt;\n</code></pre> \u8fd9\u91cc\u548c\u4ee5\u524d\u7684\u6587\u4ef6\u4e0d\u540c\u7684\u662f\u52a0\u5165\u4e86collision\u548cintertial\u5c5e\u6027\uff0c\u90fd\u5c5e\u4e8e\u7269\u7406\u76f8\u5173\u53c2\u6570\uff0c\u8fd9\u4e2a\u5c31\u4e0d\u505a\u8ba8\u8bba\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-Gazebo%E4%BB%BF%E7%9C%9F/#lauch","title":"lauch\u6587\u4ef6","text":"<p>launch\u6587\u4ef6\u7684\u7f16\u5199\uff0claunch\u6587\u4ef6\u4e3b\u8981\u542f\u52a8\u4e24\u4e2a\u90e8\u5206\uff0c\u542f\u52a8Gazebo\u6587\u4ef6\uff0c\u7136\u540e\u5c06\u673a\u5668\u4eba\u6a21\u578b\u52a0\u8f7d\u5230Gazebo\u4e2d\u3002 <pre><code>start_gazebo_cmd =  ExecuteProcess(\n        cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so'],\n        output='screen')\n</code></pre> \u8fd9\u4e2a\u547d\u4ee4\u5c31\u662f\u542f\u52a8Gazebo\u7684\uff0c\u5c31\u662f\u4e00\u4e2a\u542f\u52a8\u547d\u4ee4\uff0c\u5e76\u6ca1\u6709\u7279\u522b\u590d\u6742\u7684\u5730\u65b9\uff0c\u4e0b\u9762\u662f\u52a0\u8f7d\u6a21\u578b\u7684\u547d\u4ee4\uff1a <pre><code> spawn_entity_cmd = Node(\n        package='gazebo_ros', \n        executable='spawn_entity.py',\n        arguments=['-entity', robot_name_in_model,  '-file', urdf_model_path ], output='screen')\n</code></pre> \u8fd9\u4e2a\u547d\u4ee4\u6ce8\u610f\u540e\u9762\u4e24\u4e2a\u53c2\u6570-entity\u662f\u6a21\u578b\u6587\u4ef6\u4e2d\u7684\u540d\u5b57\uff0c-file\u662f\u901a\u8fc7urdf\u6587\u4ef6\u52a0\u8f7d\u53c2\u6570\uff0c\u540e\u9762\u6211\u4eec\u8fd8\u53ef\u4ee5\u770b\u5230\u901a\u8fc7topic\u8bdd\u9898\u52a0\u8f7d\u6a21\u578b\u7684\u3002\u5b8c\u6574\u7684\u542f\u52a8\u6587\u4ef6\u5982\u4e0b\uff1a <pre><code>import os\nfrom launch import LaunchDescription\nfrom launch.actions import ExecuteProcess\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\nfrom launch_ros.parameter_descriptions import ParameterValue\nfrom launch.substitutions import Command\n\ndef generate_launch_description():\n    robot_name_in_model = 'myrobot'\n    package_name = 'myrobot'\n    urdf_name = \"demo01_base.urdf\"\n\n    ld = LaunchDescription()\n    pkg_share = FindPackageShare(package=package_name).find(package_name) \n    urdf_model_path = os.path.join(pkg_share, f'urdf/{urdf_name}')\n\n    # Start Gazebo server\n    start_gazebo_cmd =  ExecuteProcess(\n        cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so'],\n        output='screen')\n\n    # Launch the robot\n    spawn_entity_cmd = Node(\n        package='gazebo_ros', \n        executable='spawn_entity.py',\n        arguments=['-entity', robot_name_in_model,  '-file', urdf_model_path ], output='screen')\n\n    ld.add_action(start_gazebo_cmd)\n    ld.add_action(spawn_entity_cmd)\n\n    return ld\n</code></pre> \u542f\u52a8\u4e4b\u540e\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u7684Gazebo\u6a21\u578b\uff1a </p> <p>\u53ef\u4ee5\u770b\u5230\u7ea2\u8272\u7684\u6a21\u578b\uff0c\u56e0\u4e3a\u6700\u540e\u52a0\u4e0a\u4e86Gazebo\u7684\u6807\u7b7e\u8bbe\u7f6e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-Gazebo%E4%BB%BF%E7%9C%9F/#_3","title":"\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u7684\u6a21\u578b\u6587\u4ef6","text":"<p>\u901a\u8fc7\u4e0a\u9762\u7684\u663e\u793a\u6a21\u578b\u6587\u4ef6\uff0c\u53ef\u4ee5\u770b\u51fa\u53ea\u6709\u7a7a\u8361\u8361\u7684\u6a21\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u52a0\u5165\u4e00\u4e9b\u81ea\u5b9a\u4e49\u7684\u73af\u5883\uff0c\u4f8b\u5982\u6211\u4eec\u5728\u529f\u80fd\u5305\u4e2d\u65b0\u5efa\u4e00\u4e2aworld\u7684\u6587\u4ef6\u5939\uff0c\u5728\u5176\u4e2d\u653e\u5165\u6211\u4eec\u7684\u73af\u5883\u6a21\u578b\u6587\u4ef6myworld.world\u3002\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u542f\u52a8\u6587\u4ef6\u914d\u7f6e\uff1agazebo --verbose  -s libgazebo_ros_init.so -s  libgazebo_ros_factory.so \u4f60\u7684world\u6587\u4ef6\u76ee\u5f55/fishbot.world\u3002\u5c31\u662f\u5728\u539f\u547d\u4ee4\u7684\u57fa\u7840\u4e0a\u52a0\u4e86\u4e2a\u6587\u4ef6\u8def\u5f84\uff0c\u6548\u679c\u5982\u4e0b\uff1a </p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-Gazebo%E4%BB%BF%E7%9C%9F/#launchworld","title":"launch\u6587\u4ef6\u52a0\u8f7dworld","text":"<p>\u4e0a\u9762\u7684\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u5b9e\u73b0\u4e86launch\u6587\u4ef6\u542f\u52a8gazebo\u5e76\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b\uff0c\u4f46\u662f\u8fd8\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\uff0c\u5982\u679c\u6587\u4ef6xacro\u7684\u8bdd\uff0c\u65e0\u6cd5\u76f4\u63a5\u901a\u8fc7-file\u8fdb\u884c\u8bfb\u53d6\uff0c\u6240\u4ee5\u53ef\u4ee5\u8003\u8651\u4f7f\u7528-topic\u547d\u4ee4\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 robot_state_publisher_node \u5c06robot_description\u8bdd\u9898\u53d1\u5e03\u51fa\u53bb\uff0c\u8fd9\u4e2a\u8bdd\u9898\u4e2d\u5305\u542b\u4e86\u673a\u5668\u4eba\u7684\u6a21\u578b\u6587\u4ef6\u3002 <pre><code>    robot_description = ParameterValue(Command(['xacro ', urdf_model_path]),\n        value_type=str)\n # \u5c06\u673a\u5668\u4eba\u6a21\u578b\u901a\u8fc7robot_description\u8bdd\u9898\u53d1\u5e03\u51fa\u53bb\uff08gazebo\u597d\u50cf\u4e0d\u80fd\u76f4\u63a5\u52a0\u8f7dxacro\u6587\u4ef6\uff09\n    robot_state_publisher_node = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        parameters=[{'robot_description': robot_description}]\n    )\n</code></pre> \u8fd9\u90e8\u5206\u5c31\u548c\u4e0a\u8282\u8bfe\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u662f\u5c06\u6a21\u578b\u53d1\u5e03\u5230Gazebo\u4e2d\u4e86\uff0c\u7136\u540e\u4e0b\u9762\u662f\u66f4\u6539\u52a0\u8f7d\u6a21\u578b\u7684\u65b9\u5f0f\u4e86 <pre><code> spawn_entity_cmd = Node(\n        package='gazebo_ros', \n        executable='spawn_entity.py',\n        arguments=['-entity', robot_name_in_model,  '-topic', 'robot_description' ], output='screen')\n</code></pre> \u6ce8\u610f\u5230\u4f7f\u7528\u4e86-topic\u7684\u65b9\u5f0f\uff0c\u540e\u9762\u52a0\u4e0a\u4e86\u8bdd\u9898\u540d\u79f0robot_description\u3002\u542f\u52a8Gazebo\u670d\u52a1\u7684\u547d\u4ee4\u540e\u9762\u4e5f\u8981\u52a0\u4e0a\u6211\u4eec\u5b9a\u4e49\u7684world\u6a21\u578b\u6587\u4ef6\u8def\u5f84\u3002 <pre><code> start_gazebo_cmd =  ExecuteProcess(\n        cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so',gazebo_world_path],\n        output='screen')\n</code></pre></p> <p>\u6700\u540e\u67e5\u770b\u5b8c\u6574\u7684launch\u6587\u4ef6 <pre><code>import os\nfrom launch import LaunchDescription\nfrom launch.actions import ExecuteProcess\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\nfrom launch.substitutions import Command\nfrom launch_ros.parameter_descriptions import ParameterValue\n\n\n\ndef generate_launch_description():\n    robot_name_in_model = 'myrobot'\n    package_name = 'myrobot'\n    urdf_name = \"sumcar.xacro\"\n\n\n    ld = LaunchDescription()\n    pkg_share = FindPackageShare(package=package_name).find(package_name) \n    urdf_model_path = os.path.join(pkg_share, f'urdf/{urdf_name}')\n    gazebo_world_path = os.path.join(pkg_share, 'world/myworld.world')\n\n    robot_description = ParameterValue(Command(['xacro ', urdf_model_path]),\n    value_type=str)\n    # Start Gazebo server\n    start_gazebo_cmd =  ExecuteProcess(\n        cmd=['gazebo', '--verbose','-s', 'libgazebo_ros_init.so', '-s', 'libgazebo_ros_factory.so',gazebo_world_path],\n        output='screen')\n\n    # \u5c06\u673a\u5668\u4eba\u6a21\u578b\u901a\u8fc7robot_description\u8bdd\u9898\u53d1\u5e03\u51fa\u53bb\uff08gazebo\u597d\u50cf\u4e0d\u80fd\u76f4\u63a5\u52a0\u8f7dxacro\u6587\u4ef6\uff09\n    robot_state_publisher_node = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        parameters=[{'robot_description': robot_description}]\n    )\n\n    # Launch the robot\n    spawn_entity_cmd = Node(\n        package='gazebo_ros', \n        executable='spawn_entity.py',\n        arguments=['-entity', robot_name_in_model,  '-topic', 'robot_description' ], output='screen')\n\n    ld.add_action(robot_state_publisher_node)\n    ld.add_action(start_gazebo_cmd)\n    ld.add_action(spawn_entity_cmd) \n\n    return ld\n</code></pre> \u5c06\u4ee5\u4e0a\u6587\u4ef6\u5199\u597d\u540e\uff0c\u53ef\u4ee5\u7f16\u8bd1\u8fd0\u884c\u67e5\u770b\uff0c\u6700\u7ec8\u7684\u6548\u679c\u5982\u4e0b\uff1a </p> <p>\u8fd9\u4e2a\u91cc\u9762\u84dd\u8272\u7684\u533a\u57df\u662f\u96f7\u8fbe\u6240\u80fd\u770b\u89c1\u7684\u8303\u56f4\uff0c\u673a\u5668\u4eba\u4e5f\u5df2\u7ecf\u51fa\u73b0\u5728\u4e86world\u533a\u57df\u7684\u4e2d\u5fc3\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/","title":"URDF\uff08Unified Robot Description Format\uff09","text":"<p>\u7edf\u4e00\u673a\u5668\u4eba\u63cf\u8ff0\u683c\u5f0f\uff0cURDF\u4f7f\u7528XML\u683c\u5f0f\u63cf\u8ff0\u673a\u5668\u4eba\u6587\u4ef6\u3002\u901a\u8fc7URDF\u6587\u4ef6\u6211\u4eec\u53ef\u4ee5\u642d\u5efa\u4e00\u4e2a\u6211\u4eec\u81ea\u5df1\u7684\u4eff\u771f\u673a\u5668\u4eba\uff0c\u7136\u540e\u901a\u8fc7RVIZ\u6216\u8005Gazebo\u7b49\u8f6f\u4ef6\u8fdb\u884c\u5c55\u793a\uff0c\u4e0b\u9762\u8fdb\u884c\u7b80\u5355\u7684\u4ecb\u7ecd\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/#urdf","title":"URDF\u7684\u57fa\u672c\u8bed\u6cd5","text":"<p>XML\u662f\u88ab\u8bbe\u8ba1\u7528\u6765\u4f20\u8f93\u548c\u5b58\u50a8\u6570\u636e\u7684\u53ef\u6269\u5c55\u6807\u8bb0\u8bed\u8a00\uff0c\u6ce8\u610f\u8bed\u8a00\u672c\u8eab\u662f\u6ca1\u6709\u542b\u4e49\u7684\uff0c\u53ea\u662f\u89c4\u5b9a\u4e86\u5176\u6570\u636e\u683c\u5f0f\u3002\u4e0eHTML\u7c7b\u4f3c\uff0cXML\u4e5f\u662f\u901a\u8fc7\u95ed\u5408\u7684\u5c16\u62ec\u53f7\u7ec4\u6210\uff0c\u4f46\u662f\u8bed\u6cd5\u4e0a\u6bd4HTML\u8bed\u8a00\u4e25\u8c28\uff0c\u4e0b\u9762\u770b\u4e00\u4e2a\u4f8b\u5b50\u3002 <pre><code>&lt;robot name=\"myrobot\"&gt;\n    &lt;link name=\"arm\"&gt;&lt;/link&gt;\n    &lt;joint name=\"body\"&gt;&lt;/joint&gt;\n    &lt;link name=\"leg\"&gt;&lt;/link&gt;\n&lt;/robot&gt;\n</code></pre> \u7c7b\u4f3c\u4e0a\u9762\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u673a\u5668\u4eba\u6a21\u578b\u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/#urdf_1","title":"URDF\u6587\u4ef6\u7ec4\u6210","text":"<p>\u4e00\u822c\u60c5\u51b5\u4e0b\uff0cURDF\u7531\u58f0\u660e\u4fe1\u606f\u548c\u4e24\u79cd\u5173\u952e\u7ec4\u4ef6(joint\u548clink)\u5171\u540c\u7ec4\u6210\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/#_1","title":"\u58f0\u660e\u4fe1\u606f","text":"<p>\u9996\u5148\u662fxml\u6587\u4ef6\u7684\u58f0\u660e\u4fe1\u606f\uff0c\u8fd9\u4e5f\u662f\u6240\u6709xml\u6587\u4ef6\u5fc5\u987b\u7684\uff0c\u5199\u5728\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u3002 <pre><code>&lt;?xml version=\"1.0\"?&gt;\n</code></pre> \u63a5\u4e0b\u6765\u662f\u673a\u5668\u4eba\u7684\u58f0\u660e\u901a\u8fc7\u4e00\u4e2arobot\u6807\u7b7e\u8fdb\u884c\u58f0\u660e\uff0c\u6807\u7b7e\u4e2d\u52a0\u5165name\u5c5e\u6027\u3002 <pre><code>&lt;robot name=\"myrobot\"&gt;\n     &lt;link&gt;&lt;/link&gt;\n     &lt;joint&gt;&lt;/joint&gt;\n&lt;/robot&gt;\n</code></pre></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/#jointlink","title":"\u4e24\u79cd\u5173\u952e\u7ec4\u4ef6(Joint&amp;Link)","text":"<p>\u4e00\u822c\u6765\u8bf4\u673a\u5668\u4eba\u7531\u591a\u79cd\u7ec4\u4ef6\u7ec4\u6210\uff0c\u4f8b\u5982\u4e00\u4e2a\u65e0\u4eba\u8f66\u6027\u673a\u5668\u4eba\uff0c\u7531\u5e95\u76d8\u3001\u8f6e\u5b50\u3001\u96f7\u8fbe\u7b49\u90e8\u4ef6\uff0c\u8fd9\u4e9b\u7ec4\u4ef6\u5c31\u662flink\u3002\u8fd9\u4e9b\u7ec4\u4ef6\u4e0e\u7ec4\u4ef6\u8fdb\u884c\u8fde\u63a5\u7684\u90e8\u5206\u79f0\u4e3ajoint\u3002\u901a\u8fc7\u7ed9link\u548cjoint\u6807\u7b7e\u4e2d\u7684name\u5c5e\u6027\u6765\u533a\u522b\u3002\u4e0b\u9762\u6765\u5199\u4e00\u4e2a\u6700\u57fa\u7840\u7684base_link\u6807\u7b7e\u3002 <pre><code>&lt;!-- base link --&gt;\n  &lt;link name=\"base_link\"&gt;\n      &lt;visual&gt;\n        &lt;origin xyz=\"0 0 0.0\" rpy=\"0 0 0\"/&gt;\n        &lt;geometry&gt;\n            &lt;cylinder length=\"0.12\" radius=\"0.10\"/&gt;\n        &lt;/geometry&gt;\n    &lt;/visual&gt;\n    &lt;material name=\"white\"&gt;\n        &lt;color rgba=\"1.0 1.0 1.0 0.5\" /&gt; \n    &lt;/material&gt;\n  &lt;/link&gt;\n</code></pre></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/#link","title":"link\u6807\u7b7e","text":"<p>\u9996\u5148\u770b\u770blink\u6807\u7b7e\u7684\u7ec4\u6210\uff0c\u9996\u5148\u6700\u57fa\u7840\u7684\u662fvisual\u6807\u7b7e\uff0c\u7528\u4e8e\u663e\u793a\u5f62\u72b6\uff0c\u5176\u4e2d\u4e5f\u5305\u62ec\u4e86\u591a\u4e2a\u6807\u7b7e\uff0c\u9996\u5148geometry\u8868\u793a\u96c6\u5408\u5f62\u72b6\u3002\u53ef\u4ee5\u7531\u591a\u79cd\u5f62\u72b6\uff1a * box \u957f\u65b9\u4f53 size-\u957f\u5bbd\u9ad8 \\</p> <ul> <li>cylinder \u5706\u67f1\u4f53\uff0cradius-\u534a\u5f84\uff0clength-\u9ad8\u5ea6\uff0c\\ <li>sphere \u7403\u4f53\uff0cradius-\u534a\u5f84\uff0c\\</li> <li>mesh:\u7b2c\u4e09\u65b9\u5bfc\u51fa\u7684\u6a21\u578b\u6587\u4ef6\uff0cfilename-\u6587\u4ef6\u8def\u5f84\u3002\\</li> <p>\u53e6\u4e00\u4e2a\u5c5e\u6027\u662forigin\uff0c\u8868\u793a\u504f\u79fb\u91cf\uff0c\u9ed8\u8ba4\u662f\u5728\u7269\u4f53\u7684\u96c6\u5408\u4e2d\u5fc3\u3002 * xyz\u9ed8\u8ba4\u4e3a\u96f6\u77e2\u91cf  * rpy\u5f27\u5ea6\u8868\u793a\u7684\u7ffb\u6eda\u3001\u4fef\u4ef0\u3001\u504f\u822a</p> <p>material\u8868\u793a\u6750\u8d28\uff0c\u901a\u5e38\u7528\u5b83\u7684\u989c\u8272\u5c5e\u6027\u3002color\u4e2drgba\u5c5e\u6027\uff0crgb\u8868\u793a\u7ea2\u7eff\u84dd\uff0ca\u8868\u793a\u900f\u660e\u5ea6\uff0c\u519b\u4e8b0-1\u4e4b\u95f4\u7684\u6570\u5b57\u3002</p> <p>\u5269\u4f59\u8fd8\u6709collision\u78b0\u649e\u5c5e\u6027\u53c2\u6570\uff0cinterial\u60ef\u6027\u53c2\u6570\u5728\u4eff\u771f\u4e2d\u4f1a\u7528\u5230\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/#joint","title":"joint\u6807\u7b7e","text":"<p>joint\u79f0\u4e3a\u673a\u5668\u4eba\u7684\u5173\u8282\uff0c\u7528\u4e8e\u8fde\u63a5\u4e24\u4e2a\u673a\u5668\u4eba\u90e8\u4ef6\uff0c\u8981\u5199\u660e\u7236\u5b50\u5173\u7cfb\uff0c\u901a\u5e38\u6709\u4e00\u4e0b\u51e0\u4e2a\u529f\u80fd\uff1a\u7236\u5b50\u4e4b\u95f4\u7684\u8fde\u63a5\u7c7b\u578b\uff0c\u5305\u62ec\u662f\u5426\u56fa\u5b9a\u7684\uff0c\u53ef\u4ee5\u65cb\u8f6c\u7684\u7b49\uff1b\u7236\u90e8\u4ef6\u540d\u5b57\uff1b\u5b50\u90e8\u4ef6\u540d\u5b57\uff1b\u7236\u5b50\u4e4b\u95f4\u76f8\u5bf9\u4f4d\u7f6e\uff1b\u7236\u5b50\u4e4b\u95f4\u7684\u65cb\u8f6c\u8f74\uff0c\u7ed5\u54ea\u4e2a\u8f74\u8f6c\u2026\u2026</p> <p></p> <p><pre><code>&lt;joint name=\"laser_joint\" type=\"fixed\"&gt;\n    &lt;parent link=\"base_link\" /&gt;\n    &lt;child link=\"laser_link\" /&gt;\n    &lt;origin xyz=\"0 0 0.075\" /&gt;\n    &lt;axis xyz=\"0 0 1\" /&gt;\n&lt;/joint&gt;\n</code></pre> \u4f8b\u5982\u4e0a\u9762\u7684\u8fd9\u4e2a\u5173\u8282\u6587\u4ef6\uff0c\u5173\u8282\u540d\u79f0\u662flaser_joint\uff0c\u96f7\u8fbe\u8fde\u63a5\u7684\u5173\u8282\uff0c\u7c7b\u578btype\u662ffixed\u56fa\u5b9a\u7684\uff0c\u7236\u7ec4\u4ef6\u662fbase_link\uff0c\u5b50\u7ec4\u4ef6\u662flaser_link\u96f7\u8fbe\u7ec4\u4ef6\uff0c\u4e24\u8005\u7684\u8fde\u63a5\u5728z\u8f74\u4e0a\u504f\u79fb0.075m\u3002\u53ef\u4ee5\u7ed5z\u8f74\u65cb\u8f6c\u3002joint\u7684type\u5c5e\u6027\u53ef\u4ee5\u6709\u591a\u79cd\u65b9\u5f0f\uff1a * revolute: \u65cb\u8f6c\u5173\u8282\uff0c\u7ed5\u5355\u8f74\u65cb\u8f6c,\u89d2\u5ea6\u6709\u4e0a\u4e0b\u9650,\u6bd4\u5982\u8235\u673a0-180 * continuous: \u65cb\u8f6c\u5173\u8282\uff0c\u53ef\u4ee5\u7ed5\u5355\u8f74\u65e0\u9650\u65cb\u8f6c,\u6bd4\u5982\u81ea\u884c\u8f66\u7684\u524d\u540e\u8f6e * fixed: \u56fa\u5b9a\u5173\u8282\uff0c\u4e0d\u5141\u8bb8\u8fd0\u52a8\u7684\u7279\u6b8a\u5173\u8282 * prismatic: \u6ed1\u52a8\u5173\u8282\uff0c\u6cbf\u67d0\u4e00\u8f74\u7ebf\u79fb\u52a8\u7684\u5173\u8282\uff0c\u6709\u4f4d\u7f6e\u6781\u9650 * planer: \u5e73\u9762\u5173\u8282\uff0c\u5141\u8bb8\u5728xyz\uff0crxryrz\u516d\u4e2a\u65b9\u5411\u8fd0\u52a8 * floating: \u6d6e\u52a8\u5173\u8282\uff0c\u5141\u8bb8\u8fdb\u884c\u5e73\u79fb\u3001\u65cb\u8f6c\u8fd0\u52a8</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/#xacrourdf","title":"xacro\u7b80\u5316URDF\u6587\u4ef6","text":"<p>\u5728\u4e0a\u9762\u7684urdf\u6587\u4ef6\u7684\u4ecb\u7ecd\u4e2d\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\uff0c\u6bd4\u5982\u5404\u7ec4\u4ef6\u7684\u6570\u636e\u90fd\u662f\u5199\u597d\u7684\uff08\u8f6e\u5b50\u534a\u5f84\u3001\u673a\u5668\u4eba\u9ad8\u5ea6\u7b49\uff09\uff0c\u5982\u679c\u8981\u4fee\u6539\u5176\u4e2d\u7684\u6570\u636e\u6bd4\u8f83\u9ebb\u70e6\uff0c\u800c\u4e14\u5982\u679c\u5176\u5b83\u6570\u636e\u7531\u8f6e\u5b50\u534a\u5f84\u8ba1\u7b97\u5f97\u51fa\uff0c\u4fee\u6539\u8f6e\u5b50\u534a\u5f84\u540e\uff0c\u8fd8\u9700\u8981\u8ba1\u7b97\u540e\u4fee\u6539\u5176\u5b83\u5173\u8054\u7684\u6570\u636e\u3002\u9488\u5bf9\u8fd9\u79cd\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528xacro\u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/#_2","title":"\u8bed\u6cd5\u4ecb\u7ecd","text":"<p>xacro \u63d0\u4f9b\u4e86\u53ef\u7f16\u7a0b\u63a5\u53e3\uff0c\u7c7b\u4f3c\u4e8e\u8ba1\u7b97\u673a\u8bed\u8a00\uff0c\u5305\u62ec\u53d8\u91cf\u58f0\u660e\u8c03\u7528\u3001\u51fd\u6570\u58f0\u660e\u4e0e\u8c03\u7528\u7b49\u8bed\u6cd5\u5b9e\u73b0\u3002\u5728\u4f7f\u7528 xacro \u751f\u6210 urdf \u65f6\uff0c\u6839\u6807\u7b7erobot\u4e2d\u5fc5\u987b\u5305\u542b\u547d\u540d\u7a7a\u95f4\u58f0\u660e:xmlns:xacro=\"http://wiki.ros.org/xacro\"\u3002 \u4e5f\u5c31\u662f\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u8981\u5199\u4e0a\uff1a <pre><code>&lt;robot name=\"myrobot\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n</code></pre> \u8f83\u4e4b\u4e8e\u7eaf\u7cb9\u7684 URDF \u5b9e\u73b0\uff0c\u53ef\u4ee5\u7f16\u5199\u66f4\u5b89\u5168\u3001\u7cbe\u7b80\u3001\u6613\u8bfb\u6027\u66f4\u5f3a\u7684\u673a\u5668\u4eba\u6a21\u578b\u6587\u4ef6\uff0c\u4e14\u53ef\u4ee5\u63d0\u9ad8\u7f16\u5199\u6548\u7387\u3002\u8981\u60f3\u5c55\u793axacro\u6587\u4ef6\uff0c\u8fd8\u9700\u8981\u5c06xacro\u6587\u4ef6\u8f6c\u4e3aurdf\u6587\u4ef6\uff0c\u4f7f\u7528xacro xxx.xacro &gt; xxx.urdf\uff0c\u8fd8\u9700\u8981\u63d0\u524d\u5b89\u88c5xacro\u901a\u8fc7sudo apt install ros-humble-xacro\uff0cros2\u7248\u672c\u662fhumble\u7684\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0a\u547d\u4ee4\u5b89\u88c5\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/#_3","title":"\u5c5e\u6027\u4e0e\u7b97\u6570\u8fd0\u7b97","text":"<p>\u7528\u4e8e\u5c01\u88c5 URDF \u4e2d\u7684\u4e00\u4e9b\u5b57\u6bb5\uff0c\u6bd4\u5982: PAI \u503c\uff0c\u5c0f\u8f66\u7684\u5c3a\u5bf8\uff0c\u8f6e\u5b50\u534a\u5f84 .... \u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u5c5e\u6027\uff1a <pre><code>&lt;xacro:property name=\"wheel_radius\" value=\"3\" /&gt;\n</code></pre> \u4e0a\u9762\u5c06\u5c0f\u8f66\u7684\u534a\u5f84\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u5c5e\u6027\uff0c\u9700\u8981\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u5728link\u4e2d\u4f7f\u7528\uff0c\u901a\u8fc7${wheel_radius}\u4f7f\u7528\u3002 <pre><code>&lt;link name=\"wheel_link\"&gt;\n    &lt;visual&gt;\n        &lt;geometry&gt;\n            &lt;cylinder radius=\"${wheel_radius}\" length=\"${wheel_radius*2}\"/&gt;\n        &lt;/geometry&gt;\n    &lt;/visual&gt;\n&lt;/link&gt;\n</code></pre> \u4e0a\u8ff0\u4f8b\u5b50\u4e2d\u83b7\u53d6\u5230\u8f6e\u5b50\u7684\u534a\u5f84\uff0c\u7136\u540e\uff0c\u8fd8\u53ef\u4ee5\u8fdb\u884c\u7b97\u6570\u7684\u8fd0\u7b97\uff0c\u53ef\u4ee5\u8fdb\u884c\u52a0\u51cf\u4e58\u9664\u7684\u8fd0\u7b97\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/#_4","title":"\u5b8f\u5b9a\u4e49\u4e0e\u8c03\u7528","text":"<p><pre><code>&lt;xacro:macro name=\"\u5b8f\u540d\u79f0\" params=\"\u53c2\u6570\u5217\u8868(\u591a\u53c2\u6570\u4e4b\u95f4\u4f7f\u7528\u7a7a\u683c\u5206\u9694)\"&gt;\n    .....\n    \u53c2\u6570\u8c03\u7528\u683c\u5f0f: ${\u53c2\u6570\u540d}\n&lt;/xacro:macro&gt;\n&lt;!-- \u8c03\u7528\u683c\u5f0f --&gt;\nxacro:\u5b8f\u540d\u79f0 \u53c2\u65701=xxx \u53c2\u65702=xxx/&gt;\n</code></pre> \u7c7b\u4f3c\u4e8e\u51fd\u6570\u5b9e\u73b0\uff0c\u63d0\u9ad8\u4ee3\u7801\u590d\u7528\u7387\uff0c\u4f18\u5316\u4ee3\u7801\u7ed3\u6784\uff0c\u63d0\u9ad8\u5b89\u5168\u6027\uff0c\u4f8b\u5982\u5c0f\u8f66\u7684\u5de6\u8f6e\u548c\u53f3\u8f6e\u5927\u90e8\u5206\u5c5e\u6027\u90fd\u662f\u76f8\u540c\u7684\uff0c\u53ea\u6709\u504f\u79fb\u4e0d\u540c\uff0c\u53ef\u4ee5\u628a\u504f\u79fb\u503c\u653e\u5728\u53c2\u6570\u4e2d\uff0c\u7136\u540e\u505a\u4e00\u4e2a\u8f6e\u5b50\u7684\u5b8f\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u4ee3\u7801\u590d\u7528\u3002 <pre><code>&lt;xacro:macro name=\"wheel_func\" params=\"wheel_name flag\"&gt;\n    &lt;link name=\"${wheel_name}_wheel\"&gt;\n        &lt;visual&gt;\n            &lt;geometry&gt;\n                &lt;cylinder radius=\"0.0325\" length=\"0.015\"/&gt;\n            &lt;/geometry&gt;\n            &lt;origin xyz=\"0.0 0.0 0.0\" rpy=\"${PI/2} 0.0 0.0\" /&gt;\n            &lt;material name=\"wheel_color\"&gt;\n                &lt;color rgba=\"0 0 0 0.5\"/&gt;\n            &lt;/material&gt;\n        &lt;/visual&gt;\n    &lt;/link&gt;\n    &lt;joint name=\"${wheel_name}2link\" type=\"continuous\"&gt;\n        &lt;parent link=\"base_link\"/&gt;\n        &lt;child link=\"${wheel_name}_wheel\"/&gt;\n        &lt;!-- \u504f\u79fb\u91cf  x\u65b9\u5411\u65e0\u504f\u79fb y\u504f\u79fb\u8f66\u4f53\u534a\u5f84\u957f z\u8f74\uff1a\u8f66\u9ad8/2+\u79bb\u5730\u95f4\u8ddd-\u8f66\u8f6e\u534a\u5f84--&gt;\n        &lt;origin xyz=\"0 ${0.1*flag} ${wheel_joint_z}\" rpy=\"0.0 0.0 0.0\"/&gt;\n        &lt;axis xyz=\"0 1 0\"/&gt;\n    &lt;/joint&gt;\n    &lt;/xacro:macro&gt;\n&lt;!-- \u5de6\u53f3\u8f6e\u5b50\u7684\u5b9a\u4e49 --&gt;\n    &lt;xacro:wheel_func wheel_name=\"left\" flag=\"1\"/&gt;\n    &lt;xacro:wheel_func wheel_name=\"right\" flag=\"-1\"/&gt;\n</code></pre> \u4ee5\u4e0a\u7684\u793a\u4f8b\u5c31\u662f\u4e24\u4e2a\u8f6e\u5b50\u7684\u4ee3\u7801\u793a\u4f8b\uff0c\u901a\u8fc7\u5b8f\u5b9a\u4e49\u5b9e\u73b0\u4e86\u4ee3\u7801\u7684\u590d\u7528\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-URDF%E5%BB%BA%E6%A8%A1/#_5","title":"\u6587\u4ef6\u5305\u542b","text":"<p>\u5f53\u6240\u505a\u7684\u5de5\u7a0b\u9879\u76ee\u8f83\u5927\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5c06\u673a\u5668\u4eba\u4e0d\u540c\u90e8\u4ef6\u53ef\u80fd\u5c01\u88c5\u4e3a\u5355\u72ec\u7684 xacro \u6587\u4ef6\uff0c\u6700\u540e\u518d\u5c06\u4e0d\u540c\u7684\u6587\u4ef6\u96c6\u6210\uff0c\u7ec4\u5408\u4e3a\u5b8c\u6574\u673a\u5668\u4eba\uff0c\u53ef\u4ee5\u4f7f\u7528\u6587\u4ef6\u5305\u542b\u5b9e\u73b0\u3002 <pre><code>&lt;robot name=\"xxx\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n      &lt;xacro:include filename=\"my_base.xacro\" /&gt;\n      &lt;xacro:include filename=\"my_camera.xacro\" /&gt;\n      &lt;xacro:include filename=\"my_laser.xacro\" /&gt;\n&lt;/robot&gt;\n</code></pre></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-rviz2%E6%98%BE%E7%A4%BA%E6%A8%A1%E5%9E%8B/","title":"rviz2\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b","text":"<p>URDF \u4e0d\u80fd\u5355\u72ec\u4f7f\u7528\uff0c\u9700\u8981\u7ed3\u5408 Rviz \u6216 Gazebo\uff0cURDF \u53ea\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u9700\u8981\u5728 Rviz \u6216 Gazebo \u4e2d\u6e32\u67d3\u6210\u56fe\u5f62\u5316\u7684\u673a\u5668\u4eba\u6a21\u578b\uff0c\u5f53\u524d\uff0c\u9996\u5148\u6f14\u793aURDF\u4e0eRviz\u7684\u96c6\u6210\u4f7f\u7528\uff0c\u56e0\u4e3aURDF\u4e0eRviz\u7684\u96c6\u6210\u8f83\u4e4b\u4e8eURDF\u4e0eGazebo\u7684\u96c6\u6210\u66f4\u4e3a\u7b80\u5355\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-rviz2%E6%98%BE%E7%A4%BA%E6%A8%A1%E5%9E%8B/#_1","title":"\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4\u548c\u529f\u80fd\u5305","text":"<p>\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u540d\u4e3arviz_demo\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7136\u540e\u521b\u5efa\u4e00\u4e2asrc\u76ee\u5f55\u3002\u5728src\u4e2d\u5b58\u653e\u529f\u80fd\u5305\u3002 <pre><code>mkdir -p rviz_demo/src\n</code></pre> \u521b\u5efa\u529f\u80fd\u5305myrobot(\u4ee5c++\u4e3a\u4f8b) <pre><code>cd rviz_demo/src\nros2 pkg create myrobot --build-type ament_camke\n</code></pre> \u8fdb\u5165myrobot\u76ee\u5f55\u4e2d\uff0c\u5728\u5176\u4e2d\u521b\u5efaurdf\u3001launch\u76ee\u5f55\uff0c\u5206\u522b\u5b58\u653eurdf\u6587\u4ef6\u548c\u542f\u52a8\u6587\u4ef6\uff0c\u5e76\u5728\u5176\u4e2d\u5206\u522b\u521b\u5efademo01_base.urdf\u548cdemo01_launch.py\u6587\u4ef6\uff0c\u5b8c\u6210\u4e4b\u540e\uff0c\u603b\u4f53\u7684\u6587\u4ef6\u76ee\u5f55\u5982\u4e0b <pre><code>\u251c\u2500\u2500 include\n\u251c\u2500\u2500 launch\n\u2502   \u251c\u2500\u2500 demo01_launch.py\n\u251c\u2500\u2500 src\n\u2514\u2500\u2500 urdf\n    \u251c\u2500\u2500 demo01_base.urdf\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 package.xml\n</code></pre> \u8fd9\u6837\u4e4b\u540e\uff0c\u8fd4\u56de\u5de5\u4f5c\u7a7a\u95f4\u8fdb\u884c\u7f16\u8bd1\u4e00\u4e0b\uff0c\u67e5\u770b\u6709\u65e0\u9519\u8bef\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-rviz2%E6%98%BE%E7%A4%BA%E6%A8%A1%E5%9E%8B/#urdf","title":"URDF\u6587\u4ef6","text":"<p>\u8fd9\u91cc\u6211\u4eec\u5c31\u4f7f\u7528\u4e4b\u524d\u4e00\u4e2a\u7b80\u5355\u7684URDF\u6587\u4ef6\u4f5c\u4e3a\u6f14\u793a <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;robot name=\"myrobot\"&gt;\n  &lt;!-- base link --&gt;\n  &lt;link name=\"base_link\"&gt;\n      &lt;visual&gt;\n      &lt;origin xyz=\"0 0 0.0\" rpy=\"0 0 0\"/&gt;\n      &lt;geometry&gt;\n        &lt;cylinder length=\"0.12\" radius=\"0.10\"/&gt;\n      &lt;/geometry&gt;\n    &lt;/visual&gt;\n  &lt;/link&gt;\n\n  &lt;!-- laser link --&gt;\n  &lt;link name=\"laser_link\"&gt;\n      &lt;visual&gt;\n      &lt;origin xyz=\"0 0 0\" rpy=\"0 0 0\"/&gt;\n      &lt;geometry&gt;\n        &lt;cylinder length=\"0.02\" radius=\"0.02\"/&gt;\n      &lt;/geometry&gt;\n      &lt;material name=\"black\"&gt;\n          &lt;color rgba=\"0.0 0.0 0.0 0.8\" /&gt; \n      &lt;/material&gt;\n    &lt;/visual&gt;\n  &lt;/link&gt;\n  &lt;!-- laser joint --&gt;\n    &lt;joint name=\"laser_joint\" type=\"fixed\"&gt;\n        &lt;parent link=\"base_link\" /&gt;\n        &lt;child link=\"laser_link\" /&gt;\n        &lt;origin xyz=\"0 0 0.075\" /&gt;\n    &lt;/joint&gt;\n&lt;/robot&gt;\n</code></pre> \u5c31\u7b80\u5355\u7684\u4e24\u4e2a\u7ec4\u4ef6\u548c\u4e00\u4e2a\u5173\u8282\uff0c\u7136\u540e\u4fee\u6539\u4e00\u4e0bCMakeListx.txt\u6587\u4ef6\uff0c\u4e3b\u8981\u662f\u5c06Launch\u6587\u4ef6\u548cURDF\u6587\u4ef6\u5305\u542b\u5728\u8fdb\u53bb\u3002 <pre><code>install(\n  DIRECTORY  launch urdf\n  DESTINATION share/${PROJECT_NAME}\n)\n</code></pre></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-rviz2%E6%98%BE%E7%A4%BA%E6%A8%A1%E5%9E%8B/#launch","title":"Launch\u6587\u4ef6","text":"<p>\u60f3\u8981\u53ef\u89c6\u5316\u6a21\u578b\u9700\u8981\u4e09\u4e2a\u8282\u70b9\u53c2\u4e0e\uff1a * joint_state_publisher_gui \u8d1f\u8d23\u53d1\u5e03\u673a\u5668\u4eba\u5173\u8282\u6570\u636e\u4fe1\u606f\uff0c\u901a\u8fc7joint_states\u8bdd\u9898\u53d1\u5e03 * robot_state_publisher_node\u8d1f\u8d23\u53d1\u5e03\u673a\u5668\u4eba\u6a21\u578b\u4fe1\u606frobot_description\uff0c\u5e76\u5c06joint_states\u6570\u636e\u8f6c\u6362tf\u4fe1\u606f\u53d1\u5e03 * rviz2_node\u8d1f\u8d23\u663e\u793a\u673a\u5668\u4eba\u7684\u4fe1\u606f</p> <p>\u8fd9\u4e09\u4e2a\u8282\u70b9\u7684\u5173\u7cfb\u53ef\u4ee5\u5982\u4e0b\u56fe\u6240\u793a\uff1a </p> <p>\u8fd9\u91cc\u6211\u4eec\u7528\u5230\u4e86joint_state_publisher_gui\u548crobot_state_publisher\u4e24\u4e2a\u5305\uff0c\u5982\u679c\u4f60\u7684\u7cfb\u7edf\u6ca1\u6709\u5b89\u88c5\u8fd9\u4e24\u4e2a\u5305\uff0c\u53ef\u4ee5\u624b\u52a8\u5b89\u88c5: <pre><code>sudo apt install ros-humble-joint-state-publisher-gui ros-humble-robot-state-publisher\n</code></pre> joint_state_publisher_gui\uff0c\u8fd8\u6709\u4e00\u4e2a\u5144\u5f1f\u53eb\u505ajoint_state_publisher\u4e24\u8005\u533a\u522b\u5728\u4e8ejoint_state_publisher_gui\u8fd0\u884c\u8d77\u6765\u4f1a\u8df3\u51fa\u4e00\u4e2a\u754c\u9762\uff0c\u901a\u8fc7\u754c\u9762\u53ef\u4ee5\u64cd\u4f5cURDF\u4e2d\u80fd\u52a8\u7684\u5173\u8282\u3002 \u5982\u4e0b\u56fe\u6240\u793a\u7684\u4e00\u4e2a\u754c\u9762 </p> <p>\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6211\u4eec\u6ca1\u6709\u7ed9\u5173\u8282\u8bbe\u7f6e\u80fd\u52a8\uff0c\u6240\u4ee5\u5e76\u6ca1\u6709\u6570\u636e\u3002\u9996\u5148\u5206\u522b\u770b\u4e09\u4e2a\u8282\u70b9\u5982\u4f55\u542f\u52a8\u914d\u7f6e\u7684\u3002 \u7b2c\u4e00\u4e2arobot_state_publisher <pre><code>robot_description = ParameterValue(\n    Command(['xacro ', urdf_model_path]),\n    value_type=str)\nrobot_state_publisher_node = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        parameters=[{'robot_description': robot_description}]\n        )\n</code></pre> \u5728\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u4e3b\u8981\u6ce8\u610frobot_description\u8fd9\u4e2a\u53c2\u6570\u7684\u8bbe\u7f6e\uff0c\u5176\u5b9e\u53ef\u4ee5\u4e0d\u5199parameters\u8fd9\u4e00\u9879\uff0c\u76f4\u63a5\u5199</p> <p>arguments=[urdf_model_path],</p> <p>\u8fd9\u6837\u5199\u4f1a\u62a5\u4e00\u4e2a\u8b66\u544a\uff1a</p> <p>No robot_description parameter, but command-line argument available. Assuming argument is name of URDF file.This backwards compatibility fallback will be removed in the future.</p> <p>\u5927\u81f4\u610f\u601d\u5c31\u662f\u8bf4\u901a\u8fc7arguents\u4f20\u5165urdf\u6587\u4ef6\u5c06\u4f1a\u5728\u672a\u6765\u7248\u672c\u4e2d\u88ab\u79fb\u9664\uff0c\u5efa\u8bae\u52a0\u4e0arobot_description\u53c2\u6570\u3002</p> <p>\u4e0b\u9762\u770b\u7b2c\u4e8c\u4e2a\u8282\u70b9\uff1ajoint_state_publisher_gui <pre><code>joint_state_publisher_node = Node(\n        package='joint_state_publisher_gui',\n        executable='joint_state_publisher_gui',\n        name='joint_state_publisher_gui',\n        arguments=[urdf_model_path]\n        )\n</code></pre> \u8fd9\u91cc\u5c31\u9700\u8981\u8ddf\u4e0a\u6211\u4eecurdf\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u5f53\u7136\u5982\u679c\u4e0d\u60f3\u8981\u663e\u793a\u754c\u9762\u8fd8\u53ef\u4ee5\u542f\u52a8joint_state_publisher\u8282\u70b9\uff0c\u628a\u6700\u540e\u7684_gui\u53bb\u6389\u5c31\u884c\u4e86\u3002</p> <p>\u6700\u540e\u6211\u4eec\u9700\u8981\u542f\u52a8\u6700\u540e\u7684\u4e00\u4e2a\u8282\u70b9rviz\u8282\u70b9 <pre><code> rviz2_node = Node(\n        package='rviz2',\n        executable='rviz2',\n        name='rviz2',\n        output='screen',\n        arguments=['-d', LaunchConfiguration('rvizconfig')],\n        )\n</code></pre> \u8fd9\u91cc\u6211\u4eec\u5c31\u53ea\u9700\u8981\u6ce8\u610f\u6700\u540e\u52a0\u4e0a\u4e86\u4e00\u4e2a\u53c2\u6570\uff0c\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u5728\u76ee\u5f55\u4e0b\u52a0\u4e0a\u4e00\u4e2arviz\u76ee\u5f55\uff0c\u91cc\u9762\u5b58\u653e\u4e00\u4e2aurdf.rviz\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u4fdd\u5b58rviz\u7684\u521d\u59cb\u914d\u7f6e\u3002\u56e0\u4e3a\u6700\u5f00\u59cb\u6253\u5f00rviz\u754c\u9762\u7684\u8bdd\uff0c\u662f\u770b\u4e0d\u5230\u673a\u5668\u4eba\u7684\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a </p> <p>\u7136\u540e\u6211\u4eec\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u4e00\u4e9b\u7ec4\u4ef6\u624d\u80fd\u5c06\u6211\u4eec\u7684\u673a\u5668\u4eba\u663e\u793a\u51fa\u6765\uff1a  \u4f8b\u5982\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u6dfb\u52a0TF\u548cRobotModel\u7ec4\u4ef6\uff0c\u7136\u540e\u9009\u7ec4\u5750\u6807\u7cfb\uff0c\u624d\u80fd\u5c06\u6700\u7ec8\u7684\u673a\u5668\u4eba\u8fdb\u884c\u663e\u793a\u3002\u663e\u793a\u540e\u6211\u4eec\u53ef\u4ee5\u5c06\u914d\u7f6e\u8fdb\u884c\u4fdd\u5b58\uff0c\u4fdd\u5b58\u540e\u7684\u6587\u4ef6\u653e\u5728\u5f53\u524d\u76ee\u5f55\u7684rviz\u6587\u4ef6\u5939\u4e0b\uff0c\u901a\u8fc7launch\u6587\u4ef6\u7684\u914d\u7f6e\uff0c\u53ef\u4ee5\u521d\u59cb\u5316\u6211\u4eec\u7684rviz\u56fe\u5f62\u754c\u9762\u7684\u914d\u7f6e\u3002</p> <p>\u5b8c\u6574\u7684launch\u4ee3\u7801\u5982\u4e0b\u3002 <pre><code>import os\nfrom launch import LaunchDescription\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import Command\nfrom launch_ros.parameter_descriptions import ParameterValue\n\ndef generate_launch_description():\n    package_name = 'myrobot'\n    urdf_name = \"demo01_base.urdf\"\n\n    ld = LaunchDescription()\n    pkg_share = FindPackageShare(package=package_name).find(package_name) \n    urdf_model_path = os.path.join(pkg_share, f'urdf/{urdf_name}')\n\n\n    default_rviz_config_path = os.path.join(pkg_share ,'rviz/urdf.rviz')\n\n    robot_description = ParameterValue(Command(['xacro ', urdf_model_path]),\n                                       value_type=str)\n\n    rviz_arg = DeclareLaunchArgument(name='rvizconfig', default_value=str(default_rviz_config_path),\n                                     description='Absolute path to rviz config file')\n\n    robot_state_publisher_node = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        parameters=[{'robot_description': robot_description}]\n        )\n\n    joint_state_publisher_node = Node(\n        package='joint_state_publisher_gui',\n        executable='joint_state_publisher_gui',\n        name='joint_state_publisher_gui',\n        arguments=[urdf_model_path]\n        )\n    rviz2_node = Node(\n        package='rviz2',\n        executable='rviz2',\n        name='rviz2',\n        output='screen',\n        arguments=['-d', LaunchConfiguration('rvizconfig')],\n        )\n    ld.add_action(rviz_arg)\n    ld.add_action(joint_state_publisher_node)\n    ld.add_action(robot_state_publisher_node)\n    ld.add_action(rviz2_node)\n    return ld\n</code></pre></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2-rviz2%E6%98%BE%E7%A4%BA%E6%A8%A1%E5%9E%8B/#_2","title":"\u6d4b\u8bd5\u8fd0\u884c","text":"<p>\u4f7f\u7528\u547d\u4ee4\u7f16\u8bd1\u8fd0\u884c\u6587\u4ef6 <pre><code>colcon build\n. install/setup.bash\nros2 launch myrobot demo01_launch.py\n</code></pre> \u6700\u540e\u7684\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\u56fe\u6240\u793a </p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/tf2%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2%E5%B7%A5%E5%85%B7/","title":"\u5750\u6807\u53d8\u5316\u5de5\u5177","text":"<p>\u5728ROS2\u4e2d\u7684TF2\u6846\u67b6\u4e2d\u9664\u4e86\u5c01\u88c5\u5750\u6807\u5e7f\u64ad\u4e0e\u8ba2\u9605\u529f\u80fd\u4e4b\u5916\uff0c\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u63d0\u9ad8\u5f00\u53d1\u3001\u8c03\u8bd5\u6548\u7387\u3002\u672c\u8282\u4e3b\u8981\u4ecb\u7ecd\u8fd9\u4e9b\u5de5\u5177\u7684\u4f7f\u7528\uff0c\u8fd9\u4e9b\u5de5\u5177\u4e3b\u8981\u6d89\u53ca\u4e24\u4e2a\u529f\u80fd\u5305\uff1atf2_ros\u548ctf2_tools</p> <p>tf2_ros\u5305\u4e2d\u63d0\u4f9b\u7684\u5e38\u7528\u8282\u70b9\u5982\u4e0b\uff1a * static_transform_publisher\uff1a\u8be5\u8282\u70b9\u7528\u4e8e\u5e7f\u64ad\u9759\u6001\u5750\u6807\u53d8\u6362\uff1b * tf2_monitor\uff1a\u8be5\u8282\u70b9\u7528\u4e8e\u6253\u5370\u6240\u6709\u6216\u7279\u5b9a\u5750\u6807\u7cfb\u7684\u53d1\u5e03\u9891\u7387\u4e0e\u7f51\u7edc\u5ef6\u8fdf\uff1b * tf2_echo\uff1a\u8be5\u8282\u70b9\u7528\u4e8e\u6253\u5370\u7279\u5b9a\u5750\u6807\u7cfb\u7684\u5e73\u79fb\u65cb\u8f6c\u5173\u7cfb\u3002</p> <p>tf2_tools\u5305\u4e2d\u63d0\u4f9b\u7684\u8282\u70b9\u5982\u4e0b\uff1a * view_frames\uff1a\u8be5\u8282\u70b9\u53ef\u4ee5\u751f\u6210\u663e\u793a\u5750\u6807\u5173\u7cfb\u7684pdf\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5305\u542b\u6811\u5f62\u7ed3\u6784\u7684\u5750\u6807\u7cfb\u56fe\u8c31\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/tf2%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2%E5%B7%A5%E5%85%B7/#1static_transform_publisher","title":"1\u3001static_transform_publisher","text":"<p>\u8fd9\u4e2a\u547d\u4ee4\u7528\u4e8e\u53d1\u5e03\u9759\u6001\u5750\u6807\u5173\u7cfb\uff0c\u7ec8\u7aef\u6267\u884c\u547d\u4ee4\u5982\u4e0b\uff1a <pre><code>ros2 run tf2_ros static_transform_publisher --frame-id base_link --child-frame-id laser --x 0.4 --z 0.2\n</code></pre> \u4ee5\u4e0a\u7684\u547d\u4ee4\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u662f\u53d1\u5e03\u4e00\u4e2a\u9759\u6001\u7684\u5750\u6807\u53d8\u6362\uff0c\u7236\u5750\u6807\u662fbase_link\uff0c\u5b50\u5750\u6807\u662flaser\uff0c\u4e24\u4e2a\u5750\u6807\u7cfb\u7684\u76f8\u5bf9\u504f\u79fb\u91cf\u662f\u540e\u9762\u7684\u503c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/tf2%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2%E5%B7%A5%E5%85%B7/#2tf2_monitor","title":"2\u3001tf2_monitor","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/tf2%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2%E5%B7%A5%E5%85%B7/#21","title":"2.1\u3001\u6253\u5370\u6240\u6709\u5750\u6807\u7cfb\u7684\u53d1\u5e03\u9891\u7387\u4e0e\u7f51\u7edc\u5ef6\u8fdf","text":"<p>\u7ec8\u7aef\u6267\u884c\u547d\u4ee4: <pre><code>ros2 run tf2_ros tf2_monitor\n</code></pre> \u8fd9\u6761\u547d\u4ee4\u7684\u8fd0\u884c\u7ed3\u679c\u5927\u81f4\u5982\u4e0b\uff1a </p> <p>\u4e5f\u53ef\u4ee5\u76d1\u542c\u7279\u5b9a\u5750\u6807\u7cfb\u7684\u5173\u7cfb\uff1a\u4e0b\u9762\u662f\u76d1\u542cturtle1\u548cworld\u4e24\u4e2a\u5750\u6807\u7cfb\u4e4b\u95f4\u7684\u5173\u7cfb\u3002 </p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/tf2%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2%E5%B7%A5%E5%85%B7/#3tf2_echo","title":"3\u3001tf2_echo","text":"<p>\u6253\u5370\u4e24\u4e2a\u5750\u6807\u7cfb\u7684\u5e73\u79fb\u65cb\u8f6c\u5173\u7cfb\u3002 \u7ec8\u7aef\u6267\u884c\u547d\u4ee4\uff1a <pre><code>ros2 run tf2_ros tf2_echo world turtle1\n</code></pre> \u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\u56fe\u6240\u793a\uff1a </p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/tf2%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2%E5%B7%A5%E5%85%B7/#3view_frames","title":"3\u3001view_frames","text":"<p>\u4ee5\u56fe\u5f62\u5316\u7684\u65b9\u5f0f\u663e\u793a\u5750\u6807\u7cfb\u5173\u7cfb\uff0c\u7ec8\u7aef\u6267\u884c\u547d\u4ee4 <pre><code>ros2 run tf2_tools view_frames\n</code></pre> \u8fd0\u884c\u7ed3\u679c\uff1a\u5c06\u4f1a\u751f\u6210frames_xxx.gv\u548cframes_xxx.pdf\u6587\u4ef6\uff0c\u5176\u4e2dxxx\u4e3a\u65f6\u95f4\u6233\u3002\u76f4\u63a5\u6253\u5f00pdf\u6587\u4ef6\u53ef\u4ee5\u770b\u5230\u7c7b\u4f3c\u4e0b\u56fe\u7684\u5750\u6807\u6811\u3002 </p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/11-cyber-rt-jian-jie/","title":"11 cyber rt jian jie","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/11-cyber-rt-jian-jie/#11-cyber-rt","title":"1.1 Cyber RT \u7b80\u4ecb","text":"<p>Apollo\u9879\u76ee\u4e8e2017\u5e747\u6708\u9996\u6b21\u63a8\u51fa\uff0c\u6807\u5fd7\u7740\u6c7d\u8f66\u884c\u4e1a\u6f14\u8fdb\u7684\u4e00\u4e2a\u5de8\u5927\u98de\u8dc3\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u4ee5Apollo\u6280\u672f\u5e73\u53f0\u4e3a\u57fa\u7840\uff0c\u4f7f\u7528\u4e00\u7cfb\u5217\u5e7f\u6cdb\u7684\u5de5\u5177\u548c\u8f6f\u4ef6\u6a21\u5757\u6765\u521b\u65b0\u548c\u6784\u5efa\u81ea\u5df1\u7684\u81ea\u52a8\u9a7e\u9a76\u89e3\u51b3\u65b9\u6848\u3002Apollo Cyber RT\u662f\u4e16\u754c\u4e0a\u7b2c\u4e00\u4e2a\u4e13\u4e3a\u81ea\u52a8\u9a7e\u9a76\u5b9a\u5236\u7684\u9ad8\u6027\u80fd\u5f00\u6e90\u6846\u67b6\uff0c\u5b83\u4e8e2019\u5e74\u4e0eApollo 3.5\u5f00\u653e\u5e73\u53f0\u540c\u671f\u53d1\u5e03 \u3002</p> <p>Apollo Cyber\u200b\u200b RT \u662f\u4e00\u4e2a\u5f00\u6e90\u3001\u9ad8\u6027\u80fd\u7684\u8fd0\u884c\u65f6\u6846\u67b6\uff0c\u4e13\u4e3a\u81ea\u52a8\u9a7e\u9a76\u573a\u666f\u800c\u8bbe\u8ba1\u3002\u9488\u5bf9\u81ea\u52a8\u9a7e\u9a76\u7684\u9ad8\u5e76\u53d1\u3001\u4f4e\u5ef6\u8fdf\u3001\u9ad8\u541e\u5410\u91cf\u8fdb\u884c\u4e86\u5927\u5e45\u4f18\u5316\u3002</p> <p>\u4f7f\u7528 Apollo Cyber\u200b\u200b RT \u7684\u4e3b\u8981\u4f18\u52bf\u5982\u4e0b\uff1a</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/11-cyber-rt-jian-jie/#\u52a0\u901f\u5f00\u53d1","title":"\u52a0\u901f\u5f00\u53d1","text":"<ul> <li>\u5177\u6709\u6570\u636e\u878d\u5408\u529f\u80fd\u7684\u5b9a\u4e49\u660e\u786e\u7684\u4efb\u52a1\u63a5\u53e3\uff1b</li> <li>\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u5f00\u53d1\u5de5\u5177\uff0c</li> <li>\u63d0\u4f9b\u4e86\u5927\u91cf\u4f20\u611f\u5668\u9a71\u52a8\u7a0b\u5e8f\u3002</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/11-cyber-rt-jian-jie/#\u7b80\u5316\u90e8\u7f72","title":"\u7b80\u5316\u90e8\u7f72","text":"<ul> <li>\u5177\u6709\u9ad8\u6548\u81ea\u9002\u5e94\u7684\u6d88\u606f\u901a\u4fe1\u673a\u5236\uff1b</li> <li>\u5177\u6709\u8d44\u6e90\u610f\u8bc6\u7684\u53ef\u914d\u7f6e\u7528\u6237\u7ea7\u8c03\u5ea6\u7a0b\u5e8f\uff1b</li> <li>\u53ef\u79fb\u690d\uff0c\u4f9d\u8d56\u66f4\u5c11\u3002</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/11-cyber-rt-jian-jie/#\u4e3a\u81ea\u52a8\u9a7e\u9a76\u8d4b\u80fd","title":"\u4e3a\u81ea\u52a8\u9a7e\u9a76\u8d4b\u80fd","text":"<ul> <li>\u9ed8\u8ba4\u7684\u5f00\u6e90\u8fd0\u884c\u65f6\u6846\u67b6\uff1b</li> <li>\u4e3a\u81ea\u52a8\u9a7e\u9a76\u642d\u5efa\u4e13\u7528\u6a21\u5757\u3002</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/","title":"12 cyber rt an zhuang","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/#12-cyber-rt","title":"1.2 Cyber RT \u5b89\u88c5","text":"<p>\u672c\u8282\u4e3b\u8981\u4ecb\u7ecd Cyber RT \u7684\u5b89\u88c5\u3002\u9700\u8981\u6ce8\u610f\u7684\u662fApollo Cyber RT\u7684\u5b89\u88c5\u5df2\u7ecf\u76f8\u5f53\u7a0b\u5ea6\u4e0a\u505a\u4e86\u7cbe\u7b80\u4f18\u5316\uff0c\u4f46\u4ecd\u7a0d\u663e\u7e41\u7410\u4e14\u8017\u65f6\uff0c\u8bf7\u8010\u5fc3\u6309\u7167\u6587\u6863\u6267\u884c\u5b89\u88c5\u6d41\u7a0b\u3002</p> <p>\u5b89\u88c5\u6210\u529f\u540e\uff0c\u6d4b\u8bd5\u7ed3\u679c\u8bf7\u53c2\u8003\u5f15\u8a00\u90e8\u5206\u7684\u6848\u4f8b1\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/","title":"13 cyber rt kuai su ti yan","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/#14-cyber-rt","title":"1.4 Cyber RT \u5feb\u901f\u4f53\u9a8c","text":"<p>\u5728 Apollo \u4e2d\u5305\u542b\u4e86 C++ \u548c Python \u4e24\u5957 API\uff0c\u591a\u6570\u529f\u80fd\u65e2\u53ef\u4ee5\u4f7f\u7528C++\u5b9e\u73b0\u4e5f\u53ef\u4ee5\u4f7f\u7528 Python \u5b9e\u73b0\uff0c\u4e8c\u8005\u53ef\u4ee5\u76f8\u4e92\u66ff\u6362\uff0c\u8fd9\u79cd\u8bbe\u8ba1\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u4fdd\u8bc1\u4e86Cyber RT \u6846\u67b6\u7684\u7075\u6d3b\u6027\uff0c\u6bd4\u5982\u9488\u5bf9\u540c\u4e00\u529f\u80fd\uff0c\u5982\u679c\u8be5\u529f\u80fd\u5bf9\u8fd0\u884c\u6548\u7387\u6709\u4e00\u5b9a\u8981\u6c42\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528C++\u5b9e\u73b0\uff0c\u6bd5\u7adfC++\u7a0b\u5e8f\u7684\u6267\u884c\u6548\u7387\u8981\u9ad8\u4e8ePython\uff0c\u53cd\u4e4b\uff0c\u53ef\u80fd\u8be5\u529f\u80fd\u53ef\u80fd\u662f\u975e\u7b97\u6cd5\u7c7b\u7684\uff0c\u5b9a\u4f4d\u53ea\u662f\u8f85\u52a9\u6027\u7684\u811a\u672c\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u9009\u7528 Python\uff0cPython\u7a0b\u5e8f\u7684\u8fd0\u884c\u6548\u7387\u867d\u4f4e\uff0c\u4f46\u662f\u5f00\u53d1\u901f\u5ea6\u4e00\u822c\u8981\u9ad8\u4e8e C++\uff0c\u603b\u4e4b\uff0c\u4e8c\u8005\u90fd\u662f\u6709\u5404\u81ea\u7684\u5e94\u7528\u573a\u666f\u7684\u3002\u9274\u4e8e\u6b64\uff0c\u5f53\u524d helloworld \u7a0b\u5e8f\u4ee5\u53ca\u540e\u7eed\u6848\u4f8b\u6211\u4eec\u90fd\u4f1a\u91c7\u7528C++\u548cPython\u5206\u522b\u5b9e\u73b0\u3002</p> <p>\u6848\u4f8b\u9700\u6c42\uff1a\u5728\u7ec8\u7aef\u8f93\u51fa\u6587\u672c HelloWorld!</p> <p>\u5b9e\u73b0\u6d41\u7a0b\uff1a\u867d\u7136\u8bed\u8a00\u4e0d\u540c\uff0c\u4f46\u662f\u4e8c\u8005\u7684\u7a0b\u5e8f\u5b9e\u73b0\u6d41\u7a0b\u57fa\u672c\u4e00\u81f4\uff0c\u90fd\u5305\u542b\u5982\u4e0b\u56db\u6b65</p> <ol> <li>\u7f16\u5199\u6e90\u6587\u4ef6\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol> <p>\u8fd0\u884c\u7ed3\u679c\uff1a\u53c2\u89c1\u5f15\u8a00\u90e8\u5206\u7684\u6848\u4f8b\u4e09\u3002</p> <p>\u53e6\u5916\uff0c\u672c\u5957\u8bfe\u7a0b\u4e2d\u4f1a\u5728 /apollo/cyber \u4e0b\u521b\u5efa\u4e24\u4e2a\u76ee\u5f55\u5206\u522b\u4e3a demo_cc \u548c demo_py \uff0c\u987e\u540d\u601d\u4e49\uff0c\u524d\u8005\u662fC++\u76f8\u5173\u6587\u4ef6\u7684\u4fdd\u5b58\u76ee\u5f55\uff0c\u540e\u8005\u662f Python\u76f8\u5173\u6587\u4ef6\u7684\u4fdd\u5b58\u76ee\u5f55\u3002\u540e\u7eedCyber RT \u7684\u6838\u5fc3\u6848\u5206\u522b\u4fdd\u5b58\u5728\u8fd9\u4e24\u4e2a\u76ee\u5f55\u4e2d\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/14-cyber-rt-ji-cheng-kai-fa-huan-jing-da-jian/","title":"14 cyber rt ji cheng kai fa huan jing da jian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/14-cyber-rt-ji-cheng-kai-fa-huan-jing-da-jian/#13-cyber-rt","title":"1.3 Cyber RT \u96c6\u6210\u5f00\u53d1\u73af\u5883\u642d\u5efa","text":"<p>\u672c\u8282\u4e3b\u8981\u4ecb\u7ecd\u5982\u679c\u4f7f\u7528 Vscode \u642d\u5efa Cyber RT \u7684\u96c6\u6210\u5f00\u53d1\u73af\u5883\uff0c\u5305\u62ec\u5982\u4f55\u4e0b\u8f7d\u5b89\u88c5Vscode\u3001\u5e38\u7528\u7684\u63d2\u4ef6\u6709\u54ea\u4e9b\u3001\u4ee5\u53ca\u5982\u4f55\u8fde\u63a5docker \u5bb9\u5668...</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/","title":"15 zhun bei 1 bazel","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/#15-bazel","title":"1.5 \u9884\u5907\u77e5\u8bc6\u2014\u2014bazel","text":"<p>\u5728 Apollo Cyber RT \u4e2d\u4f7f\u7528\u5230\u4e86 Bazel \uff0c\u9274\u4e8e\u90e8\u5206\u540c\u5b66\u4e4b\u524d\u5e76\u6ca1\u6709\u63a5\u89e6\u8fc7\uff0c\u6240\u4ee5\u672c\u8282\u4f1a\u4ecb\u7ecd\u5176\u7b80\u5355\u4f7f\u7528\uff0c\u5982\u679c\u4ee5\u524d\u5df2\u7ecf\u6709\u6240\u4e86\u89e3\uff0c\u672c\u90e8\u5206\u5185\u5bb9\u53ef\u4ee5\u76f4\u63a5\u7565\u8fc7\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/#1bazel","title":"1.Bazel \u7b80\u4ecb","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/#_1","title":"\u6982\u5ff5","text":"<p>Bazel \u662fgoogle\u7814\u53d1\u7684\u4e00\u6b3e\u5f00\u6e90\u6784\u5efa\u548c\u6d4b\u8bd5\u5de5\u5177\uff0c\u4e5f\u662f\u4e00\u79cd\u7b80\u5355\u3001\u6613\u8bfb\u7684\u6784\u5efa\u5de5\u5177\u3002Bazel \u652f\u6301\u591a\u79cd\u7f16\u7a0b\u8bed\u8a00\u7684\u9879\u76ee\uff0c\u5e76\u9488\u5bf9\u591a\u4e2a\u5e73\u53f0\u6784\u5efa\u8f93\u51fa\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/#_2","title":"\u7279\u70b9","text":"<p>Bazel \u5177\u6709\u4ee5\u4e0b\u4f18\u52bf\uff1a</p> <ul> <li> <p>\u9ad8\u7ea7\u6784\u5efa\u8bed\u8a00\u3002Bazel \u4f7f\u7528\u4e00\u79cd\u62bd\u8c61\u7684\u3001\u4eba\u7c7b\u53ef\u8bfb\u7684\u8bed\u8a00\u5728\u9ad8\u8bed\u4e49\u7ea7\u522b\u4e0a\u63cf\u8ff0\u9879\u76ee\u7684\u6784\u5efa\u5c5e\u6027\u3002\u4e0e\u5176\u4ed6\u5de5\u5177\u4e0d\u540c\uff0cBazel \u5728\u5e93\u3001\u4e8c\u8fdb\u5236\u6587\u4ef6\u3001\u811a\u672c\u548c\u6570\u636e\u96c6\u7684\u6982\u5ff5\u4e0a\u8fd0\u884c\uff0c\u4f7f\u60a8\u514d\u4e8e\u7f16\u5199\u5bf9\u7f16\u8bd1\u5668\u548c\u94fe\u63a5\u5668\u7b49\u5de5\u5177\u7684\u5355\u72ec\u8c03\u7528\u7684\u590d\u6742\u6027\u3002</p> </li> <li> <p>Bazel \u65e2\u5feb\u901f\u53c8\u53ef\u9760\u3002Bazel \u4f1a\u7f13\u5b58\u4e4b\u524d\u5b8c\u6210\u7684\u6240\u6709\u5de5\u4f5c\uff0c\u5e76\u8ddf\u8e2a\u5bf9\u6587\u4ef6\u5185\u5bb9\u548c\u6784\u5efa\u547d\u4ee4\u6240\u505a\u7684\u66f4\u6539\u3002\u8fd9\u6837\uff0cBazel \u5c31\u80fd\u77e5\u9053\u4f55\u65f6\u9700\u8981\u91cd\u65b0\u6784\u5efa\u67d0\u4e9b\u5185\u5bb9\uff0c\u5e76\u4e14\u4ec5\u91cd\u65b0\u6784\u5efa\u3002\u5982\u9700\u8fdb\u4e00\u6b65\u52a0\u5feb\u6784\u5efa\u901f\u5ea6\uff0c\u60a8\u53ef\u4ee5\u5c06\u9879\u76ee\u8bbe\u7f6e\u4e3a\u4ee5\u9ad8\u5ea6\u5e76\u884c\u4e14\u589e\u91cf\u7684\u65b9\u5f0f\u8fdb\u884c\u6784\u5efa\u3002</p> </li> <li> <p>Bazel \u662f\u591a\u5e73\u53f0\u5e94\u7528\u3002Bazel \u53ef\u5728 Linux\u3001macOS \u548c Windows \u4e0a\u8fd0\u884c\u3002Bazel \u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u9879\u76ee\u4e2d\u4e3a\u591a\u4e2a\u5e73\u53f0\uff08\u5305\u62ec\u684c\u9762\u8bbe\u5907\u3001\u670d\u52a1\u5668\u548c\u79fb\u52a8\u8bbe\u5907\uff09\u6784\u5efa\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u53ef\u90e8\u7f72\u8f6f\u4ef6\u5305\u3002</p> </li> <li> <p>Bazel \u53ef\u4ee5\u6269\u7f29\u3002\u5728\u5904\u7406\u5177\u6709 10 \u4e07\u591a\u4e2a\u6e90\u6587\u4ef6\u7684 build \u65f6\uff0cBazel \u80fd\u591f\u4fdd\u6301\u654f\u6377\u6027\u3002\u5b83\u53ef\u4e0e\u6570\u4ee5\u4e07\u8ba1\u7684\u4ee3\u7801\u5e93\u548c\u7528\u6237\u7fa4\u8fdb\u884c\u534f\u4f5c\u3002</p> </li> <li> <p>Bazel \u662f\u53ef\u6269\u5c55\u7684\u3002\u652f\u6301\u8bb8\u591a\u8bed\u8a00\uff0c\u60a8\u53ef\u4ee5\u6269\u5c55 Bazel \u4ee5\u652f\u6301\u4efb\u4f55\u5176\u4ed6\u8bed\u8a00\u6216\u6846\u67b6\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/#2bazel","title":"2.Bazel\u57fa\u672c\u4f7f\u7528\u6d41\u7a0b","text":"<p>\u5728Apollo\u7684docker\u5bb9\u5668\u4e2d\u5df2\u7ecf\u5b89\u88c5\u4e86 Bazel\uff0c\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u4f7f\u7528\u5373\u53ef\uff0cBazel \u7684\u4f7f\u7528\u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u5927\u81f4\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u65b0\u5efa project \u76ee\u5f55\uff0cproject \u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6 WORKSPACE\uff1b</p> </li> <li> <p>\u65b0\u5efa\u5305\uff0c\u5728\u5305\u4e0b\u65b0\u5efaBUILD\u6587\u4ef6\uff1b</p> </li> <li> <p>\u5305\u4e2d\u7f16\u5199\u6e90\u6587\u4ef6\uff1b</p> </li> <li> <p>\u7f16\u8f91BUILD\u6587\u4ef6\uff1b</p> </li> <li> <p>\u7f16\u8bd1\uff1b</p> </li> <li> <p>\u6267\u884c\u3002</p> </li> </ol> <p>\u51c6\u5907\u5de5\u4f5c\uff1a\u5728 /apollo/cyber \u76ee\u5f55\u4e0b\u65b0\u5efa demo_base_bazel \u76ee\u5f55\uff0c\u540e\u7eed\u5173\u4e8e bazel \u5b9e\u73b0\u90fd\u5b58\u50a8\u5728\u8be5\u76ee\u5f55\u4e2d\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u901a\u8fc7\u4e0d\u540c\u7684\u6848\u4f8b\u6f14\u793a bazel \u7684\u4f7f\u7528\u3002</p> <p>\u5b98\u7f51\uff1ahttps://bazel.build/</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/","title":"16 ben zhang xiao jie","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/#16-protobuf","title":"1.6 \u9884\u5907\u77e5\u8bc6\u2014\u2014protobuf","text":"<p>\u5728 Apollo Cyber RT \u4e2d\u4f7f\u7528\u5230\u4e86 protobuf\uff0c\u9274\u4e8e\u90e8\u5206\u540c\u5b66\u4e4b\u524d\u5e76\u6ca1\u6709\u63a5\u89e6\u8fc7\uff0c\u6240\u4ee5\u672c\u8282\u4f1a\u4ecb\u7ecd\u5176\u7b80\u5355\u4f7f\u7528\uff0c\u5982\u679c\u4ee5\u524d\u5df2\u7ecf\u6709\u6240\u4e86\u89e3\uff0c\u672c\u90e8\u5206\u5185\u5bb9\u53ef\u4ee5\u76f4\u63a5\u7565\u8fc7\u3002</p> <p>\u5728\u524d\u9762\u6211\u4eec\u5b89\u88c5\u5b8c  Apollo Cyber RT \u4e4b\u540e\uff0c\u8fd0\u884c\u4e86\u5185\u7f6e\u7684\u53d1\u5e03\u8ba2\u9605\u4f8b\u7a0b\uff0c\u53d1\u5e03\u65b9\u53ef\u4ee5\u53d1\u5e03\u4e00\u7ec4\u6570\u636e\uff0c\u8ba2\u9605\u65b9\u53ef\u4ee5\u63a5\u6536\u5230\u6570\u636e\uff0c\u90a3\u4e48\u6570\u636e\u662f\u5982\u4f55\u5728\u4e8c\u8005\u4e4b\u95f4\u4f20\u8f93\u7684\u5462\uff1f\u5728 Cyber RT \u4e2d\u5c31\u662f\u4f7f\u7528 protobuf \u5b9e\u73b0\u7684\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/#1protobuf","title":"1.protobuf \u7b80\u4ecb","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/#_1","title":"\u6982\u5ff5","text":"<p>protobuf \u5168\u79f0 Protocol buffers\uff0c\u662f Google \u7814\u53d1\u7684\u4e00\u79cd\u8de8\u8bed\u8a00\u3001\u8de8\u5e73\u53f0\u7684\u5e8f\u5217\u5316\u6570\u636e\u7ed3\u6784\u7684\u65b9\u5f0f\uff0c\u662f\u4e00\u4e2a\u7075\u6d3b\u7684\u3001\u9ad8\u6548\u7684\u7528\u4e8e\u5e8f\u5217\u5316\u6570\u636e\u7684\u534f\u8bae\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/#_2","title":"\u7279\u70b9","text":"<p>\u5728\u5e8f\u5217\u5316\u6570\u636e\u65f6\u5e38\u7528\u7684\u6570\u636e\u683c\u5f0f\u8fd8\u6709 XML\u3001JSON\u7b49\uff0c\u76f8\u6bd4\u8f83\u800c\u8a00\uff0cprotobuf \u66f4\u5c0f\u3001\u6548\u7387\u66f4\u9ad8\u4e14\u4f7f\u7528\u66f4\u4e3a\u4fbf\u6377\uff0cprotobuf\u5185\u7f6e\u7f16\u8bd1\u5668\uff0c\u53ef\u4ee5\u5c06protobuf \u6587\u4ef6\u7f16\u8bd1\u6210 C++\u3001Python\u3001Java\u3001C#\u3001Go \u7b49\u591a\u79cd\u8bed\u8a00\u5bf9\u5e94\u7684\u4ee3\u7801\uff0c\u7136\u540e\u53ef\u4ee5\u76f4\u63a5\u88ab\u5bf9\u5e94\u8bed\u8a00\u4f7f\u7528\uff0c\u8f7b\u677e\u5b9e\u73b0\u5bf9\u6570\u636e\u6d41\u7684\u8bfb\u6216\u5199\u64cd\u4f5c\u800c\u4e0d\u9700\u8981\u518d\u505a\u7279\u6b8a\u89e3\u6790\u3002</p> <p>Protobuf \u7684\u4f18\u70b9\u5982\u4e0b\uff1a</p> <ol> <li>\u9ad8\u6548  \u2014\u2014 \u5e8f\u5217\u5316\u540e\u5b57\u8282\u5360\u7528\u7a7a\u95f4\u6bd4XML\u5c113-10\u500d\uff0c\u5e8f\u5217\u5316\u7684\u65f6\u95f4\u6548\u7387\u6bd4XML\u5feb20-100\u500d\uff1b</li> <li>\u4fbf\u6377  \u2014\u2014 \u53ef\u4ee5\u5c06\u7ed3\u6784\u5316\u6570\u636e\u5c01\u88c5\u4e3a\u7c7b\uff0c\u4f7f\u7528\u65b9\u4fbf\uff1b</li> <li>\u8de8\u8bed\u8a00  \u2014\u2014 \u652f\u6301\u591a\u79cd\u7f16\u7a0b\u8bed\u8a00\uff1b</li> <li>\u9ad8\u517c\u5bb9\u6027  \u2014\u2014 \u5f53\u6570\u636e\u4ea4\u4e92\u7684\u53cc\u65b9\u4f7f\u7528\u540c\u4e00\u6570\u636e\u534f\u8bae\uff0c\u5982\u679c\u4e00\u65b9\u4fee\u6539\u4e86\u6570\u636e\u7ed3\u6784\uff0c\u4e0d\u5f71\u54cd\u53e6\u4e00\u65b9\u7684\u4f7f\u7528\u3002</li> </ol> <p>Protobuf \u4e5f\u6709\u7f3a\u70b9\uff1a</p> <ol> <li>\u4e8c\u8fdb\u5236\u683c\u5f0f\u6613\u8bfb\u6027\u5dee\uff1b</li> <li>\u7f3a\u4e4f\u81ea\u63cf\u8ff0\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/#2","title":"2.\u57fa\u672c\u4f7f\u7528\u6d41\u7a0b","text":"<p>\u5728bazel\u4e2d\u5df2\u7ecf\u96c6\u6210\u4e86protobuf\u7684\u7f16\u8bd1\u5668\uff0c\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u4f7f\u7528\u5373\u53ef\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u901a\u8fc7\u4e00\u4e2a\u6848\u4f8b\u6765\u6f14\u793a protobuf \u7684\u57fa\u672c\u4f7f\u7528\uff0c\u9700\u6c42\u5982\u4e0b\uff1a</p> <p>\u521b\u5efa protobuf \u6587\u4ef6\uff0c\u5728\u8be5\u6587\u4ef6\u4e2d\u9700\u8981\u751f\u547d\u5b66\u751f\u7684\u59d3\u540d\u3001\u5e74\u9f84\u3001\u8eab\u9ad8\u3001\u6240\u6709\u7684\u4e66\u7c4d......\u7b49\u4fe1\u606f\uff0c\u7136\u540e\u5206\u522b\u4f7f\u7528C++\u548cPython\u5b9e\u73b0\u5b66\u751f\u6570\u636e\u7684\u8bfb\u5199\u64cd\u4f5c\u3002</p> <p>\u8be5\u9700\u6c42\u5b9e\u73b0\u5927\u81f4\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u5199proto\u6587\u4ef6\uff1b</li> <li>\u914d\u7f6eBUILD\u6587\u4ef6\uff0c\u7f16\u8bd1\u751f\u6210\u5bf9\u5e94\u7684C++\u6216Python\u6587\u4ef6\uff1b</li> <li>\u5728C++\u6216Python\u4e2d\u8c03\u7528\u3002</li> </ol> <p>\u540c\u4e00proto\u6587\u4ef6\uff0c\u662f\u53ef\u4ee5\u88ab\u591a\u79cd\u8bed\u8a00\u4f7f\u7528\u7684\uff0c\u6240\u4ee5\u5728\u6f14\u793a C++ \u548c Python \u8c03\u7528 proto \u4e4b\u524d\uff0c\u6211\u4eec\u53ef\u4ee5\u7f16\u5199proto\u6587\u4ef6\u5e76\u901a\u8fc7\u6848\u4f8b\u6765\u5b66\u4e60\u4e00\u4e9bproto\u7684\u57fa\u672c\u8bed\u6cd5\uff0c\u540e\u5b66\u4e60\u5982\u4f55\u5728C++ \u548c Python \u4e2d\u8c03\u7528 proto\u3002</p> <p>\u5b98\u7f51\uff1ahttps://developers.google.com/protocol-buffers</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/17-ben-zhang-xiao-jie/","title":"17 ben zhang xiao jie","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/17-ben-zhang-xiao-jie/#17","title":"1.7 \u672c\u7ae0\u5c0f\u7ed3","text":"<p>\u672c\u7ae0\u6211\u4eec\u4e3b\u8981\u4ecb\u7ecd\u4e86 Apollo Cyber RT \u7684\u76f8\u5173\u6982\u5ff5\uff0c\u5b89\u88c5\u4e86 Cyber RT\uff0c\u5e76\u642d\u5efa\u597d\u4e86\u57fa\u4e8e Vscode \u7684\u96c6\u6210\u5f00\u53d1\u73af\u5883\uff0c\u6700\u540e\u8fd8\u7b80\u5355\u4ecb\u7ecd\u4e86 bazel \u4ee5\u53ca protobuf \u7684\u76f8\u5173\u5185\u5bb9\uff0c\u4e07\u4e8b\u4ff1\u5907\uff0c\u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u5b66\u4e60 Cyber RT \u7684\u6838\u5fc3\u901a\u4fe1\u673a\u5236\u4e86\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/121-zhun-bei-gong-zuo/","title":"121 zhun bei gong zuo","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/121-zhun-bei-gong-zuo/#121","title":"1.2.1 \u51c6\u5907\u5de5\u4f5c","text":"<p>\u5728\u6b63\u5f0f\u5b89\u88c5 Apollo \u6216 CyberRT \u4e4b\u524d\uff0c\u9700\u8981\u5148\u51c6\u5907\u57fa\u7840\u73af\u5883\uff0c\u57fa\u7840\u73af\u5883\u4e3b\u8981\u5305\u542b\u5982\u4e0b\u5185\u5bb9\uff1a</p> <ol> <li>\u5b89\u88c5 Ubuntu Linux\uff1b</li> <li>\u5b89\u88c5 NVIDIA GPU \u9a71\u52a8\uff08\u53ef\u9009\uff09\uff1b</li> <li>\u5b89\u88c5docker\uff1b</li> <li>\u5b89\u88c5 NVIDIA Container Toolkit\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/121-zhun-bei-gong-zuo/#1-ubuntu-linux","title":"1.\u5b89\u88c5 Ubuntu Linux","text":"<p>\u5f53\u524d\u8bfe\u7a0b\u91c7\u7528\u7684\u662f Apollo 6.0 \u7248\uff0c\u5efa\u8bae\u5bf9\u5e94\u7684\u64cd\u4f5c\u7cfb\u7edf\u4f7f\u7528ubuntu20.04 \u6216 ubuntu18.04\uff0c\u5728\u6b64\u4e0d\u6d89\u53caubuntu\u64cd\u4f5c\u7cfb\u7edf\u7684\u5b89\u88c5\uff0c\u5982\u6709\u9700\u8981\u53ef\u53c2\u8003\u94fe\u63a5\uff1ahttps://www.bilibili.com/video/BV1Ci4y1L7ZZ?p=7\u3002</p> <p>\u5728\u6267\u884c\u4e0b\u4e00\u6b65\u524d\uff0c\u8bf7\u5148\u66f4\u65b0\u76f8\u5173\u8f6f\u4ef6\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>sudo apt-get update\nsudo apt-get upgrade\n</code></pre> <p>\u8017\u65f6\u8bb0\u5f55\uff1a1.5h~2h</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/121-zhun-bei-gong-zuo/#2-nvidia-gpu","title":"2.\u5b89\u88c5 NVIDIA GPU \u9a71\u52a8\uff08\u53ef\u9009\uff09","text":"<p>\u8f66\u4e0a\u7684 Apollo \u8fd0\u884c\u73af\u5883\u9700\u8981\u4f9d\u8d56 NVIDIA GPU \u9a71\u52a8\u3002</p> <p>\u6ce8\u610f\uff1a\u5982\u679c\u60a8\u4e0d\u9700\u8981\u8fd0\u884c\u611f\u77e5\u6a21\u5757\uff0c\u53ea\u60f3\u64ad\u653e\u6570\u636e\u5305\u4f53\u9a8c Apollo\uff0c\u5219\u4e0d\u9700\u8981\u5b89\u88c5 NVIDIA \u9a71\u52a8\u3002</p> <p>\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u5728 Ubuntu \u4e0a\u8fdb\u884c\u5b89\u88c5\uff1a</p> <ul> <li> <p>\uff08\u63a8\u8350\uff09<code>apt-get</code>\u547d\u4ee4\uff0c\u53c2\u89c1How to Install NVIDIA Driver\u3002</p> </li> <li> <p>\u4f7f\u7528\u5b98\u65b9runfile\u3002</p> </li> </ul> <p>\u5bf9\u4e8e Ubuntu 18.04+\uff0c\u53ea\u9700\u8981\u7b80\u5355\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\uff1a</p> <pre><code>sudo apt-get update\nsudo apt-add-repository multiverse\nsudo apt-get update\nsudo apt-get install nvidia-driver-455\n</code></pre> <p>\u53ef\u4ee5\u8f93\u5165<code>nvidia-smi</code>\u6765\u6821\u9a8c NVIDIA GPU \u9a71\u52a8\u662f\u5426\u5728\u6b63\u5e38\u8fd0\u884c\uff08\u53ef\u80fd\u9700\u8981\u5728\u5b89\u88c5\u540e\u91cd\u542f\u7cfb\u7edf\u4ee5\u4f7f\u9a71\u52a8\u751f\u6548\uff09\u3002\u5982\u679c\u6210\u529f\uff0c\u5219\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <pre><code>Prompt&gt; nvidia-smi\nMon Jan 25 15:51:08 2021\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 460.27.04    Driver Version: 460.27.04    CUDA Version: 11.2     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|                               |                      |               MIG M. |\n|===============================+======================+======================|\n|   0  GeForce RTX 3090    On   | 00000000:65:00.0  On |                  N/A |\n| 32%   29C    P8    18W / 350W |    682MiB / 24234MiB |      7%      Default |\n|                               |                      |                  N/A |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                                  |\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\n|        ID   ID                                                   Usage      |\n|=============================================================================|\n|    0   N/A  N/A      1286      G   /usr/lib/xorg/Xorg                 40MiB |\n|    0   N/A  N/A      1517      G   /usr/bin/gnome-shell              120MiB |\n|    0   N/A  N/A      1899      G   /usr/lib/xorg/Xorg                342MiB |\n|    0   N/A  N/A      2037      G   /usr/bin/gnome-shell               69MiB |\n|    0   N/A  N/A      4148      G   ...gAAAAAAAAA --shared-files      105MiB |\n+-----------------------------------------------------------------------------+\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/121-zhun-bei-gong-zuo/#3docker","title":"3.\u5b89\u88c5docker","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/121-zhun-bei-gong-zuo/#31","title":"3.1 \u5b89\u88c5","text":"<p>Apollo 6.0+ \u4f9d\u8d56\u4e8e Docker 19.03+\u3002\u5b89\u88c5 Docker \u5f15\u64ce\uff0c\u53c2\u89c1Install Docker Engine on Ubuntu\u3002</p> <p>Ubuntu \u4e0a\u7684 Docker-CE \u4e5f\u53ef\u4ee5\u901a\u8fc7 Docker \u63d0\u4f9b\u7684\u5b98\u65b9\u811a\u672c\u5b89\u88c5\uff1a</p> <pre><code>curl https://get.docker.com | sh\nsudo systemctl start docker &amp;&amp; sudo systemctl enable docker\n</code></pre> <p>\u6ce8\u610f\uff1a\u5b89\u88c5\u65f6\uff0c\u53ef\u80fd\u4f1a\u629b\u51fa\u5f02\u5e38</p> <p></p> <p>\u76f4\u63a5\u6839\u636e\u63d0\u793a\u8c03\u7528 sudo apt install curl \u5373\u53ef\u3002</p> <p>\u8017\u65f6\u8bb0\u5f55\uff1a10min</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/121-zhun-bei-gong-zuo/#32","title":"3.2 \u6d4b\u8bd5","text":"<p>\u6d4b\u8bd5docker\uff0c\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165\uff1a</p> <pre><code>sudo docker run hello-world\n</code></pre> <p>\u8fd0\u884c\u7ed3\u679c\uff1a</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/121-zhun-bei-gong-zuo/#33","title":"3.3 \u4f18\u5316","text":"<p>\u5728\u4e0a\u4e00\u6b65\u6d4b\u8bd5\u65f6\uff0c\u4f7f\u7528\u5230\u4e86 sudo \u6743\u9650\uff0c\u5426\u5219\uff0c\u53ef\u80fd\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u6bd4\u5982\uff1a</p> <p>\u5bf9\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u4f18\u5316\uff0c\u6dfb\u52a0 docker \u6743\u9650\u7ed9\u5f53\u524d\u7528\u6237\uff0c\u4f7f\u7528 docker \u65f6\u53ef\u4ee5\u514dsudo\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a</p> <ol> <li>\u521b\u5efa  docker \u7528\u6237\u7ec4</li> </ol> <pre><code>$ sudo groupadd docker\n</code></pre> <ol> <li>\u6dfb\u52a0\u5f53\u524d\u7528\u6237\u5230 docker \u7ec4</li> </ol> <pre><code>$ sudo usermod -aG docker $USER\n</code></pre> <ol> <li>\u91cd\u542f\u865a\u62df\u673a\u6216\u8005\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f7f\u4e4b\u751f\u6548\uff08\u8981\u91cd\u542f\uff09</li> </ol> <pre><code>$ newgrp docker\n</code></pre> <ol> <li>\u6d4b\u8bd5\u662f\u5426\u53ef\u4ee5\u514dsudo\u8fd0\u884c</li> </ol> <pre><code>$ docker run hello-world\n</code></pre> <p>\u53e6\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u914d\u7f6edocker\u5f00\u673a\u81ea\u542f\u52a8\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>$ sudo systemctl enable docker.service\n$ sudo systemctl enable containerd.service\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/121-zhun-bei-gong-zuo/#14-nvidia-container-toolkit","title":"1.4\u5b89\u88c5 NVIDIA Container Toolkit","text":"<p>\u57fa\u4e8e Apollo \u7684 CUDA \u7684 docker \u955c\u50cf\u9700\u8981\u4f9d\u8d56\u4e8e NVIDIA Container Toolkit\u3002\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 NVIDIA Container Toolkit\uff1a</p> <pre><code>distribution=$(. /etc/os-release;echo $ID$VERSION_ID)\ncurl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -\ncurl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.list\nsudo apt-get -y update\nsudo apt-get install -y nvidia-docker2\n</code></pre> <p>\u8017\u65f6\u7edf\u8ba1\uff1a \u6bd4\u8f83\u5feb\u3002</p> <p>\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u91cd\u542f Docker \u4ee5\u4f7f\u6539\u52a8\u751f\u6548\u3002</p> <pre><code>sudo systemctl restart docker\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/122-cyber-rt-an-zhuang/","title":"122 cyber rt an zhuang","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/122-cyber-rt-an-zhuang/#122-cyber-rt","title":"1.2.2 Cyber RT \u5b89\u88c5","text":"<p>Apollo Cyber RT \u5b89\u88c5\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u4e0b\u8f7d\u6e90\u7801\uff1b</li> <li>\u6267\u884c\u811a\u672c\u542f\u52a8docker\u5bb9\u5668\uff1b</li> <li>\u8fdb\u5165docker\u5bb9\u5668\uff1b</li> <li>\u6784\u5efa\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/122-cyber-rt-an-zhuang/#1","title":"1.\u4e0b\u8f7d","text":"<p>\u514b\u9686 Apollo \u6e90\u7801\u4ed3\u5e93\uff1a</p> <pre><code>git clone https://github.com/ApolloAuto/apollo.git\n</code></pre> <p>GitHub \u5728\u56fd\u5185\u8bbf\u95ee\u901f\u5ea6\u53ef\u80fd\u5f88\u6162\uff0c\u53ef\u4ee5\u4f7f\u7528 Gitee \u66ff\u4ee3\uff1a</p> <pre><code>git clone https://gitee.com/ApolloAuto/apollo.git\n</code></pre> <p>\u6ce8\u610f: \u53ef\u80fd\u4f1a\u7ecf\u5e38\u6027\u5931\u8d25\u3002</p> <p>\u8017\u65f6\u8bb0\u5f55\uff1a1h</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/122-cyber-rt-an-zhuang/#2-apollo-docker","title":"2.\u542f\u52a8 Apollo Docker \u5f00\u53d1\u5bb9\u5668","text":"<p>\u8fdb\u5165\u5230 Apollo \u6e90\u7801\u6839\u76ee\u5f55\uff0c\u6267\u884c\u4e0b\u8ff0\u547d\u4ee4\u4ee5\u542f\u52a8 Apollo Docker \u5f00\u53d1\u5bb9\u5668\uff1a</p> <pre><code>./docker/scripts/dev_start.sh\n</code></pre> <p>\u5982\u679c\u53ea\u662f\u4f7f\u7528 Cyber RT \u53ef\u4ee5\u6267\u884c\uff1a</p> <pre><code>./docker/scripts/cyber_start.sh\n</code></pre> <p>\u6216\\(\u56fd\u5185\u5efa\u8bae\u9009\u62e9\u6b64\u9879\uff0c\u901f\u5ea6\u66f4\u5feb\\)\uff1a</p> <pre><code>./docker/scripts/cyber_start.sh -g cn\n</code></pre> <p>\u8017\u65f6\u8bb0\u5f55\uff1a1h</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/122-cyber-rt-an-zhuang/#3-apollo-docker","title":"3.\u8fdb\u5165 Apollo Docker \u5f00\u53d1\u5bb9\u5668","text":"<p>\u542f\u52a8 Apollo Docker \u5f00\u53d1\u5bb9\u5668\u540e\uff0c\u6267\u884c\u4e0b\u8ff0\u547d\u4ee4\u8fdb\u5165\u5bb9\u5668\uff1a</p> <pre><code>./docker/scripts/dev_into.sh\n</code></pre> <p>\u5982\u679c\u53ea\u662f\u4f7f\u7528 Cyber RT \u53ef\u4ee5\u6267\u884c\uff1a</p> <pre><code>./docker/scripts/cyber_into.sh\n</code></pre> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fdb\u5165\u5bb9\u5668\u540e\u7ec8\u7aef\u4fe1\u606f\u53d1\u751f\u4e86\u76f8\u5e94\u53d8\u5316\uff0c\u540e\u9762\u7684\u64cd\u4f5c\u5c06\u5728\u5bb9\u5668\u4e2d\u8fdb\u884c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/122-cyber-rt-an-zhuang/#4-apollo","title":"4.\u5728\u5bb9\u5668\u4e2d\u6784\u5efa Apollo","text":"<p>\u8fdb\u5165 Apollo Docker \u5f00\u53d1\u5bb9\u5668\u540e\uff0c\u5728\u5bb9\u5668\u7ec8\u7aef\u4e2d\u6267\u884c\u4e0b\u8ff0\u547d\u4ee4\u6784\u5efa Apollo\uff1a</p> <pre><code>./apollo.sh build\n</code></pre> <p>\u5982\u679c\u53ea\u662f\u4f7f\u7528 Cyber RT \u53ef\u4ee5\u6267\u884c\uff1a</p> <pre><code>./apollo.sh build cyber\n</code></pre> <p>\u6b64\u64cd\u4f5c\u6bd4\u8f83\u8017\u65f6</p> <p>\u6ce8\u610f\uff1a\u5982\u679c\u62a5\u65e0\u6743\u9650\u76f8\u5173\u5f02\u5e38\uff0c\u5728\u547d\u4ee4\u524d\u52a0<code>sudo</code>\u5373\u53ef\uff0c\u5982\u9047\u5176\u4ed6\u9519\u8bef\uff0c\u91cd\u65b0\u6267\u884c\u547d\u4ee4\u76f4\u81f3\u6210\u529f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/123-ce-shi/","title":"123 ce shi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/123-ce-shi/#123","title":"1.2.3 \u6d4b\u8bd5","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/123-ce-shi/#_1","title":"\u6d4b\u8bd5\u524d\u51c6\u5907\uff1a","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ccyber \u7684\u65e5\u5fd7\u4fe1\u606f\u662f\u5199\u51fa\u5230\u78c1\u76d8\u6587\u4ef6\uff0c\u800c\u4e0d\u4f1a\u5728\u7ec8\u7aef\u8f93\u51fa\uff0c\u4e3a\u4e86\u65b9\u4fbf\u67e5\u770b\u8fd0\u884c\u7ed3\u679c\uff0c\u6211\u4eec\u9700\u8981\u4fee\u6539 cyber \u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4f7f\u5176\u80fd\u591f\u5c06\u65e5\u5fd7\u6d88\u606f\u8f93\u51fa\u5728\u7ec8\u7aef\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/123-ce-shi/#1","title":"1.\u6253\u5f00\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>vi cyber/setup.bash\n</code></pre> <p>2.\u4fee\u6539\u5e76\u9000\u51fa\u7f16\u8f91\u5668</p> <p>\u6587\u4ef6\u4e2d\u53c2\u6570GLOG_alsologtostderr \u7684\u9ed8\u8ba4\u503c\u4e3a0\uff0c\u9700\u8981\u4fee\u6539\u4e3a1</p> <pre><code>export GLOG_alsologtostderr=1\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/123-ce-shi/#3","title":"3.\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>source cyber/setup.bash\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/12-cyber-rt-an-zhuang/123-ce-shi/#_2","title":"\u6d4b\u8bd5\uff1a","text":"<p>\u6253\u5f00\u4e24\u4e2a\u7ec8\u7aefA\u548cB\uff0c\u6309\u7167\u4e0a\u4e00\u8282\u4ecb\u7ecd\uff0c\u5206\u522b\u8fdb\u5165 docker \u5bb9\u5668\u3002</p> <p>\u7ec8\u7aefA\u8f93\u5165\u547d\u4ee4\uff1a</p> <pre><code>./bazel-bin/cyber/examples/talker\n</code></pre> <p>\u7ec8\u7aefB\u8f93\u5165\u547d\u4ee4\uff1a</p> <pre><code>./bazel-bin/cyber/examples/listener\n</code></pre> <p>\u4e24\u4e2a\u7ec8\u7aef\u4f1a\u5206\u522b\u8f93\u51fa\u65e5\u5fd7\u4fe1\u606f\uff0c\u6267\u884c\u7ed3\u679c\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/141-cshi-xian-helloworld/","title":"141 cshi xian helloworld","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/141-cshi-xian-helloworld/#141-chelloworld","title":"1.4.1 c++\u5b9e\u73b0HelloWorld","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/141-cshi-xian-helloworld/#1","title":"1.\u7f16\u5199\u6e90\u6587\u4ef6","text":"<p>demo_cc \u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6demo00_helloworld.cc\uff0c\u7f16\u5199\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#include \"cyber/cyber.h\"\n/*      \n    \u9700\u6c42: \u5728\u63a7\u5236\u53f0\u8f93\u51fa\u6587\u672cHelloWorld;\n*/\n\nint main(int argc, char *argv[])\n{\n    apollo::cyber::Init(argv[0]);\n    AINFO &lt;&lt; \"hello world!\";    \n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/141-cshi-xian-helloworld/#2","title":"2.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<p>demo_cc \u76ee\u5f55\u4e0b\u65b0\u5efaBUILD\u6587\u4ef6\uff0c\u7f16\u5199\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>cc_binary(\n    name = \"demo00_helloworld\",\n    srcs = [\"demo00_helloworld.cc\"],\n    deps = [\"//cyber\"],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/141-cshi-xian-helloworld/#3","title":"3.\u7f16\u8bd1","text":"<p>\u5bb9\u5668\u7ec8\u7aef\u4e0b\uff0c\u8f93\u5165\u547d\u4ee4\uff1a</p> <pre><code>bazel build cyber/demo_cc/...\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/141-cshi-xian-helloworld/#4","title":"4.\u6267\u884c","text":"<p>\u5bb9\u5668\u7ec8\u7aef\u4e0b\uff0c\u8f93\u5165\u547d\u4ee4\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_cc/demo00_helloworld\n</code></pre> <p>\u7ec8\u7aef\u8f93\u51fa\u6587\u672c\uff1ahello world!</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/142-pythonshi-xian-helloworld/","title":"142 pythonshi xian helloworld","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/142-pythonshi-xian-helloworld/#142-pythonhelloworld","title":"1.4.2 Python\u5b9e\u73b0HelloWorld","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/142-pythonshi-xian-helloworld/#1","title":"1.\u7f16\u5199\u6e90\u6587\u4ef6","text":"<p>demo_py \u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6demo00_helloworld_py.py\uff0c\u7f16\u5199\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\nfrom cyber.python.cyber_py3 import cyber\n\nif __name__ == \"__main__\":\n    cyber.init()\n    print(\"hello apollo!\")\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/142-pythonshi-xian-helloworld/#2","title":"2.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<p>demo_py \u76ee\u5f55\u4e0b\u65b0\u5efaBUILD\u6587\u4ef6\uff0c\u7f16\u5199\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>py_binary(\n    name = \"demo00_helloworld_py\",\n    srcs = [\"demo00_helloworld_py.py\"],\n    deps = [\n        \"//cyber/python/cyber_py3:cyber\"\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/142-pythonshi-xian-helloworld/#3","title":"3.\u7f16\u8bd1","text":"<p>\u5bb9\u5668\u7ec8\u7aef\u4e0b\uff0c\u8f93\u5165\u547d\u4ee4\uff1a</p> <pre><code>bazel build cyber/demo_py/...\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/13-cyber-rt-kuai-su-ti-yan/142-pythonshi-xian-helloworld/#4","title":"4.\u6267\u884c","text":"<p>\u5bb9\u5668\u7ec8\u7aef\u4e0b\uff0c\u8f93\u5165\u547d\u4ee4\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_py/demo00_helloworld_py\n</code></pre> <p>\u7ec8\u7aef\u8f93\u51fa\u6587\u672c\uff1ahello world!</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/14-cyber-rt-ji-cheng-kai-fa-huan-jing-da-jian/131-vscode-xia-zai-yu-an-zhuang/","title":"131 vscode xia zai yu an zhuang","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/14-cyber-rt-ji-cheng-kai-fa-huan-jing-da-jian/131-vscode-xia-zai-yu-an-zhuang/#131-vscode","title":"1.3.1 Vscode \u4e0b\u8f7d\u4e0e\u5b89\u88c5","text":"<p>VSCode \u5168\u79f0 Visual Studio Code\uff0c\u662f\u5fae\u8f6f\u51fa\u7684\u4e00\u6b3e\u8f7b\u91cf\u7ea7\u4ee3\u7801\u7f16\u8f91\u5668\uff0c\u514d\u8d39\u3001\u5f00\u6e90\u800c\u4e14\u529f\u80fd\u5f3a\u5927\u3002\u5b83\u652f\u6301\u51e0\u4e4e\u6240\u6709\u4e3b\u6d41\u7684\u7a0b\u5e8f\u8bed\u8a00\u7684\u8bed\u6cd5\u9ad8\u4eae\u3001\u667a\u80fd\u4ee3\u7801\u8865\u5168\u3001\u81ea\u5b9a\u4e49\u70ed\u952e\u3001\u62ec\u53f7\u5339\u914d\u3001\u4ee3\u7801\u7247\u6bb5\u3001\u4ee3\u7801\u5bf9\u6bd4 Diff\u3001GIT \u7b49\u7279\u6027\uff0c\u652f\u6301\u63d2\u4ef6\u6269\u5c55\uff0c\u5e76\u9488\u5bf9\u7f51\u9875\u5f00\u53d1\u548c\u4e91\u7aef\u5e94\u7528\u5f00\u53d1\u505a\u4e86\u4f18\u5316\u3002\u8f6f\u4ef6\u8de8\u5e73\u53f0\u652f\u6301 Win\u3001Mac \u4ee5\u53ca Linux\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/14-cyber-rt-ji-cheng-kai-fa-huan-jing-da-jian/131-vscode-xia-zai-yu-an-zhuang/#1\u4e0b\u8f7d","title":"1.\u4e0b\u8f7d","text":"<p>vscode \u4e0b\u8f7d\uff1ahttps://code.visualstudio.com/Download</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/14-cyber-rt-ji-cheng-kai-fa-huan-jing-da-jian/131-vscode-xia-zai-yu-an-zhuang/#2vscode-\u5b89\u88c5\u4e0e\u5378\u8f7d","title":"2.vscode \u5b89\u88c5\u4e0e\u5378\u8f7d","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/14-cyber-rt-ji-cheng-kai-fa-huan-jing-da-jian/131-vscode-xia-zai-yu-an-zhuang/#21-\u5b89\u88c5","title":"2.1 \u5b89\u88c5","text":"<p>\u65b9\u5f0f1:\u53cc\u51fb\u5b89\u88c5\u5373\u53ef\\(\u6216\u53f3\u51fb\u9009\u62e9\u5b89\u88c5\\)</p> <p>\u65b9\u5f0f2:<code>sudo dpkg -i xxxx.deb</code></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/14-cyber-rt-ji-cheng-kai-fa-huan-jing-da-jian/131-vscode-xia-zai-yu-an-zhuang/#22-\u5378\u8f7d","title":"2.2 \u5378\u8f7d","text":"<pre><code>sudo dpkg --purge code\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/14-cyber-rt-ji-cheng-kai-fa-huan-jing-da-jian/131-vscode-xia-zai-yu-an-zhuang/#3","title":"3.\u8fd0\u884c","text":"<p>\u65b9\u5f0f1\uff1a\u7ec8\u7aef\u4e0b\u8f93\u5165 code . \u5373\u53ef\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u6253\u5f00 Vscode\uff1b</p> <p>\u65b9\u5f0f2\uff1a\u663e\u793a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u641c\u7d22 Visual Studio Code\uff0c\u70b9\u51fb\u5373\u53ef\u76f4\u63a5\u8fd0\u884c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/14-cyber-rt-ji-cheng-kai-fa-huan-jing-da-jian/132-vscode-cha-jian-de-an-zhuang-yi-ji-shi-yong/","title":"132 vscode cha jian de an zhuang yi ji shi yong","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/14-cyber-rt-ji-cheng-kai-fa-huan-jing-da-jian/132-vscode-cha-jian-de-an-zhuang-yi-ji-shi-yong/#132-vscode","title":"1.3.2 Vscode \u63d2\u4ef6\u7684\u5b89\u88c5\u4ee5\u53ca\u4f7f\u7528","text":"<p>\u5728 Vscode \u4e2d\u9488\u5bf9\u4e0d\u540c\u7684\u529f\u80fd\u6a21\u5757\u3001\u4e0d\u540c\u7684\u7f16\u7a0b\u8bed\u8a00\u63d0\u4f9b\u4e86\u5927\u91cf\u7684\u63d2\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u9700\u9009\u7528\u63d2\u4ef6\u4ee5\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u3002</p> <p>\u6211\u4eec\u8bfe\u7a0b\u4e2d\u9009\u7528\u7684\u63d2\u4ef6\u5982\u4e0b\uff1a</p> <p></p> <p>Vscode \u8fde\u63a5 docker \u5bb9\u5668\uff1a</p> <p></p> <p>\u5b89\u88c5\u5b8c docker \u63d2\u4ef6\u540e\uff0c\u5de6\u8fb9\u680f\u7684\u5c0f\u9cb8\u9c7c\u5373\u4e3adocker\uff0c\u5982\u679c\u5f53\u524ddocker\u6b63\u5728\u8fd0\u884c\u4e2d\uff0c\u90a3\u4e48\u4f1a\u663e\u793a\u4f60\u7684\u955c\u50cf\u548c\u5bb9\u5668\uff0c\u4e5f\u53ef\u4ee5\u5728\u955c\u50cf\u4e0a\u53f3\u51fb\u9009\u62e9run interactive \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5bb9\u5668\u3002</p> <p></p> <p>\u9009\u5b9a\u5bb9\u5668\uff0c\u53f3\u51fb ---&gt; Attach Visual Studio Code \u5373\u53ef\u6253\u5f00\u65b0\u7a97\u53e3\u8fde\u63a5\u5bb9\u5668</p> <p></p> <p>\u5728\u65b0\u7a97\u53e3\u4e2d\u53ef\u4ee5\u9009\u62e9\u8981\u6253\u5f00\u7684\u5bb9\u5668\u4e2d\u7684\u6587\u4ef6\u5939</p> <p>\u9009\u62e9\u6587\u4ef6\u5939\u5373\u53ef\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/","title":"151 bazel ji ben shi yong liu cheng","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#151-bazel","title":"1.5.1 Bazel \u4f7f\u7528\u4e4b\u57fa\u672c\u6d41\u7a0b","text":"<p>\u672c\u8282\u5c06\u5206\u522b\u6f14\u793a C++ \u548c Python \u4e2dBazel \u7684\u57fa\u672c\u4f7f\u7528\u6d41\u7a0b\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#1-c","title":"1. C++\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#1project","title":"1.\u65b0\u5efaproject\u76ee\u5f55","text":"<p>\u5728demo_base_bazel \u76ee\u5f55\u4e0b\u65b0\u5efa\u76ee\u5f55 pro1_helloworld\uff0c\u518d\u5728 pro1_helloworld \u76ee\u5f55\u4e0b\u65b0\u5efaWORKSPACE \u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#2","title":"2.\u65b0\u5efa\u5305\u76ee\u5f55","text":"<p>\u5728 pro1_helloworld \u76ee\u5f55\u4e0b\u65b0\u5efa demo_pkg \u76ee\u5f55\uff0c\u8be5\u76ee\u5f55\u4e0b\u65b0\u5efa BUILD \u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#3","title":"3.\u65b0\u5efa\u6e90\u6587\u4ef6","text":"<p>\u5728 demo_pkg \u76ee\u5f55\u4e0b\u65b0\u5efa c++ \u6e90\u6587\u4ef6 hello_world.cc\uff0c\u7f16\u5199\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(int argc, char const *argv[])\n{\n    cout &lt;&lt; \"hello world\" &lt;&lt; endl;\n    return 0;\n}\u200b\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#4build","title":"4.\u7f16\u8f91BUILD\u6587\u4ef6","text":"<p>\u7f16\u8f91BUILD\u6587\u4ef6\uff0c\u7f16\u5199\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>cc_binary(\n    name = \"hello\",\n    srcs = [\"hello_world.cc\"]\n)\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>name \u53ef\u6267\u884c\u6587\u4ef6</li> <li>srcs \u6e90\u6587\u4ef6</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#5","title":"5.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e0b\u5148\u8fdb\u5165\u9879\u76ee\u76ee\u5f55\uff0c\u4e5f\u5373pro1_helloworld\uff0c\u5e38\u7528\u7f16\u8bd1\u65b9\u5f0f\u6709\u4e24\u79cd\u3002</p> <p>\u7f16\u8bd1\u65b9\u5f0f1\uff1a</p> <pre><code>bazel build //demo_pkg/...\n</code></pre> <p>\u4e0a\u8ff0\u547d\u4ee4\u662f\u6307\u7f16\u8bd1 demo_pkg \u5305\u4e0b\u7684\u6240\u6709\u7a0b\u5e8f\uff0c\u201c//\u201d \u6307\u4ee3\u9879\u76ee\u6839\u76ee\u5f55\\(\u4e5f\u5373pro1\\_helloworld\\)\uff0c\u6216\u8005\u4e5f\u53ef\u4ee5\u4e0d\u4f7f\u7528\"//\"\u3002</p> <p>\u7f16\u8bd1\u65b9\u5f0f2\uff1a</p> <pre><code>bazel build //demo_pkg:hello\n</code></pre> <p>\u4e0a\u8ff0\u547d\u4ee4\u662f\u6307\u7f16\u8bd1 demo_pkg \u5305\u4e0b\u540d\u4e3a hello\uff08\u8bed\u6cd5\u683c\u5f0f\u4e3a\"\u5305\u540d:\u76ee\u6807\u540d\"\uff09 \u7684\u7a0b\u5e8f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#6","title":"6.\u6267\u884c","text":"<p>\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u5728 pro1_helloworld \u76ee\u4e2d\uff0c\u4f1a\u751f\u6210\u4e00\u4e9b\u4e2d\u95f4\u6587\u4ef6\uff0c\u5176\u4e2d bazel-bin \u4e2d\u6709\u5bf9\u5e94\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u8fd0\u884c\u8be5\u6587\u4ef6\u5373\u53ef\uff0c\u5e38\u7528\u6267\u884c\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a</p> <p>\u6267\u884c\u65b9\u5f0f1\uff1a</p> <pre><code>./bazel-bin/demo_pkg/hello\n</code></pre> <p>\u6267\u884c\u65b9\u5f0f2\uff1a</p> <pre><code>bazel run demo_pkg:hello\n</code></pre> <p>\u8fd0\u884c\u7ed3\u679c\uff1a\u5728\u7ec8\u7aef\u8f93\u51fa\u6587\u672c hello world\u3002</p> <p>\u4e24\u79cd\u6267\u884c\u65b9\u5f0f\u6bd4\u8f83\uff0c\u65b9\u5f0f1\u53ea\u662f\u6267\u884c\uff0c\u540e\u8005\u65e2\u7f16\u8bd1\u53c8\u6267\u884c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#2-python","title":"2. Python\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#1project_1","title":"1.\u65b0\u5efaproject\u76ee\u5f55","text":"<p>\u53c2\u8003 C++ \u5b9e\u73b0\uff0c\u6216\u8005\u53ef\u4ee5\u76f4\u63a5\u590d\u7528 C++ \u5b9e\u73b0\uff0c\u672c\u5904\u91c7\u7528\u540e\u8005\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#2_1","title":"2.\u65b0\u5efa\u5305\u76ee\u5f55","text":"<p>\u53c2\u8003 C++ \u5b9e\u73b0\uff0c\u6216\u8005\u53ef\u4ee5\u76f4\u63a5\u590d\u7528 C++ \u5b9e\u73b0\uff0c\u672c\u5904\u91c7\u7528\u540e\u8005\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#3_1","title":"3.\u65b0\u5efa\u6e90\u6587\u4ef6","text":"<p>\u5728 demo_pkg \u76ee\u5f55\u4e0b\u65b0\u5efa python \u6e90\u6587\u4ef6 hello_world_py.py\uff0c\u7f16\u5199\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#!/usr/bin/env python3\n\nif __name__ == \"__main__\":\n    print(\"hello world (py)\")\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#4build_1","title":"4.\u7f16\u8f91BUILD\u6587\u4ef6","text":"<p>\u7f16\u8f91BUILD\u6587\u4ef6\uff0c\u7f16\u5199\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>py_binary(\n    name = \"hello_world_py\",\n    srcs = [\"hello_world_py.py\"],\n)\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>name \u53ef\u6267\u884c\u6587\u4ef6</li> <li>srcs \u6e90\u6587\u4ef6</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#5_1","title":"5.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e0b\u5148\u8fdb\u5165\u9879\u76ee\u76ee\u5f55\uff0c\u4e5f\u5373pro1_helloworld\uff0c\u5e38\u7528\u7f16\u8bd1\u65b9\u5f0f\u6709\u4e24\u79cd\u3002</p> <p>\u7f16\u8bd1\u65b9\u5f0f1\uff1a</p> <pre><code>bazel build //demo_pkg/...\n</code></pre> <p>\u4e0a\u8ff0\u547d\u4ee4\u662f\u6307\u7f16\u8bd1 demo_pkg \u5305\u4e0b\u7684\u6240\u6709\u7a0b\u5e8f\uff0c\u201c//\u201d \u6307\u4ee3\u9879\u76ee\u6839\u76ee\u5f55\\(\u4e5f\u5373pro1\\_helloworld\\)\uff0c\u6216\u8005\u4e5f\u53ef\u4ee5\u4e0d\u4f7f\u7528\"//\"\u3002</p> <p>\u7f16\u8bd1\u65b9\u5f0f2\uff1a</p> <pre><code>bazel build //demo_pkg:hello_world_py\n</code></pre> <p>\u4e0a\u8ff0\u547d\u4ee4\u662f\u6307\u7f16\u8bd1 demo_pkg \u5305\u4e0b\u540d\u4e3a hello_world_py\uff08\u9700\u8981\u53c2\u8003 BUILD \u6587\u4ef6\uff09 \u7684\u7a0b\u5e8f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel-ji-ben-shi-yong-liu-cheng/#6_1","title":"6.\u6267\u884c","text":"<p>\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u5728 pro1_helloworld \u76ee\u4e2d\uff0c\u4f1a\u751f\u6210\u4e00\u4e9b\u4e2d\u95f4\u6587\u4ef6\uff0c\u5176\u4e2d bazel-bin \u4e2d\u6709\u5bf9\u5e94\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u8fd0\u884c\u8be5\u6587\u4ef6\u5373\u53ef\uff0c\u5e38\u7528\u6267\u884c\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a</p> <p>\u6267\u884c\u65b9\u5f0f1\uff1a</p> <pre><code>./bazel-bin/demo_pkg/hello_world_py\n</code></pre> <p>\u6267\u884c\u65b9\u5f0f2\uff1a</p> <pre><code>bazel run demo_pkg:hello_world_py\n</code></pre> <p>\u8fd0\u884c\u7ed3\u679c\uff1a\u5728\u7ec8\u7aef\u8f93\u51fa\u6587\u672c hello world \\(py\\)\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/","title":"151 bazel","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#152-bazel","title":"1.5.2 Bazel \u4f7f\u7528\u4e4b\u5e93\u4f9d\u8d56","text":"<p>\u672c\u90e8\u5206\u5185\u5bb9\u4e3b\u8981\u4ecb\u7ecdBazel\u4e2d\u7684\u5e93\u4f9d\u8d56\u8bed\u6cd5\uff0c\u5305\u542b\u540c\u5305\u4e0b\u7684\u5e93\u4f9d\u8d56\uff0c\u4ee5\u53ca\u8de8\u5305\u5e93\u4f9d\u8d56\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#1","title":"1. \u7f16\u5199\u88ab\u4f9d\u8d56\u5e93\u5b9e\u73b0","text":"<p>\u9996\u5148\u9700\u8981\u5b9e\u73b0\u88ab\u4f9d\u8d56\u7684\u5e93\u7684\u76f8\u5173\u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#1project","title":"1.\u65b0\u5efaproject\u76ee\u5f55","text":"<p>\u5728demo_base_bazel \u76ee\u5f55\u4e0b\u65b0\u5efa\u76ee\u5f55 pro2_lib\uff0c\u518d\u5728 pro2_lib \u76ee\u5f55\u4e0b\u65b0\u5efaWORKSPACE \u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#2","title":"2.\u65b0\u5efa\u5305\u76ee\u5f55","text":"<p>\u5728 pro2_lib \u76ee\u5f55\u4e0b\u65b0\u5efa demo_lib \u76ee\u5f55\uff0c\u8be5\u76ee\u5f55\u4e0b\u65b0\u5efa BUILD \u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#3","title":"3.\u65b0\u5efa\u5934\u6587\u4ef6\u4e0e\u6e90\u6587\u4ef6","text":"<p>\u5728 demo_lib \u76ee\u5f55\u4e0b\u65b0\u5efa c++ \u5934\u6587\u4ef6 hello_great.h\uff0c\u7f16\u5199\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#ifndef LIB_HELLO_GREAT_H\n#define LIB_HELLO_FREAT_H\n\n#include &lt;string&gt;\nstd::string get_great(const std::string&amp; name);\n\n#endif\n</code></pre> <p>\u5728 demo_lib \u76ee\u5f55\u4e0b\u65b0\u5efa c++ \u5934\u6587\u4ef6 hello_great.cc\uff0c\u7f16\u5199\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#include \"hello_great.h\"\n\nstd::string get_great(const std::string&amp; name){\n    return \"hello \" + name;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#4build","title":"4.\u7f16\u8f91BUILD\u6587\u4ef6","text":"<p>\u7f16\u8f91BUILD\u6587\u4ef6\uff0c\u7f16\u5199\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>cc_library(\n    name = \"hello_great\",\n    srcs = [\"hello_great.cc\"],\n    hdrs = [\"hello_great.h\"],\n)\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>name \u5e93\u6587\u4ef6</li> <li>srcs \u6e90\u6587\u4ef6</li> <li>hdrs \u5934\u6587\u4ef6</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#5","title":"5.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165 pro2_lib \u76ee\u5f55\uff0c\u6267\u884c\uff1a</p> <pre><code>bazel build //demo_lib/...\n</code></pre> <p>\u6216</p> <pre><code>bazel build //demo_lib:hello_great\n</code></pre> <p>\u5728\u5f53\u524d\u9879\u76ee\u7684 bazel-bin/demo_lib \u76ee\u5f55\u4e0b\u5c06\u751f\u6210\u76f8\u5173\u7684\u5e93\u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#2_1","title":"2. \u540c\u5305\u4e0b\u7684\u5e93\u4f9d\u8d56","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#1c","title":"1.\u7f16\u5199C++\u6e90\u6587\u4ef6","text":"<p>\u627f\u4e0a\uff0c\u5728 demo_lib \u76ee\u5f55\u4e2d\u65b0\u5efa hello_world.cc\uff0c\u9700\u8981\u5305\u542b hello_great.h \u5e76\u8c03\u7528\u5934\u6587\u4ef6\u4e2d\u7684 get_great \u51fd\u6570\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include \"hello_great.h\"\nusing namespace std;\nint main(int argc, char const *argv[])\n{\n    cout &lt;&lt; get_great(\"bazel lib\") &lt;&lt; endl;\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#2build","title":"2.\u7f16\u8f91BUILD\u6587\u4ef6","text":"<p>\u5728 BUILD \u6587\u4ef6\u4e2d\u8ffd\u52a0\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>cc_binary(\n    name = \"hello_world\",\n    srcs = [\"hello_world.cc\"],\n    deps = [\":hello_great\"],\n)\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>deps \u4f9d\u8d56\u9879</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#3_1","title":"3.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165 pro2_lib \u76ee\u5f55\uff0c\u6267\u884c\uff1a</p> <pre><code>bazel build //demo_lib/...\n</code></pre> <p>\u6216</p> <pre><code>bazel build //demo_lib:hello_world\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#4","title":"4.\u6267\u884c","text":"<p>\u6267\u884c\u547d\u4ee4\uff1a</p> <pre><code>./bazel-bin/demo_lib/hello_world\n</code></pre> <p>\u6216</p> <pre><code>bazel run //demo_lib:hello_world\n</code></pre> <p>\u7ec8\u7aef\u5c06\u8f93\u51fa\u6587\u672c\uff1ahello bazel lib \u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#3_2","title":"3. \u8de8\u5305\u5e93\u4f9d\u8d56","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#1_1","title":"1.\u65b0\u5efa\u5305","text":"<p>\u57fa\u4e8e3.1\uff0c\u5728 pro2_lib \u4e0b\u65b0\u5efa\u5305\uff1ademo_main\uff0c\u5305\u4e0b\u65b0\u5efaBUILD \u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#2c","title":"2.\u65b0\u5efaC++\u6e90\u6587\u4ef6","text":"<p>\u5728\u5305 demo_main \u4e2d\u65b0\u5efa hello_world.cc \u6587\u4ef6\uff0c\u9700\u8981\u5305\u542b hello_great.h \u5e76\u8c03\u7528\u5934\u6587\u4ef6\u4e2d\u7684 get_great \u51fd\u6570\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include \"demo_lib/hello_great.h\"\nusing namespace std;\nint main(int argc, char const *argv[])\n{\n    cout &lt;&lt; get_great(\"bazel lib\") &lt;&lt; endl;\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#3build","title":"3.\u7f16\u8f91BUILD\u6587\u4ef6","text":"<p>BUILD \u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>cc_binary(\n    name = \"hello_world\",\n    srcs = [\"hello_world.cc\"],\n    deps = [\"//demo_lib:hello_great\"],\n)\n</code></pre> <p>\u53e6\u5916\uff0c\u8fd8\u9700\u8981\u4e3a demo_lib \u5305\u6dfb\u52a0\u53ef\u8bbf\u95ee\u6743\u9650\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7f16\u8bd1\u5931\u8d25\uff0c\u4fee\u6539 demo_lib/BUILD \u6587\u4ef6\u3002</p> <p>\u65b9\u5f0f1\uff1a\u5728 demo_lib/BUILD \u6587\u4ef6\u4e2d\u6dfb\u52a0\u51fd\u6570\uff1a</p> <pre><code>package(default_visibility = [\"//visibility:public\"])\n</code></pre> <p>\u65b9\u5f0f2\uff1a\u4fee\u6539 cc_library \u51fd\u6570\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>cc_library(\n    name = \"hello_great\",\n    srcs = [\"hello_great.cc\"],\n    hdrs = [\"hello_great.h\"],\n    visibility = [\"//demo_main:__pkg__\"]\n)\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>visiility \u8bbe\u7f6e\u53ef\u89c1\u5ea6\\(\u6743\u9650\\)</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#4_1","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165 pro2_lib \u76ee\u5f55\uff0c\u6267\u884c\u547d\u4ee4\uff1a</p> <pre><code>bazel build //demo_main/...\n</code></pre> <p>\u6216</p> <pre><code>bazel build //demo_main:hello_world\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/151-bazel/#5_1","title":"5.\u6267\u884c","text":"<p>\u6267\u884c\u547d\u4ee4\uff1a</p> <pre><code>./bazel-bin/demo_main/hello_world\n</code></pre> <p>\u6216</p> <pre><code>bazel run //demo_main:hello_world\n</code></pre> <p>\u7ec8\u7aef\u5c06\u8f93\u51fa\u6587\u672c\uff1ahello bazel lib \u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/152-protobuf/","title":"152 protobuf","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/152-protobuf/#152-protobuf","title":"1.5.2 protobuf","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/152-protobuf/#21-proto","title":"2.1 \u521b\u5efa proto \u6587\u4ef6","text":"<p>\u5728 /apollo/cyber \u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6\u5939 demo_base_proto\uff0c\u6587\u4ef6\u5939\u4e0b\u65b0\u5efa\u6587\u4ef6 student.proto\uff0c\u5e76\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>// \u4f7f\u7528\u7684 proto \u7248\u672c, Cyber RT \u4e2d\u76ee\u524d\u4f7f\u7528\u7684\u662f proto2\nsyntax = \"proto2\";\n//\u5305\npackage apollo.cyber.demo_base_proto;\n\n//\u6d88\u606f --- message \u662f\u5173\u952e\u5b57\uff0cStudent \u6d88\u606f\u540d\u79f0\nmessage Student {\n    //\u5b57\u6bb5\n    //\u5b57\u6bb5\u683c\u5f0f: \u5b57\u6bb5\u89c4\u5219 \u6570\u636e\u7c7b\u578b \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7f16\u53f7\n    required string name = 1;\n    optional uint64 age = 2;\n    optional double height = 3;\n    repeated string books = 4;\n}\n</code></pre> <p>proto \u4e2d\u7684\u5b57\u6bb5\u8bed\u6cd5\uff0c\u5b57\u6bb5\u5c31\u683c\u5f0f\u800c\u8a00\u4e3b\u8981\u6709\u56db\u90e8\u5206\u7ec4\u6210\uff1a</p> <ul> <li>\u5b57\u6bb5\u89c4\u5219</li> <li>\u6570\u636e\u7c7b\u578b</li> <li>\u5b57\u6bb5\u540d\u79f0</li> <li>\u5b57\u6bb5\u7f16\u53f7</li> </ul> <p>1.\u5b57\u6bb5\u89c4\u5219</p> <p>\u5b57\u6bb5\u7c7b\u578b\u4e3b\u8981\u6709\u5982\u4e0b\u4e09\u79cd\uff1a</p> <ul> <li> <p>required \u2014\u2014 \u8c03\u7528\u65f6\uff0c\u5fc5\u987b\u63d0\u4f9b\u8be5\u5b57\u6bb5\u7684\u503c\uff0c\u5426\u5219\u8be5\u6d88\u606f\u5c06\u88ab\u89c6\u4e3a\u201c\u672a\u521d\u59cb\u5316\u201d\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u5f53\u9700\u8981\u628a\u5b57\u6bb5\u4fee\u6539\u4e3a\u5176\u4ed6\u89c4\u5219\u65f6\uff0c\u4f1a\u5b58\u5728\u517c\u5bb9\u6027\u95ee\u9898\u3002</p> </li> <li> <p>optional \u2014\u2014 \u8c03\u7528\u65f6\u8be5\u5b57\u6bb5\u7684\u503c\u53ef\u4ee5\u8bbe\u7f6e\u4e5f\u53ef\u4ee5\u4e0d\u8bbe\u7f6e\uff0c\u4e0d\u8bbe\u7f6e\u65f6\uff0c\u4f1a\u6839\u636e\u6570\u636e\u7c7b\u578b\u751f\u6210\u9ed8\u8ba4\u503c\u3002</p> </li> <li> <p>repeated \u2014\u2014 \u8be5\u89c4\u5219\u5b57\u6bb5\u53ef\u4ee5\u4ee5\u52a8\u6001\u6570\u7ec4\u7684\u65b9\u5f0f\u5b58\u50a8\u591a\u4e2a\u6570\u636e\u3002</p> </li> </ul> <p>2.\u6570\u636e\u7c7b\u578b</p> <p>protobuf \u4e2d\u7684\u6570\u636e\u7c7b\u578b\u4e0e\u4e0d\u540c\u7684\u7f16\u7a0b\u8bed\u8a00\u5b58\u5728\u4e00\u5b9a\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u5177\u4f53\u53ef\u53c2\u8003\u5b98\u65b9\u8d44\u6599\uff0c\u5982\u4e0b\uff1a</p> <p>3.\u5b57\u6bb5\u540d\u79f0</p> <p>\u5b57\u6bb5\u540d\u79f0\u5c31\u662f\u53d8\u91cf\u540d\uff0c\u5176\u547d\u540d\u89c4\u5219\u53c2\u8003C++\u4e2d\u7684\u53d8\u91cf\u540d\u547d\u540d\u89c4\u5219\u5373\u53ef\u3002</p> <p>4.\u5b57\u6bb5\u7f16\u53f7</p> <p>\u6bcf\u4e2a\u5b57\u6bb5\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7f16\u53f7\uff0c\u7528\u4e8e\u5728\u6d88\u606f\u7684\u4e8c\u8fdb\u5236\u683c\u5f0f\u4e2d\u6807\u8bc6\u5b57\u6bb5\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/152-protobuf/#22-c-proto","title":"2.2 C++ \u4e2d\u8c03\u7528 proto","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/152-protobuf/#_1","title":"152 protobuf","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/15-zhun-bei-1-bazel/152-protobuf/#23-python-proto","title":"2.3 Python \u4e2d\u8c03\u7528 proto","text":"<p>\u5173\u4e8e\u66f4\u591a protobuf \u7684\u4f7f\u7528\u4e0e\u4ecb\u7ecd\u8bf7\u53c2\u8003\u5b98\u7f51\uff1ahttps://developers.google.com/protocol-buffers</p> <p>BUILD \u8865\u9f50\u63d2\u4ef6</p> <p>\u81ea\u5b9a\u4e49\u7684 python \u5bfc\u5165\u65e0\u63d0\u793a\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/161-protoshi-yong-zhi-wen-jian-chuang-jian/","title":"161 protoshi yong zhi wen jian chuang jian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/161-protoshi-yong-zhi-wen-jian-chuang-jian/#161-proto","title":"1.6.1 proto\u4f7f\u7528\u4e4b\u6587\u4ef6\u521b\u5efa","text":"<p>\u672c\u8282\u4f1a\u4ecb\u7ecd\u5982\u4f55\u521b\u5efa proto \u6587\u4ef6\u5e76\u751f\u6210\u53ef\u88ab C++ \u548c Python \u76f4\u63a5\u8c03\u7528\u7684\u6e90\u7801\u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/161-protoshi-yong-zhi-wen-jian-chuang-jian/#1-proto","title":"1. \u521b\u5efa proto \u6587\u4ef6","text":"<p>\u5728 /apollo/cyber \u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6\u5939 demo_base_proto\uff0c\u6587\u4ef6\u5939\u4e0b\u65b0\u5efa\u6587\u4ef6 student.proto\uff0c\u5e76\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>// \u4f7f\u7528\u7684 proto \u7248\u672c, Cyber RT \u4e2d\u76ee\u524d\u4f7f\u7528\u7684\u662f proto2\nsyntax = \"proto2\";\n//\u5305\npackage apollo.cyber.demo_base_proto;\n\n//\u6d88\u606f --- message \u662f\u5173\u952e\u5b57\uff0cStudent \u6d88\u606f\u540d\u79f0\nmessage Student {\n    //\u5b57\u6bb5\n    //\u5b57\u6bb5\u683c\u5f0f: \u5b57\u6bb5\u89c4\u5219 \u6570\u636e\u7c7b\u578b \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7f16\u53f7\n    required string name = 1;\n    optional uint64 age = 2;\n    optional double height = 3;\n    repeated string books = 4;\n}\n</code></pre> <p>proto \u4e2d\u7684\u5b57\u6bb5\u8bed\u6cd5\uff0c\u5b57\u6bb5\u5c31\u683c\u5f0f\u800c\u8a00\u4e3b\u8981\u6709\u56db\u90e8\u5206\u7ec4\u6210\uff1a\u5b57\u6bb5\u89c4\u5219\u3001\u6570\u636e\u7c7b\u578b\u3001\u5b57\u6bb5\u540d\u79f0\u3001\u5b57\u6bb5\u7f16\u53f7\uff0c\u63a5\u4e0b\u6765\u5206\u522b\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u56db\u79cd\u683c\u5f0f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/161-protoshi-yong-zhi-wen-jian-chuang-jian/#1","title":"1.\u5b57\u6bb5\u89c4\u5219","text":"<p>\u5b57\u6bb5\u7c7b\u578b\u4e3b\u8981\u6709\u5982\u4e0b\u4e09\u79cd\uff1a</p> <ul> <li> <p>required \u2014\u2014 \u8c03\u7528\u65f6\uff0c\u5fc5\u987b\u63d0\u4f9b\u8be5\u5b57\u6bb5\u7684\u503c\uff0c\u5426\u5219\u8be5\u6d88\u606f\u5c06\u88ab\u89c6\u4e3a\u201c\u672a\u521d\u59cb\u5316\u201d\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u5f53\u9700\u8981\u628a\u5b57\u6bb5\u4fee\u6539\u4e3a\u5176\u4ed6\u89c4\u5219\u65f6\uff0c\u4f1a\u5b58\u5728\u517c\u5bb9\u6027\u95ee\u9898\u3002</p> </li> <li> <p>optional \u2014\u2014 \u8c03\u7528\u65f6\u8be5\u5b57\u6bb5\u7684\u503c\u53ef\u4ee5\u8bbe\u7f6e\u4e5f\u53ef\u4ee5\u4e0d\u8bbe\u7f6e\uff0c\u4e0d\u8bbe\u7f6e\u65f6\uff0c\u4f1a\u6839\u636e\u6570\u636e\u7c7b\u578b\u751f\u6210\u9ed8\u8ba4\u503c\u3002</p> </li> <li> <p>repeated \u2014\u2014 \u8be5\u89c4\u5219\u5b57\u6bb5\u53ef\u4ee5\u4ee5\u52a8\u6001\u6570\u7ec4\u7684\u65b9\u5f0f\u5b58\u50a8\u591a\u4e2a\u6570\u636e\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/161-protoshi-yong-zhi-wen-jian-chuang-jian/#2","title":"2.\u6570\u636e\u7c7b\u578b","text":"<p>protobuf \u4e2d\u7684\u6570\u636e\u7c7b\u578b\u4e0e\u4e0d\u540c\u7684\u7f16\u7a0b\u8bed\u8a00\u5b58\u5728\u4e00\u5b9a\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u5177\u4f53\u53ef\u53c2\u8003\u5b98\u65b9\u8d44\u6599\uff0c\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/161-protoshi-yong-zhi-wen-jian-chuang-jian/#3","title":"3.\u5b57\u6bb5\u540d\u79f0","text":"<p>\u5b57\u6bb5\u540d\u79f0\u5c31\u662f\u53d8\u91cf\u540d\uff0c\u5176\u547d\u540d\u89c4\u5219\u53c2\u8003C++\u4e2d\u7684\u53d8\u91cf\u540d\u547d\u540d\u89c4\u5219\u5373\u53ef\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/161-protoshi-yong-zhi-wen-jian-chuang-jian/#4","title":"4.\u5b57\u6bb5\u7f16\u53f7","text":"<p>\u6bcf\u4e2a\u5b57\u6bb5\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7f16\u53f7\uff0c\u7528\u4e8e\u5728\u6d88\u606f\u7684\u4e8c\u8fdb\u5236\u683c\u5f0f\u4e2d\u6807\u8bc6\u5b57\u6bb5\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/161-protoshi-yong-zhi-wen-jian-chuang-jian/#2-proto","title":"2. proto\u6587\u4ef6\u7f16\u8bd1","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/161-protoshi-yong-zhi-wen-jian-chuang-jian/#1build","title":"1.\u7f16\u8f91BUILD\u6587\u4ef6","text":"<p>\u5728 demo_base_proto \u76ee\u5f55\u4e0b\u65b0\u5efa BUILD \u6587\u4ef6\uff0c\u5e76\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>load(\"//tools:python_rules.bzl\", \"py_proto_library\")\npackage(default_visibility = [\"//visibility:public\"])\nproto_library(\n    name = \"student_proto\",\n    srcs = [\"student.proto\"]\n)\n\ncc_proto_library(\n    name = \"student_cc\",\n    deps = [\":student_proto\"]\n)\n\npy_proto_library(\n    name = \"student_py\",\n    deps = [\":student_proto\"]\n)\n</code></pre> <p>\u4ee3\u7801\u89e3\u91ca\uff1a</p> <p>1.proto_library \u51fd\u6570</p> <p>\u8be5\u51fd\u6570\u7528\u4e8e\u751f\u6210 proto \u6587\u4ef6\u5bf9\u5e94\u7684\u5e93\uff0c\u8be5\u5e93\u88ab\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u521b\u5efa\u4f9d\u8d56\u5e93\u65f6\u6240\u4f9d\u8d56\u3002</p> <p>\u53c2\u6570\uff1a</p> <ul> <li>name  \u76ee\u6807\u540d\u79f0</li> <li>srcs  proto\u6587\u4ef6</li> </ul> <p>2.cc_proto_library \u51fd\u6570</p> <p>\u8be5\u51fd\u6570\u7528\u4e8e\u751f\u6210C++\u76f8\u5173\u7684proto\u4f9d\u8d56\u5e93\u3002</p> <p>\u53c2\u6570\uff1a</p> <ul> <li>name \u76ee\u6807\u540d\u79f0</li> <li>deps \u4f9d\u8d56\u7684proto \u5e93\u540d\u79f0</li> </ul> <p>3.py_proto_library \u51fd\u6570</p> <p>\u8be5\u51fd\u6570\u7528\u4e8e\u751f\u6210Python\u76f8\u5173\u7684proto\u4f9d\u8d56\u5e93\u3002</p> <p>\u53c2\u6570\uff1a</p> <ul> <li>name \u76ee\u6807\u540d\u79f0</li> <li>deps \u4f9d\u8d56\u7684proto \u5e93\u540d\u79f0</li> </ul> <p>\u6ce8\u610f\uff1a</p> <ol> <li>\u4f7f\u7528py_proto_library \u5fc5\u987b\u58f0\u660e load\\(\"//tools:python\\_rules.bzl\", \"py\\_proto\\_library\"\\)\u3002</li> <li>proto_library \u51fd\u6570\u7684\u53c2\u6570 name \u503c\u5fc5\u987b\u540e\u7f00 _proto \u5426\u5219\uff0cpython\u8c03\u7528\u65f6\u4f1a\u629b\u51fa\u5f02\u5e38\u3002</li> <li>\u4e3a\u4e86\u65b9\u4fbf\u540e\u671f\u4f7f\u7528\uff0c\u5efa\u8bae\u5148\u6dfb\u52a0\u8bed\u53e5\uff1apackage\\(default\\_visibility = \\[\"//visibility:public\"\\]\\)\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/161-protoshi-yong-zhi-wen-jian-chuang-jian/#2_1","title":"2.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165 /apollo \u76ee\u5f55\uff0c\u6267\u884c\u7f16\u8bd1\u547d\u4ee4\uff1a</p> <pre><code>bazel build cyber/demo_base_proto/...\n</code></pre> <p>\u5728 /apollo/bazel-bin/cyber/demo_base_proto \u4e0b\u5c06\u751f\u6210\u53ef\u4ee5\u88abC++\u548cPython\u8c03\u7528\u7684\u4e2d\u95f4\u6587\u4ef6\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/162-protoshi-yong-zhi-du-xie-cao-zuo/","title":"162 protoshi yong zhi du xie cao zuo","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/162-protoshi-yong-zhi-du-xie-cao-zuo/#162-protoc","title":"1.6.2 proto\u8bfb\u5199\u4e4bC++\u5b9e\u73b0","text":"<p>\u672c\u8282\u5c06\u4ecb\u7ecd\u5982\u4f55\u5728 C++ \u4e2d\u5b9e\u73b0 proto \u7684\u8bfb\u5199\u64cd\u4f5c\u3002</p> <p>\u5927\u81f4\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u5199 C++ \u6e90\u6587\u4ef6\uff1b</li> <li>\u914d\u7f6e BUILD \u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/162-protoshi-yong-zhi-du-xie-cao-zuo/#1-c","title":"1.\u7f16\u5199 C++ \u6e90\u6587\u4ef6","text":"<p>\u5728 demo_base_proto \u76ee\u5f55\u4e0b\u65b0\u5efa test_student.cc \u6587\u4ef6\uff0c\u8f93\u5165\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>/*  \n    \u6f14\u793a C++\u4e2d protobuf \u7684\u57fa\u672c\u8bfb\u5199\u4f7f\u7528\n*/\n#include \"cyber/demo_base_proto/student.pb.h\"\n\nint main(int argc, char const *argv[])\n{\n    //\u521b\u5efa\u5bf9\u8c61\n    apollo::cyber::demo_base_proto::Student stu;\n    //\u6570\u636e\u5199\n    stu.set_name(\"zhangsan\");\n    stu.set_age(18);\n    stu.set_height(1.75);\n    stu.add_books(\"yuwen\");\n    stu.add_books(\"c++\");\n    stu.add_books(\"Python\");\n\n    //\u6570\u636e\u8bfb\n    std::string name = stu.name();\n    uint64_t age = stu.age();\n    double height = stu.height();\n    std::cout &lt;&lt; name &lt;&lt; \" == \" &lt;&lt; age &lt;&lt; \" == \" &lt;&lt; height &lt;&lt; \" == \"; \n    for (int i = 0; i &lt; stu.books_size(); i++)\n    {\n        std::cout &lt;&lt; stu.books(i) &lt;&lt; \"-\";\n    }\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p>\u4ee3\u7801\u89e3\u91ca\uff1a</p> <p>proto \u6587\u4ef6\u751f\u6210\u7684\u5bf9\u5e94\u7684 C++ \u6e90\u7801\u4e2d\uff0c\u5b57\u6bb5\u7684\u8bbe\u7f6e\u4e0e\u83b7\u53d6\u6709\u5176\u9ed8\u8ba4\u89c4\u5219\uff1a</p> <ol> <li>\u5982\u679c\u662f\u975e repeated \u89c4\u5219\u7684\u5b57\u6bb5\uff1a\u90a3\u4e48\u5b57\u6bb5\u503c\u7684\u8bbe\u7f6e\u51fd\u6570\u5bf9\u5e94\u7684\u683c\u5f0f\u4e3a\uff1aset_xxx\\(value\\)\uff0c\u83b7\u53d6\u51fd\u6570\u5bf9\u5e94\u7684\u683c\u5f0f\u4e3axxx()\u3002</li> <li>\u5982\u679c\u662f repeated \u89c4\u5219\u7684\u5b57\u6bb5\uff1a\u90a3\u4e48\u5b57\u6bb5\u503c\u7684\u8bbe\u7f6e\u51fd\u6570\u5bf9\u5e94\u7684\u683c\u5f0f\u4e3a\uff1aadd_xxx()\uff0c\u83b7\u53d6\u51fd\u6570\u5bf9\u5e94\u7684\u683c\u5f0f\u4e3axxx\\(\u7d22\u5f15\\)\uff0c\u53e6\u5916\u8fd8\u53ef\u4ee5\u901a\u8fc7\u51fd\u6570 xxx_size() \u83b7\u53d6\u6570\u7ec4\u4e2d\u5143\u7d20\u7684\u4e2a\u6570\u3002</li> </ol> <p>\u5176\u4e2d xxx \u4e3a\u5b57\u6bb5\u540d\u79f0\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/162-protoshi-yong-zhi-du-xie-cao-zuo/#2-build","title":"2.\u914d\u7f6e BUILD \u6587\u4ef6","text":"<p>BUILD \u6587\u4ef6\u8ffd\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>cc_binary(\n    name = \"test_student\",\n    srcs = [\"test_student.cc\"],\n    deps = [\":student_cc\"],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/162-protoshi-yong-zhi-du-xie-cao-zuo/#3","title":"3.\u7f16\u8bd1","text":"<p>\u8fd0\u884c\u5982\u4e0b\u7f16\u8bd1\u547d\u4ee4\uff1a</p> <pre><code>bazel build cyber/demo_base_proto/...\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/162-protoshi-yong-zhi-du-xie-cao-zuo/#4","title":"4.\u6267\u884c","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>./bazel-bin/cyber/demo_base_proto/test_student\n</code></pre> <p>\u7ec8\u7aef\u8f93\u51fa\u7ed3\u679c\uff1azhangsan == 18 == 1.75 == yuwen-c++-Python-</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/163-protodu-xie-zhi-python-shi-xian/","title":"163 protodu xie zhi python shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/163-protodu-xie-zhi-python-shi-xian/#163-protopython","title":"1.6.3 proto\u8bfb\u5199\u4e4bPython\u5b9e\u73b0","text":"<p>\u672c\u8282\u5c06\u4ecb\u7ecd\u5982\u4f55\u5728 Python \u4e2d\u5b9e\u73b0 proto \u7684\u8bfb\u5199\u64cd\u4f5c\u3002</p> <p>\u5927\u81f4\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u5199 Python \u6e90\u6587\u4ef6\uff1b</li> <li>\u914d\u7f6e BUILD \u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/163-protodu-xie-zhi-python-shi-xian/#1-python","title":"1.\u7f16\u5199 Python \u6e90\u6587\u4ef6","text":"<p>\u5728 demo_base_proto \u76ee\u5f55\u4e0b\u65b0\u5efa test_student_py.py \u6587\u4ef6\uff0c\u8f93\u5165\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#!/usr/bin/env python3\n\"\"\"    \n    \u6f14\u793a Python\u4e2d protobuf \u7684\u57fa\u672c\u8bfb\u5199\u4f7f\u7528\n\"\"\"\nfrom cyber.demo_base_proto.student_pb2 import Student\n\nif __name__ == \"__main__\":\n    # \u521b\u5efa student \u5bf9\u8c61\n    stu = Student()\n    # \u5199\u6570\u636e\n    stu.name = \"zhangsan\"\n    stu.age = 18\n    stu.height = 1.80\n    stu.books.append(\"c++\")\n    stu.books.append(\"python\")\n    stu.books.append(\"Java\")\n\n    # \u8bfb\u6570\u636e\n    print(\"%s == %d == %.2f \" %(stu.name,stu.age,stu.height))\n    for book in stu.books:\n        print(book)\n</code></pre> <p>\u4ee3\u7801\u89e3\u91ca\uff1a</p> <p>proto \u6587\u4ef6\u751f\u6210\u7684\u5bf9\u5e94\u7684 Python \u6e90\u7801\u4e2d\uff0c\u5b57\u6bb5\u7684\u8bbe\u7f6e\u4e0e\u83b7\u53d6\u6709\u5176\u9ed8\u8ba4\u89c4\u5219\uff1a</p> <ol> <li>\u5982\u679c\u662f\u975e repeated \u89c4\u5219\u7684\u5b57\u6bb5\uff1a\u90a3\u4e48\u5b57\u6bb5\u64cd\u4f5c\u53ef\u4ee5\u4ee5\u5c5e\u6027\u7684\u65b9\u5f0f\u76f4\u63a5\u8bfb\u6216\u5199\u3002</li> <li>\u5982\u679c\u662f repeated \u89c4\u5219\u7684\u5b57\u6bb5\uff1a\u90a3\u4e48\u5b57\u6bb5\u53ef\u4ee5\u4ee5\u5217\u8868\u7684\u65b9\u5f0f\u8fdb\u884c\u64cd\u4f5c\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/163-protodu-xie-zhi-python-shi-xian/#2-build","title":"2.\u914d\u7f6e BUILD \u6587\u4ef6","text":"<p>BUILD \u6587\u4ef6\u8ffd\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>py_binary(\n    name = \"test_student_py\",\n    srcs = [\"test_student_py.py\"],\n    deps = [\":student_py\"],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/163-protodu-xie-zhi-python-shi-xian/#3","title":"3.\u7f16\u8bd1","text":"<p>\u8fd0\u884c\u5982\u4e0b\u7f16\u8bd1\u547d\u4ee4\uff1a</p> <pre><code>bazel build cyber/demo_base_proto/...\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/chapter1/16-ben-zhang-xiao-jie/163-protodu-xie-zhi-python-shi-xian/#4","title":"4.\u6267\u884c","text":"<p>\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>./bazel-bin/cyber/demo_base_proto/test_student_py\n</code></pre> <p>\u7ec8\u7aef\u8f93\u51fa\u7ed3\u679c\uff1a</p> <pre><code>zhangsan == 18 == 1.80 \nc++\npython\nJava\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/","title":"21 hua ti tong xin","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/#21","title":"2.1 \u8bdd\u9898\u901a\u4fe1","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/#_1","title":"\u6982\u5ff5","text":"<p>\u4ee5\u53d1\u5e03\u8ba2\u9605\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u6570\u636e\u4ea4\u4e92\u7684\u901a\u4fe1\u6a21\u5f0f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/#_2","title":"\u4f5c\u7528","text":"<p>\u7528\u4e8e\u4e0d\u65ad\u66f4\u65b0\u7684\u3001\u5c11\u903b\u8f91\u5904\u7406\u7684\u6570\u636e\u4f20\u8f93\u573a\u666f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/#_3","title":"\u9700\u6c42","text":"<p>\u5b9e\u73b0\u53d1\u5e03\u8ba2\u9605\u6a21\u578b\uff0c\u8981\u6c42\u53d1\u5e03\u65b9\u53ef\u4ee5\u5468\u671f\u6027\u7684\u5faa\u73af\u53d1\u9001\u5b66\u751f\u6d88\u606f\uff0c\u8ba2\u9605\u65b9\u53ef\u4ee5\u8ba2\u9605\u5230\u5b66\u751f\u6d88\u606f\uff0c\u5e76\u89e3\u6790\u5c06\u7ed3\u679c\u5728\u7ec8\u7aef\u8f93\u51fa\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/#_4","title":"\u6d41\u7a0b","text":"<p>\u5728\u5b9e\u73b0\u6d41\u7a0b\u4e0a\uff0cC++ \u548c Python \u5b9e\u73b0\u7684\u57fa\u672c\u4e00\u81f4\uff0c\u5927\u81f4\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u7f16\u5199\u6d88\u606f\u8f7d\u4f53\\(protobuf\u6587\u4ef6\\)\u5e76\u914d\u7f6e\uff1b</p> </li> <li> <p>\u7f16\u5199\u53d1\u5e03\u65b9\u5e76\u914d\u7f6e\uff1b</p> </li> <li> <p>\u7f16\u5199\u8ba2\u9605\u65b9\u5e76\u914d\u7f6e\uff1b</p> </li> <li> <p>\u7f16\u8bd1\u5e76\u6267\u884c\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/#_5","title":"\u51c6\u5907","text":"<p>\u9700\u8981\u5148\u51c6\u5907 protobuf \u6570\u636e\uff0c\u53ef\u4ee5\u76f4\u63a5\u590d\u7528 1.6.1 \u4e2d\u7684 student.proto \u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/","title":"22 fu wu tong xin","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/#22","title":"2.2 \u670d\u52a1\u901a\u4fe1","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/#_1","title":"\u6982\u5ff5","text":"<p>\u4ee5\u8bf7\u6c42\u54cd\u5e94\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u6570\u636e\u4ea4\u4e92\u7684\u901a\u4fe1\u6a21\u5f0f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/#_2","title":"\u4f5c\u7528","text":"<p>\u7528\u4e8e\u5076\u7136\u7684\u3001\u5bf9\u65f6\u65f6\u6027\u6709\u8981\u6c42\u3001\u6709\u4e00\u5b9a\u903b\u8f91\u5904\u7406\u9700\u6c42\u7684\u6570\u636e\u4f20\u8f93\u573a\u666f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/#_3","title":"\u9700\u6c42","text":"<p>\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u63d0\u4ea4\u4e24\u4e2a\u6574\u578b\u6570\u5b57\uff0c\u670d\u52a1\u7aef\u5904\u7406\u8bf7\u6c42\u63d0\u53d6\u4e24\u4e2a\u6570\u5b57\u6c42\u548c\uff0c\u5e76\u5c06\u7ed3\u679c\u54cd\u5e94\u56de\u5ba2\u6237\u7aef\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/#_4","title":"\u6d41\u7a0b","text":"<p>\u5728\u5b9e\u73b0\u6d41\u7a0b\u4e0a\uff0cC++ \u548c Python \u5b9e\u73b0\u7684\u57fa\u672c\u4e00\u81f4\uff0c\u5927\u81f4\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u7f16\u5199\u6d88\u606f\u8f7d\u4f53\\(protobuf\u6587\u4ef6\\)\u5e76\u914d\u7f6e\uff1b</p> </li> <li> <p>\u7f16\u5199\u53d1\u5e03\u65b9\u5e76\u914d\u7f6e\uff1b</p> </li> <li> <p>\u7f16\u5199\u8ba2\u9605\u65b9\u5e76\u914d\u7f6e\uff1b</p> </li> <li> <p>\u7f16\u8bd1\u5e76\u6267\u884c\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/#_5","title":"\u51c6\u5907","text":"<p>\u6211\u4eec\u9700\u8981\u5148\u51c6\u5907\u4f5c\u4e3a\u6570\u636e\u8f7d\u4f53\u7684 proto \u6587\u4ef6\uff0c\u5728demo_base_proto\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efa\u6587\u4ef6:addints.proto\uff0c\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>syntax = \"proto2\";\npackage apollo.cyber.demo_base_proto;\n\nmessage AddInts_Request {\n    required int64 num1 = 1;\n    required int64 num2 = 2;\n}\n\nmessage AddInts_Response {\n    required int64 sum = 1;\n}\n</code></pre> <p>\u4e0a\u8ff0\u6587\u4ef6\u4e2d\uff0c\u5305\u542b\u4e24\u79cd\u6d88\u606f\u7c7b\u578b\uff0cAddInts_Request \u662f\u7528\u4e8e\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u9001\u8bf7\u6c42\u7684\u6570\u636e\u7c7b\u578b\uff0cAddInts_Response \u662f\u7528\u4e8e\u670d\u52a1\u7aef\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u54cd\u5e94\u7684\u6570\u636e\u7c7b\u578b\u3002</p> <p>BUILD\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9:</p> <pre><code>proto_library(\n    name = \"addints_proto\",\n    srcs = [\"addints.proto\"]\n)\ncc_proto_library(\n    name = \"addints_proto_cc\",\n    deps = [\n        \":addints_proto\",\n    ],\n)\npy_proto_library(\n    name = \"addints_proto_py\",\n    deps = [\n        \":addints_proto\",\n    ],\n)\n</code></pre> <p>\u9a8c\u8bc1\u6587\u4ef6\u7f16\u5199\u662f\u5426\u6b63\u786e\uff0c\u5148\u7f16\u8bd1:</p> <pre><code>bazel build cyber/demo_base_proto/...\n</code></pre> <p>\u5982\u65e0\u5f02\u5e38\uff0c\u751f\u6210\u6d88\u606f\u76f8\u5173\u6587\u4ef6: addints.pb.h\u3001addints.pb.cc\u548caddints_pb2.py\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/","title":"23 can shu","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/#23","title":"2.3 \u53c2\u6570","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/#_1","title":"\u6982\u5ff5","text":"<p>\u4ee5\u5171\u4eab\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u6570\u636e\u4ea4\u4e92\u7684\u901a\u4fe1\u6a21\u5f0f\u3002</p> <p>\u53c2\u6570\u670d\u52a1\u5668\u662f\u57fa\u4e8e\u670d\u52a1\u5b9e\u73b0\u7684\uff0c\u5305\u542b\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7aef\uff0c\u670d\u52a1\u7aef\u8282\u70b9\u53ef\u4ee5\u5b58\u50a8\u6570\u636e\uff0c\u5ba2\u6237\u7aef\u8282\u70b9\u53ef\u4ee5\u8bbf\u95ee\u670d\u52a1\u7aef\u8282\u70b9\u64cd\u4f5c\u6570\u636e\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u867d\u7136\u57fa\u4e8e\u8bf7\u6c42\u54cd\u5e94\u7684\uff0c\u4f46\u662f\u65e0\u9700\u81ea\u5df1\u5b9e\u73b0\u8bf7\u6c42\u4e0e\u54cd\u5e94\uff0c\u6b64\u8fc7\u7a0b\u5df2\u7ecf\u88ab\u5c01\u88c5\uff0c\u8c03\u7528\u8005\u53ea\u9700\u8981\u901a\u8fc7\u6bd4\u8f83\u7b80\u5355\u53cb\u597d\u7684API\u5c31\u53ef\u4ee5\u5b9e\u73b0\u53c2\u6570\u64cd\u4f5c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/#_2","title":"\u4f5c\u7528","text":"<p>\u5b58\u50a8\u4e00\u4e9b\u591a\u8282\u70b9\u5171\u4eab\u7684\u6570\u636e\uff0c\u7c7b\u4f3c\u4e8e\u5168\u5c40\u53d8\u91cf\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/#_3","title":"\u9700\u6c42","text":"<p>\u521b\u5efa\u4e24\u4e2a\u8282\u70b9A\u4e0eB\uff0c\u8282\u70b9A\u4f5c\u4e3a\u53c2\u6570\u670d\u52a1\u7aef\uff0c\u8282\u70b9B\u4f5c\u4e3a\u53c2\u6570\u5ba2\u6237\u7aef\uff0c\u5728\u8282\u70b9A\u5b58\u50a8\u6570\u636e\\(\u8f66\u8f86\u53c2\u6570\\)\uff0c\u8282\u70b9B\u64cd\u4f5c\u6570\u636e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/#_4","title":"\u6d41\u7a0b","text":"<p>\u5728\u5b9e\u73b0\u6d41\u7a0b\u4e0a\uff0cC++ \u548c Python \u5b9e\u73b0\u7684\u57fa\u672c\u4e00\u81f4\uff0c\u5927\u81f4\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u521b\u5efa\u53c2\u6570\u670d\u52a1\u5668\u670d\u52a1\u7aef</p> </li> <li> <p>\u521b\u5efa\u53c2\u6570\u670d\u52a1\u5668\u5ba2\u6237\u7aef</p> </li> <li> <p>\u7f16\u8bd1\u5e76\u6267\u884c</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/#_5","title":"\u53c2\u6570\u8bf4\u660e:","text":"<p>\u5173\u4e8e\u53c2\u6570\u6240\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b</p> <p>Cyber RT \u4e2d\u901a\u8fc7apollo::cyber::Parameter\u5c01\u88c5\u53c2\u6570\uff0c\u4e0b\u5217\u8868\u683c\u5217\u51fa\u4e86\u6240\u652f\u6301\u7684\u53c2\u6570\u7c7b\u578b\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684 C++ \u548c protobuf \u4e2d\u7684\u6570\u636e\u7c7b\u578b\u3002</p> Parameter type C++ data type protobuf data type apollo::cyber::proto::ParamType::INT int64_t int64 apollo::cyber::proto::ParamType::DOUBLE double double apollo::cyber::proto::ParamType::BOOL bool bool apollo::cyber::proto::ParamType::STRING std::string string apollo::cyber::proto::ParamType::PROTOBUF std::string string apollo::cyber::proto::ParamType::NOT_SET - - <p>\u9664\u4e86\u4e0a\u8ff0 5 \u79cd\u7c7b\u578b\u4e4b\u5916\uff0cParameter \u8fd8\u652f\u6301\u4ee5 protobuf \u5bf9\u8c61\u4f5c\u4e3a\u4f20\u5165\u53c2\u6570\u7684\u63a5\u53e3\u3002\u6267\u884c\u540e\u7684\u5e8f\u5217\u5316\u5904\u7406\u5bf9\u8c61\u5e76\u5c06\u5176\u8f6c\u6362\u4e3a STRING \u7c7b\u578b\u4ee5\u8fdb\u884c\u4f20\u8f93\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/","title":"24 zu jian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/#24","title":"2.4 \u7ec4\u4ef6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/#_1","title":"\u6982\u5ff5","text":"<p>\u7ec4\u4ef6\u662f Cyber\u200b\u200b RT \u63d0\u4f9b\u7684\u7528\u4e8e\u6784\u5efa\u5e94\u7528\u7a0b\u5e8f\u6a21\u5757\u7684\u57fa\u7c7b\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/#_2","title":"\u4f5c\u7528","text":"<p>\u6570\u636e\u8fc7\u6ee4\u3001\u878d\u5408\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/25-ben-zhang-xiao-jie/","title":"25 ben zhang xiao jie","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/25-ben-zhang-xiao-jie/#25","title":"2.5 \u672c\u7ae0\u5c0f\u7ed3","text":"<p>\u672c\u7ae0\u4e3b\u8981\u4ecb\u7ecd\u4e86 Cyber RT \u4e2d\u7684\u6838\u5fc3\u901a\u4fe1\u673a\u5236\u5b9e\u73b0\uff0c\u5305\u62ec\uff1a\u8bdd\u9898\u901a\u4fe1\u3001\u670d\u52a1\u901a\u4fe1\u3001\u53c2\u6570\u4e0e\u7ec4\u4ef6\u3002\u6bcf\u79cd\u901a\u4fe1\u673a\u5236\u90fd\u4ecb\u7ecd\u4e86\u5176\u5e94\u7528\u573a\u666f\u4e0e\u7f16\u7801\u5b9e\u73b0\uff0c\u5176\u4e2d\uff0c\u8bdd\u9898\u901a\u4fe1\u662f\u57fa\u4e8e\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684\uff0c\u670d\u52a1\u901a\u4fe1\u662f\u57fa\u4e8e\u8bf7\u6c42\u54cd\u5e94\u6a21\u5f0f\u7684\uff0c\u53c2\u6570\u5219\u5728\u670d\u52a1\u901a\u4fe1\u57fa\u7840\u4e0a\u7684\u8fdb\u4e00\u6b65\u5c01\u88c5\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u5171\u4eab\u6570\u636e\uff0c\u7ec4\u4ef6\u5219\u53ef\u4ee5\u7528\u4e8e\u6570\u636e\u7684\u8fc7\u6ee4\u3001\u878d\u5408\u7b49\u3002\u4e0a\u8ff0\u901a\u4fe1\u673a\u5236\u662f\u4e92\u4e3a\u8865\u5145\u7684\uff0c\u90fd\u6709\u5404\u81ea\u4f7f\u7528\u7684\u5e94\u7528\u573a\u666f\uff0c\u5e94\u7528\u65f6\u5e94\u6839\u636e\u5b9e\u9645\u7684\u5e94\u7528\u573a\u666f\u6309\u9700\u9009\u62e9\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/25-chang-yong-ming-ling/","title":"25 chang yong ming ling","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/25-chang-yong-ming-ling/#32","title":"3.2 \u5e38\u7528\u547d\u4ee4","text":"<p>\u901a\u8fc7\u524d\u9762\u5185\u5bb9\u7684\u5b66\u4e60\uff0c\u60f3\u5fc5\u5927\u5bb6\u5bf9\u901a\u4fe1\u672c\u8eab\u7684\u5b9e\u73b0\u6d41\u7a0b\u4ee5\u53ca\u76f8\u5173API\u6709\u4e00\u5b9a\u4e86\u89e3\u4e86\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u518d\u4ecb\u7ecd\u4e00\u4e0b\u901a\u4fe1\u5e94\u7528\u4e2d\u53ef\u80fd\u4f1a\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898\uff0c\u6bd4\u5982\uff1a</p> <ul> <li> <p>\u8c03\u8bd5\u65f6\u6211\u4eec\u5982\u4f55\u83b7\u53d6 Cyber RT \u4e2d\u8fd0\u884c\u7684\u8282\u70b9\u53ca\u5176\u76f8\u5173\u72b6\u6001\uff1f</p> </li> <li> <p>\u5f00\u53d1\u65f6\u6211\u7f16\u5199\u5b8c\u4e86\u53d1\u5e03\u8282\u70b9\uff0c\u5982\u4f55\u5feb\u901f\u9a8c\u8bc1\u8282\u70b9\u8fd0\u884c\u662f\u5426\u6b63\u5e38\u5462\uff1f</p> </li> <li> <p>\u5982\u4f55\u5224\u65ad\u6d88\u606f\u53d1\u5e03\u7684\u9891\u7387\u662f\u5426\u7b26\u5408\u9884\u671f\uff1f</p> </li> <li> <p>......</p> </li> </ul> <p>\u5728 Cyber RT \u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e9b\u547d\u4ee4\u5de5\u5177\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5feb\u6377\u7684\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c\u672c\u90e8\u5206\u5185\u5bb9\u5c31\u4e3b\u8981\u4ecb\u7ecd\u8fd9\u4e9b\u547d\u4ee4\u7684\u4f7f\u7528\uff0c\u5e38\u7528\u7684\u901a\u4fe1\u76f8\u5173\u547d\u4ee4\u5982\u4e0b\uff1a</p> <ol> <li>cyber_node\uff1b</li> <li>cyber_channel\uff1b</li> <li>cyber_service\uff1b</li> <li>cyber_launch\u3002</li> </ol> <p>\u5173\u4e8e\u547d\u4ee4\u7684\u4f7f\u7528\uff0c\u53ef\u4ee5\u67e5\u770b\u5176\u5185\u7f6e\u7684\u5e2e\u52a9\u6587\u6863\uff0c\u4ee5\u65b9\u4fbf\u5b66\u4e60\u4e0e\u5e94\u7528\uff0c\u83b7\u53d6\u4f7f\u7528\u8bf4\u660e\u7684\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <p>1.\u83b7\u53d6\u67d0\u4e2a\u6307\u4ee4\u7684\u4f7f\u7528\u8bf4\u660e\uff0c\u53ef\u4ee5\u8f93\u5165\u5982\u4e0b\u683c\u5f0f\u7684\u547d\u4ee4</p> <pre><code>cyber_xxx -h\n</code></pre> <p>2.\u83b7\u53d6\u67d0\u4e2a\u6307\u4ee4\u7684\u67d0\u4e2a\u53c2\u6570\u7684\u4f7f\u7528\u8bf4\u660e\uff0c\u53ef\u4ee5\u8f93\u5165\u5982\u4e0b\u683c\u5f0f\u7684\u547d\u4ee4</p> <pre><code>cyber_xxx yyy -h\n</code></pre> <p>\u51c6\u5907\u5de5\u4f5c</p> <p>\u542f\u52a8\u591a\u4e2a\u8282\u70b9\uff0c\u5e76\u5728\u8c03\u7528\u547d\u4ee4\u4e4b\u524d\u8bf7\u5148\u52a0\u8f7d\u73af\u5883\u53d8\u91cf</p> <pre><code>source cyber/setup.bash\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/25-chang-yong-ming-ling/#1cyber_node","title":"1.cyber_node","text":"<p>\u7528\u4e8e\u83b7\u53d6 Cyber RT \u4e2d\u8fd0\u884c\u7684\u8282\u70b9\u7684\u76f8\u5173\u4fe1\u606f\u3002</p> <pre><code>cyber_node list      \u5217\u51fa\u6240\u6709\u8fd0\u884c\u4e2d\u7684\u8282\u70b9\ncyber_node info xxx  \u8f93\u51fa\u67d0\u4e2a\u8282\u70b9\u6216\u6240\u6709\u8282\u70b9\u4fe1\u606f\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/25-chang-yong-ming-ling/#2cyber_channel","title":"2.cyber_channel","text":"<p>\u83b7\u53d6\u5173\u4e8e\u8bdd\u9898\u7684\u76f8\u5173\u4fe1\u606f\u3002</p> <pre><code>cyber_channel list   \u5217\u51fa\u6240\u6709\u8fd0\u884c\u4e2d\u7684\u8bdd\u9898\ncyber_channel info   \u8f93\u51fa\u8bdd\u9898\u76f8\u5173\u4fe1\u606f(\u53d1\u5e03\u8005\u3001\u8ba2\u9605\u8005\u3001\u6d88\u606f\u7c7b\u578b....)\ncyber_channel echo   \u8f93\u51fa\u8bdd\u9898\u6d88\u606f\ncyber_channel hz     \u8f93\u51fa\u8bdd\u9898\u6d88\u606f\u7684\u53d1\u5e03\u9891\u7387\ncyber_channel bw     \u8f93\u51fa\u6d88\u606f\u53d1\u5e03\u6240\u5360\u7528\u5e26\u5bbd\ncyber_channel type   \u8f93\u51fa\u8bdd\u9898\u6d88\u606f\u7c7b\u578b\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/25-chang-yong-ming-ling/#3cyber_service","title":"3.cyber_service","text":"<p>\u83b7\u53d6\u5173\u4e8e\u670d\u52a1\u7684\u76f8\u5173\u4fe1\u606f\u3002</p> <pre><code>cyber_service list   \u5217\u51fa\u6240\u6709\u8fd0\u884c\u4e2d\u7684\u670d\u52a1\ncyber_service info   \u8f93\u51fa\u67d0\u4e2a\u670d\u52a1\u7684\u76f8\u5173\u4fe1\u606f\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/25-chang-yong-ming-ling/#4cyber_launch","title":"4.cyber_launch","text":"<p>\u7528\u4e8e launch \u6587\u4ef6\u7684\u542f\u52a8\u4e0e\u5173\u95ed\u3002</p> <pre><code>cyber_launch start   \u542f\u52a8 launch \u6587\u4ef6\ncyber_launch stop    \u5173\u95ed launch \u6587\u4ef6\u4e2d\u7684\u6a21\u5757\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/25-chang-yong-ming-ling/#5cyber_monitor","title":"5.cyber_monitor","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/25-chang-yong-ming-ling/#6cyber_record","title":"6.cyber_record","text":"<p>\u7528\u4e8e\u5f55\u5236\u6216\u91cd\u653e record \u6587\u4ef6\u3002</p> <pre><code>info    \u663e\u793a record \u6587\u4ef6\u7684\u76f8\u5173\u4fe1\u606f\nplay    \u91cd\u653e record \u6587\u4ef6\nrecord  \u5f55\u5236 record \u6587\u4ef6\nsplit   \u5206\u5272 record \u6587\u4ef6\nrecover \u590d\u5236 record \u6587\u4ef6\n</code></pre> <p>\u7efc\u4e0a\uff0c\u8fd9\u662f\u76ee\u524d\u4f4d\u7f6e Cyber RT \u4e2d\u63d0\u4f9b\u7684\u5173\u4e8e\u901a\u4fe1\u7684\u4e00\u4e9b\u547d\u4ee4\uff0c\u719f\u7ec3\u4f7f\u7528\u8fd9\u4e9b\u547d\u4ee4\u53ef\u4ee5\u5927\u5927\u63d0\u9ad8\u5f00\u53d1\u548c\u8c03\u8bd5\u6210\u672c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/211cshi-xian/","title":"211cshi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/211cshi-xian/#211c","title":"2.1.1C++\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/211cshi-xian/#1","title":"1.\u53d1\u5e03\u65b9\u5b9e\u73b0","text":"<p>demo_cc \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 demo01_talker.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n    \u9700\u6c42: \u53d1\u5e03\u5b66\u751f\u76f8\u5173\u6d88\u606f\n    \u5b9e\u73b0:\n        1.\u5934\u6587\u4ef6\uff1b\n        2.\u521d\u59cb\u5316 cyber \u6846\u67b6\uff1b\n        3.\u521b\u5efa\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u53d1\u5e03\u8005\uff1b\n        5.\u7ec4\u7ec7\u6570\u636e\u5e76\u53d1\u5e03\uff1b\n        6.\u7b49\u5f85\u5173\u95ed\u3002\n\n*/\n#include \"cyber/cyber.h\"\n#include \"cyber/demo_base_proto/student.pb.h\"\n\nusing apollo::cyber::demo_base_proto::Student;\n\nint main(int argc, char *argv[])\n{\n    apollo::cyber::Init(argv[0]);\n\n    // 3.\u521b\u5efa\u8282\u70b9\uff1b\n    auto talker_node = apollo::cyber::CreateNode(\"ergou\");\n    // 4.\u521b\u5efa\u53d1\u5e03\u8005\uff1b\n    auto talker = talker_node-&gt;CreateWriter&lt;Student&gt;(\"chatter\");\n    // 5.\u7ec4\u7ec7\u6570\u636e\u5e76\u53d1\u5e03\uff1b\n    uint64_t seq = 0;//\u8ba1\u6570\u5668\n    apollo::cyber::Rate rate(0.5);\n    while (apollo::cyber::OK())\n    {\n        seq++;\n        AINFO &lt;&lt; \"\u53d1\u5e03\u7b2c\" &lt;&lt; seq &lt;&lt; \"\u6761\u6570\u636e\uff01\";\n        // \u7ec4\u7ec7\u6570\u636e\n        auto msg = std::make_shared&lt;Student&gt;();\n        msg-&gt;set_name(\"huluwa\");\n        msg-&gt;set_age(seq);\n        msg-&gt;set_height(1.72);\n        msg-&gt;add_books(\"chinese\");\n        msg-&gt;add_books(\"math\");\n        msg-&gt;add_books(\"english\");\n\n        //\u53d1\u5e03\n        talker-&gt;Write(msg);\n        rate.Sleep();\n    }\n\n    // 6.\u7b49\u5f85\u5173\u95ed\u3002\n    apollo::cyber::WaitForShutdown();\n\n    return 0;\n}\n</code></pre> <p>\u914d\u7f6eBUILD\u6587\u4ef6\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>cc_binary(\n    name = \"demo01_talker\",\n    srcs = [\"demo01_talker.cc\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/demo_base_proto:student_cc\"\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/211cshi-xian/#2","title":"2.\u8ba2\u9605\u65b9\u5b9e\u73b0","text":"<p>demo_cc \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 demo02_listener.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/* \n    \u9700\u6c42:\u8ba2\u9605\u53d1\u5e03\u7684\u6d88\u606f\uff0c\u5e76\u8f93\u51fa\n    \u5b9e\u73b0:\n        1.\u5934\u6587\u4ef6\uff1b\n        2.\u521d\u59cb\u5316\uff1b\n        3.\u521b\u5efa\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u8ba2\u9605\u65b9\uff1b\n        5.\u56de\u8c03\u51fd\u6570\u5904\u7406\u6570\u636e\uff1b\n        6.\u7b49\u5f85\u5173\u95ed\u3002\n\n */\n#include \"cyber/cyber.h\"\n#include \"cyber/demo_base_proto/student.pb.h\"\n\nusing apollo::cyber::demo_base_proto::Student;\n\nvoid cb(const std::shared_ptr&lt;Student&gt;&amp; stu){\n    AINFO &lt;&lt; \"name: \" &lt;&lt; stu-&gt;name();\n    AINFO &lt;&lt; \"age: \" &lt;&lt; stu-&gt;age();\n    AINFO &lt;&lt; \"height: \" &lt;&lt; stu-&gt;height();\n    for (int i = 0; i &lt; stu-&gt;books_size(); i++)\n    {\n        AINFO &lt;&lt; \"books: \" &lt;&lt; stu-&gt;books(i);\n    }\n\n    AINFO &lt;&lt; \"-----------------------------------------\";\n}\nint main(int argc, char *argv[])\n{\n    // 2.\u521d\u59cb\u5316\uff1b\n    apollo::cyber::Init(argv[0]);\n    AINFO &lt;&lt; \"\u8ba2\u9605\u65b9\u521b\u5efa.....\";\n    // 3.\u521b\u5efa\u8282\u70b9\uff1b\n    auto listener_node = apollo::cyber::CreateNode(\"cuihua\");\n    // 4.\u521b\u5efa\u8ba2\u9605\u65b9\uff1b\n    auto listener = listener_node-&gt;CreateReader&lt;Student&gt;(\"chatter\",cb);\n    // 5.\u56de\u8c03\u51fd\u6570\u5904\u7406\u6570\u636e\uff1b\n    // 6.\u7b49\u5f85\u5173\u95ed\u3002\n    apollo::cyber::WaitForShutdown();\n\n    return 0;\n}\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>cc_binary(\n    name = \"demo02_listener\",\n    srcs = [\"demo02_listener.cc\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/demo_base_proto:student_cc\"\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/211cshi-xian/#3","title":"3.\u7f16\u8bd1\u6267\u884c","text":"<p>\u7f16\u8bd1\uff1a</p> <pre><code>bazel build cyber/demo_cc/...\n</code></pre> <p>\u6267\u884c\\(\u9700\u8981\u4e24\u4e2a\u7ec8\u7aef\\)\uff1a</p> <p>\u7ec8\u7aefA\u6267\u884c\u53d1\u5e03\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_cc/demo01_talker\n</code></pre> <p>\u7ec8\u7aefB\u6267\u884c\u8ba2\u9605\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_cc/demo02_listener\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u672c\u7ae0\u5f15\u8a00\u90e8\u5206\u7684\u6848\u4f8b1\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/212-pythonshi-xian/","title":"212 pythonshi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/212-pythonshi-xian/#212-python","title":"2.1.2 Python\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/212-pythonshi-xian/#1","title":"1.\u53d1\u5e03\u65b9\u5b9e\u73b0","text":"<p>demo_py \u76ee\u5f55\u4e0b\u65b0\u5efa Python \u6587\u4ef6 demo01_talker_py.py\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n\n'''  \n    \u9700\u6c42:\u5b9e\u73b0\u6d88\u606f\u53d1\u5e03\u65b9\uff0c\u53d1\u5e03\u6570\u636e\n\n    \u5b9e\u73b0:\n        1.\u5bfc\u5305;\n        2.\u521d\u59cb\u5316cyber\u6846\u67b6;\n        3.\u521b\u5efa\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u53d1\u5e03\u65b9\uff1b\n        5.\u7ec4\u7ec7\u5e76\u53d1\u9001\u6570\u636e\uff1b\n        6.\u7b49\u5f85\u5173\u95ed\u3002\n\n'''\nfrom cyber.python.cyber_py3 import cyber\nfrom cyber.demo_base_proto.student_pb2 import Student\nimport time\ndef talk():\n    # 3.\u521b\u5efa\u8282\u70b9\uff1b\n    talker_node = cyber.Node(\"ergou_py\")\n    # 4.\u521b\u5efa\u53d1\u5e03\u65b9\uff1b\n    talker = talker_node.create_writer(\"chatter\",Student)\n    # 5.\u7ec4\u7ec7\u5e76\u53d1\u9001\u6570\u636e\uff1b\n    seq = 0\n    while not cyber.is_shutdown():\n        seq += 1\n        print(\"send message %d\" % seq)\n        stu = Student()\n        stu.name = \"huluwa\"\n        stu.age = seq\n        stu.height = 1.78\n        stu.books.append(\"yuwen\")\n        stu.books.append(\"shuxue\")\n        stu.books.append(\"yingyu\")\n\n\n        talker.write(stu)\n        time.sleep(1.0)\n\nif __name__ == \"__main__\":\n    cyber.init()\n    #\u4e3b\u903b\u8f91\u5c01\u88c5\u8fdb\u51fd\u6570\n    talk()\n    cyber.shutdown()\n</code></pre> <p>BUILD\u6587\u4ef6:</p> <pre><code>py_binary(\n    name = \"demo01_talker_py\",\n    srcs = [\"demo01_talker_py.py\"],\n    deps = [\n        \"//cyber/python/cyber_py3:cyber\",\n        \"//cyber/demo_base_proto:student_py\"\n    ] \n\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/212-pythonshi-xian/#2","title":"2.\u8ba2\u9605\u65b9\u5b9e\u73b0","text":"<p>demo_py \u76ee\u5f55\u4e0b\u65b0\u5efa Python \u6587\u4ef6 demo02_listener_py.py\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n'''  \n    \u9700\u6c42:\u8ba2\u9605\u6570\u636e\n    \u5b9e\u73b0:\n        1.\u5bfc\u5305\uff1b\n        2.\u521d\u59cb\u5316 cyber \u6846\u67b6\uff1b\n        3.\u521b\u5efa\u8ba2\u9605\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u8ba2\u9605\u65b9\uff1b\n        5.\u5904\u7406\u6570\u636e\uff1b\n        6.\u7b49\u5f85\u5173\u95ed\u3002\n\n'''\nfrom cyber.python.cyber_py3 import cyber\nfrom cyber.demo_base_proto.student_pb2 import Student\n\ndef cb(stu):\n    # print(stu)\n    print(\"name = %s age = %d height = %.2f\" % (stu.name, stu.age, stu.height))\n    for book in stu.books:\n        print(\"book: %s\" %book)\n    print(\"-\" * 80)\n\ndef listen():\n    listener_node = cyber.Node(\"cuihua_py\")\n    listener = listener_node.create_reader(\"chatter\",Student,cb)\n    listener_node.spin()\n\nif __name__ == \"__main__\":\n    cyber.init()\n    listen()\n    cyber.shutdown()\n</code></pre> <p>BUILD\u6587\u4ef6:</p> <pre><code>py_binary(\n    name = \"demo02_listener_py\",\n    srcs = [\"demo02_listener_py.py\"],\n    deps = [\n        \"//cyber/python/cyber_py3:cyber\",\n        \"//cyber/demo_base_proto:student_py\"\n    ] \n\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/21-hua-ti-tong-xin/212-pythonshi-xian/#3","title":"3.\u7f16\u8bd1\u6267\u884c","text":"<p>\u7f16\u8bd1\uff1a</p> <pre><code>bazel build cyber/demo_py/...\n</code></pre> <p>\u6267\u884c\\(\u9700\u8981\u4e24\u4e2a\u7ec8\u7aef\\)\uff1a</p> <p>\u7ec8\u7aefA\u6267\u884c\u53d1\u5e03\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_py/demo01_talker_py\n</code></pre> <p>\u7ec8\u7aefB\u6267\u884c\u8ba2\u9605\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_py/demo02_listener_py\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u672c\u7ae0\u5f15\u8a00\u90e8\u5206\u7684\u6848\u4f8b1\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/221-cshi-xian/","title":"221 cshi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/221-cshi-xian/#221-c","title":"2.2.1 C++\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/221-cshi-xian/#1","title":"1.\u670d\u52a1\u7aef\u5b9e\u73b0","text":"<p>demo_cc \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 demo03_server.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n    \u9700\u6c42:\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\uff0c\u63d0\u4ea4\u4e24\u4e2a\u6574\u6570\uff0c\u670d\u52a1\u7aef\u63a5\u6536\u8bf7\u6c42\uff0c\u63d0\u53d6\u6570\u5b57\uff0c\u76f8\u52a0\u540e\n        \u5c06\u7ed3\u679c\u54cd\u5e94\u56de\u5ba2\u6237\u7aef\uff1b\n    \u5b9e\u73b0:\n        1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n        2.\u521d\u59cb\u5316\uff1b\n        3.\u521b\u5efa\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u670d\u52a1\u65b9\uff1b\n        5.\u6570\u636e\u5904\u7406\uff1b\n        6.\u7b49\u5f85\u5173\u95ed\uff1b\n\n\n*/\n#include \"cyber/cyber.h\"\n#include \"cyber/demo_base_proto/addints.pb.h\"\n\nusing apollo::cyber::demo_base_proto::AddInts_Request;\nusing apollo::cyber::demo_base_proto::AddInts_Response;\nvoid cb(const std::shared_ptr&lt;AddInts_Request&gt;&amp; request,const std::shared_ptr&lt;AddInts_Response&gt;&amp; response){\n    //\u5904\u7406\u8bf7\u6c42\uff0c\u4ea7\u751f\u54cd\u5e94\n    int64_t num1 = request -&gt; num1();\n    int64_t num2 = request -&gt; num2();\n    AINFO &lt;&lt; \"\u5ba2\u6237\u7aef\u8bf7\u6c42num1=\"&lt;&lt; num1 &lt;&lt; \",num2=\" &lt;&lt; num2;\n    //\u6c42\u548c\u5e76\u8bbe\u7f6e\u54cd\u5e94\n    int16_t sum = num1 + num2;\n    response-&gt;set_sum(sum);\n}\nint main(int argc, char *argv[])\n{\n    apollo::cyber::Init(argv[0]);\n    AINFO &lt;&lt; \"\u670d\u52a1\u7aef\u6267\u884c....\";\n    // 3.\u521b\u5efa\u8282\u70b9\uff1b\n    auto server_node = apollo::cyber::CreateNode(\"server_node\");\n    // 4.\u521b\u5efa\u670d\u52a1\u65b9\uff1b\n    auto server = server_node-&gt;CreateService&lt;AddInts_Request,AddInts_Response&gt;(\"addints\",cb);   \n    // 5.\u6570\u636e\u5904\u7406\uff1b\n\n    // 6.\u7b49\u5f85\u5173\u95ed\uff1b\n    apollo::cyber::WaitForShutdown();\n    return 0;\n}\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>cc_binary(\n    name = \"demo03_server\",\n    srcs = [\"demo03_server.cc\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/demo_base_proto:addints_proto_cc\"\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/221-cshi-xian/#2","title":"2.\u5ba2\u6237\u7aef\u5b9e\u73b0","text":"<p>demo_cc \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 demo04_client.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n    \u9700\u6c42:\u5ba2\u6237\u7aef\u53d1\u9001\u6570\u636e\u5e76\u5904\u7406\u54cd\u5e94\n    \u5b9e\u73b0:\n        1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n        2.\u521d\u59cb\u5316 cyber\uff1b\n        3.\u521b\u5efa\u5ba2\u6237\u7aef\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u53d1\u5e03\u65b9\uff1b\n        5.\u53d1\u9001\u6570\u636e\uff1b\n        6.\u7b49\u5f85\u5173\u95ed\u3002\n*/\n#include \"cyber/cyber.h\"\n#include \"cyber/demo_base_proto/addints.pb.h\"\n\nusing apollo::cyber::demo_base_proto::AddInts_Request;\nusing apollo::cyber::demo_base_proto::AddInts_Response;\n\nint main(int argc, char *argv[])\n{\n\n\n    apollo::cyber::Init(argv[0]);\n    // \u5904\u7406\u8f93\u5165\u7684\u53c2\u6570   \n    if (argc != 3)\n    {\n        AINFO &lt;&lt; \"\u6267\u884c\u7a0b\u5e8f\u65f6\u8bf7\u8f93\u5165\u4e24\u4e2a\u6570\u5b57\u4f5c\u4e3a\u53c2\u6570\";\n        return 1;\n    }\n\n    AINFO &lt;&lt; \"\u5ba2\u6237\u7aef....\";   \n    // 3.\u521b\u5efa\u5ba2\u6237\u7aef\u8282\u70b9\uff1b\n    auto client_node = apollo::cyber::CreateNode(\"client_node\");\n    // 4.\u521b\u5efa\u53d1\u5e03\u65b9\uff1b\n    auto client = client_node -&gt; CreateClient&lt;AddInts_Request,AddInts_Response&gt;(\"addints\");\n    // 5.\u53d1\u9001\u6570\u636e\uff1b\n    AINFO &lt;&lt; \"\u7b49\u5f85\u670d\u52a1\u542f\u52a8\";\n    auto request = std::make_shared&lt;AddInts_Request&gt;();\n    request -&gt; set_num1(atoll(argv[1]));\n    request -&gt; set_num2(atoll(argv[2]));\n    auto flag = client -&gt; WaitForService(std::chrono::duration&lt;long int&gt;(10));\n    // client-&gt;ServiceIsReady\n    if(flag){\n        AINFO &lt;&lt; \"\u670d\u52a1\u5df2\u7ecf\u542f\u52a8\";\n        AINFO &lt;&lt; \"\u53d1\u9001num1 = \" &lt;&lt; request-&gt;num1() &lt;&lt; \",num2 = \" &lt;&lt; request-&gt;num2(); \n        auto response = client -&gt; SendRequest(request);\n        //\u5904\u7406\u54cd\u5e94\n        AINFO &lt;&lt; \"\u54cd\u5e94\u7ed3\u679c:sum = \" &lt;&lt; response-&gt;sum();\n    } else {\n        AINFO &lt;&lt; \"\u670d\u52a1\u672a\u542f\u52a8\";\n    }\n    // 6.\u7b49\u5f85\u5173\u95ed\u3002 \n    apollo::cyber::WaitForShutdown();\n    return 0;\n}\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>cc_binary(\n    name = \"demo04_client\",\n    srcs = [\"demo04_client.cc\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/demo_base_proto:addints_proto_cc\"\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/221-cshi-xian/#3","title":"3.\u7f16\u8bd1\u6267\u884c","text":"<p>\u7f16\u8bd1\uff1a</p> <pre><code>bazel build cyber/demo_cc/...\n</code></pre> <p>\u6267\u884c\\(\u9700\u8981\u4e24\u4e2a\u7ec8\u7aef\\)\uff1a</p> <p>\u7ec8\u7aefA\u6267\u884c\u53d1\u5e03\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_cc/demo03_server\n</code></pre> <p>\u7ec8\u7aefB\u6267\u884c\u8ba2\u9605\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_cc/demo04_client 30 50\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u672c\u7ae0\u5f15\u8a00\u90e8\u5206\u7684\u6848\u4f8b2\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/222-pythonshi-xian/","title":"222 pythonshi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/222-pythonshi-xian/#222-python","title":"2.2.2 Python\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/222-pythonshi-xian/#1","title":"1.\u670d\u52a1\u7aef\u5b9e\u73b0","text":"<p>demo_py \u76ee\u5f55\u4e0b\u65b0\u5efa Python \u6587\u4ef6 demo03_server_py.py\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n\"\"\"  \n    \u9700\u6c42:\u5b9e\u73b0\u8bf7\u6c42\u54cd\u5e94\n    \u5b9e\u73b0:\n        1.\u5bfc\u5305\uff1b\n        2.\u521d\u59cb\u5316 cyber \u6846\u67b6\uff1b\n        3.\u521b\u5efa\u670d\u52a1\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u670d\u52a1\u65b9\uff1b\n        5.\u5904\u7406\u8bf7\u6c42\uff1b\n        6.\u5173\u95ed\u3002\n\n\"\"\"\nfrom cyber.python.cyber_py3 import cyber\nfrom cyber.demo_base_proto.addints_pb2 import AddInts_Request\nfrom cyber.demo_base_proto.addints_pb2 import AddInts_Response\n\ndef cb(req):\n    num1 = req.num1\n    num2 = req.num2\n    print(\"num1: %d, num2 %d\"%(num1,num2))\n    sum = num1 + num2\n    response = AddInts_Response()\n    response.sum = sum\n    return response\n\n\nif __name__ == \"__main__\":\n    cyber.init()\n    print(\"server.....\")\n    # 3.\u521b\u5efa\u670d\u52a1\u8282\u70b9\uff1b\n    server_node = cyber.Node(\"server_node\")\n    # 4.\u521b\u5efa\u670d\u52a1\u65b9\uff1b\n    server = server_node.create_service(\"addints\",AddInts_Request,AddInts_Response,cb)\n    server_node.spin()\n    # 5.\u5904\u7406\u8bf7\u6c42\uff1b\n    # 6.\u5173\u95ed\u3002\n    cyber.shutdown()\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>py_binary(\n    name = \"demo03_server_py\",\n    srcs = [\"demo03_server_py.py\"],\n    deps = [\n        \"//cyber/python/cyber_py3:cyber\",\n        \"//cyber/demo_base_proto:addints_proto_py\"\n    ] \n\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/222-pythonshi-xian/#2","title":"2.\u5ba2\u6237\u7aef\u5b9e\u73b0","text":"<p>demo_py \u76ee\u5f55\u4e0b\u65b0\u5efa Python \u6587\u4ef6 demo04_client_py.py\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n\"\"\"  \n    \u9700\u6c42:\u53d1\u9001\u4e24\u4e2a\u6570\u5b57\u5230\u670d\u52a1\u7aef\uff0c\u5e76\u5904\u7406\u54cd\u5e94\n    \u5b9e\u73b0:\n        1.\u5bfc\u5305\uff1b\n        2.\u521d\u59cb\u5316\uff1b\n        3.\u521b\u5efa\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u5ba2\u6237\u7aef\uff1b\n        5.\u53d1\u9001\u6570\u636e\u5904\u7406\u54cd\u5e94\uff1b\n        6.\u7b49\u5f85\u5173\u95ed\u3002\n\n\"\"\"\n\nfrom cyber.python.cyber_py3 import cyber\nfrom cyber.demo_base_proto.addints_pb2 import AddInts_Request\nfrom cyber.demo_base_proto.addints_pb2 import AddInts_Response\nimport sys\n\nif __name__ == \"__main__\":\n    if len(sys.argv) != 3:\n        print(\"\u8bf7\u8f93\u5165\u4e24\u4e2a\u53c2\u6570\")\n        sys.exit(1)\n    cyber.init()\n    print(\"client...... \")\n    # 3.\u521b\u5efa\u8282\u70b9\uff1b\n    client_node = cyber.Node(\"client_node\")\n    # 4.\u521b\u5efa\u5ba2\u6237\u7aef\uff1b\n    client = client_node.create_client(\"addints\",AddInts_Request,AddInts_Response)\n    # 5.\u53d1\u9001\u6570\u636e\u5904\u7406\u54cd\u5e94\uff1b\n    req = AddInts_Request()\n    req.num1 = int(sys.argv[1])\n    req.num2 = int(sys.argv[2])\n    response = client.send_request(req)\n    print(\"response sum = %d \"%response.sum)\n    # 6.\u7b49\u5f85\u5173\u95ed\u3002\n    cyber.shutdown()\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>py_binary(\n    name = \"demo04_client_py\",\n    srcs = [\"demo04_client_py.py\"],\n    deps = [\n        \"//cyber/python/cyber_py3:cyber\",\n        \"//cyber/demo_base_proto:addints_proto_py\"\n    ] \n\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/22-fu-wu-tong-xin/222-pythonshi-xian/#3","title":"3.\u7f16\u8bd1\u6267\u884c","text":"<p>\u7f16\u8bd1\uff1a</p> <pre><code>bazel build cyber/demo_py/...\n</code></pre> <p>\u6267\u884c\\(\u9700\u8981\u4e24\u4e2a\u7ec8\u7aef\\)\uff1a</p> <p>\u7ec8\u7aefA\u6267\u884c\u53d1\u5e03\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_py/demo03_server_py\n</code></pre> <p>\u7ec8\u7aefB\u6267\u884c\u8ba2\u9605\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_py/demo04_client_py 30 50\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u672c\u7ae0\u5f15\u8a00\u90e8\u5206\u7684\u6848\u4f8b2\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/231-cshi-xian/","title":"231 cshi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/231-cshi-xian/#231-c","title":"2.3.1 C++\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/231-cshi-xian/#1","title":"1.\u53c2\u6570\u670d\u52a1\u7aef","text":"<p>demo_cc \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 demo05_param_server.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n    \u9700\u6c42: \u670d\u52a1\u7aef\u8bbe\u7f6e\u53c2\u6570\uff0c\u5ba2\u6237\u7aef\u64cd\u4f5c\u53c2\u6570\n    \u5b9e\u73b0:\n        1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n        2.\u521d\u59cb\u5316 cyber \u6846\u67b6\uff1b\n        3.\u521b\u5efa\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u53c2\u6570\u670d\u52a1\u7aef\uff1b\n        5.\u8bbe\u7f6e\u53c2\u6570\uff1b\n        6.\u7b49\u5f85\u5173\u95ed\u3002\n\n\n*/\n#include \"cyber/cyber.h\"\n#include \"cyber/parameter/parameter_server.h\"\n\nusing apollo::cyber::ParameterServer;\nusing apollo::cyber::Parameter;\n\nint main(int argc, char *argv[])\n{\n    apollo::cyber::Init(argv[0]);\n    AINFO &lt;&lt; \"\u53c2\u6570\u670d\u52a1\u7aef\";\n    // 3.\u521b\u5efa\u8282\u70b9\uff1b\n    std::shared_ptr&lt;apollo::cyber::Node&gt; param_service_node = apollo::cyber::CreateNode(\"param\");\n    // 4.\u521b\u5efa\u53c2\u6570\u670d\u52a1\u7aef\uff1b\n    auto param_service = std::make_shared&lt;ParameterServer&gt;(param_service_node);\n    // 5.\u8bbe\u7f6e\u53c2\u6570\uff1b\n    param_service-&gt;SetParameter(Parameter(\"type\",\"apool_car\"));\n    param_service-&gt;SetParameter(Parameter(\"height\",1.65));\n    param_service-&gt;SetParameter(Parameter(\"lasers\",4));\n\n    //\u83b7\u53d6\u6307\u5b9a\u53c2\u6570\n    Parameter temp;\n    param_service-&gt;GetParameter(\"type\",&amp;temp);\n    AINFO &lt;&lt; temp.Name() &lt;&lt; \":\" &lt;&lt; temp.AsString();\n    param_service-&gt;GetParameter(\"height\",&amp;temp);\n    AINFO &lt;&lt; temp.Name() &lt;&lt; \":\" &lt;&lt; temp.AsDouble();\n    param_service-&gt;GetParameter(\"lasers\",&amp;temp);\n    AINFO &lt;&lt; temp.Name() &lt;&lt; \":\" &lt;&lt; temp.AsInt64();\n\n    //\u83b7\u53d6\u6240\u6709\u53c2\u6570\n    std::vector&lt;Parameter&gt; params;\n    param_service-&gt;ListParameters(&amp;params);\n    for (auto &amp;&amp;param : params)\n    {\n        AINFO &lt;&lt; param.Name() &lt;&lt; \" = \" &lt;&lt; param.TypeName();\n    }\n\n    // 6.\u7b49\u5f85\u5173\u95ed\u3002\n    apollo::cyber::WaitForShutdown();\n    return 0;\n}\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>cc_binary(\n    name = \"demo05_param_server\",\n    srcs = [\"demo05_param_server.cc\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/parameter\"\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/231-cshi-xian/#2","title":"2.\u53c2\u6570\u5ba2\u6237\u7aef","text":"<p>demo_cc \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 demo06_param_client.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n    \u9700\u6c42: \u670d\u52a1\u7aef\u8bbe\u7f6e\u53c2\u6570\uff0c\u5ba2\u6237\u7aef\u64cd\u4f5c\u53c2\u6570\n    \u5b9e\u73b0:\n        1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n        2.\u521d\u59cb\u5316 cyber \u6846\u67b6\uff1b\n        3.\u521b\u5efa\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u53c2\u6570\u5ba2\u6237\u7aef\uff1b\n        5.\u64cd\u4f5c\u53c2\u6570\uff1b\n        6.\u7b49\u5f85\u5173\u95ed\u3002\n*/\n#include \"cyber/cyber.h\"\n#include \"cyber/parameter/parameter_client.h\"\n\nusing apollo::cyber::ParameterClient;\nusing apollo::cyber::Parameter;\nint main(int argc, char *argv[])\n{\n    apollo::cyber::Init(argv[0]);\n    AINFO &lt;&lt; \"\u53c2\u6570\u5ba2\u6237\u7aef\";\n    // 3.\u521b\u5efa\u8282\u70b9\uff1b\n    std::shared_ptr&lt;apollo::cyber::Node&gt; param_client_node = apollo::cyber::CreateNode(\"param_client_node\");\n    // 4.\u521b\u5efa\u53c2\u6570\u5ba2\u6237\u7aef\uff1b\n    auto param_client = std::make_shared&lt;ParameterClient&gt;(param_client_node,\"param\");\n    // 5.\u64cd\u4f5c\u53c2\u6570\uff1b\n    //\n    Parameter temp;\n    param_client-&gt;GetParameter(\"type\",&amp;temp);\n    AINFO &lt;&lt; temp.Name() &lt;&lt;\" = \" &lt;&lt;temp.AsString();\n    param_client-&gt;GetParameter(\"height\",&amp;temp);\n    AINFO &lt;&lt; temp.Name() &lt;&lt;\" = \" &lt;&lt;temp.AsDouble();\n    param_client-&gt;GetParameter(\"lasers\",&amp;temp);\n    AINFO &lt;&lt; temp.Name() &lt;&lt;\" = \" &lt;&lt;temp.AsInt64();\n    //\n    param_client-&gt;SetParameter(Parameter(\"lasers\",1));\n    AINFO &lt;&lt; \"\u4fee\u6539\u540e...\";\n    param_client-&gt;GetParameter(\"lasers\",&amp;temp);\n    AINFO &lt;&lt; temp.Name() &lt;&lt;\" = \" &lt;&lt;temp.AsInt64();\n\n    //\n    std::vector&lt;Parameter&gt; ps;\n    param_client-&gt;ListParameters(&amp;ps);\n    for (auto &amp;&amp;p : ps)\n    {\n        AINFO &lt;&lt;\"\u53c2\u6570\u540d\u79f0:\" &lt;&lt; p.Name() &lt;&lt; \";\u53c2\u6570\u7c7b\u578b:\" &lt;&lt; p.TypeName();\n    }\n\n    // 6.\u7b49\u5f85\u5173\u95ed\u3002\n    apollo::cyber::WaitForShutdown();\n    return 0;\n}\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>cc_binary(\n    name = \"demo06_param_client\",\n    srcs = [\"demo06_param_client.cc\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/parameter\"\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/231-cshi-xian/#3","title":"3.\u7f16\u8bd1\u6267\u884c","text":"<p>\u7f16\u8bd1\uff1a</p> <pre><code>bazel build cyber/demo_cc/...\n</code></pre> <p>\u6267\u884c\\(\u9700\u8981\u4e24\u4e2a\u7ec8\u7aef\\)\uff1a</p> <p>\u7ec8\u7aefA\u6267\u884c\u53d1\u5e03\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_cc/demo05_param_server\n</code></pre> <p>\u7ec8\u7aefB\u6267\u884c\u8ba2\u9605\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_cc/demo06_param_client\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a\u53c2\u6570\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u90fd\u4f1a\u8f93\u51fa\u53c2\u6570\u76f8\u5173\u4fe1\u606f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/232-pythonshi-xian/","title":"232 pythonshi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/232-pythonshi-xian/#232-python","title":"2.3.2 Python\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/232-pythonshi-xian/#1","title":"1.\u53c2\u6570\u670d\u52a1\u7aef","text":"<p>demo_py \u76ee\u5f55\u4e0b\u65b0\u5efa Python \u6587\u4ef6 demo05_param_server_py.py\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n\"\"\"  \n    \u9700\u6c42: \u670d\u52a1\u7aef\u8bbe\u7f6e\u53c2\u6570\uff0c\u5ba2\u6237\u7aef\u64cd\u4f5c\u53c2\u6570\n    \u5b9e\u73b0:\n        1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n        2.\u521d\u59cb\u5316 cyber \u6846\u67b6\uff1b\n        3.\u521b\u5efa\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u53c2\u6570\u670d\u52a1\u7aef\uff1b\n        5.\u8bbe\u7f6e\u53c2\u6570\uff1b\n        6.\u7b49\u5f85\u5173\u95ed\u3002\n\"\"\"\nfrom cyber.python.cyber_py3 import cyber\nfrom cyber.python.cyber_py3 import parameter\n\nif __name__ == \"__main__\":\n    cyber.init()\n    print(\"param service .....\")\n    # 3.\u521b\u5efa\u8282\u70b9\uff1b\n    param_service_node = cyber.Node(\"param\")\n    # 4.\u521b\u5efa\u53c2\u6570\u670d\u52a1\u7aef\uff1b\n    param_service = parameter.ParameterServer(param_service_node)\n    # 5.\u8bbe\u7f6e\u53c2\u6570\uff1b\n    #\n    param1 = parameter.Parameter(\"type\",\"car_apollo\")\n    param2 = parameter.Parameter(\"length\",1.5)\n    param3 = parameter.Parameter(\"cameras\",2)\n\n    param_service.set_parameter(param1)\n    param_service.set_parameter(param2)\n    param_service.set_parameter(param3)\n\n    #\n    p1 = param_service.get_parameter(\"type\")\n    p2 = param_service.get_parameter(\"length\")\n    p3 = param_service.get_parameter(\"cameras\")\n    print(\"type = %s,length = %.2f,cameras = %d\" %(p1.as_string(), p2.as_double(), p3.as_int64()))\n\n    #  \n    ps = param_service.get_paramslist()\n    for p in ps:\n        print(p.debug_string())\n\n    # while not cyber.is_shutdown():\n    #     pass\n    param_service_node.spin()\n    # 6.\u7b49\u5f85\u5173\u95ed\u3002\n    cyber.shutdown()\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>py_binary(\n    name = \"demo05_param_server_py\",\n    srcs = [\"demo05_param_server_py.py\"],\n    deps = [\n        \"//cyber/python/cyber_py3:cyber\",\n        \"//cyber/python/cyber_py3:parameter\"\n    ] \n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/232-pythonshi-xian/#2","title":"2.\u53c2\u6570\u5ba2\u6237\u7aef","text":"<p>demo_py \u76ee\u5f55\u4e0b\u65b0\u5efa Python \u6587\u4ef6 demo06_param_client_py.py\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n\"\"\"  \n    \u9700\u6c42: \u670d\u52a1\u7aef\u8bbe\u7f6e\u53c2\u6570\uff0c\u5ba2\u6237\u7aef\u64cd\u4f5c\u53c2\u6570\n    \u5b9e\u73b0:\n        1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n        2.\u521d\u59cb\u5316 cyber \u6846\u67b6\uff1b\n        3.\u521b\u5efa\u8282\u70b9\uff1b\n        4.\u521b\u5efa\u53c2\u6570\u5ba2\u6237\u7aef\uff1b\n        5.\u64cd\u4f5c\u53c2\u6570\uff1b\n        6.\u7b49\u5f85\u5173\u95ed\u3002\n\"\"\"\nfrom cyber.python.cyber_py3 import cyber\nfrom cyber.python.cyber_py3 import parameter\n\nif __name__ == \"__main__\":\n    cyber.init()\n    print(\"param client .....\")\n    # 3.\u521b\u5efa\u8282\u70b9\uff1b\n    param_client_node = cyber.Node(\"param_client_node\")\n    # 4.\u521b\u5efa\u53c2\u6570\u5ba2\u6237\u7aef\uff1b\n    client = parameter.ParameterClient(param_client_node,\"param\")\n    # 5.\u64cd\u4f5c\u53c2\u6570\uff1b\n    p1 = client.get_parameter(\"type\")\n    p2 = client.get_parameter(\"length\")\n    p3 = client.get_parameter(\"cameras\")\n    print(\"type = %s,length = %.2f,cameras = %d\" %(p1.as_string(), p2.as_double(), p3.as_int64()))\n    client.set_parameter(parameter.Parameter(\"cameras\",100))\n    p4 = client.get_parameter(\"cameras\")\n    print(\"type = %s,length = %.2f,cameras = %d\" %(p1.as_string(), p2.as_double(), p4.as_int64()))\n    ps = client.get_paramslist()\n    for p in ps:\n        print(p.debug_string())\n    # 6.\u7b49\u5f85\u5173\u95ed\u3002\n    cyber.shutdown()\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>py_binary(\n    name = \"demo06_param_client_py\",\n    srcs = [\"demo06_param_client_py.py\"],\n    deps = [\n        \"//cyber/python/cyber_py3:cyber\",\n        \"//cyber/python/cyber_py3:parameter\"\n    ] \n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/23-can-shu/232-pythonshi-xian/#3","title":"3.\u7f16\u8bd1\u8fd0\u884c","text":"<p>\u7f16\u8bd1\uff1a</p> <pre><code>bazel build cyber/demo_py/...\n</code></pre> <p>\u6267\u884c\\(\u9700\u8981\u4e24\u4e2a\u7ec8\u7aef\\)\uff1a</p> <p>\u7ec8\u7aefA\u6267\u884c\u53d1\u5e03\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_py/demo05_param_server_py\n</code></pre> <p>\u7ec8\u7aefB\u6267\u884c\u8ba2\u9605\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_py/demo06_param_client_py\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a\u53c2\u6570\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u90fd\u4f1a\u8f93\u51fa\u53c2\u6570\u76f8\u5173\u4fe1\u606f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/241-ji-ben-component-yan-shi/","title":"241 ji ben component yan shi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/241-ji-ben-component-yan-shi/#241","title":"2.4.1 \u57fa\u672c\u7ec4\u4ef6\u6f14\u793a\\(\u4e0a\\)","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/241-ji-ben-component-yan-shi/#_1","title":"\u9700\u6c42","text":"<p>\u542f\u52a8\u4e4b\u524d\u7684\u6d88\u606f\u53d1\u5e03\u8282\u70b9\uff0c\u5bf9\u8ba2\u9605\u5230\u7684\u6570\u636e\u8fdb\u884c\u8fc7\u6ee4\uff0c\u53ea\u83b7\u53d6\u5176\u4e2d\u7684\u59d3\u540d\u548c\u5e74\u9f84\u4fe1\u606f\u5e76\u8f93\u51fa\u5230\u7ec8\u7aef\uff0c\u8fd0\u884c\u6548\u679c\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/241-ji-ben-component-yan-shi/#_2","title":"\u51c6\u5907","text":"<ul> <li>\u4fdd\u8bc1\u4e4b\u524d\u8bdd\u9898\u901a\u4fe1\u4e2d\u7684\u53d1\u5e03\u65b9\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\uff1b</li> <li>\u5728 demo_cc \u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6\u5939\uff1acomponent_common01\uff0c\u5e76\u5728 component_common01 \u4e0b\u65b0\u5efaBUILD\u6587\u4ef6\u3002</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/241-ji-ben-component-yan-shi/#_3","title":"\u5b9e\u73b0\u6d41\u7a0b","text":"<p>\u4e0a\u8ff0\u9700\u6c42\u53ef\u4ee5\u901a\u8fc7\u7ec4\u4ef6\u5b9e\u73b0\uff0c\u53ea\u8981\u5305\u62ec\u5982\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u81ea\u5b9a\u4e49\u7c7b\u7ee7\u627f Component \u7c7b\uff0c\u5e76\u91cd\u5199\u5176 Init() \u4e0e Proc() \u51fd\u6570\uff1b</li> <li>\u7f16\u5199 dag \u6587\u4ef6\u4e0e launch \u6587\u4ef6\uff1b</li> <li>\u7f16\u8f91BUILD\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\u6267\u884c\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/241-ji-ben-component-yan-shi/#1-component","title":"1.\u7ee7\u627f\u5e76\u91cd\u5199 Component \u7c7b","text":"<p>component_common01 \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 common_cpt.h\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n    \u7ec4\u4ef6\u5934\u6587\u4ef6\n\n*/\n#include \"cyber/component/component.h\"\n#include \"cyber/demo_base_proto/student.pb.h\"\n\nusing apollo::cyber::Component;\nusing apollo::cyber::demo_base_proto::Student;\n\nclass CommonCpt : public Component&lt;Student&gt; {\n    public:\n        bool Init() override;\n        bool Proc(const std::shared_ptr&lt;Student&gt;&amp; stu) override;\n};\nCYBER_REGISTER_COMPONENT(CommonCpt)\n</code></pre> <p>\u5728 component_common01 \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 common_cpt.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#include \"cyber/demo_cc/component_common01/common_cpt.h\"\n\nbool CommonCpt::Init() {\n    AINFO &lt;&lt; \"................................... int .........................\";\n    return true;\n}\nbool CommonCpt::Proc(const std::shared_ptr&lt;Student&gt;&amp; stu) {\n    // AINFO &lt;&lt; \"do data.....\";\n    AINFO &lt;&lt; \"do message:\" &lt;&lt; stu-&gt;name() &lt;&lt; \" -- \" &lt;&lt; stu-&gt;age();\n    return true;\n}\n</code></pre> <p>\u4ee3\u7801\u89e3\u91ca\uff1a</p> <ul> <li> <p>\u4f7f\u7528\u7684\u6a21\u677f\u4e0e\u8ba2\u9605\u7684\u6d88\u606f\u7c7b\u578b\u4e00\u81f4\u3002</p> </li> <li> <p>Init() \u51fd\u6570\u662f\u7528\u4e8e\u521d\u59cb\u5316\u7684\uff0c\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\u3002</p> </li> <li> <p>proc()\u51fd\u6570\u5728\u8ba2\u9605\u5230\u6d88\u606f\u65f6\u5c31\u4f1a\u88ab\u56de\u8c03\u6267\u884c\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/241-ji-ben-component-yan-shi/#2-dag-launch","title":"2.\u7f16\u5199 dag \u6587\u4ef6\u4e0e launch \u6587\u4ef6","text":"<p>\u5728 component_common01 \u76ee\u5f55\u4e0b\u65b0\u5efa cpt.dag \u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code># Define all coms in DAG streaming.\n    module_config {\n    module_library : \"/apollo/bazel-bin/cyber/demo_cc/component_common01/lib_common_cpt.so\"\n    components {\n        class_name : \"CommonCpt\"\n        config {\n            name : \"my_common\"\n            readers {\n                channel: \"chatter\"\n            }\n        }\n      }\n    }\n</code></pre> <p>\u5728 component_common01 \u76ee\u5f55\u4e0b\u65b0\u5efa cpt.launch \u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>&lt;cyber&gt;\n    &lt;module&gt;\n        &lt;name&gt;my_common&lt;/name&gt;\n        &lt;dag_conf&gt;/apollo/cyber/demo_cc/component_common01/cpt.dag&lt;/dag_conf&gt;\n        &lt;process_name&gt;my_common&lt;/process_name&gt;\n    &lt;/module&gt;\n&lt;/cyber&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/241-ji-ben-component-yan-shi/#3build","title":"3.\u7f16\u8f91BUILD\u6587\u4ef6","text":"<p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>package(default_visibility = [\"//visibility:public\"])\n\n\n# https://docs.bazel.build/versions/master/be/c-cpp.html#cc_library\ncc_library(\n    name = \"common_cpt_lib\",\n    srcs = [\"common_cpt.cc\"],\n    hdrs = [\"common_cpt.h\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/demo_base_proto:student_cc\"\n    ],\n)\n\n# https://docs.bazel.build/versions/master/be/c-cpp.html#cc_binary\ncc_binary(\n    name = \"lib_common_cpt.so\",\n    linkshared = True,\n    linkstatic = False,\n    deps = [\":common_cpt_lib\"],\n)\n\nfilegroup(\n    name = \"conf\",\n    srcs = [\n        \":cpt.dag\",\n        \":cpt.launch\",\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/241-ji-ben-component-yan-shi/#4","title":"4.\u7f16\u8bd1\u6267\u884c","text":"<p>\u7f16\u8bd1\uff1a</p> <pre><code>bazel build cyber/demo_cc/component_common01/...\n</code></pre> <p>\u6267\u884c\\(\u9700\u8981\u4e24\u4e2a\u7ec8\u7aef\\)\uff1a</p> <p>\u7ec8\u7aefA\u6267\u884c\u53d1\u5e03\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_cc/demo01_talker\n</code></pre> <p>\u7ec8\u7aefB\u6267\u884c\u7ec4\u4ef6\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>cyber_launch start cyber/demo_cc/component_common01/cpt.launch\n</code></pre> <p>\u6216\u6267\u884c dag \u6587\u4ef6\uff1a</p> <pre><code>mainboard -d cyber/demo_cc/component_common01/cpt.dag\n</code></pre> <p>\u5173\u95ed\u7ec4\u4ef6\\(\u9700\u8981\u7cfb\u542f\u52a8\u7ec8\u7aef\\)\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>cyber_launch stop cyber/demo_cc/component_common01/cpt.launch\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1aB\u4e2d\u548c\u4e4b\u524d\u8fd0\u884c\u7ed3\u679c\u4e00\u81f4\uff0cA\u4e2d\u8f93\u51fa\u5bf9B\u4e8c\u6b21\u5904\u7406\u7684\u6570\u636e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-ji-ben-zu-jian-yan-793a28-4e0b29/","title":"242 ji ben zu jian yan 793a28 4e0b29","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-ji-ben-zu-jian-yan-793a28-4e0b29/#242","title":"2.4.2 \u57fa\u672c\u7ec4\u4ef6\u6f14\u793a\\(\u4e0b\\)","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-ji-ben-zu-jian-yan-793a28-4e0b29/#_1","title":"\u9700\u6c42","text":"<p>\u73b0\u65e0\u4eba\u8f66\u524d\u540e\u5404\u5b89\u88c5\u4e86\u4e00\u9897\u96f7\u8fbe\uff0c\u96f7\u8fbe\u53ef\u4ee5\u53d1\u5e03\u969c\u788d\u7269\u6d88\u606f\uff0c\u9700\u8981\u5c06\u4e24\u9897\u96f7\u8fbe\u53d1\u9001\u7684\u6d88\u606f\u8fdb\u884c\u878d\u5408\uff0c\u8fd0\u884c\u6548\u679c\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-ji-ben-zu-jian-yan-793a28-4e0b29/#_2","title":"\u51c6\u5907","text":"<ul> <li>\u7f16\u5199\u4e24\u4e2a\u8282\u70b9\uff0c\u5206\u522b\u6a21\u62df\u524d\u540e\u96f7\u8fbe\u53d1\u9001\u969c\u788d\u7269\u6d88\u606f\uff1b</li> <li>\u5728 demo_cc \u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6\u5939\uff1acomponent_common02\uff0c\u5e76\u5728 component_common02 \u4e0b\u65b0\u5efaBUILD\u6587\u4ef6\u3002</li> </ul> <p>\u6a21\u62df\u96f7\u8fbe\u6d88\u606f\u53d1\u5e03\u5b9e\u73b0\u5982\u4e0b\uff1a</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-ji-ben-zu-jian-yan-793a28-4e0b29/#1","title":"1.\u5b9a\u4e49\u96f7\u8fbe\u6d88\u606f","text":"<p>demo_base_proto \u76ee\u5f55\u4e0b\u65b0\u5efa lasers.proto\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>syntax = \"proto2\";\n\npackage apollo.cyber.demo_base_proto;\n\nmessage Lasers {\n    required uint64 seq = 1;\n    required uint64 count = 2;\n}\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>proto_library(\n    name = \"lasers_proto\",\n    srcs = [\"lasers.proto\"]\n)\ncc_proto_library(\n    name = \"lasers_proto_cc\",\n    deps = [\n        \":lasers_proto\",\n    ],\n)\npy_proto_library(\n    name = \"lasers_proto_py\",\n    deps = [\n        \":lasers_proto\",\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-ji-ben-zu-jian-yan-793a28-4e0b29/#2","title":"2.\u5206\u522b\u7f16\u5199\u524d\u540e\u96f7\u8fbe\u6d88\u606f\u53d1\u9001\u8282\u70b9","text":"<p>component_common02 \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 front_laser.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n    \u524d\u7f6e\u96f7\u8fbe\u53d1\u5e03\n*/\n\n#include \"cyber/cyber.h\"\n#include \"cyber/demo_base_proto/lasers.pb.h\"\n\nusing apollo::cyber::demo_base_proto::Lasers;\n\n\nint main(int argc, char *argv[])\n{\n    apollo::cyber::Init(argv[0]);\n    AINFO &lt;&lt; \"\u6a21\u62df\u524d\u96f7\u8fbe\u8282\u70b9....\";\n    auto pub_node = apollo::cyber::CreateNode(\"front_laser_node\");\n    auto pub = pub_node-&gt;CreateWriter&lt;Lasers&gt;(\"/front/laser\");\n    apollo::cyber::Rate rate(1.0);\n    auto lasers = std::make_shared&lt;Lasers&gt;();\n    lasers-&gt;set_count(2);\n    uint64_t seq = 0;\n    while (apollo::cyber::OK())\n    {\n        seq++;\n        lasers-&gt;set_seq(seq);\n        pub-&gt;Write(lasers);\n        rate.Sleep();\n    }\n\n    apollo::cyber::WaitForShutdown();\n\n    return 0;\n}\n</code></pre> <p>component_common02 \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 back_laser.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n    \u524d\u7f6e\u96f7\u8fbe\u53d1\u5e03\n*/\n\n#include \"cyber/cyber.h\"\n#include \"cyber/demo_base_proto/lasers.pb.h\"\n\nusing apollo::cyber::demo_base_proto::Lasers;\n\n\nint main(int argc, char *argv[])\n{\n    apollo::cyber::Init(argv[0]);\n    AINFO &lt;&lt; \"\u6a21\u62df\u540e\u96f7\u8fbe\u8282\u70b9....\";\n    auto pub_node = apollo::cyber::CreateNode(\"back_laser_node\");\n    auto pub = pub_node-&gt;CreateWriter&lt;Lasers&gt;(\"/back/laser\");\n    apollo::cyber::Rate rate(0.2);\n    auto lasers = std::make_shared&lt;Lasers&gt;();\n    lasers-&gt;set_count(3);\n    uint64_t seq = 0;\n    while (apollo::cyber::OK())\n    {\n        seq++;\n        lasers-&gt;set_seq(seq);\n        pub-&gt;Write(lasers);\n        rate.Sleep();\n    }\n\n    apollo::cyber::WaitForShutdown();\n\n    return 0;\n}\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>cc_binary(\n    name = \"front_laser\",\n    srcs = [\"front_laser.cc\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/demo_base_proto:lasers_proto_cc\"\n    ],\n)\ncc_binary(\n    name = \"back_laser\",\n    srcs = [\"back_laser.cc\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/demo_base_proto:lasers_proto_cc\"\n    ],\n)\n</code></pre> <p>\u63a5\u4e0b\u6765\u53ef\u4ee5\u7f16\u8bd1\u5e76\u6267\u884c\uff0c\u4ee5\u6d4b\u8bd5\u7a0b\u5e8f\u662f\u5426\u6b63\u786e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-ji-ben-zu-jian-yan-793a28-4e0b29/#_3","title":"\u5b9e\u73b0\u6d41\u7a0b","text":"<p>\u4e0a\u8ff0\u9700\u6c42\u53ef\u4ee5\u901a\u8fc7\u7ec4\u4ef6\u5b9e\u73b0\uff0c\u53ea\u8981\u5305\u62ec\u5982\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u81ea\u5b9a\u4e49\u7c7b\u7ee7\u627f Component \u7c7b\uff0c\u5e76\u91cd\u5199\u5176 Init() \u4e0e Proc() \u51fd\u6570\uff1b</li> <li>\u7f16\u5199 dag \u6587\u4ef6\u4e0e launch \u6587\u4ef6\uff1b</li> <li>\u7f16\u8f91BUILD\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\u6267\u884c\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-ji-ben-zu-jian-yan-793a28-4e0b29/#1-component","title":"1.\u7ee7\u627f\u5e76\u91cd\u5199 Component \u7c7b","text":"<p>component_common02 \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 lasers_cpt.h\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#include \"cyber/component/component.h\"\n#include \"cyber/demo_base_proto/lasers.pb.h\"\n\n\nusing apollo::cyber::Component;\nusing apollo::cyber::demo_base_proto::Lasers;\n\nclass LaserCpt : public Component&lt;Lasers,Lasers&gt; {\n    public:\n        bool Init() override;\n        bool Proc(const std::shared_ptr&lt;Lasers&gt;&amp; front_laser,const std::shared_ptr&lt;Lasers&gt;&amp; back_laser) override;\n    private:\n        std::shared_ptr&lt;apollo::cyber::Writer&lt;Lasers&gt;&gt; pub = nullptr;\n        uint64_t seq;\n};\nCYBER_REGISTER_COMPONENT(LaserCpt)\n</code></pre> <p>\u5728 component_common02 \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 lasers_cpt.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#include \"cyber/demo_cc/component_common02/lasers_cpt.h\"\n\nusing apollo::cyber::demo_base_proto::Lasers;\nbool LaserCpt::Init(){\n    AINFO &lt;&lt; \".....lasers filter init.......\";\n    pub = this-&gt;node_-&gt;CreateWriter&lt;Lasers&gt;(\"/laser\");\n    seq = 0;\n    return true;\n}\n\nbool LaserCpt::Proc(const std::shared_ptr&lt;Lasers&gt;&amp; front_laser,const std::shared_ptr&lt;Lasers&gt;&amp; back_laser){\n    uint64_t seq_front = front_laser-&gt;seq();\n    uint64_t seq_back = back_laser-&gt;seq();\n    uint64_t num_front = front_laser-&gt;count();\n    uint64_t num_back = back_laser-&gt;count();\n    uint64_t sum = num_back + num_front;\n    AINFO &lt;&lt; \"total sum = \" &lt;&lt; sum &lt;&lt; \", front seq = \" &lt;&lt; seq_front &lt;&lt; \", back seq = \" &lt;&lt; seq_back;\n\n    seq++;\n\n    auto laser = std::make_shared&lt;Lasers&gt;();\n    laser-&gt;set_seq(seq);\n    laser-&gt;set_count(sum);\n    pub-&gt;Write(laser);\n\n    return true;\n}\n</code></pre> <p>\u4ee3\u7801\u89e3\u91ca\uff1a</p> <ul> <li> <p>\u4f7f\u7528\u7684\u6a21\u677f\u4e0e\u8ba2\u9605\u7684\u6d88\u606f\u7c7b\u578b\u4e00\u81f4\uff0c\u6b64\u5904\u4e3a\u4e24\u901a\u9053\u6570\u636e\uff0c\u6700\u591a\u53ef\u4ee5\u652f\u6301\u56db\u901a\u9053\u6570\u636e\u3002</p> </li> <li> <p>Init() \u51fd\u6570\u662f\u7528\u4e8e\u521d\u59cb\u5316\u7684\uff0c\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\u3002</p> </li> <li> <p>proc()\u51fd\u6570\u5728\u8ba2\u9605\u5230\u6d88\u606f\u65f6\u5c31\u4f1a\u88ab\u56de\u8c03\u6267\u884c\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-ji-ben-zu-jian-yan-793a28-4e0b29/#2-dag-launch","title":"2.\u7f16\u5199 dag \u6587\u4ef6\u4e0e launch \u6587\u4ef6","text":"<p>\u5728 component_common02 \u76ee\u5f55\u4e0b\u65b0\u5efa cpt2.dag \u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code># Define all coms in DAG streaming.\n    module_config {\n    module_library : \"/apollo/bazel-bin/cyber/demo_cc/component_common02/lib_lasers_cpt.so\"\n    components {\n        class_name : \"LaserCpt\"\n        config {\n            name : \"my_common2\"\n            readers {\n                channel: \"/front/laser\"\n            }\n            readers {\n                channel: \"/back/laser\"\n            }\n        }\n      }\n    }\n</code></pre> <p>\u5728 component_common02 \u76ee\u5f55\u4e0b\u65b0\u5efa cpt2.launch \u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>&lt;cyber&gt;\n    &lt;module&gt;\n        &lt;name&gt;my_common2&lt;/name&gt;\n        &lt;dag_conf&gt;/apollo/cyber/demo_cc/component_common02/cpt2.dag&lt;/dag_conf&gt;\n        &lt;process_name&gt;my_common2&lt;/process_name&gt;\n    &lt;/module&gt;\n&lt;/cyber&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-ji-ben-zu-jian-yan-793a28-4e0b29/#3build","title":"3.\u7f16\u8f91BUILD\u6587\u4ef6","text":"<p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>package(default_visibility = [\"//visibility:public\"])\n\n\n\n# https://docs.bazel.build/versions/master/be/c-cpp.html#cc_library\ncc_library(\n    name = \"lasers_cpt_lib\",\n    srcs = [\"lasers_cpt.cc\"],\n    hdrs = [\"lasers_cpt.h\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/demo_base_proto:lasers_proto_cc\"\n    ],\n)\n# https://docs.bazel.build/versions/master/be/c-cpp.html#cc_binary\ncc_binary(\n    name = \"lib_lasers_cpt.so\",\n    linkshared = True,\n    linkstatic = False,\n    deps = [\":lasers_cpt_lib\"],\n)\nfilegroup(\n    name = \"conf\",\n    srcs = [\n        \":cpt2.dag\",\n        \":cpt2.launch\",\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-ji-ben-zu-jian-yan-793a28-4e0b29/#4","title":"4.\u7f16\u8bd1\u6267\u884c","text":"<p>\u7f16\u8bd1\uff1a</p> <pre><code>bazel build cyber/demo_cc/component_common02/...\n</code></pre> <p>\u6267\u884c\\(\u9700\u8981\u4e09\u4e2a\u7ec8\u7aef\\)\uff1a</p> <p>\u7ec8\u7aefA\u6267\u884c\u524d\u96f7\u8fbe\u53d1\u5e03\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_cc/component_common02/front_laser\n</code></pre> <p>\u7ec8\u7aefB\u6267\u884c\u540e\u96f7\u8fbe\u53d1\u5e03\u65b9\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>./bazel-bin/cyber/demo_cc/component_common02/back_laser\n</code></pre> <p>\u7ec8\u7aefC\u6267\u884c\u7ec4\u4ef6\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>cyber_launch start cyber/demo_cc/component_common02/cpt2.launch\n</code></pre> <p>\u6216\u6267\u884c dag \u6587\u4ef6\uff1a</p> <pre><code>mainboard -d cyber/demo_cc/component_common02/cpt2.dag\n</code></pre> <p>\u5173\u95ed\u7ec4\u4ef6\\(\u9700\u8981\u7cfb\u542f\u52a8\u7ec8\u7aef\\)\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>cyber_launch stop cyber/demo_cc/component_common02/cpt2.launch\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a\u4f1a\u5bf9\u524d\u540e\u96f7\u8fbe\u68c0\u6d4b\u5230\u7684\u969c\u788d\u7269\u8fdb\u884c\u878d\u5408\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-shi-jian-zu-jian-yan-shi/","title":"242 shi jian zu jian yan shi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-shi-jian-zu-jian-yan-shi/#243","title":"2.4.3 \u5b9a\u65f6\u5668\u7ec4\u4ef6\u6f14\u793a","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-shi-jian-zu-jian-yan-shi/#_1","title":"\u9700\u6c42","text":"<p>\u5468\u671f\u6027\u7684\u6267\u884c\u67d0\u79cd\u64cd\u4f5c\uff0c\u8fd0\u884c\u6548\u679c\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-shi-jian-zu-jian-yan-shi/#_2","title":"\u51c6\u5907","text":"<ul> <li>\u5728 demo_cc \u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6\u5939\uff1acomponent_timer\uff0c\u5e76\u5728 component_timer\u4e0b\u65b0\u5efaBUILD\u6587\u4ef6\u3002</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-shi-jian-zu-jian-yan-shi/#_3","title":"\u5b9e\u73b0\u6d41\u7a0b","text":"<p>\u4e0a\u8ff0\u9700\u6c42\u53ef\u4ee5\u901a\u8fc7\u5b9a\u65f6\u5668\u7ec4\u4ef6\u5b9e\u73b0\uff0c\u53ea\u8981\u5305\u62ec\u5982\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u81ea\u5b9a\u4e49\u7c7b\u7ee7\u627f TimerComponent \u7c7b\uff0c\u5e76\u91cd\u5199\u5176 Init() \u4e0e Proc() \u51fd\u6570\uff1b</li> <li>\u7f16\u5199 dag \u6587\u4ef6\u4e0e launch \u6587\u4ef6\uff1b</li> <li>\u7f16\u8f91BUILD\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\u6267\u884c\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-shi-jian-zu-jian-yan-shi/#1-timercomponent","title":"1.\u7ee7\u627f\u5e76\u91cd\u5199 TimerComponent \u7c7b","text":"<p>component_timer \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 timer_cpt.h\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#include \"cyber/component/component.h\"\n#include \"cyber/component/timer_component.h\"\n\nusing apollo::cyber::TimerComponent;\nusing apollo::cyber::Component;\n\nclass MyTimer : public TimerComponent { \n    public:\n        bool Init() override;\n        bool Proc() override;\n    private:\n        int seq;\n};\n\nCYBER_REGISTER_COMPONENT(MyTimer)\n</code></pre> <p>component_timer \u76ee\u5f55\u4e0b\u65b0\u5efa C++ \u6587\u4ef6 timer_cpt.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#include \"cyber/demo_cc/component_timer/timer_cpt.h\"\n#include \"cyber/component/component.h\"\n\nbool MyTimer::Init(){\n    AINFO &lt;&lt; \"timer component init ......\";\n    seq = 0;\n    return true;\n}\nbool MyTimer::Proc(){\n    seq++;\n    AINFO &lt;&lt; \"--------------------------\" &lt;&lt; seq;\n\n    return true;\n}\n</code></pre> <p>\u4ee3\u7801\u89e3\u91ca\uff1a</p> <ul> <li> <p>Init() \u51fd\u6570\u662f\u7528\u4e8e\u521d\u59cb\u5316\u7684\uff0c\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\u3002</p> </li> <li> <p>proc()\u51fd\u6570\u5728\u8ba2\u9605\u5230\u6d88\u606f\u65f6\u5c31\u4f1a\u88ab\u56de\u8c03\u6267\u884c\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-shi-jian-zu-jian-yan-shi/#2-dag-launch","title":"2.\u7f16\u5199 dag \u6587\u4ef6\u4e0e launch \u6587\u4ef6","text":"<p>\u5728 component_timer \u76ee\u5f55\u4e0b\u65b0\u5efa timer.dag \u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>module_config {\n    module_library : \"/apollo/bazel-bin/cyber/demo_cc/component_timer/libtimer_cpt.so\"\n    timer_components {\n        class_name : \"MyTimer\"\n        config {\n            name : \"timer\"\n            interval : 10\n        }\n    }\n}\n</code></pre> <p>\u5728 component_timer \u76ee\u5f55\u4e0b\u65b0\u5efa timer.launch \u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>&lt;cyber&gt;\n    &lt;module&gt;\n        &lt;name&gt;my_timer&lt;/name&gt;\n        &lt;dag_conf&gt;/apollo/cyber/demo_cc/component_timer/timer.dag&lt;/dag_conf&gt;\n        &lt;process_name&gt;my_timer&lt;/process_name&gt;\n    &lt;/module&gt;\n&lt;/cyber&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-shi-jian-zu-jian-yan-shi/#3build","title":"3.\u7f16\u8f91BUILD\u6587\u4ef6","text":"<p>\u914d\u7f6e\u6587\u4ef6BUILD\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>cc_binary(\n    name = \"libtimer_cpt.so\",\n    linkshared = True,\n    linkstatic = False,\n    deps = [\":timer_cpt_lib\"],\n)\n\ncc_library(\n    name = \"timer_cpt_lib\",\n    srcs = [\"timer_cpt.cc\"],\n    hdrs = [\"timer_cpt.h\"],\n    deps = [\n        \"//cyber\",\n    ],\n)\n\nfilegroup(\n    name = \"conf\",\n    srcs = [\n        \":timer.dag\",\n        \":timer.launch\",\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-2-zhang-cyber-rt-tong-xin-ji-zhi/24-zu-jian/242-shi-jian-zu-jian-yan-shi/#4","title":"4.\u7f16\u8bd1\u6267\u884c","text":"<p>\u7f16\u8bd1\uff1a</p> <pre><code>bazel build cyber/demo_cc/component_timer/...\n</code></pre> <p>\u7ec8\u7aef\u6267\u884c\u7ec4\u4ef6\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>cyber_launch start cyber/demo_cc/component_timer/timer.launch\n</code></pre> <p>\u6216\u6267\u884c dag \u6587\u4ef6\uff1a</p> <pre><code>mainboard -d cyber/demo_cc/component_timer/timer.dag\n</code></pre> <p>\u5173\u95ed\u7ec4\u4ef6\\(\u9700\u8981\u7cfb\u542f\u52a8\u7ec8\u7aef\\)\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <pre><code>cyber_launch stop cyber/demo_cc/component_timer/timer.launch\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a\u7ec8\u7aef\u5468\u671f\u6027\u7684\u5faa\u73af\u8f93\u51fa\u6253\u5370\u8bed\u53e5\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/","title":"32 cyberrecorder","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/#31-cyber-record","title":"3.1 cyber record","text":"<p>\u5728\u5f00\u53d1\u8c03\u8bd5\u8fc7\u7a0b\u4e2d\uff0c\u5b9e\u8f66\u8def\u6d4b\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u73af\u8282\u4e4b\u4e00\uff0c\u4f46\u662f\u5b9e\u8f66\u8def\u6d4b\u7684\u4eba\u529b\u6210\u672c\u548c\u65f6\u95f4\u6210\u672c\u90fd\u662f\u6bd4\u8f83\u9ad8\u7684\uff0c\u4e3a\u4e86\u964d\u4f4e\u7814\u53d1\u6210\u672c\uff0c\u5728 Cyber RT \u4e2d\u63d0\u4f9b\u4e86\u5de5\u5177\uff1acyber record\uff0c\u5b83\u53ef\u4ee5\u8ba2\u9605\u6d88\u606f\u5e76\u5c06\u4e4b\u5e8f\u5217\u5316\\(\u5199\\)\u5230\u78c1\u76d8\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u4ece\u78c1\u76d8\u6587\u4ef6\u53cd\u5e8f\u5217\u5316\\(\u8bfb\\)\u5e76\u91cd\u65b0\u53d1\u5e03\u6d88\u606f\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u5728\u5b9e\u9645\u8def\u6d4b\u65f6\uff0c\u5c06\u6240\u9700\u6570\u636e\u901a\u8fc7\u5176\u4fdd\u5b58\uff0c\u540e\u9762\u518d\u8c03\u8bd5\u65f6\u53ef\u4ee5\u76f4\u63a5\u56de\u653e\u6570\u636e\uff0c\u4ece\u800c\u5b9e\u73b0\u6570\u636e\u7684\u590d\u7528\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/#_1","title":"\u6982\u5ff5","text":"<p>cyber record \u662f\u7528\u4e8e\u5e8f\u5217\u5316\u6216\u53cd\u5e8f\u5217\u5316\u8bdd\u9898\u8bdd\u9898\u6d88\u606f\u7684\u4e00\u4e2a\u5de5\u5177\u96c6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/#_2","title":"\u4f5c\u7528","text":"<p>\u53ef\u4ee5\u5b9e\u73b0\u6570\u636e\u590d\u7528\uff0c\u5728\u5f00\u53d1\u8c03\u8bd5\u8f66\u8f7d\u8f6f\u4ef6\u65f6\u964d\u4f4e\u6210\u672c\u63d0\u9ad8\u6548\u7387\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/#_3","title":"\u9700\u6c42","text":"<p>\u901a\u8fc7 cyber record \u5c06\u5b66\u751f\u4fe1\u606f\u5199\u5165\u78c1\u76d8\u6587\u4ef6\uff0c\u5e76\u518d\u901a\u8fc7 cyber record \u8bfb\u53d6\u6587\u4ef6\u4e2d\u7684\u5b66\u751f\u4fe1\u606f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/#_4","title":"\u6d41\u7a0b","text":"<p>\u5728\u5b9e\u73b0\u6d41\u7a0b\u4e0a\uff0cC++ \u548c Python \u5b9e\u73b0\u7684\u57fa\u672c\u4e00\u81f4\uff0c\u5927\u81f4\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u5e8f\u5217\u5316\uff1b</p> </li> <li> <p>\u53cd\u5e8f\u5217\u5316\uff1b</p> </li> <li> <p>\u7f16\u8bd1\u5e76\u6267\u884c\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/#_5","title":"\u51c6\u5907","text":"<ul> <li>\u9700\u8981\u5148\u51c6\u5907 protobuf \u6570\u636e\uff0c\u53ef\u4ee5\u76f4\u63a5\u590d\u7528 1.6.1 \u4e2d\u7684 student.proto \u6587\u4ef6\uff1b</li> <li>\u5728 demo_cc \u6587\u4ef6\u5939\u4e0b\u65b0\u5efa tools \u76ee\u5f55\uff0c\u5e76\u5728 tools \u76ee\u5f55\u4e2d\u65b0\u5efa BUILD \u6587\u4ef6\uff1b</li> <li>\u5728 demo_py \u6587\u4ef6\u5939\u4e0b\u65b0\u5efa tools \u76ee\u5f55\uff0c\u5e76\u5728 tools \u76ee\u5f55\u4e2d\u65b0\u5efa BUILD \u6587\u4ef6\u3002</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/33-ben-zhang-xiao-jie/","title":"33 ben zhang xiao jie","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/33-ben-zhang-xiao-jie/#33","title":"3.3 \u672c\u7ae0\u5c0f\u7ed3","text":"<p>\u672c\u7ae0\u5185\u5bb9\u8f83\u4e3a\u7b80\u5355\uff0c\u4e3b\u8981\u4ecb\u7ecd\u4e86 cyber record \u5e8f\u5217\u5316\u4e0e\u53cd\u5e8f\u5217\u5316\u6d88\u606f\u6570\u636e\uff0c\u8fd8\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u5e38\u7528\u7684 Cyber RT \u4e2d\u5185\u7f6e\u7684\u547d\u4ee4\u5de5\u5177\uff0c\u524d\u8005\u5728\u5b9e\u9645\u5de5\u4f5c\u4e2d\u662f\u7ecf\u5e38\u4f7f\u7528\u7684\uff0c\u540e\u8005\u6d89\u53ca\u7684\u547d\u4ee4\u90e8\u5206\u867d\u7136\u4e0d\u7b97\u7e41\u7410\uff0c\u4f46\u662f\u5982\u679c\u518d\u7ed3\u5408\u53c2\u6570\uff0c\u90a3\u4e48\u547d\u4ee4\u7684\u7ec4\u5408\u4f7f\u7528\u65b9\u5f0f\u8fd8\u662f\u6bd4\u8f83\u591a\u7684\uff0c\u9700\u8981\u8c03\u7528\u8005\u591a\u52a0\u7ec3\u4e60\uff0c\u76f8\u4fe1\u5982\u679c\u80fd\u591f\u719f\u7ec3\u7684\u4f7f\u7528\u5404\u5f0f\u547d\u4ee4\uff0c\u90a3\u4e48\u5bf9\u4f60\u7684\u5de5\u4f5c\u662f\u53ca\u5176\u6709\u5e2e\u52a9\u7684\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/321-c%2B%2B-shi-xian/","title":"321 c++ shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/321-c%2B%2B-shi-xian/#321-c","title":"3.2.1 C++ \u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/321-c%2B%2B-shi-xian/#1","title":"1.\u5e8f\u5217\u5316","text":"<p>demo_cc/tools \u76ee\u5f55\u4e0b\u65b0\u5efaC++ \u6587\u4ef6 demo01_record_write.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n\n    \u5c06\u8bdd\u9898\u6d88\u606f\u5199\u5165\u78c1\u76d8\u6587\u4ef6\u3002\n    \u5b9e\u73b0:\n        1.\u521d\u59cb\u5316 cyber \u6846\u67b6;\n        2.\u521b\u5efa recorder \u5199\u5bf9\u8c61\uff1b\n        3.\u8bbe\u7f6e\u5199\u51fa\u53c2\u6570\uff1b\n        4.\u6253\u5f00\u6587\u4ef6\u6d41\uff1b\n        5.\u5199\u51fa\u6d88\u606f\u7c7b\u578b\u4ee5\u53ca\u6d88\u606f\u6570\u636e\uff1b\n        6.\u5173\u95ed\u6587\u4ef6\u6d41\u3002\n\n\n*/\n#include \"cyber/cyber.h\"\n#include \"cyber/record/record_writer.h\"\n#include \"cyber/demo_base_proto/student.pb.h\"\nusing apollo::cyber::record::RecordWriter;\n\nint main(int argc, char *argv[])\n{\n\n    apollo::cyber::Init(argv[0]);\n    AINFO &lt;&lt; \"record \u5199\u64cd\u4f5c\u6f14\u793a...\";\n    // 2.\u521b\u5efa recorder \u5199\u5bf9\u8c61\uff1b\n    RecordWriter writer;\n    // 3.\u8bbe\u7f6e\u5199\u51fa\u53c2\u6570\uff1b\n    writer.SetSizeOfFileSegmentation(0);\n    writer.SetIntervalOfFileSegmentation(0);\n    // 4.\u6253\u5f00\u6587\u4ef6\u6d41\uff1b\n    writer.Open(\"/apollo/cyber/demo_cc/tools/mytest.record\");\n    AINFO &lt;&lt; \"file : \" &lt;&lt; writer.GetFile();\n\n    // 5.\u5199\u51fa\u6d88\u606f\u7c7b\u578b\u4ee5\u53ca\u6d88\u606f\u6570\u636e\uff1b\n    std::string channel = \"chatter\";\n    writer.WriteChannel(channel,\"apollo.cyber.demo_base_proto.Student\",\"test ....\");\n    // writer.WriteMessage    \n    for (size_t i = 0; i &lt; 100; i++)\n    {\n        auto stu = std::make_shared&lt;apollo::cyber::demo_base_proto::Student&gt;();\n        stu-&gt;set_name(\"huluwa\");\n        stu-&gt;add_books(\"yingyu\");\n        stu-&gt;add_books(\"yuwen\");\n        // stu-&gt;SerializeAsString();\n        std::string content;\n        stu-&gt;SerializeToString(&amp;content);\n        writer.WriteMessage(channel,content,i);\n        // writer.WriteMessage(channel,stu-&gt;SerializeAsString(),i);\n\n    }\n\n    // 6.\u5173\u95ed\u6587\u4ef6\u6d41\u3002\n    writer.Close();\n\n\n    return 0;\n}\n</code></pre> <p>\u914d\u7f6eBUILD\u6587\u4ef6\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>cc_binary(\n    name = \"demo01_record_write\",\n    srcs = [\"demo01_record_write.cc\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/demo_base_proto:student_cc\",\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/321-c%2B%2B-shi-xian/#2","title":"2.\u53cd\u5e8f\u5217\u5316","text":"<p>demo_cc/tools \u76ee\u5f55\u4e0b\u65b0\u5efaC++ \u6587\u4ef6 demo02_record_read.cc\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#include \"cyber/cyber.h\"\n#include \"cyber/record/record_reader.h\"\n#include \"cyber/record/record_message.h\"\n\nusing apollo::cyber::record::RecordReader;\nusing apollo::cyber::record::RecordMessage;\nint main(int argc, char *argv[])\n{\n    apollo::cyber::Init(argv[0]);\n\n    AINFO &lt;&lt; \"record \u8bfb\u64cd\u4f5c\u6f14\u793a...\";\n    RecordReader reader(\"/apollo/cyber/demo_cc/tools/mytest.record\");\n    std::string channel = \"chatter\";\n    uint64_t msg_count = reader.GetMessageNumber(channel);\n    AINFO &lt;&lt; \"\u603b\u5171\" &lt;&lt; msg_count &lt;&lt; \"\u6761\u6d88\u606f\";\n    std::string msg_type = reader.GetMessageType(channel);\n    std::string msg_desc = reader.GetProtoDesc(channel);\n    AINFO &lt;&lt; \"\u6d88\u606f\u7c7b\u578b:\" &lt;&lt; msg_type;\n    AINFO &lt;&lt; \"\u6d88\u606f\u63cf\u8ff0:\" &lt;&lt; msg_desc;\n    RecordMessage msg;\n    for (size_t i = 0; i &lt; msg_count; i++)\n    {\n        if(reader.ReadMessage(&amp;msg)){\n            AINFO &lt;&lt; \"\u7b2c\" &lt;&lt; i &lt;&lt; \"\u6761\u6d88\u606f -&gt; \" \n                  &lt;&lt; \"channel name: \" &lt;&lt; msg.channel_name\n                  &lt;&lt; \"; content: \" &lt;&lt; msg.content\n                  &lt;&lt; \"; msg time: \" &lt;&lt; msg.time;\n        } else  {\n            AINFO &lt;&lt; \"\u6d88\u606f\u8bfb\u53d6\u5931\u8d25.....\";\n        }\n    }\n\n\n    return 0;\n}\n</code></pre> <p>\u914d\u7f6eBUILD\u6587\u4ef6\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>cc_binary(\n    name = \"demo02_record_read\",\n    srcs = [\"demo02_record_read.cc\"],\n    deps = [\n        \"//cyber\",\n        \"//cyber/demo_base_proto:student_cc\",\n    ],\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/321-c%2B%2B-shi-xian/#3","title":"3.\u7f16\u8bd1\u6267\u884c","text":"<p>\u7f16\u8bd1\uff1a</p> <pre><code>bazel build cyber/demo_cc/tools/...\n</code></pre> <p>\u6267\u884c\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <p>\u5148\u6267\u884c\u5e8f\u5217\u5316\u64cd\u4f5c\uff08\u6267\u884c\u5b8c\u6bd5\u5c06\u5728 demo_cc/tools \u76ee\u5f55\u4e0b\u751f\u6210\u4e00\u4e2a\u540d\u4e3a mytest.record \u7684\u7528\u4e8e\u4fdd\u5b58\u6d88\u606f\u6570\u636e\u7684\u6587\u4ef6\uff09</p> <pre><code>./bazel-bin/cyber/demo_cc/tools/demo01_record_write\n</code></pre> <p>\u518d\u6267\u884c\u53cd\u5e8f\u5217\u5316\u64cd\u4f5c\uff08\u6267\u884c\u5b8c\u6bd5\u5c06\u5728\u7ec8\u7aef\u8f93\u51fa\u6587\u4ef6\u4e2d\u4fdd\u5b58\u7684\u6d88\u606f\u5185\u5bb9\uff09</p> <pre><code>./bazel-bin/cyber/demo_cc/tools/demo02_record_read\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/332-python-shi-xian/","title":"332 python shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/332-python-shi-xian/#332-python","title":"3.3.2 Python \u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/332-python-shi-xian/#1","title":"1.\u5e8f\u5217\u5316","text":"<p>demo_py/tools \u76ee\u5f55\u4e0b\u65b0\u5efa Python \u6587\u4ef6 demo01_record_write_py.py\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n\n\"\"\"  \n    \u9700\u6c42\uff1a\u5c06 student \u6d88\u606f\u5199\u5165\u5230\u78c1\u76d8\u6587\u4ef6\n    \u5b9e\u73b0\uff1a\n        1.\u521b\u5efa\u5199\u51fa\u5bf9\u8c61\uff1b\n        2.\u8bbe\u7f6e\u5199\u51fa\u53c2\u6570\uff1b\n        3.\u6253\u5f00\u6587\u4ef6\u6d41\uff1b\n        4.\u7ec4\u7ec7\u6d88\u606f\uff1b\n        5.\u5199\u51fa\u6d88\u606f\uff1b\n        6.\u5173\u95ed\u6587\u4ef6\u6d41\u3002\n\n\n\"\"\"\n\nfrom cyber.python.cyber_py3 import cyber\nfrom cyber.python.cyber_py3 import record\nfrom cyber.demo_base_proto.student_pb2 import Student\n\nif __name__ == \"__main__\":\n    cyber.init()\n    print(\"record write ....\")\n    # 1.\u521b\u5efa\u5199\u51fa\u5bf9\u8c61\uff1b\n    writer = record.RecordWriter()\n    # 2.\u8bbe\u7f6e\u5199\u51fa\u53c2\u6570\uff1b\n    writer.set_size_fileseg(0)\n    writer.set_intervaltime_fileseg(0)\n    # 3.\u6253\u5f00\u6587\u4ef6\u6d41\uff1b\n    writer.open(\"/apollo/cyber/demo_py/tools/mytest_py.record\")\n    # 4.\u7ec4\u7ec7\u6d88\u606f\uff1b\n    stu = Student()\n    stu.name = \"haha\"\n    stu.height = 1.78\n    stu.books.append(\"yuwen\")\n    stu.books.append(\"shuxue\")\n    stu.books.append(\"yingyu\")\n    print(\"full name:%s\" %stu.DESCRIPTOR.full_name)\n    channel = \"chatter_py\"\n    writer.write_channel(channel,\"cyber.demo_base_proto.Student\",\"test....\")\n    for seq in range(20):\n        stu.age = seq\n        writer.write_message(channel,stu.SerializeToString(),seq)\n\n    # 5.\u5199\u51fa\u6d88\u606f\uff1b\n    # 6.\u5173\u95ed\u6587\u4ef6\u6d41\u3002\n    writer.close()\n</code></pre> <p>\u914d\u7f6eBUILD\u6587\u4ef6\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>py_binary(\n    name = \"demo01_record_write_py\",\n    srcs = [\"demo01_record_write_py.py\"],\n    deps = [\n        \"//cyber/python/cyber_py3:cyber\",\n        \"//cyber/python/cyber_py3:record\",\n        \"//cyber/demo_base_proto:student_py\"\n    ] \n\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/332-python-shi-xian/#2","title":"2.\u53cd\u5e8f\u5217\u5316","text":"<p>demo_py/tools \u76ee\u5f55\u4e0b\u65b0\u5efa Python \u6587\u4ef6 demo02_record_read_py.py\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n\"\"\"  \n    \u9700\u6c42\uff1a\u5c06 student \u6d88\u606f\u5199\u5165\u5230\u78c1\u76d8\u6587\u4ef6\n    \u5b9e\u73b0\uff1a\n        1.\u521b\u5efa\u8bfb\u53d6\u5bf9\u8c61\uff1b\n        2.\u8bfb\u6d88\u606f\uff1b\n        3.\u5173\u95ed\u6587\u4ef6\u6d41\u3002\n\n\n\"\"\"\nfrom cyber.python.cyber_py3 import cyber\nfrom cyber.python.cyber_py3 import record\nfrom cyber.demo_base_proto.student_pb2 import Student\n\nif __name__ == \"__main__\":\n    cyber.init()\n    print(\"record read ....\")\n    reader = record.RecordReader(\"/apollo/cyber/demo_py/tools/mytest_py.record\")\n    msgs = reader.read_messages()\n    count = 0\n    for msg in msgs:\n        count += 1\n        print(\"=\" * 20)\n        print(\"data NO.%d\" % count)\n        print(\"channel_name:%s\" % msg[0])\n        print(\"msg num %d\" % reader.get_messagenumber(msg[0]))\n        print(\"data:%s\" % msg[1])\n        print(\"data type:%s\" % msg[2])\n        print(\"time %d\" % msg[3])\n\n        msg_new = Student()\n        msg_new.ParseFromString(msg[1])\n        print(msg_new)\n</code></pre> <p>\u914d\u7f6eBUILD\u6587\u4ef6\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>py_binary(\n    name = \"demo02_record_read_py\",\n    srcs = [\"demo02_record_read_py.py\"],\n    deps = [\n        \"//cyber/python/cyber_py3:cyber\",\n        \"//cyber/python/cyber_py3:record\",\n        \"//cyber/demo_base_proto:student_py\"\n    ] \n\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/di-3-zhang-cyber-rt-kai-fa-gong-ju/32-cyberrecorder/332-python-shi-xian/#3","title":"3.\u7f16\u8bd1\u6267\u884c","text":"<p>\u7f16\u8bd1\uff1a</p> <pre><code>bazel build cyber/demo_py/tools/...\n</code></pre> <p>\u6267\u884c\uff1a</p> <pre><code>source cyber/setup.bash\n</code></pre> <p>\u5148\u6267\u884c\u5e8f\u5217\u5316\u64cd\u4f5c\uff08\u6267\u884c\u5b8c\u6bd5\u5c06\u5728 demo_py/tools \u76ee\u5f55\u4e0b\u751f\u6210\u4e00\u4e2a\u540d\u4e3a mytest_py.record \u7684\u7528\u4e8e\u4fdd\u5b58\u6d88\u606f\u6570\u636e\u7684\u6587\u4ef6\uff09</p> <pre><code>./bazel-bin/cyber/demo_py/tools/demo01_record_write_py\n</code></pre> <p>\u518d\u6267\u884c\u53cd\u5e8f\u5217\u5316\u64cd\u4f5c\uff08\u6267\u884c\u5b8c\u6bd5\u5c06\u5728\u7ec8\u7aef\u8f93\u51fa\u6587\u4ef6\u4e2d\u4fdd\u5b58\u7684\u6d88\u606f\u5185\u5bb9\uff09</p> <pre><code>./bazel-bin/cyber/demo_py/tools/demo02_record_read_py\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/","title":"1apiwen dang","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/#41-api","title":"4.1 \u8282\u70b9\u76f8\u5173API","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/#c","title":"C++\u90e8\u5206","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/#1","title":"1.\u8282\u70b9\u521d\u59cb\u5316","text":"<pre><code>bool apollo::cyber::Init(const char* binary_name)\n</code></pre> <p>\u7528\u4e8e\u521d\u59cb\u5316 cyber \u6846\u67b6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/#2","title":"2.\u8282\u70b9\u521b\u5efa","text":"<p>\u5728CyberRT\u6846\u67b6\u4e2d\uff0c\u8282\u70b9\u662f\u6700\u57fa\u672c\u7684\u5355\u5143\uff0c\u7c7b\u4f3c\u4e8e\u53e5\u67c4\u7684\u89d2\u8272\u3002 \u5728\u521b\u5efa\u7279\u5b9a\u7684\u51fd\u6570\u5bf9\u8c61\\(\u5199\u5165\u5668\u3001\u8bfb\u53d6\u5668\u7b49\\)\u65f6\uff0c\u9700\u8981\u57fa\u4e8e\u73b0\u6709\u7684\u8282\u70b9\u5b9e\u4f8b\u521b\u5efa\u5b83\u3002 \u521b\u5efa\u8282\u70b9\u754c\u9762\u5982\u4e0b\u6240\u793a:</p> <pre><code>std::unique_ptr&lt;Node&gt; apollo::cyber::CreateNode(const std::string&amp; node_name, const std::string&amp; name_space = \"\");\n</code></pre> <p>\u53c2\u6570:</p> <ul> <li> <p>Node_name:\u8282\u70b9\u540d\uff0c\u5168\u5c40\u552f\u4e00\u6807\u8bc6</p> </li> <li> <p>Name_space:\u8282\u70b9\u6240\u5728\u7a7a\u95f4\u7684\u540d\u79f0</p> </li> </ul> <p>Name_space\u9ed8\u8ba4\u4e3a\u7a7a\u3002 \u5b83\u662f\u4e0enode_name\u8fde\u63a5\u7684\u7a7a\u95f4\u7684\u540d\u79f0\u3002 \u683c\u5f0f\u4e3a/namespace/node_name</p> <p>\u8fd4\u56de\u503c:</p> <p>\u4e00\u4e2a\u6307\u5411Node\u7684\u667a\u80fd\u6307\u9488</p> <p>\u5f53cyber::Init()\u672a\u88ab\u8c03\u7528\u65f6\uff0c\u7cfb\u7edf\u5904\u4e8e\u672a\u521d\u59cb\u5316\u72b6\u6001\uff0c\u65e0\u6cd5\u521b\u5efa\u8282\u70b9\uff0c\u8fd4\u56denullptr</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/#3","title":"3.\u8282\u70b9\u72b6\u6001\u5224\u65ad","text":"<p>\u5224\u65ad\u8282\u70b9\u72b6\u6001:</p> <pre><code>apollo::cyber::OK()\n</code></pre> <p>\u8fd4\u56de\u503c: true \u6b63\u5e38\uff0c\u5426\u5219 false</p> <p>\u5f85\u6d4b\u8bd5</p> <pre><code>bool IsShutdown()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/#4","title":"4.\u8282\u70b9\u91ca\u653e","text":"<p>\u7a0b\u5e8f\u5173\u95ed\u65f6\uff0c\u9700\u8981\u91ca\u653e\u8282\u70b9\u8d44\u6e90\u3002</p> <pre><code>void apollo::cyber::WaitForShutdown()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/#python","title":"Python\u90e8\u5206","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/#1_1","title":"1.\u8282\u70b9\u521d\u59cb\u5316","text":"<pre><code>##\n# @brief init cyber environment.\n# @param module_name Used as the log file name.\n#\n# @return Success is True, otherwise False.\ndef init(module_name=\"cyber_py\"):\n    \"\"\"\n    init cyber environment.\n    \"\"\"\n    return _CYBER.py_init(module_name)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/#2_1","title":"2.\u8282\u70b9\u521b\u5efa","text":"<pre><code>class Node(object):\n\n    \"\"\"\n    Class for cyber Node wrapper.\n    \"\"\"\n\n    def __init__(self, name):\n        self.node = _CYBER.new_PyNode(name)\n        self.list_writer = []\n        self.list_reader = []\n        self.subs = {}\n        self.pubs = {}\n        self.list_client = []\n        self.list_service = []\n        self.mutex = threading.Lock()\n        self.callbacks = {}\n        self.services = {}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/#3_1","title":"3.\u8282\u70b9\u72b6\u6001\u5224\u65ad","text":"<pre><code>def ok():\n    \"\"\"\n    is cyber envi ok.\n    \"\"\"\n    return _CYBER.py_ok()\n\n\ndef is_shutdown():\n    \"\"\"\n    is cyber shutdown.\n    \"\"\"\n    return _CYBER.py_is_shutdown()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/1apiwen-dang/#4_1","title":"4.\u8282\u70b9\u91ca\u653e","text":"<pre><code>def shutdown():\n    \"\"\"\n    shutdown cyber envi.\n    \"\"\"\n    return _CYBER.py_shutdown()\n\n\ndef waitforshutdown():\n    \"\"\"\n    wait until the cyber is shutdown.\n    \"\"\"\n    return _CYBER.py_waitforshutdown()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/","title":"2shi jian xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/#42-api","title":"4.2 \u8bdd\u9898\u76f8\u5173API","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/#c","title":"C++\u90e8\u5206","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/#1","title":"1.\u8bdd\u9898\u53d1\u5e03\u65b9","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/#1-1","title":"1-1.\u53d1\u5e03\u65b9\u521b\u5efa","text":"<p>writer\u662fCyberRT\u4e2d\u7528\u6765\u53d1\u9001\u6d88\u606f\u7684\u57fa\u672c\u5de5\u5177\u3002 \u6bcf\u4e2a\u5199\u5165\u5668\u5bf9\u5e94\u4e00\u4e2a\u5177\u6709\u7279\u5b9a\u6570\u636e\u7c7b\u578b\u7684\u901a\u9053\u3002 \u5199\u5165\u5668\u662f\u7531\u8282\u70b9\u7c7b\u4e2d\u7684CreateWriter\u63a5\u53e3\u521b\u5efa\u7684\u3002 \u63a5\u53e3\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>//create writer with specific channel name and message type\nauto CreateWriter(const std::string&amp; channel_name)\n    -&gt; std::shared_ptr&lt;transport::Writer&lt;MessageT&gt;&gt;;\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li> <p>Channel_name:\u8981\u5199\u5165\u7684\u901a\u9053\u540d</p> </li> <li> <p>MessageT:\u8981\u5199\u51fa\u7684\u6d88\u606f\u7684\u7c7b\u578b</p> </li> </ul> <p>\u8fd4\u56de\u503c\uff1a\u6307\u5411Writer\u5bf9\u8c61\u7684\u5171\u4eab\u6307\u9488</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/#1-2","title":"1-2.\u53d1\u5e03\u6d88\u606f","text":"<p>\u53d1\u5e03\u6d88\u606f\u51fd\u6570\uff1a</p> <pre><code>template &lt;typename MessageT&gt;\nbool Writer&lt;MessageT&gt;::Write(const std::shared_ptr&lt;MessageT&gt;&amp; msg_ptr)\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>msg_ptr \u88ab\u53d1\u9001\u7684\u6d88\u606f</li> <li>MessageT:\u8981\u5199\u51fa\u7684\u6d88\u606f\u7684\u7c7b\u578b</li> </ul> <p>\u8fd4\u56de\u503c\uff1abool\u503c\uff0c\u662f\u5426\u53d1\u9001\u6d88\u606f\u6210\u529f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/#2","title":"2.\u8bdd\u9898\u8ba2\u9605\u65b9","text":"<p>\u9605\u8bfb\u5668\u662f\u7f51\u7edc\u4e2d\u63a5\u6536\u4fe1\u606f\u7684\u57fa\u672c\u8bbe\u5907\u3002 Reader\u5fc5\u987b\u5728\u521b\u5efa\u56de\u8c03\u51fd\u6570\u65f6\u7ed1\u5b9a\u5230\u56de\u8c03\u51fd\u6570\u3002 \u5f53\u65b0\u6d88\u606f\u5230\u8fbe\u901a\u9053\u65f6\uff0c\u5c06\u8c03\u7528\u56de\u8c03\u3002 \u9605\u8bfb\u5668\u662f\u7531\u8282\u70b9\u7c7b\u7684CreateReader\u63a5\u53e3\u521b\u5efa\u7684\u3002 \u63a5\u53e3\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>template &lt;typename MessageT&gt;\nauto CreateReader(const std::string&amp; channel_name, const std::function&lt;void(const std::shared_ptr&lt;MessageT&gt;&amp;)&gt;&amp; reader_func)\n    -&gt; std::shared_ptr&lt;Reader&lt;MessageT&gt;&gt;;\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li> <p>MessageT:\u8981\u8bfb\u53d6\u7684\u6d88\u606f\u7c7b\u578b</p> </li> <li> <p>Channel_name:\u8981\u63a5\u6536\u7684\u901a\u9053\u540d</p> </li> <li> <p>Reader_func:\u5904\u7406\u6d88\u606f\u7684\u56de\u8c03\u51fd\u6570</p> </li> </ul> <p>\u8fd4\u56de\u503c\uff1a\u6307\u5411Reader\u5bf9\u8c61\u7684\u5171\u4eab\u6307\u9488</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/#python","title":"Python\u90e8\u5206","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/#1_1","title":"1.\u8bdd\u9898\u53d1\u5e03\u65b9","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/#1-1_1","title":"1-1.\u53d1\u5e03\u65b9\u521b\u5efa","text":"<pre><code>def create_writer(self, name, data_type, qos_depth=1):\n        \"\"\"\n        create a topic writer for send message to topic.\n        @param self\n        @param name str: topic name\n        @param data_type proto: message class for serialization\n        \"\"\"\n\n   def create_reader(self, name, data_type, callback, args=None):\n        \"\"\"\n        create a topic reader for receive message from topic.\n        @param self\n        @param name str: topic name\n        @param data_type proto: message class for serialization\n        @callback fn: function to call (fn(data)) when data is\n                   received. If args is set, the function must\n                   accept the args as a second argument,\n                   i.e. fn(data, args)\n        @args any: additional arguments to pass to the callback\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/#1-2_1","title":"1-2.\u53d1\u5e03\u6d88\u606f","text":"<pre><code>##\n    # @brief write message.\n    #\n    # @param data is a message type.\n    #\n    # @return Success is 0, otherwise False.\n    def write(self, data):\n        \"\"\"\n        writer message string\n        \"\"\"\n        return _CYBER.PyWriter_write(self.writer, data.SerializeToString())\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/2shi-jian-xiang-guan-api/#2_1","title":"2.\u8bdd\u9898\u8ba2\u9605\u65b9","text":"<pre><code>    ##\n    # @brief create a channel reader for receive message from another channel.\n    #\n    # @param name the channel name to read.\n    # @param data_type  message class for serialization\n    # @param callback function to call (fn(data)) when data is received. If\n    # args is set, the function must accept the args as a second argument,\n    # i.e. fn(data, args)\n    # @param args additional arguments to pass to the callback\n    #\n    # @return return the writer object.\n    def create_reader(self, name, data_type, callback, args=None):\n        \"\"\"\n        create a channel reader for receive message from another channel.\n        \"\"\"\n</code></pre> <pre><code>    def spin(self):\n        \"\"\"\n        spin for every 0.002s.\n        \"\"\"\n        while not _CYBER.py_is_shutdown():\n            time.sleep(0.002)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/","title":"3ding shi qi xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#43-api","title":"4.3 \u670d\u52a1\u76f8\u5173API","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#c","title":"C++\u90e8\u5206","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#1","title":"1.\u670d\u52a1\u7aef","text":"<p>\u670d\u52a1\u7aef\u521b\u5efa\uff1a</p> <pre><code>template &lt;typename Request, typename Response&gt;\nauto Node::CreateService(\n    const std::string&amp; service_name,\n    const typename Service&lt;Request, Response&gt;::ServiceCallback&amp;\n        service_callback)-&gt; std::shared_ptr&lt;Service&lt;Request, Response&gt;&gt;\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li> <p>Request \u8bf7\u6c42\u6570\u636e\u7c7b\u578b</p> </li> <li> <p>Response \u54cd\u5e94\u6570\u636e\u7c7b\u578b</p> </li> <li> <p>service_name \u5173\u8054\u8bf7\u6c42\u4e0e\u54cd\u5e94\u7684\u670d\u52a1\u540d\u79f0</p> </li> <li> <p>service_callback \u5904\u7406\u8bf7\u6c42\u7684\u56de\u8c03\u51fd\u6570</p> </li> </ul> <p>\u8fd4\u56de\u503c\uff1a\u6307\u5411\u670d\u52a1\u5bf9\u8c61\u7684\u5171\u4eab\u6307\u9488</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#2","title":"2.\u5ba2\u6237\u7aef","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#2-1","title":"2-1.\u521b\u5efa\u5ba2\u6237\u7aef","text":"<pre><code>template &lt;typename Request, typename Response&gt;\nauto Node::CreateClient(const std::string&amp; service_name)\n    -&gt; std::shared_ptr&lt;Client&lt;Request, Response&gt;&gt;\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li> <p>Request \u8bf7\u6c42\u6570\u636e\u7c7b\u578b</p> </li> <li> <p>Response \u54cd\u5e94\u6570\u636e\u7c7b\u578b</p> </li> <li> <p>service_name: \u5173\u8054\u8bf7\u6c42\u4e0e\u54cd\u5e94\u7684\u670d\u52a1\u540d\u79f0</p> </li> </ul> <p>\u8fd4\u56de\u503c\uff1a\u6307\u5411\u5ba2\u6237\u7aef\u5bf9\u8c61\u7684\u5171\u4eab\u6307\u9488</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#2-2","title":"2-2.\u7b49\u5f85\u670d\u52a1","text":"<pre><code>  template &lt;typename RatioT = std::milli&gt;\n  bool WaitForService(std::chrono::duration&lt;int64_t, RatioT&gt; timeout =\n                          std::chrono::duration&lt;int64_t, RatioT&gt;(-1))\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li> <p>RatioT \u65f6\u95f4\u5355\u4f4d</p> </li> <li> <p>timeout \u8d85\u65f6\u65f6\u95f4</p> </li> </ul> <p>\u8fd4\u56de\u503c\uff1a\u670d\u52a1\u662f\u5426\u542f\u52a8\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#2-2_1","title":"2-2.\u53d1\u9001\u8bf7\u6c42","text":"<pre><code>template &lt;typename Request, typename Response&gt;\ntypename Client&lt;Request, Response&gt;::SharedResponse\nClient&lt;Request, Response&gt;::SendRequest(SharedRequest request,\n                                       const std::chrono::seconds&amp; timeout_s)\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li> <p>Request \u8bf7\u6c42\u6570\u636e\u7c7b\u578b</p> </li> <li> <p>Response \u54cd\u5e94\u6570\u636e\u7c7b\u578b</p> </li> <li> <p>request \u8bf7\u6c42\u5bf9\u8c61\u7684\u5171\u4eab\u6307\u9488</p> </li> </ul> <p>\u8fd4\u56de\u503c\uff1a\u6307\u5411\u54cd\u5e94\u5bf9\u8c61\u7684\u5171\u4eab\u6307\u9488</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#python","title":"Python\u90e8\u5206","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#1_1","title":"1.\u670d\u52a1\u7aef","text":"<p>\u670d\u52a1\u7aef\u521b\u5efa\uff1a</p> <pre><code>   ##\n    # @brief create client for the c/s.\n    #\n    # @param name the service name.\n    # @param req_data_type the request message type.\n    # @param res_data_type the response message type.\n    # @param callback function to call (fn(data)) when data is received. If\n    # args is set, the function must accept the args as a second argument,\n    # i.e. fn(data, args)\n    # @param args additional arguments to pass to the callback.\n    #\n    # @return return the service object.\n    def create_service(self, name, req_data_type, res_data_type, callback,\n                       args=None)\n</code></pre> <pre><code>    def spin(self):\n        \"\"\"\n        spin for every 0.002s.\n        \"\"\"\n        while not _CYBER.py_is_shutdown():\n            time.sleep(0.002)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#2_1","title":"2.\u5ba2\u6237\u7aef","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#2-1_1","title":"2-1.\u521b\u5efa\u5ba2\u6237\u7aef","text":"<pre><code>    ##\n    # @brief create client for the c/s.\n    #\n    # @param name the service name.\n    # @param request_data_type the request message type.\n    # @param response_data_type the response message type.\n    #\n    # @return the client object.\n    def create_client(self, name, request_data_type, response_data_type)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/3ding-shi-qi-xiang-guan-api/#2-2_2","title":"2-2.\u53d1\u9001\u8bf7\u6c42","text":"<pre><code>    ##\n    # @brief send request message to service.\n    #\n    # @param data is a message type.\n    #\n    # @return None or response from service.\n    def send_request(self, data):\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/","title":"44 can shu xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#44-api","title":"4.4 \u53c2\u6570\u76f8\u5173API","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#c","title":"C++\u90e8\u5206","text":"<p>Parameter Service\u7528\u4e8e\u8282\u70b9\u95f4\u5171\u4eab\u6570\u636e\uff0c\u63d0\u4f9bset\u3001get\u3001list\u7b49\u57fa\u672c\u64cd\u4f5c\u3002\u53c2\u6570\u670d\u52a1\u57fa\u4e8e\u670d\u52a1\u5b9e\u73b0\uff0c\u5305\u542b\u670d\u52a1\u548c\u5ba2\u6237\u7aef\uff0c\u88ab\u5171\u4eab\u7684\u6570\u636e\u5c01\u88c5\u4e3a Parameter \u5bf9\u8c61\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#1","title":"1.\u53c2\u6570\u5bf9\u8c61","text":"<p>\u6784\u9020\u51fd\u6570\uff1a</p> <pre><code>Parameter();  // Name is empty, type is NOT_SET\nexplicit Parameter(const Parameter&amp; parameter);\nexplicit Parameter(const std::string&amp; name);  // Type is NOT_SET\nParameter(const std::string&amp; name, const bool bool_value);\nParameter(const std::string&amp; name, const int int_value);\nParameter(const std::string&amp; name, const int64_t int_value);\nParameter(const std::string&amp; name, const float double_value);\nParameter(const std::string&amp; name, const double double_value);\nParameter(const std::string&amp; name, const std::string&amp; string_value);\nParameter(const std::string&amp; name, const char* string_value);\nParameter(const std::string&amp; name, const std::string&amp; msg_str,\n          const std::string&amp; full_name, const std::string&amp; proto_desc);\nParameter(const std::string&amp; name, const google::protobuf::Message&amp; msg);\n</code></pre> <p>\u6210\u5458\u51fd\u6570\uff1a</p> <pre><code>inline ParamType type() const;\ninline std::string TypeName() const;\ninline std::string Descriptor() const;\ninline const std::string Name() const;\ninline bool AsBool() const;\ninline int64_t AsInt64() const;\ninline double AsDouble() const;\ninline const std::string AsString() const;\nstd::string DebugString() const;\ntemplate &lt;typename Type&gt;\ntypename std::enable_if&lt;std::is_base_of&lt;google::protobuf::Message, Type&gt;::value, Type&gt;::type\nvalue() const;\ntemplate &lt;typename Type&gt;\ntypename std::enable_if&lt;std::is_integral&lt;Type&gt;::value &amp;&amp; !std::is_same&lt;Type, bool&gt;::value, Type&gt;::type\nvalue() const;\ntemplate &lt;typename Type&gt;\ntypename std::enable_if&lt;std::is_floating_point&lt;Type&gt;::value, Type&gt;::type\nvalue() const;\ntemplate &lt;typename Type&gt;\ntypename std::enable_if&lt;std::is_convertible&lt;Type, std::string&gt;::value, const std::string&amp;&gt;::type\nvalue() const;\ntemplate &lt;typename Type&gt;\ntypename std::enable_if&lt;std::is_same&lt;Type, bool&gt;::value, bool&gt;::type\nvalue() const;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#2","title":"2.\u53c2\u6570\u670d\u52a1\u7aef","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#2-1","title":"2-1.\u521b\u5efa\u53c2\u6570\u670d\u52a1\u7aef","text":"<p>\u6784\u9020\u51fd\u6570</p> <pre><code>explicit ParameterService(const std::shared_ptr&lt;Node&gt;&amp; node);\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>node \u8282\u70b9\u7684\u5171\u4eab\u6307\u9488</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#2-2","title":"2-2.\u64cd\u4f5c\u53c2\u6570","text":"<p>\u8bbe\u7f6e\u53c2\u6570</p> <pre><code>void SetParameter(const Parameter&amp; parameter);\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>\u53c2\u6570\u5bf9\u8c61</li> </ul> <p>\u83b7\u53d6\u67d0\u4e2a\u53c2\u6570</p> <pre><code>bool GetParameter(const std::string&amp; param_name, Parameter* parameter);\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>param_name \u8981\u83b7\u53d6\u7684\u53c2\u6570\u540d\u79f0</li> <li>parameter \u4fdd\u5b58\u53c2\u6570\u7684\u53c2\u6570\u5bf9\u8c61\u6307\u9488</li> </ul> <p>\u8fd4\u56de\u503c\uff1a\u83b7\u53d6\u6210\u529f\u8fd4\u56detrue\uff0c\u8c03\u7528\u670d\u52a1\u5931\u8d25\u6216\u8d85\u65f6\u8fd4\u56defalse</p> <p>\u83b7\u53d6\u6240\u6709\u53c2\u6570</p> <pre><code>bool ListParameters(std::vector&lt;Parameter&gt;* parameters);\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>parameters \u7528\u4e8e\u4fdd\u5b58\u6240\u83b7\u53d6\u7684\u6240\u6709\u53c2\u6570\u7684 vector \u6307\u9488</li> </ul> <p>\u8fd4\u56de\u503c\uff1a\u83b7\u53d6\u6210\u529f\u8fd4\u56detrue\uff0c\u8c03\u7528\u670d\u52a1\u5931\u8d25\u6216\u8d85\u65f6\u8fd4\u56defalse</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#3","title":"3.\u53c2\u6570\u5ba2\u6237\u7aef","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#2-1_1","title":"2-1.\u521b\u5efa\u53c2\u6570\u670d\u52a1\u7aef","text":"<p>\u6784\u9020\u51fd\u6570</p> <pre><code>ParameterClient(const std::shared_ptr&lt;Node&gt;&amp; node, const std::string&amp; service_node_name);\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>node \u8282\u70b9\u7684\u5171\u4eab\u6307\u9488</li> <li>service_node_name \u53c2\u6570\u670d\u52a1\u7aef\u7684\u8282\u70b9\u540d\u79f0</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#2-2_1","title":"2-2.\u64cd\u4f5c\u53c2\u6570","text":"<p>\u8bbe\u7f6e\u53c2\u6570</p> <pre><code>void SetParameter(const Parameter&amp; parameter);\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>\u53c2\u6570\u5bf9\u8c61</li> </ul> <p>\u83b7\u53d6\u67d0\u4e2a\u53c2\u6570</p> <pre><code>/**\n * @brief Get the Parameter object\n *\n * @param param_name\n * @param parameter the pointer to store\n * @return true\n * @return false call service fail or timeout\n */\nbool GetParameter(const std::string&amp; param_name, Parameter* parameter);\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>param_name \u8981\u83b7\u53d6\u7684\u53c2\u6570\u540d\u79f0</li> <li>parameter \u4fdd\u5b58\u53c2\u6570\u7684\u53c2\u6570\u5bf9\u8c61\u6307\u9488</li> </ul> <p>\u8fd4\u56de\u503c\uff1a\u83b7\u53d6\u6210\u529f\u8fd4\u56detrue\uff0c\u8c03\u7528\u670d\u52a1\u5931\u8d25\u6216\u8d85\u65f6\u8fd4\u56defalse</p> <p>\u83b7\u53d6\u6240\u6709\u53c2\u6570</p> <pre><code>bool ListParameters(std::vector&lt;Parameter&gt;* parameters);\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>parameters \u7528\u4e8e\u4fdd\u5b58\u6240\u83b7\u53d6\u7684\u6240\u6709\u53c2\u6570\u7684 vector \u6307\u9488</li> </ul> <p>\u8fd4\u56de\u503c\uff1a\u83b7\u53d6\u6210\u529f\u8fd4\u56detrue\uff0c\u8c03\u7528\u670d\u52a1\u5931\u8d25\u6216\u8d85\u65f6\u8fd4\u56defalse</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#python","title":"Python\u90e8\u5206","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#1_1","title":"1.\u53c2\u6570\u5bf9\u8c61","text":"<pre><code>class Parameter(object):\n\n    \"\"\"\n    Class for Parameter wrapper.\n    \"\"\"\n\n    def __init__(self, name, value=None)\n</code></pre> <pre><code>    def as_string(self):\n        \"\"\"\n        return native value\n        \"\"\"\n        return _CYBER_PARAM.PyParameter_as_string(self.param)\n\n    def as_double(self):\n        \"\"\"\n        return native value\n        \"\"\"\n        return _CYBER_PARAM.PyParameter_as_double(self.param)\n\n    def as_int64(self):\n        \"\"\"\n        return native value\n        \"\"\"\n        return _CYBER_PARAM.PyParameter_as_int64(self.param)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#2_1","title":"2.\u53c2\u6570\u670d\u52a1\u7aef","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#2-1_2","title":"2-1.\u521b\u5efa\u53c2\u6570\u670d\u52a1\u7aef","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#2-2_2","title":"2-2.\u64cd\u4f5c\u53c2\u6570","text":"<pre><code>class ParameterServer(object):\n\n    \"\"\"\n    Class for ParameterServer wrapper.\n    \"\"\"\n\n    ##\n    # @brief constructor the ParameterServer by the node object.\n    #\n    # @param node the node to support the parameter server.\n    def __init__(self, node):\n        self.param_srv = _CYBER_PARAM.new_PyParameterServer(node.node)\n\n    def __del__(self):\n        _CYBER_PARAM.delete_PyParameterServer(self.param_srv)\n\n    def set_parameter(self, param):\n        \"\"\"\n        set parameter, param is Parameter.\n        \"\"\"\n        return _CYBER_PARAM.PyParameter_srv_set_parameter(self.param_srv, param.param)\n\n    def get_parameter(self, param_name):\n        \"\"\"\n        get Parameter by param name param_name.\n        \"\"\"\n        return Parameter(_CYBER_PARAM.PyParameter_srv_get_parameter(self.param_srv, param_name))\n\n    def get_paramslist(self):\n        \"\"\"\n        get all params of this parameterserver.\n        \"\"\"\n        pycapsulelist = _CYBER_PARAM.PyParameter_srv_get_parameter_list(\n            self.param_srv)\n        param_list = []\n        for capsuleobj in pycapsulelist:\n            param_list.append(Parameter(capsuleobj))\n        return param_list\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/44-can-shu-xiang-guan-api/#3_1","title":"3.\u53c2\u6570\u5ba2\u6237\u7aef","text":"<pre><code>class ParameterClient(object):\n\n    \"\"\"\n    Class for ParameterClient wrapper.\n    \"\"\"\n\n    ##\n    # @brief constructor the ParameterClient by a node and the parameter server node name.\n    #\n    # @param node a node to create client.\n    # @param server_node_name the parameter server's node name.\n    def __init__(self, node, server_node_name):\n        self.param_clt = _CYBER_PARAM.new_PyParameterClient(\n            node.node, server_node_name)\n\n    def __del__(self):\n        _CYBER_PARAM.delete_PyParameterClient(self.param_clt)\n\n    def set_parameter(self, param):\n        \"\"\"\n        set parameter, param is Parameter.\n        \"\"\"\n        return _CYBER_PARAM.PyParameter_clt_set_parameter(self.param_clt, param.param)\n\n    def get_parameter(self, param_name):\n        \"\"\"\n        get Parameter by param name param_name.\n        \"\"\"\n        return Parameter(_CYBER_PARAM.PyParameter_clt_get_parameter(self.param_clt, param_name))\n\n    def get_paramslist(self):\n        \"\"\"\n        get all params of the server_node_name parameterserver.\n        \"\"\"\n        pycapsulelist = _CYBER_PARAM.PyParameter_clt_get_parameter_list(\n            self.param_clt)\n        param_list = []\n        for capsuleobj in pycapsulelist:\n            param_list.append(Parameter(capsuleobj))\n        return param_list\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/45-zu-jian-xiang-guan-api/","title":"45 zu jian xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/45-zu-jian-xiang-guan-api/#45-api","title":"4.5 \u7ec4\u4ef6\u76f8\u5173API","text":"<p>\u7ec4\u4ef6\u53ea\u6709 C++ \u5b9e\u73b0\uff0c\u6ca1\u6709 Python \u5b9e\u73b0\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/45-zu-jian-xiang-guan-api/#c","title":"C++\u90e8\u5206","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/45-zu-jian-xiang-guan-api/#1","title":"1.\u7ec4\u4ef6\u63a5\u53e3","text":"<ul> <li> <p>Init() \u8be5\u51fd\u6570\u7528\u4e8e\u6267\u884c\u521d\u59cb\u5316\u64cd\u7eb5\uff1b</p> </li> <li> <p>Proc() \u8be5\u51fd\u6570\u7c7b\u4f3c\u4e8e\u8ba2\u9605\u65b9\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5f53\u63a5\u6536\u5230\u6d88\u606f\u65f6\u4f1a\u88ab\u8c03\u7528\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/45-zu-jian-xiang-guan-api/#2dag","title":"2.dag \u6587\u4ef6","text":"<ul> <li> <p>module_library\uff1a\u8981\u52a0\u8f7d\u7684 .so\u5e93\uff0c\u6839\u76ee\u5f55\u662fcyber\u7684\u5de5\u4f5c\u76ee\u5f55\uff08\u4e0esetup.bash\u540c\u76ee\u5f55\uff09\uff1b</p> </li> <li> <p>components &amp; timer_component\uff1a\u9009\u62e9\u9700\u8981\u52a0\u8f7d\u7684\u57fa\u7ec4\u4ef6\u7c7b\u7c7b\u578b\uff1b</p> </li> <li> <p>class_name\uff1a\u8981\u52a0\u8f7d\u7684\u7ec4\u4ef6\u7c7b\u7684\u540d\u79f0\uff1b</p> </li> <li> <p>name\uff1a\u52a0\u8f7d\u7684class_name\u4f5c\u4e3a\u52a0\u8f7d\u793a\u4f8b\u7684\u6807\u8bc6\u7b26\uff1b</p> </li> <li> <p>reader\uff1a\u5f53\u524d\u7ec4\u4ef6\u63a5\u6536\u5230\u7684\u6570\u636e\uff0c\u652f\u63011-3\u8def\u6570\u636e\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/45-zu-jian-xiang-guan-api/#3launch","title":"3.launch \u6587\u4ef6","text":"<p>cyber_launch \u662f Cyber\u200b\u200b RT \u6846\u67b6\u7684\u542f\u52a8\u5668\u3002\u5b83\u6839\u636elaunch\u6587\u4ef6\u542f\u52a8\u591a\u4e2a mainboard\uff0c\u6839\u636edag\u6587\u4ef6\u5c06\u4e0d\u540c\u7684\u7ec4\u4ef6\u52a0\u8f7d\u5230\u4e0d\u540c\u7684mainboard \u4e2d\u3002 cyber_launch \u652f\u6301\u52a8\u6001\u52a0\u8f7d\u7ec4\u4ef6\u6216\u5728\u5b50\u8fdb\u7a0b\u4e2d\u542f\u52a8\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u7684\u4e24\u79cd\u65b9\u6848\u3002</p> <p>module\uff1a\u6bcf\u4e2a\u52a0\u8f7d\u7684\u7ec4\u4ef6\u6216\u4e8c\u8fdb\u5236\u6587\u4ef6\u90fd\u662f\u4e00\u4e2a\u6a21\u5757</p> <ul> <li> <p>name \u662f\u52a0\u8f7d\u7684\u6a21\u5757\u540d\u79f0\uff1b</p> </li> <li> <p>dag_conf \u662f\u7ec4\u4ef6\u5bf9\u5e94\u7684dag\u6587\u4ef6\u540d\uff1b</p> </li> <li> <p>process_name \u662f mainboard \u8fdb\u7a0b\u542f\u52a8\u540e\u7684\u540d\u79f0\uff0cprocess_name \u76f8\u540c\u7684\u7ec4\u4ef6\u4f1a\u88ab\u52a0\u8f7d\u5e76\u8fd0\u884c\u5728\u540c\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u3002</p> </li> <li> <p>exception_handler \u662f\u8fdb\u7a0b\u53d1\u751f\u5f02\u5e38\u65f6\u7684\u5904\u7406\u65b9\u6cd5\u3002\u8be5\u503c\u53ef\u4ee5\u662f\u4e0b\u9762\u5217\u51fa\u7684 exit \u6216 respawn\u3002</p> </li> <li> <p>exit, \u8fd9\u610f\u5473\u7740\u5f53\u5f53\u524d\u8fdb\u7a0b\u5f02\u5e38\u9000\u51fa\u65f6\uff0c\u6574\u4e2a\u8fdb\u7a0b\u9700\u8981\u505c\u6b62\u8fd0\u884c\u3002</p> </li> <li>respawn,\u5f53\u524d\u8fdb\u7a0b\u5f02\u5e38\u9000\u51fa\u540e\u9700\u8981\u91cd\u542f\u3002</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/","title":"46 shi jian xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/#46-api","title":"4.6 \u65f6\u95f4\u76f8\u5173API","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/#c","title":"C++\u90e8\u5206","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/#1-time","title":"1. Time","text":"<p>time\u662f\u4e00\u4e2a\u7528\u6765\u7ba1\u7406\u65f6\u95f4\u7684\u7c7b\uff1b\u53ef\u7528\u4e8e\u5f53\u524d\u65f6\u95f4\u83b7\u53d6\u3001\u8017\u65f6\u8ba1\u7b97\u3001\u65f6\u95f4\u8f6c\u6362\u7b49\u3002</p> <pre><code>static const Time MAX;\nstatic const Time MIN;\nTime() {}\nexplicit Time(uint64_t nanoseconds);\nexplicit Time(int nanoseconds);\nexplicit Time(double seconds);\nTime(uint32_t seconds, uint32_t nanoseconds);\nTime(const Time&amp; other);\nstatic Time Now();\nstatic Time MonoTime();\nstatic void SleepUntil(const Time&amp; time);\ndouble ToSecond() const;\nuint64_t ToNanosecond() const;\nstd::string ToString() const;\nbool IsZero() const;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/#2duration","title":"2.Duration","text":"<p>\u6301\u7eed\u65f6\u95f4\u76f8\u5173\u63a5\u53e3\uff0c\u7528\u4e8e\u8868\u793a\u65f6\u95f4\u95f4\u9694\uff0c\u53ef\u4ee5\u6309\u7167\u6307\u5b9a\u7684\u7eb3\u79d2\u6216\u8005\u79d2\u8fdb\u884c\u521d\u59cb\u5316\u3002</p> <pre><code>Duration() {}\nDuration(int64_t nanoseconds);\nDuration(int nanoseconds);\nDuration(double seconds);\nDuration(uint32_t seconds, uint32_t nanoseconds);\nDuration(const Rate&amp; rate);\nDuration(const Duration&amp; other);\ndouble ToSecond() const;\nint64_t ToNanosecond() const;\nbool IsZero() const;\nvoid Sleep() const;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/#3rate","title":"3.Rate","text":"<p>\u9891\u7387\u63a5\u53e3\u4e00\u822c\u7528\u4e8e\u4f11\u7720\u64cd\u4f5c\\(\u4f1a\u81ea\u52a8\u5c06\u9891\u7387\u6362\u7b97\u6210\u4f11\u7720\u65f6\u95f4\\)\u3002</p> <pre><code>Rate(double frequency);\nRate(uint64_t nanoseconds);\nRate(const Duration&amp;);\nvoid Sleep();\nvoid Reset();\nDuration CycleTime() const;\nDuration ExpectedCycleTime() const { return expected_cycle_time_; }\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/#4timer","title":"4.Timer","text":"<p>\u5b9a\u65f6\u5668\u53ef\u7528\u4e8e\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1\u4ee5\u5468\u671f\u6027\u7684\u8fd0\u884c\uff0c\u6216\u53ea\u8fd0\u884c\u4e00\u6b21</p> <pre><code>Timer(uint32_t period, std::function&lt;void()&gt; callback, bool oneshot);\nTimer(TimerOption opt);\nvoid SetTimerOption(TimerOption opt);\nvoid Start();\nvoid Stop();\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/#python","title":"Python\u90e8\u5206","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/#1time","title":"1.Time","text":"<pre><code>class Time(object):\n    @staticmethod\n    def now():\n        time_now = Time(_CYBER_TIME.PyTime_now())\n        return time_now\n\n    @staticmethod\n    def mono_time():\n        mono_time = Time(_CYBER_TIME.PyTime_mono_time())\n        return mono_time\n\n    def to_sec(self):\n        return _CYBER_TIME.PyTime_to_sec(self.time)\n\n    def to_nsec(self):\n        return _CYBER_TIME.PyTime_to_nsec(self.time)\n\n    def sleep_until(self, nanoseconds):\n        return _CYBER_TIME.PyTime_sleep_until(self.time, nanoseconds)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/#2timer","title":"2.Timer","text":"<pre><code>class Timer(object):\n\n    def set_option(self, period, callback, oneshot=0):\n        '''\n        period The period of the timer, unit is ms\n        callback The tasks that the timer needs to perform\n        oneshot 1: perform the callback only after the first timing cycle\n                0:perform the callback every timed period\n        '''\n\n\n    def start(self):\n\n\n    def stop(self):\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/#3duration","title":"3.Duration","text":"<pre><code>class Duration(object):\n\n    \"\"\"\n    Class for cyber Duration wrapper.\n    \"\"\"\n\n    def __init__(self, other):\n        if isinstance(other, int):\n            self.nanoseconds_ = other\n        elif isinstance(other, float):\n            self.nanoseconds_ = other * 1000000000\n        elif isinstance(other, Duration):\n            self.nanoseconds_ = other.nanoseconds_\n        self.duration_ = _CYBER_TIME.new_PyDuration(int(self.nanoseconds_))\n\n    def __del__(self):\n        _CYBER_TIME.delete_PyDuration(self.duration_)\n\n    def sleep(self):\n        \"\"\"\n        sleep for the amount of time specified by the duration.\n        \"\"\"\n        _CYBER_TIME.PyDuration_sleep(self.duration_)\n\n    def __str__(self):\n        return str(self.nanoseconds_)\n\n    def to_sec(self):\n        \"\"\"\n        convert to second.\n        \"\"\"\n        return float(self.nanoseconds_) / 1000000000\n\n    def to_nsec(self):\n        \"\"\"\n        convert to nanosecond.\n        \"\"\"\n        return self.nanoseconds_\n\n    def iszero(self):\n        return self.nanoseconds_ == 0\n\n    def __add__(self, other):\n        return Duration(self.nanoseconds_ + other.nanoseconds_)\n\n    def __radd__(self, other):\n        return Duration(self.nanoseconds_ + other.nanoseconds_)\n\n    def __sub__(self, other):\n        return Duration(self.nanoseconds_ - other.nanoseconds_)\n\n    def __lt__(self, other):\n        return self.nanoseconds_ &lt; other.nanoseconds_\n\n    def __gt__(self, other):\n        return self.nanoseconds_ &gt; other.nanoseconds_\n\n    def __le__(self, other):\n        return self.nanoseconds_ &lt;= other.nanoseconds_\n\n    def __ge__(self, other):\n        return self.nanoseconds_ &gt;= other.nanoseconds_\n\n    def __eq__(self, other):\n        return self.nanoseconds_ == other.nanoseconds_\n\n    def __ne__(self, other):\n        return self.nanoseconds_ != other.nanoseconds_\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/46-shi-jian-xiang-guan-api/#4rate","title":"4.Rate","text":"<pre><code>class Rate(object):\n\n    \"\"\"\n    Class for cyber Rate wrapper. Help run loops at a desired frequency.\n    \"\"\"\n\n    ##\n    # @brief Constructor, creates a Rate.\n    #\n    # @param other float means frequency the desired rate to run at in Hz.\n    # int means the expected_cycle_time.\n    def __init__(self, other):\n        if isinstance(other, int):\n            self.rate_ = _CYBER_TIME.new_PyRate(other)\n        elif isinstance(other, float):\n            self.rate_ = _CYBER_TIME.new_PyRate(int(1.0 / other))\n        elif isinstance(other, Duration):\n            self.rate_ = _CYBER_TIME.new_PyRate(other.to_nsec())\n\n    def __del__(self):\n        _CYBER_TIME.delete_PyRate(self.rate_)\n\n    def __str__(self):\n        return \"cycle_time = %s, exp_cycle_time = %s\" % (str(self.get_cycle_time()), str(self.get_expected_cycle_time()))\n\n    def sleep(self):\n        \"\"\"\n        Sleeps for any leftover time in a cycle.\n        \"\"\"\n        _CYBER_TIME.PyRate_sleep(self.rate_)\n\n    def reset(self):\n        \"\"\"\n        Sets the start time for the rate to now.\n        \"\"\"\n        _CYBER_TIME.PyRate_PyRate_reset(self.rate_)\n\n    def get_cycle_time(self):\n        \"\"\"\n        Get the actual run time of a cycle from start to sleep.\n        \"\"\"\n        return Duration(_CYBER_TIME.PyRate_get_cycle_time(self.rate_))\n\n    def get_expected_cycle_time(self):\n        \"\"\"\n        Get the expected cycle time.\n        \"\"\"\n        return Duration(_CYBER_TIME.PyRate_get_expected_cycle_time(self.rate_))\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/47-ri-zhi-xiang-guan-api/","title":"47 ri zhi xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/47-ri-zhi-xiang-guan-api/#47-api","title":"4.7 \u65e5\u5fd7\u76f8\u5173API","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/47-ri-zhi-xiang-guan-api/#c","title":"C++\u90e8\u5206","text":"<p>cyber \u7684\u65e5\u5fd7\u662f\u57fa\u4e8e glog \u7684\u3002</p> <p>\u4f7f\u7528\u65e5\u5fd7\u9700\u8981\u5012\u5165\u76f8\u5173\u5934\u6587\u4ef6:</p> <pre><code>#include \"cyber/common/log.h\"\n#include \"cyber/init.h\"\n</code></pre> <p>\u4e0d\u8fc7\u5728<code>#include cyber/cyber.h</code>\u65f6\uff0c\u8be5\u5934\u6587\u4ef6\u672c\u8eab\u5df2\u7ecf\u5305\u542b\u4e86\u4e0a\u8ff0\u4e24\u4e2a\u5934\u6587\u4ef6\uff0c\u6240\u4ee5\u65e0\u9700\u81ea\u5df1\u663e\u793a\u58f0\u660e\u4e86\u3002</p> <p>\u65e5\u5fd7\u521d\u59cb\u5316:</p> <pre><code>apollo::cyber::cyber::Init(argv[0]);\n</code></pre> <p>\u8be5\u5b9e\u73b0\u4f1a\u521d\u59cb\u5316\u65e5\u5fd7\u6a21\u5757\\(PS:HelloWorld\u6848\u4f8b\u4e2d\uff0c\u6ca1\u6709\u6267\u884c\u521d\u59cb\u5316\u8bed\u53e5\uff0c\u867d\u7136\u65e5\u5fd7\u8f93\u51fa\u4e86\uff0c\u4e0d\u8fc7\u63a7\u5236\u53f0\u7ed9\u51fa\u4e86\u8b66\u544a\\)\u3002</p> <p>\u65e5\u5fd7API:</p> <pre><code>AINFO &lt;&lt; \"INFO log\";\nAWARN &lt;&lt; \"WARNlog\";\nAERROR &lt;&lt; \"ERROR log\";\nAFATAL &lt;&lt; \"FATAL log\";\n</code></pre> <p>\u8f93\u51fa\u4e00\u4e9b\u5e38\u89c1\u7ea7\u522b\u7684\u65e5\u5fd7\u4fe1\u606f\u3002</p> <p>\u65e5\u5fd7\u914d\u7f6e</p> <p>\u5728 cyber \u4e2d\u63d0\u4f9b\u4e86\u65e5\u5fd7\u8f93\u51fa\u7684\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u662f cyber/setup.bash\uff0c\u6253\u5f00\u6587\u4ef6\uff0c\u5f00\u53d1\u8005\u53ef\u81ea\u5b9a\u4e49\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>export GLOG_log_dir=/apollo/data/log\nexport GLOG_alsologtostderr=0\nexport GLOG_colorlogtostderr=1\nexport GLOG_minloglevel=0\n</code></pre> <p>GLOG_log_dir: \u8f93\u51fa\u65e5\u5fd7\u7684\u4fdd\u5b58\u76ee\u5f55\uff1b</p> <p>GLOG_alsologtostderr:\u662f\u5426\u8f93\u51fa\u5728\u63a7\u5236\u53f0\uff0c0\u4e3a false\uff0c1\u4e3atrue\uff1b</p> <p>GLOG_colorlogtostderr:\u4e0d\u540c\u7ea7\u522b\u7684\u65e5\u5fd7\u662f\u5426\u4ee5\u4e0d\u540c\u989c\u8272\u533a\u5206\uff0c0\u7edf\u4e00\u989c\u8272\uff0c1\u8bbe\u7f6e\u4e0d\u540c\u989c\u8272\\(info \u4e3a\u767d\u8272\uff0cwarning\u4e3a\u9ec4\u8272\uff0cerror\u4e0efatal\u4e3a\u7ea2\u8272\\)\u3002</p> <p>GLOG_minloglevel:\u8f93\u51fa\u65e5\u5fd7\u7684\u6700\u4f4e\u7ea7\u522b,\u53d6\u503c\u4e3a[0,3],\u8d85\u51fa\u6b64\u8303\u56f4\u4f1a\u7f16\u8bd1\u5931\u8d25\u3002</p> <ul> <li> <p>0:\u8f93\u51fa\u5168\u90e8;</p> </li> <li> <p>1:\u8f93\u51fa\u8b66\u544a\u4ee5\u53ca\u4ee5\u4e0a;</p> </li> <li> <p>2:\u8f93\u51faerror\u4e0efatal;</p> </li> <li> <p>3:\u4e4b\u8f93\u51fafatal\u3002</p> </li> </ul> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u540c\u4e00\u6a21\u5757\u7684\u4e0d\u540c\u7ea7\u522b\u65e5\u5fd7\u5199\u5165\u5230\u7edf\u4e00\u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/47-ri-zhi-xiang-guan-api/#_1","title":"47 ri zhi xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/48-ben-zhang-xiao-jie/","title":"48 ben zhang xiao jie","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/48-ben-zhang-xiao-jie/#49","title":"4.9 \u672c\u7ae0\u5c0f\u7ed3","text":"<p>\u5c31\u662f\u4e00\u4e9bAPI\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/48-record-xiang-guan-api/","title":"48 record xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/48-record-xiang-guan-api/#48-record-api","title":"4.8 record \u76f8\u5173API","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/48-record-xiang-guan-api/#c","title":"C++\u90e8\u5206","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/48-record-xiang-guan-api/#1recordwriter","title":"1.RecordWriter","text":"<p>\u5199\u5165\u8bb0\u5f55\u6587\u4ef6\u63a5\u53e3\uff0c\u7528\u4e8e\u5c06\u6d88\u606f\u548c\u9891\u9053\u4fe1\u606f\u8bb0\u5f55\u5230\u8bb0\u5f55\u6587\u4ef6\u4e2d\u3002</p> <pre><code>RecordWriter();\nbool Open(const std::string&amp; file);\nvoid Close();\nbool WriteChannel(const std::string&amp; name, const std::string&amp; type,\n                  const std::string&amp; proto_desc);\ntemplate &lt;typename MessageT&gt;\nbool WriteMessage(const std::string&amp; channel_name, const MessageT&amp; message,\n                  const uint64_t time_nanosec,\n                  const std::string&amp; proto_desc = \"\");\nbool SetSizeOfFileSegmentation(uint64_t size_kilobytes);\nbool SetIntervalOfFileSegmentation(uint64_t time_sec);\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/48-record-xiang-guan-api/#2recordreader","title":"2.RecordReader","text":"<p>\u8bfb\u53d6\u8bb0\u5f55\u6587\u4ef6\u63a5\u53e3\u7528\u4e8e\u8bfb\u53d6\u8bb0\u5f55\u6587\u4ef6\u4e2d\u7684\u6d88\u606f\u548c\u9891\u9053\u4fe1\u606f\u3002</p> <pre><code>RecordReader();\nbool Open(const std::string&amp; filename, uint64_t begin_time = 0,\n          uint64_t end_time = UINT64_MAX);\nvoid Close();\nbool ReadMessage();\nbool EndOfFile();\nconst std::string&amp; CurrentMessageChannelName();\nstd::shared_ptr&lt;RawMessage&gt; CurrentRawMessage();\nuint64_t CurrentMessageTime();\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/Cyber_RT/zi-65993a-chang-yong-api/48-record-xiang-guan-api/#python","title":"Python\u90e8\u5206","text":"<pre><code>class RecordReader(object):\n    \"\"\"\n    Class for cyber RecordReader wrapper.\n    \"\"\"\n    def read_messages(self, start_time=0, end_time=18446744073709551615):\n        \"\"\"\n        read message from bag file.\n        @param self\n        @param start_time:\n        @param end_time:\n        @return: generator of (message, data_type, timestamp)\n        \"\"\"\n    def get_messagenumber(self, channel_name):\n        \"\"\"\n        return message count.\n        \"\"\"\n    def get_messagetype(self, channel_name):\n        \"\"\"\n        return message type.\n        \"\"\"\n    def get_protodesc(self, channel_name):\n        \"\"\"\n        return message protodesc.\n        \"\"\"\n    def get_headerstring(self):\n        \"\"\"\n        return message header string.\n        \"\"\"\n    def reset(self):\n        \"\"\"\n        return reset.\n        \"\"\"\n        return _CYBER_RECORD.PyRecordReader_Reset(self.record_reader)\n\n     def get_channellist(self):\n        \"\"\"\n        return channel list.\n        \"\"\"\n        return _CYBER_RECORD.PyRecordReader_GetChannelList(self.record_reader)\n\n\nclass RecordWriter(object):\n    \"\"\"\n    Class for cyber RecordWriter wrapper.\n    \"\"\"\n    def open(self, path):\n        \"\"\"\n        open record file for write.\n        \"\"\"\n    def write_channel(self, channel_name, type_name, proto_desc):\n        \"\"\"\n        writer channel by channelname,typename,protodesc\n        \"\"\"\n    def write_message(self, channel_name, data, time, raw = True):\n        \"\"\"\n        writer msg:channelname,data,time,is data raw\n        \"\"\"\n\n    def set_size_fileseg(self, size_kilobytes):\n        \"\"\"\n        return filesegment size.\n        \"\"\"\n\n    def set_intervaltime_fileseg(self, time_sec):\n        \"\"\"\n        return file interval time.\n        \"\"\"\n\n    def get_messagenumber(self, channel_name):\n        \"\"\"\n        return message count.\n        \"\"\"\n\n    def get_messagetype(self, channel_name):\n        \"\"\"\n        return message type.\n        \"\"\"\n\n    def get_protodesc(self, channel_name):\n        \"\"\"\n        return message protodesc.\n        \"\"\"\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/","title":"11 ros2jian jie","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/#11-ros2","title":"1.1 ROS2\u7b80\u4ecb","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/#_1","title":"\u573a\u666f","text":"<p>\u673a\u5668\u4eba\u662f\u4e00\u79cd\u9ad8\u5ea6\u590d\u6742\u7684\u7cfb\u7edf\u6027\u5b9e\u73b0\uff0c\u673a\u5668\u4eba\u8bbe\u8ba1\u5305\u542b\u4e86\u673a\u68b0\u7ed3\u6784\u8bbe\u8ba1\u3001\u673a\u68b0\u52a0\u5de5\u3001\u786c\u4ef6\u8bbe\u8ba1\u3001\u5d4c\u5165\u5f0f\u8f6f\u4ef6\u8bbe\u8ba1\u3001\u4e0a\u5c42\u8f6f\u4ef6\u8bbe\u8ba1\u7b49\u8bf8\u591a\u6a21\u5757\uff0c\u662f\u5404\u79cd\u786c\u4ef6\u4e0e\u8f6f\u4ef6\u7684\u6709\u673a\u7ed3\u5408\uff0c\u751a\u81f3\u53ef\u4ee5\u8bf4\u673a\u5668\u4eba\u7cfb\u7edf\u662f\u5f53\u4eca\u5de5\u4e1a\u4f53\u7cfb\u7684\u96c6\u5927\u6210\u8005\u3002\u673a\u5668\u4eba\u4f53\u7cfb\u662f\u76f8\u5f53\u5e9e\u5927\u7684\uff0c\u5176\u590d\u6742\u5ea6\u4e4b\u9ad8\uff0c\u4ee5\u81f3\u4e8e\u6ca1\u6709\u4efb\u4f55\u4e2a\u4eba\u3001\u7ec4\u7ec7\u751a\u81f3\u516c\u53f8\u80fd\u591f\u72ec\u7acb\u5b8c\u6210\u7cfb\u7edf\u6027\u7684\u673a\u5668\u4eba\u7814\u53d1\u751f\u4ea7\u4efb\u52a1\u3002</p> <p>\u90a3\u4e48\u95ee\u9898\u968f\u4e4b\u800c\u6765\uff1a\u65e2\u7136\u673a\u5668\u4eba\u5b9e\u73b0\u5982\u6b64\u56f0\u96be\uff0c\u90a3\u4e48\u6211\u4eec\u5e94\u8be5\u5982\u4f55\u5f00\u5c55\u76f8\u5173\u5de5\u4f5c\u5462\uff1f</p> <p>\u4e00\u79cd\u5408\u9002\u7684\u7b56\u7565\u662f\u2014\u2014\u5408\u4f5c\u3002\u8ba9\u673a\u5668\u4eba\u7814\u53d1\u8005\u4e13\u6ce8\u4e8e\u81ea\u5df1\u64c5\u957f\u7684\u9886\u57df\uff0c\u5176\u4ed6\u6a21\u5757\u5219\u76f4\u63a5\u590d\u7528\u76f8\u5173\u9886\u57df\u66f4\u4e13\u4e1a\u7814\u53d1\u56e2\u961f\u7684\u5b9e\u73b0\uff0c\u5f53\u7136\u81ea\u8eab\u7684\u7814\u7a76\u4e5f\u53ef\u4ee5\u88ab\u4ed6\u4eba\u7ee7\u7eed\u590d\u7528_\u3002_\u8fd9\u79cd\u57fa\u4e8e\u201c\u590d\u7528\u201d\u7684\u5206\u5de5\u534f\u4f5c\uff0c\u9075\u5faa\u4e86\u4e0d\u91cd\u590d\u53d1\u660e\u8f6e\u5b50\u7684\u539f\u5219\uff0c\u663e\u7136\u662f\u53ef\u4ee5\u5927\u5927\u63d0\u9ad8\u673a\u5668\u4eba\u7684\u7814\u53d1\u6548\u7387\u7684\uff0c\u5c24\u5176\u662f\u968f\u7740\u673a\u5668\u4eba\u786c\u4ef6\u8d8a\u6765\u8d8a\u4e30\u5bcc\uff0c\u8f6f\u4ef6\u5e93\u8d8a\u6765\u8d8a\u5e9e\u5927\uff0c\u8fd9\u79cd\u590d\u7528\u6027\u548c\u6a21\u5757\u5316\u5f00\u53d1\u9700\u6c42\u4e5f\u6108\u53d1\u5f3a\u70c8\u3002</p> <p>\u5728\u6b64\u5927\u80cc\u666f\u4e0b\uff0c\u4fbf\u8bde\u751f\u4e86ROS\u3002ROS\u662f\u4e00\u5957\u673a\u5668\u4eba\u901a\u7528\u8f6f\u4ef6\u6846\u67b6\uff0c\u53ef\u4ee5\u63d0\u5347\u529f\u80fd\u6a21\u5757\u7684\u590d\u7528\u6027\uff0c\u5e76\u4e14\u968f\u7740ROS2\u7684\u63a8\u51fa\uff0cROS\u65e5\u81fb\u5b8c\u5584\uff0c\u662f\u673a\u5668\u4eba\u8f6f\u4ef6\u5f00\u53d1\u7684\u4e0d\u4e8c\u4e4b\u9009\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/#_2","title":"\u6982\u5ff5","text":"<p>ROS\uff08Robot Operating System\uff09\u662f\u7528\u4e8e\u6784\u5efa\u673a\u5668\u4eba\u5e94\u7528\u7a0b\u5e8f\u7684\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\u3002ROS\u662f\u5f00\u6e90\u7684\uff0c\u5b83\u7531\u4e00\u7ec4\u8f6f\u4ef6\u5e93\u548c\u82e5\u5e72\u5de5\u5177\u7ec4\u6210\u3002</p> <p>\u5728\u673a\u5668\u4eba\u9886\u57df\uff0cROS\u662f\u4e00\u4e2a\u6807\u51c6\u8f6f\u4ef6\u5e73\u53f0\uff0c\u8fd9\u4e2a\u5e73\u53f0\u4e3a\u5f00\u53d1\u8005\u63d0\u4f9b\u4e86\u6784\u5efa\u673a\u5668\u4eba\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u5404\u4e2a\u529f\u80fd\u6a21\u5757\uff0c\u5e76\u4e14\u5f00\u53d1\u8005\u80fd\u591f\u4ee5\u201c\u53ef\u63d2\u62d4\u201d\u7684\u65b9\u5f0f\u7ec4\u7ec7\u5404\u4e2a\u529f\u80fd\u6a21\u5757\uff0c\u65e0\u8bba\u5f00\u53d1\u8005\u7684\u7a0b\u5e8f\u662f\u7528\u4e8e\u8bfe\u5802\u5b9e\u9a8c\u3001\u79d1\u5b66\u7814\u7a76\u3001\u539f\u578b\u8bbe\u8ba1\u6216\u662f\u6700\u7ec8\u4ea7\u54c1\uff0cROS\u90fd\u63d0\u4f9b\u4e86\u4e00\u7ad9\u5f0f\u7684\u6280\u672f\u652f\u6301\u3002</p> <p>\u53e6\u5916\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cROS\u867d\u7136\u5b57\u9762\u610f\u601d\u662f\u673a\u5668\u4eba\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f46\u662f\u5b83\u5e76\u975e\u7ecf\u5178\u610f\u4e49\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u66f4\u51c6\u786e\u7684\u8bb2ROS\u662f\u4e00\u4e2a SDK\uff08Software Development Kit\uff09\u4e5f\u5373\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/#_3","title":"\u4f5c\u7528","text":"<p>\u79c9\u7740\u201c\u4e0d\u8981\u91cd\u590d\u53d1\u660e\u8f6e\u5b50\u201d\u7684\u539f\u5219\uff0c\u901a\u8fc7ROS\u53ef\u4ee5\u590d\u7528\u5df2\u6709\u529f\u80fd\u5e76\u65b9\u4fbf\u5feb\u6377\u7684\u62d3\u5c55\u65b0\u529f\u80fd\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/","title":"12 ros2an zhuang","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/#12-ros2","title":"1.2 ROS2\u5b89\u88c5","text":"<p>\u672c\u8282\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u5728Ubuntu \u64cd\u4f5c\u7cfb\u7edf\u4e0a\u5b89\u88c5ROS2\uff0c\u6240\u4ee5\u5728\u5b89\u88c5\u4e4b\u524d\u8bf7\u5148\u51c6\u5907\u597d\u4e0eROS2\u7248\u672c\u76f8\u5339\u914d\u7684Ubuntu\u64cd\u4f5c\u7cfb\u7edf\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/","title":"13 ros2kuai su ti yan","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/#13-ros2","title":"1.3 ROS2\u5feb\u901f\u4f53\u9a8c","text":"<p>ROS2\u4e2d\u6d89\u53ca\u7684\u7f16\u7a0b\u8bed\u8a00\u4ee5C++\u548cPython\u4e3a\u4e3b\uff0cROS2\u4e2d\u7684\u5927\u591a\u6570\u529f\u80fd\u4e24\u8005\u90fd\u53ef\u4ee5\u5b9e\u73b0\uff0c\u5728\u672c\u7cfb\u5217\u6559\u7a0b\u4e2d\uff0c\u5982\u65e0\u7279\u6b8a\u60c5\u51b5\uff0c\u6bcf\u4e00\u4e2a\u6848\u4f8b\u4e5f\u90fd\u4f1a\u5206\u522b\u4f7f\u7528C++\u548cPython\u4e24\u79cd\u65b9\u6848\u6f14\u793a\u3002\u672c\u8282\u6211\u4eec\u5c06\u4ecb\u7ecd\u4e00\u4e2a\u6700\u57fa\u672c\u7684\u6848\u4f8b\u2014\u2014ROS2\u7248\u672c\u7684HelloWorld\uff0c\u901a\u8fc7\u5b66\u4e60\u672c\u8282\u5185\u5bb9\uff0c\u4f60\u53ef\u4ee5\u4e86\u89e3ROS2\u7a0b\u5e8f\u7684\u7f16\u5199\u3001\u7f16\u8bd1\u4e0e\u6267\u884c\u6d41\u7a0b\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/","title":"14 ros2ji cheng kai fa huan jing da jian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/#14-ros2","title":"1.4 ROS2\u96c6\u6210\u5f00\u53d1\u73af\u5883\u642d\u5efa","text":"<p>\u548c\u5927\u591a\u6570\u5f00\u53d1\u73af\u5883\u4e00\u6837\uff0c\u7406\u8bba\u4e0a\uff0c\u5728ROS2\u4e2d\uff0c\u53ea\u9700\u8981\u8bb0\u4e8b\u672c\u5c31\u53ef\u4ee5\u7f16\u5199\u57fa\u672c\u7684ROS2\u7a0b\u5e8f\uff0c\u4f46\u662f\u5de5\u6b32\u5584\u5176\u4e8b\u5fc5\u5148\u5229\u5176\u5668\uff0c\u4e3a\u4e86\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u53ef\u4ee5\u5148\u5b89\u88c5\u96c6\u6210\u5f00\u53d1\u5de5\u5177\u548c\u4f7f\u7528\u65b9\u4fbf\u7684\u5de5\u5177\uff1aIDE\u3001\u7ec8\u7aef\u3001git\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/","title":"15 ros2ti xi kuang jia","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/#15-ros2","title":"1.5 ROS2\u4f53\u7cfb\u6846\u67b6","text":"<p>\u57281.1.2 ROS2\u7ec4\u6210\u4f53\u7cfb\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u7b80\u5355\u4e86\u89e3\u4e86ROS2\u7684\u4f53\u7cfb\u6846\u67b6\uff0c\u5e76\u4e14\u968f\u7740\u524d\u9762\u4ecb\u7ecd\u4e86ROS2\u529f\u80fd\u5305\u7684\u7f16\u5199\u3001\u7f16\u8bd1\u3001\u6267\u884c\u6d41\u7a0b\uff0c\u4e5f\u5bf9ROS2\u5e94\u7528\u7a0b\u5e8f\u7684\u6784\u5efa\u6709\u4e86\u57fa\u672c\u7684\u8ba4\u8bc6\u3002\u672c\u8282\u4f1a\u8fdb\u4e00\u6b65\u4ece\u5fae\u89c2\u548c\u5b8f\u89c2\u4e24\u4e2a\u7ef4\u5ea6\u6765\u4ecb\u7ecdROS2\u7684\u4e0d\u540c\u90e8\u5206\uff0c\u4ee5\u5e2e\u52a9\u5927\u5bb6\u4e86\u89e3ROS2\u7684\u5b66\u4e60\u3001\u5de5\u4f5c\u5185\u5bb9\u4ee5\u53ca\u4ee5\u540e\u53ef\u9009\u62e9\u7684\u53d1\u5c55\u65b9\u5411\u3002</p> <p>\u5fae\u89c2\u4e0a\u4f1a\u4ecb\u7ecdROS2\u7684\u6587\u4ef6\u7cfb\u7edf\u3001ROS2\u7684\u6838\u5fc3\u6a21\u5757\uff08\u901a\u4fe1\u4e0e\u5de5\u5177\uff09\uff0c\u8fd9\u4e9b\u90fd\u662f\u5b98\u65b9\u63d0\u4f9b\u7684\u6807\u51c6\u5185\u5bb9\u3002\u5b8f\u89c2\u4e0a\u4f1a\u4ecb\u7ecd\u5173\u4e8eROS2\u7684\u6280\u672f\u652f\u6301\u3001ROS2\u7684\u5e94\u7528\u65b9\u5411\uff0c\u8fd9\u90e8\u5206\u5219\u662f\u5f97\u76ca\u4e8eROS2\u7684\u5f3a\u5927\u793e\u533a\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/16-ben-zhang-xiao-jie/","title":"16 ben zhang xiao jie","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/16-ben-zhang-xiao-jie/#16","title":"1.6 \u672c\u7ae0\u5c0f\u7ed3","text":"<p>\u672c\u7ae0\u4e3b\u8981\u4ecb\u7ecd\u4e86ROS2\u7684\u76f8\u5173\u6982\u5ff5\u4ee5\u53caROS2\u7684\u73af\u5883\u642d\u5efa\u3002</p> <p>\u6982\u5ff5\u76f8\u5173\u77e5\u8bc6\u70b9\u5982\u4e0b\uff1a</p> <ul> <li>ROS2\u6982\u5ff5\u3001\u53d1\u5c55\u5386\u7a0b\u3001\u7ec4\u6210\u4f53\u7cfb\u4ee5\u53ca\u5728\u673a\u5668\u4eba\u9886\u57df\u7684\u4f18\u52bf\uff1b</li> <li>ROS2\u4f53\u7cfb\u6846\u67b6\uff1a\u6587\u4ef6\u7cfb\u7edf\u3001\u6838\u5fc3\u6a21\u5757\u3001\u6280\u672f\u652f\u6301\u3001\u5e94\u7528\u65b9\u5411\u3002</li> </ul> <p>\u73af\u5883\u642d\u5efa\u76f8\u5173\u77e5\u8bc6\u70b9\u5982\u4e0b\uff1a</p> <ul> <li>ROS2\u5b89\u88c5\u4e0e\u6d4b\u8bd5\uff1b</li> <li>ROS2\u7684\u201chelloworld\u201d\u5b9e\u73b0\uff1b</li> <li>ROS2\u96c6\u6210\u5f00\u53d1\u73af\u5883\u642d\u5efa\uff1b</li> </ul> <p>\u5728\u6982\u5ff5\u90e8\u5206\uff0c\u6211\u4eec\u4ee5\u65f6\u95f4\u8f74\u4e3a\u53c2\u8003\u4ecb\u7ecd\u4e86ROS2\u7684\u53d1\u5c55\u5386\u7a0b\uff0c\u4ee5\u7a7a\u95f4\u8f74\u4e3a\u53c2\u8003\u4ecb\u7ecd\u4e86ROS2\u7684\u7ec4\u6210\u4f53\u7cfb\uff0c\u53c8\u5206\u522b\u5728\u6a2a\u5411\u548c\u7eb5\u5411\u4e24\u4e2a\u7ef4\u5ea6\u4ecb\u7ecd\u4e86ROS2\u5728\u673a\u5668\u4eba\u7814\u53d1\u9886\u57df\u7684\u4f18\u52bf\u3002\u5173\u4e8eROS2\u7684\u4f53\u7cfb\u6846\u67b6\u5219\u53c8\u5206\u522b\u7acb\u8db3\u5fae\u89c2\u548c\u5b8f\u89c2\u7684\u89d2\u5ea6\u4ecb\u7ecd\u4e86\u5173\u4e8eROS2\u7684\u5b66\u4e60\u5185\u5bb9\uff0c\u4ecb\u7ecd\u4e86\u884c\u4e1a\u7684\u53ef\u53d1\u5c55\u65b9\u5411\u3002</p> <p>\u5728\u73af\u5883\u642d\u5efa\u90e8\u5206\uff0c\u5219\u4ecb\u7ecd\u4e86ROS2\u7684\u5177\u4f53\u5b89\u88c5\u6d41\u7a0b\u3002\u901a\u8fc7helloworld\u7a0b\u5e8f\uff0c\u4e86\u89e3\u4e86ROS2\u7a0b\u5e8f\u7684\u7f16\u5199\u3001\u7f16\u8bd1\u548c\u6267\u884c\u6d41\u7a0b\u3002\u6700\u540e\u8fd8\u4ecb\u7ecd\u4e86\u5982\u4f55\u4f7f\u7528VSCode\u642d\u5efa\u5bf9\u5f00\u53d1\u8005\u53cb\u597d\u7684\u96c6\u6210\u5f00\u53d1\u73af\u5883\u3002\u81f3\u6b64\uff0cROS2\u7684\u5927\u95e8\u5df2\u7ecf\u655e\u5f00\uff0c\u5411\u7740\u672a\u6765\u626c\u5e06\u8d77\u822a\u5427\uff0cgood luck\uff01</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/111-ros2fa-zhan-li-cheng/","title":"111 ros2fa zhan li cheng","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/111-ros2fa-zhan-li-cheng/#111-ros2","title":"1.1.1 ROS2\u53d1\u5c55\u5386\u7a0b","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/111-ros2fa-zhan-li-cheng/#1","title":"1.\u8d77\u6e90","text":"<p>2007\u5e74\uff0c\u4e00\u5bb6\u540d\u4e3a\u67f3\u6811\u8f66\u5e93\uff08Willow Garage\uff09\u7684\u673a\u5668\u4eba\u516c\u53f8\u53d1\u5e03\u4e86ROS\uff0cROS\u96c6\u5f00\u6e90\u3001\u514d\u8d39\u3001\u9ad8\u590d\u7528\u3001\u4f4e\u8026\u5408\u3001\u5de5\u5177\u4e30\u5bcc\u7b49\u7b49\u8bf8\u591a\u4f18\u52bf\u4e8e\u4e00\u8eab\uff0c\u4e00\u7ecf\u63a8\u51fa\u4fbf\u8fc5\u901f\u5438\u5f15\u4e86\u5927\u91cf\u7684\u5f00\u53d1\u8005\u3001\u79d1\u7814\u4eba\u5458\u3001\u786c\u4ef6\u4f9b\u5e94\u5546\u7684\u52a0\u5165\uff0c\u5f62\u6210\u4e86\u7a33\u5b9a\u4e14\u591a\u6837\u7684\u673a\u5668\u4eba\u751f\u6001\uff0c\u6c34\u5230\u6e20\u6210\u7684ROS\u4e5f\u6210\u4e3a\u4e86\u673a\u5668\u4eba\u9886\u57df\u7684\u4e3b\u6d41\u8f6f\u4ef6\u6846\u67b6\u5e76\u6d41\u884c\u81f3\u4eca\u3002</p> <p>\u4f46\u662f\u81eaROS\u8bde\u751f\u7684\u5341\u51e0\u5e74\u6765\uff0c\u4e0d\u7ba1\u662f\u673a\u5668\u4eba\u76f8\u5173\u8f6f\u4ef6\u3001\u786c\u4ef6\u8fd8\u662fROS\u793e\u533a\u90fd\u53d1\u751f\u4e86\u5929\u7ffb\u5730\u8986\u7684\u53d8\u5316\uff0c\u52a0\u4e4bROS1\u5b58\u5728\u4e00\u4e9b\u8bbe\u8ba1\u4e0a\u7684\u5148\u5929\u6027\u7f3a\u9677\uff0c\u5404\u79cd\u5185\u5916\u56e0\u7d20\u53e0\u52a0\u4e0b\uff0c\u5bfc\u81f4ROS1\u5728\u8bb8\u591a\u5e94\u7528\u573a\u666f\u4e0b\u90fd\u5df2\u7ecf\u663e\u5f97\u529b\u4e0d\u4ece\u5fc3\u4e86\u3002\u6b64\u80cc\u666f\u4e0b\uff0c\u5b98\u65b9\u4e8e2017\u6b63\u5f0f\u63a8\u51fa\u4e86\u65b0\u4e00\u4ee3\u673a\u5668\u4eba\u64cd\u4f5c\u7cfb\u7edf\u2014\u2014ROS2\uff0cROS2\u57fa\u4e8e\u5168\u65b0\u7684\u8bbe\u8ba1\u6846\u67b6\uff0c\u4fdd\u7559\u4e86ROS1\u7684\u4f18\u70b9\u5e76\u6539\u8fdb\u5176\u7f3a\u9677\uff0cROS2\u7684\u76ee\u6807\u662f\u9002\u5e94\u65b0\u65f6\u4ee3\u7684\u65b0\u9700\u6c42\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/111-ros2fa-zhan-li-cheng/#2","title":"2.\u53d1\u884c\u7248\u672c","text":"<p>ROS\u53d1\u884c\u7248\u662f\u4e00\u7ec4\u7248\u672c\u5316\u7684ROS\u529f\u80fd\u5305\uff0c\u5b83\u7c7b\u4f3c\u4e8eLinux\u53d1\u884c\u7248\uff08\u4f8b\u5982 Ubuntu\uff09\u3002ROS\u53d1\u884c\u7248\u7684\u76ee\u7684\u662f\u8ba9\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u5728\u4e00\u4e2a\u76f8\u5bf9\u7a33\u5b9a\u7684\u4ee3\u7801\u5e93\u4e0a\u5de5\u4f5c\uff0c\u76f4\u5230\u65b0\u7684\u53d1\u884c\u7248\u63a8\u51fa\u3002</p> <p>\u4ee5\u4e0b\u5217\u8868\u4e3aROS2\u5404\u4e0d\u540c\u53d1\u5e03\u7248\u672c\u7684\u7b80\u5355\u8bf4\u660e\u3002</p> \u53d1\u884c\u7248 \u53d1\u5e03\u65e5\u671f \u6807\u8bc6 \u505c\u6b62\u7ef4\u62a4\u65e5\u671f Iron Irwini 2023 \u5e74 5 \u6708 23 \u65e5 \u5f85\u5b9a 2024 \u5e74 11 \u6708 Humble Hawksbill 2022 \u5e74 5 \u6708 23 \u65e5 2027 \u5e74 5 \u6708 Galactic Geochelone 2021 \u5e74 5 \u6708 23 \u65e5 2022 \u5e74 11 \u6708 Foxy Fitzroy 2020 \u5e74 6 \u6708 5 \u65e5 2023 \u5e74 5 \u6708 Eloquent Elusor 2019 \u5e74 11 \u6708 22 \u65e5 2020 \u5e74 11 \u6708 Dashing Diademata 2019 \u5e74 5 \u6708 31 \u65e5 2021 \u5e74 5 \u6708 Crystal Clemmys 2018 \u5e74 12 \u6708 14 \u65e5 2019 \u5e74 12 \u6708 Bouncy Bolson 2018 \u5e74 7 \u6708 2 \u65e5 2019 \u5e74 7 \u6708 Ardent Apalone 2017 \u5e74 12 \u6708 8 \u65e5 2018 \u5e74 12 \u6708 beta3 2017 \u5e74 9 \u6708 13 \u65e5 2017 \u5e74 12 \u6708 beta2 2017 \u5e74 7 \u6708 5 \u65e5 2017 \u5e74 9 \u6708 beta1 2016 \u5e74 12 \u6708 19 \u65e5 2017 \u5e74 7 \u6708 alpha1 - alpha8 2015 \u5e74 8 \u6708 31 \u65e5 2016 \u5e74 12 \u6708 <p>ROS2\u7248\u672c\u53d1\u5e03\u7279\u70b9\uff1a</p> <ul> <li>\u53d1\u5e03\u7248\u672c\u4e0eUbuntu\u7248\u672c\u5bf9\u5e94\uff0c\u751f\u547d\u5468\u671f\u4e5f\u6709Ubuntu\u4fdd\u6301\u4e00\u81f4\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\u5076\u6570\u5e74\u4efd\u53d1\u5e03\u957f\u652f\u6301\u7248\uff085\u5e74\uff09\uff0c\u5947\u6570\u5e74\u4efd\u53d1\u5e03\u77ed\u652f\u6301\u7248\uff082\u5e74\uff09\uff1b</li> <li>\u7248\u672c\u540d\u79f0\u7531\u5f62\u5bb9\u8bcd+\u540d\u8bcd\u7684\u683c\u5f0f\u7ec4\u6210\uff0c\u8fd9\u4e00\u70b9\u4e0eUbuntu\u7248\u672c\u540d\u79f0\u89c4\u5219\u4e00\u81f4\uff1b</li> <li>\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u6bcf\u5e74\u76845\u670823\u65e5\uff0c\u4e16\u754c\u6d77\u9f9f\u65e5\u53d1\u5e03\u65b0\u7248\u672c\u3002</li> </ul> <p>\u9700\u8981\u53e6\u5916\u8bf4\u660e\u7684\u662f\uff1a</p> <p>\u5b98\u65b9\u4e8e2020\u5e74\u53d1\u5e03\u4e86ROS1\u7684\u6700\u7ec8\u7248\u672c\uff0c\u5e76\u5c06\u4e8e2025\u5e74\u7ec8\u6b62ROS1\u7684\u7ef4\u62a4\u3002\u800c\u65e9\u57282017\u5e74\u5c31\u5df2\u7ecf\u63a8\u51fa\u4e86ROS2\u7684\u7b2c\u4e00\u4e2a\u6b63\u5f0f\u7248\u672c\uff0c\u5e76\u4e14\u968f\u7740ROS2\u7684\u4e0d\u65ad\u5b8c\u5584\uff0c\u4e8e2022\u5e74\u53c8\u63a8\u51faROS2\u7684\u7b2c\u4e00\u4e2a5\u5e74\u957f\u652f\u6301\u7248\u3002\u5bf9\u4e8eROS\u800c\u8a00\uff0c\u8fd9\u662f\u4e00\u4e2a\u91cc\u7a0b\u7891\u5f0f\u7684\u4e8b\u4ef6\uff0c\u8fd9\u610f\u5473\u7740\u81ea\u6b64\u5f00\u59cb\uff0cROS2\u5c06\u5168\u9762\u53d6\u4ee3ROS1\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/112-ros2zu-cheng-ti-xi/","title":"112 ros2zu cheng ti xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/112-ros2zu-cheng-ti-xi/#112-ros2","title":"1.1.2 ROS2\u7ec4\u6210\u4f53\u7cfb","text":"<p>\u6574\u4e2aROS\u751f\u6001\u7531\u901a\u4fe1\uff08Plumbing\uff09\u3001\u5de5\u5177\uff08Tools\uff09\u3001\u529f\u80fd\uff08Capabilities\uff09\u4e0e\u793e\u533a\uff08Community\uff09\u56db\u5927\u90e8\u5206\u7ec4\u6210\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/112-ros2zu-cheng-ti-xi/#plumbing","title":"\u901a\u4fe1\\(Plumbing\\)","text":"<p>\u901a\u4fe1\u662f\u6574\u4e2aROS\u7cfb\u7edf\u7684\u6838\u5fc3\u5b9e\u73b0\uff0c\u662fROS\u5185\u7f6e\u7684\u4e00\u4e2a\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\uff0c\u901a\u5e38\u79f0\u4e4b\u4e3amiddleware\uff08\u4e2d\u95f4\u4ef6\uff09\u6216Plumbing\uff08\u7ba1\u9053\uff09\u3002</p> <p>\u5728\u6784\u5efa\u65b0\u7684\u5e94\u7528\u7a0b\u5e8f\u6216\u4f7f\u7528\u4e0e\u786c\u4ef6\u4ea4\u4e92\u7684\u8f6f\u4ef6\u65f6\uff0c\u5982\u4f55\u5b9e\u73b0\u901a\u4fe1\u662f\u9996\u5f53\u5176\u51b2\u7684\u95ee\u9898\uff0c\u4e3a\u6b64ROS\u63d0\u4f9b\u4e86\u4e13\u95e8\u7684\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\uff0c\u5b83\u53ef\u4ee5\u7ba1\u7406\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u7684\u901a\u4fe1\u7ec6\u8282\uff0c\u63d0\u9ad8\u5f00\u53d1\u8005\u7684\u5de5\u4f5c\u6548\u7387\u3002\u8fd9\u5957\u6d88\u606f\u4f20\u9012\u7cfb\u7edf\u4f7f\u7528\u4e86\u201c\u9762\u5411\u63a5\u53e3\u201d\u7684\u7f16\u7a0b\u601d\u60f3\uff0c\u53ef\u4ee5\u901a\u8fc7\u6e05\u6670\u89c4\u8303\u7684\u63a5\u53e3\uff0c\u5c06\u4e0d\u540c\u6a21\u5757\u5206\u79bb\uff0c\u4ece\u800c\u4e5f\u5c06\u6545\u969c\u9694\u79bb\u3002\u4f7f\u5f97ROS\u7cfb\u7edf\u66f4\u6613\u4e8e\u7ef4\u62a4\u3001\u6269\u5c55\u6027\u66f4\u5f3a\u4e14\u4fdd\u8bc1\u4e86\u7a0b\u5e8f\u7684\u9ad8\u590d\u7528\u6027\u3002</p> <p>\u63a5\u53e3\u89c4\u8303\u53ef\u4ee5\u7531\u5f00\u53d1\u8005\u81ea\u884c\u5b9a\u4e49\u3002\u540c\u65f6\u4e3a\u4e86\u65b9\u4fbf\u4f7f\u7528\uff0c\u5728ROS\u4e2d\u4e5f\u63d0\u4f9b\u4e86\u8bb8\u591a\u6807\u51c6\u7684\u63a5\u53e3\uff0c\u8fd9\u4e9b\u6807\u51c6\u63a5\u53e3\u6709\u7740\u5e7f\u6cdb\u5e94\u7528\uff0c\u6bd4\u5982\uff1a\u5c06\u96f7\u8fbe\u6216\u6444\u50cf\u5934\u6570\u636e\u4f20\u8f93\u5230\u53ef\u89c6\u5316\u7684\u7528\u6237\u754c\u9762\u6216\u662f\u4f20\u8f93\u5230\u5b9a\u4f4d\u7b97\u6cd5\u6a21\u5757\uff0c\u90fd\u4f1a\u4f7f\u7528\u5230\u6807\u51c6\u63a5\u53e3\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/112-ros2zu-cheng-ti-xi/#tools","title":"\u5de5\u5177\\(Tools\\)","text":"<p>\u6784\u5efa\u673a\u5668\u4eba\u5e94\u7528\u7a0b\u5e8f\u6781\u5177\u6311\u6218\u6027\u3002\u5f00\u53d1\u8005\u9664\u4e86\u4f1a\u9047\u5230\u4e00\u4e9b\u4f20\u7edf\u7684\u8f6f\u4ef6\u5f00\u53d1\u95ee\u9898\u4e4b\u5916\uff0c\u8fd8\u9700\u8981\u901a\u8fc7\u4f20\u611f\u5668\u6216\u6267\u884c\u5668\u4e0e\u7269\u7406\u4e16\u754c\u8fdb\u884c\u5f02\u6b65\u4ea4\u4e92\u3002\u663e\u800c\u6613\u89c1\u7684\uff0c\u826f\u597d\u7684\u5f00\u53d1\u5de5\u5177\u53ef\u4ee5\u63d0\u9ad8\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u6548\u7387\uff0c\u5728ROS\u4e2d\u5c31\u5185\u7f6e\u4e86launch\u3001\u8c03\u8bd5\u3001\u53ef\u89c6\u5316\u3001\u7ed8\u56fe\u3001\u5f55\u5236\u56de\u653e\u7b49\u4e00\u7cfb\u5217\u5de5\u5177\u3002\u8fd9\u4e9b\u5de5\u5177\u4e0d\u5149\u53ef\u4ee5\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u8fd8\u53ef\u4ee5\u5728\u53d1\u5e03\u4ea7\u54c1\u65f6\u76f4\u63a5\u5305\u542b\u5728\u4ea7\u54c1\u4e4b\u4e2d\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/112-ros2zu-cheng-ti-xi/#capabilities","title":"\u529f\u80fd\\(Capabilities\\)","text":"<p>ROS\u751f\u6001\u7cfb\u7edf\u662f\u673a\u5668\u4eba\u8f6f\u4ef6\u7684\u805a\u5b9d\u76c6\u3002\u65e0\u8bba\u5f00\u53d1\u8005\u9700\u8981\u7528\u4e8eGPS\u7684\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3001\u7528\u4e8e\u56db\u8db3\u4eff\u751f\u673a\u5668\u4eba\u7684\u6b65\u884c\u548c\u5e73\u8861\u63a7\u5236\u5668\uff0c\u8fd8\u662f\u7528\u4e8e\u79fb\u52a8\u673a\u5668\u4eba\u7684\u5730\u56fe\u7cfb\u7edf\uff0cROS\u90fd\u80fd\u6ee1\u8db3\u4f60\u7684\u9700\u6c42\u3002\u4ece\u9a71\u52a8\u7a0b\u5e8f\u5230\u7b97\u6cd5\uff0c\u518d\u5230\u7528\u6237\u754c\u9762\uff0cROS\u90fd\u63d0\u4f9b\u4e86\u76f8\u5173\u5b9e\u73b0\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u4e13\u6ce8\u4e8e\u81ea\u8eab\u5e94\u7528\u7a0b\u5e8f\u5373\u53ef\u3002</p> <p>ROS\u7684\u76ee\u6807\u662f\u63d0\u4f9b\u4e00\u7ad9\u5f0f\u7684\u6280\u672f\u652f\u6301\uff0c\u964d\u4f4e\u6784\u5efa\u673a\u5668\u4eba\u5e94\u7528\u7a0b\u5e8f\u7684\u95e8\u69db\u3002ROS\u5e0c\u671b\u4efb\u4f55\u5f00\u53d1\u8005\u90fd\u53ef\u4ee5\u5c06\u81ea\u5df1\u7684\u201c\u521b\u610f\u201d\u53d8\u4e3a\u73b0\u5b9e\uff0c\u800c\u65e0\u9700\u4e86\u89e3\u5e95\u5c42\u8f6f\u4ef6\u548c\u786c\u4ef6\u7684\u6240\u6709\u5185\u5bb9\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/112-ros2zu-cheng-ti-xi/#community","title":"\u793e\u533a\\(Community\\)","text":"<p>ROS\u793e\u533a\u89c4\u6a21\u5e9e\u5927\u3001\u591a\u6837\u4e14\u5168\u7403\u5316\uff0c\u4ece\u5b66\u751f\u548c\u4e1a\u4f59\u7231\u597d\u8005\u5230\u8de8\u56fd\u516c\u53f8\u548c\u653f\u5e9c\u673a\u6784\uff0c\u5404\u884c\u5404\u4e1a\u7684\u4eba\u548c\u7ec4\u7ec7\u90fd\u5728\u63a8\u52a8\u7740ROS\u9879\u76ee\u7684\u53d1\u5c55\u3002</p> <p>\u8be5\u9879\u76ee\u7684\u793e\u533a\u4e2d\u5fc3\u548c\u4e2d\u7acb\u7ba1\u5bb6\u662fOpen Robotics\uff0c\u5b83\u6258\u7ba1\u5171\u4eab\u5728\u7ebf\u670d\u52a1\uff08\u4f8b\u5982ROS\u5b98\u7f51\uff1ahttps://www.ros.org/\uff09\uff0c\u521b\u5efa\u548c\u7ba1\u7406\u5206\u53d1\u7248\u672c\uff08\u5305\u62ec\u60a8\u5b89\u88c5\u7684\u4e8c\u8fdb\u5236\u5305\uff09\uff0c\u5e76\u5f00\u53d1\u548c\u7ef4\u62a4\u5927\u90e8\u5206ROS\u6838\u5fc3\u8f6f\u4ef6\u3002 Open Robotics\u8fd8\u63d0\u4f9b\u4e0e ROS \u76f8\u5173\u7684\u5de5\u7a0b\u670d\u52a1\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/","title":"113 ros2you shi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#113-ros2","title":"1.1.3 ROS2\u4f18\u52bf","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#1ros","title":"1.ROS\u4e0e\u5176\u4ed6\u673a\u5668\u4eba\u8f6f\u4ef6\u6846\u67b6\u6bd4\u8f83","text":"<p>ROS\u662f\u6784\u5efa\u673a\u5668\u4eba\u7684\u6700\u5feb\u6377\u65b9\u5f0f\uff01</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#11","title":"1.1 \u5f00\u6e90","text":"<p>ROS\u4e00\u76f4\u662f\u5f00\u6e90\u7684\uff0c\u5e76\u4e14\u5c06\u6c38\u8fdc\u662f\u5f00\u6e90\u7684\uff0c\u4ee5\u786e\u4fdd\u5168\u4e16\u754c\u7684\u7231\u597d\u8005\u3001\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u81ea\u7531\u3001\u4e0d\u53d7\u9650\u5236\u5730\u8bbf\u95ee\u9ad8\u8d28\u91cf\u3001\u4e00\u6d41\u3001\u529f\u80fd\u9f50\u5168\u7684\u673a\u5668\u4ebaSDK\u3002\u53e6\u5916\u5b98\u65b9\u4e5f\u5728\u5176\u4ed6\u5f00\u6e90\u9879\u76ee\u4e4b\u4e0a\u6784\u5efaROS\uff0cROS\u4f1a\u5c3d\u53ef\u80fd\u7684\u5229\u7528\u5e76\u9075\u5faa\u5f00\u653e\u6807\u51c6\uff08\u4f8b\u5982OMG\u7684DDS\uff09\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#12","title":"1.2 \u514d\u8d39","text":"<p>\u5b98\u65b9\u9f13\u52b1\u7528\u6237\u5bf9ROS\u505a\u51fa\u5f00\u6e90\u8d21\u732e\uff0c\u4e5f\u6b22\u8fce\u63d0\u51fa\u5b9d\u8d35\u610f\u89c1\uff0c\u4f46\u4e0d\u5e72\u6d89\u5f00\u53d1\u8005\u5c06ROS\u96c6\u6210\u8fdb\u975e\u5f00\u6e90\u8f6f\u4ef6\uff0c\u4e0d\u53cd\u5bf9\u5c06ROS\u96c6\u6210\u8fdb\u4e13\u6709\u4ea7\u54c1\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#13","title":"1.3 \u591a\u5e73\u53f0\u652f\u6301","text":"<p>ROS2\u652f\u6301Linux\u3001Windows\u548cmacOS\u4ee5\u53ca\u5404\u79cd\u5d4c\u5165\u5f0f\u5e73\u53f0\uff08\u901a\u8fc7micro-ROS\uff09\u5e76\u4e14\u4e0d\u540c\u5e73\u53f0\u90fd\u5df2\u7ecf\u901a\u8fc7\u4e86\u5b98\u65b9\u6d4b\u8bd5\uff0c\u8fd9\u610f\u5473\u7740\u901a\u8fc7ROS2\u53ef\u4ee5\u5b9e\u73b0\u5f00\u53d1\u3001\u90e8\u7f72\u540e\u7aef\u7ba1\u7406\u7cfb\u7edf\u548c\u7528\u6237\u754c\u9762\u7684\u65e0\u7f1d\u8854\u63a5\u3002\u5206\u5c42\u652f\u6301\u6a21\u578b\u8fd8\u5141\u8bb8\u5c06ROS2\u79fb\u690d\u5230\u8bf8\u5982\u5b9e\u65f6\u548c\u5d4c\u5165\u5f0f\u64cd\u4f5c\u7cfb\u7edf\u7b49\u65b0\u5e73\u53f0\u4e0a\uff0c\u4ee5\u4fbf\u5728\u83b7\u5f97\u5173\u6ce8\u548c\u6295\u8d44\u65f6\u5c06ROS2\u5f15\u5165\u548c\u63a8\u5e7f\u5230\u8fd9\u4e9b\u65b0\u5e73\u53f0\u4e2d\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#14","title":"1.4 \u5e94\u7528\u9886\u57df\u5e7f\u6cdb","text":"<p>ROS\u53ef\u4ee5\u5728\u5404\u79cd\u673a\u5668\u4eba\u5e94\u7528\u4e2d\u4f7f\u7528\uff0c\u4ece\u5ba4\u5185\u5230\u5ba4\u5916\uff0c\u4ece\u5bb6\u7528\u5230\u6c7d\u8f66\uff0c\u4ece\u6c34\u4e0b\u5230\u592a\u7a7a\uff0c\u4ece\u6d88\u8d39\u5e02\u573a\u5230\u5de5\u4e1a\u9886\u57df\uff0cROS\u90fd\u53ef\u4ee5\u72ec\u5f53\u4e00\u9762\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#15","title":"1.5 \u5168\u7403\u5316\u793e\u533a","text":"<p>\u5341\u591a\u5e74\u6765\uff0cROS\u9879\u76ee\u901a\u8fc7\u57f9\u80b2\u7531\u6570\u767e\u4e07\u5f00\u53d1\u4eba\u5458\u548c\u7528\u6237\u7ec4\u6210\u7684\u5168\u7403\u5316\u793e\u533a\uff0c\u4e3a\u673a\u5668\u4eba\u6280\u672f\u505a\u51fa\u8d21\u732e\u548c\u6539\u8fdb\uff0c\u4ece\u800c\u4ea7\u751f\u4e86\u4e00\u4e2a\u5e9e\u5927\u7684\u673a\u5668\u4eba\u8f6f\u4ef6\u751f\u6001\u7cfb\u7edf\u3002 ROS\u7531\u8be5\u793e\u533a\u5f00\u53d1\u5e76\u4e3a\u8be5\u793e\u533a\u670d\u52a1\uff0c\u8be5\u793e\u533a\u5c06\u6210\u4e3a\u5176\u672a\u6765\u7684\u7ba1\u7406\u8005\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#16","title":"1.6 \u53ef\u7f29\u77ed\u4ea7\u54c1\u4e0a\u5e02\u65f6\u95f4","text":"<p>ROS\u63d0\u4f9b\u4e86\u5f00\u53d1\u673a\u5668\u4eba\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u5de5\u5177\u3001\u5e93\u548c\u529f\u80fd\uff0c\u4f7f\u5f00\u53d1\u8005\u53ef\u4ee5\u5c06\u66f4\u591a\u7684\u65f6\u95f4\u82b1\u8d39\u5728\u4e0e\u81ea\u8eab\u4e1a\u52a1\u76f8\u5173\u7684\u5de5\u4f5c\u4e0a\u3002\u7531\u4e8e\u5b83\u8fd8\u662f\u5f00\u6e90\u7684\uff0c\u6240\u4ee5\u5f00\u53d1\u8005\u53ef\u4ee5\u51b3\u5b9a\u4f55\u65f6\u4f55\u5904\u4f7f\u7528ROS\uff0c\u751a\u81f3\u8fd8\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u9700\u6c42\u4fee\u6539ROS\u3002\u53e6\u5916ROS\u662f\u53cb\u597d\u7684\uff0c\u4e0d\u5177\u6392\u4ed6\u6027\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728ROS\u548c\u5176\u4ed6\u673a\u5668\u4eba\u8f6f\u4ef6\u6846\u67b6\u4e4b\u95f4\u81ea\u7531\u9009\u62e9\uff0c\u6216\u8005\u4e5f\u53ef\u4ee5\u5c06ROS\u4e0e\u5176\u4ed6\u8f6f\u4ef6\u6846\u67b6\u96c6\u6210\uff0c\u4ee5\u53d6\u957f\u8865\u77ed\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#17","title":"1.7 \u5e7f\u6cdb\u7684\u884c\u4e1a\u652f\u6301","text":"<p>\u4e1a\u754c\u5bf9ROS\u7684\u652f\u6301\u975e\u5e38\u5f3a\u5927\u3002\u9664\u4e86\u5728ROS\u4e0a\u5f00\u53d1\u4ea7\u54c1\u5916\uff0c\u6765\u81ea\u4e16\u754c\u5404\u5730\u7684\u5927\u5927\u5c0f\u5c0f\u7684\u516c\u53f8\u90fd\u5728\u6295\u5165\u8d44\u6e90\u4e3aROS\u505a\u51fa\u5f00\u6e90\u8d21\u732e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#18","title":"1.8 \u4e1a\u754c\u80af\u5b9a","text":"<p>\u6574\u4e2a\u673a\u5668\u4eba\u884c\u4e1a\u90fd\u4f9d\u8d56\u4e8eROS\u3002ROS\u662f\u6559\u6388\u673a\u5668\u4eba\u6280\u672f\u7684\u6807\u51c6\uff0c\u662f\u5927\u591a\u6570\u673a\u5668\u4eba\u7814\u7a76\u7684\u57fa\u7840\uff0c\u4ece\u5355\u4e2a\u5b66\u751f\u9879\u76ee\u5230\u591a\u673a\u6784\u5408\u4f5c\u518d\u5230\u5927\u578b\u200b\u200b\u7ade\u8d5b\uff0cROS\u90fd\u5360\u636e\u7740\u4e3b\u5bfc\u5730\u4f4d\u3002\u4e16\u754c\u5404\u5730\u4e0d\u8ba1\u5176\u6570\u7684\u673a\u5668\u4eba\u5185\u90e8\u90fd\u8fd0\u884c\u7740ROS\uff0c\u4ec5\u5728\u81ea\u4e3b\u79fb\u52a8\u673a\u5668\u4eba \\(AMR\\) \u4e2d\uff0cROS\u5c31\u5e2e\u52a9\u521b\u9020\u4e86\u6570\u5341\u4ebf\u7f8e\u5143\u7684\u4ef7\u503c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#2ros2ros1","title":"2.ROS2\u8f83\u4e4b\u4e8eROS1\u7684\u4f18\u52bf","text":"<p>ROS2\u662f\u5168\u65b0\u4e00\u4ee3\u673a\u5668\u4eba\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4e0d\u53ea\u662f\u529f\u80fd\u589e\u5f3a\u7684ROS1\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#21","title":"2.1 \u53bb\u4e2d\u5fc3\u5316","text":"<p>\u5728ROS1\u4e2d\u4f7f\u7528master\u8282\u70b9\u7ba1\u7406\u8c03\u5ea6ROS\u7cfb\u7edf\uff0c\u8fd9\u5b58\u5728\u6781\u5927\u7684\u5b89\u5168\u9690\u60a3\uff0c\u4e00\u65e6master\u8282\u70b9\u5f02\u5e38\u9000\u51fa\uff0c\u90a3\u4e48\u4f1a\u5bfc\u81f4\u6574\u4e2a\u7cfb\u7edf\u7684\u5d29\u6e83\u3002\u5728ROS2\u4e2d\u91c7\u7528\u4e86\u53bb\u4e2d\u5fc3\u5316\uff0c\u5404\u4e2a\u8282\u70b9\u4e4b\u95f4\u65e0\u9700\u901a\u8fc7master\u5173\u8054\uff0c\u5404\u4e2a\u8282\u70b9\u90fd\u662f\u7b49\u6001\u7684\uff0c\u53ef\u4ee5\u76f8\u4e92\u53d1\u73b0\u5f7c\u6b64\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#22","title":"2.2 \u5168\u65b0\u901a\u4fe1\u5e95\u5c42\u5b9e\u73b0","text":"<p>\u79c9\u7740\u4e0d\u91cd\u590d\u53d1\u660e\u8f6e\u5b50\u7684\u539f\u5219\uff0cROS2\u4e0d\u518d\u81ea\u5b9e\u73b0\u901a\u4fe1\u5e95\u5c42\uff0c\u800c\u662f\u76f4\u63a5\u66f4\u6362\u4e3aDDS\u901a\u4fe1\uff0c\u8fd9\u4f7f\u5f97ROS2\u8f83\u4e4b\u4e8eROS1\u65e0\u8bba\u662f\u901a\u4fe1\u7684\u5b9e\u884c\u6027\u3001\u53ef\u9760\u6027\u8fd8\u662f\u8fde\u7eed\u6027\u90fd\u6709\u5927\u5e45\u5ea6\u63d0\u5347\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#23","title":"2.3 \u5e94\u7528\u573a\u666f\u66f4\u4e3a\u5e7f\u6cdb","text":"<p>ROS1\u5728\u8bbe\u8ba1\u4e4b\u521d\u6709\u7740\u5929\u751f\u7684\u786c\u4ef6\u4f18\u52bf\u4ee5\u53ca\u5c40\u9650\u6027\uff1a</p> <ul> <li>\u5355\u673a\uff1b</li> <li>\u5de5\u4f5c\u7ad9\u7ea7\u7684\u8ba1\u7b97\u8d44\u6e90\uff1b</li> <li>\u65e0\u5b9e\u65f6\u6027\u8981\u6c42\uff08\u6709\u6b64\u7c7b\u9700\u6c42\u4e5f\u53ef\u4ee5\u4ee5\u7279\u6b8a\u65b9\u5f0f\u6ee1\u8db3\uff09\uff1b</li> <li>\u51fa\u8272\u7684\u7f51\u7edc\u8fde\u63a5\uff08\u6709\u7ebf\u6216\u8fd1\u8ddd\u79bb\u9ad8\u5e26\u5bbd\u65e0\u7ebf\uff09\uff1b</li> <li>\u4e3b\u8981\u7528\u4e8e\u5b66\u672f\u754c\uff1b</li> <li>\u7075\u6d3b\u6709\u4f59\u800c\u7ea6\u675f\u4e0d\u8db3\u3002</li> </ul> <p>\u8fd9\u5bfc\u81f4\u4e86\u5b83\u7684\u4e00\u4e9b\u5148\u5929\u6027\u7f3a\u9677\uff0c\u4e0d\u80fd\u9002\u5e94\u65b0\u65f6\u4ee3\u7684\u9700\u6c42\uff0c\u6bd4\u5982\uff1a</p> <ul> <li>\u5bf9\u591a\u673a\u5668\u4eba\u7f16\u961f\u652f\u6301\u6b20\u4f73\uff1b</li> <li>\u5c0f\u578b\u5d4c\u5165\u5f0f\u5e73\u53f0\u4e0d\u80fd\u5f88\u597d\u7684\u652f\u6301ROS\uff1b</li> <li>\u5b9e\u65f6\u6027\u5dee\uff1b</li> <li>ROS\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u53d7\u7f51\u7edc\u8d28\u91cf\u5f71\u54cd\u4e25\u91cd\uff1b</li> <li>\u4ea7\u54c1\u4e0d\u6613\u843d\u5730\u3002</li> </ul> <p>\u968f\u7740ROS2\u7684\u63a8\u51fa\uff0c\u4e0a\u8ff0\u573a\u666f\u7684\u7f3a\u9677\u90fd\u5f97\u5230\u5f88\u5927\u7a0b\u5ea6\u7684\u4fee\u590d\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/11-ros2jian-jie/113-ros2you-shi/#24","title":"2.4 \u5927\u91cf\u91c7\u7528\u65b0\u6280\u672f\u3001\u65b0\u7684\u8bbe\u8ba1\u7406\u5ff5","text":"<p>\u968f\u7740ROS\u5341\u6570\u5e74\u7684\u53d1\u5c55\uff0c\u5927\u91cf\u7684\u65b0\u6280\u672f\u4e5f\u4ea7\u751f\u3001\u6539\u8fdb\u3001\u6210\u719f\u5e76\u88ab\u5e7f\u6cdb\u91c7\u7528\uff0cROS\u4e5f\u5f00\u59cb\u5f15\u5165\u5e76\u5e94\u7528\u4e00\u4e9b\u65b0\u6280\u672f\uff0c\u6bd4\u5982\uff1a</p> <ul> <li> <p>DDS\uff08 Data Distribution Service\u2014\u2014\u6570\u636e\u5206\u53d1\u670d\u52a1\uff09\uff1b</p> </li> <li> <p>Zeroconf\uff1b</p> </li> <li> <p>ZeroMQ\uff1b</p> </li> <li> <p>Redis\uff1b</p> </li> <li> <p>WebSockets\u3002</p> </li> </ul> <p>\u8fd9\u4e9b\u65b0\u6280\u672f\u4e3aROS\u5e26\u6765\u4e86\u66f4\u591a\u7684\u4fbf\u5229\uff0c\u6bd4\u5982\uff1a\u66f4\u5c11\u7684\u7ef4\u62a4\u6210\u672c\uff0c\u5374\u6709\u7740\u66f4\u591a\u7684\u529f\u80fd\u62d3\u5c55\uff0c\u5e76\u4e14\u968f\u7740\u7b2c\u4e09\u65b9\u5e93\u7684\u5347\u7ea7\u800c\u6301\u7eed\u53d7\u76ca\u3002</p> <p>\u6b64\u5916\uff0cROS2\u8fd8\u91cd\u6784\u4e86API\u7cfb\u7edf\uff0c\u6539\u8fdb\u4e86ROS1\u7684API\u5728\u8bbe\u8ba1\u4e0a\u7684\u4e0d\u8db3\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/121-an-zhuang-ros2/","title":"121 an zhuang ros2","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/121-an-zhuang-ros2/#121-ros2","title":"1.2.1 \u5b89\u88c5ROS2","text":"<p>\u6574\u4f53\u800c\u8a00\uff0cROS2\u7684\u5b89\u88c5\u6b65\u9aa4\u4e0d\u7b97\u590d\u6742\uff0c\u5927\u81f4\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u51c6\u59071\uff1a\u8bbe\u7f6e\u8bed\u8a00\u73af\u5883\uff1b</li> <li>\u51c6\u59072\uff1a\u542f\u52a8Ubuntu universe\u5b58\u50a8\u5e93\uff1b</li> <li>\u8bbe\u7f6e\u8f6f\u4ef6\u6e90\uff1b</li> <li>\u5b89\u88c5ROS2\uff1b</li> <li>\u914d\u7f6e\u73af\u5883\u3002</li> </ol> <p>\u8bf7\u6ce8\u610f\uff1a\u867d\u7136\u5b89\u88c5\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u662f\u5b89\u88c5\u8fc7\u7a0b\u6bd4\u8f83\u8017\u65f6\uff0c\u9700\u8981\u8010\u5fc3\u7b49\u5f85\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/121-an-zhuang-ros2/#11","title":"1.\u51c6\u59071\uff1a\u8bbe\u7f6e\u8bed\u8a00\u73af\u5883","text":"<p>\u8bf7\u5148\u68c0\u67e5\u672c\u5730\u8bed\u8a00\u73af\u5883\u662f\u5426\u652f\u6301UTF-8\u7f16\u7801\uff0c\u53ef\u8c03\u7528\u5982\u4e0b\u6307\u4ee4\u68c0\u67e5\u5e76\u8bbe\u7f6eUTF-8\u7f16\u7801\uff1a</p> <pre><code>locale  # \u68c0\u67e5\u662f\u5426\u652f\u6301 UTF-8\n\nsudo apt update &amp;&amp; sudo apt install locales\nsudo locale-gen en_US en_US.UTF-8\nsudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8\nexport LANG=en_US.UTF-8\n\nlocale  # \u9a8c\u8bc1\u8bbe\u7f6e\u662f\u5426\u6210\u679c\n</code></pre> <p>\u6ce8\u610f\uff1a\u8bed\u8a00\u73af\u5883\u53ef\u4ee5\u4e0d\u540c\uff0c\u4f46\u5fc5\u987b\u652f\u6301UTF-8\u7f16\u7801\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/121-an-zhuang-ros2/#22ubuntu-universe","title":"2.\u51c6\u59072\uff1a\u542f\u52a8Ubuntu universe\u5b58\u50a8\u5e93","text":"<p>\u5e38\u7528\u7684\u542f\u52a8Ubuntu universe\u5b58\u50a8\u5e93\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a\u56fe\u5f62\u5316\u64cd\u4f5c\u4e0e\u547d\u4ee4\u884c\u64cd\u4f5c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/121-an-zhuang-ros2/#1","title":"\u65b9\u5f0f1\uff1a\u56fe\u5f62\u5316\u64cd\u4f5c","text":"<p>\u8bf7\u6253\u5f00\u8f6f\u4ef6\u4e0e\u66f4\u65b0\\(Software &amp; Updates\\)\u7a97\u53e3\uff0c\u786e\u4fdd\u542f\u52a8\u4e86universe\u5b58\u50a8\u5e93\uff0c\u4ee5\u4fdd\u8bc1\u53ef\u4ee5\u4e0b\u8f7d\u201d\u793e\u533a\u7ef4\u62a4\u7684\u514d\u8d39\u548c\u5f00\u6e90\u8f6f\u4ef6\u201c\uff0c\u64cd\u4f5c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/121-an-zhuang-ros2/#2","title":"\u65b9\u5f0f2\uff1a\u547d\u4ee4\u884c\u64cd\u4f5c","text":"<p>\u9996\u5148\uff0c\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u68c0\u67e5\u662f\u5426\u5df2\u7ecf\u542f\u52a8\u4e86Ubuntu universe\u5b58\u50a8\u5e93\uff1a</p> <pre><code>apt-cache policy | grep universe\n 500 http://us.archive.ubuntu.com/ubuntu jammy/universe amd64 Packages\n     release v=22.04,o=Ubuntu,a=jammy,n=jammy,l=Ubuntu,c=universe,b=amd64\n</code></pre> <p>\u5982\u679c\u6ca1\u6709\u5982\u4e0a\u6240\u793a\u7684\u8f93\u51fa\uff0c\u90a3\u4e48\u8bf7\u8c03\u7528\u5982\u4e0b\u547d\u4ee4\u542f\u52a8Ubuntu universe\u5b58\u50a8\u5e93\uff1a</p> <pre><code>sudo apt install software-properties-common\nsudo add-apt-repository universe\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/121-an-zhuang-ros2/#3","title":"3.\u8bbe\u7f6e\u8f6f\u4ef6\u6e90","text":"<p>\u5148\u5c06ROS 2 apt\u5b58\u50a8\u5e93\u6dfb\u52a0\u5230\u7cfb\u7edf\uff0c\u7528apt\u6388\u6743\u6211\u4eec\u7684GPG\u5bc6\u94a5\uff1a</p> <pre><code>sudo apt update &amp;&amp; sudo apt install curl gnupg lsb-release\nsudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg\n</code></pre> <p>\u63d0\u793a\uff1a\u5982\u679c\u629b\u51fa\u8fde\u63a5 raw.githubusercontent.com  \u5931\u8d25\u7684\u5f02\u5e38\u4fe1\u606f\uff0c\u89e3\u51b3\u65b9\u5f0f\u8bf7\u53c2\u8003\u672c\u8282\u6700\u540e\u90e8\u5206\u8865\u51452\u5185\u5bb9\u3002</p> <p>\u7136\u540e\u5c06\u5b58\u50a8\u5e93\u6dfb\u52a0\u5230\u6e90\u5217\u8868\uff1a</p> <pre><code>echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(source /etc/os-release &amp;&amp; echo $UBUNTU_CODENAME) main\" | sudo tee /etc/apt/sources.list.d/ros2.list &gt; /dev/null\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/121-an-zhuang-ros2/#4ros2","title":"4.\u5b89\u88c5ROS2","text":"<p>\u9996\u5148\u66f4\u65b0apt\u5b58\u50a8\u5e93\u7f13\u5b58\uff1a</p> <pre><code>sudo apt update\n</code></pre> <p>\u7136\u540e\u5347\u7ea7\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\\(ROS2\u8f6f\u4ef6\u5305\u5efa\u7acb\u5728\u7ecf\u5e38\u66f4\u65b0\u7684Ubuntu\u7cfb\u7edf\u4e0a\uff0c\u5728\u5b89\u88c5\u65b0\u8f6f\u4ef6\u5305\u4e4b\u524d\u8bf7\u786e\u4fdd\u60a8\u7684\u7cfb\u7edf\u662f\u6700\u65b0\u7684\\)\uff1a</p> <pre><code>sudo apt upgrade\n</code></pre> <p>\u5b89\u88c5\u684c\u9762\u7248ROS2\\(\u5efa\u8bae\\)\uff0c\u5305\u542b\uff1aROS\u3001RViz\u3001\u793a\u4f8b\u4e0e\u6559\u7a0b\uff0c\u5b89\u88c5\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>sudo apt install ros-humble-desktop\n</code></pre> <p>\u6216\u8005\uff0c\u4e5f\u53ef\u4ee5\u5b89\u88c5\u57fa\u7840\u7248ROS2\uff0c\u5305\u542b\uff1a\u901a\u4fe1\u5e93\u3001\u6d88\u606f\u5305\u3001\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u4f46\u662f\u6ca1\u6709 GUI \u5de5\u5177\uff0c\u5b89\u88c5\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>sudo apt install ros-humble-ros-base\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/121-an-zhuang-ros2/#5","title":"5.\u914d\u7f6e\u73af\u5883","text":"<p>\u7ec8\u7aef\u4e0b\uff0c\u6267\u884cROS2\u7a0b\u5e8f\u65f6\uff0c\u9700\u8981\u8c03\u7528\u5982\u4e0b\u547d\u4ee4\u914d\u7f6e\u73af\u5883\uff1a</p> <pre><code>source /opt/ros/humble/setup.bash\n</code></pre> <p>\u6bcf\u6b21\u65b0\u5f00\u7ec8\u7aef\u65f6\uff0c\u90fd\u5f97\u6267\u884c\u4e0a\u8ff0\u547d\u4ee4\uff0c\u6216\u8005\u4e5f\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u5c06\u914d\u7f6e\u73af\u5883\u6307\u4ee4\u5199\u5165 \u201d~/.bashrc\u201c \u6587\u4ef6\uff0c\u90a3\u4e48\u6bcf\u6b21\u65b0\u542f\u52a8\u7ec8\u7aef\u65f6\uff0c\u4e0d\u9700\u8981\u5728\u624b\u52a8\u914d\u7f6e\u73af\u5883\uff1a</p> <pre><code>echo \"source /opt/ros/humble/setup.bash\" &gt;&gt; ~/.bashrc\n</code></pre> <p>\u5230\u76ee\u524d\u4e3a\u6b62\uff0cROS2\u5c31\u5df2\u7ecf\u5b89\u88c5\u4e14\u914d\u7f6e\u5b8c\u6bd5\u4e86\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/121-an-zhuang-ros2/#1_1","title":"\u8865\u51451\uff1a\u5173\u4e8e\u5378\u8f7d\\(\u8c28\u614e\u64cd\u4f5c\\)","text":"<p>ROS2\u5b89\u88c5\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5982\u679c\u60f3\u5378\u8f7dROS2\uff0c\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>sudo apt remove ~nros-humble-* &amp;&amp; sudo apt autoremove\n</code></pre> <p>\u8fd8\u53ef\u4ee5\u518d\u5220\u9664ROS2\u5bf9\u5e94\u7684\u5b58\u50a8\u5e93\uff1a</p> <pre><code>sudo rm /etc/apt/sources.list.d/ros2.list\nsudo apt update\nsudo apt autoremove\n# Consider upgrading for packages previously shadowed.\nsudo apt upgrade\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/121-an-zhuang-ros2/#2-rawgithubusercontentcom","title":"\u8865\u51452\uff1a\u5173\u4e8e raw.githubusercontent.com \u8fde\u63a5\u5931\u8d25\u7684\u5904\u7406","text":"<p>\u5b89\u88c5ROS2\u8fc7\u7a0b\u4e2d\uff0c\u6267\u884c\u5230\u6b65\u9aa43\u4e5f\u5373\u8bbe\u7f6e\u8f6f\u4ef6\u6e90\u65f6\uff0c\u53ef\u80fd\u4f1a\u629b\u51fa\u5f02\u5e38\u3002</p> <p>\u5f02\u5e38\u63d0\u793a\uff1acurl: \\(7\\) Failed to connect to raw.githubusercontent.com port 443: \u62d2\u7edd\u8fde\u63a5\u3002</p> <p>\u5f02\u5e38\u539f\u56e0\uff1aDNS\u88ab\u6c61\u67d3\u3002</p> <p>\u89e3\u51b3\u601d\u8def\uff1a\u67e5\u8be2\u9519\u8bef\u63d0\u793a\u4e2d\u57df\u540d\u7684IP\u5730\u5740\uff0c\u7136\u540e\u4fee\u6539 /etc/hosts \u6587\u4ef6\uff0c\u6dfb\u52a0\u57df\u540d\u4e0eIP\u6620\u5c04\u3002</p> <p>\u5177\u4f53\u5b9e\u73b0\uff1a</p> <p>1.\u8bbf\u95ee https://www.ipaddress.com/ \u5e76\u8f93\u5165\u57df\u540d raw.githubusercontent.com\uff0c\u67e5\u8be2 ip \u5730\u5740\u3002</p> <p></p> <p></p> <p>\u67e5\u8be2\u5230\u7684ip\u5730\u5740\u53ef\u80fd\u6709\u591a\u4e2a\uff0c\u8bb0\u5f55\u4efb\u610f\u4e00\u4e2a\u5730\u5740\u5373\u53ef\u3002</p> <p>2.\u4fee\u6539/etc/hosts\u6587\u4ef6\uff1a</p> <pre><code>sudo gedit /etc/hosts\n</code></pre> <p>\u6dfb\u52a0ip\u548c\u57df\u540d\u6620\u5c04\u5230hosts\u6587\u4ef6\uff0c\u4fdd\u5b58\u5e76\u9000\u51fa\u3002</p> <p></p> <p>\u64cd\u4f5c\u5b8c\u6bd5\u540e\uff0c\u7ec8\u7aef\u518d\u6b21\u8fd0\u884c\u5b89\u88c5\u6307\u4ee4\u5373\u53ef\u6b63\u5e38\u6267\u884c</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/122-ce-shi-ros2/","title":"122 ce shi ros2","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/122-ce-shi-ros2/#122-ros2","title":"1.2.2 \u6d4b\u8bd5ROS2","text":"<p>\u5728ROS2\u4e2d\u5df2\u7ecf\u5185\u7f6e\u4e86\u4e00\u4e9b\u6848\u4f8b\uff0c\u5b89\u88c5\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u8fd0\u884c\u8fd9\u4e9b\u6848\u4f8b\uff0c\u4ee5\u6d4b\u8bd5ROS2\u7684\u5b89\u88c5\u4e0e\u914d\u7f6e\u662f\u5426\u6b63\u5e38\uff0c\u5728\u6b64\uff0c\u6211\u4eec\u9009\u7528ROS2\u5185\u7f6e\u7684\u5c0f\u4e4c\u9f9f\u6848\u4f8b\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\u3002</p> <p>1.\u6253\u5f00\u4e24\u4e2a\u7ec8\u7aef\\(\u53ef\u4ee5\u4f7f\u7528\u5feb\u6377\u952eCtrl + Alt + T\\)\uff1b</p> <p>2.\u7ec8\u7aef1\u4e2d\u8f93\u5165\u6307\u4ee4\uff1a<code>ros2 run turtlesim turtlesim_node</code>\uff0c\u6267\u884c\u5b8c\u6bd5\uff0c\u4f1a\u542f\u52a8\u4e00\u4e2a\u7ed8\u6709\u5c0f\u4e4c\u9f9f\u7684\u7a97\u53e3\uff1b</p> <p>3.\u7ec8\u7aef2\u4e2d\u8f93\u5165\u6307\u4ee4\uff1a<code>ros2 run turtlesim turtle_teleop_key</code>\uff0c\u6267\u884c\u5b8c\u6bd5\uff0c\u53ef\u4ee5\u5728\u6b64\u7ec8\u7aef\u4e2d\u901a\u8fc7\u952e\u76d8\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8\u3002</p> <p>\u8fd0\u884c\u7ed3\u679c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <p></p> <p>\u6ce8\u610f\uff1a\u5728\u4f7f\u7528\u952e\u76d8\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8\u65f6\uff0c\u9700\u8981\u4fdd\u8bc1\u5149\u6807\u805a\u7126\u5728\u7ec8\u7aef2\u4e2d\uff0c\u5426\u5219\u4e4c\u9f9f\u65e0\u54cd\u5e94\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/123-an-zhuang-ros2-gou-jian-gong-ju/","title":"123 an zhuang ros2 gou jian gong ju","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/12-ros2an-zhuang/123-an-zhuang-ros2-gou-jian-gong-ju/#123-colcon","title":"1.2.3 \u5b89\u88c5colcon\u6784\u5efa\u5de5\u5177","text":"<p>colcon\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u7528\u4e8e\u6539\u8fdb\u7f16\u8bd1\uff0c\u6d4b\u8bd5\u548c\u4f7f\u7528\u591a\u4e2a\u8f6f\u4ef6\u5305\u7684\u5de5\u4f5c\u6d41\u7a0b\u3002\u5b83\u5b9e\u73b0\u8fc7\u7a0b\u81ea\u52a8\u5316\uff0c\u5904\u7406\u9700\u6c42\u5e76\u8bbe\u7f6e\u73af\u5883\u4ee5\u4fbf\u4e8e\u4f7f\u7528\u8f6f\u4ef6\u5305\u3002ROS2\u4e2d\u4fbf\u662f\u4f7f\u7528colcon\u4f5c\u4e3a\u5305\u6784\u5efa\u5de5\u5177\u7684\uff0c\u4f46\u662fROS2\u4e2d\u6ca1\u6709\u9ed8\u8ba4\u5b89\u88c5colcon\uff0c\u9700\u8981\u81ea\u884c\u5b89\u88c5\uff0c\u5b89\u88c5\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>sudo apt install python3-colcon-common-extensions\n</code></pre> <p>\u5b89\u88c5\u5b8ccolcon\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5728ROS2\u4e2d\u7f16\u5199\u5e94\u7528\u7a0b\u5e8f\u4e86\uff0c\u4e0b\u4e00\u8282\u6211\u4eec\u5c06\u4ecb\u7ecdROS2\u7248\u672c\u7684HelloWorld\u5b9e\u73b0\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131-helloworldcshi-73b029/","title":"131 helloworldcshi 73b029","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131-helloworldcshi-73b029/#132-helloworldc","title":"1.3.2 HelloWorld\uff08C++\uff09","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131-helloworldcshi-73b029/#1","title":"1.\u521b\u5efa\u529f\u80fd\u5305","text":"<p>\u7ec8\u7aef\u4e0b\uff0c\u8fdb\u5165ws00_helloworld/src\u76ee\u5f55\uff0c\u4f7f\u7528\u5982\u4e0b\u6307\u4ee4\u521b\u5efa\u4e00\u4e2aC++\u529f\u80fd\u5305\uff1a</p> <pre><code>ros2 pkg create pkg01_helloworld_cpp --build-type ament_cmake --dependencies rclcpp --node-name helloworld\n</code></pre> <p>\u6267\u884c\u5b8c\u6bd5\uff0c\u5728src\u76ee\u5f55\u4e0b\u5c06\u751f\u6210\u4e00\u4e2a\u540d\u4e3apkg01_helloworld_cpp\u7684\u76ee\u5f55\uff0c\u4e14\u76ee\u5f55\u4e2d\u5df2\u7ecf\u9ed8\u8ba4\u751f\u6210\u4e86\u4e00\u4e9b\u5b50\u7ea7\u6587\u4ef6\u4e0e\u6587\u4ef6\u5939\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131-helloworldcshi-73b029/#2","title":"2.\u7f16\u8f91\u6e90\u6587\u4ef6","text":"<p>\u8fdb\u5165pkg01_helloworld_cpp/src\u76ee\u5f55\uff0c\u8be5\u76ee\u5f55\u4e0b\u6709\u4e00helloworld.cpp\u6587\u4ef6\uff0c\u4fee\u6539\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#include \"rclcpp/rclcpp.hpp\"\n\nint main(int argc, char ** argv)\n{\n  // \u521d\u59cb\u5316 ROS2\n  rclcpp::init(argc,argv);\n  // \u521b\u5efa\u8282\u70b9\n  auto node = rclcpp::Node::make_shared(\"helloworld_node\");\n  // \u8f93\u51fa\u6587\u672c\n  RCLCPP_INFO(node-&gt;get_logger(),\"hello world!\");\n  // \u91ca\u653e\u8d44\u6e90\n  rclcpp::shutdown();\n  return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131-helloworldcshi-73b029/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<p>\u5728\u6b65\u9aa41\u521b\u5efa\u529f\u80fd\u5305\u65f6\u6240\u4f7f\u7528\u7684\u6307\u4ee4\u5df2\u7ecf\u9ed8\u8ba4\u751f\u6210\u4e14\u914d\u7f6e\u4e86\u914d\u7f6e\u6587\u4ef6\uff0c\u4e0d\u8fc7\u5b9e\u9645\u5e94\u7528\u4e2d\u7ecf\u5e38\u9700\u8981\u81ea\u5df1\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff0c\u6240\u4ee5\u5728\u6b64\u5bf9\u76f8\u5173\u5185\u5bb9\u505a\u7b80\u5355\u4ecb\u7ecd\uff0c\u6240\u4f7f\u7528\u7684\u914d\u7f6e\u6587\u4ef6\u4e3b\u8981\u6709\u4e24\u4e2a\uff0c\u5206\u522b\u662f\u529f\u80fd\u5305\u4e0b\u7684package.xml\u4e0eCMakeLists.txt\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131-helloworldcshi-73b029/#1packagexml","title":"1.package.xml","text":"<p>\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;?xml-model href=\"http://download.ros.org/schema/package_format3.xsd\" schematypens=\"http://www.w3.org/2001/XMLSchema\"?&gt;\n&lt;package format=\"3\"&gt;\n  &lt;name&gt;pkg01_helloworld_cpp&lt;/name&gt;\n  &lt;version&gt;0.0.0&lt;/version&gt;\n  &lt;description&gt;TODO: Package description&lt;/description&gt;\n  &lt;maintainer email=\"ros2@todo.todo\"&gt;ros2&lt;/maintainer&gt;\n  &lt;license&gt;TODO: License declaration&lt;/license&gt;\n\n  &lt;buildtool_depend&gt;ament_cmake&lt;/buildtool_depend&gt;\n\n  &lt;!-- \u6240\u9700\u8981\u4f9d\u8d56 --&gt;\n  &lt;depend&gt;rclcpp&lt;/depend&gt;\n\n  &lt;test_depend&gt;ament_lint_auto&lt;/test_depend&gt;\n  &lt;test_depend&gt;ament_lint_common&lt;/test_depend&gt;\n\n  &lt;export&gt;\n    &lt;build_type&gt;ament_cmake&lt;/build_type&gt;\n  &lt;/export&gt;\n&lt;/package&gt;\n</code></pre> <p>\u6ce8\u91ca\u90e8\u5206\u4ee5\u540e\u9700\u8981\u6839\u636e\u5b9e\u9645\u7684\u5305\u4f9d\u8d56\u8fdb\u884c\u6dfb\u52a0\u6216\u4fee\u6539\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131-helloworldcshi-73b029/#2cmakeliststxt","title":"2.CMakeLists.txt","text":"<p>\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>cmake_minimum_required(VERSION 3.8)\nproject(pkg01_helloworld_cpp)\n\nif(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES \"Clang\")\n  add_compile_options(-Wall -Wextra -Wpedantic)\nendif()\n\n# find dependencies\nfind_package(ament_cmake REQUIRED)\n# \u5f15\u5165\u5916\u90e8\u4f9d\u8d56\u5305\nfind_package(rclcpp REQUIRED)\n\n# \u6620\u5c04\u6e90\u6587\u4ef6\u4e0e\u53ef\u6267\u884c\u6587\u4ef6\nadd_executable(helloworld src/helloworld.cpp)\n# \u8bbe\u7f6e\u76ee\u6807\u4f9d\u8d56\u5e93\nament_target_dependencies(\n  helloworld\n  \"rclcpp\"\n)\n# \u5b9a\u4e49\u5b89\u88c5\u89c4\u5219\ninstall(TARGETS helloworld\n  DESTINATION lib/${PROJECT_NAME})\n\nif(BUILD_TESTING)\n  find_package(ament_lint_auto REQUIRED)\n  # the following line skips the linter which checks for copyrights\n  # comment the line when a copyright and license is added to all source files\n  set(ament_cmake_copyright_FOUND TRUE)\n  # the following line skips cpplint (only works in a git repo)\n  # comment the line when this package is in a git repo and when\n  # a copyright and license is added to all source files\n  set(ament_cmake_cpplint_FOUND TRUE)\n  ament_lint_auto_find_test_dependencies()\nendif()\n\nament_package()\n</code></pre> <p>\u4e2d\u6587\u6ce8\u91ca\u90e8\u5206\u4ee5\u540e\u53ef\u80fd\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131-helloworldcshi-73b029/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5230\u5de5\u4f5c\u7a7a\u95f4\uff0c\u6267\u884c\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>colcon build\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131-helloworldcshi-73b029/#5","title":"5.\u6267\u884c","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5230\u5de5\u4f5c\u7a7a\u95f4\uff0c\u6267\u884c\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run pkg01_helloworld_cpp helloworld\n</code></pre> <p>\u7a0b\u5e8f\u6267\u884c\uff0c\u5728\u7ec8\u7aef\u4e0b\u5c06\u8f93\u51fa\u6587\u672c\uff1a\"hello world!\"\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131/","title":"131","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131/#131","title":"1.3.1 \u6848\u4f8b\u7b80\u4ecb","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131/#1","title":"1.\u9700\u6c42","text":"<p>\u7f16\u5199ROS2\u7a0b\u5e8f\uff0c\u8981\u6c42\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u53ef\u4ee5\u5728\u7ec8\u7aef\u8f93\u51fa\u6587\u672c\"Helo World\"\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131/#2","title":"2.\u51c6\u5907","text":"<p>\u65e0\u8bba\u662f\u4f7f\u7528C++\u8fd8\u662fPython\u7f16\u5199ROS2\u7a0b\u5e8f\uff0c\u90fd\u9700\u8981\u4f9d\u8d56\u4e8e\u5de5\u4f5c\u7a7a\u95f4\uff0c\u5728\u6b64\uff0c\u6211\u4eec\u5148\u5b9e\u73b0\u5de5\u4f5c\u7a7a\u95f4\u7684\u521b\u5efa\u4e0e\u7f16\u8bd1\uff0c\u6253\u5f00\u7ec8\u7aef\uff0c\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>mkdir -p ws00_helloworld/src #\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4\u4ee5\u53ca\u5b50\u7ea7\u76ee\u5f55 src\uff0c\u5de5\u4f5c\u7a7a\u95f4\u540d\u79f0\u53ef\u4ee5\u81ea\u5b9a\u4e49\ncd ws00_helloworld #\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\ncolcon build #\u7f16\u8bd1\n</code></pre> <p>\u4e0a\u8ff0\u6307\u4ee4\u6267\u884c\u5b8c\u6bd5\uff0c\u5c06\u521b\u5efaws00_helloworld\u76ee\u5f55\uff0c\u4e14\u8be5\u76ee\u5f55\u4e0b\u5305\u542bbuild\u3001install\u3001log\u3001src\u5171\u56db\u4e2a\u5b50\u7ea7\u76ee\u5f55\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/131/#3","title":"3.\u6d41\u7a0b\u7b80\u4ecb","text":"<p>\u5de5\u4f5c\u7a7a\u95f4\u521b\u5efa\u5b8c\u6bd5\u540e\uff0c\u6211\u4e48\u53ef\u4ee5\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u7684src\u76ee\u5f55\u4e2d\u7f16\u5199C++\u6216Python\u7a0b\u5e8f\uff0c\u4e14\u4e24\u79cd\u8bed\u8a00\u7684\u5b9e\u73b0\u6d41\u7a0b\u5927\u81f4\u4e00\u81f4\uff0c\u4e3b\u8981\u5305\u542b\u5982\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u521b\u5efa\u529f\u80fd\u5305\uff1b</li> <li>\u7f16\u8f91\u6e90\u6587\u4ef6\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol> <p>\u4e0b\u9762\u4e24\u8282\u6211\u4eec\u4f1a\u4ecb\u7ecd\u5177\u4f53\u7684\u5b9e\u73b0\u7ec6\u8282\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/132-helloworldpythonshi-73b029/","title":"132 helloworldpythonshi 73b029","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/132-helloworldpythonshi-73b029/#133-helloworldpython","title":"1.3.3 HelloWorld\uff08Python\uff09","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/132-helloworldpythonshi-73b029/#1","title":"1.\u521b\u5efa\u529f\u80fd\u5305","text":"<p>\u7ec8\u7aef\u4e0b\uff0c\u8fdb\u5165ws00_helloworld/src\u76ee\u5f55\uff0c\u4f7f\u7528\u5982\u4e0b\u6307\u4ee4\u521b\u5efa\u4e00\u4e2apython\u529f\u80fd\u5305\uff1a</p> <pre><code>ros2 pkg create pkg02_helloworld_py --build-type ament_python --dependencies rclpy --node-name helloworld\n</code></pre> <p>\u6267\u884c\u5b8c\u6bd5\uff0c\u5728src\u76ee\u5f55\u4e0b\u5c06\u751f\u6210\u4e00\u4e2a\u540d\u4e3apkg02_helloworld_py\u7684\u76ee\u5f55\uff0c\u4e14\u76ee\u5f55\u4e2d\u5df2\u7ecf\u9ed8\u8ba4\u751f\u6210\u4e86\u4e00\u4e9b\u5b50\u7ea7\u6587\u4ef6\u4e0e\u6587\u4ef6\u5939\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/132-helloworldpythonshi-73b029/#2","title":"2.\u7f16\u8f91\u6e90\u6587\u4ef6","text":"<p>\u8fdb\u5165pkg02_helloworld_py/pkg02_helloworld_py\u76ee\u5f55\uff0c\u8be5\u76ee\u5f55\u4e0b\u6709\u4e00helloworld.py\u6587\u4ef6\uff0c\u4fee\u6539\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>import rclpy\n\ndef main():\n    # \u521d\u59cb\u5316 ROS2\n    rclpy.init()\n    # \u521b\u5efa\u8282\u70b9\n    node = rclpy.create_node(\"helloworld_py_node\")\n    # \u8f93\u51fa\u6587\u672c\n    node.get_logger().info(\"hello world!\")\n    # \u91ca\u653e\u8d44\u6e90\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/132-helloworldpythonshi-73b029/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<p>\u4e0eC++\u7c7b\u4f3c\u7684\uff0c\u5728\u6b65\u9aa41\u521b\u5efa\u529f\u80fd\u5305\u65f6\u6240\u4f7f\u7528\u7684\u6307\u4ee4\u4e5f\u5df2\u7ecf\u9ed8\u8ba4\u751f\u6210\u4e14\u914d\u7f6e\u4e86\u914d\u7f6e\u6587\u4ef6\uff0c\u4e0d\u8fc7\u5b9e\u9645\u5e94\u7528\u4e2d\u7ecf\u5e38\u9700\u8981\u81ea\u5df1\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff0c\u6240\u4ee5\u5728\u6b64\u5bf9\u76f8\u5173\u5185\u5bb9\u505a\u7b80\u5355\u4ecb\u7ecd\uff0c\u6240\u4f7f\u7528\u7684\u914d\u7f6e\u6587\u4ef6\u4e3b\u8981\u6709\u4e24\u4e2a\uff0c\u5206\u522b\u662f\u529f\u80fd\u5305\u4e0b\u7684package.xml\u4e0esetup.py\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/132-helloworldpythonshi-73b029/#1packagexml","title":"1.package.xml","text":"<p>\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;?xml-model href=\"http://download.ros.org/schema/package_format3.xsd\" schematypens=\"http://www.w3.org/2001/XMLSchema\"?&gt;\n&lt;package format=\"3\"&gt;\n  &lt;name&gt;pkg02_helloworld_py&lt;/name&gt;\n  &lt;version&gt;0.0.0&lt;/version&gt;\n  &lt;description&gt;TODO: Package description&lt;/description&gt;\n  &lt;maintainer email=\"ros2@todo.todo\"&gt;ros2&lt;/maintainer&gt;\n  &lt;license&gt;TODO: License declaration&lt;/license&gt;\n\n  &lt;!-- \u6240\u9700\u8981\u4f9d\u8d56 --&gt;\n  &lt;depend&gt;rclpy&lt;/depend&gt;\n\n  &lt;test_depend&gt;ament_copyright&lt;/test_depend&gt;\n  &lt;test_depend&gt;ament_flake8&lt;/test_depend&gt;\n  &lt;test_depend&gt;ament_pep257&lt;/test_depend&gt;\n  &lt;test_depend&gt;python3-pytest&lt;/test_depend&gt;\n\n  &lt;export&gt;\n    &lt;build_type&gt;ament_python&lt;/build_type&gt;\n  &lt;/export&gt;\n&lt;/package&gt;\n</code></pre> <p>\u6ce8\u91ca\u90e8\u5206\u4ee5\u540e\u9700\u8981\u6839\u636e\u5b9e\u9645\u7684\u5305\u4f9d\u8d56\u8fdb\u884c\u6dfb\u52a0\u6216\u4fee\u6539\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/132-helloworldpythonshi-73b029/#2setuppy","title":"2.setup.py","text":"<p>\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>from setuptools import setup\n\npackage_name = 'pkg02_helloworld_py'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='ros2',\n    maintainer_email='ros2@todo.todo',\n    description='TODO: Package description',\n    license='TODO: License declaration',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            # \u6620\u5c04\u6e90\u6587\u4ef6\u4e0e\u53ef\u6267\u884c\u6587\u4ef6\n            'helloworld = pkg02_helloworld_py.helloworld:main'\n        ],\n    },\n)\n</code></pre> <p>\u6ce8\u91ca\u90e8\u5206\u4ee5\u540e\u53ef\u80fd\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/132-helloworldpythonshi-73b029/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5230\u5de5\u4f5c\u7a7a\u95f4\uff0c\u6267\u884c\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>colcon build\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/132-helloworldpythonshi-73b029/#5","title":"5.\u6267\u884c","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5230\u5de5\u4f5c\u7a7a\u95f4\uff0c\u6267\u884c\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run pkg02_helloworld_py helloworld\n</code></pre> <p>\u7a0b\u5e8f\u6267\u884c\uff0c\u5728\u7ec8\u7aef\u4e0b\u5c06\u8f93\u51fa\u6587\u672c\uff1a\"hello world!\"\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/134-yun-xing-you-hua/","title":"134 yun xing you hua","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/13-ros2kuai-su-ti-yan/134-yun-xing-you-hua/#134","title":"1.3.4 \u8fd0\u884c\u4f18\u5316","text":"<p>\u6bcf\u6b21\u7ec8\u7aef\u4e2d\u6267\u884c\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u7684\u8282\u70b9\u65f6\uff0c\u90fd\u9700\u8981\u8c03\u7528<code>. install/setup.bash</code>\u6307\u4ee4\uff0c\u4f7f\u7528\u4e0d\u4fbf\uff0c\u4f18\u5316\u7b56\u7565\u662f\uff0c\u53ef\u4ee5\u5c06\u8be5\u6307\u4ee4\u7684\u8c03\u7528\u6dfb\u52a0\u8fdb<code>~/setup.bash</code>\uff0c\u64cd\u4f5c\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>echo \"source /{\u5de5\u4f5c\u7a7a\u95f4\u8def\u5f84}/install/setup.bash\" &gt;&gt; ~/.bashrc\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>echo \"source /home/ros2/ws00_helloworld/install/setup.bash\" &gt;&gt; ~/.bashrc\n</code></pre> <p>\u4ee5\u540e\u518d\u542f\u52a8\u7ec8\u7aef\u65f6\uff0c\u65e0\u9700\u624b\u52a8\u518d\u624b\u52a8\u5237\u65b0\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u7528\u66f4\u65b9\u4fbf\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/141-an-zhuang-vscode/","title":"141 an zhuang vscode","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/141-an-zhuang-vscode/#141-vscode","title":"1.4.1 \u5b89\u88c5VSCode","text":"<p>VSCode\u5168\u79f0Visual Studio Code\uff0c\u662f\u5fae\u8f6f\u63a8\u51fa\u7684\u4e00\u6b3e\u8f7b\u91cf\u7ea7\u4ee3\u7801\u7f16\u8f91\u5668\uff0c\u514d\u8d39\u3001\u5f00\u6e90\u800c\u4e14\u529f\u80fd\u5f3a\u5927\u3002\u5b83\u652f\u6301\u51e0\u4e4e\u6240\u6709\u4e3b\u6d41\u7684\u7a0b\u5e8f\u8bed\u8a00\u7684\u8bed\u6cd5\u9ad8\u4eae\u3001\u667a\u80fd\u4ee3\u7801\u8865\u5168\u3001\u81ea\u5b9a\u4e49\u70ed\u952e\u3001\u62ec\u53f7\u5339\u914d\u3001\u4ee3\u7801\u7247\u6bb5\u3001\u4ee3\u7801\u5bf9\u6bd4Diff\u3001GIT \u7b49\u7279\u6027\uff0c\u652f\u6301\u63d2\u4ef6\u6269\u5c55\uff0c\u5e76\u9488\u5bf9\u7f51\u9875\u5f00\u53d1\u548c\u4e91\u7aef\u5e94\u7528\u5f00\u53d1\u505a\u4e86\u4f18\u5316\u3002\u8f6f\u4ef6\u8de8\u5e73\u53f0\u652f\u6301Win\u3001Mac\u4ee5\u53caLinux\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/141-an-zhuang-vscode/#1\u4e0b\u8f7d","title":"1.\u4e0b\u8f7d","text":"<p>vscode\u4e0b\u8f7d\uff1ahttps://code.visualstudio.com/Download\u3002</p> <p>\u5386\u53f2\u7248\u672c\u4e0b\u8f7d\u94fe\u63a5\uff1ahttps://code.visualstudio.com/updates\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/141-an-zhuang-vscode/#2vscode-\u5b89\u88c5\u4e0e\u5378\u8f7d","title":"2.vscode \u5b89\u88c5\u4e0e\u5378\u8f7d","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/141-an-zhuang-vscode/#21-\u5b89\u88c5","title":"2.1 \u5b89\u88c5","text":"<p>\u65b9\u5f0f1\uff1a\u53cc\u51fb\u5b89\u88c5\u5373\u53ef\\(\u6216\u53f3\u51fb\u9009\u62e9\u5b89\u88c5\\)\uff1b</p> <p>\u65b9\u5f0f2\uff1a<code>sudo dpkg -i xxxx.deb</code>\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/141-an-zhuang-vscode/#22-\u5378\u8f7d","title":"2.2 \u5378\u8f7d","text":"<pre><code>sudo dpkg --purge  code\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/141-an-zhuang-vscode/#3vscode","title":"3.VSCode\u542f\u52a8","text":"<p>VSCode\u542f\u52a8\u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728Show Applications\\(\u663e\u793a\u5e94\u7528\u7a0b\u5e8f\\) \u4e2d\u641c\u7d22VSCode\u76f4\u63a5\u542f\u52a8\\(\u4e5f\u53ef\u4ee5\u5c06\u5176\u6dfb\u52a0\u5230\u6536\u85cf\u5939\\)\u3002</p> <p>\u6216\u8005\uff0c\u4e5f\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e0b\u8fdb\u5165\u9700\u8981\u88ab\u6253\u5f00\u7684\u76ee\u5f55\\(\u6bd4\u5982\uff1a\u524d\u9762\u521b\u5efa\u7684ROS2\u5de5\u4f5c\u7a7a\u95f4ws00\\_helloworld\\)\uff0c\u7136\u540e\u8f93\u5165\u547d\u4ee4\uff1a<code>code .</code>\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/141-an-zhuang-vscode/#4vscode","title":"4.VSCode\u63d2\u4ef6","text":"<p>VSCode\u652f\u6301\u63d2\u4ef6\u6269\u5c55\uff0c\u4f9d\u8d56\u4e8eVSCode\u4e30\u5bcc\u591a\u6837\u7684\u63d2\u4ef6\uff0c\u53ef\u4ee5\u5927\u5927\u63d0\u9ad8\u7a0b\u5e8f\u5f00\u53d1\u6548\u7387\uff0c\u4e3a\u4e86\u65b9\u4fbfROS2\u7a0b\u5e8f\u5f00\u53d1\uff0c\u6211\u4eec\u4e5f\u9700\u8981\u5b89\u88c5\u4e00\u4e9b\u63d2\u4ef6\u3002</p> <p>\u9996\u5148\u70b9\u51fb\u4fa7\u8fb9\u680f\u7684Extensions\\(\u63d2\u4ef6\\)\u9009\u9879\u6216\u8005\u4f7f\u7528\u5feb\u6377\u952e<code>Ctrl+Shift+X</code>\u6253\u5f00\u63d2\u4ef6\u7a97\u53e3\uff0c\u672c\u8bfe\u7a0b\u5efa\u8bae\u5b89\u88c5\u7684\u63d2\u4ef6\u5982\u4e0b\uff1a</p> <p></p> <p>\u5f53\u7136\uff0c\u4e0a\u8ff0\u53ea\u662f\u90e8\u5206\u63a8\u8350\u63d2\u4ef6\uff0c\u5927\u5bb6\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u9700\u6c42\u5b89\u88c5\u5176\u4ed6\u6269\u5c55\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/141-an-zhuang-vscode/#5vscode","title":"5.VSCode\u914d\u7f6e","text":"<p>\u5728VSCode\u4e2d\uff0ccpp\u6587\u4ef6\u4e2d\u7684<code>#include \"rclcpp/rclcpp.hpp\"</code>\u5305\u542b\u8bed\u53e5\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u8fd9\u662f\u56e0\u4e3a\u6ca1\u6709\u8bbe\u7f6eVSCode\u914d\u7f6e\u6587\u4ef6\u4e2d includepath\u5c5e\u6027\uff0c\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u6b65\u9aa4\u89e3\u51b3\u6b64\u95ee\u9898\uff1a</p> <p></p> <ol> <li>\u5c06\u9f20\u6807\u79fb\u5230\u9519\u8bef\u63d0\u793a\u8bed\u53e5\uff0c\u6b64\u65f6\u4f1a\u51fa\u73b0\u5f39\u7a97\uff1b</li> <li>\u70b9\u51fb\u5f39\u7a97\u4e2d\u7684\u5feb\u901f\u4fee\u590d\uff0c\u4f1a\u6709\u65b0\u7684\u5f39\u7a97\uff0c\u518d\u70b9\u51fb<code>\u7f16\u8f91\"includePath\"\u8bbe\u7f6e</code>\uff1b</li> <li>\u5728\u65b0\u9875\u9762\u4e2d\uff0c\u5305\u542b\u8def\u5f84\u5c5e\u6027\u5bf9\u5e94\u7684\u6587\u672c\u57df\u4e2d\uff0c\u6362\u884c\u8f93\u5165\u88ab\u5305\u542b\u7684\u8def\u5f84<code>/opt/ros/humble/include/**</code>\u3002</li> </ol> <p>\u81f3\u6b64\uff0c\u95ee\u9898\u4fee\u590d\u3002</p> <p>VSCode\u5b89\u88c5\u5e76\u914d\u7f6e\u5b8c\u6bd5\u540e\uff0c\u5927\u5bb6\u5c31\u53ef\u4ee5\u5728\u5176\u4e2d\u7f16\u5199ROS2\u7a0b\u5e8f\u4e86\u3002\u5f53\u7136\u4e3a\u4e86\u63d0\u9ad8\u7f16\u7801\u6548\u7387\uff0c\u6211\u4eec\u4f1a\u7ecf\u5e38\u6027\u7684\u4f7f\u7528\u5230\u4e00\u4e9b\u5feb\u6377\u952e\uff0cVSCode\u7684\u5feb\u6377\u952e\u53ef\u4ee5\u5728\u83dc\u5355\u680f\u7684\u201c\u5e2e\u52a9\u201d\u4e2d\u67e5\u770b\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/142-an-zhuang-zhong-duan/","title":"142 an zhuang zhong duan","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/142-an-zhuang-zhong-duan/#142","title":"1.4.2 \u5b89\u88c5\u7ec8\u7aef","text":"<p>\u5728ROS2\u4e2d\uff0c\u9700\u8981\u9891\u7e41\u7684\u4f7f\u7528\u5230\u7ec8\u7aef\uff0c\u4e14\u53ef\u80fd\u9700\u8981\u540c\u65f6\u5f00\u542f\u591a\u4e2a\u7a97\u53e3\uff0c\u63a8\u8350\u4e00\u6b3e\u8f83\u4e3a\u597d\u7528\u7684\u7ec8\u7aef\uff1aTerminator\u3002\u6548\u679c\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/142-an-zhuang-zhong-duan/#1\u5b89\u88c5","title":"1.\u5b89\u88c5","text":"<pre><code>sudo apt install terminator\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/142-an-zhuang-zhong-duan/#2\u6dfb\u52a0\u5230\u6536\u85cf\u5939","title":"2.\u542f\u52a8","text":"<p>\u53ef\u4ee5\u76f4\u63a5\u5728Show Applications\\(\u663e\u793a\u5e94\u7528\u7a0b\u5e8f\\) \u4e2d\u641c\u7d22terminator\u76f4\u63a5\u542f\u52a8\\(\u4e5f\u53ef\u4ee5\u5c06\u5176\u6dfb\u52a0\u5230\u6536\u85cf\u5939\\)\uff1b\u6216\u8005\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5feb\u6377\u952e<code>Ctrl+Alt+T</code>\u542f\u52a8\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/142-an-zhuang-zhong-duan/#3terminator-\u5e38\u7528\u5feb\u6377\u952e","title":"3.Terminator \u5e38\u7528\u5feb\u6377\u952e","text":"<p>\u7b2c\u4e00\u90e8\u4efd\uff1a\u5173\u4e8e\u5728\u540c\u4e00\u4e2a\u6807\u7b7e\u5185\u7684\u64cd\u4f5c</p> <pre><code>Alt+Up                          //\u79fb\u52a8\u5230\u4e0a\u9762\u7684\u7ec8\u7aef\nAlt+Down                        //\u79fb\u52a8\u5230\u4e0b\u9762\u7684\u7ec8\u7aef\nAlt+Left                        //\u79fb\u52a8\u5230\u5de6\u8fb9\u7684\u7ec8\u7aef\nAlt+Right                       //\u79fb\u52a8\u5230\u53f3\u8fb9\u7684\u7ec8\u7aef\nCtrl+Shift+O                    //\u6c34\u5e73\u5206\u5272\u7ec8\u7aef\nCtrl+Shift+E                    //\u5782\u76f4\u5206\u5272\u7ec8\u7aef\nCtrl+Shift+Right                //\u5728\u5782\u76f4\u5206\u5272\u7684\u7ec8\u7aef\u4e2d\u5c06\u5206\u5272\u6761\u5411\u53f3\u79fb\u52a8\nCtrl+Shift+Left                 //\u5728\u5782\u76f4\u5206\u5272\u7684\u7ec8\u7aef\u4e2d\u5c06\u5206\u5272\u6761\u5411\u5de6\u79fb\u52a8\nCtrl+Shift+Up                   //\u5728\u6c34\u5e73\u5206\u5272\u7684\u7ec8\u7aef\u4e2d\u5c06\u5206\u5272\u6761\u5411\u4e0a\u79fb\u52a8\nCtrl+Shift+Down                 //\u5728\u6c34\u5e73\u5206\u5272\u7684\u7ec8\u7aef\u4e2d\u5c06\u5206\u5272\u6761\u5411\u4e0b\u79fb\u52a8\nCtrl+Shift+S                    //\u9690\u85cf/\u663e\u793a\u6eda\u52a8\u6761\nCtrl+Shift+F                    //\u641c\u7d22\nCtrl+Shift+C                    //\u590d\u5236\u9009\u4e2d\u7684\u5185\u5bb9\u5230\u526a\u8d34\u677f\nCtrl+Shift+V                    //\u7c98\u8d34\u526a\u8d34\u677f\u7684\u5185\u5bb9\u5230\u6b64\u5904\nCtrl+Shift+W                    //\u5173\u95ed\u5f53\u524d\u7ec8\u7aef\nCtrl+Shift+Q                    //\u9000\u51fa\u5f53\u524d\u7a97\u53e3\uff0c\u5f53\u524d\u7a97\u53e3\u7684\u6240\u6709\u7ec8\u7aef\u90fd\u5c06\u88ab\u5173\u95ed\nCtrl+Shift+X                    //\u6700\u5927\u5316\u663e\u793a\u5f53\u524d\u7ec8\u7aef\nCtrl+Shift+Z                    //\u6700\u5927\u5316\u663e\u793a\u5f53\u524d\u7ec8\u7aef\u5e76\u4f7f\u5b57\u4f53\u653e\u5927\nCtrl+Shift+N or Ctrl+Tab        //\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u7ec8\u7aef\nCtrl+Shift+P or Ctrl+Shift+Tab  //Crtl+Shift+Tab \u79fb\u52a8\u5230\u4e4b\u524d\u7684\u4e00\u4e2a\u7ec8\u7aef\n</code></pre> <p>\u7b2c\u4e8c\u90e8\u4efd\uff1a\u6709\u5173\u5404\u4e2a\u6807\u7b7e\u4e4b\u95f4\u7684\u64cd\u4f5c</p> <pre><code>F11                             //\u5168\u5c4f\u5f00\u5173\nCtrl+Shift+T                    //\u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u6807\u7b7e\nCtrl+PageDown                   //\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u6807\u7b7e\nCtrl+PageUp                     //\u79fb\u52a8\u5230\u4e0a\u4e00\u4e2a\u6807\u7b7e\nCtrl+Shift+PageDown             //\u5c06\u5f53\u524d\u6807\u7b7e\u4e0e\u5176\u540e\u4e00\u4e2a\u6807\u7b7e\u4ea4\u6362\u4f4d\u7f6e\nCtrl+Shift+PageUp               //\u5c06\u5f53\u524d\u6807\u7b7e\u4e0e\u5176\u524d\u4e00\u4e2a\u6807\u7b7e\u4ea4\u6362\u4f4d\u7f6e\nCtrl+Plus (+)                   //\u589e\u5927\u5b57\u4f53\nCtrl+Minus (-)                  //\u51cf\u5c0f\u5b57\u4f53\nCtrl+Zero (0)                   //\u6062\u590d\u5b57\u4f53\u5230\u539f\u59cb\u5927\u5c0f\nCtrl+Shift+R                    //\u91cd\u7f6e\u7ec8\u7aef\u72b6\u6001\nCtrl+Shift+G                    //\u91cd\u7f6e\u7ec8\u7aef\u72b6\u6001\u5e76clear\u5c4f\u5e55\nSuper+g                         //\u7ed1\u5b9a\u6240\u6709\u7684\u7ec8\u7aef\uff0c\u4ee5\u4fbf\u5411\u4e00\u4e2a\u8f93\u5165\u80fd\u591f\u8f93\u5165\u5230\u6240\u6709\u7684\u7ec8\u7aef\nSuper+Shift+G                   //\u89e3\u9664\u7ed1\u5b9a\nSuper+t                         //\u7ed1\u5b9a\u5f53\u524d\u6807\u7b7e\u7684\u6240\u6709\u7ec8\u7aef\uff0c\u5411\u4e00\u4e2a\u7ec8\u7aef\u8f93\u5165\u7684\u5185\u5bb9\u4f1a\u81ea\u52a8\u8f93\u5165\u5230\u5176\u4ed6\u7ec8\u7aef\nSuper+Shift+T                   //\u89e3\u9664\u7ed1\u5b9a\nCtrl+Shift+I                    //\u6253\u5f00\u4e00\u4e2a\u7a97\u53e3\uff0c\u65b0\u7a97\u53e3\u4e0e\u539f\u6765\u7684\u7a97\u53e3\u4f7f\u7528\u540c\u4e00\u4e2a\u8fdb\u7a0b\nSuper+i                         //\u6253\u5f00\u4e00\u4e2a\u65b0\u7a97\u53e3\uff0c\u65b0\u7a97\u53e3\u4e0e\u539f\u6765\u7684\u7a97\u53e3\u4f7f\u7528\u4e0d\u540c\u7684\u8fdb\u7a0b\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/143-an-zhuang-git/","title":"143 an zhuang git","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/14-ros2ji-cheng-kai-fa-huan-jing-da-jian/143-an-zhuang-git/#143-git","title":"1.4.3 \u5b89\u88c5git","text":"<p>Git \u662f\u4e00\u4e2a\u514d\u8d39\u548c\u5f00\u6e90\u7684\u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf\uff0c\u65e8\u5728\u9ad8\u901f\u9ad8\u6548\u7684\u5904\u7406\u4ece\u5c0f\u578b\u5230\u5927\u578b\u9879\u76ee\u7684\u6240\u6709\u5185\u5bb9\u3002\u5728Ubuntu\u4e0b\u53ef\u4ee5\u8c03\u7528\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5git\uff1a</p> <pre><code>sudo apt install git\n</code></pre> <p>\u5728\u672c\u6559\u7a0b\u4e2d\u4f1a\u7ecf\u5e38\u4f7f\u7528<code>git clone \u4ed3\u5e93\u5730\u5740</code>\u7684\u65b9\u5f0f\u6765\u5c06Git\u4ed3\u5e93\u62f7\u8d1d\u5230\u672c\u5730\u3002</p> <p>\u5173\u4e8egit\u5de5\u5177\u4f7f\u7528\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e0b\u8f93\u5165\uff1a<code>git --help</code>\u67e5\u770b\u5e2e\u52a9\u6587\u6863\u3002\u5173\u4e8egit\u7684\u5176\u4ed6\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u8003\uff1ahttps://git-scm.com/</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/","title":"151 ros2wen jian xi tong","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#151-ros2","title":"1.5.1 ROS2\u6587\u4ef6\u7cfb\u7edf","text":"<p>\u7acb\u8db3\u7cfb\u7edf\u67b6\u6784\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0cROS2\u53ef\u4ee5\u5212\u5206\u4e3a\u4e09\u5c42\uff1a</p> <ul> <li>\u64cd\u4f5c\u7cfb\u7edf\u5c42\uff08OS Layer\uff09</li> </ul> <p>\u5982\u524d\u6240\u8ff0\uff0cROS\u867d\u7136\u79f0\u4e4b\u4e3a\u673a\u5668\u4eba\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f46\u5b9e\u8d28\u53ea\u662f\u6784\u5efa\u673a\u5668\u4eba\u5e94\u7528\u7a0b\u5e8f\u7684\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\uff0cROS\u5fc5\u987b\u4f9d\u8d56\u4e8e\u4f20\u7edf\u610f\u4e49\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u76ee\u524dROS2\u53ef\u4ee5\u8fd0\u884c\u5728Linux\u3001Windows\u3001Mac\u6216RTOS\u4e0a\u3002</p> <ul> <li>\u4e2d\u95f4\u5c42\uff08Middleware Layer\uff09</li> </ul> <p>\u4e3b\u8981\u7531\u6570\u636e\u5206\u53d1\u670d\u52a1DDS\u4e0eROS2\u5c01\u88c5\u7684\u5173\u4e8e\u673a\u5668\u4eba\u5f00\u53d1\u7684\u4e2d\u95f4\u4ef6\u7ec4\u6210\u3002DDS\u662f\u4e00\u79cd\u53bb\u4e2d\u5fc3\u5316\u7684\u6570\u636e\u901a\u8baf\u65b9\u5f0f\uff0cROS2\u8fd8\u5f15\u5165\u4e86\u670d\u52a1\u8d28\u91cf\u7ba1\u7406 \uff08Quality of Service\uff09\u673a\u5236\uff0c\u501f\u52a9\u8be5\u673a\u5236\u53ef\u4ee5\u4fdd\u8bc1\u5728\u67d0\u4e9b\u8f83\u5dee\u7f51\u7edc\u73af\u5883\u4e0b\u4e5f\u53ef\u4ee5\u5177\u5907\u826f\u597d\u7684\u901a\u8baf\u6548\u679c\u3002ROS2\u4e2d\u95f4\u4ef6\u5219\u4e3b\u8981\u7531\u5ba2\u6237\u7aef\u5e93\u3001DDS\u62bd\u8c61\u5c42\u4e0e\u8fdb\u7a0b\u5185\u901a\u8bafAPI\u6784\u6210\u3002</p> <ul> <li>\u5e94\u7528\u5c42\uff08Application Layer\uff09</li> </ul> <p>\u662f\u6307\u5f00\u53d1\u8005\u6784\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u662f\u4ee5\u529f\u80fd\u5305\u4e3a\u6838\u5fc3\u7684\uff0c\u5728\u529f\u80fd\u5305\u4e2d\u53ef\u4ee5\u5305\u542b\u6e90\u7801\u3001\u6570\u636e\u5b9a\u4e49\u3001\u63a5\u53e3\u7b49\u5185\u5bb9\u3002</p> <p></p> <p>\u5bf9\u4e8e\u4e00\u822c\u5f00\u53d1\u8005\u800c\u8a00\uff0c\u5de5\u4f5c\u5185\u5bb9\u4e3b\u8981\u96c6\u4e2d\u5728\u5e94\u7528\u5c42\uff0c\u5f00\u53d1\u8005\u4e00\u822c\u901a\u8fc7\u5b9e\u73b0\u5177\u6709\u67d0\u4e00\u7279\u5b9a\u529f\u80fd\u7684\u529f\u80fd\u5305\u6765\u6784\u5efa\u673a\u5668\u4eba\u5e94\u7528\u7a0b\u5e8f\u3002\u5bf9\u5e94\u7684\u6211\u4eec\u6240\u4ecb\u7ecd\u7684ROS2\u6587\u4ef6\u7cfb\u7edf\u4e3b\u8981\u662f\u6307\u5728\u786c\u76d8\u4e0a\u4ee5\u529f\u80fd\u5305\u4e3a\u6838\u5fc3\u7684\u76ee\u5f55\u4e0e\u6587\u4ef6\u7684\u7ec4\u7ec7\u5f62\u5f0f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#1","title":"1.\u6982\u89c8","text":"<p>\u529f\u80fd\u5305\u662fROS2\u5e94\u7528\u7a0b\u5e8f\u7684\u6838\u5fc3\uff0c\u4f46\u662f\u529f\u80fd\u5305\u4e0d\u80fd\u76f4\u63a5\u6784\u5efa\uff0c\u5fc5\u987b\u4f9d\u8d56\u4e8e\u5de5\u4f5c\u7a7a\u95f4\uff0c\u4e00\u4e2aROS2\u5de5\u4f5c\u7a7a\u95f4\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>WorkSpace --- \u81ea\u5b9a\u4e49\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002\n    |--- build\uff1a\u5b58\u50a8\u4e2d\u95f4\u6587\u4ef6\u7684\u76ee\u5f55\uff0c\u8be5\u76ee\u5f55\u4e0b\u4f1a\u4e3a\u6bcf\u4e00\u4e2a\u529f\u80fd\u5305\u521b\u5efa\u4e00\u4e2a\u5355\u72ec\u5b50\u76ee\u5f55\u3002\n    |--- install\uff1a\u5b89\u88c5\u76ee\u5f55\uff0c\u8be5\u76ee\u5f55\u4e0b\u4f1a\u4e3a\u6bcf\u4e00\u4e2a\u529f\u80fd\u5305\u521b\u5efa\u4e00\u4e2a\u5355\u72ec\u5b50\u76ee\u5f55\u3002\n    |--- log\uff1a\u65e5\u5fd7\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u50a8\u65e5\u5fd7\u6587\u4ef6\u3002\n    |--- src\uff1a\u7528\u4e8e\u5b58\u50a8\u529f\u80fd\u5305\u6e90\u7801\u7684\u76ee\u5f55\u3002\n        |-- C++\u529f\u80fd\u5305\n            |-- package.xml\uff1a\u5305\u4fe1\u606f\uff0c\u6bd4\u5982:\u5305\u540d\u3001\u7248\u672c\u3001\u4f5c\u8005\u3001\u4f9d\u8d56\u9879\u3002\n            |-- CMakeLists.txt\uff1a\u914d\u7f6e\u7f16\u8bd1\u89c4\u5219\uff0c\u6bd4\u5982\u6e90\u6587\u4ef6\u3001\u4f9d\u8d56\u9879\u3001\u76ee\u6807\u6587\u4ef6\u3002\n            |-- src\uff1aC++\u6e90\u6587\u4ef6\u76ee\u5f55\u3002\n            |-- include\uff1a\u5934\u6587\u4ef6\u76ee\u5f55\u3002\n            |-- msg\uff1a\u6d88\u606f\u63a5\u53e3\u6587\u4ef6\u76ee\u5f55\u3002\n            |-- srv\uff1a\u670d\u52a1\u63a5\u53e3\u6587\u4ef6\u76ee\u5f55\u3002\n            |-- action\uff1a\u52a8\u4f5c\u63a5\u53e3\u6587\u4ef6\u76ee\u5f55\u3002\n        |-- Python\u529f\u80fd\u5305\n            |-- package.xml\uff1a\u5305\u4fe1\u606f\uff0c\u6bd4\u5982:\u5305\u540d\u3001\u7248\u672c\u3001\u4f5c\u8005\u3001\u4f9d\u8d56\u9879\u3002\n            |-- setup.py\uff1a\u4e0eC++\u529f\u80fd\u5305\u7684CMakeLists.txt\u7c7b\u4f3c\u3002\n            |-- setup.cfg\uff1a\u529f\u80fd\u5305\u57fa\u672c\u914d\u7f6e\u6587\u4ef6\u3002\n            |-- resource\uff1a\u8d44\u6e90\u76ee\u5f55\u3002\n            |-- test\uff1a\u5b58\u50a8\u6d4b\u8bd5\u76f8\u5173\u6587\u4ef6\u3002\n            |-- \u529f\u80fd\u5305\u540c\u540d\u76ee\u5f55\uff1aPython\u6e90\u6587\u4ef6\u76ee\u5f55\u3002\n</code></pre> <p>\u53e6\u5916\uff0c\u65e0\u8bba\u662fPython\u529f\u80fd\u5305\u8fd8\u662fC++\u529f\u80fd\u5305\uff0c\u90fd\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e9b\u914d\u7f6e\u6587\u4ef6\u76f8\u5173\u7684\u76ee\u5f55\u3002</p> <pre><code>|-- C++\u6216Python\u529f\u80fd\u5305\n    |-- launch\uff1a\u5b58\u50a8launch\u6587\u4ef6\u3002\n    |-- rviz\uff1a\u5b58\u50a8rviz2\u914d\u7f6e\u76f8\u5173\u6587\u4ef6\u3002\n    |-- urdf\uff1a\u5b58\u50a8\u673a\u5668\u4eba\u5efa\u6a21\u6587\u4ef6\u3002\n    |-- params\uff1a\u5b58\u50a8\u53c2\u6570\u6587\u4ef6\u3002\n    |-- world\uff1a\u5b58\u50a8\u4eff\u771f\u73af\u5883\u76f8\u5173\u6587\u4ef6\u3002\n    |-- map\uff1a\u5b58\u50a8\u5bfc\u822a\u6240\u9700\u5730\u56fe\u6587\u4ef6\u3002\n    |-- ......\n</code></pre> <p>\u4e0a\u8ff0\u8fd9\u4e9b\u76ee\u5f55\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u5176\u4ed6\u540d\u79f0\uff0c\u6216\u8005\u6839\u636e\u9700\u8981\u521b\u5efa\u5176\u4ed6\u4e00\u4e9b\u76ee\u5f55\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#2","title":"2.\u6e90\u6587\u4ef6\u8bf4\u660e","text":"<p>\u57281.3 ROS2\u5feb\u901f\u4f53\u9a8c\u4e2d\uff0c\u5b9e\u73b0\u7b2c\u4e00\u4e2aROS2\u7a0b\u5e8f\u65f6\uff0c\u90fd\u9700\u8981\u521b\u5efa\u8282\u70b9\uff0c\u65e0\u8bba\u662fC++\u5b9e\u73b0\u8fd8\u662fPython\u5b9e\u73b0\uff0c\u90fd\u662f\u76f4\u63a5\u5b9e\u4f8b\u5316\u7684Node\u5bf9\u8c61\u3002</p> <p>C++\u5b9e\u4f8b\u5316Node\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>#include \"rclcpp/rclcpp.hpp\"\n\nint main(int argc, char ** argv)\n{\n  rclcpp::init(argc,argv);\n  auto node = rclcpp::Node::make_shared(\"helloworld_node\");\n  RCLCPP_INFO(node-&gt;get_logger(),\"hello world!\");\n  rclcpp::shutdown();\n  return 0;\n}\n</code></pre> <p>Python\u5b9e\u4f8b\u5316Node\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>import rclpy\n\ndef main():\n    rclpy.init()\n    node = rclpy.create_node(\"helloworld_py_node\")\n    node.get_logger().info(\"hello world!\")\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u4f46\u662f\u5728ROS2\u4e2d\uff0c\u4e0a\u8ff0\u7f16\u7801\u98ce\u683c\u662f\u4e0d\u88ab\u63a8\u8350\u7684\uff0c\u66f4\u63a8\u8350\u4ee5\u7ee7\u627fNode\u7684\u65b9\u5f0f\u6765\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\u3002</p> <p>C++\u7ee7\u627fNode\u5b9e\u73b0\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>#include \"rclcpp/rclcpp.hpp\"\n\nclass MyNode: public rclcpp::Node{\npublic:\n    MyNode():Node(\"node_name\"){\n        RCLCPP_INFO(this-&gt;get_logger(),\"hello world!\");\n    }\n\n};\n\nint main(int argc, char *argv[])\n{\n    rclcpp::init(argc,argv);\n    auto node = std::make_shared&lt;MyNode&gt;();\n    rclcpp::shutdown();\n    return 0;\n}\n</code></pre> <p>Python\u7ee7\u627fNode\u5b9e\u73b0\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>import rclpy\nfrom rclpy.node import Node\n\nclass MyNode(Node):\n    def __init__(self):\n        super().__init__(\"node_name_py\")\n        self.get_logger().info(\"hello world!\")\ndef main():\n\n    rclpy.init()\n    node = MyNode() \n    rclpy.shutdown()\n</code></pre> <p>\u4e4b\u6240\u4ee5\u7ee7\u627f\u6bd4\u76f4\u63a5\u5b9e\u4f8b\u5316Node\u66f4\u88ab\u63a8\u8350\uff0c\u662f\u56e0\u4e3a\u7ee7\u627f\u65b9\u5f0f\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u5185\u7ec4\u7ec7\u591a\u4e2a\u8282\u70b9\uff0c\u8fd9\u5bf9\u4e8e\u63d0\u9ad8\u8282\u70b9\u95f4\u7684\u901a\u4fe1\u6548\u7387\u662f\u5f88\u6709\u5e2e\u52a9\u7684\uff0c\u4f46\u662f\u76f4\u63a5\u5b9e\u4f8b\u5316\u5219\u4e0e\u8be5\u529f\u80fd\u4e0d\u517c\u5bb9\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#3","title":"3.\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e","text":"<p>\u5728ROS2\u529f\u80fd\u5305\u4e2d\uff0c\u7ecf\u5e38\u9700\u8981\u5f00\u53d1\u8005\u7f16\u8f91\u4e00\u4e9b\u914d\u7f6e\u6587\u4ef6\u4ee5\u8bbe\u7f6e\u529f\u80fd\u5305\u7684\u6784\u5efa\u4fe1\u606f\uff0c\u529f\u80fd\u5305\u7c7b\u578b\u4e0d\u540c\uff0c\u6240\u9700\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6\u4e5f\u6709\u6240\u4e0d\u540c\u3002C++\u529f\u80fd\u5305\u7684\u6784\u5efa\u4fe1\u606f\u4e3b\u8981\u5305\u542b\u5728package.xml\u4e0eCMakeLists.txt\u4e2d\uff0cPython\u529f\u80fd\u5305\u7684\u6784\u5efa\u4fe1\u606f\u5219\u4e3b\u8981\u5305\u542b\u5728package.xml\u548csetup.py\u4e2d\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u7b80\u5355\u4e86\u89e3\u4e00\u4e0b\u8fd9\u4e9b\u914d\u7f6e\u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#1packagexml","title":"1.package.xml","text":"<p>\u4e0d\u7ba1\u662f\u4f55\u79cd\u7c7b\u578b\u7684\u529f\u80fd\u5305\uff0cpackage.xml\u7684\u683c\u5f0f\u90fd\u662f\u7c7b\u4f3c\u7684\uff0c\u5728\u8be5\u6587\u4ef6\u4e2d\u5305\u542b\u4e86\u5305\u540d\u3001\u7248\u672c\u3001\u4f5c\u8005\u3001\u4f9d\u8d56\u9879\u7684\u4fe1\u606f\uff0cpackage.xml\u53ef\u4ee5\u4e3acolcon\u6784\u5efa\u5de5\u5177\u786e\u5b9a\u529f\u80fd\u5305\u7684\u7f16\u8bd1\u987a\u5e8f\u3002\u4e00\u4e2a\u7b80\u5355\u7684package.xml\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;?xml-model href=\"http://download.ros.org/schema/package_format3.xsd\" schematypens=\"http://www.w3.org/2001/XMLSchema\"?&gt;\n&lt;package format=\"3\"&gt;\n  &lt;name&gt;pkg01_helloworld_cpp&lt;/name&gt;\n  &lt;version&gt;0.0.0&lt;/version&gt;\n  &lt;description&gt;TODO: Package description&lt;/description&gt;\n  &lt;maintainer email=\"ros2@todo.todo\"&gt;ros2&lt;/maintainer&gt;\n  &lt;license&gt;TODO: License declaration&lt;/license&gt;\n\n  &lt;buildtool_depend&gt;ament_cmake&lt;/buildtool_depend&gt;\n  &lt;depend&gt;rclcpp&lt;/depend&gt;\n\n  &lt;test_depend&gt;ament_lint_auto&lt;/test_depend&gt;\n  &lt;test_depend&gt;ament_lint_common&lt;/test_depend&gt;\n\n  &lt;export&gt;\n    &lt;build_type&gt;ament_cmake&lt;/build_type&gt;\n  &lt;/export&gt;\n&lt;/package&gt;\n</code></pre> <p>1.\u6839\u6807\u7b7e</p> <ul> <li>&lt;package&gt;\uff1a\u8be5\u6807\u7b7e\u4e3a\u6574\u4e2axml\u6587\u4ef6\u7684\u6839\u6807\u7b7e\uff0cformat\u5c5e\u6027\u7528\u6765\u58f0\u660e\u6587\u4ef6\u7684\u683c\u5f0f\u7248\u672c\u3002</li> </ul> <p>2.\u5143\u4fe1\u606f\u6807\u7b7e</p> <ul> <li>&lt;name&gt;\uff1a\u5305\u540d\uff1b</li> <li>&lt;version&gt;\uff1a\u5305\u7684\u7248\u672c\u53f7\uff1b</li> <li>&lt;description&gt;\uff1a\u5305\u7684\u63cf\u8ff0\u4fe1\u606f\uff1b</li> <li>&lt;maintainer&gt;\uff1a\u7ef4\u62a4\u8005\u4fe1\u606f\uff1b</li> <li>&lt;license&gt;\uff1a\u8f6f\u4ef6\u534f\u8bae\uff1b</li> <li>&lt;url&gt;\uff1a\u5305\u7684\u4ecb\u7ecd\u7f51\u5740\uff1b</li> <li>&lt;author&gt;\uff1a\u5305\u7684\u4f5c\u8005\u4fe1\u606f\u3002</li> </ul> <p>3.\u4f9d\u8d56\u9879</p> <ul> <li>&lt;buildtool_depend&gt;\uff1a\u58f0\u660e\u7f16\u8bd1\u5de5\u5177\u4f9d\u8d56\uff1b</li> <li>&lt;build_depend&gt;\uff1a\u58f0\u660e\u7f16\u8bd1\u4f9d\u8d56\uff1b</li> <li>&lt;build_export_depend&gt;\uff1a\u58f0\u660e\u6839\u636e\u6b64\u5305\u6784\u5efa\u5e93\u6240\u9700\u4f9d\u8d56\uff1b</li> <li>&lt;exec_depend&gt;\uff1a\u58f0\u660e\u6267\u884c\u65f6\u4f9d\u8d56\uff1b</li> <li>&lt;depend&gt;\uff1a\u76f8\u5f53\u4e8e&lt;build_depend&gt;\u3001&lt;build_export_depend&gt;\u3001&lt;exec_depend&gt;\u4e09\u8005\u7684\u96c6\u6210\uff1b</li> <li>&lt;test_depend&gt;\uff1a\u58f0\u660e\u6d4b\u8bd5\u4f9d\u8d56\uff1b</li> <li>&lt;doc_depend&gt;\uff1a\u58f0\u660e\u6784\u5efa\u6587\u6863\u4f9d\u8d56\u3002</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#2cmakeliststxt","title":"2.CMakeLists.txt","text":"<p>C++\u529f\u80fd\u5305\u4e2d\u9700\u8981\u914d\u7f6eCMakeLists.txt\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u63cf\u8ff0\u4e86\u5982\u4f55\u6784\u5efaC++\u529f\u80fd\u5305\uff0c\u4e00\u4e2a\u7b80\u5355\u7684CMakeLists.txt\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code># \u58f0\u660ecmake\u7684\u6700\u4f4e\u7248\u672c\ncmake_minimum_required(VERSION 3.8)\n# \u5305\u540d\uff0c\u9700\u8981\u4e0epackage.xml\u4e2d\u7684\u5305\u540d\u4e00\u81f4\nproject(pkg01_helloworld_cpp)\n\nif(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES \"Clang\")\n  add_compile_options(-Wall -Wextra -Wpedantic)\nendif()\n\n# find dependencies\nfind_package(ament_cmake REQUIRED)\n# \u5f15\u5165\u5916\u90e8\u4f9d\u8d56\u5305\nfind_package(rclcpp REQUIRED)\n\n# \u6620\u5c04\u6e90\u6587\u4ef6\u4e0e\u53ef\u6267\u884c\u6587\u4ef6\nadd_executable(helloworld src/helloworld.cpp)\n# \u8bbe\u7f6e\u76ee\u6807\u4f9d\u8d56\u5e93\nament_target_dependencies(\n  helloworld\n  \"rclcpp\"\n)\n# \u5b9a\u4e49\u5b89\u88c5\u89c4\u5219\ninstall(TARGETS helloworld\n  DESTINATION lib/${PROJECT_NAME})\n\nif(BUILD_TESTING)\n  find_package(ament_lint_auto REQUIRED)\n  # the following line skips the linter which checks for copyrights\n  # comment the line when a copyright and license is added to all source files\n  set(ament_cmake_copyright_FOUND TRUE)\n  # the following line skips cpplint (only works in a git repo)\n  # comment the line when this package is in a git repo and when\n  # a copyright and license is added to all source files\n  set(ament_cmake_cpplint_FOUND TRUE)\n  ament_lint_auto_find_test_dependencies()\nendif()\n\nament_package()\n</code></pre> <p>\u5728\u793a\u4f8b\u4e2d\u5173\u4e8e\u6587\u4ef6\u7684\u4f7f\u7528\u5df2\u7ecf\u901a\u8fc7\u6ce8\u91ca\u7ed9\u51fa\u4e86\u7b80\u77ed\u8bf4\u660e\uff0c\u5176\u5b9e\u5173\u4e8eCMakeLists.txt\u7684\u914d\u7f6e\u662f\u6bd4\u8f83\u590d\u6742\u7684\uff0c\u540e\u7eed\u968f\u7740\u5b66\u4e60\u7684\u6df1\u5165\uff0c\u8fd8\u4f1a\u7ed9\u51fa\u66f4\u591a\u7684\u8865\u5145\u8bf4\u660e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#3setuppy","title":"3.setup.py","text":"<p>Python\u529f\u80fd\u5305\u4e2d\u9700\u8981\u914d\u7f6esetup.py\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u63cf\u8ff0\u4e86\u5982\u4f55\u6784\u5efaPython\u529f\u80fd\u5305\uff0c\u4e00\u4e2a\u7b80\u5355\u7684setup.py\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>from setuptools import setup\n\npackage_name = 'pkg02_helloworld_py'\n\nsetup(\n    name=package_name, # \u5305\u540d\n    version='0.0.0',   # \u7248\u672c\n    packages=[package_name], # \u529f\u80fd\u5305\u5217\u8868\n    data_files=[ #\u9700\u8981\u88ab\u5b89\u88c5\u7684\u6587\u4ef6\u4ee5\u53ca\u5b89\u88c5\u8def\u5f84\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'], # \u5b89\u88c5\u4f9d\u8d56\n    zip_safe=True,\n    maintainer='ros2', # \u7ef4\u62a4\u8005\n    maintainer_email='ros2@todo.todo', # \u7ef4\u62a4\u8005 email\n    description='TODO: Package description', # \u5305\u63cf\u8ff0\n    license='TODO: License declaration', # \u8f6f\u4ef6\u534f\u8bae\n    tests_require=['pytest'], # \u6d4b\u8bd5\u4f9d\u8d56\n    entry_points={\n        'console_scripts': [\n            # \u6620\u5c04\u6e90\u6587\u4ef6\u4e0e\u53ef\u6267\u884c\u6587\u4ef6\n            'helloworld = pkg02_helloworld_py.helloworld:main'\n        ],\n    },\n)\n</code></pre> <p>\u4f7f\u7528\u8bed\u6cd5\u53ef\u53c2\u8003\u4e0a\u8ff0\u793a\u4f8b\u4e2d\u7684\u6ce8\u91ca\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#4","title":"4.\u64cd\u4f5c\u547d\u4ee4","text":"<p>ROS2\u7684\u6587\u4ef6\u7cfb\u7edf\u6838\u5fc3\u662f\u529f\u80fd\u5305\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7f16\u8bd1\u6307\u4ee4<code>colcon</code>\u548cROS2\u5185\u7f6e\u7684\u5de5\u5177\u6307\u4ee4<code>ros2</code>\u6765\u5b9e\u73b0\u529f\u80fd\u5305\u7684\u521b\u5efa\u3001\u7f16\u8bd1\u3001\u67e5\u627e\u4e0e\u6267\u884c\u7b49\u76f8\u5173\u64cd\u4f5c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#1_1","title":"1.\u521b\u5efa","text":"<p>\u65b0\u5efa\u529f\u80fd\u5305\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>ros2 pkg create \u5305\u540d --build-type \u6784\u5efa\u7c7b\u578b --dependencies \u4f9d\u8d56\u5217\u8868 --node-name \u53ef\u6267\u884c\u7a0b\u5e8f\u540d\u79f0\n</code></pre> <p>\u683c\u5f0f\u89e3\u91ca\uff1a</p> <ul> <li>--build-type\uff1a\u662f\u6307\u529f\u80fd\u5305\u7684\u6784\u5efa\u7c7b\u578b\uff0c\u6709cmake\u3001ament_cmake\u3001ament_python\u4e09\u79cd\u7c7b\u578b\u53ef\u9009\uff1b</li> <li>--dependencies\uff1a\u6240\u4f9d\u8d56\u7684\u529f\u80fd\u5305\u5217\u8868\uff1b</li> <li>--node-name\uff1a\u53ef\u6267\u884c\u7a0b\u5e8f\u7684\u540d\u79f0\uff0c\u4f1a\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u6e90\u6587\u4ef6\u5e76\u751f\u6210\u914d\u7f6e\u6587\u4ef6\u3002</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#2_1","title":"2.\u7f16\u8bd1","text":"<p>\u7f16\u8bd1\u529f\u80fd\u5305\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>colcon build\n</code></pre> <p>\u6216</p> <pre><code>colcon build --packages-select \u529f\u80fd\u5305\u5217\u8868\n</code></pre> <p>\u524d\u8005\u4f1a\u6784\u5efa\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u7684\u6240\u6709\u529f\u80fd\u5305\uff0c\u540e\u8005\u53ef\u4ee5\u6784\u5efa\u6307\u5b9a\u529f\u80fd\u5305\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#3_1","title":"3.\u67e5\u627e","text":"<p>\u5728<code>ros2 pkg</code>\u547d\u4ee4\u4e0b\u5305\u542b\u4e86\u591a\u4e2a\u67e5\u8be2\u529f\u80fd\u5305\u76f8\u5173\u4fe1\u606f\u7684\u53c2\u6570\u3002</p> <pre><code>ros2 pkg executables [\u5305\u540d] # \u8f93\u51fa\u6240\u6709\u529f\u80fd\u5305\u6216\u6307\u5b9a\u529f\u80fd\u5305\u4e0b\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\u3002\nros2 pkg list # \u5217\u51fa\u6240\u6709\u529f\u80fd\u5305\nros2 pkg prefix \u5305\u540d # \u5217\u51fa\u529f\u80fd\u5305\u8def\u5f84\nros2 pkg xml # \u8f93\u51fa\u529f\u80fd\u5305\u7684package.xml\u5185\u5bb9\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/151-ros2wen-jian-xi-tong/#4_1","title":"4.\u6267\u884c","text":"<p>\u6267\u884c\u547d\u4ee4\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>ros2 run \u529f\u80fd\u5305 \u53ef\u6267\u884c\u7a0b\u5e8f \u53c2\u6570\n</code></pre> <p>\u5c0f\u63d0\u793a\uff1a</p> <p>\u53ef\u4ee5\u901a\u8fc7<code>\u547d\u4ee4 -h</code>\u6216<code>\u547d\u4ee4 --help</code>\u6765\u83b7\u53d6\u547d\u4ee4\u7684\u5e2e\u52a9\u6587\u6863\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/152-wen-jian-xi-tong-xiang-guan-cao-zuo-ming-ling/","title":"152 wen jian xi tong xiang guan cao zuo ming ling","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/152-wen-jian-xi-tong-xiang-guan-cao-zuo-ming-ling/#152","title":"1.5.2 \u6587\u4ef6\u7cfb\u7edf\u76f8\u5173\u64cd\u4f5c\u547d\u4ee4","text":"<p>apt-cache search</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-ros2jie-shu-zhi-chi/","title":"153 ros2jie shu zhi chi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-ros2jie-shu-zhi-chi/#153-ros2","title":"1.5.3 ROS2\u6280\u672f\u652f\u6301","text":"<p>ROS\u793e\u533a\u63d0\u4f9b\u4e86\u591a\u79cd\u6280\u672f\u652f\u6301\u673a\u5236\uff0c\u4e3b\u8981\u5305\u62ec\uff1a\u5305\u6587\u6863\u3001\u95ee\u7b54\u3001\u8bba\u575b\u3001\u5305\u7d22\u5f15\u4ee5\u53ca\u95ee\u9898\u8ddf\u8e2a\uff0c\u6bcf\u79cd\u673a\u5236\u90fd\u6709\u81ea\u5df1\u7684\u7528\u9014\uff0c\u5408\u9002\u7684\u9009\u62e9\u6280\u672f\u652f\u6301\u673a\u5236\u53ef\u4ee5\u907f\u514d\u95ee\u9898\u7684\u91cd\u590d\u63d0\u95ee\u3001\u51cf\u5c11\u95ee\u9898\u89e3\u51b3\u65f6\u95f4\u5e76\u5bf9\u65b0\u601d\u60f3\u7684\u4ea4\u6d41\u5f88\u6709\u5e2e\u52a9\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-ros2jie-shu-zhi-chi/#ros","title":"ROS\u5305\u6587\u6863","text":"<p>ROS\u6838\u5fc3\u5305\u7684\u6587\u6863\u4ee5\u53ca\u5305\u7684\u7279\u5b9a\u5185\u5bb9\u6258\u7ba1\u5728ROS\u5305\u6587\u6863\u4e0a\uff0c\u53ef\u4ee5\u67e5\u627e\u5230ROS\u7684\u5b98\u65b9\u6559\u7a0b\u3001\u6587\u6863\u548cAPI\u6587\u6863\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-ros2jie-shu-zhi-chi/#ros_1","title":"ROS\u95ee\u7b54","text":"<p>\u5982\u679c\u5728\u5b66\u4e60\u548c\u5de5\u4f5c\u4e2d\uff0c\u9047\u5230\u89e3\u51b3\u4e0d\u4e86\u7684\u95ee\u9898\uff0c\u90a3\u4e48\u53ef\u4ee5\u8bbf\u95eeROS\u95ee\u7b54\uff0c\u5728ROS\u95ee\u7b54\u6a21\u5757\u5df2\u7ecf\u6d89\u53ca\u523060000\u591a\u4e2a\u95ee\u9898\u4e14\u5927\u90e8\u5206\u90fd\u7ed9\u51fa\u4e86\u7b54\u6848\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u5148\u641c\u7d22\u9047\u5230\u7684\u95ee\u9898\uff0c\u5982\u679c\u8be5\u95ee\u9898\u5c1a\u672a\u63d0\u51fa\uff0c\u90a3\u4e48\u53ef\u4ee5\u81ea\u884c\u53d1\u5e03\u76f8\u5173\u95ee\u9898\uff08\u5728\u53d1\u5e03\u4e4b\u524d\u8bf7\u5148\u67e5\u770b\u95ee\u9898\u53d1\u5e03\u6307\u5357\uff09\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-ros2jie-shu-zhi-chi/#ros_2","title":"ROS\u8bba\u575b","text":"<p>\u5728ROS\u8bba\u575b\u6211\u4eec\u53ef\u4ee5\u4e86\u89e3ROS\u793e\u533a\u7684\u6700\u65b0\u52a8\u6001\u3002\u8bf7\u6ce8\u610f\uff1a\u8bba\u575b\u662f\u53d1\u5e03\u516c\u544a\u3001\u65b0\u95fb\u548c\u8ba8\u8bba\u5171\u540c\u7231\u597d\u7684\u5730\u65b9\uff0c\u8bf7\u4e0d\u8981\u5728\u6b64\u63d0\u51fa\u6280\u672f\u95ee\u9898\u6216\u63d0\u4ea4\u5f02\u5e38\u62a5\u544a\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-ros2jie-shu-zhi-chi/#ros_3","title":"ROS\u5305\u7d22\u5f15","text":"<p>\u5728ROS\u5305\u7d22\u5f15\u53ef\u4ee5\u67e5\u627e\u7279\u5b9a\u529f\u80fd\u5305\u7684\u4fe1\u606f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-ros2jie-shu-zhi-chi/#_1","title":"\u95ee\u9898\u8ddf\u8e2a\u5668","text":"<p>\u5f53\u7528\u6237\u53d1\u73b0\u7cfb\u7edfBUG\u6216\u8005\u60f3\u8bf7\u6c42\u65b0\u529f\u80fd\u65f6\uff0c\u53ef\u4ee5\u5728\u95ee\u9898\u8ddf\u8e2a\u5668\u4e0a\u63d0\u4ea4\u62a5\u544a\u3002\u5982\u679c\u662f\u62a5\u544aBUG\uff0c\u90a3\u4e48\u8bf7\u52a1\u5fc5\u63d0\u4f9b\u95ee\u9898\u7684\u8be6\u7ec6\u63cf\u8ff0\u3001\u95ee\u9898\u4ea7\u751f\u7684\u73af\u5883\u4ee5\u53ca\u53ef\u80fd\u6709\u52a9\u4e8e\u5f00\u53d1\u4eba\u5458\u91cd\u73b0\u95ee\u9898\u7684\u4efb\u4f55\u7ec6\u8282\uff0c\u6700\u597d\u80fd\u591f\u63d0\u4f9b\u8c03\u8bd5\u56de\u6eaf\u3002</p> <p>\u9664\u4e86\u4e0a\u8ff0\u591a\u79cd\u6280\u672f\u652f\u6301\u4e4b\u5916\uff0cROS\u793e\u533a\u8fd8\u4f1a\u4e3e\u529e\u4e00\u5e74\u4e00\u5ea6\u7684ROSCon\uff08ROS\u5f00\u53d1\u8005\u5927\u4f1a\uff09\uff0cROSCon\u4e3a\u6240\u6709\u7ea7\u522b\u7684 ROS \u5f00\u53d1\u4eba\u5458\uff08\u4ece\u521d\u5b66\u8005\u5230\u4e13\u5bb6\uff09\u63d0\u4f9b\u4e86\u4e00\u4e2a\u673a\u4f1a\uff0c\u6240\u6709\u7684\u5f00\u53d1\u8005\u53ef\u4ee5\u5efa\u7acb\u8054\u7cfb\u3001\u76f8\u4e92\u5b66\u4e60\u3001\u5206\u4eab\u60f3\u6cd5\u6216\u662f\u5411\u4e13\u5bb6\u8bf7\u6559\u3002ROSCon\u4e00\u822c\u4e3a\u671f\u4e24\u5929\uff0c\u4e3b\u8981\u5305\u62ec\u6280\u672f\u8bb2\u5ea7\u548c\u4e00\u4e9bROS\u6559\u7a0b\uff0c\u671f\u95f4\u5c06\u4ecb\u7ecd\u65b0\u7684\u5de5\u5177\u548c\u5e93\uff0c\u4e5f\u4f1a\u4ecb\u7ecd\u5df2\u6709\u7684\u5de5\u5177\u548c\u5e93\u7684\u6df1\u5c42\u6b21\u77e5\u8bc6\u3002</p> <p>ROS\u5b98\u65b9\u7684\u76ee\u6807\u662f\u8ba9ROSCon\u4ee3\u8868\u6574\u4e2aROS\u793e\u533a\uff0c\u8fd9\u4e2a\u793e\u533a\u662f\u5168\u7403\u6027\u548c\u591a\u6837\u5316\u7684\u3002\u65e0\u8bba\u4f60\u662f\u8c01\uff0c\u65e0\u8bba\u4f60\u505a\u4ec0\u4e48\uff0c\u65e0\u8bba\u5728\u54ea\uff0c\u53ea\u8981\u5bf9ROS\u611f\u5174\u8da3\uff0c\u90a3\u4e48\u90fd\u5e0c\u671b\u80fd\u591f\u52a0\u5165ROSCon\u3002\u5c24\u5176\u9f13\u52b1\u5973\u6027\u3001\u5c11\u6570\u6d3e\u6210\u5458\u548c\u5176\u4ed6\u4e0d\u5177\u4ee3\u8868\u6027\u7684\u7fa4\u4f53\u6210\u5458\u53c2\u52a0ROSCon\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/","title":"153 xue xi mo kuai","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/#152-ros2","title":"1.5.2 ROS2\u6838\u5fc3\u6a21\u5757","text":"<p>\u901a\u4fe1\u4e0e\u5de5\u5177\u662fROS2\u7684\u6838\u5fc3\u6a21\u5757\uff0c\u4e5f\u662f\u6211\u4eec\u4ee5\u540e\u5b66\u4e60\u548c\u5de5\u4f5c\u7684\u91cd\u70b9\u6240\u5728\uff0c\u672c\u8282\u5c06\u4f1a\u4ecb\u7ecd\u901a\u4fe1\u548c\u5de5\u5177\u4e2d\u6d89\u53ca\u5230\u7684\u4e00\u4e9b\u77e5\u8bc6\u70b9\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/#1","title":"1.\u901a\u4fe1\u6a21\u5757","text":"<p>\u901a\u4fe1\u6a21\u5757\u662f\u6574\u4e2aROS2\u67b6\u6784\u4e2d\u7684\u91cd\u4e2d\u4e4b\u91cd\uff0c\u6bd4\u5982\u4f60\u53ef\u80fd\u60f3\u8981\u4e86\u89e3\u5728ROS2\u4e2d\u662f\u5982\u4f55\u63a7\u5236\u673a\u5668\u4eba\u5e95\u76d8\u8fd0\u52a8\u7684\uff1f\u96f7\u8fbe\u3001\u6444\u50cf\u5934\u3001imu\u3001GPS\u7b49\u8fd9\u4e9b\u4f20\u611f\u5668\u6570\u636e\u662f\u5982\u4f55\u4f20\u8f93\u5230ROS2\u7cfb\u7edf\u7684\uff1f\u4eba\u673a\u4ea4\u4e92\u65f6\u8c03\u7528\u8005\u5982\u4f55\u4e0b\u53d1\u6307\u4ee4\uff0c\u673a\u5668\u4eba\u53c8\u662f\u5982\u4f55\u53cd\u9988\u6570\u636e\u7684\uff1f\u5bfc\u822a\u3001\u673a\u68b0\u81c2\u7b49\u7cfb\u7edf\u6027\u5b9e\u73b0\u4e0d\u540c\u6a21\u5757\u4e4b\u95f4\u662f\u5982\u4f55\u4ea4\u4e92\u6570\u636e\u7684......\u7b49\u7b49\uff0c\u5176\u5b9e\u8fd9\u4e9b\u90fd\u79bb\u4e0d\u5f00\u901a\u4fe1\u6a21\u5757\u3002\u53e6\u5916\uff0c\u5f00\u53d1\u8005\u6784\u5efa\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u901a\u4fe1\u90e8\u5206\u5728\u5de5\u4f5c\u5185\u5bb9\u4e2d\u5360\u6709\u76f8\u5f53\u5927\u7684\u6bd4\u91cd\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/#2","title":"2.\u529f\u80fd\u5305\u5e94\u7528","text":"<p>\u529f\u80fd\u5305\u7684\u5e94\u7528\u4e3b\u8981\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/#1_1","title":"1.\u4e8c\u8fdb\u5236\u5b89\u88c5","text":"<p>ROS\u5b98\u65b9\u6216\u793e\u533a\u63d0\u4f9b\u7684\u529f\u80fd\u5305\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u901a\u8fc7\u4e8c\u8fdb\u5236\u65b9\u5f0f\u5b89\u88c5\uff0c\u5b89\u88c5\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>sudo apt install ros-ROS2\u7248\u672c\u4ee3\u53f7-\u529f\u80fd\u5305\u540d\u79f0\n</code></pre> <p>\u5c0f\u63d0\u793a\uff1a</p> <p>\u53ef\u4ee5\u8c03\u7528<code>apt search ros-ROS2\u7248\u672c\u4ee3\u53f7-* | grep -i \u5173\u952e\u5b57</code>\u683c\u5f0f\u7684\u547d\u4ee4\uff0c\u6839\u636e\u5173\u952e\u5b57\u67e5\u627e\u6240\u9700\u7684\u529f\u80fd\u5305\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/#2_1","title":"2.\u6e90\u7801\u5b89\u88c5","text":"<p>\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u5b98\u65b9\u3001\u793e\u533a\u6216\u5176\u4ed6\u7b2c\u4e09\u65b9\u63d0\u4f9b\u7684\u6e90\u4ee3\u7801\uff0c\u4e00\u822c\u6211\u4eec\u4f1a\u4ecegithub\u83b7\u53d6\u6e90\u7801\uff0c\u4e0b\u8f7d\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>git clone \u4ed3\u5e93\u5730\u5740\n</code></pre> <p>\u6e90\u7801\u4e0b\u8f7d\u540e\uff0c\u9700\u8981\u81ea\u884c\u7f16\u8bd1\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/#3","title":"3.\u81ea\u5b9e\u73b0","text":"<p>\u5f00\u53d1\u8005\u6309\u7167\u4e1a\u52a1\u9700\u6c42\u81ea\u5df1\u7f16\u5199\u529f\u80fd\u5305\u5b9e\u73b0\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/#3_1","title":"3.\u5206\u5e03\u5f0f","text":"<p>ROS2\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u67b6\u6784\uff0c\u4e0d\u540c\u7684ROS2\u8bbe\u5907\u4e4b\u95f4\u53ef\u4ee5\u65b9\u4fbf\u7684\u5b9e\u73b0\u901a\u4fe1\uff0c\u8fd9\u5728\u591a\u673a\u5668\u4eba\u8bbe\u5907\u534f\u540c\u4e2d\u662f\u6781\u5176\u91cd\u8981\u7684\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/#4rqt","title":"4.\u7ec8\u7aef\u547d\u4ee4\u4e0erqt","text":"<p>\u5728ROS2\u4e2d\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u8c03\u8bd5\u7a0b\u5e8f\u3001\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u3002</p> <p>rqt\u662f\u4e00\u4e2a\u56fe\u5f62\u5316\u5de5\u5177\uff0c\u5b83\u7684\u529f\u80fd\u4e0e\u547d\u4ee4\u884c\u5de5\u5177\u7c7b\u4f3c\uff0c\u4f46\u662f\u56fe\u5f62\u5316\u7684\u4ea4\u4e92\u65b9\u5f0f\u66f4\u4e3a\u53cb\u597d\u3002</p> <p>\u793a\u4f8b1\uff1a\u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177\u5728turtlesim_node\u4e2d\u751f\u6210\u4e00\u53ea\u65b0\u4e4c\u9f9f\u3002</p> <p></p> <p>\u793a\u4f8b2\uff1a\u4f7f\u7528rqt\u5728turtlesim_node\u4e2d\u751f\u6210\u4e00\u53ea\u65b0\u4e4c\u9f9f\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/#5launch","title":"5.launch\u6587\u4ef6","text":"<p>\u901a\u8fc7launch\u6587\u4ef6\uff0c\u53ef\u4ee5\u6279\u91cf\u7684\u542f\u52a8ROS2\u8282\u70b9\uff0c\u8fd9\u662f\u5728\u6784\u5efa\u5927\u578b\u9879\u76ee\u65f6\u542f\u52a8\u591a\u8282\u70b9\u7684\u5e38\u7528\u65b9\u5f0f\u3002</p> <p>\u793a\u4f8b\uff1a\u4e00\u6b21\u6027\u542f\u52a8\u591a\u4e2aturtlesim_node\u8282\u70b9\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/#6tf","title":"6.TF\u5750\u6807\u53d8\u6362","text":"<p>TF\u5750\u6807\u53d8\u6362\u53ef\u4ee5\u5b9e\u73b0\u673a\u5668\u4eba\u4e0d\u540c\u90e8\u4ef6\u6216\u4e0d\u540c\u673a\u5668\u4eba\u4e4b\u95f4\u7684\u76f8\u5bf9\u4f4d\u7f6e\u5173\u7cfb\u7684\u8f6c\u6362\u3002</p> <p>\u793a\u4f8b1\uff1a\u53d1\u5e03\u673a\u5668\u4eba\u4e0d\u540c\u90e8\u4ef6\u4e4b\u95f4\u7684\u5750\u6807\u7cfb\u5173\u7cfb\u3002</p> <p></p> <p>\u793a\u4f8b2\uff1a\u4f7f\u7528turtlesim_node\u6a21\u62df\u591a\u673a\u5668\u4eba\u7f16\u961f\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/153-xue-xi-mo-kuai/#7","title":"7.\u53ef\u89c6\u5316","text":"<p>ROS2\u5185\u7f6e\u4e86\u4e09\u7ef4\u53ef\u89c6\u5316\u5de5\u5177rviz2\uff0c\u5b83\u53ef\u4ee5\u56fe\u5f62\u5316\u7684\u65b9\u5f0f\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b\u6216\u663e\u793a\u673a\u5668\u4eba\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e9b\u62bd\u8c61\u6570\u636e\u3002</p> <p>\u793a\u4f8b1\uff1a\u663e\u793a\u4f20\u611f\u5668\u6570\u636e\u3002</p> <p></p> <p>\u793a\u4f8b2\uff1a\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/154-ros2jie-mei-zu-zhi/","title":"154 ros2jie mei zu zhi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/154-ros2jie-mei-zu-zhi/#154-ros2","title":"1.5.4 ROS2\u5e94\u7528\u65b9\u5411","text":"<p>\u8bb8\u591aROS\u56e2\u961f\u4f34\u968fROS\u6210\u957f\u5230\u4eca\u65e5\uff0c\u5176\u89c4\u6a21\u5df2\u7ecf\u53d1\u5c55\u5230\u8db3\u4ee5\u88ab\u8ba4\u4e3a\u662f\u72ec\u7acb\u7ec4\u7ec7\u7684\u7a0b\u5ea6\u4e86\u3002\u5728\u5bfc\u822a\u3001\u673a\u68b0\u81c2\u3001\u65e0\u4eba\u9a7e\u9a76\u3001\u65e0\u4eba\u673a\u7b49\u8bf8\u591a\u9886\u57df\u5927\u653e\u5f02\u5f69\uff0c\u4e0b\u9762\u5217\u51fa\u4e86\u5176\u4e2d\u7684\u4e00\u4e9b\u56e2\u961f\u9879\u76ee\uff0c\u8fd9\u4e9b\u9879\u76ee\u5bf9\u6211\u4eec\u4ee5\u540e\u7684\u8fdb\u9636\u53d1\u5c55\uff0c\u4e5f\u63d0\u4f9b\u4e86\u6307\u5bfc\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/154-ros2jie-mei-zu-zhi/#nav2","title":"NAV2","text":"<p>Nav2\u9879\u76ee\u7ee7\u627f\u81eaROS Navigation Stack\u3002\u8be5\u9879\u76ee\u65e8\u5728\u53ef\u4ee5\u8ba9\u79fb\u52a8\u673a\u5668\u4eba\u4eceA\u70b9\u5b89\u5168\u7684\u79fb\u52a8\u5230B\u70b9\u3002\u5b83\u4e5f\u53ef\u4ee5\u5e94\u7528\u4e8e\u6d89\u53ca\u673a\u5668\u4eba\u5bfc\u822a\u7684\u5176\u4ed6\u5e94\u7528\uff0c\u4f8b\u5982\u8ddf\u968f\u52a8\u6001\u70b9\u3002Nav2\u5c06\u7528\u4e8e\u5b9e\u73b0\u8def\u5f84\u89c4\u5212\u3001\u8fd0\u52a8\u63a7\u5236\u3001\u52a8\u6001\u907f\u969c\u548c\u6062\u590d\u884c\u4e3a\u7b49\u4e00\u7cfb\u5217\u529f\u80fd\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/154-ros2jie-mei-zu-zhi/#opencv","title":"OpenCV","text":"<p>OpenCV\uff08Open Source Computer Vision Library\uff09\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u8ba1\u7b97\u673a\u89c6\u89c9\u548c\u673a\u5668\u5b66\u4e60\u8f6f\u4ef6\u5e93\u3002OpenCV\u65e8\u5728\u4e3a\u8ba1\u7b97\u673a\u89c6\u89c9\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u901a\u7528\u57fa\u7840\u67b6\u6784\uff0c\u5e76\u52a0\u901f\u673a\u5668\u611f\u77e5\u5728\u5546\u4e1a\u4ea7\u54c1\u4e2d\u7684\u4f7f\u7528\u3002OpenCV\u5141\u8bb8\u4f01\u4e1a\u8f7b\u677e\u5730\u4f7f\u7528\u548c\u4fee\u6539\u4ee3\u7801\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/154-ros2jie-mei-zu-zhi/#moveit","title":"MoveIt","text":"<p>MoveIt\u662f\u4e00\u7ec4ROS\u8f6f\u4ef6\u5305\uff0c \u4e3b\u8981\u5305\u542b\u8fd0\u52a8\u89c4\u5212\u3001\u78b0\u649e\u68c0\u6d4b\u3001\u8fd0\u52a8\u5b66\u30013D\u611f\u77e5\u3001\u64cd\u4f5c\u63a7\u5236\u7b49\u529f\u80fd\u3002\u5b83\u53ef\u4ee5\u7528\u4e8e\u6784\u5efa\u673a\u68b0\u81c2\u7684\u9ad8\u7ea7\u884c\u4e3a\u3002MoveIt\u73b0\u5728\u53ef\u4ee5\u7528\u4e8e\u5e02\u9762\u4e0a\u7684\u5927\u591a\u6570\u673a\u68b0\u81c2\uff0c\u5e76\u88ab\u8bb8\u591a\u5927\u516c\u53f8\u4f7f\u7528\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/154-ros2jie-mei-zu-zhi/#the-autoware-foundation","title":"The Autoware Foundation","text":"<p>Autoware Foundation\u662fROS\u4e0b\u5c5e\u7684\u975e\u8425\u5229\u7ec4\u7ec7\uff0c\u652f\u6301\u5b9e\u73b0\u81ea\u52a8\u9a7e\u9a76\u7684\u5f00\u6e90\u9879\u76ee\u3002Autoware\u57fa\u91d1\u4f1a\u5728\u4f01\u4e1a\u53d1\u5c55\u548c\u5b66\u672f\u7814\u7a76\u4e4b\u95f4\u521b\u9020\u534f\u540c\u6548\u5e94\uff0c\u4e3a\u6bcf\u4e2a\u4eba\u63d0\u4f9b\u81ea\u52a8\u9a7e\u9a76\u6280\u672f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/154-ros2jie-mei-zu-zhi/#f1-tenth","title":"F1 Tenth","text":"<p>F1 Tenth\u662f\u5c06\u6a21\u578b\u8f66\u6539\u4e3a\u65e0\u4eba\u8f66\u7684\u7ade\u901f\u8d5b\u4e8b\uff0c\u662f\u4e00\u4e2a\u7531\u7814\u7a76\u4eba\u5458\u3001\u5de5\u7a0b\u5e08\u548c\u81ea\u4e3b\u7cfb\u7edf\u7231\u597d\u8005\u7ec4\u6210\u7684\u56fd\u9645\u793e\u533a\u3002\u5b83\u6700\u521d\u4e8e 2016 \u5e74\u5728\u5bbe\u5915\u6cd5\u5c3c\u4e9a\u5927\u5b66\u6210\u7acb\uff0c\u4f46\u540e\u6765\u6269\u5c55\u5230\u5168\u7403\u8bb8\u591a\u5176\u4ed6\u673a\u6784\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/154-ros2jie-mei-zu-zhi/#microros","title":"microROS","text":"<p>\u5728\u57fa\u4e8eROS\u7684\u673a\u5668\u4eba\u5e94\u7528\u4e2d\uff0cmicro-ROS\u6b63\u5728\u5f25\u5408\u6027\u80fd\u6709\u9650\u7684\u5fae\u63a7\u5236\u5668\u548c\u4e00\u822c\u5904\u7406\u5668\u4e4b\u95f4\u7684\u5dee\u8ddd\u3002micro-ROS\u5728\u5404\u79cd\u5d4c\u5165\u5f0f\u786c\u4ef6\u4e0a\u8fd0\u884c\uff0c\u4f7fROS\u80fd\u76f4\u63a5\u5e94\u7528\u4e8e\u673a\u5668\u4eba\u786c\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/154-ros2jie-mei-zu-zhi/#open-robotics","title":"Open Robotics","text":"<p>Open Robotics\u4e0e\u5168\u7403ROS\u793e\u533a\u5408\u4f5c\uff0c\u4e3a\u673a\u5668\u4eba\u521b\u5efa\u5f00\u653e\u7684\u8f6f\u4ef6\u548c\u786c\u4ef6\u5e73\u53f0\uff0c\u5305\u62ec ROS1\u3001ROS2\u3001Gazebo\u6a21\u62df\u5668\u548cIgnition\u6a21\u62df\u5668\u3002Open Robotics\u4f7f\u7528\u8fd9\u4e9b\u5e73\u53f0\u89e3\u51b3\u4e00\u4e9b\u91cd\u8981\u95ee\u9898\uff0c\u5e76\u901a\u8fc7\u4e3a\u5404\u79cd\u5ba2\u6237\u7ec4\u7ec7\u63d0\u4f9b\u8f6f\u4ef6\u548c\u786c\u4ef6\u5f00\u53d1\u670d\u52a1\u6765\u5e2e\u52a9\u5176\u4ed6\u4eba\u505a\u540c\u6837\u7684\u4e8b\u60c5\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/154-ros2jie-mei-zu-zhi/#px4","title":"PX4","text":"<p>PX4\u662f\u4e00\u6b3e\u7528\u4e8e\u65e0\u4eba\u673a\u548c\u5176\u4ed6\u65e0\u4eba\u9a7e\u9a76\u8f66\u8f86\u7684\u5f00\u6e90\u98de\u884c\u63a7\u5236\u8f6f\u4ef6\u3002\u8be5\u9879\u76ee\u4e3a\u65e0\u4eba\u673a\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u4e86\u4e00\u5957\u7075\u6d3b\u7684\u5de5\u5177\uff0c\u7528\u4e8e\u5171\u4eab\u6280\u672f\u5e76\u4e3a\u65e0\u4eba\u673a\u5e94\u7528\u7a0b\u5e8f\u521b\u5efa\u91cf\u8eab\u5b9a\u5236\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/chapter1/15-ros2ti-xi-kuang-jia/154-ros2jie-mei-zu-zhi/#ros-industrial","title":"ROS-Industrial","text":"<p>ROS-Industrial\u662f\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0c\u5c06 ROS \u8f6f\u4ef6\u7684\u9ad8\u7ea7\u529f\u80fd\u6269\u5c55\u5230\u5de5\u4e1a\u76f8\u5173\u786c\u4ef6\u548c\u5e94\u7528\u7a0b\u5e8f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/21-jie-kou-xiao-xi/","title":"21 jie kou xiao xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/21-jie-kou-xiao-xi/#21","title":"2.1 \u901a\u4fe1\u673a\u5236\u7b80\u4ecb","text":"<p>\u5728ROS2\u4e2d\u901a\u4fe1\u65b9\u5f0f\u867d\u7136\u6709\u591a\u79cd\uff0c\u4f46\u662f\u4e0d\u540c\u901a\u4fe1\u65b9\u5f0f\u7684\u7ec4\u6210\u8981\u7d20\u90fd\u662f\u7c7b\u4f3c\u7684\uff0c\u6bd4\u5982\uff1a\u901a\u4fe1\u662f\u53cc\u65b9\u6216\u591a\u65b9\u884c\u4e3a\u3001\u901a\u4fe1\u65f6\u90fd\u9700\u8981\u5c06\u4e0d\u540c\u7684\u901a\u4fe1\u5bf9\u8c61\u5173\u8054\u3001\u90fd\u6709\u5404\u81ea\u7684\u6a21\u578b\u3001\u4ea4\u4e92\u6570\u636e\u65f6\u4e5f\u5fc5\u7136\u6d89\u53ca\u5230\u6570\u636e\u8f7d\u4f53\u7b49\u7b49\u3002\u672c\u8282\u5c06\u4f1a\u4ecb\u7ecd\u901a\u4fe1\u4e2d\u6d89\u53ca\u5230\u7684\u4e00\u4e9b\u672f\u8bed\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/21-jie-kou-xiao-xi/#1","title":"1.\u8282\u70b9","text":"<p>\u5728\u901a\u4fe1\u65f6\uff0c\u4e0d\u8bba\u91c7\u7528\u4f55\u79cd\u65b9\u5f0f\uff0c\u901a\u4fe1\u5bf9\u8c61\u7684\u6784\u5efa\u90fd\u4f9d\u8d56\u4e8e\u8282\u70b9\\(Node\\)\uff0c\u5728ROS2\u4e2d\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u6bcf\u4e2a\u8282\u70b9\u90fd\u5bf9\u5e94\u67d0\u4e00\u5355\u4e00\u7684\u529f\u80fd\u6a21\u5757\\(\u4f8b\u5982\uff1a\u96f7\u8fbe\u9a71\u52a8\u8282\u70b9\u53ef\u80fd\u8d1f\u8d23\u53d1\u5e03\u96f7\u8fbe\u6d88\u606f\uff0c\u6444\u50cf\u5934\u9a71\u52a8\u8282\u70b9\u53ef\u80fd\u8d1f\u8d23\u53d1\u5e03\u56fe\u50cf\u6d88\u606f\\)\u3002\u4e00\u4e2a\u5b8c\u6574\u7684\u673a\u5668\u4eba\u7cfb\u7edf\u53ef\u80fd\u7531\u8bb8\u591a\u534f\u540c\u5de5\u4f5c\u7684\u8282\u70b9\u7ec4\u6210\uff0cROS2\u4e2d\u7684\u5355\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\\(C++\u7a0b\u5e8f\u6216Python\u7a0b\u5e8f\\)\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u8282\u70b9\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/21-jie-kou-xiao-xi/#2","title":"2.\u8bdd\u9898","text":"<p>\u8bdd\u9898\\(Topic\\)\u662f\u4e00\u4e2a\u7ebd\u5e26\uff0c\u5177\u6709\u76f8\u540c\u8bdd\u9898\u7684\u8282\u70b9\u53ef\u4ee5\u5173\u8054\u5728\u4e00\u8d77\uff0c\u800c\u8fd9\u6b63\u662f\u901a\u4fe1\u7684\u524d\u63d0\u3002\u5e76\u4e14ROS2\u662f\u8de8\u8bed\u8a00\u7684\uff0c\u6709\u7684\u8282\u70b9\u53ef\u80fd\u662f\u4f7f\u7528C++\u5b9e\u73b0\uff0c\u6709\u7684\u8282\u70b9\u53ef\u80fd\u662f\u4f7f\u7528Python\u5b9e\u73b0\u7684\uff0c\u4f46\u662f\u53ea\u8981\u4e8c\u8005\u4f7f\u7528\u4e86\u76f8\u540c\u7684\u8bdd\u9898\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6570\u636e\u7684\u4ea4\u4e92\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/21-jie-kou-xiao-xi/#3","title":"3.\u901a\u4fe1\u6a21\u578b","text":"<p>\u4e0d\u540c\u7684\u901a\u4fe1\u5bf9\u8c61\u901a\u8fc7\u8bdd\u9898\u5173\u8054\u5230\u4e00\u8d77\u4e4b\u540e\uff0c\u4ee5\u4f55\u79cd\u65b9\u5f0f\u5b9e\u73b0\u901a\u4fe1\u5462\uff1f\u5728ROS2\u4e2d\uff0c\u5e38\u7528\u7684\u901a\u4fe1\u6a21\u578b\u6709\u56db\u79cd\uff1a</p> <p>1.\u8bdd\u9898\u901a\u4fe1\uff1a\u662f\u4e00\u79cd\u5355\u5411\u901a\u4fe1\u6a21\u578b\uff0c\u5728\u901a\u4fe1\u53cc\u65b9\u4e2d\uff0c\u53d1\u5e03\u65b9\u53d1\u5e03\u6570\u636e\uff0c\u8ba2\u9605\u65b9\u8ba2\u9605\u6570\u636e\uff0c\u6570\u636e\u6d41\u5355\u5411\u7684\u7531\u53d1\u5e03\u65b9\u4f20\u8f93\u5230\u8ba2\u9605\u65b9\u3002</p> <p>2.\u670d\u52a1\u901a\u4fe1\uff1a\u662f\u4e00\u79cd\u57fa\u4e8e\u8bf7\u6c42\u54cd\u5e94\u7684\u901a\u4fe1\u6a21\u578b\uff0c\u5728\u901a\u4fe1\u53cc\u65b9\u4e2d\uff0c\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u6570\u636e\u5230\u670d\u52a1\u7aef\uff0c\u670d\u52a1\u7aef\u54cd\u5e94\u7ed3\u679c\u7ed9\u5ba2\u6237\u7aef\u3002</p> <p>3.\u52a8\u4f5c\u901a\u4fe1\uff1a\u662f\u4e00\u79cd\u5e26\u6709\u8fde\u7eed\u53cd\u9988\u7684\u901a\u4fe1\u6a21\u578b\uff0c\u5728\u901a\u4fe1\u53cc\u65b9\u4e2d\uff0c\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u6570\u636e\u5230\u670d\u52a1\u7aef\uff0c\u670d\u52a1\u7aef\u54cd\u5e94\u7ed3\u679c\u7ed9\u5ba2\u6237\u7aef\uff0c\u4f46\u662f\u5728\u670d\u52a1\u7aef\u63a5\u6536\u5230\u8bf7\u6c42\u5230\u4ea7\u751f\u6700\u7ec8\u54cd\u5e94\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u53d1\u9001\u8fde\u7eed\u7684\u53cd\u9988\u4fe1\u606f\u5230\u5ba2\u6237\u7aef\u3002</p> <p>4.\u53c2\u6570\u670d\u52a1\uff1a\u662f\u4e00\u79cd\u57fa\u4e8e\u5171\u4eab\u7684\u901a\u4fe1\u6a21\u578b\uff0c\u5728\u901a\u4fe1\u53cc\u65b9\u4e2d\uff0c\u670d\u52a1\u7aef\u53ef\u4ee5\u8bbe\u7f6e\u6570\u636e\uff0c\u800c\u5ba2\u6237\u7aef\u53ef\u4ee5\u8fde\u63a5\u670d\u52a1\u7aef\u5e76\u64cd\u4f5c\u670d\u52a1\u7aef\u6570\u636e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/21-jie-kou-xiao-xi/#4","title":"4.\u63a5\u53e3","text":"<p>\u5728\u901a\u4fe1\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u4f20\u8f93\u6570\u636e\uff0c\u5c31\u5fc5\u7136\u6d89\u53ca\u5230\u6570\u636e\u8f7d\u4f53\uff0c\u4e5f\u5373\u8981\u4ee5\u7279\u5b9a\u683c\u5f0f\u4f20\u8f93\u6570\u636e\u3002\u5728ROS2\u4e2d\uff0c\u6570\u636e\u8f7d\u4f53\u79f0\u4e4b\u4e3a\u63a5\u53e3\\(interfaces\\)\u3002\u901a\u4fe1\u65f6\u4f7f\u7528\u7684\u6570\u636e\u8f7d\u4f53\u4e00\u822c\u9700\u8981\u4f7f\u7528\u63a5\u53e3\u6587\u4ef6\u5b9a\u4e49\u3002\u5e38\u7528\u7684\u63a5\u53e3\u6587\u4ef6\u6709\u4e09\u79cd\uff1amsg\u6587\u4ef6\u3001srv\u6587\u4ef6\u4e0eaction\u6587\u4ef6\u3002\u6bcf\u79cd\u6587\u4ef6\u90fd\u53ef\u4ee5\u6309\u7167\u4e00\u5b9a\u683c\u5f0f\u5b9a\u4e49\u7279\u5b9a\u6570\u636e\u7c7b\u578b\u7684\u201c\u53d8\u91cf\u201d\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/21-jie-kou-xiao-xi/#1msg","title":"1.msg\u6587\u4ef6","text":"<p>msg\u6587\u4ef6\u662f\u7528\u4e8e\u5b9a\u4e49\u8bdd\u9898\u901a\u4fe1\u4e2d\u6570\u636e\u8f7d\u4f53\u7684\u63a5\u53e3\u6587\u4ef6\uff0c\u4e00\u4e2a\u5178\u578b\u7684<code>.msg</code>\u6587\u4ef6\u793a\u4f8b\u5982\u4e0b\u3002</p> <pre><code>int64 num1\nint64 num2\n</code></pre> <p>\u5728\u6587\u4ef6\u4e2d\u58f0\u660e\u4e86\u4e00\u4e9b\u88ab\u4f20\u8f93\u7684\u7c7b\u4f3c\u4e8eC++\u53d8\u91cf\u7684\u6570\u636e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/21-jie-kou-xiao-xi/#2srv","title":"2.srv\u6587\u4ef6","text":"<p>srv\u6587\u4ef6\u662f\u7528\u4e8e\u5b9a\u4e49\u670d\u52a1\u901a\u4fe1\u4e2d\u6570\u636e\u8f7d\u4f53\u7684\u63a5\u53e3\u6587\u4ef6\uff0c\u4e00\u4e2a\u5178\u578b\u7684<code>.srv</code>\u6587\u4ef6\u793a\u4f8b\u5982\u4e0b\u3002</p> <pre><code>int64 num1\nint64 num2\n---\nint64 sum\n</code></pre> <p>\u6587\u4ef6\u4e2d\u58f0\u660e\u7684\u6570\u636e\u88ab<code>---</code>\u5206\u5272\u4e3a\u4e24\u90e8\u5206\uff0c\u4e0a\u534a\u90e8\u5206\u7528\u4e8e\u58f0\u660e\u8bf7\u6c42\u6570\u636e\uff0c\u4e0b\u534a\u90e8\u5206\u7528\u4e8e\u58f0\u660e\u54cd\u5e94\u6570\u636e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/21-jie-kou-xiao-xi/#3action","title":"3.action\u6587\u4ef6","text":"<p>action\u6587\u4ef6\u4f7f\u7528\u7528\u4e8e\u5b9a\u4e49\u52a8\u4f5c\u901a\u4fe1\u4e2d\u6570\u636e\u8f7d\u4f53\u7684\u63a5\u53e3\u6587\u4ef6\uff0c\u4e00\u4e2a\u5178\u578b\u7684<code>.action</code>\u6587\u4ef6\u793a\u4f8b\u5982\u4e0b\u3002</p> <pre><code>int64 num\n---\nint64 sum\n---\nfloat64 progress\n</code></pre> <p>\u6587\u4ef6\u4e2d\u58f0\u660e\u7684\u6570\u636e\u88ab<code>---</code>\u5206\u5272\u4e3a\u4e09\u90e8\u5206\uff0c\u4e0a\u534a\u90e8\u5206\u7528\u4e8e\u58f0\u660e\u8bf7\u6c42\u6570\u636e\uff0c\u4e2d\u95f4\u90e8\u5206\u7528\u4e8e\u58f0\u660e\u54cd\u5e94\u6570\u636e\uff0c\u4e0b\u534a\u90e8\u5206\u7528\u4e8e\u58f0\u660e\u8fde\u7eed\u53cd\u9988\u6570\u636e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/21-jie-kou-xiao-xi/#4_1","title":"4.\u53d8\u91cf\u7c7b\u578b","text":"<p>\u4e0d\u7ba1\u662f\u4f55\u79cd\u63a5\u53e3\u6587\u4ef6\uff0c\u5728\u6587\u4ef6\u4e2d\u6bcf\u884c\u58f0\u660e\u7684\u6570\u636e\u90fd\u7531\u5b57\u6bb5\u7c7b\u578b\u548c\u5b57\u6bb5\u540d\u79f0\u7ec4\u6210\uff0c\u53ef\u4ee5\u4f7f\u7528\u7684\u5b57\u6bb5\u7c7b\u578b\u6709\uff1a</p> <ul> <li> <p>int8, int16, int32, int64 \\(\u6216\u8005\u65e0\u7b26\u53f7\u7c7b\u578b: uint\\*\\)</p> </li> <li> <p>float32, float64</p> </li> <li> <p>string</p> </li> <li> <p>time, duration</p> </li> <li> <p>\u5176\u4ed6msg\u6587\u4ef6</p> </li> <li> <p>\u53d8\u957f\u6570\u7ec4\u548c\u5b9a\u957f\u6570\u7ec4</p> </li> </ul> <p>ROS\u4e2d\u8fd8\u6709\u4e00\u79cd\u7279\u6b8a\u7c7b\u578b\uff1a<code>Header</code>\uff0c\u6807\u5934\u5305\u542b\u65f6\u95f4\u6233\u548cROS2\u4e2d\u5e38\u7528\u7684\u5750\u6807\u5e27\u4fe1\u606f\u3002\u8bb8\u591a\u63a5\u53e3\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u5305\u542b<code>Header</code>\u6807\u5934\u3002</p> <p>\u53e6\u5916\uff0c\u9700\u8981\u8bf4\u660e\u7684\u662f\uff1a</p> <p>\u53c2\u6570\u901a\u4fe1\u7684\u6570\u636e\u65e0\u9700\u5b9a\u4e49\u63a5\u53e3\u6587\u4ef6\uff0c\u53c2\u6570\u901a\u4fe1\u65f6\u6570\u636e\u4f1a\u88ab\u5c01\u88c5\u4e3a\u53c2\u6570\u5bf9\u8c61\uff0c\u53c2\u6570\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u64cd\u4f5c\u7684\u90fd\u662f\u53c2\u6570\u5bf9\u8c61\u3002</p> <p>\u672c\u9636\u6bb5\u5927\u5bb6\u5bf9\u6570\u636e\u8f7d\u4f53\u505a\u7b80\u5355\u7684\u4e86\u89e3\u5373\u53ef\uff0c\u5176\u5177\u4f53\u4f7f\u7528\u540e\u7eed\u7ae0\u8282\u6709\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/21-jie-kou-xiao-xi/#_1","title":"\u51c6\u5907\u5de5\u4f5c","text":"<p>1.\u8bf7\u5148\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4<code>ws01_plumbing</code>\uff0c\u672c\u7ae0\u4ee5\u53ca\u7b2c3\u7ae0\u4ee3\u7801\u90e8\u5206\u5185\u5bb9\u5b58\u50a8\u5728\u8be5\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u3002</p> <p>2.\u5b9e\u9645\u5e94\u7528\u4e2d\u4e00\u822c\u5efa\u8bae\u521b\u5efa\u4e13\u95e8\u7684\u63a5\u53e3\u529f\u80fd\u5305\u5b9a\u4e49\u63a5\u53e3\u6587\u4ef6\uff0c\u5f53\u524d\u6559\u7a0b\u4e5f\u9075\u5faa\u8fd9\u4e00\u5efa\u8bae\uff0c\u9884\u5148\u521b\u5efa\u6559\u7a0b\u6240\u9700\u4f7f\u7528\u7684\u63a5\u53e3\u529f\u80fd\u5305\\(\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u76ee\u524d\u4e3a\u6b62\u65e0\u6cd5\u5728Python\u529f\u80fd\u5305\u4e2d\u5b9a\u4e49\u63a5\u53e3\u6587\u4ef6\\)\uff0c\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u7684<code>src</code>\u76ee\u5f55\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>ros2 pkg create --build-type ament_cmake base_interfaces_demo\n</code></pre> <p>\u8be5\u529f\u80fd\u5305\u5c06\u7528\u4e8e\u4fdd\u5b58\u672c\u7ae0\u6559\u7a0b\u4e2d\u81ea\u5b9a\u4e49\u7684\u63a5\u53e3\u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/","title":"22 hua ti tong xin","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/#22","title":"2.2 \u8bdd\u9898\u901a\u4fe1","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/#_1","title":"\u573a\u666f","text":"<p>\u8bdd\u9898\u901a\u4fe1\u662fROS\u4e2d\u4f7f\u7528\u9891\u7387\u6700\u9ad8\u7684\u4e00\u79cd\u901a\u4fe1\u6a21\u5f0f\uff0c\u8bdd\u9898\u901a\u4fe1\u662f\u57fa\u4e8e\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u7684\uff0c\u4e5f\u5373\uff1a\u4e00\u4e2a\u8282\u70b9\u53d1\u5e03\u6d88\u606f\uff0c\u53e6\u4e00\u4e2a\u8282\u70b9\u8ba2\u9605\u8be5\u6d88\u606f\u3002\u8bdd\u9898\u901a\u4fe1\u7684\u5e94\u7528\u573a\u666f\u4e5f\u6781\u5176\u5e7f\u6cdb\uff0c\u6bd4\u5982\u5982\u4e0b\u573a\u666f\uff1a</p> <p>\u673a\u5668\u4eba\u5728\u6267\u884c\u5bfc\u822a\u529f\u80fd\uff0c\u4f7f\u7528\u7684\u4f20\u611f\u5668\u662f\u6fc0\u5149\u96f7\u8fbe\uff0c\u673a\u5668\u4eba\u4f1a\u91c7\u96c6\u6fc0\u5149\u96f7\u8fbe\u611f\u77e5\u5230\u7684\u4fe1\u606f\u5e76\u8ba1\u7b97\uff0c\u7136\u540e\u751f\u6210\u8fd0\u52a8\u63a7\u5236\u4fe1\u606f\u9a71\u52a8\u673a\u5668\u4eba\u5e95\u76d8\u8fd0\u52a8\u3002</p> <p>\u5728\u8be5\u573a\u666f\u4e2d\uff0c\u5c31\u4e0d\u6b62\u4e00\u6b21\u4f7f\u7528\u5230\u4e86\u8bdd\u9898\u901a\u4fe1\u3002</p> <ul> <li>\u4ee5\u6fc0\u5149\u96f7\u8fbe\u4fe1\u606f\u7684\u91c7\u96c6\u5904\u7406\u4e3a\u4f8b\uff0c\u5728ROS\u4e2d\u6709\u4e00\u4e2a\u8282\u70b9\u9700\u8981\u65f6\u65f6\u7684\u53d1\u5e03\u5f53\u524d\u96f7\u8fbe\u91c7\u96c6\u5230\u7684\u6570\u636e\uff0c\u5bfc\u822a\u6a21\u5757\u4e2d\u4e5f\u6709\u8282\u70b9\u4f1a\u8ba2\u9605\u5e76\u89e3\u6790\u96f7\u8fbe\u6570\u636e\u3002</li> <li>\u518d\u4ee5\u8fd0\u52a8\u6d88\u606f\u7684\u53d1\u5e03\u4e3a\u4f8b\uff0c\u5bfc\u822a\u6a21\u5757\u4f1a\u7efc\u5408\u591a\u65b9\u9762\u6570\u636e\u5b9e\u65f6\u8ba1\u7b97\u51fa\u8fd0\u52a8\u63a7\u5236\u4fe1\u606f\u5e76\u53d1\u5e03\u7ed9\u5e95\u76d8\u9a71\u52a8\u6a21\u5757\uff0c\u5e95\u76d8\u9a71\u52a8\u6709\u4e00\u4e2a\u8282\u70b9\u8ba2\u9605\u8fd0\u52a8\u4fe1\u606f\u5e76\u5c06\u5176\u8f6c\u6362\u6210\u63a7\u5236\u7535\u673a\u7684\u8109\u51b2\u4fe1\u53f7\u3002</li> </ul> <p>\u4ee5\u6b64\u7c7b\u63a8\uff0c\u50cf\u96f7\u8fbe\u3001\u6444\u50cf\u5934\u3001GPS.... \u7b49\u7b49\u4e00\u4e9b\u4f20\u611f\u5668\u6570\u636e\u7684\u91c7\u96c6\uff0c\u4e5f\u90fd\u662f\u4f7f\u7528\u4e86\u8bdd\u9898\u901a\u4fe1\uff0c\u8bdd\u9898\u901a\u4fe1\u9002\u7528\u4e8e\u4e0d\u65ad\u66f4\u65b0\u7684\u6570\u636e\u4f20\u8f93\u76f8\u5173\u7684\u5e94\u7528\u573a\u666f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/#_2","title":"\u6982\u5ff5","text":"<p>\u8bdd\u9898\u901a\u4fe1\u662f\u4e00\u79cd\u4ee5\u53d1\u5e03\u8ba2\u9605\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u6570\u636e\u4f20\u8f93\u7684\u901a\u4fe1\u6a21\u578b\u3002\u6570\u636e\u53d1\u5e03\u5bf9\u8c61\u79f0\u4e3a\u53d1\u5e03\u65b9\uff0c\u6570\u636e\u8ba2\u9605\u5bf9\u8c61\u79f0\u4e4b\u4e3a\u8ba2\u9605\u65b9\uff0c\u53d1\u5e03\u65b9\u548c\u8ba2\u9605\u65b9\u901a\u8fc7\u8bdd\u9898\u76f8\u5173\u8054\uff0c\u53d1\u5e03\u65b9\u5c06\u6d88\u606f\u53d1\u5e03\u5728\u8bdd\u9898\u4e0a\uff0c\u8ba2\u9605\u65b9\u5219\u4ece\u8be5\u8bdd\u9898\u8ba2\u9605\u6d88\u606f\uff0c\u6d88\u606f\u7684\u6d41\u5411\u662f\u5355\u5411\u7684\u3002</p> <p></p> <p>\u8bdd\u9898\u901a\u4fe1\u7684\u53d1\u5e03\u65b9\u4e0e\u8ba2\u9605\u65b9\u662f\u4e00\u79cd\u591a\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u4e5f\u5373\uff0c\u540c\u4e00\u8bdd\u9898\u4e0b\u53ef\u4ee5\u5b58\u5728\u591a\u4e2a\u53d1\u5e03\u65b9\uff0c\u4e5f\u53ef\u4ee5\u5b58\u5728\u591a\u4e2a\u8ba2\u9605\u65b9\uff0c\u8fd9\u610f\u5473\u7740\u6570\u636e\u4f1a\u51fa\u73b0\u4ea4\u53c9\u4f20\u8f93\u7684\u60c5\u51b5\uff0c\u5f53\u7136\u5982\u679c\u6ca1\u6709\u8ba2\u9605\u65b9\uff0c\u6570\u636e\u4f20\u8f93\u4e5f\u4f1a\u51fa\u73b0\u4e22\u5931\u7684\u60c5\u51b5\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/#_3","title":"\u4f5c\u7528","text":"<p>\u8bdd\u9898\u901a\u4fe1\u4e00\u822c\u5e94\u7528\u4e8e\u4e0d\u65ad\u66f4\u65b0\u7684\u3001\u5c11\u903b\u8f91\u5904\u7406\u7684\u6570\u636e\u4f20\u8f93\u573a\u666f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/#_4","title":"\u5173\u4e8e\u6d88\u606f\u63a5\u53e3","text":"<p>\u5173\u4e8e\u6d88\u606f\u63a5\u53e3\u7684\u4f7f\u7528\u6709\u591a\u79cd\u65b9\u5f0f\uff1a</p> <ol> <li>\u5728ROS2\u4e2d\u901a\u8fc7std_msgs\u5305\u5c01\u88c5\u4e86\u4e00\u4e9b\u539f\u751f\u7684\u6570\u636e\u7c7b\u578b,\u6bd4\u5982\uff1aString\u3001Int8\u3001Int16\u3001Int32\u3001Int64\u3001Float32\u3001Float64\u3001Char\u3001Bool\u3001Empty.... \u8fd9\u4e9b\u539f\u751f\u6570\u636e\u7c7b\u578b\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u8bdd\u9898\u901a\u4fe1\u7684\u8f7d\u4f53\uff0c\u4e0d\u8fc7\u8fd9\u4e9b\u6570\u636e\u4e00\u822c\u53ea\u5305\u542b\u4e00\u4e2a data \u5b57\u6bb5\uff0c\u800cstd_msgs\u5305\u4e2d\u5176\u4ed6\u7684\u63a5\u53e3\u6587\u4ef6\u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u7ed3\u6784\u7684\u5355\u4e00\u610f\u5473\u7740\u529f\u80fd\u4e0a\u7684\u5c40\u9650\u6027\uff0c\u5f53\u4f20\u8f93\u4e00\u4e9b\u7ed3\u6784\u590d\u6742\u7684\u6570\u636e\u65f6\uff0c\u5c31\u663e\u5f97\u529b\u4e0d\u4ece\u5fc3\u4e86\uff1b</li> <li>\u5728ROS2\u4e2d\u8fd8\u9884\u5b9a\u4e49\u4e86\u8bb8\u591a\u6807\u51c6\u8bdd\u9898\u6d88\u606f\u63a5\u53e3\uff0c\u8fd9\u5728\u5b9e\u9645\u5de5\u4f5c\u4e2d\u6709\u7740\u5e7f\u6cdb\u7684\u5e94\u7528\uff0c\u6bd4\u5982\uff1asensor_msgs\u5305\u4e2d\u5b9a\u4e49\u4e86\u8bb8\u591a\u5173\u4e8e\u4f20\u611f\u5668\u6d88\u606f\u7684\u63a5\u53e3\uff08\u96f7\u8fbe\u3001\u6444\u50cf\u5934\u3001\u70b9\u4e91......\uff09\uff0cgeometry_msgs\u5305\u4e2d\u5219\u5b9a\u4e49\u4e86\u8bb8\u591a\u51e0\u4f55\u6d88\u606f\u76f8\u5173\u7684\u63a5\u53e3\uff08\u5750\u6807\u70b9\u3001\u5750\u6807\u7cfb\u3001\u901f\u5ea6\u6307\u4ee4......\uff09\uff1b</li> <li>\u5982\u679c\u4e0a\u8ff0\u63a5\u53e3\u6587\u4ef6\u90fd\u4e0d\u80fd\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u81ea\u5b9a\u4e49\u63a5\u53e3\u6d88\u606f\uff1b</li> </ol> <p>\u5177\u4f53\u5982\u4f55\u9009\u578b\uff0c\u5927\u5bb6\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u5177\u4f53\u5206\u6790\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/","title":"23 fu wu tong xin","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/#23","title":"2.3 \u670d\u52a1\u901a\u4fe1","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/#_1","title":"\u573a\u666f","text":"<p>\u670d\u52a1\u901a\u4fe1\u4e5f\u662fROS\u4e2d\u4e00\u79cd\u6781\u5176\u5e38\u7528\u7684\u901a\u4fe1\u6a21\u5f0f\uff0c\u670d\u52a1\u901a\u4fe1\u662f\u57fa\u4e8e\u8bf7\u6c42\u54cd\u5e94\u6a21\u5f0f\u7684\uff0c\u662f\u4e00\u79cd\u5e94\u7b54\u673a\u5236\u3002\u4e5f\u5373\uff1a\u4e00\u4e2a\u8282\u70b9A\u5411\u53e6\u4e00\u4e2a\u8282\u70b9B\u53d1\u9001\u8bf7\u6c42\uff0cB\u63a5\u6536\u5904\u7406\u8bf7\u6c42\u5e76\u4ea7\u751f\u54cd\u5e94\u7ed3\u679c\u8fd4\u56de\u7ed9A\u3002\u6bd4\u5982\u5982\u4e0b\u573a\u666f\uff1a</p> <p>\u673a\u5668\u4eba\u5de1\u903b\u8fc7\u7a0b\u4e2d\uff0c\u63a7\u5236\u7cfb\u7edf\u5206\u6790\u4f20\u611f\u5668\u6570\u636e\u53d1\u73b0\u53ef\u7591\u7269\u4f53\u6216\u4eba... \u6b64\u65f6\u9700\u8981\u62cd\u6444\u7167\u7247\u5e76\u7559\u5b58\u3002</p> <p>\u5728\u4e0a\u8ff0\u573a\u666f\u4e2d\uff0c\u5c31\u4f7f\u7528\u5230\u4e86\u670d\u52a1\u901a\u4fe1\u3002</p> <ul> <li>\u6570\u636e\u5206\u6790\u8282\u70b9A\u9700\u8981\u5411\u76f8\u673a\u76f8\u5173\u8282\u70b9B\u53d1\u9001\u56fe\u7247\u5b58\u50a8\u8bf7\u6c42\uff0c\u8282\u70b9B\u5904\u7406\u8bf7\u6c42\uff0c\u5e76\u8fd4\u56de\u5904\u7406\u7ed3\u679c\u3002</li> </ul> <p>\u4e0e\u4e0a\u8ff0\u5e94\u7528\u7c7b\u4f3c\u7684\uff0c\u670d\u52a1\u901a\u4fe1\u66f4\u9002\u7528\u4e8e\u5bf9\u5b9e\u65f6\u6027\u6709\u8981\u6c42\u3001\u5177\u6709\u4e00\u5b9a\u903b\u8f91\u5904\u7406\u7684\u5e94\u7528\u573a\u666f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/#_2","title":"\u6982\u5ff5","text":"<p>\u670d\u52a1\u901a\u4fe1\u662f\u4ee5\u8bf7\u6c42\u54cd\u5e94\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u6570\u636e\u4f20\u8f93\u7684\u901a\u4fe1\u6a21\u5f0f\u3002\u53d1\u9001\u8bf7\u6c42\u6570\u636e\u7684\u5bf9\u8c61\u79f0\u4e3a\u5ba2\u6237\u7aef\uff0c\u63a5\u6536\u8bf7\u6c42\u5e76\u53d1\u9001\u54cd\u5e94\u7684\u5bf9\u8c61\u79f0\u4e4b\u4e3a\u670d\u52a1\u7aef\uff0c\u540c\u8bdd\u9898\u901a\u4fe1\u4e00\u6837\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u4e5f\u901a\u8fc7\u8bdd\u9898\u76f8\u5173\u8054\uff0c\u4e0d\u540c\u7684\u662f\u670d\u52a1\u901a\u4fe1\u7684\u6570\u636e\u4f20\u8f93\u662f\u53cc\u5411\u4ea4\u4e92\u5f0f\u7684\u3002</p> <p></p> <p>\u670d\u52a1\u901a\u4fe1\u4e2d\uff0c\u670d\u52a1\u7aef\u4e0e\u5ba2\u6237\u7aef\u662f\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u4e5f\u5373\uff0c\u540c\u4e00\u670d\u52a1\u8bdd\u9898\u4e0b\uff0c\u5b58\u5728\u591a\u4e2a\u5ba2\u6237\u7aef\uff0c\u6bcf\u4e2a\u5ba2\u6237\u7aef\u90fd\u53ef\u4ee5\u5411\u670d\u52a1\u7aef\u53d1\u9001\u8bf7\u6c42\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/#\u4f5c\u7528","title":"\u4f5c\u7528","text":"<p>\u7528\u4e8e\u5076\u7136\u7684\u3001\u5bf9\u5b9e\u65f6\u6027\u6709\u8981\u6c42\u3001\u6709\u4e00\u5b9a\u903b\u8f91\u5904\u7406\u9700\u6c42\u7684\u6570\u636e\u4f20\u8f93\u573a\u666f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/","title":"24 dong zuo tong xin","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/#24","title":"2.4 \u52a8\u4f5c\u901a\u4fe1","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/#_1","title":"\u573a\u666f","text":"<p>\u5173\u4e8eaction\u901a\u4fe1\uff0c\u6211\u4eec\u5148\u4ece\u4e4b\u524d\u5bfc\u822a\u4e2d\u7684\u5e94\u7528\u573a\u666f\u5f00\u59cb\u4ecb\u7ecd\uff0c\u63cf\u8ff0\u5982\u4e0b\uff1a</p> <p>\u673a\u5668\u4eba\u5bfc\u822a\u5230\u67d0\u4e2a\u76ee\u6807\u70b9,\u6b64\u8fc7\u7a0b\u9700\u8981\u4e00\u4e2a\u8282\u70b9A\u53d1\u5e03\u76ee\u6807\u4fe1\u606f\uff0c\u7136\u540e\u4e00\u4e2a\u8282\u70b9B\u63a5\u6536\u5230\u8bf7\u6c42\u5e76\u63a7\u5236\u79fb\u52a8\uff0c\u6700\u7ec8\u54cd\u5e94\u76ee\u6807\u8fbe\u6210\u72b6\u6001\u4fe1\u606f\u3002</p> <p>\u4e4d\u4e00\u770b\uff0c\u8fd9\u597d\u50cf\u662f\u670d\u52a1\u901a\u4fe1\u5b9e\u73b0\uff0c\u56e0\u4e3a\u9700\u6c42\u4e2d\u8981A\u53d1\u9001\u76ee\u6807\uff0cB\u6267\u884c\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u8fd9\u662f\u4e00\u4e2a\u5178\u578b\u7684\u57fa\u4e8e\u8bf7\u6c42\u54cd\u5e94\u7684\u5e94\u7b54\u6a21\u5f0f\uff0c\u4e0d\u8fc7\uff0c\u5982\u679c\u53ea\u662f\u4f7f\u7528\u57fa\u672c\u7684\u670d\u52a1\u901a\u4fe1\u5b9e\u73b0\uff0c\u5b58\u5728\u4e00\u4e2a\u95ee\u9898\uff1a\u5bfc\u822a\u662f\u4e00\u4e2a\u8fc7\u7a0b\uff0c\u662f\u8017\u65f6\u64cd\u4f5c\uff0c\u5982\u679c\u4f7f\u7528\u670d\u52a1\u901a\u4fe1\uff0c\u90a3\u4e48\u53ea\u6709\u5728\u5bfc\u822a\u7ed3\u675f\u65f6\uff0c\u624d\u4f1a\u4ea7\u751f\u54cd\u5e94\u7ed3\u679c\uff0c\u800c\u5728\u5bfc\u822a\u8fc7\u7a0b\u4e2d\uff0c\u8282\u70b9A\u662f\u4e0d\u4f1a\u83b7\u53d6\u5230\u4efb\u4f55\u53cd\u9988\u7684\uff0c\u4ece\u800c\u53ef\u80fd\u51fa\u73b0\u7a0b\u5e8f\"\u5047\u6b7b\"\u7684\u73b0\u8c61\uff0c\u8fc7\u7a0b\u7684\u4e0d\u53ef\u63a7\u610f\u5473\u7740\u4e0d\u826f\u7684\u7528\u6237\u4f53\u9a8c\uff0c\u4ee5\u53ca\u903b\u8f91\u5904\u7406\u7684\u7f3a\u9677\\(\u6bd4\u5982:\u5bfc\u822a\u4e2d\u6b62\u7684\u9700\u6c42\u65e0\u6cd5\u5b9e\u73b0\\)\u3002\u66f4\u5408\u7406\u7684\u65b9\u6848\u5e94\u8be5\u662f:\u5bfc\u822a\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u8fde\u7eed\u53cd\u9988\u5f53\u524d\u673a\u5668\u4eba\u72b6\u6001\u4fe1\u606f\uff0c\u5f53\u5bfc\u822a\u7ec8\u6b62\u65f6\uff0c\u518d\u8fd4\u56de\u6700\u7ec8\u7684\u6267\u884c\u7ed3\u679c\u3002\u5728ROS\u4e2d\uff0c\u8be5\u5b9e\u73b0\u7b56\u7565\u79f0\u4e4b\u4e3a\uff1aaction \u901a\u4fe1\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/#_2","title":"\u6982\u5ff5","text":"<p>\u52a8\u4f5c\u901a\u4fe1\u9002\u7528\u4e8e\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u4efb\u52a1\u3002\u5c31\u7ed3\u6784\u800c\u8a00\u52a8\u4f5c\u901a\u4fe1\u7531\u76ee\u6807\u3001\u53cd\u9988\u548c\u7ed3\u679c\u4e09\u90e8\u5206\u7ec4\u6210\uff1b\u5c31\u529f\u80fd\u800c\u8a00\u52a8\u4f5c\u901a\u4fe1\u7c7b\u4f3c\u4e8e\u670d\u52a1\u901a\u4fe1\uff0c\u52a8\u4f5c\u5ba2\u6237\u7aef\u53ef\u4ee5\u53d1\u9001\u8bf7\u6c42\u5230\u52a8\u4f5c\u670d\u52a1\u7aef\uff0c\u5e76\u63a5\u6536\u52a8\u4f5c\u670d\u52a1\u7aef\u54cd\u5e94\u7684\u6700\u7ec8\u7ed3\u679c\uff0c\u4e0d\u8fc7\u52a8\u4f5c\u901a\u4fe1\u53ef\u4ee5\u5728\u8bf7\u6c42\u54cd\u5e94\u8fc7\u7a0b\u4e2d\u83b7\u53d6\u8fde\u7eed\u53cd\u9988\uff0c\u5e76\u4e14\u4e5f\u53ef\u4ee5\u5411\u52a8\u4f5c\u670d\u52a1\u7aef\u53d1\u9001\u4efb\u52a1\u53d6\u6d88\u8bf7\u6c42\uff1b\u5c31\u5e95\u5c42\u5b9e\u73b0\u800c\u8a00\u52a8\u4f5c\u901a\u4fe1\u662f\u5efa\u7acb\u5728\u8bdd\u9898\u901a\u4fe1\u548c\u670d\u52a1\u901a\u4fe1\u4e4b\u4e0a\u7684\uff0c\u76ee\u6807\u53d1\u9001\u5b9e\u73b0\u662f\u5bf9\u670d\u52a1\u901a\u4fe1\u7684\u5c01\u88c5\uff0c\u7ed3\u679c\u7684\u83b7\u53d6\u4e5f\u662f\u5bf9\u670d\u52a1\u901a\u4fe1\u7684\u5c01\u88c5\uff0c\u800c\u8fde\u7eed\u53cd\u9988\u5219\u662f\u5bf9\u8bdd\u9898\u901a\u4fe1\u7684\u5c01\u88c5\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/#_3","title":"\u4f5c\u7528","text":"<p>\u4e00\u822c\u9002\u7528\u4e8e\u8017\u65f6\u7684\u8bf7\u6c42\u54cd\u5e94\u573a\u666f\uff0c\u7528\u4ee5\u83b7\u53d6\u8fde\u7eed\u7684\u72b6\u6001\u53cd\u9988\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/","title":"25 can shu fu wu","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/#25","title":"2.5 \u53c2\u6570\u670d\u52a1","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/#_1","title":"\u573a\u666f","text":"<p>\u5728\u673a\u5668\u4eba\u7cfb\u7edf\u4e2d\u4e0d\u540c\u7684\u529f\u80fd\u6a21\u5757\u53ef\u80fd\u4f1a\u4f7f\u7528\u5230\u4e00\u4e9b\u76f8\u540c\u7684\u6570\u636e\uff0c\u6bd4\u5982\uff1a</p> <p>\u5bfc\u822a\u5b9e\u73b0\u65f6\uff0c\u4f1a\u8fdb\u884c\u8def\u5f84\u89c4\u5212\uff0c\u8def\u5f84\u89c4\u5212\u4e3b\u8981\u5305\u542b\uff0c \u5168\u5c40\u8def\u5f84\u89c4\u5212\u548c\u672c\u5730\u8def\u5f84\u89c4\u5212\uff0c\u6240\u8c13\u5168\u5c40\u8def\u5f84\u89c4\u5212\u5c31\u662f\u8bbe\u8ba1\u4e00\u4e2a\u4ece\u51fa\u53d1\u70b9\u5230\u76ee\u6807\u70b9\u7684\u5927\u81f4\u8def\u5f84\uff0c\u800c\u672c\u5730\u8def\u5f84\u89c4\u5212\uff0c\u5219\u662f\u6839\u636e\u8f66\u8f86\u5f53\u524d\u8def\u51b5\u751f\u6210\u5b9e\u65f6\u7684\u884c\u8fdb\u8def\u5f84\u3002\u4e24\u79cd\u8def\u5f84\u89c4\u5212\u5b9e\u73b0\uff0c\u90fd\u4f1a\u4f7f\u7528\u5230\u8f66\u8f86\u7684\u5c3a\u5bf8\u6570\u636e\u2014\u2014\u957f\u5ea6\u3001\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u7b49\u3002\u90a3\u4e48\u8fd9\u4e9b\u901a\u7528\u6570\u636e\u5728\u7a0b\u5e8f\u4e2d\u5e94\u8be5\u5982\u4f55\u5b58\u50a8\u3001\u8c03\u7528\u5462\uff1f</p> <p>\u4e0a\u8ff0\u573a\u666f\u4e2d\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u53c2\u6570\u670d\u52a1\u5b9e\u73b0\uff0c\u5728\u4e00\u4e2a\u8282\u70b9\u4e0b\u4fdd\u5b58\u8f66\u8f86\u5c3a\u5bf8\u6570\u636e\uff0c\u5176\u4ed6\u8282\u70b9\u53ef\u4ee5\u8bbf\u95ee\u8be5\u8282\u70b9\u5e76\u64cd\u4f5c\u8fd9\u4e9b\u6570\u636e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/#_2","title":"\u6982\u5ff5","text":"<p>\u53c2\u6570\u670d\u52a1\u662f\u4ee5\u5171\u4eab\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u6570\u636e\u4ea4\u4e92\u7684\u4e00\u79cd\u901a\u4fe1\u6a21\u5f0f\u3002\u4fdd\u5b58\u53c2\u6570\u7684\u8282\u70b9\u79f0\u4e4b\u4e3a\u53c2\u6570\u670d\u52a1\u7aef\uff0c\u8c03\u7528\u53c2\u6570\u7684\u8282\u70b9\u79f0\u4e4b\u4e3a\u53c2\u6570\u5ba2\u6237\u7aef\u3002\u53c2\u6570\u5ba2\u6237\u7aef\u4e0e\u53c2\u6570\u670d\u52a1\u7aef\u7684\u4ea4\u4e92\u662f\u57fa\u4e8e\u8bf7\u6c42\u54cd\u5e94\u7684\uff0c\u4e14\u53c2\u6570\u901a\u4fe1\u7684\u5b9e\u73b0\u672c\u8d28\u4e0a\u5bf9\u670d\u52a1\u901a\u4fe1\u7684\u8fdb\u4e00\u6b65\u5c01\u88c5\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/#\u4f5c\u7528","title":"\u4f5c\u7528","text":"<p>\u53c2\u6570\u670d\u52a1\u4fdd\u5b58\u7684\u6570\u636e\u7c7b\u4f3c\u4e8e\u7f16\u7a0b\u4e2d\u201c\u5168\u5c40\u53d8\u91cf\u201d\u7684\u6982\u5ff5\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u8282\u70b9\u4e4b\u95f4\u5171\u4eab\u6570\u636e\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/26-chang-yong-ming-ling/","title":"26 chang yong ming ling","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/26-chang-yong-ming-ling/#26","title":"2.6 \u5e38\u7528\u547d\u4ee4","text":"<p>\u524d\u9762\u5185\u5bb9\uff0c\u6211\u4eec\u5b66\u4e60\u4e86 ROS2 \u4e2d\u7684\u591a\u79cd\u901a\u4fe1\u673a\u5236\uff0c\u4e86\u89e3\u4e86\u4e0d\u540c\u901a\u4fe1\u6a21\u578b\u7684\u5b9e\u73b0\u6d41\u7a0b\u3001\u76f8\u5173API\u4ee5\u53ca\u5404\u81ea\u7684\u7279\u70b9\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u518d\u4ecb\u7ecd\u4e00\u4e9b\u5b9e\u9645\u5f00\u53d1\u5f53\u4e2d\u53ef\u80fd\u4f1a\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898\uff1a</p> <p>1.\u4e00\u4e2a\u5b8c\u6574\u7684\u673a\u5668\u4eba\u7cfb\u7edf\u542f\u52a8\u4e4b\u540e\uff0c\u5176\u7ec4\u6210\u662f\u6bd4\u8f83\u590d\u6742\u7684\uff0c\u53ef\u80fd\u5305\u542b\u5341\u51e0\u4e2a\u3001\u51e0\u5341\u4e2a\u751a\u81f3\u4e0a\u767e\u4e2a\u8282\u70b9\uff0c\u4e0d\u540c\u7684\u8282\u70b9\u53ef\u80fd\u53c8\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u901a\u4fe1\u5bf9\u8c61\\(\u8bdd\u9898\u53d1\u5e03\u65b9\u3001\u8bdd\u9898\u8ba2\u9605\u65b9\u3001\u670d\u52a1\u7aef\u3001\u5ba2\u6237\u7aef\u3001\u52a8\u4f5c\u670d\u52a1\u7aef\u3001\u52a8\u4f5c\u5ba2\u6237\u7aef\u3001\u53c2\u6570\u670d\u52a1\u7aef\u3001\u53c2\u6570\u5ba2\u6237\u7aef\\)\uff0c\u901a\u4fe1\u65f6\u8fd8\u9700\u8981\u4f7f\u7528\u5230\u5404\u79cd\u5404\u6837\u7684msg\u3001srv\u6216action\u63a5\u53e3\u6d88\u606f\uff0c\u90a3\u4e48\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u5982\u4f55\u624d\u80fd\u65b9\u4fbf\u7684\u83b7\u53d6\u8fd9\u4e9b\u8282\u70b9\u3001\u8bdd\u9898\u3001\u670d\u52a1\u3001\u52a8\u4f5c\u3001\u53c2\u6570\u4ee5\u53ca\u63a5\u53e3\u76f8\u5173\u7684\u4fe1\u606f\u5462\uff1f 2.\u7f16\u5199\u901a\u4fe1\u5b9e\u73b0\uff0c\u901a\u4fe1\u81f3\u5c11\u6d89\u53ca\u5230\u53cc\u65b9\uff0c\u4e00\u65b9\u7f16\u5199\u5b8c\u6bd5\u540e\uff0c\u5982\u4f55\u9a8c\u8bc1\u7a0b\u5e8f\u662f\u5426\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u5462\uff1f 3.\u8bdd\u9898\u901a\u4fe1\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u5e03\u65b9\u7a0b\u5e8f\u4e2d\u8bbe\u7f6e\u4e86\u6d88\u606f\u7684\u53d1\u5e03\u9891\u7387\uff0c\u5982\u4f55\u5224\u65ad\u5b9e\u9645\u8fd0\u884c\u4e2d\u7684\u53d1\u5e03\u9891\u7387\u662f\u5426\u548c\u8bbe\u7f6e\u7684\u9891\u7387\u4e00\u81f4\u5462\uff1f ......</p> <p>\u5728 ROS2 \u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e9b\u547d\u4ee4\u5de5\u5177\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5feb\u6377\u7684\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c\u672c\u90e8\u5206\u5185\u5bb9\u5c31\u4e3b\u8981\u4ecb\u7ecd\u8fd9\u4e9b\u547d\u4ee4\u7684\u4f7f\u7528\uff0c\u5e38\u7528\u7684\u547d\u4ee4\u5982\u4e0b\uff1a</p> <ul> <li>ros2 node\uff1a\u8282\u70b9\u76f8\u5173\u547d\u4ee4\u884c\u5de5\u5177</li> <li>ros2 interface\uff1a\u63a5\u53e3\\(msg\u3001srv\u3001action\\)\u6d88\u606f\u76f8\u5173\u7684\u547d\u4ee4\u884c\u5de5\u5177</li> <li>ros2 topic\uff1a\u8bdd\u9898\u901a\u4fe1\u76f8\u5173\u7684\u547d\u4ee4\u884c\u5de5\u5177</li> <li>ros2 service\uff1a\u670d\u52a1\u901a\u4fe1\u76f8\u5173\u7684\u547d\u4ee4\u884c\u5de5\u5177</li> <li>ros2 action\uff1a\u52a8\u4f5c\u901a\u4fe1\u76f8\u5173\u7684\u547d\u4ee4\u884c\u5de5\u5177</li> <li>ros2 param\uff1a\u53c2\u6570\u670d\u52a1\u76f8\u5173\u7684\u547d\u4ee4\u884c\u5de5\u5177</li> </ul> <p>\u5173\u4e8e\u547d\u4ee4\u7684\u4f7f\u7528\u4e00\u822c\u90fd\u4f1a\u63d0\u4f9b\u5e2e\u52a9\u6587\u6863\uff0c\u5e2e\u52a9\u6587\u6863\u7684\u83b7\u53d6\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u53ef\u4ee5\u901a\u8fc7<code>\u547d\u4ee4 -h</code> \u6216 <code>\u547d\u4ee4 --help</code>\u7684\u65b9\u5f0f\u67e5\u770b\u547d\u4ee4\u5e2e\u52a9\u6587\u6863\uff0c\u6bd4\u5982\uff1a<code>ros2 node -h</code>\u6216 <code>ros2 node --help</code>\u3002</p> </li> <li> <p>\u547d\u4ee4\u4e0b\u53c2\u6570\u7684\u4f7f\u7528\u4e5f\u53ef\u4ee5\u901a\u8fc7<code>\u547d\u4ee4 \u53c2\u6570 -h</code> \u6216 <code>\u547d\u4ee4 \u53c2\u6570 --help</code>\u7684\u65b9\u5f0f\u67e5\u770b\u5e2e\u52a9\u6587\u6863\uff0c\u6bd4\u5982\uff1a<code>ros2 node list -h</code>\u6216 <code>ros2 node list --help</code>\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/26-chang-yong-ming-ling/#1ros2-node","title":"1.ros2 node","text":"<p>ros2 node \u7684 \u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>info  \u8f93\u51fa\u8282\u70b9\u4fe1\u606f\nlist  \u8f93\u51fa\u8fd0\u884c\u4e2d\u7684\u8282\u70b9\u7684\u5217\u8868\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/26-chang-yong-ming-ling/#2ros2-interace","title":"2.ros2 interace","text":"<p>ros2 interace \u7684\u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>list      \u8f93\u51fa\u6240\u6709\u53ef\u7528\u7684\u63a5\u53e3\u6d88\u606f\npackage   \u8f93\u51fa\u6307\u5b9a\u529f\u80fd\u5305\u4e0b\u7684\npackages  \u8f93\u51fa\u5305\u542b\u63a5\u53e3\u6d88\u606f\u7684\u529f\u80fd\u5305\nproto     \u8f93\u51fa\u63a5\u53e3\u6d88\u606f\u539f\u578b\nshow      \u8f93\u51fa\u63a5\u53e3\u6d88\u606f\u5b9a\u4e49\u683c\u5f0f\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/26-chang-yong-ming-ling/#3ros2-topic","title":"3.ros2 topic","text":"<p>ros2 topic \u7684\u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>bw       \u8f93\u51fa\u8bdd\u9898\u6d88\u606f\u4f20\u8f93\u5360\u7528\u7684\u5e26\u5bbd\ndelay    \u8f93\u51fa\u5e26\u6709 header \u7684\u8bdd\u9898\u5ef6\u8fdf\necho     \u8f93\u51fa\u67d0\u4e2a\u8bdd\u9898\u4e0b\u7684\u6d88\u606f\nfind     \u6839\u636e\u7c7b\u578b\u67e5\u627e\u8bdd\u9898\nhz       \u8f93\u51fa\u6d88\u606f\u53d1\u5e03\u9891\u7387\ninfo     \u8f93\u51fa\u8bdd\u9898\u76f8\u5173\u4fe1\u606f\nlist     \u8f93\u51fa\u8fd0\u884c\u4e2d\u7684\u8bdd\u9898\u5217\u8868\npub      \u5411\u6307\u5b9a\u8bdd\u9898\u53d1\u5e03\u6d88\u606f\ntype     \u8f93\u51fa\u8bdd\u9898\u4f7f\u7528\u7684\u63a5\u53e3\u7c7b\u578b\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/26-chang-yong-ming-ling/#4ros2-service","title":"4.ros2 service","text":"<p>ros2 service \u7684\u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>call  \u5411\u67d0\u4e2a\u670d\u52a1\u53d1\u9001\u8bf7\u6c42\nfind  \u6839\u636e\u7c7b\u578b\u67e5\u627e\u670d\u52a1\nlist  \u8f93\u51fa\u8fd0\u884c\u4e2d\u7684\u670d\u52a1\u5217\u8868\ntype  \u8f93\u51fa\u670d\u52a1\u4f7f\u7528\u7684\u63a5\u53e3\u7c7b\u578b\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/26-chang-yong-ming-ling/#5ros2-action","title":"5.ros2 action","text":"<p>ros2 action \u7684\u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>info       \u8f93\u51fa\u6307\u5b9a\u52a8\u4f5c\u7684\u76f8\u5173\u4fe1\u606f\nlist       \u8f93\u51fa\u8fd0\u884c\u4e2d\u7684\u52a8\u4f5c\u7684\u5217\u8868\nsend_goal  \u5411\u6307\u5b9a\u52a8\u4f5c\u53d1\u9001\u8bf7\u6c42\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/26-chang-yong-ming-ling/#6ros2-param","title":"6.ros2 param","text":"<p>ros2 param \u7684\u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>delete    \u5220\u9664\u53c2\u6570\ndescribe  \u8f93\u51fa\u53c2\u6570\u7684\u63cf\u8ff0\u4fe1\u606f\ndump      \u5c06\u8282\u70b9\u53c2\u6570\u5199\u5165\u5230\u78c1\u76d8\u6587\u4ef6\nget       \u83b7\u53d6\u67d0\u4e2a\u53c2\u6570\nlist      \u8f93\u51fa\u53ef\u7528\u7684\u53c2\u6570\u7684\u5217\u8868\nload      \u4ece\u78c1\u76d8\u6587\u4ef6\u52a0\u8f7d\u53c2\u6570\u5230\u8282\u70b9\nset       \u8bbe\u7f6e\u53c2\u6570\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/27-tong-xin-ji-zhi-jin-jie/","title":"27 tong xin ji zhi jin jie","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/27-tong-xin-ji-zhi-jin-jie/#27","title":"2.7 \u901a\u4fe1\u673a\u5236\u7ec3\u4e60","text":"<p>\u672c\u8282\u4e3b\u8981\u662f\u901a\u8fc7 ROS2 \u5185\u7f6e\u7684 turtlesim \u6848\u4f8b\uff0c\u7ed3\u5408\u5df2\u7ecf\u4ecb\u7ecd\u7684\u547d\u4ee4\u5de5\u5177\u83b7\u53d6\u8282\u70b9\u3001\u63a5\u53e3\u3001\u8bdd\u9898\u3001\u670d\u52a1\u3001\u52a8\u4f5c\u4e0e\u53c2\u6570\u7684\u4fe1\u606f\uff0c\u5e76\u518d\u4ee5\u7f16\u7801\u7684\u65b9\u5f0f\u4f7f\u7528\u4e0d\u540c\u7684\u901a\u4fe1\u6a21\u578b\u5b9e\u73b0\u76f8\u5bf9\u5e94\u7684\u6848\u4f8b\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/28-ben-zhang-xiao-jie/","title":"28 ben zhang xiao jie","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/28-ben-zhang-xiao-jie/#26","title":"2.6 \u672c\u7ae0\u5c0f\u7ed3","text":"<p>\u672c\u7ae0\u4e3b\u8981\u4ecb\u7ecd\u4e86ROS2\u4e2d\u5e38\u7528\u7684\u56db\u79cd\u901a\u4fe1\u673a\u5236\uff1a</p> <ul> <li>\u8bdd\u9898\u901a\u4fe1\uff1b</li> <li>\u670d\u52a1\u901a\u4fe1\uff1b</li> <li>\u52a8\u4f5c\u901a\u4fe1\uff1b</li> <li>\u53c2\u6570\u670d\u52a1\u3002</li> </ul> <p>\u65e0\u8bba\u4f55\u79cd\u901a\u4fe1\u673a\u5236\uff0c\u4ed6\u4eec\u7684\u5b9e\u73b0\u6846\u67b6\u90fd\u662f\u7c7b\u4f3c\u7684\u3002\u6bd4\u5982\uff1a\u901a\u4fe1\u5fc5\u7136\u6d89\u53ca\u5230\u53cc\u65b9\uff0c\u53cc\u65b9\u9700\u8981\u901a\u8fc7\u201c\u8bdd\u9898\u201d\u5173\u8054\uff0c\u901a\u4fe1\u8fd8\u90fd\u5fc5\u7136\u6d89\u53ca\u5230\u6570\u636e\uff0c\u4e00\u822c\u53ef\u4ee5\u901a\u8fc7\u63a5\u53e3\u6587\u4ef6\u6765\u5b9a\u4e49\u6570\u636e\u683c\u5f0f\uff08\u53c2\u6570\u670d\u52a1\u662f\u901a\u8fc7\u53c2\u6570\u7c7b\u5c01\u88c5\u6570\u636e\uff09\u3002</p> <p>\u4e0d\u540c\u7684\u901a\u4fe1\u673a\u5236\u5176\u5b9e\u73b0\u6a21\u578b\u4e5f\u5b58\u5728\u660e\u663e\u5dee\u5f02\u3002\u8bdd\u9898\u901a\u4fe1\u662f\u57fa\u4e8e\u5e7f\u64ad\u7684\u5355\u5411\u6570\u636e\u4ea4\u4e92\u6a21\u5f0f\uff1b\u670d\u52a1\u901a\u4fe1\u662f\u57fa\u4e8e\u8bf7\u6c42\u54cd\u5e94\u7684\u95ee\u7b54\u5f0f\u4ea4\u6570\u636e\u4e92\u6a21\u5f0f\uff1b\u52a8\u4f5c\u901a\u4fe1\u5219\u662f\u5728\u8bf7\u6c42\u54cd\u5e94\u7684\u8fc7\u7a0b\u4e2d\u53c8\u5305\u542b\u8fde\u7eed\u53cd\u9988\u7684\u6570\u636e\u4ea4\u4e92\u6a21\u5f0f\uff1b\u53c2\u6570\u670d\u52a1\u662f\u57fa\u4e8e\u670d\u52a1\u901a\u4fe1\u7684\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u8282\u70b9\u95f4\u5b9e\u73b0\u6570\u636e\u5171\u4eab\u3002\u5b9e\u73b0\u6a21\u578b\u7684\u5dee\u5f02\u4e5f\u51b3\u5b9a\u7740\u4ed6\u4eec\u6709\u7740\u4e0d\u540c\u7684\u5e94\u7528\u573a\u666f\uff0c\u5927\u5bb6\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u5b9e\u9645\u9700\u6c42\u7075\u6d3b\u9009\u62e9\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/","title":"Zi liao ff1a api wen dang","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/#api","title":"\u8d44\u6599\uff1aAPI\u6587\u6863","text":"<p>\u5e38\u7528API\u6c47\u603b\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/221-hua-ti-tong-xin-an-li-fen-xi/","title":"221 hua ti tong xin an li fen xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/221-hua-ti-tong-xin-an-li-fen-xi/#221","title":"2.2.1 \u6848\u4f8b\u4ee5\u53ca\u6848\u4f8b\u5206\u6790","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/221-hua-ti-tong-xin-an-li-fen-xi/#1","title":"1.\u6848\u4f8b\u9700\u6c42","text":"<p>\u9700\u6c421\uff1a\u7f16\u5199\u8bdd\u9898\u901a\u4fe1\u5b9e\u73b0\uff0c\u53d1\u5e03\u65b9\u4ee5\u67d0\u4e2a\u9891\u7387\u53d1\u5e03\u4e00\u6bb5\u6587\u672c\uff0c\u8ba2\u9605\u65b9\u8ba2\u9605\u6d88\u606f\uff0c\u5e76\u8f93\u51fa\u5728\u7ec8\u7aef\u3002</p> <p></p> <p>\u9700\u6c422\uff1a\u7f16\u5199\u8bdd\u9898\u901a\u4fe1\u5b9e\u73b0\uff0c\u53d1\u5e03\u65b9\u4ee5\u67d0\u4e2a\u9891\u7387\u53d1\u5e03\u81ea\u5b9a\u4e49\u63a5\u53e3\u6d88\u606f\uff0c\u8ba2\u9605\u65b9\u8ba2\u9605\u6d88\u606f\uff0c\u5e76\u8f93\u51fa\u5728\u7ec8\u7aef\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/221-hua-ti-tong-xin-an-li-fen-xi/#2","title":"2.\u6848\u4f8b\u5206\u6790","text":"<p>\u5728\u4e0a\u8ff0\u6848\u4f8b\u4e2d\uff0c\u9700\u8981\u5173\u6ce8\u7684\u8981\u7d20\u6709\u4e09\u4e2a\uff1a</p> <ol> <li>\u53d1\u5e03\u65b9\uff1b</li> <li>\u8ba2\u9605\u65b9\uff1b</li> <li>\u6d88\u606f\u8f7d\u4f53\u3002</li> </ol> <p>\u6848\u4f8b1\u548c\u6848\u4f8b2\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u6d88\u606f\u8f7d\u4f53\uff0c\u524d\u8005\u53ef\u4ee5\u4f7f\u7528\u539f\u751f\u7684\u6570\u636e\u7c7b\u578b\uff0c\u540e\u8005\u9700\u8981\u81ea\u5b9a\u4e49\u63a5\u53e3\u6d88\u606f\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/221-hua-ti-tong-xin-an-li-fen-xi/#3","title":"3.\u6d41\u7a0b\u7b80\u4ecb","text":"<p>\u6848\u4f8b2\u9700\u8981\u5148\u81ea\u5b9a\u4e49\u63a5\u53e3\u6d88\u606f\uff0c\u9664\u6b64\u4e4b\u5916\u7684\u5b9e\u73b0\u6d41\u7a0b\u4e0e\u6848\u4f8b1\u4e00\u81f4\uff0c\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u5199\u53d1\u5e03\u65b9\u5b9e\u73b0\uff1b</li> <li>\u7f16\u5199\u8ba2\u9605\u65b9\u5b9e\u73b0\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol> <p>\u6848\u4f8b\u6211\u4eec\u4f1a\u91c7\u7528C++\u548cPython\u5206\u522b\u5b9e\u73b0\uff0c\u4e8c\u8005\u90fd\u9075\u5faa\u4e0a\u8ff0\u5b9e\u73b0\u6d41\u7a0b\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/221-hua-ti-tong-xin-an-li-fen-xi/#4","title":"4.\u51c6\u5907\u5de5\u4f5c","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u7684src\u76ee\u5f55\uff0c\u8c03\u7528\u5982\u4e0b\u4e24\u6761\u547d\u4ee4\u5206\u522b\u521b\u5efaC++\u529f\u80fd\u5305\u548cPython\u529f\u80fd\u5305\u3002</p> <pre><code>ros2 pkg create cpp01_topic --build-type ament_cmake --dependencies rclcpp std_msgs base_interfaces_demo\nros2 pkg create py01_topic --build-type ament_python --dependencies rclpy std_msgs base_interfaces_demo\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/221-hua-ti-tong-xin-li-lun-mo-xing/","title":"221 hua ti tong xin li lun mo xing","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/221-hua-ti-tong-xin-li-lun-mo-xing/#221","title":"2.2.1 \u8bdd\u9898\u901a\u4fe1\u7406\u8bba\u6a21\u578b","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-c-shi-73b028-yuan-sheng-xiao-606f29/","title":"222 hua ti tong xin c shi 73b028 yuan sheng xiao 606f29","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-c-shi-73b028-yuan-sheng-xiao-606f29/#222-c","title":"2.2.2 \u8bdd\u9898\u901a\u4fe1\u4e4b\u539f\u751f\u6d88\u606f\uff08C++\uff09","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-c-shi-73b028-yuan-sheng-xiao-606f29/#1","title":"1.\u53d1\u5e03\u65b9\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp01_topic\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6demo01_talker_str.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n  \u9700\u6c42\uff1a\u4ee5\u67d0\u4e2a\u56fa\u5b9a\u9891\u7387\u53d1\u9001\u6587\u672c\u201chello world!\u201d\uff0c\u6587\u672c\u540e\u7f00\u7f16\u53f7\uff0c\u6bcf\u53d1\u9001\u4e00\u6761\u6d88\u606f\uff0c\u7f16\u53f7\u9012\u589e1\u3002\n  \u6b65\u9aa4\uff1a\n    1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n    2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n      3-1.\u521b\u5efa\u53d1\u5e03\u65b9\uff1b\n      3-2.\u521b\u5efa\u5b9a\u65f6\u5668\uff1b\n      3-3.\u7ec4\u7ec7\u6d88\u606f\u5e76\u53d1\u5e03\u3002\n    4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n    5.\u91ca\u653e\u8d44\u6e90\u3002\n*/\n\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n#include \"std_msgs/msg/string.hpp\"\n\nusing namespace std::chrono_literals;\n\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalPublisher : public rclcpp::Node\n{\n  public:\n    MinimalPublisher()\n    : Node(\"minimal_publisher\"), count_(0)\n    {\n      // 3-1.\u521b\u5efa\u53d1\u5e03\u65b9\uff1b\n      publisher_ = this-&gt;create_publisher&lt;std_msgs::msg::String&gt;(\"topic\", 10);\n      // 3-2.\u521b\u5efa\u5b9a\u65f6\u5668\uff1b\n      timer_ = this-&gt;create_wall_timer(500ms, std::bind(&amp;MinimalPublisher::timer_callback, this));\n    }\n\n  private:\n    void timer_callback()\n    {\n      // 3-3.\u7ec4\u7ec7\u6d88\u606f\u5e76\u53d1\u5e03\u3002\n      auto message = std_msgs::msg::String();\n      message.data = \"Hello, world! \" + std::to_string(count_++);\n      RCLCPP_INFO(this-&gt;get_logger(), \"\u53d1\u5e03\u7684\u6d88\u606f\uff1a'%s'\", message.data.c_str());\n      publisher_-&gt;publish(message);\n    }\n    rclcpp::TimerBase::SharedPtr timer_;\n    rclcpp::Publisher&lt;std_msgs::msg::String&gt;::SharedPtr publisher_;\n    size_t count_;\n};\n\nint main(int argc, char * argv[])\n{\n  // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n  rclcpp::init(argc, argv);\n  // 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\u3002\n  rclcpp::spin(std::make_shared&lt;MinimalPublisher&gt;());\n  // 5.\u91ca\u653e\u8d44\u6e90\uff1b\n  rclcpp::shutdown();\n  return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-c-shi-73b028-yuan-sheng-xiao-606f29/#2","title":"2.\u8ba2\u9605\u65b9\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp01_topic\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6demo02_listener_str.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n    \u9700\u6c42\uff1a\u8ba2\u9605\u53d1\u5e03\u65b9\u53d1\u5e03\u7684\u6d88\u606f\uff0c\u5e76\u8f93\u51fa\u5230\u7ec8\u7aef\u3002\n    \u6b65\u9aa4\uff1a\n        1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n        2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n        3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u8ba2\u9605\u65b9\uff1b\n            3-2.\u5904\u7406\u8ba2\u9605\u5230\u7684\u6d88\u606f\u3002\n        4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n        5.\u91ca\u653e\u8d44\u6e90\u3002\n*/\n\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n#include \"std_msgs/msg/string.hpp\"\nusing std::placeholders::_1;\n\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalSubscriber : public rclcpp::Node\n{\n  public:\n    MinimalSubscriber()\n    : Node(\"minimal_subscriber\")\n    {\n      // 3-1.\u521b\u5efa\u8ba2\u9605\u65b9\uff1b\n      subscription_ = this-&gt;create_subscription&lt;std_msgs::msg::String&gt;(\"topic\", 10, std::bind(&amp;MinimalSubscriber::topic_callback, this, _1));\n    }\n\n  private:\n    // 3-2.\u5904\u7406\u8ba2\u9605\u5230\u7684\u6d88\u606f\uff1b\n    void topic_callback(const std_msgs::msg::String &amp; msg) const\n    {\n      RCLCPP_INFO(this-&gt;get_logger(), \"\u8ba2\u9605\u7684\u6d88\u606f\uff1a '%s'\", msg.data.c_str());\n    }\n    rclcpp::Subscription&lt;std_msgs::msg::String&gt;::SharedPtr subscription_;\n};\n\nint main(int argc, char * argv[])\n{\n  // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n  rclcpp::init(argc, argv);\n  // 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\u3002\n  rclcpp::spin(std::make_shared&lt;MinimalSubscriber&gt;());\n  // 5.\u91ca\u653e\u8d44\u6e90\uff1b\n  rclcpp::shutdown();\n  return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-c-shi-73b028-yuan-sheng-xiao-606f29/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<p>\u5728C++\u529f\u80fd\u5305\u4e2d\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3b\u8981\u5173\u6ce8package.xml\u4e0eCMakeLists.txt\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-c-shi-73b028-yuan-sheng-xiao-606f29/#1packagexml","title":"1.package.xml","text":"<p>\u5728\u521b\u5efa\u529f\u80fd\u5305\u65f6\uff0c\u6240\u4f9d\u8d56\u7684\u529f\u80fd\u5305\u5df2\u7ecf\u81ea\u52a8\u914d\u7f6e\u4e86\uff0c\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;depend&gt;rclcpp&lt;/depend&gt;\n&lt;depend&gt;std_msgs&lt;/depend&gt;\n&lt;depend&gt;base_interfaces_demo&lt;/depend&gt;\n</code></pre> <p>\u9700\u8981\u8bf4\u660e\u7684\u662f<code>&lt;depend&gt;base_interfaces_demo&lt;/depend&gt;</code>\u5728\u672c\u6848\u4f8b\u4e2d\u4e0d\u662f\u5fc5\u987b\u7684\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-c-shi-73b028-yuan-sheng-xiao-606f29/#2cmakeliststxt","title":"2.CMakeLists.txt","text":"<p>CMakeLists.txt\u4e2d\u53d1\u5e03\u548c\u8ba2\u9605\u7a0b\u5e8f\u6838\u5fc3\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>find_package(rclcpp REQUIRED)\nfind_package(std_msgs REQUIRED)\nfind_package(base_interfaces_demo REQUIRED)\n\nadd_executable(demo01_talker_str src/demo01_talker_str.cpp)\nament_target_dependencies(\n  demo01_talker_str\n  \"rclcpp\"\n  \"std_msgs\"\n)\n\nadd_executable(demo02_listener_str src/demo02_listener_str.cpp)\nament_target_dependencies(\n  demo02_listener_str\n  \"rclcpp\"\n  \"std_msgs\"\n)\n\ninstall(TARGETS \n  demo01_talker_str\n  demo02_listener_str\n  DESTINATION lib/${PROJECT_NAME})\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-c-shi-73b028-yuan-sheng-xiao-606f29/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select cpp01_topic\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-c-shi-73b028-yuan-sheng-xiao-606f29/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\uff0c\u7ec8\u7aef1\u6267\u884c\u53d1\u5e03\u7a0b\u5e8f\uff0c\u7ec8\u7aef2\u6267\u884c\u8ba2\u9605\u7a0b\u5e8f\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run cpp01_topic demo01_talker_str\n</code></pre> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash \nros2 run cpp01_topic demo02_listener_str\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6848\u4f8b1\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-jie-kou-xiao-xi/","title":"222 hua ti tong xin jie kou xiao xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-jie-kou-xiao-xi/#224","title":"2.2.4 \u8bdd\u9898\u901a\u4fe1\u81ea\u5b9a\u4e49\u63a5\u53e3\u6d88\u606f","text":"<p>\u81ea\u5b9a\u4e49\u63a5\u53e3\u6d88\u606f\u7684\u6d41\u7a0b\u4e0e\u5728\u529f\u80fd\u5305\u4e2d\u7f16\u5199\u53ef\u6267\u884c\u7a0b\u5e8f\u7684\u6d41\u7a0b\u7c7b\u4f3c\uff0c\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u521b\u5efa\u5e76\u7f16\u8f91 <code>.msg</code>\u6587\u4ef6\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6d4b\u8bd5\u3002</li> </ol> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u53c2\u8003\u6848\u4f8b2\u7f16\u8bd1\u4e00\u4e2amsg\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u4e2d\u5305\u542b\u5b66\u751f\u7684\u59d3\u540d\u3001\u5e74\u9f84\u3001\u8eab\u9ad8\u7b49\u5b57\u6bb5\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-jie-kou-xiao-xi/#1-msg","title":"1.\u521b\u5efa\u5e76\u7f16\u8f91 .msg \u6587\u4ef6","text":"<p>\u529f\u80fd\u5305base_interfaces_demo\u4e0b\u65b0\u5efa msg \u6587\u4ef6\u5939\uff0cmsg\u6587\u4ef6\u5939\u4e0b\u65b0\u5efaStudent.msg\u6587\u4ef6\uff0c\u6587\u4ef6\u4e2d\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>string   name\nint32    age\nfloat64  height\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-jie-kou-xiao-xi/#2","title":"2.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-jie-kou-xiao-xi/#1packagexml","title":"1.package.xml\u6587\u4ef6","text":"<p>\u5728package.xml\u4e2d\u9700\u8981\u6dfb\u52a0\u4e00\u4e9b\u4f9d\u8d56\u5305\uff0c\u5177\u4f53\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;build_depend&gt;rosidl_default_generators&lt;/build_depend&gt;\n&lt;exec_depend&gt;rosidl_default_runtime&lt;/exec_depend&gt;\n&lt;member_of_group&gt;rosidl_interface_packages&lt;/member_of_group&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-jie-kou-xiao-xi/#2cmakeliststxt","title":"2.CMakeLists.txt\u6587\u4ef6","text":"<p>\u4e3a\u4e86\u5c06<code>.msg</code>\u6587\u4ef6\u8f6c\u6362\u6210\u5bf9\u5e94\u7684C++\u548cPython\u4ee3\u7801\uff0c\u8fd8\u9700\u8981\u5728CMakeLists.txt\u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a</p> <pre><code>find_package(rosidl_default_generators REQUIRED)\n\nrosidl_generate_interfaces(${PROJECT_NAME}\n  \"msg/Student.msg\"\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-jie-kou-xiao-xi/#3","title":"3.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select base_interfaces_demo\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/222-hua-ti-tong-xin-jie-kou-xiao-xi/#4","title":"4.\u6d4b\u8bd5","text":"<p>\u7f16\u8bd1\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u7684install\u76ee\u5f55\u4e0b\u5c06\u751f\u6210<code>Student.msg</code>\u6587\u4ef6\u5bf9\u5e94\u7684C++\u548cPython\u6587\u4ef6\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\uff0c\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u6587\u4ef6\u5b9a\u4e49\u4ee5\u53ca\u7f16\u8bd1\u662f\u5426\u6b63\u5e38\uff1a</p> <pre><code>. install/setup.bash\nros2 interface show base_interfaces_demo/msg/Student\n</code></pre> <p>\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u7ec8\u7aef\u5c06\u4f1a\u8f93\u51fa\u4e0e<code>Student.msg</code>\u6587\u4ef6\u4e00\u81f4\u7684\u5185\u5bb9\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-c-shi-xian/","title":"223 hua ti tong xin c shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-c-shi-xian/#225-c","title":"2.2.5 \u8bdd\u9898\u901a\u4fe1\u4e4b\u81ea\u5b9a\u4e49\u6d88\u606f\uff08C++\uff09","text":"<p>\u51c6\u5907</p> <p>C++\u6587\u4ef6\u4e2d\u5305\u542b\u81ea\u5b9a\u4e49\u6d88\u606f\u76f8\u5173\u5934\u6587\u4ef6\u65f6\uff0c\u53ef\u80fd\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u53ef\u4ee5\u914d\u7f6eVSCode\u4e2dc_cpp_properties.json\u6587\u4ef6\uff0c\u5728\u6587\u4ef6\u4e2d\u7684 includePath\u5c5e\u6027\u4e0b\u6dfb\u52a0\u4e00\u884c\uff1a\"${workspaceFolder}/install/base_interfaces_demo/include/**\"</p> <p>\u6dfb\u52a0\u5b8c\u6bd5\u540e\uff0c\u5305\u542b\u76f8\u5173\u5934\u6587\u4ef6\u65f6\uff0c\u5c31\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\u4e86\uff0c\u5176\u4ed6\u63a5\u53e3\u6587\u4ef6\u6216\u63a5\u53e3\u5305\u7684\u4f7f\u7528\u4e5f\u4e0e\u6b64\u540c\u7406\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-c-shi-xian/#1","title":"1.\u53d1\u5e03\u65b9\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp01_topic\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6demo01_talker_stu.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n  \u9700\u6c42\uff1a\u4ee5\u67d0\u4e2a\u56fa\u5b9a\u9891\u7387\u53d1\u9001\u6587\u672c\u5b66\u751f\u4fe1\u606f\uff0c\u5305\u542b\u5b66\u751f\u7684\u59d3\u540d\u3001\u5e74\u9f84\u3001\u8eab\u9ad8\u7b49\u6570\u636e\u3002\n*/\n\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n#include \"base_interfaces_demo/msg/student.hpp\"\n\nusing namespace std::chrono_literals;\nusing base_interfaces_demo::msg::Student;\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalPublisher : public rclcpp::Node\n{\n  public:\n    MinimalPublisher()\n    : Node(\"student_publisher\"), count_(0)\n    {\n      // 3-1.\u521b\u5efa\u53d1\u5e03\u65b9\uff1b\n      publisher_ = this-&gt;create_publisher&lt;Student&gt;(\"topic_stu\", 10);\n      // 3-2.\u521b\u5efa\u5b9a\u65f6\u5668\uff1b\n      timer_ = this-&gt;create_wall_timer(500ms, std::bind(&amp;MinimalPublisher::timer_callback, this));\n    }\n\n  private:\n    void timer_callback()\n    {\n      // 3-3.\u7ec4\u7ec7\u6d88\u606f\u5e76\u53d1\u5e03\u3002\n      auto stu = Student();\n      stu.name = \"\u5f20\u4e09\";\n      stu.age = count_++;\n      stu.height = 1.65;\n      RCLCPP_INFO(this-&gt;get_logger(), \"\u5b66\u751f\u4fe1\u606f:name=%s,age=%d,height=%.2f\", stu.name.c_str(),stu.age,stu.height);\n      publisher_-&gt;publish(stu);\n\n    }\n    rclcpp::TimerBase::SharedPtr timer_;\n    rclcpp::Publisher&lt;Student&gt;::SharedPtr publisher_;\n    size_t count_;\n};\n\nint main(int argc, char * argv[])\n{\n  // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n  rclcpp::init(argc, argv);\n  // 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\u3002\n  rclcpp::spin(std::make_shared&lt;MinimalPublisher&gt;());\n  // 5.\u91ca\u653e\u8d44\u6e90\uff1b\n  rclcpp::shutdown();\n  return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-c-shi-xian/#2","title":"2.\u8ba2\u9605\u65b9\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp01_topic\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6demo04_listener_stu.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n    \u9700\u6c42\uff1a\u8ba2\u9605\u53d1\u5e03\u65b9\u53d1\u5e03\u7684\u5b66\u751f\u6d88\u606f\uff0c\u5e76\u8f93\u51fa\u5230\u7ec8\u7aef\u3002\n*/\n\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n#include \"base_interfaces_demo/msg/student.hpp\"\n\nusing std::placeholders::_1;\nusing base_interfaces_demo::msg::Student;\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalSubscriber : public rclcpp::Node\n{\n  public:\n    MinimalSubscriber()\n    : Node(\"student_subscriber\")\n    {\n      // 3-1.\u521b\u5efa\u8ba2\u9605\u65b9\uff1b\n      subscription_ = this-&gt;create_subscription&lt;Student&gt;(\"topic_stu\", 10, std::bind(&amp;MinimalSubscriber::topic_callback, this, _1));\n    }\n\n  private:\n    // 3-2.\u5904\u7406\u8ba2\u9605\u5230\u7684\u6d88\u606f\uff1b\n    void topic_callback(const Student &amp; msg) const\n    {\n      RCLCPP_INFO(this-&gt;get_logger(), \"\u8ba2\u9605\u7684\u5b66\u751f\u6d88\u606f\uff1aname=%s,age=%d,height=%.2f\", msg.name.c_str(),msg.age, msg.height);\n    }\n    rclcpp::Subscription&lt;Student&gt;::SharedPtr subscription_;\n};\n\nint main(int argc, char * argv[])\n{\n  // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n  rclcpp::init(argc, argv);\n  // 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\u3002\n  rclcpp::spin(std::make_shared&lt;MinimalSubscriber&gt;());\n  // 5.\u91ca\u653e\u8d44\u6e90\uff1b\n  rclcpp::shutdown();\n  return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-c-shi-xian/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<p>package.xml\u65e0\u9700\u4fee\u6539\uff0cCMakeLists.txt\u6587\u4ef6\u9700\u8981\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>add_executable(demo03_talker_stu src/demo03_talker_stu.cpp)\nament_target_dependencies(\n  demo03_talker_stu\n  \"rclcpp\"\n  \"std_msgs\"\n  \"base_interfaces_demo\"\n)\n\nadd_executable(demo04_listener_stu src/demo04_listener_stu.cpp)\nament_target_dependencies(\n  demo04_listener_stu\n  \"rclcpp\"\n  \"std_msgs\"\n  \"base_interfaces_demo\"\n)\n</code></pre> <p>\u6587\u4ef6\u4e2dinstall\u4fee\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>install(TARGETS \n  demo01_talker_str\n  demo02_listener_str\n  demo03_talker_stu\n  demo04_listener_stu\n  DESTINATION lib/${PROJECT_NAME})\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-c-shi-xian/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select cpp01_topic\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-c-shi-xian/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\uff0c\u7ec8\u7aef1\u6267\u884c\u53d1\u5e03\u7a0b\u5e8f\uff0c\u7ec8\u7aef2\u6267\u884c\u8ba2\u9605\u7a0b\u5e8f\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run cpp01_topic demo03_talker_stu\n</code></pre> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash \nros2 run cpp01_topic demo04_listener_stu\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6848\u4f8b2\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-python-shi-73b028-yuan-sheng-xiao-606f29/","title":"223 hua ti tong xin python shi 73b028 yuan sheng xiao 606f29","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-python-shi-73b028-yuan-sheng-xiao-606f29/#223-python","title":"2.2.3 \u8bdd\u9898\u901a\u4fe1\u4e4b\u539f\u751f\u6d88\u606f\uff08Python\uff09","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-python-shi-73b028-yuan-sheng-xiao-606f29/#1","title":"1.\u53d1\u5e03\u65b9\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305py01_topic\u7684py01_topic\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaPython\u6587\u4ef6demo01_talker_str_py.py\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>\"\"\"  \n    \u9700\u6c42\uff1a\u4ee5\u67d0\u4e2a\u56fa\u5b9a\u9891\u7387\u53d1\u9001\u6587\u672c\u201chello world!\u201d\uff0c\u6587\u672c\u540e\u7f00\u7f16\u53f7\uff0c\u6bcf\u53d1\u9001\u4e00\u6761\u6d88\u606f\uff0c\u7f16\u53f7\u9012\u589e1\u3002\n    \u6b65\u9aa4\uff1a\n        1.\u5bfc\u5305\uff1b\n        2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n        3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u53d1\u5e03\u65b9\uff1b\n            3-2.\u521b\u5efa\u5b9a\u65f6\u5668\uff1b\n            3-3.\u7ec4\u7ec7\u6d88\u606f\u5e76\u53d1\u5e03\u3002\n        4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n        5.\u91ca\u653e\u8d44\u6e90\u3002\n\"\"\"\n# 1.\u5bfc\u5305\uff1b\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\n# 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher_py')\n        # 3-1.\u521b\u5efa\u53d1\u5e03\u65b9\uff1b\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        # 3-2.\u521b\u5efa\u5b9a\u65f6\u5668\uff1b\n        timer_period = 0.5 \n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    # 3-3.\u7ec4\u7ec7\u6d88\u606f\u5e76\u53d1\u5e03\u3002\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World(py): %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('\u53d1\u5e03\u7684\u6d88\u606f: \"%s\"' % msg.data)\n        self.i += 1\n\n\ndef main(args=None):\n    # 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclpy.init(args=args)\n    # 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n    # 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-python-shi-73b028-yuan-sheng-xiao-606f29/#2","title":"2.\u8ba2\u9605\u65b9\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305py01_topic\u7684py01_topic\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaPython\u6587\u4ef6demo02_listener_str_py.py\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>\"\"\"  \n    \u9700\u6c42\uff1a\u8ba2\u9605\u53d1\u5e03\u65b9\u53d1\u5e03\u7684\u6d88\u606f\uff0c\u5e76\u8f93\u51fa\u5230\u7ec8\u7aef\u3002\n    \u6b65\u9aa4\uff1a\n        1.\u5bfc\u5305\uff1b\n        2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n        3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u8ba2\u9605\u65b9\uff1b\n            3-2.\u5904\u7406\u8ba2\u9605\u5230\u7684\u6d88\u606f\u3002\n        4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n        5.\u91ca\u653e\u8d44\u6e90\u3002\n\"\"\"\n\n# 1.\u5bfc\u5305\uff1b\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\n# 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('minimal_subscriber_py')\n        # 3-1.\u521b\u5efa\u8ba2\u9605\u65b9\uff1b\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  \n\n    # 3-2.\u5904\u7406\u8ba2\u9605\u5230\u7684\u6d88\u606f\u3002\n    def listener_callback(self, msg):\n        self.get_logger().info('\u8ba2\u9605\u7684\u6d88\u606f: \"%s\"' % msg.data)\n\n\ndef main(args=None):\n    # 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclpy.init(args=args)\n\n    # 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n    minimal_subscriber = MinimalSubscriber()\n    rclpy.spin(minimal_subscriber)\n\n    # 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-python-shi-73b028-yuan-sheng-xiao-606f29/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<p>\u5728Python\u529f\u80fd\u5305\u4e2d\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3b\u8981\u5173\u6ce8package.xml\u4e0esetup.py\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-python-shi-73b028-yuan-sheng-xiao-606f29/#1packagexml","title":"1.package.xml","text":"<p>\u5728\u521b\u5efa\u529f\u80fd\u5305\u65f6\uff0c\u6240\u4f9d\u8d56\u7684\u529f\u80fd\u5305\u5df2\u7ecf\u81ea\u52a8\u914d\u7f6e\u4e86\uff0c\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;depend&gt;rclcpp&lt;/depend&gt;\n&lt;depend&gt;std_msgs&lt;/depend&gt;\n&lt;depend&gt;base_interfaces_demo&lt;/depend&gt;\n</code></pre> <p>\u9700\u8981\u8bf4\u660e\u7684\u662f\u548c\u4e0a\u4e00\u8282C++\u5b9e\u73b0\u4e00\u6837<code>&lt;depend&gt;base_interfaces_demo&lt;/depend&gt;</code>\u5728\u672c\u6848\u4f8b\u4e2d\u4e0d\u662f\u5fc5\u987b\u7684\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-python-shi-73b028-yuan-sheng-xiao-606f29/#2setuppy","title":"2.setup.py","text":"<p><code>entry_points</code>\u5b57\u6bb5\u7684<code>console_scripts</code>\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>entry_points={\n    'console_scripts': [\n        'demo01_talker_str_py = py01_topic.demo01_talker_str_py:main',\n        'demo02_listener_str_py = py01_topic.demo02_listener_str_py:main'\n    ],\n},\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-python-shi-73b028-yuan-sheng-xiao-606f29/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select py01_topic\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/223-hua-ti-tong-xin-python-shi-73b028-yuan-sheng-xiao-606f29/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\uff0c\u7ec8\u7aef1\u6267\u884c\u53d1\u5e03\u7a0b\u5e8f\uff0c\u7ec8\u7aef2\u6267\u884c\u8ba2\u9605\u7a0b\u5e8f\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run py01_topic demo01_talker_str_py\n</code></pre> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash \nros2 run py01_topic demo02_listener_str_py\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6848\u4f8b1\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/224-hua-ti-tong-xin-python-shi-xian/","title":"224 hua ti tong xin python shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/224-hua-ti-tong-xin-python-shi-xian/#226-python","title":"2.2.6 \u8bdd\u9898\u901a\u4fe1\u4e4b\u81ea\u5b9a\u4e49\u6d88\u606f\uff08Python\uff09","text":"<p>\u51c6\u5907</p> <p>Python\u6587\u4ef6\u4e2d\u5bfc\u5165\u81ea\u5b9a\u4e49\u6d88\u606f\u76f8\u5173\u7684\u5305\u65f6\uff0c\u4e3a\u4e86\u65b9\u4fbf\u4f7f\u7528\uff0c\u53ef\u4ee5\u914d\u7f6eVSCode\u4e2dsettings.json\u6587\u4ef6\uff0c\u5728\u6587\u4ef6\u4e2d\u7684python.autoComplete.extraPaths\u548cpython.analysis.extraPaths\u5c5e\u6027\u4e0b\u6dfb\u52a0\u4e00\u884c\uff1a\"${workspaceFolder}/install/base_interfaces_demo/local/lib/python3.10/dist-packages\"</p> <p>\u6dfb\u52a0\u5b8c\u6bd5\u540e\uff0c\u4ee3\u7801\u53ef\u4ee5\u9ad8\u4eae\u663e\u793a\u4e14\u53ef\u4ee5\u81ea\u52a8\u8865\u9f50\uff0c\u5176\u4ed6\u63a5\u53e3\u6587\u4ef6\u6216\u63a5\u53e3\u5305\u7684\u4f7f\u7528\u4e5f\u4e0e\u6b64\u540c\u7406\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/224-hua-ti-tong-xin-python-shi-xian/#1","title":"1.\u53d1\u5e03\u65b9\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305py01_topic\u7684py01_topic\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaPython\u6587\u4ef6demo03_talker_stu_py.py\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>\"\"\"  \n    \u9700\u6c42\uff1a\u4ee5\u67d0\u4e2a\u56fa\u5b9a\u9891\u7387\u53d1\u9001\u6587\u672c\u5b66\u751f\u4fe1\u606f\uff0c\u5305\u542b\u5b66\u751f\u7684\u59d3\u540d\u3001\u5e74\u9f84\u3001\u8eab\u9ad8\u7b49\u6570\u636e\u3002\n\"\"\"\n# 1.\u5bfc\u5305\uff1b\nimport rclpy\nfrom rclpy.node import Node\nfrom base_interfaces_demo.msg import Student\n\n# 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('stu_publisher_py')\n        # 3-1.\u521b\u5efa\u53d1\u5e03\u65b9\uff1b\n        self.publisher_ = self.create_publisher(Student, 'topic_stu', 10)\n        # 3-2.\u521b\u5efa\u5b9a\u65f6\u5668\uff1b\n        timer_period = 0.5 \n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    # 3-3.\u7ec4\u7ec7\u6d88\u606f\u5e76\u53d1\u5e03\u3002\n    def timer_callback(self):\n        stu = Student()\n        stu.name = \"\u674e\u56db\"\n        stu.age = self.i\n        stu.height = 1.70\n        self.publisher_.publish(stu)\n        self.get_logger().info('\u53d1\u5e03\u7684\u5b66\u751f\u6d88\u606f(py): name=%s,age=%d,height=%.2f' % (stu.name, stu.age, stu.height))\n        self.i += 1\n\n\ndef main(args=None):\n    # 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclpy.init(args=args)\n    # 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n    # 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/224-hua-ti-tong-xin-python-shi-xian/#2","title":"2.\u8ba2\u9605\u65b9\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305py01_topic\u7684py01_topic\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaPython\u6587\u4ef6demo04_listener_stu_py.py\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>\"\"\"  \n    \u9700\u6c42\uff1a\u8ba2\u9605\u53d1\u5e03\u65b9\u53d1\u5e03\u7684\u5b66\u751f\u6d88\u606f\uff0c\u5e76\u8f93\u51fa\u5230\u7ec8\u7aef\u3002\n\"\"\"\n\n# 1.\u5bfc\u5305\uff1b\nimport rclpy\nfrom rclpy.node import Node\nfrom base_interfaces_demo.msg import Student\n\n# 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('stu_subscriber_py')\n        # 3-1.\u521b\u5efa\u8ba2\u9605\u65b9\uff1b\n        self.subscription = self.create_subscription(\n            Student,\n            'topic_stu',\n            self.listener_callback,\n            10)\n        self.subscription  \n\n    # 3-2.\u5904\u7406\u8ba2\u9605\u5230\u7684\u6d88\u606f\u3002\n    def listener_callback(self, stu):\n        self.get_logger().info('\u8ba2\u9605\u7684\u6d88\u606f(py): name=%s,age=%d,height=%.2f' % (stu.name, stu.age, stu.height))\n\n\ndef main(args=None):\n    # 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclpy.init(args=args)\n\n    # 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n    minimal_subscriber = MinimalSubscriber()\n    rclpy.spin(minimal_subscriber)\n\n    # 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/224-hua-ti-tong-xin-python-shi-xian/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<p>package.xml\u65e0\u9700\u4fee\u6539\uff0c\u9700\u8981\u4fee\u6539setup.py\u6587\u4ef6\uff0c<code>entry_points</code>\u5b57\u6bb5\u7684<code>console_scripts</code>\u4e2d\u4fee\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>entry_points={\n    'console_scripts': [\n        'demo01_talker_str_py = py01_topic.demo01_talker_str_py:main',\n        'demo02_listener_str_py = py01_topic.demo02_listener_str_py:main',\n        'demo03_talker_stu_py = py01_topic.demo03_talker_stu_py:main',\n        'demo04_listener_stu_py = py01_topic.demo04_listener_stu_py:main'\n    ],\n},\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/224-hua-ti-tong-xin-python-shi-xian/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select py01_topic\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/22-hua-ti-tong-xin/224-hua-ti-tong-xin-python-shi-xian/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\uff0c\u7ec8\u7aef1\u6267\u884c\u53d1\u5e03\u7a0b\u5e8f\uff0c\u7ec8\u7aef2\u6267\u884c\u8ba2\u9605\u7a0b\u5e8f\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run py01_topic demo03_talker_stu_py\n</code></pre> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash \nros2 run py01_topic demo04_listener_stu_py\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6848\u4f8b2\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/231-fu-wu-tong-xin-li-lun-mo-xing/","title":"231 fu wu tong xin li lun mo xing","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/231-fu-wu-tong-xin-li-lun-mo-xing/#231","title":"2.3.1 \u6848\u4f8b\u4ee5\u53ca\u6848\u4f8b\u5206\u6790","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/231-fu-wu-tong-xin-li-lun-mo-xing/#1","title":"1.\u6848\u4f8b\u9700\u6c42","text":"<p>\u9700\u6c42\uff1a\u7f16\u5199\u670d\u52a1\u901a\u4fe1\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u63d0\u4ea4\u4e24\u4e2a\u6574\u6570\u5230\u670d\u52a1\u7aef\uff0c\u670d\u52a1\u7aef\u63a5\u6536\u8bf7\u6c42\u5e76\u89e3\u6790\u4e24\u4e2a\u6574\u6570\u6c42\u548c\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u54cd\u5e94\u56de\u5ba2\u6237\u7aef\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/231-fu-wu-tong-xin-li-lun-mo-xing/#2","title":"2.\u6848\u4f8b\u5206\u6790","text":"<p>\u5728\u4e0a\u8ff0\u6848\u4f8b\u4e2d\uff0c\u9700\u8981\u5173\u6ce8\u7684\u8981\u7d20\u6709\u4e09\u4e2a\uff1a</p> <ol> <li>\u5ba2\u6237\u7aef\uff1b</li> <li>\u670d\u52a1\u7aef\uff1b</li> <li>\u6d88\u606f\u8f7d\u4f53\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/231-fu-wu-tong-xin-li-lun-mo-xing/#3","title":"3.\u6d41\u7a0b\u7b80\u4ecb","text":"<p>\u6848\u4f8b\u5b9e\u73b0\u524d\u9700\u8981\u5148\u81ea\u5b9a\u4e49\u670d\u52a1\u63a5\u53e3\uff0c\u63a5\u53e3\u51c6\u5907\u5b8c\u6bd5\u540e\uff0c\u670d\u52a1\u5b9e\u73b0\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u5199\u670d\u52a1\u7aef\u5b9e\u73b0\uff1b</li> <li>\u7f16\u5199\u5ba2\u6237\u7aef\u5b9e\u73b0\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol> <p>\u6848\u4f8b\u6211\u4eec\u4f1a\u91c7\u7528C++\u548cPython\u5206\u522b\u5b9e\u73b0\uff0c\u4e8c\u8005\u90fd\u9075\u5faa\u4e0a\u8ff0\u5b9e\u73b0\u6d41\u7a0b\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/231-fu-wu-tong-xin-li-lun-mo-xing/#4","title":"4.\u51c6\u5907\u5de5\u4f5c","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u7684src\u76ee\u5f55\uff0c\u8c03\u7528\u5982\u4e0b\u4e24\u6761\u547d\u4ee4\u5206\u522b\u521b\u5efaC++\u529f\u80fd\u5305\u548cPython\u529f\u80fd\u5305\u3002</p> <pre><code>ros2 pkg create cpp02_service --build-type ament_cmake --dependencies rclcpp base_interfaces_demo\nros2 pkg create py02_service --build-type ament_python --dependencies rclpy base_interfaces_demo\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/232-hua-ti-tong-xin-jie-kou-xiao-xi/","title":"232 hua ti tong xin jie kou xiao xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/232-hua-ti-tong-xin-jie-kou-xiao-xi/#232","title":"2.3.2 \u670d\u52a1\u901a\u4fe1\u63a5\u53e3\u6d88\u606f","text":"<p>\u5b9a\u4e49\u670d\u52a1\u63a5\u53e3\u6d88\u606f\u4e0e\u5b9a\u4e49\u8bdd\u9898\u63a5\u53e3\u6d88\u606f\u6d41\u7a0b\u7c7b\u4f3c\uff0c\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u521b\u5efa\u5e76\u7f16\u8f91 <code>.srv</code>\u6587\u4ef6\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6d4b\u8bd5\u3002</li> </ol> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u53c2\u8003\u6848\u4f8b\u7f16\u5199\u4e00\u4e2asrv\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u4e2d\u5305\u542b\u8bf7\u6c42\u6570\u636e\\(\u4e24\u4e2a\u6574\u578b\u5b57\u6bb5\\)\u4e0e\u54cd\u5e94\u6570\u636e\\(\u4e00\u4e2a\u6574\u578b\u5b57\u6bb5\\)\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/232-hua-ti-tong-xin-jie-kou-xiao-xi/#1-srv","title":"1.\u521b\u5efa\u5e76\u7f16\u8f91 .srv \u6587\u4ef6","text":"<p>\u529f\u80fd\u5305base_interfaces_demo\u4e0b\u65b0\u5efasrv\u6587\u4ef6\u5939\uff0csrv\u6587\u4ef6\u5939\u4e0b\u65b0\u5efaAddInts.srv\u6587\u4ef6\uff0c\u6587\u4ef6\u4e2d\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>int32 num1\nint32 num2\n---\nint32 sum\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/232-hua-ti-tong-xin-jie-kou-xiao-xi/#2","title":"2.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/232-hua-ti-tong-xin-jie-kou-xiao-xi/#1packagexml","title":"1.package.xml \u6587\u4ef6","text":"<p>srv\u6587\u4ef6\u4e0emsg\u6587\u4ef6\u7684\u5305\u4f9d\u8d56\u4e00\u81f4\uff0c\u5982\u679c\u4f60\u662f\u65b0\u5efa\u7684\u529f\u80fd\u5305\u6dfb\u52a0srv\u6587\u4ef6\uff0c\u90a3\u4e48\u76f4\u63a5\u53c2\u8003\u5b9a\u4e49msg\u6587\u4ef6\u65f6package.xml \u914d\u7f6e\u5373\u53ef\u3002\u7531\u4e8e\u6211\u4eec\u4f7f\u7528\u7684\u662fbase_interfaces_demo\u8be5\u5305\u5df2\u7ecf\u4e3amsg\u6587\u4ef6\u914d\u7f6e\u8fc7\u4e86\u4f9d\u8d56\u5305\uff0c\u6240\u4ee5package.xml\u4e0d\u9700\u8981\u505a\u4fee\u6539\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/232-hua-ti-tong-xin-jie-kou-xiao-xi/#2cmakeliststxt","title":"2.CMakeLists.txt \u6587\u4ef6","text":"<p>\u5982\u679c\u662f\u65b0\u5efa\u7684\u529f\u80fd\u5305\uff0c\u4e0e\u4e4b\u524d\u5b9a\u4e49msg\u6587\u4ef6\u540c\u7406\uff0c\u4e3a\u4e86\u5c06<code>.srv</code>\u6587\u4ef6\u8f6c\u6362\u6210\u5bf9\u5e94\u7684C++\u548cPython\u4ee3\u7801\uff0c\u8fd8\u9700\u8981\u5728CMakeLists.txt\u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a</p> <pre><code>find_package(rosidl_default_generators REQUIRED)\n\nrosidl_generate_interfaces(${PROJECT_NAME}\n  \"srv/AddInts.srv\"\n)\n</code></pre> <p>\u4e0d\u8fc7\uff0c\u6211\u4eec\u5f53\u524d\u4f7f\u7528\u7684base_interfaces_demo\u5305\uff0c\u90a3\u4e48\u4f60\u53ea\u9700\u8981\u4fee\u6539rosidl_generate_interfaces\u51fd\u6570\u5373\u53ef\uff0c\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>rosidl_generate_interfaces(${PROJECT_NAME}\n  \"msg/Student.msg\"\n  \"srv/AddInts.srv\"\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/232-hua-ti-tong-xin-jie-kou-xiao-xi/#3","title":"3.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select base_interfaces_demo\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/232-hua-ti-tong-xin-jie-kou-xiao-xi/#4","title":"4.\u6d4b\u8bd5","text":"<p>\u7f16\u8bd1\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u7684 install \u76ee\u5f55\u4e0b\u5c06\u751f\u6210<code>AddInts.srv</code>\u6587\u4ef6\u5bf9\u5e94\u7684C++\u548cPython\u6587\u4ef6\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\uff0c\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u6587\u4ef6\u5b9a\u4e49\u4ee5\u53ca\u7f16\u8bd1\u662f\u5426\u6b63\u5e38\uff1a</p> <pre><code>. install/setup.bash\nros2 interface show base_interfaces_demo/srv/AddInts\n</code></pre> <p>\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u7ec8\u7aef\u5c06\u4f1a\u8f93\u51fa\u4e0e<code>AddInts.srv</code>\u6587\u4ef6\u4e00\u81f4\u7684\u5185\u5bb9\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/233-fu-wu-tong-xin-c-shi-xian/","title":"233 fu wu tong xin c shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/233-fu-wu-tong-xin-c-shi-xian/#233-c","title":"2.3.3 \u670d\u52a1\u901a\u4fe1\uff08C++\uff09","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/233-fu-wu-tong-xin-c-shi-xian/#1","title":"1.\u670d\u52a1\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp02_service\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6demo01_server.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n  \u9700\u6c42\uff1a\u7f16\u5199\u670d\u52a1\u7aef\uff0c\u63a5\u6536\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\uff0c\u63d0\u53d6\u5176\u4e2d\u4e24\u4e2a\u6574\u578b\u6570\u636e\uff0c\u76f8\u52a0\u540e\u5c06\u7ed3\u679c\u54cd\u5e94\u56de\u5ba2\u6237\u7aef\u3002\n  \u6b65\u9aa4\uff1a\n    1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n    2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n      3-1.\u521b\u5efa\u670d\u52a1\u7aef\uff1b\n      3-2.\u5904\u7406\u8bf7\u6c42\u6570\u636e\u5e76\u54cd\u5e94\u7ed3\u679c\u3002\n    4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n    5.\u91ca\u653e\u8d44\u6e90\u3002\n*/\n\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n#include \"base_interfaces_demo/srv/add_ints.hpp\"\n\nusing base_interfaces_demo::srv::AddInts;\n\nusing std::placeholders::_1;\nusing std::placeholders::_2;\n\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalService: public rclcpp::Node{\n  public:\n    MinimalService():Node(\"minimal_service\"){\n      // 3-1.\u521b\u5efa\u670d\u52a1\u7aef\uff1b\n      server = this-&gt;create_service&lt;AddInts&gt;(\"add_ints\",std::bind(&amp;MinimalService::add, this, _1, _2));\n      RCLCPP_INFO(this-&gt;get_logger(),\"add_ints \u670d\u52a1\u7aef\u542f\u52a8\u5b8c\u6bd5\uff0c\u7b49\u5f85\u8bf7\u6c42\u63d0\u4ea4...\");\n    }\n  private:\n    rclcpp::Service&lt;AddInts&gt;::SharedPtr server;\n    // 3-2.\u5904\u7406\u8bf7\u6c42\u6570\u636e\u5e76\u54cd\u5e94\u7ed3\u679c\u3002\n    void add(const AddInts::Request::SharedPtr req,const AddInts::Response::SharedPtr res){\n      res-&gt;sum = req-&gt;num1 + req-&gt;num2;\n      RCLCPP_INFO(this-&gt;get_logger(),\"\u8bf7\u6c42\u6570\u636e:(%d,%d),\u54cd\u5e94\u7ed3\u679c:%d\", req-&gt;num1, req-&gt;num2, res-&gt;sum);\n    }\n};\n\nint main(int argc, char const *argv[])\n{\n  // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n  rclcpp::init(argc,argv);\n\n  // 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n  auto server = std::make_shared&lt;MinimalService&gt;();\n  rclcpp::spin(server);\n\n  // 5.\u91ca\u653e\u8d44\u6e90\u3002\n  rclcpp::shutdown();\n  return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/233-fu-wu-tong-xin-c-shi-xian/#2","title":"2.\u5ba2\u6237\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp02_service\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6demo02_client.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n  \u9700\u6c42\uff1a\u7f16\u5199\u5ba2\u6237\u7aef\uff0c\u53d1\u9001\u4e24\u4e2a\u6574\u578b\u53d8\u91cf\u4f5c\u4e3a\u8bf7\u6c42\u6570\u636e\uff0c\u5e76\u5904\u7406\u54cd\u5e94\u7ed3\u679c\u3002\n  \u6b65\u9aa4\uff1a\n    1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n    2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n      3-1.\u521b\u5efa\u5ba2\u6237\u7aef\uff1b\n      3-2.\u7b49\u5f85\u670d\u52a1\u8fde\u63a5\uff1b\n      3-3.\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e\u5e76\u53d1\u9001\uff1b\n    4.\u521b\u5efa\u5bf9\u8c61\u6307\u9488\u8c03\u7528\u5176\u529f\u80fd,\u5e76\u5904\u7406\u54cd\u5e94\uff1b\n    5.\u91ca\u653e\u8d44\u6e90\u3002\n\n*/\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n#include \"base_interfaces_demo/srv/add_ints.hpp\"\n\nusing base_interfaces_demo::srv::AddInts;\nusing namespace std::chrono_literals;\n\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalClient: public rclcpp::Node{\n  public:\n    MinimalClient():Node(\"minimal_client\"){\n      // 3-1.\u521b\u5efa\u5ba2\u6237\u7aef\uff1b\n      client = this-&gt;create_client&lt;AddInts&gt;(\"add_ints\");\n      RCLCPP_INFO(this-&gt;get_logger(),\"\u5ba2\u6237\u7aef\u521b\u5efa\uff0c\u7b49\u5f85\u8fde\u63a5\u670d\u52a1\u7aef\uff01\");\n    }\n    // 3-2.\u7b49\u5f85\u670d\u52a1\u8fde\u63a5\uff1b\n    bool connect_server(){\n      while (!client-&gt;wait_for_service(1s))\n      {\n        if (!rclcpp::ok())\n        {\n          RCLCPP_INFO(rclcpp::get_logger(\"rclcpp\"),\"\u5f3a\u5236\u9000\u51fa\uff01\");\n          return false;\n        }\n\n        RCLCPP_INFO(this-&gt;get_logger(),\"\u670d\u52a1\u8fde\u63a5\u4e2d\uff0c\u8bf7\u7a0d\u5019...\");\n      }\n      return true;\n    }\n    // 3-3.\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e\u5e76\u53d1\u9001\uff1b\n    rclcpp::Client&lt;AddInts&gt;::FutureAndRequestId send_request(int32_t num1, int32_t num2){\n      auto request = std::make_shared&lt;AddInts::Request&gt;();\n      request-&gt;num1 = num1;\n      request-&gt;num2 = num2;\n      return client-&gt;async_send_request(request);\n    }\n\n\n  private:\n    rclcpp::Client&lt;AddInts&gt;::SharedPtr client;\n};\n\nint main(int argc, char ** argv)\n{\n  if (argc != 3){\n    RCLCPP_INFO(rclcpp::get_logger(\"rclcpp\"),\"\u8bf7\u63d0\u4ea4\u4e24\u4e2a\u6574\u578b\u6570\u636e\uff01\");\n    return 1;\n  }\n\n  // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n  rclcpp::init(argc,argv);\n\n  // 4.\u521b\u5efa\u5bf9\u8c61\u6307\u9488\u5e76\u8c03\u7528\u5176\u529f\u80fd\uff1b\n  auto client = std::make_shared&lt;MinimalClient&gt;();\n  bool flag = client-&gt;connect_server();\n  if (!flag)\n  {\n    RCLCPP_INFO(rclcpp::get_logger(\"rclcpp\"),\"\u670d\u52a1\u8fde\u63a5\u5931\u8d25\uff01\");\n    return 0;\n  }\n\n  auto response = client-&gt;send_request(atoi(argv[1]),atoi(argv[2]));\n\n  // \u5904\u7406\u54cd\u5e94\n  if (rclcpp::spin_until_future_complete(client,response) == rclcpp::FutureReturnCode::SUCCESS)\n  {\n    RCLCPP_INFO(client-&gt;get_logger(),\"\u8bf7\u6c42\u6b63\u5e38\u5904\u7406\");\n    RCLCPP_INFO(client-&gt;get_logger(),\"\u54cd\u5e94\u7ed3\u679c:%d!\", response.get()-&gt;sum);\n\n  } else {\n    RCLCPP_INFO(client-&gt;get_logger(),\"\u8bf7\u6c42\u5f02\u5e38\");\n  }\n\n  // 5.\u91ca\u653e\u8d44\u6e90\u3002\n  rclcpp::shutdown();\n  return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/233-fu-wu-tong-xin-c-shi-xian/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/233-fu-wu-tong-xin-c-shi-xian/#1packagesxml","title":"1.packages.xml","text":"<p>\u5728\u521b\u5efa\u529f\u80fd\u5305\u65f6\uff0c\u6240\u4f9d\u8d56\u7684\u529f\u80fd\u5305\u5df2\u7ecf\u81ea\u52a8\u914d\u7f6e\u4e86\uff0c\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;depend&gt;rclcpp&lt;/depend&gt;\n&lt;depend&gt;base_interfaces_demo&lt;/depend&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/233-fu-wu-tong-xin-c-shi-xian/#2cmakeliststxt","title":"2.CMakeLists.txt","text":"<p>CMakeLists.txt \u4e2d\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u7a0b\u5e8f\u6838\u5fc3\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>find_package(ament_cmake REQUIRED)\nfind_package(rclcpp REQUIRED)\nfind_package(base_interfaces_demo REQUIRED)\n\nadd_executable(demo01_server src/demo01_server.cpp)\nament_target_dependencies(\n  demo01_server\n  \"rclcpp\"\n  \"base_interfaces_demo\"\n)\nadd_executable(demo02_client src/demo02_client.cpp)\nament_target_dependencies(\n  demo02_client\n  \"rclcpp\"\n  \"base_interfaces_demo\"\n)\n\ninstall(TARGETS \n  demo01_server\n  demo02_client\n  DESTINATION lib/${PROJECT_NAME})\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/233-fu-wu-tong-xin-c-shi-xian/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select cpp02_service\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/233-fu-wu-tong-xin-c-shi-xian/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\uff0c\u7ec8\u7aef1\u6267\u884c\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u7ec8\u7aef2\u6267\u884c\u5ba2\u6237\u7aef\u7a0b\u5e8f\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run cpp02_service demo01_server\n</code></pre> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run cpp02_service demo02_client 100 200\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6848\u4f8b\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/234-fu-wu-tong-xin-python-shi-xian/","title":"234 fu wu tong xin python shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/234-fu-wu-tong-xin-python-shi-xian/#234-python","title":"2.3.4 \u670d\u52a1\u901a\u4fe1\uff08Python\uff09","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/234-fu-wu-tong-xin-python-shi-xian/#1","title":"1.\u670d\u52a1\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305py02_service\u7684py02_service\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaPython\u6587\u4ef6demo01_server_py.py\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>\"\"\"  \n    \u9700\u6c42\uff1a\u7f16\u5199\u670d\u52a1\u7aef\uff0c\u63a5\u6536\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\uff0c\u63d0\u53d6\u5176\u4e2d\u4e24\u4e2a\u6574\u578b\u6570\u636e\uff0c\u76f8\u52a0\u540e\u5c06\u7ed3\u679c\u54cd\u5e94\u56de\u5ba2\u6237\u7aef\u3002\n    \u6b65\u9aa4\uff1a\n        1.\u5bfc\u5305\uff1b\n        2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n        3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u670d\u52a1\u7aef\uff1b\n            3-2.\u5904\u7406\u8bf7\u6c42\u6570\u636e\u5e76\u54cd\u5e94\u7ed3\u679c\u3002\n        4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n        5.\u91ca\u653e\u8d44\u6e90\u3002\n\n\"\"\"\n\n# 1.\u5bfc\u5305\uff1b\nimport rclpy\nfrom rclpy.node import Node\nfrom base_interfaces_demo.srv import AddInts\n\n# 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalService(Node):\n\n    def __init__(self):\n        super().__init__('minimal_service_py')\n        # 3-1.\u521b\u5efa\u670d\u52a1\u7aef\uff1b\n        self.srv = self.create_service(AddInts, 'add_ints', self.add_two_ints_callback)\n        self.get_logger().info(\"\u670d\u52a1\u7aef\u542f\u52a8\uff01\")\n\n    # 3-2.\u5904\u7406\u8bf7\u6c42\u6570\u636e\u5e76\u54cd\u5e94\u7ed3\u679c\u3002\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.num1 + request.num2\n        self.get_logger().info('\u8bf7\u6c42\u6570\u636e:(%d,%d),\u54cd\u5e94\u7ed3\u679c:%d' % (request.num1, request.num2, response.sum))\n        return response\n\n\ndef main():\n    # 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclpy.init()\n    # 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n    minimal_service = MinimalService()\n    rclpy.spin(minimal_service)\n    # 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/234-fu-wu-tong-xin-python-shi-xian/#2","title":"2.\u5ba2\u6237\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305py02_service\u7684py02_service\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaPython\u6587\u4ef6demo02_client_py.py\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>\"\"\"  \n    \u9700\u6c42\uff1a\u7f16\u5199\u5ba2\u6237\u7aef\uff0c\u53d1\u9001\u4e24\u4e2a\u6574\u578b\u53d8\u91cf\u4f5c\u4e3a\u8bf7\u6c42\u6570\u636e\uff0c\u5e76\u5904\u7406\u54cd\u5e94\u7ed3\u679c\u3002\n    \u6b65\u9aa4\uff1a\n        1.\u5bfc\u5305\uff1b\n        2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n        3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u5ba2\u6237\u7aef\uff1b\n            3-2.\u7b49\u5f85\u670d\u52a1\u8fde\u63a5\uff1b\n            3-3.\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e\u5e76\u53d1\u9001\uff1b\n        4.\u521b\u5efa\u5bf9\u8c61\u8c03\u7528\u5176\u529f\u80fd\uff0c\u5904\u7406\u54cd\u5e94\u7ed3\u679c\uff1b\n        5.\u91ca\u653e\u8d44\u6e90\u3002\n\n\"\"\"\n# 1.\u5bfc\u5305\uff1b\nimport sys\nimport rclpy\nfrom rclpy.node import Node\nfrom base_interfaces_demo.srv import AddInts\n\n# 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalClient(Node):\n\n    def __init__(self):\n        super().__init__('minimal_client_py')\n        # 3-1.\u521b\u5efa\u5ba2\u6237\u7aef\uff1b\n        self.cli = self.create_client(AddInts, 'add_ints')\n        # 3-2.\u7b49\u5f85\u670d\u52a1\u8fde\u63a5\uff1b\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('\u670d\u52a1\u8fde\u63a5\u4e2d\uff0c\u8bf7\u7a0d\u5019...')\n        self.req = AddInts.Request()\n\n    # 3-3.\u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e\u5e76\u53d1\u9001\uff1b\n    def send_request(self):\n        self.req.num1 = int(sys.argv[1])\n        self.req.num2 = int(sys.argv[2])\n        self.future = self.cli.call_async(self.req)\n\n\ndef main():\n    # 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclpy.init()\n\n    # 4.\u521b\u5efa\u5bf9\u8c61\u5e76\u8c03\u7528\u5176\u529f\u80fd\uff1b\n    minimal_client = MinimalClient()\n    minimal_client.send_request()\n\n    # \u5904\u7406\u54cd\u5e94\n    rclpy.spin_until_future_complete(minimal_client,minimal_client.future)\n    try:\n        response = minimal_client.future.result()\n    except Exception as e:\n        minimal_client.get_logger().info(\n            '\u670d\u52a1\u8bf7\u6c42\u5931\u8d25\uff1a %r' % (e,))\n    else:\n        minimal_client.get_logger().info(\n            '\u54cd\u5e94\u7ed3\u679c\uff1a %d + %d = %d' %\n            (minimal_client.req.num1, minimal_client.req.num2, response.sum))\n\n    # 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/234-fu-wu-tong-xin-python-shi-xian/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/234-fu-wu-tong-xin-python-shi-xian/#1packagexml","title":"1.package.xml","text":"<p>\u5728\u521b\u5efa\u529f\u80fd\u5305\u65f6\uff0c\u6240\u4f9d\u8d56\u7684\u529f\u80fd\u5305\u5df2\u7ecf\u81ea\u52a8\u914d\u7f6e\u4e86\uff0c\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;depend&gt;rclpy&lt;/depend&gt;\n&lt;depend&gt;base_interfaces_demo&lt;/depend&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/234-fu-wu-tong-xin-python-shi-xian/#2setuppy","title":"2.setup.py","text":"<p><code>entry_points</code>\u5b57\u6bb5\u7684<code>console_scripts</code>\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>entry_points={\n    'console_scripts': [\n        'demo01_server_py = py02_service.demo01_server_py:main',\n        'demo02_client_py = py02_service.demo02_client_py:main'\n    ],\n},\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/234-fu-wu-tong-xin-python-shi-xian/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select py02_service\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/23-fu-wu-tong-xin/234-fu-wu-tong-xin-python-shi-xian/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\uff0c\u7ec8\u7aef1\u6267\u884c\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u7ec8\u7aef2\u6267\u884c\u5ba2\u6237\u7aef\u7a0b\u5e8f\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run py02_service demo01_server_py\n</code></pre> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run py02_service demo02_client_py 100 200\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6848\u4f8b\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/241-dong-zuo-tong-xin-li-lun-mo-xing/","title":"241 dong zuo tong xin li lun mo xing","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/241-dong-zuo-tong-xin-li-lun-mo-xing/#241","title":"2.4.1 \u6848\u4f8b\u4ee5\u53ca\u6848\u4f8b\u5206\u6790","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/241-dong-zuo-tong-xin-li-lun-mo-xing/#1","title":"1.\u6848\u4f8b\u9700\u6c42","text":"<p>\u9700\u6c42\uff1a\u7f16\u5199\u52a8\u4f5c\u901a\u4fe1\uff0c\u52a8\u4f5c\u5ba2\u6237\u7aef\u63d0\u4ea4\u4e00\u4e2a\u6574\u578b\u6570\u636eN\uff0c\u52a8\u4f5c\u670d\u52a1\u7aef\u63a5\u6536\u8bf7\u6c42\u6570\u636e\u5e76\u7d2f\u52a01-N\u4e4b\u95f4\u7684\u6240\u6709\u6574\u6570\uff0c\u5c06\u6700\u7ec8\u7ed3\u679c\u8fd4\u56de\u7ed9\u52a8\u4f5c\u5ba2\u6237\u7aef\uff0c\u4e14\u6bcf\u7d2f\u52a0\u4e00\u6b21\u90fd\u9700\u8981\u8ba1\u7b97\u5f53\u524d\u8fd0\u7b97\u8fdb\u5ea6\u5e76\u53cd\u9988\u7ed9\u52a8\u4f5c\u5ba2\u6237\u7aef\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/241-dong-zuo-tong-xin-li-lun-mo-xing/#2","title":"2.\u6848\u4f8b\u5206\u6790","text":"<p>\u5728\u4e0a\u8ff0\u6848\u4f8b\u4e2d\uff0c\u9700\u8981\u5173\u6ce8\u7684\u8981\u7d20\u6709\u4e09\u4e2a\uff1a</p> <ol> <li>\u52a8\u4f5c\u5ba2\u6237\u7aef\uff1b</li> <li>\u52a8\u4f5c\u670d\u52a1\u7aef\uff1b</li> <li>\u6d88\u606f\u8f7d\u4f53\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/241-dong-zuo-tong-xin-li-lun-mo-xing/#3","title":"3.\u6d41\u7a0b\u7b80\u4ecb","text":"<p>\u6848\u4f8b\u5b9e\u73b0\u524d\u9700\u8981\u5148\u81ea\u5b9a\u4e49\u52a8\u4f5c\u63a5\u53e3\uff0c\u63a5\u53e3\u51c6\u5907\u5b8c\u6bd5\u540e\uff0c\u52a8\u4f5c\u901a\u4fe1\u5b9e\u73b0\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u5199\u52a8\u4f5c\u670d\u52a1\u7aef\u5b9e\u73b0\uff1b</li> <li>\u7f16\u5199\u52a8\u4f5c\u5ba2\u6237\u7aef\u5b9e\u73b0\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol> <p>\u6848\u4f8b\u6211\u4eec\u4f1a\u91c7\u7528C++\u548cPython\u5206\u522b\u5b9e\u73b0\uff0c\u4e8c\u8005\u90fd\u9075\u5faa\u4e0a\u8ff0\u5b9e\u73b0\u6d41\u7a0b\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/241-dong-zuo-tong-xin-li-lun-mo-xing/#4","title":"4.\u51c6\u5907\u5de5\u4f5c","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u7684src\u76ee\u5f55\uff0c\u8c03\u7528\u5982\u4e0b\u4e24\u6761\u547d\u4ee4\u5206\u522b\u521b\u5efaC++\u529f\u80fd\u5305\u548cPython\u529f\u80fd\u5305\u3002</p> <pre><code>ros2 pkg create cpp03_action --build-type ament_cmake --dependencies rclcpp rclcpp_action base_interfaces_demo\nros2 pkg create py03_action --build-type ament_python --dependencies rclpy base_interfaces_demo\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/242-dong-zuo-tong-xin-jie-kou-xiao-xi/","title":"242 dong zuo tong xin jie kou xiao xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/242-dong-zuo-tong-xin-jie-kou-xiao-xi/#242","title":"2.4.2 \u52a8\u4f5c\u901a\u4fe1\u63a5\u53e3\u6d88\u606f","text":"<p>\u5b9a\u4e49\u52a8\u4f5c\u63a5\u53e3\u6d88\u606f\u4e0e\u5b9a\u4e49\u8bdd\u9898\u6216\u670d\u52a1\u63a5\u53e3\u6d88\u606f\u6d41\u7a0b\u7c7b\u4f3c\uff0c\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u521b\u5efa\u5e76\u7f16\u8f91<code>.action</code>\u6587\u4ef6\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6d4b\u8bd5\u3002</li> </ol> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u53c2\u8003\u6848\u4f8b\u7f16\u5199\u4e00\u4e2aaction\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u4e2d\u5305\u542b\u8bf7\u6c42\u6570\u636e\\(\u4e00\u4e2a\u6574\u578b\u5b57\u6bb5\\)\u3001\u54cd\u5e94\u6570\u636e\\(\u4e00\u4e2a\u6574\u578b\u5b57\u6bb5\\)\u548c\u8fde\u7eed\u53cd\u9988\u6570\u636e\\(\u4e00\u4e2a\u6d6e\u70b9\u578b\u5b57\u6bb5\\)\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/242-dong-zuo-tong-xin-jie-kou-xiao-xi/#1-action","title":"1.\u521b\u5efa\u5e76\u7f16\u8f91 .action \u6587\u4ef6","text":"<p>\u529f\u80fd\u5305base_interfaces_demo\u4e0b\u65b0\u5efaaction\u6587\u4ef6\u5939\uff0caction\u6587\u4ef6\u5939\u4e0b\u65b0\u5efaProgress.action\u6587\u4ef6\uff0c\u6587\u4ef6\u4e2d\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>int64 num\n---\nint64 sum\n---\nfloat64 progress\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/242-dong-zuo-tong-xin-jie-kou-xiao-xi/#2","title":"2.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/242-dong-zuo-tong-xin-jie-kou-xiao-xi/#1packagexml","title":"1.package.xml","text":"<p>\u5982\u679c\u5355\u72ec\u6784\u5efaaction\u529f\u80fd\u5305\uff0c\u9700\u8981\u5728package.xml\u4e2d\u9700\u8981\u6dfb\u52a0\u4e00\u4e9b\u4f9d\u8d56\u5305\uff0c\u5177\u4f53\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;buildtool_depend&gt;rosidl_default_generators&lt;/buildtool_depend&gt;\n&lt;depend&gt;action_msgs&lt;/depend&gt;\n&lt;member_of_group&gt;rosidl_interface_packages&lt;/member_of_group&gt;\n</code></pre> <p>\u5f53\u524d\u4f7f\u7528\u7684\u662f base_interfaces_demo \u529f\u80fd\u5305\uff0c\u5df2\u7ecf\u4e3a msg \u3001srv \u6587\u4ef6\u6dfb\u52a0\u8fc7\u4e86\u4e00\u4e9b\u4f9d\u8d56\uff0c\u6240\u4ee5 package.xml \u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\u5373\u53ef\uff1a</p> <pre><code>&lt;buildtool_depend&gt;rosidl_default_generators&lt;/buildtool_depend&gt;\n&lt;depend&gt;action_msgs&lt;/depend&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/242-dong-zuo-tong-xin-jie-kou-xiao-xi/#2cmakeliststxt","title":"2.CMakeLists.txt","text":"<p>\u5982\u679c\u662f\u65b0\u5efa\u7684\u529f\u80fd\u5305\uff0c\u4e0e\u4e4b\u524d\u5b9a\u4e49msg\u3001srv\u6587\u4ef6\u540c\u7406\uff0c\u4e3a\u4e86\u5c06<code>.action</code>\u6587\u4ef6\u8f6c\u6362\u6210\u5bf9\u5e94\u7684C++\u548cPython\u4ee3\u7801\uff0c\u8fd8\u9700\u8981\u5728CMakeLists.txt \u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a</p> <pre><code>find_package(rosidl_default_generators REQUIRED)\n\nrosidl_generate_interfaces(${PROJECT_NAME}\n  \"action/Progress.action\"\n)\n</code></pre> <p>\u4e0d\u8fc7\uff0c\u6211\u4eec\u5f53\u524d\u4f7f\u7528\u7684base_interfaces_demo\u5305\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u4fee\u6539rosidl_generate_interfaces\u51fd\u6570\u5373\u53ef\uff0c\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>rosidl_generate_interfaces(${PROJECT_NAME}\n  \"msg/Student.msg\"\n  \"srv/AddInts.srv\"\n  \"action/Progress.action\"\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/242-dong-zuo-tong-xin-jie-kou-xiao-xi/#3","title":"3.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select base_interfaces_demo\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/242-dong-zuo-tong-xin-jie-kou-xiao-xi/#4","title":"4.\u6d4b\u8bd5","text":"<p>\u7f16\u8bd1\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u7684 install \u76ee\u5f55\u4e0b\u5c06\u751f\u6210<code>Progress.action</code>\u6587\u4ef6\u5bf9\u5e94\u7684C++\u548cPython\u6587\u4ef6\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\uff0c\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u6587\u4ef6\u5b9a\u4e49\u4ee5\u53ca\u7f16\u8bd1\u662f\u5426\u6b63\u5e38\uff1a</p> <pre><code>. install/setup.bash\nros2 interface show base_interfaces_demo/action/Progress\n</code></pre> <p>\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u7ec8\u7aef\u5c06\u4f1a\u8f93\u51fa\u4e0e<code>Progress.action</code>\u6587\u4ef6\u4e00\u81f4\u7684\u5185\u5bb9\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/243-dong-zuo-tong-xin-c-shi-xian/","title":"243 dong zuo tong xin c shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/243-dong-zuo-tong-xin-c-shi-xian/#243-c","title":"2.4.3 \u52a8\u4f5c\u901a\u4fe1\uff08C++\uff09","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/243-dong-zuo-tong-xin-c-shi-xian/#1","title":"1.\u52a8\u4f5c\u670d\u52a1\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp03_action\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6demo01_action_server.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n  \u9700\u6c42\uff1a\u7f16\u5199\u52a8\u4f5c\u670d\u52a1\u7aef\u5b9e\u4e60\uff0c\u53ef\u4ee5\u63d0\u53d6\u5ba2\u6237\u7aef\u8bf7\u6c42\u63d0\u4ea4\u7684\u6574\u578b\u6570\u636e\uff0c\u5e76\u7d2f\u52a0\u4ece1\u5230\u8be5\u6570\u636e\u4e4b\u95f4\u7684\u6240\u6709\u6574\u6570\u4ee5\u6c42\u548c\uff0c\n       \u6bcf\u7d2f\u52a0\u4e00\u6b21\u90fd\u8ba1\u7b97\u5f53\u524d\u8fd0\u7b97\u8fdb\u5ea6\u5e76\u8fde\u7eed\u53cd\u9988\u56de\u5ba2\u6237\u7aef\uff0c\u6700\u540e\uff0c\u5728\u5c06\u6c42\u548c\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002\n  \u6b65\u9aa4\uff1a\n    1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n    2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n      3-1.\u521b\u5efa\u52a8\u4f5c\u670d\u52a1\u7aef\uff1b\n      3-2.\u5904\u7406\u8bf7\u6c42\u6570\u636e\uff1b\n      3-3.\u5904\u7406\u53d6\u6d88\u4efb\u52a1\u8bf7\u6c42\uff1b\n      3-4.\u751f\u6210\u8fde\u7eed\u53cd\u9988\u3002\n    4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n    5.\u91ca\u653e\u8d44\u6e90\u3002\n\n*/\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n#include \"rclcpp_action/rclcpp_action.hpp\"\n#include \"base_interfaces_demo/action/progress.hpp\"\n\nusing namespace std::placeholders;\nusing base_interfaces_demo::action::Progress;\nusing GoalHandleProgress = rclcpp_action::ServerGoalHandle&lt;Progress&gt;;\n\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalActionServer : public rclcpp::Node\n{\npublic:\n\n  explicit MinimalActionServer(const rclcpp::NodeOptions &amp; options = rclcpp::NodeOptions())\n  : Node(\"minimal_action_server\", options)\n  {\n    // 3-1.\u521b\u5efa\u52a8\u4f5c\u670d\u52a1\u7aef\uff1b\n    this-&gt;action_server_ = rclcpp_action::create_server&lt;Progress&gt;(\n      this,\n      \"get_sum\",\n      std::bind(&amp;MinimalActionServer::handle_goal, this, _1, _2),\n      std::bind(&amp;MinimalActionServer::handle_cancel, this, _1),\n      std::bind(&amp;MinimalActionServer::handle_accepted, this, _1));\n    RCLCPP_INFO(this-&gt;get_logger(),\"\u52a8\u4f5c\u670d\u52a1\u7aef\u521b\u5efa\uff0c\u7b49\u5f85\u8bf7\u6c42...\");\n  }\n\nprivate:\n  rclcpp_action::Server&lt;Progress&gt;::SharedPtr action_server_;\n\n  // 3-2.\u5904\u7406\u8bf7\u6c42\u6570\u636e\uff1b\n  rclcpp_action::GoalResponse handle_goal(const rclcpp_action::GoalUUID &amp; uuid,std::shared_ptr&lt;const Progress::Goal&gt; goal)\n  {\n    (void)uuid;\n    RCLCPP_INFO(this-&gt;get_logger(), \"\u63a5\u6536\u5230\u52a8\u4f5c\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u8bf7\u6c42\u6570\u5b57\u4e3a %ld\", goal-&gt;num);\n    if (goal-&gt;num &lt; 1) {\n      return rclcpp_action::GoalResponse::REJECT;\n    }\n    return rclcpp_action::GoalResponse::ACCEPT_AND_EXECUTE;\n  }\n\n  // 3-3.\u5904\u7406\u53d6\u6d88\u4efb\u52a1\u8bf7\u6c42\uff1b\n  rclcpp_action::CancelResponse handle_cancel(\n    const std::shared_ptr&lt;GoalHandleProgress&gt; goal_handle)\n  {\n    (void)goal_handle;\n    RCLCPP_INFO(this-&gt;get_logger(), \"\u63a5\u6536\u5230\u4efb\u52a1\u53d6\u6d88\u8bf7\u6c42\");\n    return rclcpp_action::CancelResponse::ACCEPT;\n  }\n\n  void execute(const std::shared_ptr&lt;GoalHandleProgress&gt; goal_handle)\n  {\n    RCLCPP_INFO(this-&gt;get_logger(), \"\u5f00\u59cb\u6267\u884c\u4efb\u52a1\");\n    rclcpp::Rate loop_rate(10.0);\n    const auto goal = goal_handle-&gt;get_goal();\n    auto feedback = std::make_shared&lt;Progress::Feedback&gt;();\n    auto result = std::make_shared&lt;Progress::Result&gt;();\n    int64_t sum= 0;\n    for (int i = 1; (i &lt;= goal-&gt;num) &amp;&amp; rclcpp::ok(); i++) {\n      sum += i;\n      // Check if there is a cancel request\n      if (goal_handle-&gt;is_canceling()) {\n        result-&gt;sum = sum;\n        goal_handle-&gt;canceled(result);\n        RCLCPP_INFO(this-&gt;get_logger(), \"\u4efb\u52a1\u53d6\u6d88\");\n        return;\n      }\n      feedback-&gt;progress = (double_t)i / goal-&gt;num;\n      goal_handle-&gt;publish_feedback(feedback);\n      RCLCPP_INFO(this-&gt;get_logger(), \"\u8fde\u7eed\u53cd\u9988\u4e2d\uff0c\u8fdb\u5ea6\uff1a%.2f\", feedback-&gt;progress);\n\n      loop_rate.sleep();\n    }\n\n    if (rclcpp::ok()) {\n      result-&gt;sum = sum;\n      goal_handle-&gt;succeed(result);\n      RCLCPP_INFO(this-&gt;get_logger(), \"\u4efb\u52a1\u5b8c\u6210\uff01\");\n    }\n  }\n\n  // 3-4.\u751f\u6210\u8fde\u7eed\u53cd\u9988\u3002\n  void handle_accepted(const std::shared_ptr&lt;GoalHandleProgress&gt; goal_handle)\n  {\n    std::thread{std::bind(&amp;MinimalActionServer::execute, this, _1), goal_handle}.detach();\n  }\n}; \n\nint main(int argc, char ** argv)\n{\n  // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n  rclcpp::init(argc, argv);\n  // 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n  auto action_server = std::make_shared&lt;MinimalActionServer&gt;();\n  rclcpp::spin(action_server);\n  // 5.\u91ca\u653e\u8d44\u6e90\u3002\n  rclcpp::shutdown();\n  return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/243-dong-zuo-tong-xin-c-shi-xian/#2","title":"2.\u52a8\u4f5c\u5ba2\u6237\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp03_action\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6demo02_action_client.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*  \n  \u9700\u6c42\uff1a\u7f16\u5199\u52a8\u4f5c\u5ba2\u6237\u7aef\u5b9e\u73b0\uff0c\u53ef\u4ee5\u63d0\u4ea4\u4e00\u4e2a\u6574\u578b\u6570\u636e\u5230\u670d\u52a1\u7aef\uff0c\u5e76\u5904\u7406\u670d\u52a1\u7aef\u7684\u8fde\u7eed\u53cd\u9988\u4ee5\u53ca\u6700\u7ec8\u8fd4\u56de\u7ed3\u679c\u3002\n  \u6b65\u9aa4\uff1a\n    1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n    2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n      3-1.\u521b\u5efa\u52a8\u4f5c\u5ba2\u6237\u7aef\uff1b\n      3-2.\u53d1\u9001\u8bf7\u6c42\uff1b\n      3-3.\u5904\u7406\u76ee\u6807\u53d1\u9001\u540e\u7684\u53cd\u9988\uff1b\n      3-4.\u5904\u7406\u8fde\u7eed\u53cd\u9988\uff1b\n      3-5.\u5904\u7406\u6700\u7ec8\u54cd\u5e94\u3002\n    4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n    5.\u91ca\u653e\u8d44\u6e90\u3002\n*/\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n#include \"rclcpp_action/rclcpp_action.hpp\"\n#include \"base_interfaces_demo/action/progress.hpp\"\n\nusing base_interfaces_demo::action::Progress;\nusing GoalHandleProgress = rclcpp_action::ClientGoalHandle&lt;Progress&gt;;\nusing namespace std::placeholders;\n\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalActionClient : public rclcpp::Node\n{\npublic:\n\n  explicit MinimalActionClient(const rclcpp::NodeOptions &amp; node_options = rclcpp::NodeOptions())\n  : Node(\"minimal_action_client\", node_options)\n  {\n    // 3-1.\u521b\u5efa\u52a8\u4f5c\u5ba2\u6237\u7aef\uff1b\n    this-&gt;client_ptr_ = rclcpp_action::create_client&lt;Progress&gt;(this,\"get_sum\");\n  }\n\n  // 3-2.\u53d1\u9001\u8bf7\u6c42\uff1b\n  void send_goal(int64_t num)\n  {\n\n    if (!this-&gt;client_ptr_) {\n      RCLCPP_ERROR(this-&gt;get_logger(), \"\u52a8\u4f5c\u5ba2\u6237\u7aef\u672a\u88ab\u521d\u59cb\u5316\u3002\");\n    }\n\n    if (!this-&gt;client_ptr_-&gt;wait_for_action_server(std::chrono::seconds(10))) {\n      RCLCPP_ERROR(this-&gt;get_logger(), \"\u670d\u52a1\u8fde\u63a5\u5931\u8d25\uff01\");\n      return;\n    }\n\n    auto goal_msg = Progress::Goal();\n    goal_msg.num = num;\n    RCLCPP_INFO(this-&gt;get_logger(), \"\u53d1\u9001\u8bf7\u6c42\u6570\u636e\uff01\");\n\n    auto send_goal_options = rclcpp_action::Client&lt;Progress&gt;::SendGoalOptions();\n    send_goal_options.goal_response_callback =std::bind(&amp;MinimalActionClient::goal_response_callback, this, _1);\n    send_goal_options.feedback_callback =std::bind(&amp;MinimalActionClient::feedback_callback, this, _1, _2);\n    send_goal_options.result_callback =std::bind(&amp;MinimalActionClient::result_callback, this, _1);\n    auto goal_handle_future = this-&gt;client_ptr_-&gt;async_send_goal(goal_msg, send_goal_options);\n  }\n\nprivate:\n  rclcpp_action::Client&lt;Progress&gt;::SharedPtr client_ptr_;\n\n  // 3-3.\u5904\u7406\u76ee\u6807\u53d1\u9001\u540e\u7684\u53cd\u9988\uff1b\n  void goal_response_callback(GoalHandleProgress::SharedPtr goal_handle)\n  {\n    if (!goal_handle) {\n      RCLCPP_ERROR(this-&gt;get_logger(), \"\u76ee\u6807\u8bf7\u6c42\u88ab\u670d\u52a1\u5668\u62d2\u7edd\uff01\");\n    } else {\n      RCLCPP_INFO(this-&gt;get_logger(), \"\u76ee\u6807\u88ab\u63a5\u6536\uff0c\u7b49\u5f85\u7ed3\u679c\u4e2d\");\n    }\n  }\n\n  // 3-4.\u5904\u7406\u8fde\u7eed\u53cd\u9988\uff1b\n  void feedback_callback(GoalHandleProgress::SharedPtr,const std::shared_ptr&lt;const Progress::Feedback&gt; feedback)\n  {\n    int32_t progress = (int32_t)(feedback-&gt;progress * 100);\n    RCLCPP_INFO(this-&gt;get_logger(), \"\u5f53\u524d\u8fdb\u5ea6: %d%%\", progress);\n  }\n\n  // 3-5.\u5904\u7406\u6700\u7ec8\u54cd\u5e94\u3002\n  void result_callback(const GoalHandleProgress::WrappedResult &amp; result)\n  {\n    switch (result.code) {\n      case rclcpp_action::ResultCode::SUCCEEDED:\n        break;\n      case rclcpp_action::ResultCode::ABORTED:\n        RCLCPP_ERROR(this-&gt;get_logger(), \"\u4efb\u52a1\u88ab\u4e2d\u6b62\");\n        return;\n      case rclcpp_action::ResultCode::CANCELED:\n        RCLCPP_ERROR(this-&gt;get_logger(), \"\u4efb\u52a1\u88ab\u53d6\u6d88\");\n        return;\n      default:\n        RCLCPP_ERROR(this-&gt;get_logger(), \"\u672a\u77e5\u5f02\u5e38\");\n        return;\n    }\n\n    RCLCPP_INFO(this-&gt;get_logger(), \"\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\uff0c\u6700\u7ec8\u7ed3\u679c: %ld\", result.result-&gt;sum);\n  }\n}; \n\nint main(int argc, char ** argv)\n{\n  // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n  rclcpp::init(argc, argv);\n\n  // 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n  auto action_client = std::make_shared&lt;MinimalActionClient&gt;();\n  action_client-&gt;send_goal(10);\n  rclcpp::spin(action_client);\n  // 5.\u91ca\u653e\u8d44\u6e90\u3002\n  rclcpp::shutdown();\n  return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/243-dong-zuo-tong-xin-c-shi-xian/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/243-dong-zuo-tong-xin-c-shi-xian/#1packagesxml","title":"1.packages.xml","text":"<p>\u5728\u521b\u5efa\u529f\u80fd\u5305\u65f6\uff0c\u6240\u4f9d\u8d56\u7684\u529f\u80fd\u5305\u5df2\u7ecf\u81ea\u52a8\u914d\u7f6e\u4e86\uff0c\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;depend&gt;rclcpp&lt;/depend&gt;\n&lt;depend&gt;rclcpp_action&lt;/depend&gt;\n&lt;depend&gt;base_interfaces_demo&lt;/depend&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/243-dong-zuo-tong-xin-c-shi-xian/#2cmakeliststxt","title":"2.CMakeLists.txt","text":"<p>CMakeLists.txt\u4e2d\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u7a0b\u5e8f\u6838\u5fc3\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>find_package(rclcpp REQUIRED)\nfind_package(rclcpp_action REQUIRED)\nfind_package(base_interfaces_demo REQUIRED)\n\nadd_executable(demo01_action_server src/demo01_action_server.cpp)\nament_target_dependencies(\n  demo01_action_server\n  \"rclcpp\"\n  \"rclcpp_action\"\n  \"base_interfaces_demo\"\n)\n\nadd_executable(demo02_action_client src/demo02_action_client.cpp)\nament_target_dependencies(\n  demo02_action_client\n  \"rclcpp\"\n  \"rclcpp_action\"\n  \"base_interfaces_demo\"\n)\n\ninstall(TARGETS \n  demo01_action_server\n  demo02_action_client\n  DESTINATION lib/${PROJECT_NAME})\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/243-dong-zuo-tong-xin-c-shi-xian/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select cpp03_action\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/243-dong-zuo-tong-xin-c-shi-xian/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\uff0c\u7ec8\u7aef1\u6267\u884c\u52a8\u4f5c\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u7ec8\u7aef2\u6267\u884c\u52a8\u4f5c\u5ba2\u6237\u7aef\u7a0b\u5e8f\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run cpp03_action demo01_action_server\n</code></pre> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run cpp03_action demo02_action_client\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6848\u4f8b\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/244-dong-zuo-tong-xin-python-shi-xian/","title":"244 dong zuo tong xin python shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/244-dong-zuo-tong-xin-python-shi-xian/#244-python","title":"2.4.4 \u52a8\u4f5c\u901a\u4fe1\uff08Python\uff09","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/244-dong-zuo-tong-xin-python-shi-xian/#1","title":"1.\u52a8\u4f5c\u670d\u52a1\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305py03_action\u7684py03_action\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaPython\u6587\u4ef6demo01_action_server_py.py\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>\"\"\"  \n    \u9700\u6c42\uff1a\u7f16\u5199\u52a8\u4f5c\u670d\u52a1\u7aef\u5b9e\u4e60\uff0c\u53ef\u4ee5\u63d0\u53d6\u5ba2\u6237\u7aef\u8bf7\u6c42\u63d0\u4ea4\u7684\u6574\u578b\u6570\u636e\uff0c\u5e76\u7d2f\u52a0\u4ece1\u5230\u8be5\u6570\u636e\u4e4b\u95f4\u7684\u6240\u6709\u6574\u6570\u4ee5\u6c42\u548c\uff0c\n       \u6bcf\u7d2f\u52a0\u4e00\u6b21\u90fd\u8ba1\u7b97\u5f53\u524d\u8fd0\u7b97\u8fdb\u5ea6\u5e76\u8fde\u7eed\u53cd\u9988\u56de\u5ba2\u6237\u7aef\uff0c\u6700\u540e\uff0c\u5728\u5c06\u6c42\u548c\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002\n    \u6b65\u9aa4\uff1a\n        1.\u5bfc\u5305\uff1b\n        2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n        3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u52a8\u4f5c\u670d\u52a1\u7aef\uff1b\n            3-2.\u751f\u6210\u8fde\u7eed\u53cd\u9988\uff1b\n            3-3.\u751f\u6210\u6700\u7ec8\u54cd\u5e94\u3002\n        4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n        5.\u91ca\u653e\u8d44\u6e90\u3002\n\"\"\"\n\n# 1.\u5bfc\u5305\uff1b\nimport time\nimport rclpy\nfrom rclpy.action import ActionServer\nfrom rclpy.node import Node\n\nfrom base_interfaces_demo.action import Progress\n\n# 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass ProgressActionServer(Node):\n\n    def __init__(self):\n        super().__init__('progress_action_server')\n        # 3-1.\u521b\u5efa\u52a8\u4f5c\u670d\u52a1\u7aef\uff1b\n        self._action_server = ActionServer(\n            self,\n            Progress,\n            'get_sum',\n            self.execute_callback)\n        self.get_logger().info('\u52a8\u4f5c\u670d\u52a1\u5df2\u7ecf\u542f\u52a8\uff01')\n\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('\u5f00\u59cb\u6267\u884c\u4efb\u52a1....')\n\n\n        # 3-2.\u751f\u6210\u8fde\u7eed\u53cd\u9988\uff1b\n        feedback_msg = Progress.Feedback()\n\n        sum = 0\n        for i in range(1, goal_handle.request.num + 1):\n            sum += i\n            feedback_msg.progress = i / goal_handle.request.num\n            self.get_logger().info('\u8fde\u7eed\u53cd\u9988: %.2f' % feedback_msg.progress)\n            goal_handle.publish_feedback(feedback_msg)\n            time.sleep(1)\n\n        # 3-3.\u751f\u6210\u6700\u7ec8\u54cd\u5e94\u3002\n        goal_handle.succeed()\n        result = Progress.Result()\n        result.sum = sum\n        self.get_logger().info('\u4efb\u52a1\u5b8c\u6210\uff01')\n\n        return result\n\n\ndef main(args=None):\n\n    # 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclpy.init(args=args)\n\n    # 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n    Progress_action_server = ProgressActionServer()\n    rclpy.spin(Progress_action_server)\n\n    # 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/244-dong-zuo-tong-xin-python-shi-xian/#2","title":"2.\u52a8\u4f5c\u5ba2\u6237\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305py03_action\u7684py03_action\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaPython\u6587\u4ef6demo02_action_client_py.py\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>\"\"\"  \n    \u9700\u6c42\uff1a\u7f16\u5199\u52a8\u4f5c\u5ba2\u6237\u7aef\u5b9e\u73b0\uff0c\u53ef\u4ee5\u63d0\u4ea4\u4e00\u4e2a\u6574\u578b\u6570\u636e\u5230\u670d\u52a1\u7aef\uff0c\u5e76\u5904\u7406\u670d\u52a1\u7aef\u7684\u8fde\u7eed\u53cd\u9988\u4ee5\u53ca\u6700\u7ec8\u8fd4\u56de\u7ed3\u679c\u3002\n    \u6b65\u9aa4\uff1a\n        1.\u5bfc\u5305\uff1b\n        2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n        3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u52a8\u4f5c\u5ba2\u6237\u7aef\uff1b\n            3-2.\u53d1\u9001\u8bf7\u6c42\uff1b\n            3-3.\u5904\u7406\u76ee\u6807\u53d1\u9001\u540e\u7684\u53cd\u9988\uff1b\n            3-4.\u5904\u7406\u8fde\u7eed\u53cd\u9988\uff1b\n            3-5.\u5904\u7406\u6700\u7ec8\u54cd\u5e94\u3002\n        4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n        5.\u91ca\u653e\u8d44\u6e90\u3002\n\n\"\"\"\n# 1.\u5bfc\u5305\uff1b\nimport rclpy\nfrom rclpy.action import ActionClient\nfrom rclpy.node import Node\nfrom base_interfaces_demo.action import Progress\n\n# 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass ProgressActionClient(Node):\n\n    def __init__(self):\n        super().__init__('progress_action_client')\n        # 3-1.\u521b\u5efa\u52a8\u4f5c\u5ba2\u6237\u7aef\uff1b\n        self._action_client = ActionClient(self, Progress, 'get_sum')\n\n    def send_goal(self, num):\n        # 3-2.\u53d1\u9001\u8bf7\u6c42\uff1b\n        goal_msg = Progress.Goal()\n        goal_msg.num = num\n        self._action_client.wait_for_server()\n        self._send_goal_future = self._action_client.send_goal_async(goal_msg, feedback_callback=self.feedback_callback)\n        self._send_goal_future.add_done_callback(self.goal_response_callback)\n\n    def goal_response_callback(self, future):\n        # 3-3.\u5904\u7406\u76ee\u6807\u53d1\u9001\u540e\u7684\u53cd\u9988\uff1b\n        goal_handle = future.result()\n        if not goal_handle.accepted:\n            self.get_logger().info('\u8bf7\u6c42\u88ab\u62d2\u7edd')\n            return\n\n        self.get_logger().info('\u8bf7\u6c42\u88ab\u63a5\u6536\uff0c\u5f00\u59cb\u6267\u884c\u4efb\u52a1\uff01')\n\n        self._get_result_future = goal_handle.get_result_async()\n        self._get_result_future.add_done_callback(self.get_result_callback)\n\n    # 3-5.\u5904\u7406\u6700\u7ec8\u54cd\u5e94\u3002\n    def get_result_callback(self, future):\n        result = future.result().result\n        self.get_logger().info('\u6700\u7ec8\u8ba1\u7b97\u7ed3\u679c\uff1asum = %d' % result.sum)\n        # 5.\u91ca\u653e\u8d44\u6e90\u3002\n        rclpy.shutdown()\n\n    # 3-4.\u5904\u7406\u8fde\u7eed\u53cd\u9988\uff1b\n    def feedback_callback(self, feedback_msg):\n        feedback = (int)(feedback_msg.feedback.progress * 100)\n        self.get_logger().info('\u5f53\u524d\u8fdb\u5ea6: %d%%' % feedback)\n\n\ndef main(args=None):\n\n    # 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclpy.init(args=args)\n    # 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\uff1b\n\n    action_client = ProgressActionClient()\n    action_client.send_goal(10)\n    rclpy.spin(action_client)\n\n    # rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/244-dong-zuo-tong-xin-python-shi-xian/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/244-dong-zuo-tong-xin-python-shi-xian/#1packagexml","title":"1.package.xml","text":"<p>\u5728\u521b\u5efa\u529f\u80fd\u5305\u65f6\uff0c\u6240\u4f9d\u8d56\u7684\u529f\u80fd\u5305\u5df2\u7ecf\u81ea\u52a8\u914d\u7f6e\u4e86\uff0c\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;depend&gt;rclpy&lt;/depend&gt;\n&lt;depend&gt;base_interfaces_demo&lt;/depend&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/244-dong-zuo-tong-xin-python-shi-xian/#2setuppy","title":"2.setup.py","text":"<p><code>entry_points</code>\u5b57\u6bb5\u7684<code>console_scripts</code>\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>entry_points={\n    'console_scripts': [\n        'demo01_action_server_py = py03_action.demo01_action_server_py:main',\n        'demo02_action_client_py = py03_action.demo02_action_client_py:main'\n    ],\n},\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/244-dong-zuo-tong-xin-python-shi-xian/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select py03_action\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/24-dong-zuo-tong-xin/244-dong-zuo-tong-xin-python-shi-xian/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\uff0c\u7ec8\u7aef1\u6267\u884c\u52a8\u4f5c\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u7ec8\u7aef2\u6267\u884c\u52a8\u4f5c\u5ba2\u6237\u7aef\u7a0b\u5e8f\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run py03_action demo01_action_server_py\n</code></pre> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run py03_action demo02_action_client_py\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6848\u4f8b\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/251-can-shu-fu-wu-li-lun-mo-xing/","title":"251 can shu fu wu li lun mo xing","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/251-can-shu-fu-wu-li-lun-mo-xing/#251","title":"2.5.1 \u6848\u4f8b\u4ee5\u53ca\u6848\u4f8b\u5206\u6790","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/251-can-shu-fu-wu-li-lun-mo-xing/#1","title":"1.\u6848\u4f8b\u9700\u6c42","text":"<p>\u9700\u6c42\uff1a\u5728\u53c2\u6570\u670d\u52a1\u7aef\u8bbe\u7f6e\u4e00\u4e9b\u53c2\u6570\uff0c\u53c2\u6570\u5ba2\u6237\u7aef\u8bbf\u95ee\u670d\u52a1\u7aef\u5e76\u64cd\u4f5c\u8fd9\u4e9b\u53c2\u6570\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/251-can-shu-fu-wu-li-lun-mo-xing/#2","title":"2.\u6848\u4f8b\u5206\u6790","text":"<p>\u5728\u4e0a\u8ff0\u6848\u4f8b\u4e2d\uff0c\u9700\u8981\u5173\u6ce8\u7684\u8981\u7d20\u6709\u4e09\u4e2a\uff1a</p> <ol> <li>\u53c2\u6570\u5ba2\u6237\u7aef\uff1b</li> <li>\u53c2\u6570\u670d\u52a1\u7aef\uff1b</li> <li>\u53c2\u6570\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/251-can-shu-fu-wu-li-lun-mo-xing/#3","title":"3.\u6d41\u7a0b\u7b80\u4ecb","text":"<p>\u6848\u4f8b\u5b9e\u73b0\u524d\u9700\u8981\u5148\u4e86\u89e3ROS2\u4e2d\u53c2\u6570\u7684\u76f8\u5173API\uff0c\u65e0\u8bba\u662f\u5ba2\u6237\u7aef\u8fd8\u662f\u670d\u52a1\u7aef\u90fd\u4f1a\u4f7f\u7528\u5230\u53c2\u6570\uff0c\u800c\u53c2\u6570\u670d\u52a1\u6848\u4f8b\u5b9e\u73b0\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u5199\u53c2\u6570\u670d\u52a1\u7aef\u5b9e\u73b0\uff1b</li> <li>\u7f16\u5199\u53c2\u6570\u5ba2\u6237\u7aef\u5b9e\u73b0\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol> <p>\u6848\u4f8b\u6211\u4eec\u4f1a\u91c7\u7528C++\u548cPython\u5206\u522b\u5b9e\u73b0\uff0c\u4e8c\u8005\u90fd\u9075\u5faa\u4e0a\u8ff0\u5b9e\u73b0\u6d41\u7a0b\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/251-can-shu-fu-wu-li-lun-mo-xing/#4","title":"4.\u51c6\u5907\u5de5\u4f5c","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u7684src\u76ee\u5f55\uff0c\u8c03\u7528\u5982\u4e0b\u4e24\u6761\u547d\u4ee4\u5206\u522b\u521b\u5efaC++\u529f\u80fd\u5305\u548cPython\u529f\u80fd\u5305\u3002</p> <pre><code>ros2 pkg create cpp04_param --build-type ament_cmake --dependencies rclcpp\nros2 pkg create py04_param --build-type ament_python --dependencies rclpy\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/252-can-shu-shu-ju-lei-xing/","title":"252 can shu shu ju lei xing","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/252-can-shu-shu-ju-lei-xing/#252","title":"2.5.2 \u53c2\u6570\u6570\u636e\u7c7b\u578b","text":"<p>\u5728ROS2\u4e2d\uff0c\u53c2\u6570\u7531\u952e\u3001\u503c\u548c\u63cf\u8ff0\u7b26\u4e09\u90e8\u5206\u7ec4\u6210\uff0c\u5176\u4e2d\u952e\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u503c\u53ef\u4ee5\u662fbool\u3001int64\u3001float64\u3001string\u3001byte[]\u3001bool[]\u3001int64[]\u3001float64[]\u3001string[]\u4e2d\u7684\u4efb\u4e00\u7c7b\u578b\uff0c\u63cf\u8ff0\u7b26\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a\u7a7a\uff0c\u4f46\u662f\u53ef\u4ee5\u8bbe\u7f6e\u53c2\u6570\u63cf\u8ff0\u3001\u53c2\u6570\u6570\u636e\u7c7b\u578b\u3001\u53d6\u503c\u8303\u56f4\u6216\u5176\u4ed6\u7ea6\u675f\u7b49\u4fe1\u606f\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u64cd\u4f5c\uff0c\u53c2\u6570\u88ab\u5c01\u88c5\u4e3a\u4e86\u76f8\u5173\u7c7b\uff0c\u5176\u4e2dC++\u5ba2\u6237\u7aef\u5bf9\u5e94\u7684\u7c7b\u662f<code>rclcpp::Parameter</code>\uff0cPython\u5ba2\u6237\u7aef\u5bf9\u5e94\u7684\u7c7b\u662f<code>rclpy.Parameter</code>\u3002\u501f\u52a9\u4e8e\u76f8\u5173API\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u53c2\u6570\u5bf9\u8c61\u521b\u5efa\u4ee5\u53ca\u53c2\u6570\u5c5e\u6027\u89e3\u6790\u7b49\u64cd\u4f5c\u3002\u4ee5\u4e0b\u4ee3\u7801\u63d0\u4f9b\u4e86\u53c2\u6570\u76f8\u5173API\u57fa\u672c\u4f7f\u7528\u7684\u793a\u4f8b\u3002</p> <p>C++\u793a\u4f8b\uff1a</p> <pre><code>...\n// \u521b\u5efa\u53c2\u6570\u5bf9\u8c61\nrclcpp::Parameter p1(\"car_name\",\"Tiger\"); //\u53c2\u6570\u503c\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\nrclcpp::Parameter p2(\"width\",0.15); //\u53c2\u6570\u503c\u4e3a\u6d6e\u70b9\u7c7b\u578b\nrclcpp::Parameter p3(\"wheels\",2); //\u53c2\u6570\u503c\u4e3a\u6574\u578b\n\n// \u83b7\u53d6\u53c2\u6570\u503c\u5e76\u8f6c\u6362\u6210\u76f8\u5e94\u7684\u6570\u636e\u7c7b\u578b\nRCLCPP_INFO(rclcpp::get_logger(\"rclcpp\"),\"car_name = %s\", p1.as_string().c_str());\nRCLCPP_INFO(rclcpp::get_logger(\"rclcpp\"),\"width = %.2f\", p2.as_double());\nRCLCPP_INFO(rclcpp::get_logger(\"rclcpp\"),\"wheels = %ld\", p3.as_int());\n\n// \u83b7\u53d6\u53c2\u6570\u7684\u952e\nRCLCPP_INFO(rclcpp::get_logger(\"rclcpp\"),\"p1 name = %s\", p1.get_name().c_str());\n// \u83b7\u53d6\u53c2\u6570\u6570\u636e\u7c7b\u578b\nRCLCPP_INFO(rclcpp::get_logger(\"rclcpp\"),\"p1 type_name = %s\", p1.get_type_name().c_str());\n// \u5c06\u53c2\u6570\u503c\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\u7c7b\u578b\nRCLCPP_INFO(rclcpp::get_logger(\"rclcpp\"),\"p1 value_to_msg = %s\", p1.value_to_string().c_str());\n...\n</code></pre> <p>Python\u793a\u4f8b\uff1a</p> <pre><code># \u521b\u5efa\u53c2\u6570\u5bf9\u8c61\np1 = rclpy.Parameter(\"car_name\",value=\"Horse\")\np2 = rclpy.Parameter(\"length\",value=0.5)\np3 = rclpy.Parameter(\"wheels\",value=4)\n\n# \u83b7\u53d6\u53c2\u6570\u503c\nget_logger(\"rclpy\").info(\"car_name = %s\" % p1.value)\nget_logger(\"rclpy\").info(\"length = %.2f\" % p2.value)\nget_logger(\"rclpy\").info(\"wheels = %d\" % p3.value)\n\n# \u83b7\u53d6\u53c2\u6570\u952e\nget_logger(\"rclpy\").info(\"p1 name = %s\" % p1.name)\n</code></pre> <p>\u5173\u4e8e\u53c2\u6570\u5177\u4f53\u7684API\u4f7f\u7528\uff0c\u5728\u540e\u7eed\u6848\u4f8b\u4e2d\u4f1a\u6709\u4ecb\u7ecd\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/253-can-shu-fu-wu-c-shi-xian/","title":"253 can shu fu wu c shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/253-can-shu-fu-wu-c-shi-xian/#253-c","title":"2.5.3 \u53c2\u6570\u670d\u52a1\uff08C++\uff09","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/253-can-shu-fu-wu-c-shi-xian/#1","title":"1.\u53c2\u6570\u670d\u52a1\u7aef","text":"<p>\u529f\u80fd\u5305cpp04_param\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6demo01_param_server.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*\n    \u9700\u6c42\uff1a\u7f16\u5199\u53c2\u6570\u670d\u52a1\u7aef\uff0c\u8bbe\u7f6e\u5e76\u64cd\u4f5c\u53c2\u6570\u3002\n    \u6b65\u9aa4\uff1a\n        1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n        2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n        3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u58f0\u660e\u53c2\u6570\uff1b\n            3-2.\u67e5\u8be2\u53c2\u6570\uff1b\n            3-3.\u4fee\u6539\u53c2\u6570\uff1b\n            3-4.\u5220\u9664\u53c2\u6570\u3002\n        4.\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff0c\u8c03\u7528\u53c2\u6570\u64cd\u4f5c\u51fd\u6570\uff0c\u5e76\u4f20\u9012\u7ed9spin\u51fd\u6570\uff1b\n        5.\u91ca\u653e\u8d44\u6e90\u3002\n\n*/\n\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalParamServer: public rclcpp::Node{\n    public:\n        MinimalParamServer():Node(\"minimal_param_server\",rclcpp::NodeOptions()\n                .allow_undeclared_parameters(true)\n                ){       \n        }\n        // 3-1.\u58f0\u660e\u53c2\u6570\uff1b\n        void declare_param(){\n            // \u58f0\u660e\u53c2\u6570\u5e76\u8bbe\u7f6e\u9ed8\u8ba4\u503c\n            this-&gt;declare_parameter(\"car_type\",\"Tiger\"); \n            this-&gt;declare_parameter(\"height\",1.50); \n            this-&gt;declare_parameter(\"wheels\",4);   \n            // \u9700\u8981\u8bbe\u7f6e rclcpp::NodeOptions().allow_undeclared_parameters(true),\u5426\u5219\u975e\u6cd5 \n            this-&gt;set_parameter(rclcpp::Parameter(\"undcl_test\",100));\n        }\n        // 3-2.\u67e5\u8be2\u53c2\u6570\n        void get_param(){\n            RCLCPP_INFO(this-&gt;get_logger(),\"------------------\u67e5----------------\");\n            // \u83b7\u53d6\u6307\u5b9a\n            rclcpp::Parameter car_type = this-&gt;get_parameter(\"car_type\");\n            RCLCPP_INFO(this-&gt;get_logger(),\"car_type:%s\",car_type.as_string().c_str());\n            RCLCPP_INFO(this-&gt;get_logger(),\"height:%.2f\",this-&gt;get_parameter(\"height\").as_double());\n            RCLCPP_INFO(this-&gt;get_logger(),\"wheels:%ld\",this-&gt;get_parameter(\"wheels\").as_int());\n            RCLCPP_INFO(this-&gt;get_logger(),\"undcl_test:%ld\",this-&gt;get_parameter(\"undcl_test\").as_int());\n            // \u5224\u65ad\u5305\u542b\n            RCLCPP_INFO(this-&gt;get_logger(),\"\u5305\u542bcar_type? %d\",this-&gt;has_parameter(\"car_type\"));\n            RCLCPP_INFO(this-&gt;get_logger(),\"\u5305\u542bcar_typesxxxx? %d\",this-&gt;has_parameter(\"car_typexxxx\"));\n            // \u83b7\u53d6\u6240\u6709\n            auto params = this-&gt;get_parameters({\"car_type\",\"height\",\"wheels\"});\n            for (auto &amp;param : params)\n            {\n                RCLCPP_INFO(this-&gt;get_logger(),\"name = %s, value = %s\", param.get_name().c_str(), param.value_to_string().c_str());\n\n            }\n        }\n        // 3-3.\u4fee\u6539\u53c2\u6570\n        void update_param(){\n            RCLCPP_INFO(this-&gt;get_logger(),\"------------------\u6539----------------\");\n            this-&gt;set_parameter(rclcpp::Parameter(\"height\",1.75));\n            RCLCPP_INFO(this-&gt;get_logger(),\"height:%.2f\",this-&gt;get_parameter(\"height\").as_double());\n        }\n        // 3-4.\u5220\u9664\u53c2\u6570\n        void del_param(){\n            RCLCPP_INFO(this-&gt;get_logger(),\"------------------\u5220----------------\");\n            // this-&gt;undeclare_parameter(\"car_type\");\n            // RCLCPP_INFO(this-&gt;get_logger(),\"\u5220\u9664\u64cd\u4f5c\u540e\uff0ccar_type\u8fd8\u5b58\u5728\u9a6c? %d\",this-&gt;has_parameter(\"car_type\"));\n            RCLCPP_INFO(this-&gt;get_logger(),\"\u5220\u9664\u64cd\u4f5c\u524d\uff0cundcl_test\u5b58\u5728\u9a6c? %d\",this-&gt;has_parameter(\"undcl_test\"));\n            this-&gt;undeclare_parameter(\"undcl_test\");\n            RCLCPP_INFO(this-&gt;get_logger(),\"\u5220\u9664\u64cd\u4f5c\u524d\uff0cundcl_test\u5b58\u5728\u9a6c? %d\",this-&gt;has_parameter(\"undcl_test\"));\n        }\n};\n\nint main(int argc, char ** argv)\n{\n    // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclcpp::init(argc,argv);\n\n    // 4.\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff0c\u8c03\u7528\u53c2\u6570\u64cd\u4f5c\u51fd\u6570\uff0c\u5e76\u4f20\u9012\u7ed9spin\u51fd\u6570\uff1b\n    auto paramServer= std::make_shared&lt;MinimalParamServer&gt;();\n    paramServer-&gt;declare_param();\n    paramServer-&gt;get_param();\n    paramServer-&gt;update_param();\n    paramServer-&gt;del_param();\n    rclcpp::spin(paramServer);\n\n    // 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclcpp::shutdown();\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/253-can-shu-fu-wu-c-shi-xian/#2","title":"2.\u53c2\u6570\u5ba2\u6237\u7aef","text":"<p>\u529f\u80fd\u5305cpp04_param\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6demo02_param_client.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*\n    \u9700\u6c42\uff1a\u7f16\u5199\u53c2\u6570\u5ba2\u6237\u7aef\uff0c\u83b7\u53d6\u6216\u4fee\u6539\u670d\u52a1\u7aef\u53c2\u6570\u3002\n    \u6b65\u9aa4\uff1a\n        1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n        2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n        3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u67e5\u8be2\u53c2\u6570\uff1b\n            3-2.\u4fee\u6539\u53c2\u6570\uff1b\n        4.\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff0c\u8c03\u7528\u53c2\u6570\u64cd\u4f5c\u51fd\u6570\uff1b\n        5.\u91ca\u653e\u8d44\u6e90\u3002\n*/\n\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n\nusing namespace std::chrono_literals;\n\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalParamClient: public rclcpp::Node {\n    public:\n        MinimalParamClient():Node(\"paramDemoClient_node\"){\n            paramClient = std::make_shared&lt;rclcpp::SyncParametersClient&gt;(this,\"minimal_param_server\");\n        }\n        bool connect_server(){\n            // \u7b49\u5f85\u670d\u52a1\u8fde\u63a5\n            while (!paramClient-&gt;wait_for_service(1s))\n            {\n                if (!rclcpp::ok())\n                {\n                   return false;\n                }  \n                RCLCPP_INFO(this-&gt;get_logger(),\"\u670d\u52a1\u672a\u8fde\u63a5\");\n            }\n\n            return true;\n\n        }\n\n        // 3-1.\u67e5\u8be2\u53c2\u6570\uff1b\n        void get_param(){\n            RCLCPP_INFO(this-&gt;get_logger(),\"-----------\u53c2\u6570\u5ba2\u6237\u7aef\u67e5\u8be2\u53c2\u6570-----------\");\n            double height = paramClient-&gt;get_parameter&lt;double&gt;(\"height\");\n            RCLCPP_INFO(this-&gt;get_logger(),\"height = %.2f\", height);\n            RCLCPP_INFO(this-&gt;get_logger(),\"car_type \u5b58\u5728\u5417\uff1f%d\", paramClient-&gt;has_parameter(\"car_type\"));\n            auto params = paramClient-&gt;get_parameters({\"car_type\",\"height\",\"wheels\"});\n            for (auto &amp;param : params)\n            {\n                RCLCPP_INFO(this-&gt;get_logger(),\"%s = %s\", param.get_name().c_str(),param.value_to_string().c_str());\n            }\n\n\n        }\n        // 3-2.\u4fee\u6539\u53c2\u6570\uff1b\n        void update_param(){\n            RCLCPP_INFO(this-&gt;get_logger(),\"-----------\u53c2\u6570\u5ba2\u6237\u7aef\u4fee\u6539\u53c2\u6570-----------\");\n            paramClient-&gt;set_parameters({rclcpp::Parameter(\"car_type\",\"Mouse\"),\n            rclcpp::Parameter(\"height\",2.0),\n            //\u8fd9\u662f\u670d\u52a1\u7aef\u4e0d\u5b58\u5728\u7684\u53c2\u6570\uff0c\u53ea\u6709\u670d\u52a1\u7aef\u8bbe\u7f6e\u4e86rclcpp::NodeOptions().allow_undeclared_parameters(true)\u65f6\uff0c\n            // \u8fd9\u4e2a\u53c2\u6570\u624d\u4f1a\u88ab\u6210\u529f\u8bbe\u7f6e\u3002\n            rclcpp::Parameter(\"width\",0.15),\n            rclcpp::Parameter(\"wheels\",6)});\n        }\n\n    private:\n        rclcpp::SyncParametersClient::SharedPtr paramClient;\n};\n\nint main(int argc, char const *argv[])\n{\n    // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclcpp::init(argc,argv);\n\n    // 4.\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff0c\u8c03\u7528\u53c2\u6570\u64cd\u4f5c\u51fd\u6570\uff1b\n    auto paramClient = std::make_shared&lt;MinimalParamClient&gt;();\n    bool flag = paramClient-&gt;connect_server();\n    if(!flag){\n        return 0;\n    }\n    paramClient-&gt;get_param();\n    paramClient-&gt;update_param();\n    paramClient-&gt;get_param();\n\n    // 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclcpp::shutdown();\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/253-can-shu-fu-wu-c-shi-xian/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/253-can-shu-fu-wu-c-shi-xian/#1packagesxml","title":"1.packages.xml","text":"<p>\u5728\u521b\u5efa\u529f\u80fd\u5305\u65f6\uff0c\u6240\u4f9d\u8d56\u7684\u529f\u80fd\u5305\u5df2\u7ecf\u81ea\u52a8\u914d\u7f6e\u4e86\uff0c\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;depend&gt;rclcpp&lt;/depend&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/253-can-shu-fu-wu-c-shi-xian/#2cmakeliststxt","title":"2.CMakeLists.txt","text":"<p>CMakeLists.txt\u4e2d\u53c2\u6570\u670d\u52a1\u7aef\u548c\u53c2\u6570\u5ba2\u6237\u7aef\u7a0b\u5e8f\u6838\u5fc3\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>find_package(rclcpp REQUIRED)\n\nadd_executable(demo01_param_server src/demo01_param_server.cpp)\nament_target_dependencies(\n  demo01_param_server\n  \"rclcpp\"\n)\nadd_executable(demo02_param_client src/demo02_param_client.cpp)\nament_target_dependencies(\n  demo02_param_client\n  \"rclcpp\"\n)\n\ninstall(TARGETS \n  demo01_param_server\n  demo02_param_client\n  DESTINATION lib/${PROJECT_NAME})\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/253-can-shu-fu-wu-c-shi-xian/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select cpp04_param\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/253-can-shu-fu-wu-c-shi-xian/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\uff0c\u7ec8\u7aef1\u6267\u884c\u53c2\u6570\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u7ec8\u7aef2\u6267\u884c\u53c2\u6570\u5ba2\u6237\u7aef\u7a0b\u5e8f\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run cpp04_param demo01_param_server\n</code></pre> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run cpp04_param demo02_param_client\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6848\u4f8b\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/254-can-shu-fu-wu-python-shi-xian/","title":"254 can shu fu wu python shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/254-can-shu-fu-wu-python-shi-xian/#254-python","title":"2.5.4 \u53c2\u6570\u670d\u52a1\uff08Python\uff09","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/254-can-shu-fu-wu-python-shi-xian/#1","title":"1.\u53c2\u6570\u670d\u52a1\u7aef","text":"<p>\u529f\u80fd\u5305py04_param\u7684py04_param\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaPython\u6587\u4ef6demo01_param_server_py.py\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>\"\"\"  \n    \u9700\u6c42\uff1a\u7f16\u5199\u53c2\u6570\u670d\u52a1\u7aef\uff0c\u8bbe\u7f6e\u5e76\u64cd\u4f5c\u53c2\u6570\u3002\n    \u6b65\u9aa4\uff1a\n        1.\u5bfc\u5305\uff1b\n        2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n        3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u58f0\u660e\u53c2\u6570\uff1b\n            3-2.\u67e5\u8be2\u53c2\u6570\uff1b\n            3-3.\u4fee\u6539\u53c2\u6570\uff1b\n            3-4.\u5220\u9664\u53c2\u6570\u3002\n        4.\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\uff0c\u8c03\u7528\u53c2\u6570\u64cd\u4f5c\u51fd\u6570\uff0c\u5e76\u4f20\u9012\u7ed9spin\u51fd\u6570\uff1b\n        5.\u91ca\u653e\u8d44\u6e90\u3002\n\n\"\"\"\n# 1.\u5bfc\u5305\uff1b\nimport rclpy\nfrom rclpy.node import Node\n\n# 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass MinimalParamServer(Node):\n    def __init__(self):\n        super().__init__(\"minimal_param_server\",allow_undeclared_parameters=True)\n        self.get_logger().info(\"\u53c2\u6570\u6f14\u793a\")\n\n    # 3-1.\u58f0\u660e\u53c2\u6570\uff1b\n    def declare_param(self):\n        self.declare_parameter(\"car_type\",\"Tiger\")\n        self.declare_parameter(\"height\",1.50)\n        self.declare_parameter(\"wheels\",4)\n        self.p1 = rclpy.Parameter(\"car_type\",value = \"Mouse\")\n        self.p2 = rclpy.Parameter(\"undcl_test\",value = 100)\n        self.set_parameters([self.p1,self.p2])\n\n    # 3-2.\u67e5\u8be2\u53c2\u6570\uff1b\n    def get_param(self):\n        self.get_logger().info(\"--------------\u67e5-------------\")\n        # \u5224\u65ad\u5305\u542b\n        self.get_logger().info(\"\u5305\u542b car_type \u5417\uff1f%d\" % self.has_parameter(\"car_type\"))\n        self.get_logger().info(\"\u5305\u542b width \u5417\uff1f%d\" % self.has_parameter(\"width\"))\n        # \u83b7\u53d6\u6307\u5b9a\n        car_type = self.get_parameter(\"car_type\")\n        self.get_logger().info(\"%s = %s \" % (car_type.name, car_type.value))\n        # \u83b7\u53d6\u6240\u6709\n        params = self.get_parameters([\"car_type\",\"height\",\"wheels\"])\n        self.get_logger().info(\"\u89e3\u6790\u6240\u6709\u53c2\u6570:\")\n        for param in params:\n            self.get_logger().info(\"%s ---&gt; %s\" % (param.name, param.value))\n\n    # 3-3.\u4fee\u6539\u53c2\u6570\uff1b\n    def update_param(self):\n        self.get_logger().info(\"--------------\u6539-------------\")\n        self.set_parameters([rclpy.Parameter(\"car_type\",value = \"horse\")])\n        param = self.get_parameter(\"car_type\")\n        self.get_logger().info(\"\u4fee\u6539\u540e: car_type = %s\" %param.value)\n\n    # 3-4.\u5220\u9664\u53c2\u6570\u3002\n    def del_param(self):\n        self.get_logger().info(\"--------------\u5220-------------\")\n        self.get_logger().info(\"\u5220\u9664\u64cd\u4f5c\u524d\u5305\u542b car_type \u5417\uff1f%d\" % self.has_parameter(\"car_type\"))\n        self.undeclare_parameter(\"car_type\")\n        self.get_logger().info(\"\u5220\u9664\u64cd\u4f5c\u540e\u5305\u542b car_type \u5417\uff1f%d\" % self.has_parameter(\"car_type\"))\n\n\ndef main():\n    # 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclpy.init()\n\n    # 4.\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\uff0c\u8c03\u7528\u53c2\u6570\u64cd\u4f5c\u51fd\u6570\uff0c\u5e76\u4f20\u9012\u7ed9spin\u51fd\u6570\uff1b\n    param_server = MinimalParamServer()\n    param_server.declare_param()\n    param_server.get_param()\n    param_server.update_param()\n    param_server.del_param()\n\n    rclpy.spin(param_server)\n\n    # 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclpy.shutdown()\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/254-can-shu-fu-wu-python-shi-xian/#2","title":"2.\u53c2\u6570\u5ba2\u6237\u7aef","text":"<p>ROS2\u7684Python\u5ba2\u6237\u7aef\u6682\u65f6\u6ca1\u6709\u63d0\u4f9b\u53c2\u6570\u5ba2\u6237\u7aef\u4e13\u7528\u7684API\uff0c\u4f46\u662f\u53c2\u6570\u670d\u52a1\u7684\u5e95\u5c42\u662f\u57fa\u4e8e\u670d\u52a1\u901a\u4fe1\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u670d\u52a1\u901a\u4fe1\u64cd\u4f5c\u53c2\u6570\u670d\u52a1\u7aef\u7684\u53c2\u6570\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/254-can-shu-fu-wu-python-shi-xian/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/254-can-shu-fu-wu-python-shi-xian/#1packagexml","title":"1.package.xml","text":"<p>\u5728\u521b\u5efa\u529f\u80fd\u5305\u65f6\uff0c\u6240\u4f9d\u8d56\u7684\u529f\u80fd\u5305\u5df2\u7ecf\u81ea\u52a8\u914d\u7f6e\u4e86\uff0c\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;depend&gt;rclpy&lt;/depend&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/254-can-shu-fu-wu-python-shi-xian/#2setuppy","title":"2.setup.py","text":"<p><code>entry_points</code>\u5b57\u6bb5\u7684<code>console_scripts</code>\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>entry_points={\n    'console_scripts': [\n        'demo01_param_server_py = py04_param.demo01_param_server_py:main'\n    ],\n},\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/254-can-shu-fu-wu-python-shi-xian/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select py04_param\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/25-can-shu-fu-wu/254-can-shu-fu-wu-python-shi-xian/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\uff0c\u7ec8\u7aef1\u6267\u884c\u53c2\u6570\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u7ec8\u7aef2\u6267\u884c\u53c2\u6570\u5ba2\u6237\u7aef\u7a0b\u5e8f\\(\u4f7f\u75282.5.3\u4e2d\u7684C++\u5b9e\u73b0\\)\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run py04_param demo01_param_server_py\n</code></pre> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 run cpp04_param demo02_param_client\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6848\u4f8b\u7c7b\u4f3c\u3002</p> <p>\u8d44\u6599\uff1a</p> <p>\u4ee5\u670d\u52a1\u901a\u4fe1\u65b9\u5f0f\u64cd\u4f5c\u53c2\u6570\u670d\u52a1\u7aef\u793a\u4f8b\u4ee3\u7801\uff1a</p> <pre><code># 1.\u5bfc\u5305\nimport rclpy\nfrom rclpy.node import Node\nfrom rcl_interfaces.srv import ListParameters\nfrom rcl_interfaces.srv import GetParameters\nfrom rcl_interfaces.srv import SetParameters\nfrom rcl_interfaces.msg import ParameterType\nfrom rcl_interfaces.msg import Parameter\nfrom rcl_interfaces.msg import ParameterValue\nfrom ros2param.api import get_parameter_value\n\nclass MinimalParamClient(Node):\n\n    def __init__(self):\n        super().__init__('minimal_param_client_py')\n\n    def list_params(self):\n        # 3-1.\u521b\u5efa\u5ba2\u6237\u7aef\uff1b\n        cli_list = self.create_client(ListParameters, '/minimal_param_server/list_parameters')\n        # 3-2.\u7b49\u5f85\u670d\u52a1\u8fde\u63a5\uff1b\n        while not cli_list.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('\u5217\u51fa\u53c2\u6570\u670d\u52a1\u8fde\u63a5\u4e2d\uff0c\u8bf7\u7a0d\u5019...')\n        req = ListParameters.Request()\n        future = cli_list.call_async(req)\n        rclpy.spin_until_future_complete(self,future)\n        return future.result()\n\n    def get_params(self,names):\n        # 3-1.\u521b\u5efa\u5ba2\u6237\u7aef\uff1b\n        cli_get = self.create_client(GetParameters, '/minimal_param_server/get_parameters')\n        # 3-2.\u7b49\u5f85\u670d\u52a1\u8fde\u63a5\uff1b\n        while not cli_get.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('\u5217\u51fa\u53c2\u6570\u670d\u52a1\u8fde\u63a5\u4e2d\uff0c\u8bf7\u7a0d\u5019...')\n        req = GetParameters.Request()\n        req.names = names\n        future = cli_get.call_async(req)\n        rclpy.spin_until_future_complete(self,future)\n        return future.result()\n\n    def set_params(self):\n        # 3-1.\u521b\u5efa\u5ba2\u6237\u7aef\uff1b\n        cli_set = self.create_client(SetParameters, '/minimal_param_server/set_parameters')\n        # 3-2.\u7b49\u5f85\u670d\u52a1\u8fde\u63a5\uff1b\n        while not cli_set.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('\u5217\u51fa\u53c2\u6570\u670d\u52a1\u8fde\u63a5\u4e2d\uff0c\u8bf7\u7a0d\u5019...')\n\n        req = SetParameters.Request()\n\n        p1 = Parameter()\n        p1.name = \"car_type\"\n\n        # v1 = ParameterValue()\n        # v1.type = ParameterType.PARAMETER_STRING\n        # v1.string_value = \"Pig\"\n        # p1.value = v1\n        p1.value = get_parameter_value(string_value=\"Pig\")\n\n        p2 = Parameter()\n        p2.name = \"height\"\n\n        v2 = ParameterValue()\n        v2.type = ParameterType.PARAMETER_DOUBLE\n        v2.double_value = 0.3\n        p2.value = v2\n        # p2.value = get_parameter_value(string_value=\"0.3\")\n\n        req.parameters = [p1, p2]\n        future = cli_set.call_async(req)\n        rclpy.spin_until_future_complete(self,future)\n        return future.result()\n\ndef main():\n    # 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclpy.init()\n    # 4.\u521b\u5efa\u5bf9\u8c61\u5e76\u8c03\u7528\u5176\u529f\u80fd\uff1b\n    client = MinimalParamClient()\n\n    # \u83b7\u53d6\u53c2\u6570\u5217\u8868\n    client.get_logger().info(\"---------\u83b7\u53d6\u53c2\u6570\u5217\u8868---------\")\n    response = client.list_params()\n    for name in response.result.names:\n        client.get_logger().info(name)\n\n    client.get_logger().info(\"---------\u83b7\u53d6\u53c2\u6570---------\")\n    names = [\"height\",\"car_type\"]\n    response = client.get_params(names)\n    # print(response.values)\n    for v in response.values:\n        if v.type == ParameterType.PARAMETER_STRING:\n            client.get_logger().info(\"\u5b57\u7b26\u4e32\u503c:%s\" % v.string_value)\n        elif v.type == ParameterType.PARAMETER_DOUBLE:\n            client.get_logger().info(\"\u6d6e\u70b9\u503c:%.2f\" % v.double_value)\n\n    client.get_logger().info(\"---------\u8bbe\u7f6e\u53c2\u6570---------\")\n    response = client.set_params()\n    results = response.results\n    client.get_logger().info(\"\u8bbe\u7f6e\u4e86%d\u4e2a\u53c2\u6570\" % len(results))\n    for result in results:\n        if not result.successful:\n            client.get_logger().info(\"\u53c2\u6570\u8bbe\u7f6e\u5931\u8d25\")\n    rclpy.shutdown()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/27-tong-xin-ji-zhi-jin-jie/271-lian-xi-01-hua-ti-tong-xin/","title":"271 lian xi 01 hua ti tong xin","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/27-tong-xin-ji-zhi-jin-jie/271-lian-xi-01-hua-ti-tong-xin/#271-01_","title":"2.7.1 \u7ec3\u4e6001_\u8bdd\u9898\u901a\u4fe1","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/","title":"1liu cheng xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/#1api","title":"1.\u6d41\u7a0b\u76f8\u5173API","text":"<p>\u4e00\u4e2a\u5178\u578b\u7684 ROS2 \u7a0b\u5e8f\u7531\u4ee5\u4e0b\u64cd\u4f5c\u7ec4\u6210\uff1a</p> <ol> <li>\u521d\u59cb\u5316\u5ba2\u6237\u7aef\uff0c\u5fc5\u987b\u5148\u4e8e\u8282\u70b9\u521b\u5efa\u5b8c\u6210\uff1b</li> <li>\u521b\u5efa\u4e00\u4e2a\u6216\u591a\u4e2a\u8282\u70b9\uff1b</li> <li>\u56de\u65cb\u51fd\u6570\u5904\u7406\u8282\u70b9\u4e2d\u56de\u8c03\u51fd\u6570\uff1b</li> <li>\u91ca\u653e\u8d44\u6e90\u3002</li> </ol> <p>\u4e0d\u7ba1\u662f rclcpp \u8fd8\u662f rclpy \u57fa\u672c\u7f16\u5199\u6d41\u7a0b\u90fd\u662f\u5982\u4e0a\u6240\u8ff0\uff0c\u672c\u8282\u5c06\u4e3b\u8981\u4ecb\u7ecd\u8fd9\u4e9b\u6b65\u9aa4\u4e2d\u5b9e\u7528\u7684\u76f8\u5173API\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/#1rclcpp","title":"1.rclcpp","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/#11","title":"1.1\u521d\u59cb\u5316","text":"<p>\u901a\u8fc7 rmw \u5b9e\u73b0\u521d\u59cb\u5316\u901a\u4fe1\u5e76\u8bbe\u7f6e\u5168\u5c40\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002</p> <pre><code>/**\n * \u901a\u8fc7\u51fd\u6570 rclcpp::contexts::get_global_default_context() \u521d\u59cb\u5316\u5168\u5c40 context\uff08\u4e0a\u4e0b\u6587\uff09\u3002\n * \u901a\u8fc7\u51fd\u6570 rclcpp::install_signal_handlers() \u5b89\u88c5\u5168\u5c40\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\n *\n * \\param[in] argc \u8981\u89e3\u6790\u7684\u547d\u4ee4\u884c\u53c2\u6570\u7684\u4e2a\u6570\u3002\n * \\param[in] argv \u8981\u89e3\u6790\u7684\u547d\u4ee4\u884c\u53c2\u6570\u6570\u7ec4\u3002\n * \\param[in] init_options \u8981\u5e94\u7528\u7684\u521d\u59cb\u5316\u9009\u9879\u3002\n * \\param[in] signal_handler_options \u7528\u4e8e\u58f0\u660e\u5e94\u5b89\u88c5\u54ea\u4e9b\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\n */\nvoid init(\n  int argc,\n  char const * const * argv,\n  const InitOptions &amp; init_options = InitOptions(),\n  SignalHandlerOptions signal_handler_options = SignalHandlerOptions::All);\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/#12","title":"1.2\u8282\u70b9\u521b\u5efa","text":"<p>\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\u6307\u9488\u3002</p> <pre><code>rclcpp::Node::make_shared();\n</code></pre> <p>\u6216\u8005\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8282\u70b9\u7c7b\uff0c\u7136\u540e\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff0c\u8282\u70b9\u6784\u9020\u51fd\u6570 3.6.2 \u4ecb\u7ecd\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/#13","title":"1.3\u56de\u65cb\u51fd\u6570","text":"<p>\u56de\u65cb\u51fd\u6570\u7528\u4e8e\u6267\u884c\u8282\u70b9\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>/// \u521b\u5efa\u4e00\u4e2a\u9ed8\u8ba4\u7684\u5355\u7ebf\u7a0b\u6267\u884c\u5668\u5e76\u56de\u65cb\u6307\u5b9a\u7684\u8282\u70b9\uff08\u5faa\u73af\u6267\u884c\uff09\u3002 \n/** \\param[in] node_ptr \u88ab\u56de\u65cb\u7684\u8282\u70b9\u7684\u6307\u9488\u3002 */\nvoid rclcpp::spin(rclcpp::Node::SharedPtr node_ptr);\n</code></pre> <pre><code>/// \u521b\u5efa\u4e00\u4e2a\u9ed8\u8ba4\u7684\u5355\u7ebf\u7a0b\u6267\u884c\u5668\u5e76\u56de\u65cb\u6307\u5b9a\u7684\u8282\u70b9\uff08\u53ea\u6267\u884c\u4f9d\u6b21\uff09\u3002\n/** \\param[in] node_ptr \u88ab\u56de\u65cb\u7684\u8282\u70b9\u7684\u6307\u9488\u3002 */\nvoid rclcpp::spin_some(rclcpp::Node::SharedPtr node_ptr);\n</code></pre> <pre><code>/// \u6267\u884c\u4efb\u52a1\u76f4\u81f3 future \u5b8c\u6210\uff0c\u9664\u975e\u8d85\u65f6\u6216 rclcpp \u88ab\u4e2d\u65ad\u3002\n/*\n* \\param[in] node_ptr \u88ab\u56de\u65cb\u7684\u8282\u70b9\u7684\u6307\u9488\u3002\n* \\param[in] future \u4fdd\u5b58\u672a\u6765\u8fd4\u56de\u7ed3\u679c\u7684\u5bf9\u8c61\u3002\n* \\param[in] timeout \u8d85\u65f6\u65f6\u95f4\u3002\n*/\ntemplate&lt;typename NodeT = rclcpp::Node, typename FutureT, typename TimeRepT = int64_t,\n  typename TimeT = std::milli&gt;\nrclcpp::FutureReturnCode spin_until_future_complete(\n  std::shared_ptr&lt;NodeT&gt; node_ptr,\n  const FutureT &amp; future,\n  std::chrono::duration&lt;TimeRepT, TimeT&gt; timeout = std::chrono::duration&lt;TimeRepT, TimeT&gt;(-1));\n</code></pre> <p>\u51fd\u6570 rclcpp::spin_some() \u4e00\u822c\u4f1a\u7ed3\u5408\u5faa\u73af\u4f7f\u7528\uff0c\u4e14\u5faa\u73af\u6761\u4ef6\u662f\u5f53\u524d\u5ba2\u6237\u7aef\u662f\u5426\u8fd0\u884c\u6b63\u5e38\uff0crclcpp \u72b6\u6001\u53ef\u4ee5\u901a\u8fc7rclcpp::ok()\u51fd\u6570\u5224\u65ad\u3002</p> <pre><code>/**\n * \u5f53\u7a0b\u5e8f\u5176\u4ed6\u90e8\u5206\u8c03\u7528\u4e86 rclcpp::shutdown() \u6216\u8005\u7531\u4e8erclcpp\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u63a5\u6536\u5230\u4e86\u5173\u95ed\u4fe1\u53f7\uff0c\n * \u6bd4\u5982\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528\u4e86 ctrl + c \u5feb\u6377\u952e\u3002\u4f1a\u8fd4\u56defalse\u3002\n * \n * \u5982\u679c cpntext \u53d6\u503c nullptr\uff0c\u5219\u4f7f\u7528\u5168\u5c40 context\uff0c\u5373\u7531 rclcpp::init() \u521d\u59cb\u5316\u7684 context\u3002\n *\n * \\param[in] context \u88ab\u5173\u95ed\u7684 context \u5bf9\u8c61\u6307\u9488\u3002\n * \\return context \u88ab\u5173\u95ed\u65f6\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002\n */\nbool rclcpp::ok(rclcpp::Context::SharedPtr context = nullptr);\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/#14","title":"1.4\u91ca\u653e\u8d44\u6e90","text":"<p>\u5173\u95ed context \uff08\u4e0a\u4e0b\u6587\u5bf9\u8c61\uff09\u3002</p> <pre><code>/**\n * \u5982\u679c\u4e3a context \u4f20\u53c2 nullptr,\u90a3\u4e48\u5c31\u5173\u95ed\u901a\u8fc7 rclcpp::init() \u521b\u5efa\u7684\u5168\u5c40 context\u3002\n * \u5982\u679c\u4f7f\u7528\u5168\u5c40 context\uff0c\u5219\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u4e5f\u4f1a\u88ab\u5378\u8f7d\u3002\n *\n * \u6267\u884c\u8be5\u51fd\u6570\u65f6\uff0c\u4e5f\u5c06\u56de\u8c03 on_shutdown() \u51fd\u6570\u3002\n *\n * \\param[in] context \u88ab\u5173\u95ed\u7684 context\u3002\n * \\param[in] reason \u4f20\u9012\u7ed9\u5173\u95ed context \u51fd\u6570\u7684\u5b57\u7b26\u4e32\u3002\n * \\return \u5982\u679c\u5173\u95ed\u6210\u529f\uff0c\u5219\u4e3a true\uff0c\u5982\u679c context \u5df2\u5173\u95ed\uff0c\u5219\u4e3a false\u3002\n */\nbool rclcpp::shutdown(\n  rclcpp::Context::SharedPtr context = nullptr,\n  const std::string &amp; reason = \"user called rclcpp::shutdown()\");\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/#2rclpy","title":"2.rclpy","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/#11_1","title":"1.1\u521d\u59cb\u5316","text":"<p>\u521d\u59cb\u5316 rclpy \u5ba2\u6237\u7aef\u3002</p> <pre><code>def init(\n    *,\n    args: Optional[List[str]] = None,\n    context: Context = None,\n    domain_id: Optional[int] = None,\n    signal_handler_options: Optional[SignalHandlerOptions] = None,\n) -&gt; None:\n    \"\"\"\n    \u4e3a\u7ed9\u5b9a\u7684 context \u521d\u59cb\u5316 ROS2 \u901a\u4fe1\u3002\n    :param args: \u547d\u4ee4\u884c\u53c2\u6570\u5217\u8868\u3002\n    :param context: \u7528\u4e8e\u521d\u59cb\u5316\u7684 context\uff0c \u5982\u679c\u662f ``None``,\u90a3\u4e48\u901a\u8fc7\u51fd\u6570 .get_default_context \u83b7\u53d6\u9ed8\u8ba4 context\u3002\n    :param domain_id: domain id\u503c\u3002\n    :param signal_handler_options: \u58f0\u660e\u8981\u5b89\u88c5\u7684\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\n    :return: None\n    \"\"\"\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/#12_1","title":"1.2\u8282\u70b9\u521b\u5efa","text":"<p>\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\u3002</p> <pre><code>def create_node(\n    node_name: str,\n    *,\n    context: Context = None,\n    cli_args: List[str] = None,\n    namespace: str = None,\n    use_global_arguments: bool = True,\n    enable_rosout: bool = True,\n    start_parameter_services: bool = True,\n    parameter_overrides: List[Parameter] = None,\n    allow_undeclared_parameters: bool = False,\n    automatically_declare_parameters_from_overrides: bool = False\n) -&gt; 'Node':\n    \"\"\"\n    \u521b\u5efa Node \u5bf9\u8c61\u3002\n\n    :param node_name: \u8282\u70b9\u540d\u79f0\u3002\n    :param context: \u4e0e\u8282\u70b9\u5173\u8054\u7684context, \u5982\u679c\u662f ``None`` \u90a3\u4e48\u4f7f\u7528\u9ed8\u8ba4\u7684\u5168\u5c40 context\u3002\n    :param cli_args: \u8282\u70b9\u4f7f\u7528\u7684\u547d\u4ee4\u884c\u53c2\u6570\u3002\u5e94\u7528\u4e8e ROS2 \u8282\u70b9\uff0c\u53c2\u6570\u4e4b\u524d\u5305\u542b\u9690\u5f0f\u7684 `--ros-args`\u3002\n    :param namespace: \u4e0e\u8282\u70b9\u5173\u8054\u7684\u547d\u540d\u7a7a\u95f4\u3002\n    :param use_global_arguments: \u8282\u70b9\u662f\u5426\u4f7f\u7528\u8fdb\u7a0b\u8303\u56f4\u7684\u547d\u4ee4\u884c\u53c2\u6570\u3002\n    :param enable_rosout: rosout \u65e5\u5fd7\u8bb0\u5f55\u662f\u5426\u53ef\u7528\u3002\n    :param start_parameter_services: \u662f\u5426\u542f\u7528\u53c2\u6570\u670d\u52a1\u3002\n    :param parameter_overrides: \u4e00\u4e2a`Parameter`\u5bf9\u8c61\u5217\u8868\uff0c\u7528\u4e8e\u8986\u76d6\u5728\u6b64\u8282\u70b9\u4e0a\u58f0\u660e\u7684\u53c2\u6570\u7684\u521d\u59cb\u503c\u3002\n    :param allow_undeclared_parameters: \u662f\u5426\u5141\u8bb8\u672a\u58f0\u660e\u7684\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a False\uff08\u4e0d\u5141\u8bb8\uff09\u3002\n    :param automatically_declare_parameters_from_overrides: \u5982\u679c\u4e3a True\uff0c\u5219\u201c\u53c2\u6570\u8986\u76d6\u201d\u5c06\u7528\u4e8e\u5728\u521b\u5efa\u671f\u95f4\u9690\u5f0f\u58f0\u660e\u8282\u70b9\u4e0a\u7684\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a False\u3002\n    :return: \u8282\u70b9\u5bf9\u8c61.\n    \"\"\"\n</code></pre> <p>\u6216\u8005\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8282\u70b9\u7c7b\uff0c\u7136\u540e\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\uff0c\u8282\u70b9\u6784\u9020\u51fd\u6570 3.6.2 \u4ecb\u7ecd\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/#13_1","title":"1.3\u56de\u65cb\u51fd\u6570","text":"<p>\u56de\u65cb\u51fd\u6570\u7528\u4e8e\u6267\u884c\u8282\u70b9\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>def spin(node: 'Node', executor: 'Executor' = None) -&gt; None:\n    \"\"\"\n    \u6267\u884c\u4efb\u52a1\u5e76\u963b\u585e\uff0c\u76f4\u5230\u4e0e\u6267\u884c\u5668\u5173\u8054\u7684\u4e0a\u4e0b\u6587\u5173\u95ed\u3002\n    \u56de\u8c03\u51fd\u6570\u5c06\u7531\u63d0\u4f9b\u7684\u6267\u884c\u5668\u6267\u884c\u3002\n\n    :param node: \u9700\u8981\u88ab\u56de\u65cb\u6267\u884c\u7684\u8282\u70b9\u3002\n    :param executor: \u8981\u4f7f\u7528\u7684\u6267\u884c\u5668\uff0c\u5982\u679c\u53d6\u503c ``None`` \u90a3\u4e48\u4f7f\u7528\u5168\u5c40\u6267\u884c\u5668\u3002\n    :return: None\n    \"\"\"\n</code></pre> <pre><code>def spin_once(node: 'Node', *, executor: 'Executor' = None, timeout_sec: float = None) -&gt; None:\n    \"\"\"\n    \u53ea\u8981\u56de\u8c03\u5728\u8d85\u65f6\u5230\u671f\u4e4b\u524d\u51c6\u5907\u597d\uff0c\u63d0\u4f9b\u7684\u6267\u884c\u7a0b\u5e8f\u5c31\u4f1a\u6267\u884c\u4e00\u6b21\u56de\u8c03\u3002\n    \u5982\u679c\u6ca1\u6709\u63d0\u4f9bExecutor\uff08\u5373\u3002None\uff09\uff0c\u5219\u4f7f\u7528\u5168\u5c40\u6267\u884c\u5668\u3002\u5982\u679c\u5168\u5c40\u6267\u884c\u7a0b\u5e8f\u6709\u4e00\u4e2a\u90e8\u5206\u5b8c\u6210\u7684\u534f\u7a0b\uff0c\u5219\u5b8c\u6210\u7684\u5de5\u4f5c\u53ef\u80fd\u662f\u9488\u5bf9\u63d0\u4f9b\u7684\u8282\u70b9\u4ee5\u5916\u7684\u8282\u70b9\u3002\n\n    :param node: \u9700\u8981\u88ab\u56de\u65cb\u6267\u884c\u7684\u8282\u70b9\u3002\n    :param executor: \u8981\u4f7f\u7528\u7684\u6267\u884c\u5668\uff0c\u5982\u679c\u53d6\u503c ``None`` \u90a3\u4e48\u4f7f\u7528\u5168\u5c40\u6267\u884c\u5668\u3002\n    :param timeout_sec: \u8d85\u65f6\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5982\u679c\u662f``None``\u5219\u65e0\u9650\u671f\u7b49\u5f85\u3002\u5982\u679c\u4e3a 0\uff0c\u5219\u4e0d\u8981\u7b49\u5f85\u3002\n    :return: None\n    \"\"\"\n</code></pre> <pre><code>def spin_until_future_complete(\n    node: 'Node',\n    future: Future,\n    executor: 'Executor' = None,\n    timeout_sec: float = None\n) -&gt; None:\n    \"\"\"\n    \u6267\u884c\u4efb\u52a1\uff0c\u76f4\u5230 future \u5b8c\u6210\u3002\n\n    \u56de\u8c03\u548c\u5176\u4ed6\u5de5\u4f5c\u5c06\u7531\u63d0\u4f9b\u7684\u6267\u884c\u7a0b\u5e8f\u6267\u884c\uff0c\u76f4\u5230future.done() \u8fd4\u56deTrue\u6216\u4e0e\u6267\u884c\u7a0b\u5e8f\u5173\u8054\u7684 context \u5173\u95ed\u3002\n\n    :param node: \u6dfb\u52a0\u5230\u6267\u884c\u7a0b\u5e8f\u4ee5\u6267\u884c\u4efb\u52a1\u7684\u8282\u70b9\u3002\n    :param future: \u8981\u7b49\u5f85\u7684 future \u5bf9\u8c61\u3002\n    :param executor: \u8981\u4f7f\u7528\u7684\u6267\u884c\u5668\uff0c\u5982\u679c\u53d6\u503c ``None`` \u90a3\u4e48\u4f7f\u7528\u5168\u5c40\u6267\u884c\u5668\u3002\n    :param timeout_sec: \u8d85\u65f6\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5982\u679c\u662f``None``\u5219\u65e0\u9650\u671f\u7b49\u5f85\u3002\u5982\u679c\u4e3a 0\uff0c\u5219\u4e0d\u8981\u7b49\u5f85\u3002\n    :return: None\n    \"\"\"\n</code></pre> <pre><code>def ok(*, context=None):\n    \"\"\"\n    \u5f53\u7a0b\u5e8f\u5176\u4ed6\u90e8\u5206\u8c03\u7528\u4e86 rclpy.shutdown() \u6216\u8005\u7531\u4e8erclpy\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u63a5\u6536\u5230\u4e86\u5173\u95ed\u4fe1\u53f7\uff0c\n    \u6bd4\u5982\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528\u4e86 ctrl + c \u5feb\u6377\u952e\u3002\u4f1a\u8fd4\u56defalse\u3002\n\n    \u5982\u679c cpntext \u53d6\u503c None\uff0c\u5219\u4f7f\u7528\u5168\u5c40 context\uff0c\u5373\u7531 rclpy.init() \u521d\u59cb\u5316\u7684 context\u3002\n\n    :param node: \u88ab\u5224\u65ad\u7684 context\u3002\n    :return: context \u88ab\u5173\u95ed\u65f6\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002\n    \"\"\"\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/1liu-cheng-xiang-guan-api/#14_1","title":"1.4\u91ca\u653e\u8d44\u6e90","text":"<pre><code>def shutdown(*, context: Context = None, uninstall_handlers: Optional[bool] = None) -&gt; None:\n    \"\"\"\n    \u5173\u95ed\u4e4b\u524d\u521d\u59cb\u5316\u7684 context\u3002\n\n    :param context: \u4e0e\u8282\u70b9\u5173\u8054\u7684context, \u5982\u679c\u662f ``None``,\u90a3\u4e48\u901a\u8fc7\u51fd\u6570 .get_default_context \u83b7\u53d6\u9ed8\u8ba4 context\u3002\n    :param uninstall_handlers:\n        \u5982\u679c\u662f `None`\uff0c\u9ed8\u8ba4\u5173\u95ed\u4e0a\u4e0b\u6587\u65f6\u5c06\u5378\u8f7d\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\n        \u5982\u679c\u662f `True`\uff0c\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u5c06\u88ab\u5378\u8f7d\u3002\n        \u5982\u679c\u662f `False`\uff0c\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u4e0d\u4f1a\u88ab\u5378\u8f7d\u3002\n    :return: None\n    \"\"\"\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/2jie-dian-xiang-guan-api/","title":"2jie dian xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/2jie-dian-xiang-guan-api/#2api","title":"2.\u8282\u70b9\u76f8\u5173API","text":"<p>\u8282\u70b9\u662f ROS2 \u7a0b\u5e8f\u4e2d\u7684\u57fa\u672c\u5355\u5143\uff0c\u53ef\u4ee5\u521b\u5efa\u5404\u79cd\u7c7b\u578b\u7684\u901a\u4fe1\u5bf9\u8c61\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/2jie-dian-xiang-guan-api/#1node","title":"1.Node\u6784\u9020\u51fd\u6570","text":"<p>\u521b\u5efa\u5177\u6709\u6307\u5b9a\u540d\u79f0\u7684\u65b0\u8282\u70b9\u3002</p> <pre><code>/**\n * \\param[in] node_name \u8282\u70b9\u540d\u79f0\u3002\n * \\param[in] options \u8282\u70b9\u521b\u5efa\u7684\u9644\u52a0\u9009\u9879\u3002\n * \\throws InvalidNamespaceError \u547d\u540d\u7a7a\u95f4\u65e0\u6548\u5f02\u5e38\u3002\n */\nrclcpp::Node::Node(\n  const std::string &amp; node_name,\n  const NodeOptions &amp; options = NodeOptions());\n/**\n * \\param[in] node_name \u8282\u70b9\u540d\u79f0\u3002\n * \\param[in] namespace_ \u8282\u70b9\u547d\u540d\u7a7a\u95f4\u3002\n * \\param[in] options \u8282\u70b9\u521b\u5efa\u7684\u9644\u52a0\u9009\u9879\u3002\n * \\throws InvalidNamespaceError \u547d\u540d\u7a7a\u95f4\u65e0\u6548\u5f02\u5e38\u3002\n */\nrclcpp::Node::Node(\n  const std::string &amp; node_name,\n  const std::string &amp; namespace_,\n  const NodeOptions &amp; options = NodeOptions());\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/2jie-dian-xiang-guan-api/#2","title":"2.\u5e38\u7528\u51fd\u6570","text":"<pre><code>/// Get the name of the node.\n/** \\return The name of the node. */\nRCLCPP_PUBLIC\nconst char *\nget_name() const;\n\n/// Get the namespace of the node.\n/**\n * This namespace is the \"node's\" namespace, and therefore is not affected\n * by any sub-namespace's that may affect entities created with this instance.\n * Use get_effective_namespace() to get the full namespace used by entities.\n *\n * \\sa get_sub_namespace()\n * \\sa get_effective_namespace()\n * \\return The namespace of the node.\n */\nRCLCPP_PUBLIC\nconst char *\nget_namespace() const;\n\n/// Get the fully-qualified name of the node.\n/**\n * The fully-qualified name includes the local namespace and name of the node.\n * \\return fully-qualified name of the node.\n */\nRCLCPP_PUBLIC\nconst char *\nget_fully_qualified_name() const;\n\n/// Get the logger of the node.\n/** \\return The logger of the node. */\nRCLCPP_PUBLIC\nrclcpp::Logger\nget_logger() const;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/2jie-dian-xiang-guan-api/#3","title":"3.\u8bdd\u9898\u901a\u4fe1","text":"<pre><code>/// Create and return a Publisher.\n/**\n * The rclcpp::QoS has several convenient constructors, including a\n * conversion constructor for size_t, which mimics older API's that\n * allows just a string and size_t to create a publisher.\n *\n * For example, all of these cases will work:\n *\n * ```cpp\n * pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", 10);  // implicitly KeepLast\n * pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", QoS(10));  // implicitly KeepLast\n * pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", QoS(KeepLast(10)));\n * pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", QoS(KeepAll()));\n * pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", QoS(1).best_effort().durability_volatile());\n * {\n *   rclcpp::QoS custom_qos(KeepLast(10), rmw_qos_profile_sensor_data);\n *   pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", custom_qos);\n * }\n * ```\n *\n * The publisher options may optionally be passed as the third argument for\n * any of the above cases.\n *\n * \\param[in] topic_name The topic for this publisher to publish on.\n * \\param[in] qos The Quality of Service settings for the publisher.\n * \\param[in] options Additional options for the created Publisher.\n * \\return Shared pointer to the created publisher.\n */\ntemplate&lt;\n  typename MessageT,\n  typename AllocatorT = std::allocator&lt;void&gt;,\n  typename PublisherT = rclcpp::Publisher&lt;MessageT, AllocatorT&gt;&gt;\nstd::shared_ptr&lt;PublisherT&gt;\ncreate_publisher(\n  const std::string &amp; topic_name,\n  const rclcpp::QoS &amp; qos,\n  const PublisherOptionsWithAllocator&lt;AllocatorT&gt; &amp; options =\n  PublisherOptionsWithAllocator&lt;AllocatorT&gt;()\n);\n\n/// Create and return a Subscription.\n/**\n * \\param[in] topic_name The topic to subscribe on.\n * \\param[in] qos QoS profile for Subcription.\n * \\param[in] callback The user-defined callback function to receive a message\n * \\param[in] options Additional options for the creation of the Subscription.\n * \\param[in] msg_mem_strat The message memory strategy to use for allocating messages.\n * \\return Shared pointer to the created subscription.\n */\ntemplate&lt;\n  typename MessageT,\n  typename CallbackT,\n  typename AllocatorT = std::allocator&lt;void&gt;,\n  typename SubscriptionT = rclcpp::Subscription&lt;MessageT, AllocatorT&gt;,\n  typename MessageMemoryStrategyT = typename SubscriptionT::MessageMemoryStrategyType\n&gt;\nstd::shared_ptr&lt;SubscriptionT&gt;\ncreate_subscription(\n  const std::string &amp; topic_name,\n  const rclcpp::QoS &amp; qos,\n  CallbackT &amp;&amp; callback,\n  const SubscriptionOptionsWithAllocator&lt;AllocatorT&gt; &amp; options =\n  SubscriptionOptionsWithAllocator&lt;AllocatorT&gt;(),\n  typename MessageMemoryStrategyT::SharedPtr msg_mem_strat = (\n    MessageMemoryStrategyT::create_default()\n  )\n);\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-2-zhang-ros2-tong-xin-ji-zhi-he-xin/zi-liao-ff1a-api-wen-dang/2jie-dian-xiang-guan-api/#4","title":"4.\u670d\u52a1\u901a\u4fe1","text":"<pre><code>/// Create and return a Client.\n/**\n * \\param[in] service_name The topic to service on.\n * \\param[in] qos_profile rmw_qos_profile_t Quality of service profile for client.\n * \\param[in] group Callback group to call the service.\n * \\return Shared pointer to the created client.\n */\ntemplate&lt;typename ServiceT&gt;\ntypename rclcpp::Client&lt;ServiceT&gt;::SharedPtr\ncreate_client(\n  const std::string &amp; service_name,\n  const rmw_qos_profile_t &amp; qos_profile = rmw_qos_profile_services_default,\n  rclcpp::CallbackGroup::SharedPtr group = nullptr);\n\n/// Create and return a Service.\n/**\n * \\param[in] service_name The topic to service on.\n * \\param[in] callback User-defined callback function.\n * \\param[in] qos_profile rmw_qos_profile_t Quality of service profile for client.\n * \\param[in] group Callback group to call the service.\n * \\return Shared pointer to the created service.\n */\ntemplate&lt;typename ServiceT, typename CallbackT&gt;\ntypename rclcpp::Service&lt;ServiceT&gt;::SharedPtr\ncreate_service(\n  const std::string &amp; service_name,\n  CallbackT &amp;&amp; callback,\n  const rmw_qos_profile_t &amp; qos_profile = rmw_qos_profile_services_default,\n  rclcpp::CallbackGroup::SharedPtr group = nullptr);\n</code></pre> <p>\u5b9a\u65f6\u5668</p> <pre><code>/// Create a timer.\n/**\n * \\param[in] period Time interval between triggers of the callback.\n * \\param[in] callback User-defined callback function.\n * \\param[in] group Callback group to execute this timer's callback in.\n */\ntemplate&lt;typename DurationRepT = int64_t, typename DurationT = std::milli, typename CallbackT&gt;\ntypename rclcpp::WallTimer&lt;CallbackT&gt;::SharedPtr\ncreate_wall_timer(\n  std::chrono::duration&lt;DurationRepT, DurationT&gt; period,\n  CallbackT callback,\n  rclcpp::CallbackGroup::SharedPtr group = nullptr);\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/31-fen-bu-shi/","title":"31 fen bu shi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/31-fen-bu-shi/#31","title":"3.1 \u5206\u5e03\u5f0f","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/31-fen-bu-shi/#_1","title":"\u573a\u666f","text":"<p>\u5728\u8bb8\u591a\u673a\u5668\u4eba\u76f8\u5173\u7684\u5e94\u7528\u573a\u666f\u4e2d\u90fd\u6d89\u53ca\u5230\u591a\u53f0ROS2\u8bbe\u5907\u534f\u4f5c\uff0c\u6bd4\u5982\uff1a\u65e0\u4eba\u8f66\u7f16\u961f\u3001\u65e0\u4eba\u673a\u7f16\u961f\u3001\u8fdc\u7a0b\u63a7\u5236\u7b49\u7b49\uff0c\u90a3\u4e48\u4e0d\u540c\u7684ROS2\u8bbe\u5907\u4e4b\u95f4\u662f\u5982\u4f55\u5b9e\u73b0\u901a\u4fe1\u7684\u5462\uff1f</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/31-fen-bu-shi/#_2","title":"\u6982\u5ff5","text":"<p>\u5206\u5e03\u5f0f\u901a\u4fe1\u662f\u6307\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u5728\u4e0d\u540c\u4e3b\u673a\u4e4b\u95f4\u5b9e\u73b0\u6570\u636e\u4ea4\u4e92\u7684\u4e00\u79cd\u901a\u4fe1\u7b56\u7565\u3002</p> <p>ROS2\u672c\u8eab\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u901a\u4fe1\u6846\u67b6\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\u4e0d\u540c\u8bbe\u5907\u4e4b\u95f4\u7684\u901a\u4fe1\uff0cROS2\u6240\u57fa\u4e8e\u7684\u4e2d\u95f4\u4ef6\u662fDDS\uff0c\u5f53\u5904\u4e8e\u540c\u4e00\u7f51\u7edc\u4e2d\u65f6\uff0c\u901a\u8fc7DDS\u7684\u57dfID\u673a\u5236\\(ROS\\_DOMAIN\\_ID\\)\u53ef\u4ee5\u5b9e\u73b0\u5206\u5e03\u5f0f\u901a\u4fe1\uff0c\u5927\u81f4\u6d41\u7a0b\u662f\uff1a\u5728\u542f\u52a8\u8282\u70b9\u4e4b\u524d\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u57dfID\u7684\u503c\uff0c\u4e0d\u540c\u8282\u70b9\u5982\u679c\u57dfID\u76f8\u540c\uff0c\u90a3\u4e48\u53ef\u4ee5\u81ea\u7531\u53d1\u73b0\u5e76\u901a\u4fe1\uff0c\u53cd\u4e4b\uff0c\u5982\u679c\u57dfID\u503c\u4e0d\u540c\uff0c\u5219\u4e0d\u80fd\u5b9e\u73b0\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u8282\u70b9\u542f\u52a8\u65f6\u6240\u4f7f\u7528\u7684\u57dfID\u4e3a0\uff0c\u6362\u8a00\u4e4b\uff0c\u53ea\u8981\u4fdd\u8bc1\u5728\u540c\u4e00\u7f51\u7edc\uff0c\u4f60\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u914d\u7f6e\uff0c\u4e0d\u540cROS2\u8bbe\u5907\u4e0a\u7684\u4e0d\u540c\u8282\u70b9\u5373\u53ef\u5b9e\u73b0\u5206\u5e03\u5f0f\u901a\u4fe1\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/31-fen-bu-shi/#_3","title":"\u4f5c\u7528","text":"<p>\u5206\u5e03\u5f0f\u901a\u4fe1\u7684\u5e94\u7528\u573a\u666f\u662f\u8f83\u4e3a\u5e7f\u6cdb\u7684\uff0c\u5982\u4e0a\u6240\u8ff0\uff1a\u673a\u5668\u4eba\u7f16\u961f\u65f6\uff0c\u673a\u5668\u4eba\u53ef\u80fd\u9700\u8981\u83b7\u53d6\u5468\u8fb9\u673a\u5668\u4eba\u7684\u901f\u5ea6\u3001\u4f4d\u7f6e\u3001\u8fd0\u884c\u8f68\u8ff9\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u8fdc\u7a0b\u63a7\u5236\u65f6\uff0c\u5219\u53ef\u80fd\u9700\u8981\u63a7\u5236\u7aef\u83b7\u53d6\u673a\u5668\u4eba\u91c7\u96c6\u7684\u73af\u5883\u4fe1\u606f\u5e76\u4e0b\u53d1\u63a7\u5236\u6307\u4ee4...... \u8fd9\u4e9b\u6570\u636e\u7684\u4ea4\u4e92\u90fd\u4f9d\u8d56\u4e8e\u5206\u5e03\u5f0f\u901a\u4fe1\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/31-fen-bu-shi/#_4","title":"\u5b9e\u73b0","text":"<p>\u591a\u673a\u901a\u4fe1\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u57dfID\u5bf9\u8282\u70b9\u8fdb\u884c\u5206\u7ec4\uff0c\u7ec4\u5185\u7684\u8282\u70b9\u4e4b\u95f4\u53ef\u4ee5\u81ea\u7531\u901a\u4fe1\uff0c\u4e0d\u540c\u7ec4\u4e4b\u95f4\u7684\u8282\u70b9\u5219\u4e0d\u53ef\u901a\u4fe1\u3002\u5982\u679c\u6240\u6709\u8282\u70b9\u90fd\u5c5e\u4e8e\u540c\u4e00\u7ec4\uff0c\u90a3\u4e48\u76f4\u63a5\u4f7f\u7528\u9ed8\u8ba4\u57dfID\u5373\u53ef\uff0c\u5982\u679c\u8981\u5c06\u4e0d\u540c\u8282\u70b9\u5212\u5206\u4e3a\u591a\u4e2a\u7ec4\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e2d\u542f\u52a8\u8282\u70b9\u524d\u8bbe\u7f6e\u8be5\u8282\u70b9\u7684\u57dfID\\(\u6bd4\u5982\u8bbe\u7f6e\u4e3a6\\)\uff0c\u5177\u4f53\u6267\u884c\u547d\u4ee4\u4e3a\uff1a</p> <pre><code>export ROS_DOMAIN_ID=6\n</code></pre> <p>\u4e0a\u8ff0\u6307\u4ee4\u6267\u884c\u540e\uff0c\u8be5\u8282\u70b9\u5c06\u88ab\u5212\u5206\u5230ID\u4e3a6\u7684\u57df\u5185\u3002</p> <p>\u5982\u679c\u8981\u4e3a\u5f53\u524d\u8bbe\u5907\u4e0b\u7684\u6240\u6709\u8282\u70b9\u8bbe\u7f6e\u7edf\u4e00\u7684\u57dfID\uff0c\u90a3\u4e48\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>echo \"export ROS_DOMAIN_ID=6\" &gt;&gt; ~/.bashrc\n</code></pre> <p>\u6267\u884c\u5b8c\u6bd5\u540e\u518d\u91cd\u65b0\u542f\u52a8\u7ec8\u7aef\uff0c\u8fd0\u884c\u7684\u6240\u6709\u8282\u70b9\u5c06\u81ea\u52a8\u88ab\u5212\u5206\u5230ID\u4e3a6\u7684\u57df\u5185\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/31-fen-bu-shi/#_5","title":"\u6f14\u793a","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/31-fen-bu-shi/#_6","title":"\u6ce8\u610f","text":"<p>\u5728\u8bbe\u7f6eROS_DOMAIN_ID\u7684\u503c\u65f6\u5e76\u4e0d\u662f\u968f\u610f\u7684\uff0c\u4e5f\u662f\u6709\u4e00\u5b9a\u7ea6\u675f\u7684\uff1a</p> <ol> <li>\u5efa\u8baeROS_DOMAIN_ID\u7684\u53d6\u503c\u5728[0,101] \u4e4b\u95f4\uff0c\u5305\u542b0\u548c101\uff1b</li> <li>\u6bcf\u4e2a\u57dfID\u5185\u7684\u8282\u70b9\u603b\u6570\u662f\u6709\u9650\u5236\u7684\uff0c\u9700\u8981\u5c0f\u4e8e\u7b49\u4e8e120\u4e2a\uff1b</li> <li>\u5982\u679c\u57dfID\u4e3a101\uff0c\u90a3\u4e48\u8be5\u57df\u7684\u8282\u70b9\u603b\u6570\u9700\u8981\u5c0f\u4e8e\u7b49\u4e8e54\u4e2a\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/31-fen-bu-shi/#dds-id","title":"DDS \u57df ID \u503c\u7684\u8ba1\u7b97\u89c4\u5219","text":"<p>\u57dfID\u503c\u7684\u76f8\u5173\u8ba1\u7b97\u89c4\u5219\u5982\u4e0b\uff1a</p> <ol> <li>DDS\u662f\u57fa\u4e8eTCP/IP\u6216UDP/IP\u7f51\u7edc\u901a\u4fe1\u534f\u8bae\u7684\uff0c\u7f51\u7edc\u901a\u4fe1\u65f6\u9700\u8981\u6307\u5b9a\u7aef\u53e3\u53f7\uff0c\u7aef\u53e3\u53f7\u75312\u4e2a\u5b57\u8282\u7684\u65e0\u7b26\u53f7\u6574\u6570\u8868\u793a\uff0c\u5176\u53d6\u503c\u8303\u56f4\u5728[0,65535]\u4e4b\u95f4\uff1b</li> <li>\u7aef\u53e3\u53f7\u7684\u5206\u914d\u4e5f\u662f\u6709\u5176\u89c4\u5219\u7684\uff0c\u5e76\u975e\u53ef\u4ee5\u4efb\u610f\u4f7f\u7528\u7684\uff0c\u6839\u636eDDS\u534f\u8bae\u89c4\u5b9a\u4ee57400\u4f5c\u4e3a\u8d77\u59cb\u7aef\u53e3\uff0c\u4e5f\u5373\u53ef\u7528\u7aef\u53e3\u4e3a[7400,65535]\uff0c\u53c8\u5df2\u77e5\u6309\u7167DDS\u534f\u8bae\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u57dfID\u5360\u7528250\u4e2a\u7aef\u53e3\uff0c\u90a3\u4e48\u57dfID\u7684\u4e2a\u6570\u4e3a\uff1a\\(65535-7400\\)/250 = 232\\(\u4e2a\\)\uff0c\u5bf9\u5e94\u7684\u5176\u53d6\u503c\u8303\u56f4\u4e3a[0,231]\uff1b</li> <li>\u64cd\u4f5c\u7cfb\u7edf\u8fd8\u4f1a\u8bbe\u7f6e\u4e00\u4e9b\u9884\u7559\u7aef\u53e3\uff0c\u5728DDS\u4e2d\u4f7f\u7528\u7aef\u53e3\u65f6\uff0c\u8fd8\u9700\u8981\u907f\u5f00\u8fd9\u4e9b\u9884\u7559\u7aef\u53e3\uff0c\u4ee5\u514d\u4f7f\u7528\u4e2d\u4ea7\u751f\u51b2\u7a81\uff0c\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u9884\u7559\u7aef\u53e3\u53c8\u6709\u6240\u5dee\u5f02\uff0c\u5176\u6700\u7ec8\u7ed3\u679c\u662f\uff0c\u5728Linux\u4e0b\uff0c\u53ef\u7528\u7684\u57dfID\u4e3a[0,101]\u4e0e[215-231]\uff0c\u5728Windows\u548cMac\u4e2d\u53ef\u7528\u7684\u57dfID\u4e3a[0,166]\uff0c\u7efc\u4e0a\uff0c\u4e3a\u4e86\u517c\u5bb9\u591a\u5e73\u53f0\uff0c\u5efa\u8bae\u57dfID\u5728[0,101] \u8303\u56f4\u5185\u53d6\u503c\u3002</li> <li>\u6bcf\u4e2a\u57dfID\u9ed8\u8ba4\u5360\u7528250\u4e2a\u7aef\u53e3\uff0c\u4e14\u6bcf\u4e2aROS2\u8282\u70b9\u9700\u8981\u5360\u7528\u4e24\u4e2a\u7aef\u53e3\uff0c\u53e6\u5916\uff0c\u6309\u7167DDS\u534f\u8bae\u6bcf\u4e2a\u57dfID\u7684\u7aef\u53e3\u6bb5\u5185\uff0c\u7b2c1\u30012\u4e2a\u7aef\u53e3\u662fDiscovery Multicast\u7aef\u53e3\u4e0eUser Multicast\u7aef\u53e3\uff0c\u4ece\u7b2c11\u300112\u4e2a\u7aef\u53e3\u5f00\u59cb\u662f\u57df\u5185\u7b2c\u4e00\u4e2a\u8282\u70b9\u7684Discovery Unicast\u7aef\u53e3\u4e0eUser Unicast\uff0c\u540e\u7eed\u8282\u70b9\u6240\u5360\u7528\u7aef\u53e3\u4f9d\u6b21\u987a\u5ef6\uff0c\u90a3\u4e48\u4e00\u4e2a\u57dfID\u4e2d\u7684\u6700\u5927\u8282\u70b9\u4e2a\u6570\u4e3a\uff1a\\(250-10\\)/2 = 120\\(\u4e2a\\)\uff1b</li> <li>\u7279\u6b8a\u60c5\u51b5\uff1a\u57dfID\u503c\u4e3a101\u65f6\uff0c\u5176\u540e\u534a\u6bb5\u7aef\u53e3\u5c5e\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u9884\u7559\u7aef\u53e3\uff0c\u5176\u8282\u70b9\u6700\u5927\u4e2a\u6570\u4e3a54\u4e2a\u3002</li> </ol> <p>\u4e0a\u8ff0\u8ba1\u7b97\u89c4\u5219\u4e86\u89e3\u5373\u53ef\u3002</p> <p>\u9644\uff1a</p> <pre><code>\u57df ID \u4e0e\u8282\u70b9\u6240\u5360\u7528\u7aef\u53e3\u793a\u610f\n\nDomain ID:      0\nParticipant ID: 0\n\nDiscovery Multicast Port: 7400\nUser Multicast Port:      7401\nDiscovery Unicast Port:   7410\nUser Unicast Port:        7411\n\n---\n\nDomain ID:      1\nParticipant ID: 2\nDiscovery Multicast Port: 7650\nUser Multicast Port:      7651\nDiscovery Unicast Port:   7664\nUser Unicast Port:        7665\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/32-gong-zuo-kong-jian-fu-gai/","title":"32 gong zuo kong jian fu gai","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/32-gong-zuo-kong-jian-fu-gai/#32","title":"3.2 \u5de5\u4f5c\u7a7a\u95f4\u8986\u76d6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/32-gong-zuo-kong-jian-fu-gai/#_1","title":"\u573a\u666f","text":"<p>\u540c\u4e00\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u4e0d\u5141\u8bb8\u51fa\u73b0\u529f\u80fd\u5305\u91cd\u540d\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u5f53\u5b58\u5728\u591a\u4e2a\u5de5\u4f5c\u7a7a\u95f4\u65f6\uff0c\u4e0d\u540c\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u7684\u529f\u80fd\u5305\u662f\u53ef\u4ee5\u91cd\u540d\u7684\uff0c\u90a3\u4e48\u5f53\u529f\u80fd\u5305\u91cd\u540d\u65f6\uff0c\u4f1a\u8c03\u7528\u54ea\u4e00\u4e2a\u5462\uff1f</p> <p>\u6bd4\u5982\uff1a\u81ea\u5b9a\u4e49\u5de5\u4f5c\u7a7a\u95f4A\u5b58\u5728\u529f\u80fd\u5305turtlesim\uff0c\u81ea\u5b9a\u4e49\u5de5\u4f5c\u7a7a\u95f4B\u4e5f\u5b58\u5728\u529f\u80fd\u5305turtlesim\uff0c\u5f53\u7136\u7cfb\u7edf\u81ea\u5e26\u5de5\u4f5c\u7a7a\u95f4\u4e5f\u5b58\u5728turtlesim\uff0c\u5982\u679c\u8c03\u7528turtlesim\u5305\uff0c\u4f1a\u8c03\u7528\u54ea\u4e2a\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u7684\u5462\uff1f</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/32-gong-zuo-kong-jian-fu-gai/#_2","title":"\u6982\u5ff5","text":"<p>\u6240\u8c13\u5de5\u4f5c\u7a7a\u95f4\u8986\u76d6\uff0c\u662f\u6307\u4e0d\u540c\u5de5\u4f5c\u7a7a\u95f4\u5b58\u5728\u91cd\u540d\u529f\u80fd\u5305\u65f6\uff0c\u91cd\u540d\u529f\u80fd\u5305\u7684\u8c03\u7528\u4f1a\u4ea7\u751f\u8986\u76d6\u7684\u60c5\u51b5\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/32-gong-zuo-kong-jian-fu-gai/#_3","title":"\u4f5c\u7528","text":"<p>\u6ca1\u4ec0\u4e48\u7528\uff0c\u8fd9\u79cd\u60c5\u51b5\u662f\u9700\u8981\u6781\u529b\u907f\u514d\u51fa\u73b0\u7684\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/32-gong-zuo-kong-jian-fu-gai/#_4","title":"\u6f14\u793a","text":"<p>1.\u5206\u522b\u5728\u4e0d\u540c\u7684\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u521b\u5efaturtlesim\u529f\u80fd\u5305\u3002</p> <p>\u7ec8\u7aef\u4e0b\u8fdb\u5165ws00_helloworld\u7684src\u76ee\u5f55\uff0c\u65b0\u5efa\u529f\u80fd\u5305\uff1a</p> <pre><code>ros2 pkg create turtlesim --node-name turtlesim_node\n</code></pre> <p>\u4e3a\u4e86\u65b9\u4fbf\u67e5\u770b\u6f14\u793a\u7ed3\u679c\uff0c\u5c06\u9ed8\u8ba4\u751f\u6210\u7684 turtlesim_node.cpp \u4e2d\u7684\u6253\u5370\u5185\u5bb9\u4fee\u6539\u4e3a\uff1a<code>ws00_helloworld turtlesim\\n</code></p> <p>\u7ec8\u7aef\u4e0b\u8fdb\u5165ws01_plumbing\u7684src\u76ee\u5f55\uff0c\u65b0\u5efa\u529f\u80fd\u5305\uff1a</p> <pre><code>ros2 pkg create turtlesim --node-name turtlesim_node\n</code></pre> <p>\u4e3a\u4e86\u65b9\u4fbf\u67e5\u770b\u6f14\u793a\u7ed3\u679c\uff0c\u5c06\u9ed8\u8ba4\u751f\u6210\u7684 turtlesim_node.cpp \u4e2d\u7684\u6253\u5370\u5185\u5bb9\u4fee\u6539\u4e3a\uff1a<code>ws01_plumbing turtlesim\\n</code></p> <p>2.\u5728 ~/.bashrc \u6587\u4ef6\u4e0b\u8ffd\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>source /home/ros2/ws00_helloworld/install/setup.bash\nsource /home/ros2/ws01_plumbing/install/setup.bash\n</code></pre> <p>\u4fee\u6539\u5b8c\u6bd5\u540e\uff0c\u4fdd\u5b58\u5e76\u5173\u95ed\u6587\u4ef6\u3002</p> <p>3.\u65b0\u5efa\u7ec8\u7aef\uff0c\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>ros2 run turtlesim turtlesim_node\n</code></pre> <p>\u8f93\u51fa\u7ed3\u679c\u4e3a\uff1a<code>ws01_plumbing turtlesim</code>\uff0c\u4e5f\u5373\u6267\u884c\u7684\u662f ws01_plumbing \u529f\u80fd\u5305\u4e0b\u7684 turtlesim\uff0c\u800c ws00_helloworld \u4e0b\u7684 turtlesim \u4e0e\u5185\u7f6e\u7684 turtlesim \u88ab\u8986\u76d6\u4e86\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/32-gong-zuo-kong-jian-fu-gai/#\u539f\u56e0","title":"\u539f\u56e0","text":"<p>\u8fd9\u4e0e~/.bashrc\u4e2d\u4e0d\u540c\u5de5\u4f5c\u7a7a\u95f4\u7684setup.bash\u6587\u4ef6\u7684\u52a0\u8f7d\u987a\u5e8f\u6709\u5173\uff1a</p> <p>1.ROS2 \u4f1a\u89e3\u6790 ~/.bashrc \u6587\u4ef6\uff0c\u5e76\u751f\u6210\u5168\u5c40\u73af\u5883\u53d8\u91cf AMENT_PREFIX_PATH \u4e0e PYTHONPATH\uff0c\u4e24\u4e2a\u73af\u5883\u53d8\u91cf\u53d6\u503c\u5206\u522b\u5bf9\u5e94\u4e86 ROS2 \u4e2d C++ \u548c Python \u529f\u80fd\u5305\uff0c\u73af\u5883\u53d8\u91cf\u7684\u503c\u7531\u529f\u80fd\u5305\u540d\u79f0\u7ec4\u6210\uff1b</p> <p></p> <p>2.\u4e24\u4e2a\u53d8\u91cf\u7684\u503c\u7684\u8bbe\u7f6e\u4e0e ~/.bashrc \u4e2d\u7684 setup.bash \u7684\u914d\u7f6e\u987a\u5e8f\u6709\u5173\uff0c\u5bf9\u4e8e\u81ea\u5b9a\u4e49\u7684\u5de5\u4f5c\u7a7a\u95f4\u800c\u8a00\uff0c\u540e\u914d\u7f6e\u7684\u4f18\u5148\u7ea7\u66f4\u9ad8\uff0c\u4e3b\u8981\u8868\u73b0\u5728\u540e\u914d\u7f6e\u7684\u5de5\u4f5c\u7a7a\u95f4\u7684\u529f\u80fd\u5305\u5728\u73af\u5883\u53d8\u91cf\u503c\u7ec4\u6210\u7684\u524d\u90e8\uff0c\u800c\u524d\u914d\u7f6e\u5de5\u4f5c\u7a7a\u95f4\u7684\u529f\u80fd\u5305\u5728\u73af\u5883\u53d8\u91cf\u503c\u7ec4\u6210\u7684\u540e\u90e8\u5206\uff0c\u5982\u679c\u66f4\u6539\u4e24\u4e2a\u81ea\u5b9a\u4e49\u5de5\u4f5c\u7a7a\u95f4\u5728 ~/.bashrc \u4e2d\u7684\u914d\u7f6e\u987a\u5e8f\uff0c\u90a3\u4e48\u53d8\u91cf\u503c\u4e5f\u5c06\u76f8\u5e94\u66f4\u6539\uff0c\u4f46\u662f ROS2 \u7cfb\u7edf\u5de5\u4f5c\u7a7a\u95f4\u7684\u914d\u7f6e\u59cb\u7ec8\u5904\u4e8e\u6700\u540e\u3002</p> <p>3.\u8c03\u7528\u529f\u80fd\u5305\u65f6\uff0c\u4f1a\u6309\u7167 AMENT_PREFIX_PATH \u6216 PYTHONPATH \u4e2d\u5305\u914d\u7f6e\u987a\u5e8f\u4ece\u524d\u5f80\u540e\u4f9d\u6b21\u67e5\u627e\u76f8\u5173\u529f\u80fd\u5305\uff0c\u67e5\u627e\u5230\u529f\u80fd\u5305\u65f6\u4f1a\u505c\u6b62\u641c\u7d22\uff0c\u4e5f\u5373\u914d\u7f6e\u5728\u524d\u7684\u4f1a\u4f18\u5148\u6267\u884c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/32-gong-zuo-kong-jian-fu-gai/#\u9690\u60a3","title":"\u9690\u60a3","text":"<p>\u524d\u9762\u63d0\u5230\uff0c\u5de5\u4f5c\u7a7a\u95f4\u8986\u76d6\u7684\u60c5\u51b5\u662f\u9700\u8981\u6781\u529b\u907f\u514d\u51fa\u73b0\u7684\uff0c\u56e0\u4e3a\u5bfc\u81f4\u4e00\u4e9b\u5b89\u5168\u9690\u60a3\uff1a</p> <ol> <li>\u53ef\u80fd\u4f1a\u51fa\u73b0\u529f\u80fd\u5305\u8c03\u7528\u6df7\u4e71\uff0c\u51fa\u73b0\u5b9e\u9645\u8c03\u7528\u4e0e\u9884\u671f\u8c03\u7528\u7ed3\u679c\u4e0d\u7b26\u7684\u60c5\u51b5\uff1b</li> <li>\u5373\u4fbf\u53ef\u4ee5\u901a\u8fc7 ~/.bashrc \u6765\u914d\u7f6e\u4e0d\u540c\u5de5\u4f5c\u7a7a\u95f4\u7684\u4f18\u5148\u7ea7\uff0c\u4f46\u662f\u7ecf\u8fc7\u6d4b\u8bd5\uff0c\u4fee\u6539 ~/.bashrc \u6587\u4ef6\u4e4b\u540e\u4e0d\u4e00\u5b9a\u9a6c\u4e0a\u751f\u6548\uff0c\u8fd8\u9700\u8981\u5220\u9664\u5de5\u4f5c\u7a7a\u95f4\u4e0bbuild\u4e0einstall\u76ee\u5f55\u91cd\u65b0\u7f16\u8bd1\uff0c\u624d\u80fd\u751f\u6548\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u7e41\u7410\u4e14\u6709\u4e0d\u786e\u5b9a\u6027\u3002</li> </ol> <p>\u7efc\u4e0a\uff0c\u5728\u5b9e\u9645\u5de5\u4f5c\u4e2d\uff0c\u9700\u8981\u5236\u5b9a\u660e\u786e\u7684\u5305\u547d\u540d\u89c4\u8303\uff0c\u907f\u514d\u5305\u91cd\u540d\u60c5\u51b5\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/33-yuan-gong-neng-bao/","title":"33 yuan gong neng bao","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/33-yuan-gong-neng-bao/#41-ros\u5143\u529f\u80fd\u5305","title":"3.3 \u5143\u529f\u80fd\u5305","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/33-yuan-gong-neng-bao/#_1","title":"\u573a\u666f","text":"<p>\u5b8c\u6210\u4e00\u4e2a\u7cfb\u7edf\u6027\u7684\u529f\u80fd\uff0c\u53ef\u80fd\u6d89\u53ca\u5230\u591a\u4e2a\u529f\u80fd\u5305\uff0c\u6bd4\u5982\u5b9e\u73b0\u4e86\u673a\u5668\u4eba\u5bfc\u822a\u6a21\u5757\uff0c\u8be5\u6a21\u5757\u4e0b\u6709\u5730\u56fe\u3001\u5b9a\u4f4d\u3001\u8def\u5f84\u89c4\u5212...\u7b49\u4e0d\u540c\u7684\u5b50\u7ea7\u529f\u80fd\u5305\u3002\u90a3\u4e48\u8c03\u7528\u8005\u5b89\u88c5\u8be5\u6a21\u5757\u65f6\uff0c\u9700\u8981\u9010\u4e00\u7684\u5b89\u88c5\u6bcf\u4e00\u4e2a\u529f\u80fd\u5305\u5417\uff1f</p> <p>\u663e\u800c\u6613\u89c1\u7684\uff0c\u9010\u4e00\u5b89\u88c5\u529f\u80fd\u5305\u7684\u6548\u7387\u4f4e\u4e0b\uff0c\u5728ROS2\u4e2d\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5c06\u4e0d\u540c\u7684\u529f\u80fd\u5305\u6253\u5305\u6210\u4e00\u4e2a\u529f\u80fd\u5305\uff0c\u5f53\u5b89\u88c5\u67d0\u4e2a\u529f\u80fd\u6a21\u5757\u65f6\uff0c\u76f4\u63a5\u8c03\u7528\u6253\u5305\u540e\u7684\u529f\u80fd\u5305\u5373\u53ef\uff0c\u8be5\u5305\u53c8\u79f0\u4e4b\u4e3a\u5143\u529f\u80fd\u5305\\(metapackage\\)\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/33-yuan-gong-neng-bao/#_2","title":"\u6982\u5ff5","text":"<p>MetaPackage\u662fLinux\u7684\u4e00\u4e2a\u6587\u4ef6\u7ba1\u7406\u7cfb\u7edf\u7684\u6982\u5ff5\u3002\u662f ROS2 \u4e2d\u7684\u4e00\u4e2a\u865a\u5305\uff0c\u91cc\u9762\u6ca1\u6709\u5b9e\u8d28\u6027\u7684\u5185\u5bb9\uff0c\u4f46\u662f\u5b83\u4f9d\u8d56\u4e86\u5176\u4ed6\u7684\u8f6f\u4ef6\u5305\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u628a\u5176\u4ed6\u5305\u7ec4\u5408\u8d77\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u5b83\u662f\u4e00\u672c\u4e66\u7684\u76ee\u5f55\u7d22\u5f15\uff0c\u544a\u8bc9\u6211\u4eec\u8fd9\u4e2a\u5305\u96c6\u5408\u4e2d\u6709\u54ea\u4e9b\u5b50\u5305\uff0c\u5e76\u4e14\u8be5\u53bb\u54ea\u91cc\u4e0b\u8f7d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <ul> <li>sudo apt install ros-&lt;ros2-distro&gt;-desktop \u547d\u4ee4\u5b89\u88c5 ros2 \u65f6\u5c31\u4f7f\u7528\u4e86\u5143\u529f\u80fd\u5305\uff0c\u8be5\u5143\u529f\u80fd\u5305\u4f9d\u8d56\u4e8e ROS2 \u4e2d\u7684\u5176\u4ed6\u4e00\u4e9b\u529f\u80fd\u5305\uff0c\u5b89\u88c5\u8be5\u5305\u65f6\u4f1a\u4e00\u5e76\u5b89\u88c5\u4f9d\u8d56\u3002</li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/33-yuan-gong-neng-bao/#\u4f5c\u7528","title":"\u4f5c\u7528","text":"<p>\u65b9\u4fbf\u7528\u6237\u7684\u5b89\u88c5\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8fd9\u4e00\u4e2a\u5305\u5c31\u53ef\u4ee5\u628a\u5176\u4ed6\u76f8\u5173\u7684\u8f6f\u4ef6\u5305\u7ec4\u7ec7\u5230\u4e00\u8d77\u5b89\u88c5\u4e86\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/33-yuan-gong-neng-bao/#\u5b9e\u73b0","title":"\u5b9e\u73b0","text":"<p>1.\u65b0\u5efa\u4e00\u4e2a\u529f\u80fd\u5305</p> <pre><code>ros2 pkg create tutorails_plumbing\n</code></pre> <p>2.\u4fee\u6539 package.xml \u6587\u4ef6\uff0c\u6dfb\u52a0\u6267\u884c\u65f6\u6240\u4f9d\u8d56\u7684\u5305\uff1a</p> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;?xml-model href=\"http://download.ros.org/schema/package_format3.xsd\" schematypens=\"http://www.w3.org/2001/XMLSchema\"?&gt;\n&lt;package format=\"3\"&gt;\n  &lt;name&gt;tutorails_plumbing&lt;/name&gt;\n  &lt;version&gt;0.0.0&lt;/version&gt;\n  &lt;description&gt;TODO: Package description&lt;/description&gt;\n  &lt;maintainer email=\"ros2@todo.todo\"&gt;ros2&lt;/maintainer&gt;\n  &lt;license&gt;TODO: License declaration&lt;/license&gt;\n\n  &lt;buildtool_depend&gt;ament_cmake&lt;/buildtool_depend&gt;\n\n  &lt;exec_depend&gt;base_interfaces_demo&lt;/exec_depend&gt;\n  &lt;exec_depend&gt;cpp01_topic&lt;/exec_depend&gt;\n  &lt;exec_depend&gt;cpp02_service&lt;/exec_depend&gt;\n  &lt;exec_depend&gt;cpp03_action&lt;/exec_depend&gt;\n  &lt;exec_depend&gt;cpp04_param&lt;/exec_depend&gt;\n  &lt;exec_depend&gt;py01_topic&lt;/exec_depend&gt;\n  &lt;exec_depend&gt;py02_service&lt;/exec_depend&gt;\n  &lt;exec_depend&gt;py03_action&lt;/exec_depend&gt;\n  &lt;exec_depend&gt;py04_param&lt;/exec_depend&gt;\n\n\n  &lt;export&gt;\n    &lt;build_type&gt;ament_cmake&lt;/build_type&gt;\n  &lt;/export&gt;\n&lt;/package&gt;\n</code></pre> <p>3.\u6587\u4ef6CMakeLists.txt\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>cmake_minimum_required(VERSION 3.8)\nproject(tutorails_plumbing)\n\nif(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES \"Clang\")\n  add_compile_options(-Wall -Wextra -Wpedantic)\nendif()\n\nfind_package(ament_cmake REQUIRED)\n\nament_package()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/","title":"34 jie dian zhong ming","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/#34","title":"3.4 \u8282\u70b9\u91cd\u540d","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/#_1","title":"\u95ee\u9898\u63cf\u8ff0","text":"<p>\u5728 ROS2 \u4e2d\u4e0d\u540c\u7684\u8282\u70b9\u53ef\u4ee5\u6709\u76f8\u540c\u7684\u8282\u70b9\u540d\u79f0\uff0c\u6bd4\u5982\u53ef\u4ee5\u542f\u52a8\u591a\u4e2a turtlesim_node \u8282\u70b9\uff0c\u8fd9\u4e9b\u8282\u70b9\u7684\u540d\u79f0\u90fd\u662f turtlesim\u3002\u8282\u70b9\u91cd\u540d\u867d\u7136\u662f\u88ab\u5141\u8bb8\u7684\uff0c\u4f46\u662f\u5f00\u53d1\u8005\u5e94\u8be5\u4e3b\u52a8\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u56e0\u4e3a\u8282\u70b9\u91cd\u540d\u65f6\u53ef\u80fd\u4f1a\u5bfc\u81f4\u64cd\u4f5c\u4e0a\u7684\u6df7\u6dc6\uff0c\u4ecd\u4ee5\u542f\u52a8\u4e86\u591a\u4e2a turtlesim_node \u8282\u70b9\u4e3a\u4f8b\uff0c\u5f53\u4f7f\u7528\u8ba1\u7b97\u56fe\\(rqt\\_graph\\)\u67e5\u770b\u8282\u70b9\u8fd0\u884c\u72b6\u6001\u65f6\uff0c\u7531\u4e8e\u4ed6\u4eec\u7684\u8282\u70b9\u540d\u79f0\u4e00\u81f4\uff0c\u90a3\u4e48\u867d\u7136\u5b9e\u9645\u6709\u591a\u4e2a\u8282\u70b9\uff0c\u4f46\u662f\u5728\u8ba1\u7b97\u56fe\u4e0a\u663e\u793a\u4e00\u4e2a\u3002\u5e76\u4e14\u8282\u70b9\u540d\u79f0\u4e5f\u4f1a\u548c\u8bdd\u9898\u540d\u79f0\u3001\u670d\u52a1\u540d\u79f0\u3001\u52a8\u4f5c\u540d\u79f0\u3001\u53c2\u6570\u7b49\u4ea7\u751f\u5173\u8054\uff0c\u5c4a\u65f6\u4e5f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u901a\u4fe1\u903b\u8f91\u4e0a\u7684\u6df7\u4e71\u3002</p> <p>\u90a3\u4e48\u5728 ROS2 \u4e2d\u5982\u4f55\u907f\u514d\u8282\u70b9\u91cd\u540d\u5462\uff1f</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/#_2","title":"\u89e3\u51b3\u601d\u8def","text":"<p>\u907f\u514d\u91cd\u540d\u95ee\u9898\uff0c\u4e00\u822c\u6709\u4e24\u79cd\u7b56\u7565\uff1a</p> <ol> <li>\u540d\u79f0\u91cd\u6620\u5c04\uff0c\u4e5f\u5373\u4e3a\u8282\u70b9\u8d77\u522b\u540d\uff1b</li> <li>\u547d\u540d\u7a7a\u95f4\uff0c\u662f\u4e3a\u8282\u70b9\u540d\u79f0\u6dfb\u52a0\u524d\u7f00\uff0c\u53ef\u4ee5\u6709\u591a\u7ea7\uff0c\u683c\u5f0f\uff1a/xxx/yyy/zzz\u3002</li> </ol> <p>\u8fd9\u4e5f\u662f\u5728 ROS2 \u4e2d\u89e3\u51b3\u91cd\u540d\u95ee\u9898\u7684\u5e38\u7528\u7b56\u7565\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/#_3","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u4e0a\u8ff0\u4e24\u79cd\u7b56\u7565\u7684\u5b9e\u73b0\u9014\u5f84\u4e3b\u8981\u6709\u5982\u4e0b\u4e09\u79cd\uff1a</p> <ol> <li>ros2 run \u547d\u4ee4\u5b9e\u73b0\uff1b</li> <li>launch \u6587\u4ef6\u5b9e\u73b0\uff1b</li> <li>\u7f16\u7801\u5b9e\u73b0\u3002</li> </ol> <p>\u672c\u8282\u5c06\u9010\u4e00\u6f14\u793a\u4e0a\u8ff0\u4e09\u79cd\u65b9\u6848\u7684\u5b9e\u73b0\u8bed\u6cd5\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/","title":"35 hua ti zhong ming","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/#35","title":"3.5 \u8bdd\u9898\u91cd\u540d","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/#_1","title":"\u95ee\u9898\u63cf\u8ff0","text":"<p>\u8282\u70b9\u540d\u79f0\u53ef\u80fd\u51fa\u73b0\u91cd\u540d\u7684\u60c5\u51b5\uff0c\u540c\u7406\u8bdd\u9898\u540d\u79f0\u4e5f\u53ef\u80fd\u91cd\u540d\uff0c\u4e0d\u8fc7\u4e0e\u8282\u70b9\u91cd\u540d\u4e0d\u540c\u7684\u662f\uff0c\u6709\u4e9b\u573a\u666f\u4e0b\u9700\u8981\u907f\u514d\u8bdd\u9898\u91cd\u540d\u7684\u60c5\u51b5\uff0c\u4f46\u6709\u4e9b\u573a\u666f\u4e0b\u53c8\u9700\u8981\u5c06\u4e0d\u540c\u7684\u4e0d\u540c\u7684\u8bdd\u9898\u540d\u79f0\u4fee\u6539\u4e3a\u76f8\u540c\u3002</p> <p>\u5728 ROS2 \u4e0d\u540c\u7684\u8282\u70b9\u4e4b\u95f4\u901a\u4fe1\u90fd\u4f9d\u8d56\u4e8e\u8bdd\u9898\uff0c\u8bdd\u9898\u540d\u79f0\u4e5f\u53ef\u80fd\u51fa\u73b0\u91cd\u540d\u7684\u60c5\u51b5\uff0c\u8bdd\u9898\u91cd\u540d\u65f6\uff0c\u7cfb\u7edf\u867d\u7136\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u4f46\u662f\u901a\u8fc7\u76f8\u540c\u8bdd\u9898\u540d\u79f0\u5173\u8054\u5230\u4e00\u8d77\u7684\u8282\u70b9\u53ef\u80fd\u5e76\u4e0d\u5c5e\u4e8e\u540c\u4e00\u901a\u4fe1\u903b\u8f91\uff0c\u4ece\u800c\u5bfc\u81f4\u901a\u4fe1\u9519\u4e71\uff0c\u751a\u81f3\u51fa\u73b0\u5f02\u5e38\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u80fd\u5c31\u9700\u8981\u5c06\u76f8\u540c\u7684\u8bdd\u9898\u540d\u79f0\u8bbe\u7f6e\u4e3a\u4e0d\u540c\u3002</p> <p>\u53c8\u6216\u8005\uff0c\u4e24\u4e2a\u8282\u70b9\u662f\u5c5e\u4e8e\u540c\u4e00\u901a\u4fe1\u903b\u8f91\u7684\uff0c\u4f46\u662f\u8282\u70b9\u4e4b\u95f4\u8bdd\u9898\u540d\u79f0\u4e0d\u540c\uff0c\u5bfc\u81f4\u901a\u4fe1\u5931\u8d25\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5c31\u9700\u8981\u5c06\u4e24\u4e2a\u8282\u70b9\u7684\u8bdd\u9898\u540d\u79f0\u7531\u4e0d\u540c\u4fee\u6539\u4e3a\u76f8\u540c\u3002</p> <p>\u90a3\u4e48\u5982\u4f55\u4fee\u6539\u8bdd\u9898\u540d\u79f0\u5462\uff1f</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/#_2","title":"\u89e3\u51b3\u601d\u8def","text":"<p>\u4e0e\u8282\u70b9\u91cd\u540d\u7684\u89e3\u51b3\u601d\u8def\u7c7b\u4f3c\u7684\uff0c\u4e3a\u4e86\u907f\u514d\u8bdd\u9898\u91cd\u540d\u95ee\u9898\uff0c\u4e00\u822c\u6709\u4e24\u79cd\u7b56\u7565\uff1a</p> <ol> <li>\u540d\u79f0\u91cd\u6620\u5c04\uff0c\u4e5f\u5373\u4e3a\u8bdd\u9898\u540d\u79f0\u8d77\u522b\u540d\uff1b</li> <li>\u547d\u540d\u7a7a\u95f4\uff0c\u662f\u4e3a\u8bdd\u9898\u540d\u79f0\u6dfb\u52a0\u524d\u7f00\uff0c\u53ef\u4ee5\u6709\u591a\u7ea7\uff0c\u683c\u5f0f\uff1a/xxx/yyy/zzz\u3002</li> </ol> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u901a\u8fc7\u547d\u540d\u7a7a\u95f4\u8bbe\u7f6e\u8bdd\u9898\u540d\u79f0\u65f6\uff0c\u9700\u8981\u4fdd\u8bc1\u8bdd\u9898\u662f\u975e\u5168\u5c40\u8bdd\u9898\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/#_3","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u4e0e\u8282\u70b9\u91cd\u540d\u89e3\u51b3\u65b9\u6848\u7c7b\u4f3c\u7684\uff0c\u4fee\u6539\u8bdd\u9898\u540d\u79f0\u7684\u65b9\u5f0f\u4e3b\u8981\u6709\u5982\u4e0b\u4e09\u79cd\uff1a</p> <ol> <li>ros2 run \u547d\u4ee4\u5b9e\u73b0\uff1b</li> <li>launch \u6587\u4ef6\u5b9e\u73b0\uff1b</li> <li>\u7f16\u7801\u5b9e\u73b0\u3002</li> </ol> <p>\u672c\u8282\u5c06\u9010\u4e00\u6f14\u793a\u4e0a\u8ff0\u4e09\u79cd\u65b9\u6848\u7684\u5b9e\u73b0\u8bed\u6cd5\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/","title":"36 chang yong api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/#36-api","title":"3.6 \u65f6\u95f4\u76f8\u5173API","text":"<p>\u5728\u524d\u9762\u6848\u4f8b\u4e2d\u6211\u4eec\u5df2\u7ecf\u4f7f\u7528\u4e86 ROS2 \u4e2d\u7684\u8bf8\u591a API\uff0c\u672c\u8282\u4e3b\u8981\u4ecb\u7ecd\u53e6\u4e00\u7c7b\u6bd4\u8f83\u5e38\u89c1\u7684API\uff1a\u65f6\u95f4\u76f8\u5173API\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/","title":"37 tong xin ji zhi ming ling","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/#37","title":"3.7 \u901a\u4fe1\u673a\u5236\u5de5\u5177","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/#_1","title":"\u573a\u666f","text":"<p>\u4e0a\u4e00\u7ae0\u5185\u5bb9\uff0c\u6211\u4eec\u5b66\u4e60\u4e86ROS2\u4e2d\u7684\u591a\u79cd\u901a\u4fe1\u673a\u5236\uff0c\u4e86\u89e3\u4e86\u4e0d\u540c\u901a\u4fe1\u6a21\u578b\u7684\u5b9e\u73b0\u6d41\u7a0b\u3001\u76f8\u5173API\u4ee5\u53ca\u5404\u81ea\u7684\u7279\u70b9\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u518d\u4ecb\u7ecd\u4e00\u4e9b\u5b9e\u9645\u5f00\u53d1\u5f53\u4e2d\u53ef\u80fd\u4f1a\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898\uff1a</p> <p>1.\u4e00\u4e2a\u5b8c\u6574\u7684\u673a\u5668\u4eba\u7cfb\u7edf\u542f\u52a8\u4e4b\u540e\uff0c\u5176\u7ec4\u6210\u662f\u6bd4\u8f83\u590d\u6742\u7684\uff0c\u53ef\u80fd\u5305\u542b\u5341\u51e0\u4e2a\u3001\u51e0\u5341\u4e2a\u751a\u81f3\u4e0a\u767e\u4e2a\u8282\u70b9\uff0c\u4e0d\u540c\u7684\u8282\u70b9\u53ef\u80fd\u53c8\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u901a\u4fe1\u5bf9\u8c61\\(\u8bdd\u9898\u53d1\u5e03\u65b9\u3001\u8bdd\u9898\u8ba2\u9605\u65b9\u3001\u670d\u52a1\u7aef\u3001\u5ba2\u6237\u7aef\u3001\u52a8\u4f5c\u670d\u52a1\u7aef\u3001\u52a8\u4f5c\u5ba2\u6237\u7aef\u3001\u53c2\u6570\u670d\u52a1\u7aef\u3001\u53c2\u6570\u5ba2\u6237\u7aef\\)\uff0c\u901a\u4fe1\u65f6\u8fd8\u9700\u8981\u4f7f\u7528\u5230\u5404\u79cd\u5404\u6837\u7684msg\u3001srv\u6216action\u63a5\u53e3\u6d88\u606f\uff0c\u90a3\u4e48\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u5982\u4f55\u624d\u80fd\u65b9\u4fbf\u7684\u83b7\u53d6\u8fd9\u4e9b\u8282\u70b9\u3001\u8bdd\u9898\u3001\u670d\u52a1\u3001\u52a8\u4f5c\u3001\u53c2\u6570\u4ee5\u53ca\u63a5\u53e3\u76f8\u5173\u7684\u4fe1\u606f\u5462\uff1f 2.\u7f16\u5199\u901a\u4fe1\u5b9e\u73b0\uff0c\u901a\u4fe1\u81f3\u5c11\u6d89\u53ca\u5230\u53cc\u65b9\uff0c\u4e00\u65b9\u7f16\u5199\u5b8c\u6bd5\u540e\uff0c\u5982\u4f55\u9a8c\u8bc1\u7a0b\u5e8f\u662f\u5426\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u5462\uff1f 3.\u8bdd\u9898\u901a\u4fe1\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u5e03\u65b9\u7a0b\u5e8f\u4e2d\u8bbe\u7f6e\u4e86\u6d88\u606f\u7684\u53d1\u5e03\u9891\u7387\uff0c\u5982\u4f55\u5224\u65ad\u5b9e\u9645\u8fd0\u884c\u4e2d\u7684\u53d1\u5e03\u9891\u7387\u662f\u5426\u548c\u8bbe\u7f6e\u7684\u9891\u7387\u4e00\u81f4\u5462\uff1f ......</p> <p>\u5728ROS2\u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5de5\u5177\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5feb\u6377\u7684\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c\u672c\u90e8\u5206\u5185\u5bb9\u5c31\u4e3b\u8981\u4ecb\u7ecd\u8fd9\u4e9b\u5de5\u5177\u7684\u4f7f\u7528\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/#\u6982\u5ff5","title":"\u6982\u5ff5","text":"<p>\u5728ROS2\u4e2d\uff0c\u901a\u4fe1\u673a\u5236\u76f8\u5173\u7684\u5de5\u5177\u6709\u4e24\u79cd\u7c7b\u578b\uff0c\u5206\u522b\u662f\u547d\u4ee4\u884c\u5de5\u5177\u548c\u56fe\u5f62\u5316\u5de5\u5177\uff08rqt\uff09\uff0c\u524d\u8005\u662f\u4e00\u7cfb\u5217\u7ec8\u7aef\u547d\u4ee4\u7684\u96c6\u5408\uff0c\u540e\u8005\u5219\u662fROS2\u57fa\u4e8eQT\u6846\u67b6\uff0c\u9488\u5bf9\u673a\u5668\u4eba\u5f00\u53d1\u7684\u4e00\u7cfb\u5217\u53ef\u89c6\u5316\u5de5\u5177\u7684\u96c6\u5408\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/#\u4f5c\u7528","title":"\u4f5c\u7528","text":"<p>\u53ef\u4ee5\u65b9\u4fbf\u7684\u5b9e\u73b0\u7a0b\u5e8f\u8c03\u8bd5\uff0c\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u4f18\u5316\u7528\u6237\u4f53\u9a8c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/","title":"38 tong xin ji zhi lian xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/#38","title":"3.8 \u901a\u4fe1\u673a\u5236\u5b9e\u64cd\uff08\u671f\u4e2d\u5927\u4f5c\u4e1a\uff09","text":"<p>\u672c\u8282\u4e3b\u8981\u4ecb\u7ecd\u901a\u4fe1\u673a\u5236\u76f8\u5173\u7684\u4e00\u4e9b\u7ec3\u4e60\uff0c\u8fd9\u4e9b\u7ec3\u4e60\u57fa\u4e8eturtlesim\u529f\u80fd\u5305\uff0c\u7ec3\u4e60\u7c7b\u578b\u8986\u76d6\u4e86\u8bdd\u9898\u3001\u670d\u52a1\u3001\u52a8\u4f5c\u3001\u53c2\u6570\u8fd9\u56db\u79cd\u901a\u4fe1\u673a\u5236\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/#_1","title":"\u51c6\u5907","text":"<p>\u7ec8\u7aef\u4e0b\u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\u7684src\u76ee\u5f55\uff0c\u8c03\u7528\u5982\u4e0b\u547d\u4ee4\u521b\u5efaC++\u529f\u80fd\u5305\u3002</p> <pre><code>ros2 pkg create cpp07_exercise --build-type ament_cmake --dependencies rclcpp turtlesim base_interfaces_demo geometry_msgs rclcpp_action\n</code></pre> <p>\u529f\u80fd\u5305\u4e0b\u65b0\u5efalaunch\u76ee\u5f55\u4ee5\u5907\u7528\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/39-ben-zhang-xiao-jie/","title":"39 ben zhang xiao jie","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/39-ben-zhang-xiao-jie/#39","title":"3.9 \u672c\u7ae0\u5c0f\u7ed3","text":"<p>\u672c\u7ae0\u4e3b\u8981\u4ecb\u7ecd\u4e86\u901a\u4fe1\u673a\u5236\u76f8\u5173\u7684\u4e00\u4e9b\u8865\u5145\u5185\u5bb9\uff0c\u76f8\u5173\u77e5\u8bc6\u70b9\u5982\u4e0b\uff1a</p> <ul> <li>\u5206\u5e03\u5f0f\u73af\u5883\u642d\u5efa\uff1b</li> <li>\u5404\u79cd\u91cd\u540d\u95ee\u9898\uff08\u5305\u91cd\u540d\u3001\u8282\u70b9\u91cd\u540d\u3001\u8bdd\u9898\u91cd\u540d\uff09\uff1b</li> <li>\u5143\u529f\u80fd\u5305\uff1b</li> <li>\u65f6\u95f4\u76f8\u5173API\uff1b</li> <li>\u901a\u4fe1\u673a\u5236\u5e38\u7528\u5de5\u5177\uff1b</li> </ul> <p>ROS2\u4e2d\u7684\u5206\u5e03\u5f0f\u73af\u5883\u642d\u5efa\u6781\u5176\u4fbf\u6377\uff0c\u53ea\u9700\u8981\u4fdd\u8bc1\u4e0d\u540c\u7684ROS2\u8bbe\u5907\u5728\u540c\u4e00\u7f51\u7edc\u4e0b\uff0c\u9ed8\u8ba4\u4e0d\u540c\u8bbe\u5907\u4e4b\u95f4\u5373\u53ef\u6b63\u5e38\u901a\u4fe1\uff1b\u5173\u4e8e\u91cd\u540d\u95ee\u9898\uff0c\u4e0d\u540c\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u529f\u80fd\u5305\u91cd\u540d\u5e94\u8be5\u662f\u5c3d\u529b\u907f\u514d\u91cd\u540d\u7684\uff0c\u8282\u70b9\u91cd\u540d\u4e0e\u8bdd\u9898\u91cd\u540d\u7684\u95ee\u9898\u5219\u53ef\u4ee5\u901a\u8fc7\u4e24\u79cd\u7b56\u7565\u3001\u4e09\u79cd\u9014\u5f84\u89e3\u51b3\uff1b\u5143\u529f\u80fd\u5305\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u529f\u80fd\u5305\uff0c\u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u5305\u76ee\u5f55\u7d22\u5f15\uff0c\u53ef\u4ee5\u5c06\u5177\u6709\u5185\u5728\u5173\u8054\u7684\u529f\u80fd\u5305\u5173\u8054\u5230\u4e00\u8d77\uff1b\u65f6\u95f4\u76f8\u5173\u7684API\u5219\u4ecb\u7ecd\u4e86\u5728ROS2\u4e2d\u4e00\u4e9b\u5e38\u7528\u7684\u5b9a\u65f6\u5668\u3001\u9891\u7387\u63a7\u5236\u548c\u6301\u7eed\u65f6\u95f4\u76f8\u5173\u7684\u4e00\u4e9bAPI\uff0c\u8fd9\u4e9bAPI\u90fd\u662f\u7ecf\u5e38\u4f7f\u7528\u7684\uff1b\u901a\u4fe1\u673a\u5236\u5de5\u5177\u4e3b\u8981\u4ecb\u7ecd\u4e86\u901a\u4fe1\u76f8\u5173\u7684\u547d\u4ee4\u884c\u5de5\u5177\u4ee5\u53ca\u56fe\u5f62\u5316\u7684rqt\u5de5\u5177\u7bb1\uff0c\u901a\u8fc7\u8fd9\u4e9b\u5de5\u5177\u53ef\u4ee5\u63d0\u9ad8\u5f00\u53d1\u8005\u7684\u5f00\u53d1\u3001\u8c03\u8bd5\u6548\u7387\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/341-rou-si/","title":"341 rou si","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/341-rou-si/#341-ros2-run","title":"3.4.1 ros2 run\u8bbe\u7f6e\u8282\u70b9\u540d\u79f0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/341-rou-si/#1rosrun\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4","title":"1.ros2 run\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/341-rou-si/#11\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u6f14\u793a","title":"1.1\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u6f14\u793a","text":"<p>\u8bed\u6cd5\uff1aros2 run \u5305\u540d \u8282\u70b9\u540d --ros-args --remap __ns:=\u547d\u540d\u7a7a\u95f4</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>ros2 run turtlesim turtlesim_node --ros-args --remap __ns:=/t1\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/341-rou-si/#12\u8fd0\u884c\u7ed3\u679c","title":"1.2\u8fd0\u884c\u7ed3\u679c","text":"<p>\u4f7f\u7528<code>ros2 node list</code>\u67e5\u770b\u8282\u70b9\u4fe1\u606f\uff0c\u663e\u793a\u7ed3\u679c\uff1a</p> <pre><code>/t1/turtlesim\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/341-rou-si/#2rosrun\u540d\u79f0\u91cd\u6620\u5c04","title":"2.ros2 run\u540d\u79f0\u91cd\u6620\u5c04","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/341-rou-si/#21\u4e3a\u8282\u70b9\u8d77\u522b\u540d","title":"2.1\u4e3a\u8282\u70b9\u8d77\u522b\u540d","text":"<p>\u8bed\u6cd5\uff1a ros2 run \u5305\u540d \u8282\u70b9\u540d --ros-args --remap __name:=\u65b0\u540d\u79f0</p> <p>\u6216</p> <p>ros2 run \u5305\u540d \u8282\u70b9\u540d --ros-args --remap __node:=\u65b0\u540d\u79f0</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>ros2 run turtlesim turtlesim_node --ros-args --remap __name:=turtle1\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/341-rou-si/#22\u8fd0\u884c\u7ed3\u679c","title":"2.2\u8fd0\u884c\u7ed3\u679c","text":"<p>\u4f7f\u7528<code>ros2 node list</code>\u67e5\u770b\u8282\u70b9\u4fe1\u606f\uff0c\u663e\u793a\u7ed3\u679c\uff1a</p> <pre><code>/turtle1\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/341-rou-si/#3rosrun\u547d\u540d\u7a7a\u95f4\u4e0e\u540d\u79f0\u91cd\u6620\u5c04\u53e0\u52a0","title":"3.ros2 run\u547d\u540d\u7a7a\u95f4\u4e0e\u540d\u79f0\u91cd\u6620\u5c04\u53e0\u52a0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/341-rou-si/#31\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u540c\u65f6\u540d\u79f0\u91cd\u6620\u5c04","title":"3.1\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u540c\u65f6\u540d\u79f0\u91cd\u6620\u5c04","text":"<p>\u8bed\u6cd5: ros2 run \u5305\u540d \u8282\u70b9\u540d --ros-args --remap __ns:=\u65b0\u540d\u79f0 --remap __name:=\u65b0\u540d\u79f0</p> <pre><code>ros2 run turtlesim turtlesim_node --ros-args --remap __ns:=/t1 --remap __name:=turtle1\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/341-rou-si/#32\u8fd0\u884c\u7ed3\u679c","title":"3.2\u8fd0\u884c\u7ed3\u679c","text":"<p>\u4f7f\u7528<code>ros2 node list</code>\u67e5\u770b\u8282\u70b9\u4fe1\u606f\uff0c\u663e\u793a\u7ed3\u679c\uff1a</p> <pre><code>/t1/turtle1\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/342-launch-wen-jian-jie-jue-jie-dian-zhong-ming-wen-ti/","title":"342 launch wen jian jie jue jie dian zhong ming wen ti","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/342-launch-wen-jian-jie-jue-jie-dian-zhong-ming-wen-ti/#342-launch","title":"3.4.2 launch\u8bbe\u7f6e\u8282\u70b9\u540d\u79f0","text":"<p>\u5728ROS2\u4e2dlaunch\u6587\u4ef6\u53ef\u4ee5\u7531Python\u3001XML\u6216YAML\u4e09\u79cd\u8bed\u8a00\u7f16\u5199\uff08\u5173\u4e8elaunch\u6587\u4ef6\u7684\u57fa\u672c\u4f7f\u7528\u53ef\u4ee5\u53c2\u80034.1 \u542f\u52a8\u6587\u4ef6launch\u7b80\u4ecb\uff09\uff0c\u6bcf\u79cd\u5b9e\u73b0\u65b9\u5f0f\u90fd\u53ef\u4ee5\u8bbe\u7f6e\u8282\u70b9\u7684\u547d\u540d\u7a7a\u95f4\u6216\u4e3a\u8282\u70b9\u8d77\u522b\u540d\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/342-launch-wen-jian-jie-jue-jie-dian-zhong-ming-wen-ti/#1pythonlaunch","title":"1.Python\u65b9\u5f0f\u5b9e\u73b0\u7684launch\u6587\u4ef6\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u4e0e\u540d\u79f0\u91cd\u6620\u5c04","text":"<p>\u5728 Python \u65b9\u5f0f\u5b9e\u73b0\u7684 launch \u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u7c7b <code>launch_ros.actions.Node</code>\u6765\u521b\u5efa\u88ab\u542f\u52a8\u7684\u8282\u70b9\u5bf9\u8c61\uff0c\u5728\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u4e2d\u63d0\u4f9b\u4e86 name \u548c namespace \u53c2\u6570\u6765\u8bbe\u7f6e\u8282\u70b9\u7684\u540d\u79f0\u4e0e\u547d\u540d\u7a7a\u95f4\uff0c\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n\n    return LaunchDescription([\n        Node(package=\"turtlesim\",executable=\"turtlesim_node\",name=\"turtle1\"),\n        Node(package=\"turtlesim\",executable=\"turtlesim_node\",namespace=\"t1\"),\n        Node(package=\"turtlesim\",executable=\"turtlesim_node\",namespace=\"t1\", name=\"turtle1\")\n    ])\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/342-launch-wen-jian-jie-jue-jie-dian-zhong-ming-wen-ti/#2xmllaunch","title":"2.XML\u65b9\u5f0f\u5b9e\u73b0\u7684launch\u6587\u4ef6\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u4e0e\u540d\u79f0\u91cd\u6620\u5c04","text":"<p>\u5728 XML \u65b9\u5f0f\u5b9e\u73b0\u7684 launch \u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 node \u6807\u7b7e\u4e2d name \u548c namespace \u5c5e\u6027\u6765\u8bbe\u7f6e\u8282\u70b9\u7684\u540d\u79f0\u4e0e\u547d\u540d\u7a7a\u95f4\uff0c\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>&lt;launch&gt;\n    &lt;node pkg=\"turtlesim\" exec=\"turtlesim_node\" name=\"turtle1\" /&gt;\n    &lt;node pkg=\"turtlesim\" exec=\"turtlesim_node\" namespace=\"t1\" /&gt;\n    &lt;node pkg=\"turtlesim\" exec=\"turtlesim_node\" namespace=\"t1\" name=\"turtle1\" /&gt;\n&lt;/launch&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/342-launch-wen-jian-jie-jue-jie-dian-zhong-ming-wen-ti/#3yamllaunch","title":"3.YAML\u65b9\u5f0f\u5b9e\u73b0\u7684launch\u6587\u4ef6\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u4e0e\u540d\u79f0\u91cd\u6620\u5c04","text":"<p>\u5728 YAML \u65b9\u5f0f\u5b9e\u73b0\u7684 launch \u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 node \u5c5e\u6027\u4e2d name \u548c namespace \u5c5e\u6027\u6765\u8bbe\u7f6e\u8282\u70b9\u7684\u540d\u79f0\u4e0e\u547d\u540d\u7a7a\u95f4\uff0c\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>launch:\n- node:\n    pkg: turtlesim\n    exec: turtlesim_node\n    name: turtle1\n- node:\n    pkg: turtlesim\n    exec: turtlesim_node\n    namespace: t1\n- node:\n    pkg: turtlesim\n    exec: turtlesim_node\n    namespace: t1\n    name: turtle1\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/342-launch-wen-jian-jie-jue-jie-dian-zhong-ming-wen-ti/#4","title":"4.\u6d4b\u8bd5","text":"<p>\u4e0a\u8ff0\u4e09\u79cd\u65b9\u5f0f\u5728\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u4e0e\u540d\u79f0\u91cd\u6620\u5c04\u65f6\u867d\u7136\u8bed\u6cd5\u4e0d\u540c\uff0c\u4f46\u662f\u5b9e\u73b0\u529f\u80fd\u7c7b\u4f3c\uff0c\u90fd\u662f\u542f\u52a8\u4e86\u4e09\u4e2a turtlesim_node \u8282\u70b9\uff0c\u7b2c\u4e00\u4e2a\u8282\u70b9\u8bbe\u7f6e\u4e86\u8282\u70b9\u540d\u79f0\uff0c\u7b2c\u4e8c\u4e2a\u8282\u70b9\u8bbe\u7f6e\u4e86\u547d\u540d\u7a7a\u95f4\uff0c\u7b2c\u4e09\u4e2a\u8282\u70b9\u65e2\u8bbe\u7f6e\u4e86\u547d\u540d\u7a7a\u95f4\u53c8\u8bbe\u7f6e\u4e86\u8282\u70b9\u540d\u79f0\uff0c\u5206\u522b\u6267\u884c\u4e09\u4e2alaunch\u6587\u4ef6\uff0c\u7136\u540e\u4f7f\u7528<code>ros2 node list</code>\u67e5\u770b\u8282\u70b9\u4fe1\u606f\uff0c\u663e\u793a\u7ed3\u679c\u90fd\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>/t1/turtl1\n/t1/turtlesim\n/turtle1\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/343-bian-ma-jie-jue-jie-dian-zhong-ming-wen-ti/","title":"343 bian ma jie jue jie dian zhong ming wen ti","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/343-bian-ma-jie-jue-jie-dian-zhong-ming-wen-ti/#343","title":"3.4.3 \u7f16\u7801\u8bbe\u7f6e\u8282\u70b9\u540d\u79f0","text":"<p>\u5728 rclcpp \u548c rclpy \u4e2d\uff0c\u8282\u70b9\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4e2d\uff0c\u90fd\u5206\u522b\u63d0\u4f9b\u4e86\u8bbe\u7f6e\u8282\u70b9\u540d\u79f0\u4e0e\u547d\u540d\u7a7a\u95f4\u7684\u53c2\u6570\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/343-bian-ma-jie-jue-jie-dian-zhong-ming-wen-ti/#1rclcppapi","title":"1.rclcpp\u4e2d\u7684\u76f8\u5173API","text":"<p>rclcpp\u4e2d\u8282\u70b9\u7c7b\u7684\u6784\u9020\u51fd\u6570\u5982\u4e0b\uff1a</p> <pre><code>Node (const std::string &amp;node_name, const NodeOptions &amp;options=NodeOptions())\nNode (const std::string &amp;node_name, const std::string &amp;namespace_, const NodeOptions &amp;options=NodeOptions())\n</code></pre> <p>\u6784\u9020\u51fd\u65701\u4e2d\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7node_name\u8bbe\u7f6e\u8282\u70b9\u540d\u79f0\uff0c\u6784\u9020\u51fd\u65702\u65e2\u53ef\u4ee5\u901a\u8fc7node_name\u8bbe\u7f6e\u8282\u70b9\u540d\u79f0\u4e5f\u53ef\u4ee5\u901a\u8fc7namespace_\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/34-jie-dian-zhong-ming/343-bian-ma-jie-jue-jie-dian-zhong-ming-wen-ti/#2rclpyapi","title":"2.rclpy\u4e2d\u7684\u76f8\u5173API","text":"<p>rclpy\u4e2d\u8282\u70b9\u7c7b\u7684\u6784\u9020\u51fd\u6570\u5982\u4e0b\uff1a</p> <pre><code>Node(node_name, *,\n   context=None,\n   cli_args=None,\n   namespace=None, \n   use_global_arguments=True, \n   enable_rosout=True, \n   start_parameter_services=True, \n   parameter_overrides=None, \n   allow_undeclared_parameters=False, \n   automatically_declare_parameters_from_overrides=False)\n</code></pre> <p>\u6784\u9020\u51fd\u6570\u4e2d\u53ef\u4ee5\u4f7f\u7528node_name\u8bbe\u7f6e\u8282\u70b9\u540d\u79f0\uff0cnamespace\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/351-ros2-run-xiu-gai-hua-ti-ming-cheng/","title":"351 ros2 run xiu gai hua ti ming cheng","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/351-ros2-run-xiu-gai-hua-ti-ming-cheng/#351-ros2-run","title":"3.5.1 ros2 run \u4fee\u6539\u8bdd\u9898\u540d\u79f0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/351-ros2-run-xiu-gai-hua-ti-ming-cheng/#1rosrun\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4","title":"1.ros2 run\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4","text":"<p>\u8be5\u5b9e\u73b0\u4e0e3.4.1 ros2 run\u8bbe\u7f6e\u8282\u70b9\u540d\u79f0\u4e2d\u6f14\u793a\u7684\u8bed\u6cd5\u4f7f\u7528\u4e00\u81f4\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/351-ros2-run-xiu-gai-hua-ti-ming-cheng/#11\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u6f14\u793a","title":"1.1\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\u6f14\u793a","text":"<p>\u8bed\u6cd5\uff1aros2 run \u5305\u540d \u8282\u70b9\u540d --ros-args --remap __ns:=\u547d\u540d\u7a7a\u95f4</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>ros2 run turtlesim turtlesim_node --ros-args --remap __ns:=/t1\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/351-ros2-run-xiu-gai-hua-ti-ming-cheng/#12\u8fd0\u884c\u7ed3\u679c","title":"1.2\u8fd0\u884c\u7ed3\u679c","text":"<p>\u4f7f\u7528<code>ros2 topic list</code>\u67e5\u770b\u8282\u70b9\u4fe1\u606f\uff0c\u663e\u793a\u7ed3\u679c\uff1a</p> <pre><code>/t1/turtle1/cmd_vel\n/t1/turtle1/color_sensor\n/t1/turtle1/pose\n</code></pre> <p>\u8282\u70b9\u4e0b\u7684\u8bdd\u9898\u5df2\u7ecf\u6dfb\u52a0\u4e86\u547d\u540d\u7a7a\u95f4\u524d\u7f00\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/351-ros2-run-xiu-gai-hua-ti-ming-cheng/#2rosrun\u540d\u79f0\u91cd\u6620\u5c04","title":"2.ros2 run\u8bdd\u9898\u540d\u79f0\u91cd\u6620\u5c04","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/351-ros2-run-xiu-gai-hua-ti-ming-cheng/#21\u4e3a\u8282\u70b9\u8d77\u522b\u540d","title":"2.1\u4e3a\u8bdd\u9898\u8d77\u522b\u540d","text":"<p>\u8bed\u6cd5\uff1a ros2 run \u5305\u540d \u8282\u70b9\u540d --ros-args --remap \u539f\u8bdd\u9898\u540d\u79f0:=\u65b0\u8bdd\u9898\u540d\u79f0</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>ros2 run turtlesim turtlesim_node --ros-args --remap /turtle1/cmd_vel:=/cmd_vel\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/351-ros2-run-xiu-gai-hua-ti-ming-cheng/#22\u8fd0\u884c\u7ed3\u679c","title":"2.2\u8fd0\u884c\u7ed3\u679c","text":"<p>\u4f7f\u7528<code>ros2 topic list</code>\u67e5\u770b\u8282\u70b9\u4fe1\u606f\uff0c\u663e\u793a\u7ed3\u679c\uff1a</p> <pre><code>/cmd_vel\n/turtle1/color_sensor\n/turtle1/pose\n</code></pre> <p>\u8282\u70b9\u4e0b\u7684\u8bdd\u9898/turtle1/cmd_vel\u5df2\u7ecf\u88ab\u4fee\u6539\u4e3a\u4e86/cmd_vel\u3002</p> <p>\u6ce8\u610f\uff1a</p> <p>\u5f53\u4e3a\u8282\u70b9\u6dfb\u52a0\u547d\u540d\u7a7a\u95f4\u65f6\uff0c\u8282\u70b9\u4e0b\u7684\u6240\u6709\u975e\u5168\u5c40\u8bdd\u9898\u90fd\u4f1a\u524d\u7f00\u547d\u540d\u7a7a\u95f4\uff0c\u800c\u91cd\u6620\u5c04\u7684\u65b9\u5f0f\u53ea\u662f\u4fee\u6539\u6307\u5b9a\u8bdd\u9898\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/352-launch-wen-jian-xiu-gai-hua-ti-ming-cheng/","title":"352 launch wen jian xiu gai hua ti ming cheng","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/352-launch-wen-jian-xiu-gai-hua-ti-ming-cheng/#352-launch","title":"3.5.2 launch \u6587\u4ef6\u4fee\u6539\u8bdd\u9898\u540d\u79f0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/352-launch-wen-jian-xiu-gai-hua-ti-ming-cheng/#1pythonlaunch","title":"1.Python\u65b9\u5f0f\u5b9e\u73b0\u7684launch\u6587\u4ef6\u4fee\u6539\u8bdd\u9898\u540d\u79f0","text":"<p>\u5728 Python \u65b9\u5f0f\u5b9e\u73b0\u7684 launch \u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u7c7b <code>launch_ros.actions.Node</code>\u7684\u6784\u9020\u51fd\u6570\u4e2d\u7684\u53c2\u6570 remappings \u4fee\u6539\u8bdd\u9898\u540d\u79f0\uff0c\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n\n    return LaunchDescription([\n        Node(package=\"turtlesim\",executable=\"turtlesim_node\",namespace=\"t1\"),\n        Node(package=\"turtlesim\",\n            executable=\"turtlesim_node\",\n            remappings=[(\"/turtle1/cmd_vel\",\"/cmd_vel\")]\n        )\n\n    ])\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/352-launch-wen-jian-xiu-gai-hua-ti-ming-cheng/#2xmllaunch","title":"2.XML\u65b9\u5f0f\u5b9e\u73b0\u7684launch\u6587\u4ef6\u4fee\u6539\u8bdd\u9898\u540d\u79f0","text":"<p>\u5728 XML \u65b9\u5f0f\u5b9e\u73b0\u7684 launch \u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 node \u6807\u7b7e\u7684\u5b50\u6807\u7b7e remap\uff08\u5c5e\u6027from\u53d6\u503c\u4e3a\u88ab\u4fee\u6539\u7684\u8bdd\u9898\u540d\u79f0\uff0c\u5c5e\u6027to\u7684\u53d6\u503c\u4e3a\u4fee\u6539\u540e\u7684\u8bdd\u9898\u540d\u79f0\uff09 \u4fee\u6539\u8bdd\u9898\u540d\u79f0\uff0c\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>&lt;launch&gt;\n    &lt;node pkg=\"turtlesim\" exec=\"turtlesim_node\" namespace=\"t1\" /&gt;\n    &lt;node pkg=\"turtlesim\" exec=\"turtlesim_node\"&gt;\n        &lt;remap from=\"/turtle1/cmd_vel\" to=\"/cmd_vel\" /&gt;\n    &lt;/node&gt;\n&lt;/launch&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/352-launch-wen-jian-xiu-gai-hua-ti-ming-cheng/#3yamllaunch","title":"3.YAML\u65b9\u5f0f\u5b9e\u73b0\u7684launch\u6587\u4ef6\u4fee\u6539\u8bdd\u9898\u540d\u79f0","text":"<p>\u5728 YAML \u65b9\u5f0f\u5b9e\u73b0\u7684 launch \u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 node \u5c5e\u6027\u4e2d remap\uff08\u5c5e\u6027from\u53d6\u503c\u4e3a\u88ab\u4fee\u6539\u7684\u8bdd\u9898\u540d\u79f0\uff0c\u5c5e\u6027to\u7684\u53d6\u503c\u4e3a\u4fee\u6539\u540e\u7684\u8bdd\u9898\u540d\u79f0\uff09 \u4fee\u6539\u8bdd\u9898\u540d\u79f0\uff0c\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>launch:\n- node:\n    pkg: turtlesim\n    exec: turtlesim_node\n    namespace: t1\n- node:\n    pkg: turtlesim\n    exec: turtlesim_node\n    remap:\n    -\n        from: \"/turtle1/cmd_vel\"\n        to: \"/cmd_vel\"\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/352-launch-wen-jian-xiu-gai-hua-ti-ming-cheng/#4","title":"4.\u6d4b\u8bd5","text":"<p>\u4e0a\u8ff0\u4e09\u79cd\u65b9\u5f0f\u5728\u4fee\u6539\u8bdd\u9898\u540d\u79f0\u65f6\u867d\u7136\u8bed\u6cd5\u4e0d\u540c\uff0c\u4f46\u662f\u5b9e\u73b0\u529f\u80fd\u7c7b\u4f3c\uff0c\u90fd\u662f\u542f\u52a8\u4e86\u4e24\u4e2a<code>turtlesim_node</code>\u8282\u70b9\uff0c\u4e00\u4e2a\u8282\u70b9\u6dfb\u52a0\u4e86\u547d\u540d\u7a7a\u95f4\uff0c\u53e6\u4e00\u4e2a\u8282\u70b9\u5c06\u8bdd\u9898\u4ece<code>/turtle1/cmd_vel</code>\u6620\u5c04\u5230\u4e86<code>/cmd_vel</code>\u3002\u4f7f\u7528<code>ros2 topic list</code>\u67e5\u770b\u8282\u70b9\u4fe1\u606f\uff0c\u663e\u793a\u7ed3\u679c\uff1a</p> <p>\u6dfb\u52a0\u547d\u540d\u7a7a\u95f4\u7684\u8282\u70b9\u5bf9\u5e94\u7684\u8bdd\u9898\u4e3a\uff1a</p> <pre><code>/t1/turtle1/cmd_vel\n/t1/turtle1/color_sensor\n/t1/turtle1/pose\n</code></pre> <p>\u91cd\u6620\u5c04\u7684\u8282\u70b9\u5bf9\u5e94\u7684\u8bdd\u9898\u4e3a\uff1a</p> <pre><code>/cmd_vel\n/turtle1/color_sensor\n/turtle1/pose\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/353-bian-ma-she-zhi-hua-ti-ming-cheng/","title":"353 bian ma she zhi hua ti ming cheng","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/353-bian-ma-she-zhi-hua-ti-ming-cheng/#353","title":"3.5.3 \u7f16\u7801\u8bbe\u7f6e\u8bdd\u9898\u540d\u79f0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/353-bian-ma-she-zhi-hua-ti-ming-cheng/#_1","title":"\u8bdd\u9898\u5206\u7c7b","text":"<p>\u8bdd\u9898\u7684\u540d\u79f0\u7684\u8bbe\u7f6e\u662f\u4e0e\u8282\u70b9\u7684\u547d\u540d\u7a7a\u95f4\u3001\u8282\u70b9\u7684\u540d\u79f0\u6709\u4e00\u5b9a\u5173\u7cfb\u7684\uff0c\u8bdd\u9898\u540d\u79f0\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u4e09\u79cd\u7c7b\u578b:</p> <ul> <li>\u5168\u5c40\u8bdd\u9898\\(\u8bdd\u9898\u53c2\u8003ROS\u7cfb\u7edf\uff0c\u4e0e\u8282\u70b9\u547d\u540d\u7a7a\u95f4\u5e73\u7ea7\\)\uff1b</li> <li>\u76f8\u5bf9\u8bdd\u9898\\(\u8bdd\u9898\u53c2\u8003\u7684\u662f\u8282\u70b9\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u4e0e\u8282\u70b9\u540d\u79f0\u5e73\u7ea7\\)\uff1b</li> <li>\u79c1\u6709\u8bdd\u9898\\(\u8bdd\u9898\u53c2\u8003\u8282\u70b9\u540d\u79f0\uff0c\u662f\u8282\u70b9\u540d\u79f0\u7684\u5b50\u7ea7\\)\u3002</li> </ul> <p>\u603b\u4e4b\uff0c\u4ee5\u7f16\u7801\u65b9\u5f0f\u8bbe\u7f6e\u8bdd\u9898\u540d\u79f0\u662f\u6bd4\u8f83\u7075\u6d3b\u7684\u3002\u672c\u8282\u5c06\u4ecb\u7ecd\u5982\u4f55\u5728 rclcpp \u548c rclpy \u4e2d\u5206\u522b\u8bbe\u7f6e\u4e0d\u540c\u7c7b\u578b\u7684\u8bdd\u9898\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/353-bian-ma-she-zhi-hua-ti-ming-cheng/#_2","title":"\u51c6\u5907","text":"<p>\u8bf7\u5148\u5206\u522b\u521b\u5efa C++ \u4e0e Python \u76f8\u5173\u7684\u529f\u80fd\u5305\u4ee5\u53ca\u8282\u70b9\uff0c\u4e14\u5047\u5b9a\u5728\u521b\u5efa\u8282\u70b9\u65f6\uff0c\u4f7f\u7528\u7684\u547d\u540d\u7a7a\u95f4\u4e3a xxx\uff0c\u8282\u70b9\u540d\u79f0\u4e3a yyy\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/353-bian-ma-she-zhi-hua-ti-ming-cheng/#_3","title":"\u8bdd\u9898\u8bbe\u7f6e","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/353-bian-ma-she-zhi-hua-ti-ming-cheng/#11","title":"1.1\u5168\u5c40\u8bdd\u9898","text":"<p>\u683c\u5f0f\uff1a\u5b9a\u4e49\u65f6\u4ee5<code>/</code>\u5f00\u5934\u7684\u540d\u79f0\uff0c\u548c\u547d\u540d\u7a7a\u95f4\u3001\u8282\u70b9\u540d\u79f0\u65e0\u5173\u3002</p> <p>rclcpp\u793a\u4f8b\uff1a<code>publisher_ = this-&gt;create_publisher&lt;std_msgs::msg::String&gt;(\"/topic/chatter\", 10);</code></p> <p>rclpy\u793a\u4f8b\uff1a<code>self.publisher_ = self.create_publisher(String, '/topic/chatter', 10)</code></p> <p>\u8bdd\u9898\uff1a\u8bdd\u9898\u540d\u79f0\u4e3a /topic/chatter\uff0c\u4e0e\u547d\u540d\u7a7a\u95f4 xxx \u4ee5\u53ca\u8282\u70b9\u540d\u79f0 yyy \u65e0\u5173\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/353-bian-ma-she-zhi-hua-ti-ming-cheng/#12","title":"1.2\u76f8\u5bf9\u8bdd\u9898","text":"<p>\u683c\u5f0f\uff1a\u975e<code>/</code>\u5f00\u5934\u7684\u540d\u79f0\uff0c\u53c2\u8003\u547d\u540d\u7a7a\u95f4\u8bbe\u7f6e\u8bdd\u9898\u540d\u79f0\uff0c\u548c\u8282\u70b9\u540d\u79f0\u65e0\u5173\u3002</p> <p>rclcpp\u793a\u4f8b\uff1a<code>publisher_ = this-&gt;create_publisher&lt;std_msgs::msg::String&gt;(\"topic/chatter\", 10);</code></p> <p>rclpy\u793a\u4f8b\uff1a<code>self.publisher_ = self.create_publisher(String, 'topic/chatter', 10)</code></p> <p>\u8bdd\u9898\uff1a\u8bdd\u9898\u540d\u79f0\u4e3a /xxx/topic/chatter\uff0c\u4e0e\u547d\u540d\u7a7a\u95f4 xxx \u6709\u5173\uff0c\u4e0e\u8282\u70b9\u540d\u79f0 yyy \u65e0\u5173\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/35-hua-ti-zhong-ming/353-bian-ma-she-zhi-hua-ti-ming-cheng/#13","title":"1.3\u79c1\u6709\u8bdd\u9898","text":"<p>\u683c\u5f0f\uff1a\u5b9a\u4e49\u65f6\u4ee5<code>~/</code>\u5f00\u5934\u7684\u540d\u79f0\uff0c\u548c\u547d\u540d\u7a7a\u95f4\u3001\u8282\u70b9\u540d\u79f0\u90fd\u6709\u5173\u7cfb\u3002</p> <p>rclcpp\u793a\u4f8b\uff1a<code>publisher_ = this-&gt;create_publisher&lt;std_msgs::msg::String&gt;(\"~/topic/chatter\", 10);</code></p> <p>rclpy\u793a\u4f8b\uff1a<code>self.publisher_ = self.create_publisher(String, '~/topic/chatter', 10)</code></p> <p>\u8bdd\u9898\uff1a\u8bdd\u9898\u540d\u79f0\u4e3a /xxx/yyy/topic/chatter\uff0c\u4f7f\u7528\u547d\u540d\u7a7a\u95f4 xxx \u4ee5\u53ca\u8282\u70b9\u540d\u79f0 yyy \u4f5c\u4e3a\u8bdd\u9898\u540d\u79f0\u524d\u7f00\u3002</p> <p>\u7efc\u4e0a\uff0c\u8bdd\u9898\u540d\u79f0\u8bbe\u7f6e\u89c4\u5219\u5728rclcpp\u4e0erclpy\u4e2d\u57fa\u672c\u4e00\u81f4\uff0c\u4e14\u4e0a\u8ff0\u89c4\u5219\u4e5f\u540c\u6837\u9002\u7528\u4e8eros2 run\u6307\u4ee4\u4e0elaunch\u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/","title":"361 liu cheng xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/#361-api","title":"3.6.1 \u6d41\u7a0b\u76f8\u5173API","text":"<p>\u4e00\u4e2a\u5178\u578b\u7684 ROS2 \u7a0b\u5e8f\u7531\u4ee5\u4e0b\u64cd\u4f5c\u7ec4\u6210\uff1a</p> <ol> <li>\u521d\u59cb\u5316\u5ba2\u6237\u7aef\uff0c\u5fc5\u987b\u5148\u4e8e\u8282\u70b9\u521b\u5efa\u5b8c\u6210\uff1b</li> <li>\u521b\u5efa\u4e00\u4e2a\u6216\u591a\u4e2a\u8282\u70b9\uff1b</li> <li>\u56de\u65cb\u51fd\u6570\u5904\u7406\u8282\u70b9\u4e2d\u56de\u8c03\u51fd\u6570\uff1b</li> <li>\u91ca\u653e\u8d44\u6e90\u3002</li> </ol> <p>\u4e0d\u7ba1\u662f rclcpp \u8fd8\u662f rclpy \u57fa\u672c\u7f16\u5199\u6d41\u7a0b\u90fd\u662f\u5982\u4e0a\u6240\u8ff0\uff0c\u672c\u8282\u5c06\u4e3b\u8981\u4ecb\u7ecd\u8fd9\u4e9b\u6b65\u9aa4\u4e2d\u5b9e\u7528\u7684\u76f8\u5173API\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/#1rclcpp","title":"1.rclcpp","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/#11","title":"1.1\u521d\u59cb\u5316","text":"<p>\u901a\u8fc7 rmw \u5b9e\u73b0\u521d\u59cb\u5316\u901a\u4fe1\u5e76\u8bbe\u7f6e\u5168\u5c40\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002</p> <pre><code>/**\n * \u901a\u8fc7\u51fd\u6570 rclcpp::contexts::get_global_default_context() \u521d\u59cb\u5316\u5168\u5c40 context\uff08\u4e0a\u4e0b\u6587\uff09\u3002\n * \u901a\u8fc7\u51fd\u6570 rclcpp::install_signal_handlers() \u5b89\u88c5\u5168\u5c40\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\n *\n * \\param[in] argc \u8981\u89e3\u6790\u7684\u547d\u4ee4\u884c\u53c2\u6570\u7684\u4e2a\u6570\u3002\n * \\param[in] argv \u8981\u89e3\u6790\u7684\u547d\u4ee4\u884c\u53c2\u6570\u6570\u7ec4\u3002\n * \\param[in] init_options \u8981\u5e94\u7528\u7684\u521d\u59cb\u5316\u9009\u9879\u3002\n * \\param[in] signal_handler_options \u7528\u4e8e\u58f0\u660e\u5e94\u5b89\u88c5\u54ea\u4e9b\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\n */\nvoid init(\n  int argc,\n  char const * const * argv,\n  const InitOptions &amp; init_options = InitOptions(),\n  SignalHandlerOptions signal_handler_options = SignalHandlerOptions::All);\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/#12","title":"1.2\u8282\u70b9\u521b\u5efa","text":"<p>\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\u6307\u9488\u3002</p> <pre><code>rclcpp::Node::make_shared();\n</code></pre> <p>\u6216\u8005\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8282\u70b9\u7c7b\uff0c\u7136\u540e\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff0c\u8282\u70b9\u6784\u9020\u51fd\u6570 3.6.2 \u4ecb\u7ecd\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/#13","title":"1.3\u56de\u65cb\u51fd\u6570","text":"<p>\u56de\u65cb\u51fd\u6570\u7528\u4e8e\u6267\u884c\u8282\u70b9\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>/// \u521b\u5efa\u4e00\u4e2a\u9ed8\u8ba4\u7684\u5355\u7ebf\u7a0b\u6267\u884c\u5668\u5e76\u56de\u65cb\u6307\u5b9a\u7684\u8282\u70b9\uff08\u5faa\u73af\u6267\u884c\uff09\u3002 \n/** \\param[in] node_ptr \u88ab\u56de\u65cb\u7684\u8282\u70b9\u7684\u6307\u9488\u3002 */\nvoid rclcpp::spin(rclcpp::Node::SharedPtr node_ptr);\n</code></pre> <pre><code>/// \u521b\u5efa\u4e00\u4e2a\u9ed8\u8ba4\u7684\u5355\u7ebf\u7a0b\u6267\u884c\u5668\u5e76\u56de\u65cb\u6307\u5b9a\u7684\u8282\u70b9\uff08\u53ea\u6267\u884c\u4f9d\u6b21\uff09\u3002\n/** \\param[in] node_ptr \u88ab\u56de\u65cb\u7684\u8282\u70b9\u7684\u6307\u9488\u3002 */\nvoid rclcpp::spin_some(rclcpp::Node::SharedPtr node_ptr);\n</code></pre> <pre><code>/// \u6267\u884c\u4efb\u52a1\u76f4\u81f3 future \u5b8c\u6210\uff0c\u9664\u975e\u8d85\u65f6\u6216 rclcpp \u88ab\u4e2d\u65ad\u3002\n/*\n* \\param[in] node_ptr \u88ab\u56de\u65cb\u7684\u8282\u70b9\u7684\u6307\u9488\u3002\n* \\param[in] future \u4fdd\u5b58\u672a\u6765\u8fd4\u56de\u7ed3\u679c\u7684\u5bf9\u8c61\u3002\n* \\param[in] timeout \u8d85\u65f6\u65f6\u95f4\u3002\n*/\ntemplate&lt;typename NodeT = rclcpp::Node, typename FutureT, typename TimeRepT = int64_t,\n  typename TimeT = std::milli&gt;\nrclcpp::FutureReturnCode spin_until_future_complete(\n  std::shared_ptr&lt;NodeT&gt; node_ptr,\n  const FutureT &amp; future,\n  std::chrono::duration&lt;TimeRepT, TimeT&gt; timeout = std::chrono::duration&lt;TimeRepT, TimeT&gt;(-1));\n</code></pre> <p>\u51fd\u6570 rclcpp::spin_some() \u4e00\u822c\u4f1a\u7ed3\u5408\u5faa\u73af\u4f7f\u7528\uff0c\u4e14\u5faa\u73af\u6761\u4ef6\u662f\u5f53\u524d\u5ba2\u6237\u7aef\u662f\u5426\u8fd0\u884c\u6b63\u5e38\uff0crclcpp \u72b6\u6001\u53ef\u4ee5\u901a\u8fc7rclcpp::ok()\u51fd\u6570\u5224\u65ad\u3002</p> <pre><code>/**\n * \u5f53\u7a0b\u5e8f\u5176\u4ed6\u90e8\u5206\u8c03\u7528\u4e86 rclcpp::shutdown() \u6216\u8005\u7531\u4e8erclcpp\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u63a5\u6536\u5230\u4e86\u5173\u95ed\u4fe1\u53f7\uff0c\n * \u6bd4\u5982\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528\u4e86 ctrl + c \u5feb\u6377\u952e\u3002\u4f1a\u8fd4\u56defalse\u3002\n * \n * \u5982\u679c cpntext \u53d6\u503c nullptr\uff0c\u5219\u4f7f\u7528\u5168\u5c40 context\uff0c\u5373\u7531 rclcpp::init() \u521d\u59cb\u5316\u7684 context\u3002\n *\n * \\param[in] context \u88ab\u5173\u95ed\u7684 context \u5bf9\u8c61\u6307\u9488\u3002\n * \\return context \u88ab\u5173\u95ed\u65f6\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002\n */\nbool rclcpp::ok(rclcpp::Context::SharedPtr context = nullptr);\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/#14","title":"1.4\u91ca\u653e\u8d44\u6e90","text":"<p>\u5173\u95ed context \uff08\u4e0a\u4e0b\u6587\u5bf9\u8c61\uff09\u3002</p> <pre><code>/**\n * \u5982\u679c\u4e3a context \u4f20\u53c2 nullptr,\u90a3\u4e48\u5c31\u5173\u95ed\u901a\u8fc7 rclcpp::init() \u521b\u5efa\u7684\u5168\u5c40 context\u3002\n * \u5982\u679c\u4f7f\u7528\u5168\u5c40 context\uff0c\u5219\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u4e5f\u4f1a\u88ab\u5378\u8f7d\u3002\n *\n * \u6267\u884c\u8be5\u51fd\u6570\u65f6\uff0c\u4e5f\u5c06\u56de\u8c03 on_shutdown() \u51fd\u6570\u3002\n *\n * \\param[in] context \u88ab\u5173\u95ed\u7684 context\u3002\n * \\param[in] reason \u4f20\u9012\u7ed9\u5173\u95ed context \u51fd\u6570\u7684\u5b57\u7b26\u4e32\u3002\n * \\return \u5982\u679c\u5173\u95ed\u6210\u529f\uff0c\u5219\u4e3a true\uff0c\u5982\u679c context \u5df2\u5173\u95ed\uff0c\u5219\u4e3a false\u3002\n */\nbool rclcpp::shutdown(\n  rclcpp::Context::SharedPtr context = nullptr,\n  const std::string &amp; reason = \"user called rclcpp::shutdown()\");\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/#2rclpy","title":"2.rclpy","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/#11_1","title":"1.1\u521d\u59cb\u5316","text":"<p>\u521d\u59cb\u5316 rclpy \u5ba2\u6237\u7aef\u3002</p> <pre><code>def init(\n    *,\n    args: Optional[List[str]] = None,\n    context: Context = None,\n    domain_id: Optional[int] = None,\n    signal_handler_options: Optional[SignalHandlerOptions] = None,\n) -&gt; None:\n    \"\"\"\n    \u4e3a\u7ed9\u5b9a\u7684 context \u521d\u59cb\u5316 ROS2 \u901a\u4fe1\u3002\n    :param args: \u547d\u4ee4\u884c\u53c2\u6570\u5217\u8868\u3002\n    :param context: \u7528\u4e8e\u521d\u59cb\u5316\u7684 context\uff0c \u5982\u679c\u662f ``None``,\u90a3\u4e48\u901a\u8fc7\u51fd\u6570 .get_default_context \u83b7\u53d6\u9ed8\u8ba4 context\u3002\n    :param domain_id: domain id\u503c\u3002\n    :param signal_handler_options: \u58f0\u660e\u8981\u5b89\u88c5\u7684\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\n    :return: None\n    \"\"\"\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/#12_1","title":"1.2\u8282\u70b9\u521b\u5efa","text":"<p>\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\u3002</p> <pre><code>def create_node(\n    node_name: str,\n    *,\n    context: Context = None,\n    cli_args: List[str] = None,\n    namespace: str = None,\n    use_global_arguments: bool = True,\n    enable_rosout: bool = True,\n    start_parameter_services: bool = True,\n    parameter_overrides: List[Parameter] = None,\n    allow_undeclared_parameters: bool = False,\n    automatically_declare_parameters_from_overrides: bool = False\n) -&gt; 'Node':\n    \"\"\"\n    \u521b\u5efa Node \u5bf9\u8c61\u3002\n\n    :param node_name: \u8282\u70b9\u540d\u79f0\u3002\n    :param context: \u4e0e\u8282\u70b9\u5173\u8054\u7684context, \u5982\u679c\u662f ``None`` \u90a3\u4e48\u4f7f\u7528\u9ed8\u8ba4\u7684\u5168\u5c40 context\u3002\n    :param cli_args: \u8282\u70b9\u4f7f\u7528\u7684\u547d\u4ee4\u884c\u53c2\u6570\u3002\u5e94\u7528\u4e8e ROS2 \u8282\u70b9\uff0c\u53c2\u6570\u4e4b\u524d\u5305\u542b\u9690\u5f0f\u7684 `--ros-args`\u3002\n    :param namespace: \u4e0e\u8282\u70b9\u5173\u8054\u7684\u547d\u540d\u7a7a\u95f4\u3002\n    :param use_global_arguments: \u8282\u70b9\u662f\u5426\u4f7f\u7528\u8fdb\u7a0b\u8303\u56f4\u7684\u547d\u4ee4\u884c\u53c2\u6570\u3002\n    :param enable_rosout: rosout \u65e5\u5fd7\u8bb0\u5f55\u662f\u5426\u53ef\u7528\u3002\n    :param start_parameter_services: \u662f\u5426\u542f\u7528\u53c2\u6570\u670d\u52a1\u3002\n    :param parameter_overrides: \u4e00\u4e2a`Parameter`\u5bf9\u8c61\u5217\u8868\uff0c\u7528\u4e8e\u8986\u76d6\u5728\u6b64\u8282\u70b9\u4e0a\u58f0\u660e\u7684\u53c2\u6570\u7684\u521d\u59cb\u503c\u3002\n    :param allow_undeclared_parameters: \u662f\u5426\u5141\u8bb8\u672a\u58f0\u660e\u7684\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a False\uff08\u4e0d\u5141\u8bb8\uff09\u3002\n    :param automatically_declare_parameters_from_overrides: \u5982\u679c\u4e3a True\uff0c\u5219\u201c\u53c2\u6570\u8986\u76d6\u201d\u5c06\u7528\u4e8e\u5728\u521b\u5efa\u671f\u95f4\u9690\u5f0f\u58f0\u660e\u8282\u70b9\u4e0a\u7684\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a False\u3002\n    :return: \u8282\u70b9\u5bf9\u8c61.\n    \"\"\"\n</code></pre> <p>\u6216\u8005\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8282\u70b9\u7c7b\uff0c\u7136\u540e\u521b\u5efa\u8282\u70b9\u5bf9\u8c61\uff0c\u8282\u70b9\u6784\u9020\u51fd\u6570 3.6.2 \u4ecb\u7ecd\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/#13_1","title":"1.3\u56de\u65cb\u51fd\u6570","text":"<p>\u56de\u65cb\u51fd\u6570\u7528\u4e8e\u6267\u884c\u8282\u70b9\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>def spin(node: 'Node', executor: 'Executor' = None) -&gt; None:\n    \"\"\"\n    \u6267\u884c\u4efb\u52a1\u5e76\u963b\u585e\uff0c\u76f4\u5230\u4e0e\u6267\u884c\u5668\u5173\u8054\u7684\u4e0a\u4e0b\u6587\u5173\u95ed\u3002\n    \u56de\u8c03\u51fd\u6570\u5c06\u7531\u63d0\u4f9b\u7684\u6267\u884c\u5668\u6267\u884c\u3002\n\n    :param node: \u9700\u8981\u88ab\u56de\u65cb\u6267\u884c\u7684\u8282\u70b9\u3002\n    :param executor: \u8981\u4f7f\u7528\u7684\u6267\u884c\u5668\uff0c\u5982\u679c\u53d6\u503c ``None`` \u90a3\u4e48\u4f7f\u7528\u5168\u5c40\u6267\u884c\u5668\u3002\n    :return: None\n    \"\"\"\n</code></pre> <pre><code>def spin_once(node: 'Node', *, executor: 'Executor' = None, timeout_sec: float = None) -&gt; None:\n    \"\"\"\n    \u53ea\u8981\u56de\u8c03\u5728\u8d85\u65f6\u5230\u671f\u4e4b\u524d\u51c6\u5907\u597d\uff0c\u63d0\u4f9b\u7684\u6267\u884c\u7a0b\u5e8f\u5c31\u4f1a\u6267\u884c\u4e00\u6b21\u56de\u8c03\u3002\n    \u5982\u679c\u6ca1\u6709\u63d0\u4f9bExecutor\uff08\u5373\u3002None\uff09\uff0c\u5219\u4f7f\u7528\u5168\u5c40\u6267\u884c\u5668\u3002\u5982\u679c\u5168\u5c40\u6267\u884c\u7a0b\u5e8f\u6709\u4e00\u4e2a\u90e8\u5206\u5b8c\u6210\u7684\u534f\u7a0b\uff0c\u5219\u5b8c\u6210\u7684\u5de5\u4f5c\u53ef\u80fd\u662f\u9488\u5bf9\u63d0\u4f9b\u7684\u8282\u70b9\u4ee5\u5916\u7684\u8282\u70b9\u3002\n\n    :param node: \u9700\u8981\u88ab\u56de\u65cb\u6267\u884c\u7684\u8282\u70b9\u3002\n    :param executor: \u8981\u4f7f\u7528\u7684\u6267\u884c\u5668\uff0c\u5982\u679c\u53d6\u503c ``None`` \u90a3\u4e48\u4f7f\u7528\u5168\u5c40\u6267\u884c\u5668\u3002\n    :param timeout_sec: \u8d85\u65f6\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5982\u679c\u662f``None``\u5219\u65e0\u9650\u671f\u7b49\u5f85\u3002\u5982\u679c\u4e3a 0\uff0c\u5219\u4e0d\u8981\u7b49\u5f85\u3002\n    :return: None\n    \"\"\"\n</code></pre> <pre><code>def spin_until_future_complete(\n    node: 'Node',\n    future: Future,\n    executor: 'Executor' = None,\n    timeout_sec: float = None\n) -&gt; None:\n    \"\"\"\n    \u6267\u884c\u4efb\u52a1\uff0c\u76f4\u5230 future \u5b8c\u6210\u3002\n\n    \u56de\u8c03\u548c\u5176\u4ed6\u5de5\u4f5c\u5c06\u7531\u63d0\u4f9b\u7684\u6267\u884c\u7a0b\u5e8f\u6267\u884c\uff0c\u76f4\u5230future.done() \u8fd4\u56deTrue\u6216\u4e0e\u6267\u884c\u7a0b\u5e8f\u5173\u8054\u7684 context \u5173\u95ed\u3002\n\n    :param node: \u6dfb\u52a0\u5230\u6267\u884c\u7a0b\u5e8f\u4ee5\u6267\u884c\u4efb\u52a1\u7684\u8282\u70b9\u3002\n    :param future: \u8981\u7b49\u5f85\u7684 future \u5bf9\u8c61\u3002\n    :param executor: \u8981\u4f7f\u7528\u7684\u6267\u884c\u5668\uff0c\u5982\u679c\u53d6\u503c ``None`` \u90a3\u4e48\u4f7f\u7528\u5168\u5c40\u6267\u884c\u5668\u3002\n    :param timeout_sec: \u8d85\u65f6\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\uff0c\u5982\u679c\u662f``None``\u5219\u65e0\u9650\u671f\u7b49\u5f85\u3002\u5982\u679c\u4e3a 0\uff0c\u5219\u4e0d\u8981\u7b49\u5f85\u3002\n    :return: None\n    \"\"\"\n</code></pre> <pre><code>def ok(*, context=None):\n    \"\"\"\n    \u5f53\u7a0b\u5e8f\u5176\u4ed6\u90e8\u5206\u8c03\u7528\u4e86 rclpy.shutdown() \u6216\u8005\u7531\u4e8erclpy\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u63a5\u6536\u5230\u4e86\u5173\u95ed\u4fe1\u53f7\uff0c\n    \u6bd4\u5982\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528\u4e86 ctrl + c \u5feb\u6377\u952e\u3002\u4f1a\u8fd4\u56defalse\u3002\n\n    \u5982\u679c cpntext \u53d6\u503c None\uff0c\u5219\u4f7f\u7528\u5168\u5c40 context\uff0c\u5373\u7531 rclpy.init() \u521d\u59cb\u5316\u7684 context\u3002\n\n    :param node: \u88ab\u5224\u65ad\u7684 context\u3002\n    :return: context \u88ab\u5173\u95ed\u65f6\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002\n    \"\"\"\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-liu-cheng-xiang-guan-api/#14_1","title":"1.4\u91ca\u653e\u8d44\u6e90","text":"<pre><code>def shutdown(*, context: Context = None, uninstall_handlers: Optional[bool] = None) -&gt; None:\n    \"\"\"\n    \u5173\u95ed\u4e4b\u524d\u521d\u59cb\u5316\u7684 context\u3002\n\n    :param context: \u4e0e\u8282\u70b9\u5173\u8054\u7684context, \u5982\u679c\u662f ``None``,\u90a3\u4e48\u901a\u8fc7\u51fd\u6570 .get_default_context \u83b7\u53d6\u9ed8\u8ba4 context\u3002\n    :param uninstall_handlers:\n        \u5982\u679c\u662f `None`\uff0c\u9ed8\u8ba4\u5173\u95ed\u4e0a\u4e0b\u6587\u65f6\u5c06\u5378\u8f7d\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\n        \u5982\u679c\u662f `True`\uff0c\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u5c06\u88ab\u5378\u8f7d\u3002\n        \u5982\u679c\u662f `False`\uff0c\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u4e0d\u4f1a\u88ab\u5378\u8f7d\u3002\n    :return: None\n    \"\"\"\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-rate/","title":"361 rate","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-rate/#361-rate","title":"3.6.1 Rate","text":"<p>\u7b2c2\u7ae0\u8bdd\u9898\u901a\u4fe1\u6848\u4f8b\u4e2d\uff0c\u8981\u6c42\u8bdd\u9898\u53d1\u5e03\u65b9\u6309\u7167\u4e00\u5b9a\u7684\u9891\u7387\u53d1\u5e03\u6d88\u606f\uff0c\u6211\u4eec\u5b9e\u73b0\u65f6\u662f\u901a\u8fc7\u5b9a\u65f6\u5668\u6765\u63a7\u5236\u53d1\u5e03\u9891\u7387\u7684\uff0c\u5176\u5b9e\uff0c\u9664\u4e86\u5b9a\u65f6\u5668\u4e4b\u5916\uff0cROS2 \u4e2d\u8fd8\u63d0\u4f9b\u4e86 Rate \u7c7b\uff0c\u901a\u8fc7\u8be5\u7c7b\u5bf9\u8c61\u4e5f\u53ef\u4ee5\u63a7\u5236\u7a0b\u5e8f\u7684\u8fd0\u884c\u9891\u7387\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-rate/#1rclcpp-rate","title":"1.rclcpp \u4e2d\u7684 Rate","text":"<p>\u793a\u4f8b\uff1a\u5468\u671f\u6027\u8f93\u51fa\u4e00\u6bb5\u6587\u672c\u3002</p> <pre><code>#include \"rclcpp/rclcpp.hpp\"\n\nusing namespace std::chrono_literals;\n\nint main(int argc, char ** argv)\n{\n  rclcpp::init(argc,argv);\n  auto node = rclcpp::Node::make_shared(\"rate_demo\");\n  // rclcpp::Rate rate(1000ms); // \u521b\u5efa Rate \u5bf9\u8c61\u65b9\u5f0f1\n  rclcpp::Rate rate(1.0); // \u521b\u5efa Rate \u5bf9\u8c61\u65b9\u5f0f2\n  while (rclcpp::ok())\n  {\n    RCLCPP_INFO(node-&gt;get_logger(),\"hello rate\");\n    // \u4f11\u7720\n    rate.sleep();\n  }\n\n  rclcpp::shutdown();\n  return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/361-rate/#2rclpy-rate","title":"2.rclpy \u4e2d\u7684 Rate","text":"<p>rclpy \u4e2d\u7684 Rate \u5bf9\u8c61\u53ef\u4ee5\u901a\u8fc7\u8282\u70b9\u521b\u5efa\uff0cRate \u5bf9\u8c61\u7684 sleep() \u51fd\u6570\u9700\u8981\u5728\u5b50\u7ebf\u7a0b\u4e2d\u6267\u884c\uff0c\u5426\u548b\u4f1a\u963b\u585e\u7a0b\u5e8f\u3002</p> <p>\u793a\u4f8b\uff1a\u5468\u671f\u6027\u8f93\u51fa\u4e00\u6bb5\u6587\u672c\u3002</p> <pre><code>import rclpy\nimport threading\nfrom rclpy.timer import Rate\n\nrate = None\nnode = None\n\ndef do_some():\n    global rate\n    global node\n    while rclpy.ok():\n        node.get_logger().info(\"hello ---------\")\n        # \u4f11\u7720\n        rate.sleep()\n\ndef main():\n    global rate\n    global node\n    rclpy.init()    \n    node = rclpy.create_node(\"rate_demo\")\n    # \u521b\u5efa Rate \u5bf9\u8c61\n    rate = node.create_rate(1.0)\n\n    # \u521b\u5efa\u5b50\u7ebf\u7a0b\n    thread = threading.Thread(target=do_some)\n    thread.start()\n\n    rclpy.shutdown()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/362-jie-dian-xiang-guan-api/","title":"362 jie dian xiang guan api","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/362-jie-dian-xiang-guan-api/#362-api","title":"3.6.2 \u8282\u70b9\u76f8\u5173API","text":"<p>\u8282\u70b9\u662f ROS2 \u7a0b\u5e8f\u4e2d\u7684\u57fa\u672c\u5355\u5143\uff0c\u53ef\u4ee5\u521b\u5efa\u5404\u79cd\u7c7b\u578b\u7684\u901a\u4fe1\u5bf9\u8c61\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/362-jie-dian-xiang-guan-api/#1node","title":"1.Node\u6784\u9020\u51fd\u6570","text":"<p>\u521b\u5efa\u5177\u6709\u6307\u5b9a\u540d\u79f0\u7684\u65b0\u8282\u70b9\u3002</p> <pre><code>/**\n * \\param[in] node_name \u8282\u70b9\u540d\u79f0\u3002\n * \\param[in] options \u8282\u70b9\u521b\u5efa\u7684\u9644\u52a0\u9009\u9879\u3002\n * \\throws InvalidNamespaceError \u547d\u540d\u7a7a\u95f4\u65e0\u6548\u5f02\u5e38\u3002\n */\nrclcpp::Node::Node(\n  const std::string &amp; node_name,\n  const NodeOptions &amp; options = NodeOptions());\n/**\n * \\param[in] node_name \u8282\u70b9\u540d\u79f0\u3002\n * \\param[in] namespace_ \u8282\u70b9\u547d\u540d\u7a7a\u95f4\u3002\n * \\param[in] options \u8282\u70b9\u521b\u5efa\u7684\u9644\u52a0\u9009\u9879\u3002\n * \\throws InvalidNamespaceError \u547d\u540d\u7a7a\u95f4\u65e0\u6548\u5f02\u5e38\u3002\n */\nrclcpp::Node::Node(\n  const std::string &amp; node_name,\n  const std::string &amp; namespace_,\n  const NodeOptions &amp; options = NodeOptions());\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/362-jie-dian-xiang-guan-api/#2","title":"2.\u5e38\u7528\u51fd\u6570","text":"<pre><code>/// Get the name of the node.\n/** \\return The name of the node. */\nRCLCPP_PUBLIC\nconst char *\nget_name() const;\n\n/// Get the namespace of the node.\n/**\n * This namespace is the \"node's\" namespace, and therefore is not affected\n * by any sub-namespace's that may affect entities created with this instance.\n * Use get_effective_namespace() to get the full namespace used by entities.\n *\n * \\sa get_sub_namespace()\n * \\sa get_effective_namespace()\n * \\return The namespace of the node.\n */\nRCLCPP_PUBLIC\nconst char *\nget_namespace() const;\n\n/// Get the fully-qualified name of the node.\n/**\n * The fully-qualified name includes the local namespace and name of the node.\n * \\return fully-qualified name of the node.\n */\nRCLCPP_PUBLIC\nconst char *\nget_fully_qualified_name() const;\n\n/// Get the logger of the node.\n/** \\return The logger of the node. */\nRCLCPP_PUBLIC\nrclcpp::Logger\nget_logger() const;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/362-jie-dian-xiang-guan-api/#3","title":"3.\u8bdd\u9898\u901a\u4fe1","text":"<pre><code>/// Create and return a Publisher.\n/**\n * The rclcpp::QoS has several convenient constructors, including a\n * conversion constructor for size_t, which mimics older API's that\n * allows just a string and size_t to create a publisher.\n *\n * For example, all of these cases will work:\n *\n * ```cpp\n * pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", 10);  // implicitly KeepLast\n * pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", QoS(10));  // implicitly KeepLast\n * pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", QoS(KeepLast(10)));\n * pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", QoS(KeepAll()));\n * pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", QoS(1).best_effort().durability_volatile());\n * {\n *   rclcpp::QoS custom_qos(KeepLast(10), rmw_qos_profile_sensor_data);\n *   pub = node-&gt;create_publisher&lt;MsgT&gt;(\"chatter\", custom_qos);\n * }\n * ```\n *\n * The publisher options may optionally be passed as the third argument for\n * any of the above cases.\n *\n * \\param[in] topic_name The topic for this publisher to publish on.\n * \\param[in] qos The Quality of Service settings for the publisher.\n * \\param[in] options Additional options for the created Publisher.\n * \\return Shared pointer to the created publisher.\n */\ntemplate&lt;\n  typename MessageT,\n  typename AllocatorT = std::allocator&lt;void&gt;,\n  typename PublisherT = rclcpp::Publisher&lt;MessageT, AllocatorT&gt;&gt;\nstd::shared_ptr&lt;PublisherT&gt;\ncreate_publisher(\n  const std::string &amp; topic_name,\n  const rclcpp::QoS &amp; qos,\n  const PublisherOptionsWithAllocator&lt;AllocatorT&gt; &amp; options =\n  PublisherOptionsWithAllocator&lt;AllocatorT&gt;()\n);\n\n/// Create and return a Subscription.\n/**\n * \\param[in] topic_name The topic to subscribe on.\n * \\param[in] qos QoS profile for Subcription.\n * \\param[in] callback The user-defined callback function to receive a message\n * \\param[in] options Additional options for the creation of the Subscription.\n * \\param[in] msg_mem_strat The message memory strategy to use for allocating messages.\n * \\return Shared pointer to the created subscription.\n */\ntemplate&lt;\n  typename MessageT,\n  typename CallbackT,\n  typename AllocatorT = std::allocator&lt;void&gt;,\n  typename SubscriptionT = rclcpp::Subscription&lt;MessageT, AllocatorT&gt;,\n  typename MessageMemoryStrategyT = typename SubscriptionT::MessageMemoryStrategyType\n&gt;\nstd::shared_ptr&lt;SubscriptionT&gt;\ncreate_subscription(\n  const std::string &amp; topic_name,\n  const rclcpp::QoS &amp; qos,\n  CallbackT &amp;&amp; callback,\n  const SubscriptionOptionsWithAllocator&lt;AllocatorT&gt; &amp; options =\n  SubscriptionOptionsWithAllocator&lt;AllocatorT&gt;(),\n  typename MessageMemoryStrategyT::SharedPtr msg_mem_strat = (\n    MessageMemoryStrategyT::create_default()\n  )\n);\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/362-jie-dian-xiang-guan-api/#4","title":"4.\u670d\u52a1\u901a\u4fe1","text":"<pre><code>/// Create and return a Client.\n/**\n * \\param[in] service_name The topic to service on.\n * \\param[in] qos_profile rmw_qos_profile_t Quality of service profile for client.\n * \\param[in] group Callback group to call the service.\n * \\return Shared pointer to the created client.\n */\ntemplate&lt;typename ServiceT&gt;\ntypename rclcpp::Client&lt;ServiceT&gt;::SharedPtr\ncreate_client(\n  const std::string &amp; service_name,\n  const rmw_qos_profile_t &amp; qos_profile = rmw_qos_profile_services_default,\n  rclcpp::CallbackGroup::SharedPtr group = nullptr);\n\n/// Create and return a Service.\n/**\n * \\param[in] service_name The topic to service on.\n * \\param[in] callback User-defined callback function.\n * \\param[in] qos_profile rmw_qos_profile_t Quality of service profile for client.\n * \\param[in] group Callback group to call the service.\n * \\return Shared pointer to the created service.\n */\ntemplate&lt;typename ServiceT, typename CallbackT&gt;\ntypename rclcpp::Service&lt;ServiceT&gt;::SharedPtr\ncreate_service(\n  const std::string &amp; service_name,\n  CallbackT &amp;&amp; callback,\n  const rmw_qos_profile_t &amp; qos_profile = rmw_qos_profile_services_default,\n  rclcpp::CallbackGroup::SharedPtr group = nullptr);\n</code></pre> <p>\u5b9a\u65f6\u5668</p> <pre><code>/// Create a timer.\n/**\n * \\param[in] period Time interval between triggers of the callback.\n * \\param[in] callback User-defined callback function.\n * \\param[in] group Callback group to execute this timer's callback in.\n */\ntemplate&lt;typename DurationRepT = int64_t, typename DurationT = std::milli, typename CallbackT&gt;\ntypename rclcpp::WallTimer&lt;CallbackT&gt;::SharedPtr\ncreate_wall_timer(\n  std::chrono::duration&lt;DurationRepT, DurationT&gt; period,\n  CallbackT callback,\n  rclcpp::CallbackGroup::SharedPtr group = nullptr);\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/362-time/","title":"362 time","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/362-time/#362-time","title":"3.6.2 Time","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/362-time/#1rclcpp-time","title":"1.rclcpp \u4e2d\u7684 Time","text":"<p>\u793a\u4f8b\uff1a\u521b\u5efa Time \u5bf9\u8c61\uff0c\u5e76\u8c03\u7528\u5176\u51fd\u6570\u3002</p> <pre><code>#include \"rclcpp/rclcpp.hpp\"\n\nint main(int argc, char const *argv[])\n{\n    rclcpp::init(argc,argv);\n    auto node = rclcpp::Node::make_shared(\"time_demo\");\n\n    // \u521b\u5efa Time \u5bf9\u8c61\n    rclcpp::Time t1(10500000000L);\n    rclcpp::Time t2(2,1000000000L);\n    // \u901a\u8fc7\u8282\u70b9\u83b7\u53d6\u5f53\u524d\u65f6\u523b\u3002\n    // rclcpp::Time roght_now = node-&gt;get_clock()-&gt;now();\n    rclcpp::Time roght_now = node-&gt;now();\n    RCLCPP_INFO(node-&gt;get_logger(),\"s = %.2f, ns = %ld\",t1.seconds(),t1.nanoseconds());\n    RCLCPP_INFO(node-&gt;get_logger(),\"s = %.2f, ns = %ld\",t2.seconds(),t2.nanoseconds());\n    RCLCPP_INFO(node-&gt;get_logger(),\"s = %.2f, ns = %ld\",roght_now.seconds(),roght_now.nanoseconds());\n\n    rclcpp::shutdown();\n\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/362-time/#2rclpy-time","title":"2.rclpy \u4e2d\u7684 Time","text":"<p>\u793a\u4f8b\uff1a\u521b\u5efa Time \u5bf9\u8c61\uff0c\u5e76\u8c03\u7528\u5176\u51fd\u6570\u3002</p> <pre><code>import rclpy\nfrom rclpy.time import Time\ndef main():\n    rclpy.init()\n    node = rclpy.create_node(\"time_demo\")\n    # \u521b\u5efa Time \u5bf9\u8c61\n    right_now = node.get_clock().now()\n    t1 = Time(seconds=10,nanoseconds=500000000)\n\n    node.get_logger().info(\"s = %.2f, ns = %d\" % (right_now.seconds_nanoseconds()[0], right_now.seconds_nanoseconds()[1]))\n    node.get_logger().info(\"s = %.2f, ns = %d\" % (t1.seconds_nanoseconds()[0], t1.seconds_nanoseconds()[1]))\n    node.get_logger().info(\"ns = %d\" % right_now.nanoseconds)\n    node.get_logger().info(\"ns = %d\" % t1.nanoseconds)\n    rclpy.shutdown()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/363-duration/","title":"363 duration","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/363-duration/#363-duration","title":"3.6.3 Duration","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/363-duration/#1rclcpp-duration","title":"1.rclcpp \u4e2d\u7684 Duration","text":"<p>\u793a\u4f8b\uff1a\u521b\u5efa Duration \u5bf9\u8c61\uff0c\u5e76\u8c03\u7528\u5176\u51fd\u6570\u3002</p> <pre><code>#include \"rclcpp/rclcpp.hpp\"\n\nusing namespace std::chrono_literals;\n\nint main(int argc, char const *argv[])\n{\n    rclcpp::init(argc,argv);\n    auto node = rclcpp::Node::make_shared(\"duration_node\");\n\n    // \u521b\u5efa Duration \u5bf9\u8c61\n    rclcpp::Duration du1(1s);\n    rclcpp::Duration du2(2,500000000);\n\n    RCLCPP_INFO(node-&gt;get_logger(),\"s = %.2f, ns = %ld\", du2.seconds(),du2.nanoseconds());\n\n    rclcpp::shutdown();\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/363-duration/#2rclpy-duration","title":"2.rclpy \u4e2d\u7684 Duration","text":"<p>\u793a\u4f8b\uff1a\u521b\u5efa Duration \u5bf9\u8c61\uff0c\u5e76\u8c03\u7528\u5176\u51fd\u6570\u3002</p> <pre><code>import rclpy\nfrom rclpy.duration import Duration\n\ndef main():\n    rclpy.init()    \n\n    node = rclpy.create_node(\"duration_demo\")\n    du1 = Duration(seconds = 2,nanoseconds = 500000000)\n    node.get_logger().info(\"ns = %d\" % du1.nanoseconds)\n\n    rclpy.shutdown()\n\nif __name__ == \"__main__\":\n\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/364-time-yu-duration-yun-suan/","title":"364 time yu duration yun suan","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/364-time-yu-duration-yun-suan/#364-time-duration","title":"3.6.4 Time \u4e0e Duration \u8fd0\u7b97","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/364-time-yu-duration-yun-suan/#1rclcpp","title":"1.rclcpp \u4e2d\u7684\u8fd0\u7b97","text":"<p>\u793a\u4f8b\uff1aTime \u4ee5\u53ca Duration \u7684\u76f8\u5173\u8fd0\u7b97\u3002</p> <pre><code>#include \"rclcpp/rclcpp.hpp\"\n\nint main(int argc, char const *argv[])\n{\n    rclcpp::init(argc,argv);\n    auto node = rclcpp::Node::make_shared(\"time_opt_demo\");\n\n    rclcpp::Time t1(1,500000000);\n    rclcpp::Time t2(10,0);\n\n    rclcpp::Duration du1(3,0);\n    rclcpp::Duration du2(5,0);\n\n    // \u6bd4\u8f83\n    RCLCPP_INFO(node-&gt;get_logger(),\"t1 &gt;= t2 ? %d\",t1 &gt;= t2);\n    RCLCPP_INFO(node-&gt;get_logger(),\"t1 &lt; t2 ? %d\",t1 &lt; t2);\n    // \u6570\u5b66\u8fd0\u7b97\n    rclcpp::Time t3 = t2 + du1;\n    rclcpp::Time t4 = t1 - du1;\n    rclcpp::Duration du3 = t2 - t1;\n\n    RCLCPP_INFO(node-&gt;get_logger(), \"t3 = %.2f\",t3.seconds());  \n    RCLCPP_INFO(node-&gt;get_logger(), \"t4 = %.2f\",t4.seconds()); \n    RCLCPP_INFO(node-&gt;get_logger(), \"du3 = %.2f\",du3.seconds()); \n\n    RCLCPP_INFO(node-&gt;get_logger(),\"--------------------------------------\");\n    // \u6bd4\u8f83\n    RCLCPP_INFO(node-&gt;get_logger(),\"du1 &gt;= du2 ? %d\", du1 &gt;= du2);\n    RCLCPP_INFO(node-&gt;get_logger(),\"du1 &lt; du2 ? %d\", du1 &lt; du2);\n    // \u6570\u5b66\u8fd0\u7b97\n    rclcpp::Duration du4 = du1 * 3.0;\n    rclcpp::Duration du5 = du1 + du2;\n    rclcpp::Duration du6 = du1 - du2;\n\n    RCLCPP_INFO(node-&gt;get_logger(), \"du4 = %.2f\",du4.seconds()); \n    RCLCPP_INFO(node-&gt;get_logger(), \"du5 = %.2f\",du5.seconds()); \n    RCLCPP_INFO(node-&gt;get_logger(), \"du6 = %.2f\",du6.seconds()); \n\n    rclcpp::shutdown();\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/36-chang-yong-api/364-time-yu-duration-yun-suan/#2rclpy","title":"2.rclpy \u4e2d\u7684\u8fd0\u7b97","text":"<p>\u793a\u4f8b\uff1aTime \u4ee5\u53ca Duration \u7684\u76f8\u5173\u8fd0\u7b97\u3002</p> <pre><code>import rclpy\nfrom rclpy.time import Time\nfrom rclpy.duration import Duration\n\ndef main():\n    rclpy.init()\n    node = rclpy.create_node(\"time_opt_node\")\n    t1 = Time(seconds=10)\n    t2 = Time(seconds=4)\n\n    du1 = Duration(seconds=3)\n    du2 = Duration(seconds=5)\n\n    # \u6bd4\u8f83\n    node.get_logger().info(\"t1 &gt;= t2 ? %d\" % (t1 &gt;= t2))\n    node.get_logger().info(\"t1 &lt; t2 ? %d\" % (t1 &lt; t2))\n    # \u6570\u5b66\u8fd0\u7b97\n    t3 = t1 + du1\n    t4 = t1 - t2    \n    t5 = t1 - du1\n\n    node.get_logger().info(\"t3 = %d\" % t3.nanoseconds)\n    node.get_logger().info(\"t4 = %d\" % t4.nanoseconds)\n    node.get_logger().info(\"t5 = %d\" % t5.nanoseconds)\n\n    # \u6bd4\u8f83\n    node.get_logger().info(\"-\" * 80)\n    node.get_logger().info(\"du1 &gt;= du2 ? %d\" % (du1 &gt;= du2))\n    node.get_logger().info(\"du1 &lt; du2 ? %d\" % (du1 &lt; du2))\n\n    rclpy.shutdown()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/371-ming-ling-gong-ju/","title":"371 ming ling gong ju","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/371-ming-ling-gong-ju/#371","title":"3.7.1 \u547d\u4ee4\u5de5\u5177","text":"<p>ROS2\u4e2d\u5e38\u7528\u7684\u547d\u4ee4\u5982\u4e0b\uff1a</p> <ul> <li>ros2 node\uff1a\u8282\u70b9\u76f8\u5173\u547d\u4ee4\u884c\u5de5\u5177</li> <li>ros2 interface\uff1a\u63a5\u53e3\\(msg\u3001srv\u3001action\\)\u6d88\u606f\u76f8\u5173\u7684\u547d\u4ee4\u884c\u5de5\u5177</li> <li>ros2 topic\uff1a\u8bdd\u9898\u901a\u4fe1\u76f8\u5173\u7684\u547d\u4ee4\u884c\u5de5\u5177</li> <li>ros2 service\uff1a\u670d\u52a1\u901a\u4fe1\u76f8\u5173\u7684\u547d\u4ee4\u884c\u5de5\u5177</li> <li>ros2 action\uff1a\u52a8\u4f5c\u901a\u4fe1\u76f8\u5173\u7684\u547d\u4ee4\u884c\u5de5\u5177</li> <li>ros2 param\uff1a\u53c2\u6570\u670d\u52a1\u76f8\u5173\u7684\u547d\u4ee4\u884c\u5de5\u5177</li> </ul> <p>\u5173\u4e8e\u547d\u4ee4\u7684\u4f7f\u7528\u4e00\u822c\u90fd\u4f1a\u63d0\u4f9b\u5e2e\u52a9\u6587\u6863\uff0c\u5e2e\u52a9\u6587\u6863\u7684\u83b7\u53d6\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u53ef\u4ee5\u901a\u8fc7<code>\u547d\u4ee4 -h</code> \u6216 <code>\u547d\u4ee4 --help</code>\u7684\u65b9\u5f0f\u67e5\u770b\u547d\u4ee4\u5e2e\u52a9\u6587\u6863\uff0c\u6bd4\u5982\uff1a<code>ros2 node -h</code>\u6216 <code>ros2 node --help</code>\u3002</p> </li> <li> <p>\u547d\u4ee4\u4e0b\u53c2\u6570\u7684\u4f7f\u7528\u4e5f\u53ef\u4ee5\u901a\u8fc7<code>\u547d\u4ee4 \u53c2\u6570 -h</code> \u6216 <code>\u547d\u4ee4 \u53c2\u6570 --help</code>\u7684\u65b9\u5f0f\u67e5\u770b\u5e2e\u52a9\u6587\u6863\uff0c\u6bd4\u5982\uff1a<code>ros2 node list -h</code>\u6216 <code>ros2 node list --help</code>\u3002</p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/371-ming-ling-gong-ju/#1ros2-node","title":"1.ros2 node","text":"<p>ros2 node\u7684\u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>info  \u8f93\u51fa\u8282\u70b9\u4fe1\u606f\nlist  \u8f93\u51fa\u8fd0\u884c\u4e2d\u7684\u8282\u70b9\u7684\u5217\u8868\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/371-ming-ling-gong-ju/#2ros2-interace","title":"2.ros2 interace","text":"<p>ros2 interace\u7684\u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>list      \u8f93\u51fa\u6240\u6709\u53ef\u7528\u7684\u63a5\u53e3\u6d88\u606f\npackage   \u8f93\u51fa\u6307\u5b9a\u529f\u80fd\u5305\u4e0b\u7684\npackages  \u8f93\u51fa\u5305\u542b\u63a5\u53e3\u6d88\u606f\u7684\u529f\u80fd\u5305\nproto     \u8f93\u51fa\u63a5\u53e3\u6d88\u606f\u539f\u578b\nshow      \u8f93\u51fa\u63a5\u53e3\u6d88\u606f\u5b9a\u4e49\u683c\u5f0f\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/371-ming-ling-gong-ju/#3ros2-topic","title":"3.ros2 topic","text":"<p>ros2 topic\u7684\u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>bw       \u8f93\u51fa\u8bdd\u9898\u6d88\u606f\u4f20\u8f93\u5360\u7528\u7684\u5e26\u5bbd\ndelay    \u8f93\u51fa\u5e26\u6709 header \u7684\u8bdd\u9898\u5ef6\u8fdf\necho     \u8f93\u51fa\u67d0\u4e2a\u8bdd\u9898\u4e0b\u7684\u6d88\u606f\nfind     \u6839\u636e\u7c7b\u578b\u67e5\u627e\u8bdd\u9898\nhz       \u8f93\u51fa\u6d88\u606f\u53d1\u5e03\u9891\u7387\ninfo     \u8f93\u51fa\u8bdd\u9898\u76f8\u5173\u4fe1\u606f\nlist     \u8f93\u51fa\u8fd0\u884c\u4e2d\u7684\u8bdd\u9898\u5217\u8868\npub      \u5411\u6307\u5b9a\u8bdd\u9898\u53d1\u5e03\u6d88\u606f\ntype     \u8f93\u51fa\u8bdd\u9898\u4f7f\u7528\u7684\u63a5\u53e3\u7c7b\u578b\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/371-ming-ling-gong-ju/#4ros2-service","title":"4.ros2 service","text":"<p>ros2 service\u7684\u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>call  \u5411\u67d0\u4e2a\u670d\u52a1\u53d1\u9001\u8bf7\u6c42\nfind  \u6839\u636e\u7c7b\u578b\u67e5\u627e\u670d\u52a1\nlist  \u8f93\u51fa\u8fd0\u884c\u4e2d\u7684\u670d\u52a1\u5217\u8868\ntype  \u8f93\u51fa\u670d\u52a1\u4f7f\u7528\u7684\u63a5\u53e3\u7c7b\u578b\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/371-ming-ling-gong-ju/#5ros2-action","title":"5.ros2 action","text":"<p>ros2 action\u7684\u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>info       \u8f93\u51fa\u6307\u5b9a\u52a8\u4f5c\u7684\u76f8\u5173\u4fe1\u606f\nlist       \u8f93\u51fa\u8fd0\u884c\u4e2d\u7684\u52a8\u4f5c\u7684\u5217\u8868\nsend_goal  \u5411\u6307\u5b9a\u52a8\u4f5c\u53d1\u9001\u8bf7\u6c42\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/371-ming-ling-gong-ju/#6ros2-param","title":"6.ros2 param","text":"<p>ros2 param\u7684\u57fa\u672c\u4f7f\u7528\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>delete    \u5220\u9664\u53c2\u6570\ndescribe  \u8f93\u51fa\u53c2\u6570\u7684\u63cf\u8ff0\u4fe1\u606f\ndump      \u5c06\u8282\u70b9\u53c2\u6570\u5199\u5165\u5230\u78c1\u76d8\u6587\u4ef6\nget       \u83b7\u53d6\u67d0\u4e2a\u53c2\u6570\nlist      \u8f93\u51fa\u53ef\u7528\u7684\u53c2\u6570\u7684\u5217\u8868\nload      \u4ece\u78c1\u76d8\u6587\u4ef6\u52a0\u8f7d\u53c2\u6570\u5230\u8282\u70b9\nset       \u8bbe\u7f6e\u53c2\u6570\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/372-rqtgong-ju-xiang/","title":"372 rqtgong ju xiang","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/372-rqtgong-ju-xiang/#372-rqt","title":"3.7.2 rqt\u5de5\u5177\u7bb1","text":"<p>\u672c\u8282\u4e3b\u8981\u4ecb\u7ecdROS2\u4e2drqt\u5de5\u5177\u7bb1\u7684\u4f7f\u7528\uff0c\u6bd4\u5982\uff1arqt\u7684\u5b89\u88c5\u3001\u542f\u52a8\u4e0e\u63d2\u4ef6\u4f7f\u7528\u7b49\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/372-rqtgong-ju-xiang/#1\u5b89\u88c5","title":"1.\u5b89\u88c5","text":"<ul> <li> <p>\u4e00\u822c\u53ea\u8981\u5b89\u88c5\u7684\u662fdesktop\u7248\u672c\u5c31\u4f1a\u9ed8\u8ba4\u5b89\u88c5rqt\u5de5\u5177\u7bb1\uff1b</p> </li> <li> <p>\u5982\u679c\u9700\u8981\u5b89\u88c5\u53ef\u4ee5\u4ee5\u5982\u4e0b\u65b9\u5f0f\u5b89\u88c5</p> </li> </ul> <pre><code>$ sudo apt install ros-humble-rqt*\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/372-rqtgong-ju-xiang/#2\u542f\u52a8","title":"2.\u542f\u52a8","text":"<p>\u5e38\u7528\u7684<code>rqt</code>\u542f\u52a8\u547d\u4ee4\u6709\uff1a</p> <ul> <li> <p>\u65b9\u5f0f1\uff1a<code>rqt</code></p> </li> <li> <p>\u65b9\u5f0f2\uff1a<code>ros2 run rqt_gui rqt_gui</code></p> </li> </ul>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/37-tong-xin-ji-zhi-ming-ling/372-rqtgong-ju-xiang/#3\u57fa\u672c\u4f7f\u7528","title":"3.\u63d2\u4ef6\u4f7f\u7528","text":"<p>\u542f\u52a8rqt\u4e4b\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7plugins\u6dfb\u52a0\u6240\u9700\u7684\u63d2\u4ef6\uff1a</p> <p></p> <p>\u5728plugins\u4e2d\u5305\u542b\u4e86\u8bdd\u9898\u3001\u670d\u52a1\u3001\u52a8\u4f5c\u3001\u53c2\u6570\u3001\u65e5\u5fd7\u7b49\u7b49\u76f8\u5173\u7684\u63d2\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u9700\u9009\u7528\uff0c\u65b9\u4fbf\u7684\u5b9e\u73b0ROS2\u7a0b\u5e8f\u8c03\u8bd5\u3002\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\u3002</p> <p>1.topic \u63d2\u4ef6</p> <p>\u6dfb\u52a0topic\u63d2\u4ef6\u5e76\u53d1\u9001\u901f\u5ea6\u6307\u4ee4\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8\u3002</p> <p></p> <p>2.service\u63d2\u4ef6</p> <p>\u6dfb\u52a0 service \u63d2\u4ef6\u5e76\u53d1\u9001\u8bf7\u6c42\uff0c\u5728\u5236\u5b9a\u4f4d\u7f6e\u751f\u6210\u4e00\u53ea\u4e4c\u9f9f\u3002</p> <p></p> <p>3.\u53c2\u6570\u63d2\u4ef6</p> <p>\u901a\u8fc7\u53c2\u6570\u63d2\u4ef6\u52a8\u6001\u4fee\u6539\u4e4c\u9f9f\u7a97\u4f53\u80cc\u666f\u989c\u8272\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/381-hua-ti-tong-xin-lian-xi/","title":"381 hua ti tong xin lian xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/381-hua-ti-tong-xin-lian-xi/#381","title":"3.8.1 \u8bdd\u9898\u901a\u4fe1\u6848\u4f8b\u5206\u6790","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/381-hua-ti-tong-xin-lian-xi/#1","title":"1.\u6848\u4f8b\u9700\u6c42","text":"<p>\u9700\u6c42\uff1a\u542f\u52a8\u4e24\u4e2aturtlesim_node\u8282\u70b9\uff0c\u8282\u70b92\u4e2d\u7684\u4e4c\u9f9f\u81ea\u52a8\u8c03\u5934180\u00b0\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u952e\u76d8\u63a7\u5236\u8282\u70b91\u4e2d\u7684\u4e4c\u9f9f\u8fd0\u52a8\uff0c\u4f46\u662f\u4e0d\u80fd\u63a7\u5236\u8282\u70b92\u7684\u4e4c\u9f9f\uff0c\u9700\u8981\u81ea\u5b9e\u73b0\u529f\u80fd\uff1a\u53ef\u4ee5\u6839\u636e\u4e4c\u9f9f1\u7684\u901f\u5ea6\u751f\u6210\u5e76\u53d1\u5e03\u63a7\u5236\u4e4c\u9f9f2\u8fd0\u52a8\u7684\u901f\u5ea6\u6307\u4ee4\uff0c\u6700\u7ec8\u4e24\u53ea\u4e4c\u9f9f\u505a\u955c\u50cf\u8fd0\u52a8\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/381-hua-ti-tong-xin-lian-xi/#2","title":"2.\u6848\u4f8b\u5206\u6790","text":"<p>\u5728\u4e0a\u8ff0\u6848\u4f8b\u4e2d\uff0c\u4e3b\u8981\u9700\u8981\u5173\u6ce8\u7684\u95ee\u9898\u6709\u4e09\u4e2a\uff1a</p> <ol> <li>\u5982\u4f55\u521b\u5efa\u4e24\u4e2aturtlesim_node\u8282\u70b9\uff0c\u4e14\u9700\u8981\u5177\u6709\u4e0d\u540c\u7684\u8282\u70b9\u540d\u79f0\u3001\u8bdd\u9898\u540d\u79f0\u3002</li> <li>\u5982\u4f55\u63a7\u5236\u4e4c\u9f9f\u6389\u5934\uff1f</li> <li>\u6838\u5fc3\u5b9e\u73b0\u662f\u5982\u4f55\u8ba2\u9605\u4e4c\u9f9f1\u7684\u901f\u5ea6\u5e76\u751f\u6210\u53d1\u5e03\u63a7\u5236\u4e4c\u9f9f2\u8fd0\u52a8\u7684\u901f\u5ea6\u6307\u4ee4\u7684\uff1f</li> </ol> <p>\u601d\u8def\uff1a</p> <ol> <li>\u95ee\u98981\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e3aturtlesim_node\u8bbe\u7f6enamespace\u89e3\u51b3\uff1b</li> <li>\u95ee\u98982\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528turtlesim_node\u5185\u7f6e\u7684action\u529f\u80fd\u6765\u5b9e\u73b0\u4e4c\u9f9f\u822a\u5411\u7684\u8bbe\u7f6e\uff1b</li> <li>\u95ee\u98983\u662f\u6574\u4e2a\u6848\u4f8b\u7684\u6838\u5fc3\uff0c\u9700\u8981\u7f16\u7801\u5b9e\u73b0\uff0c\u9700\u8981\u8ba2\u9605\u4e4c\u9f9f1\u7684\u4f4d\u59ff\u76f8\u5173\u8bdd\u9898\u6765\u83b7\u53d6\u4e4c\u9f9f1\u7684\u901f\u5ea6\uff0c\u5e76\u4e14\u6309\u7167\u201c\u955c\u50cf\u8fd0\u52a8\u201d\u7684\u9700\u6c42\u751f\u6210\u4e4c\u9f9f2\u7684\u901f\u5ea6\u6307\u4ee4\uff0c\u5e76\u4e14\u8be5\u8282\u70b9\u9700\u8981\u5728\u6389\u5934\u5b8c\u6bd5\u540e\u542f\u52a8\u3002</li> <li>\u6700\u540e\uff0c\u6574\u4e2a\u6848\u4f8b\u6d89\u53ca\u5230\u591a\u4e2a\u8282\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7launch\u6587\u4ef6\u96c6\u6210\u8fd9\u4e9b\u8282\u70b9\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/381-hua-ti-tong-xin-lian-xi/#3","title":"3.\u6d41\u7a0b\u7b80\u4ecb","text":"<p>\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u5199\u901f\u5ea6\u8ba2\u9605\u4e0e\u53d1\u5e03\u5b9e\u73b0\uff1b</li> <li>\u7f16\u5199launch\u6587\u4ef6\u96c6\u6210\u591a\u4e2a\u8282\u70b9\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/382-fu-wu-tong-xin-lian-xi/","title":"382 fu wu tong xin lian xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/382-fu-wu-tong-xin-lian-xi/#382","title":"3.8.2 \u8bdd\u9898\u901a\u4fe1\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/382-fu-wu-tong-xin-lian-xi/#1","title":"1.\u901f\u5ea6\u8ba2\u9605\u4e0e\u53d1\u5e03","text":"<p>\u529f\u80fd\u5305cpp07_exercise\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6exe01_pub_sub.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*\n   \u9700\u6c42\uff1a\u8ba2\u9605\u7a97\u53e31\u4e2d\u7684\u4e4c\u9f9f\u901f\u5ea6\uff0c\u7136\u540e\u751f\u6210\u63a7\u5236\u7a97\u53e32\u4e4c\u9f9f\u8fd0\u52a8\u7684\u6307\u4ee4\u5e76\u53d1\u5e03\u3002\n   \u6b65\u9aa4\uff1a\n       1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n       2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n       3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n          3-1.\u521b\u5efa\u63a7\u5236\u7b2c\u4e8c\u4e2a\u7a97\u4f53\u4e4c\u9f9f\u8fd0\u52a8\u7684\u53d1\u5e03\u65b9\uff1b\n          3-2.\u521b\u5efa\u8ba2\u9605\u7b2c\u4e00\u4e2a\u7a97\u4f53\u4e4c\u9f9fpose\u7684\u8ba2\u9605\u65b9\uff1b\n          3-3.\u6839\u636e\u8ba2\u9605\u7684\u4e4c\u9f9f\u7684\u901f\u5ea6\u751f\u6210\u63a7\u5236\u7a97\u53e32\u4e4c\u9f9f\u8fd0\u52a8\u7684\u901f\u5ea6\u6d88\u606f\u5e76\u53d1\u5e03\u3002\n       4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n       5.\u91ca\u653e\u8d44\u6e90\u3002\n*/\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include &lt;rclcpp/rclcpp.hpp&gt;\n#include &lt;turtlesim/msg/pose.hpp&gt;\n#include &lt;geometry_msgs/msg/twist.hpp&gt;\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass ExePubSub : public rclcpp::Node\n{\npublic:\n  ExePubSub() : rclcpp::Node(\"demo01_pub_sub\")\n  {\n    // 3-1.\u521b\u5efa\u63a7\u5236\u7b2c\u4e8c\u4e2a\u7a97\u4f53\u4e4c\u9f9f\u8fd0\u52a8\u7684\u53d1\u5e03\u65b9\uff1b\n    twist_pub_ = this-&gt;create_publisher&lt;geometry_msgs::msg::Twist&gt;(\"/t2/turtle1/cmd_vel\", 1);\n    // 3-2.\u521b\u5efa\u8ba2\u9605\u7b2c\u4e00\u4e2a\u7a97\u4f53\u4e4c\u9f9fpose\u7684\u8ba2\u9605\u65b9\uff1b\n    pose_sub_ = this-&gt;create_subscription&lt;turtlesim::msg::Pose&gt;(\n      \"/turtle1/pose\", 1, std::bind(&amp;ExePubSub::poseCallback, this, std::placeholders::_1));\n  }\n\nprivate:\n  // 3-3.\u6839\u636e\u8ba2\u9605\u7684\u4e4c\u9f9f\u7684\u901f\u5ea6\u751f\u6210\u63a7\u5236\u7a97\u53e32\u4e4c\u9f9f\u8fd0\u52a8\u7684\u901f\u5ea6\u6d88\u606f\u5e76\u53d1\u5e03\u3002\n  void poseCallback(const turtlesim::msg::Pose::ConstSharedPtr pose)\n  {\n    geometry_msgs::msg::Twist twist;\n    twist.angular.z = -(pose-&gt;angular_velocity); //\u89d2\u901f\u5ea6\u53d6\u53cd\n    twist.linear.x = pose-&gt;linear_velocity; //\u7ebf\u901f\u5ea6\u4e0d\u53d8\n    twist_pub_-&gt;publish(twist);\n  }\n\n  rclcpp::Publisher&lt;geometry_msgs::msg::Twist&gt;::SharedPtr twist_pub_;\n  rclcpp::Subscription&lt;turtlesim::msg::Pose&gt;::SharedPtr pose_sub_;\n};\n\nint main(int argc, char** argv)\n{\n  // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n  rclcpp::init(argc, argv);\n  // 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n  rclcpp::spin(std::make_shared&lt;ExePubSub&gt;());\n  // 5.\u91ca\u653e\u8d44\u6e90\u3002\n  rclcpp::shutdown();\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/382-fu-wu-tong-xin-lian-xi/#2launch","title":"2.launch\u6587\u4ef6","text":"<p>\u529f\u80fd\u5305cpp07_exercise\u7684launch\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efalaunch\u6587\u4ef6exe01_pub_sub.launch.py\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom launch.actions import ExecuteProcess,RegisterEventHandler\nfrom launch.event_handlers import OnProcessExit\n\ndef generate_launch_description():\n    # 1.\u521b\u5efa\u4e24\u4e2a turtlesim_node \u8282\u70b9\n    t1 = Node(package=\"turtlesim\",executable=\"turtlesim_node\")\n    t2 = Node(package=\"turtlesim\",executable=\"turtlesim_node\",namespace=\"t2\")\n    # 2.\u8ba9\u7b2c\u4e8c\u53ea\u4e4c\u9f9f\u6389\u5934\n    rotate = ExecuteProcess(\n        cmd=[\"ros2 action send_goal /t2/turtle1/rotate_absolute turtlesim/action/RotateAbsolute \\\"{'theta': 3.14}\\\"\"],\n        output=\"both\",\n        shell=True\n    )\n    # 3.\u81ea\u5b9e\u73b0\u7684\u8ba2\u9605\u53d1\u5e03\u5b9e\u73b0\n    pub_sub = Node(package=\"cpp07_exercise\",executable=\"exe01_pub_sub\")\n    # 4.\u4e4c\u9f9f\u6389\u5934\u5b8c\u6bd5\u540e\uff0c\u5f00\u59cb\u6267\u884c\u6b65\u9aa43\n    rotate_exit_event = RegisterEventHandler(\n        event_handler=OnProcessExit(\n            target_action=rotate,\n            on_exit=pub_sub\n        )\n    )\n    return LaunchDescription([t1,t2,rotate,rotate_exit_event])\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/382-fu-wu-tong-xin-lian-xi/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/382-fu-wu-tong-xin-lian-xi/#1packagexml","title":"1.package.xml","text":"<p>\u5728\u521b\u5efa\u529f\u80fd\u5305\u65f6\uff0c\u6240\u4f9d\u8d56\u7684\u529f\u80fd\u5305\u5df2\u7ecf\u81ea\u52a8\u914d\u7f6e\u4e86\uff0c\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;depend&gt;rclcpp&lt;/depend&gt;\n&lt;depend&gt;turtlesim&lt;/depend&gt;\n&lt;depend&gt;base_interfaces_demo&lt;/depend&gt;\n&lt;depend&gt;geometry_msgs&lt;/depend&gt;\n&lt;depend&gt;rclcpp_action&lt;/depend&gt;\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/382-fu-wu-tong-xin-lian-xi/#2cmakeliststxt","title":"2.CMakeLists.txt","text":"<p>CMakeLists.txt \u4e2d\u53d1\u5e03\u548c\u8ba2\u9605\u7a0b\u5e8f\u6838\u5fc3\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code># find dependencies\nfind_package(ament_cmake REQUIRED)\nfind_package(rclcpp REQUIRED)\nfind_package(turtlesim REQUIRED)\nfind_package(base_interfaces_demo REQUIRED)\nfind_package(geometry_msgs REQUIRED)\nfind_package(rclcpp_action REQUIRED)\n\nadd_executable(exe01_pub_sub src/exe01_pub_sub.cpp)\nament_target_dependencies(\n  exe01_pub_sub\n  \"rclcpp\"\n  \"turtlesim\"\n  \"geometry_msgs\"\n)\ninstall(TARGETS \n  exe01_pub_sub\n  DESTINATION lib/${PROJECT_NAME})\n\ninstall(DIRECTORY launch DESTINATION share/${PROJECT_NAME})\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/382-fu-wu-tong-xin-lian-xi/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select cpp07_exercise\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/382-fu-wu-tong-xin-lian-xi/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u7ec8\u7aef\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 launch cpp07_exercise exe01_pub_sub.launch.py\n</code></pre> <p>\u6307\u4ee4\u6267\u884c\u540e\uff0c\u5c06\u751f\u6210\u4e24\u4e2aturtlesim_node\u8282\u70b9\u5bf9\u5e94\u7684\u7a97\u53e3\uff0c\u5e76\u4e14\u5176\u4e2d\u4e00\u4e2a\u7a97\u53e3\u7684\u4e4c\u9f9f\u5f00\u59cb\u8c03\u5934\u3002</p> <p>\u518d\u542f\u52a8\u4e00\u4e2a\u7ec8\u7aef\uff0c\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>ros2 run turtlesim turtle_teleop_key\n</code></pre> <p>\u5f85\u4e4c\u9f9f\u8c03\u5934\u5b8c\u6bd5\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u952e\u76d8\u63a7\u5236\u4e4c\u9f9f\u8fd0\u52a8\u4e86\uff0c\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6f14\u793a\u6848\u4f8b\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/383-dong-zuo-tong-xin-lian-xi/","title":"383 dong zuo tong xin lian xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/383-dong-zuo-tong-xin-lian-xi/#383","title":"3.8.3 \u670d\u52a1\u901a\u4fe1\u6848\u4f8b\u5206\u6790","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/383-dong-zuo-tong-xin-lian-xi/#1","title":"1.\u6848\u4f8b\u9700\u6c42","text":"<p>\u9700\u6c42\uff1a\u5728turtlesim_node\u8282\u70b9\u7684\u7a97\u4f53\u4e2d\u5728\u6307\u5b9a\u4f4d\u7f6e\u751f\u6210\u4e00\u53ea\u65b0\u4e4c\u9f9f\u5e76\u53ef\u4ee5\u8f93\u51fa\u4e24\u53ea\u4e4c\u9f9f\u4e4b\u95f4\u7684\u76f4\u7ebf\u8ddd\u79bb\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/383-dong-zuo-tong-xin-lian-xi/#2","title":"2.\u6848\u4f8b\u5206\u6790","text":"<p>\u5728\u4e0a\u8ff0\u6848\u4f8b\u4e2d\uff0c\u9700\u8981\u5173\u6ce8\u7684\u95ee\u9898\u6709\u4e24\u4e2a\uff1a</p> <ol> <li>\u5982\u4f55\u5728\u6307\u5b9a\u4f4d\u7f6e\u751f\u6210\u4e00\u53ea\u65b0\u4e4c\u9f9f\uff1f</li> <li>\u8ba1\u7b97\u4e24\u53ea\u4e4c\u9f9f\u7684\u8ddd\u79bb\u5e94\u8be5\u4f7f\u7528\u4f55\u79cd\u901a\u4fe1\u6a21\u5f0f\u53c8\u5982\u4f55\u5b9e\u73b0\uff1f</li> </ol> <p>\u601d\u8def\uff1a</p> <ol> <li>\u95ee\u98981\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528turtlesim_node\u5185\u7f6e\u7684\u540d\u79f0\u4e3a/spawn\u7684\u670d\u52a1\u529f\u80fd\u6765\u5b9e\u73b0\u65b0\u4e4c\u9f9f\u7684\u521b\u5efa\uff1b</li> <li>\u95ee\u98982\u53ef\u4ee5\u901a\u8fc7\u670d\u52a1\u901a\u4fe1\u6765\u5b9e\u73b0\uff0c\u5ba2\u6237\u7aef\u53d1\u9001\u65b0\u751f\u6210\u7684\u4e4c\u9f9f\u7684\u4f4d\u59ff\u5230\u670d\u52a1\u7aef\uff0c\u670d\u52a1\u7aef\u6839\u636e\u8be5\u5750\u6807\u4ee5\u53ca\u539f\u751f\u4e4c\u9f9f\u7684\u5750\u6807\u8ba1\u7b97\u8ddd\u79bb\u5e76\u54cd\u5e94\u3002\u5f53\u7136\u5982\u679c\u4f7f\u7528\u670d\u52a1\u901a\u4fe1\uff0c\u8fd8\u9700\u8981\u81ea\u5b9a\u4e49\u670d\u52a1\u63a5\u53e3\u3002</li> <li>\u6700\u540e\uff0c\u6574\u4e2a\u6848\u4f8b\u6d89\u53ca\u5230\u591a\u4e2a\u8282\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7launch\u6587\u4ef6\u96c6\u6210\u8fd9\u4e9b\u8282\u70b9\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/383-dong-zuo-tong-xin-lian-xi/#3","title":"3.\u6d41\u7a0b\u7b80\u4ecb","text":"<p>\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u5199\u670d\u52a1\u63a5\u53e3\u6587\u4ef6\uff1b</li> <li>\u7f16\u5199\u670d\u52a1\u7aef\u5b9e\u73b0\uff1b</li> <li>\u7f16\u5199\u5ba2\u6237\u7aef\u5b9e\u73b0\uff1b</li> <li>\u7f16\u5199launch\u6587\u4ef6\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/384-can-shu-fu-wu-lian-xi/","title":"384 can shu fu wu lian xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/384-can-shu-fu-wu-lian-xi/#384","title":"3.8.4 \u670d\u52a1\u901a\u4fe1\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/384-can-shu-fu-wu-lian-xi/#1","title":"1.\u670d\u52a1\u63a5\u53e3\u6587\u4ef6","text":"<p>\u529f\u80fd\u5305base_interfaces_demo\u7684srv\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efasrv\u6587\u4ef6Distance.srv\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>float32 x\nfloat32 y\nfloat32 theta\n---\nfloat32 distance\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/384-can-shu-fu-wu-lian-xi/#2","title":"2.\u670d\u52a1\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp07_exercise\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6exe02_server.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*\n   \u9700\u6c42\uff1a\u5904\u7406\u8bf7\u6c42\u53d1\u9001\u7684\u76ee\u6807\u70b9\uff0c\u8ba1\u7b97\u4e4c\u9f9f\u4e0e\u76ee\u6807\u70b9\u4e4b\u95f4\u7684\u76f4\u7ebf\u8ddd\u79bb\u3002\n   \u6b65\u9aa4\uff1a\n       1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n       2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n       3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u4e4c\u9f9f\u59ff\u6001\u8ba2\u9605\u65b9\uff0c\u56de\u8c03\u51fd\u6570\u4e2d\u83b7\u53d6x\u5750\u6807\u4e0ey\u5750\u6807\uff1b\n            3-2.\u521b\u5efa\u670d\u52a1\u7aef\uff1b\n            3-3.\u89e3\u6790\u76ee\u6807\u503c\uff0c\u8ba1\u7b97\u8ddd\u79bb\u5e76\u53cd\u9988\u7ed3\u679c\u3002\n       4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n       5.\u91ca\u653e\u8d44\u6e90\u3002\n*/\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n#include \"base_interfaces_demo/srv/distance.hpp\"\n#include \"turtlesim/msg/pose.hpp\"\n#include \"turtlesim/srv/spawn.hpp\"\n\nusing namespace std::chrono_literals;\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass ExeDistanceServer: public rclcpp::Node {\npublic:\n    ExeDistanceServer():Node(\"exe_distance_server\"),turtle1_x(0.0),turtle1_y(0.0){\n        // 3-1.\u521b\u5efa\u4e4c\u9f9f\u59ff\u6001\u8ba2\u9605\u65b9\uff0c\u56de\u8c03\u51fd\u6570\u4e2d\u83b7\u53d6x\u5750\u6807\u4e0ey\u5750\u6807\uff1b\n        pose_sub = this-&gt;create_subscription&lt;turtlesim::msg::Pose&gt;(\"/turtle1/pose\",10,std::bind(&amp;ExeDistanceServer::poseCallBack, this, std::placeholders::_1));\n        // 3-2.\u521b\u5efa\u670d\u52a1\u7aef\uff1b\n        distance_server = this-&gt;create_service&lt;base_interfaces_demo::srv::Distance&gt;(\"distance\",std::bind(&amp;ExeDistanceServer::distanceCallBack, this, std::placeholders::_1, std::placeholders::_2));\n    }\nprivate:\n\n    void poseCallBack(const turtlesim::msg::Pose::SharedPtr pose){\n        turtle1_x = pose-&gt;x;\n        turtle1_y = pose-&gt;y;\n    }\n    // 3-3.\u89e3\u6790\u76ee\u6807\u503c\uff0c\u8ba1\u7b97\u8ddd\u79bb\u5e76\u53cd\u9988\u7ed3\u679c\u3002\n    void distanceCallBack(const base_interfaces_demo::srv::Distance_Request::SharedPtr request,\n                    base_interfaces_demo::srv::Distance_Response::SharedPtr response\n    ){\n        // \u89e3\u6790\u76ee\u6807\u503c\n        float goal_x = request-&gt;x;\n        float goal_y = request-&gt;y;\n\n        // \u8ddd\u79bb\u8ba1\u7b97\n        float x = goal_x - turtle1_x;\n        float y = goal_y - turtle1_y;\n        // \u5c06\u7ed3\u679c\u8bbe\u7f6e\u5230\u54cd\u5e94\n        response-&gt;distance = std::sqrt(x * x + y * y);\n        RCLCPP_INFO(this-&gt;get_logger(),\"\u76ee\u6807\u5750\u6807:(%.2f,%.2f),\u8ddd\u79bb:%.2f\",goal_x,goal_y,response-&gt;distance);\n\n    }\n    rclcpp::Subscription&lt;turtlesim::msg::Pose&gt;::SharedPtr pose_sub;\n    rclcpp::Service&lt;base_interfaces_demo::srv::Distance&gt;::SharedPtr distance_server;\n    float turtle1_x;\n    float turtle1_y;\n\n\n};\n\nint main(int argc, char const *argv[])\n{\n    // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclcpp::init(argc,argv);\n    // 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n    rclcpp::spin(std::make_shared&lt;ExeDistanceServer&gt;());\n    // 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclcpp::shutdown();\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/384-can-shu-fu-wu-lian-xi/#3","title":"3.\u5ba2\u6237\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp07_exercise\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6exe03_client.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*\n   \u9700\u6c42\uff1a\u53d1\u5e03\u76ee\u6807\u70b9\u7684\u5750\u6807\uff0c\u63a5\u6536\u5e76\u5904\u7406\u670d\u52a1\u7aef\u53cd\u9988\u7684\u7ed3\u679c\u3002\n   \u6b65\u9aa4\uff1a\n       1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n       2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n       3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u5ba2\u6237\u7aef\uff1b\n            3-2.\u8fde\u63a5\u670d\u52a1\uff1b\n            3-3.\u53d1\u9001\u8bf7\u6c42\u3002\n       4.\u8c03\u7528\u5bf9\u8c61\u670d\u52a1\u8fde\u63a5\u3001\u53d1\u9001\u8bf7\u6c42\u3001\u5904\u7406\u54cd\u5e94\u76f8\u5173\u51fd\u6570\uff1b\n       5.\u91ca\u653e\u8d44\u6e90\u3002\n*/\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n#include \"base_interfaces_demo/srv/distance.hpp\"\n#include \"turtlesim/srv/spawn.hpp\"\n\nusing namespace std::chrono_literals;\n\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass ExeDistanceClient: public rclcpp::Node {\npublic:\n    ExeDistanceClient():Node(\"exe_distance_client\"){\n        // 3-1.\u521b\u5efa\u5ba2\u6237\u7aef\uff1b\n        distance_client = this-&gt;create_client&lt;base_interfaces_demo::srv::Distance&gt;(\"distance\");\n    }   \n    // 3-2.\u8fde\u63a5\u670d\u52a1\uff1b\n    bool connect_server(){\n      while (!distance_client-&gt;wait_for_service(1s))\n      {\n        if (!rclcpp::ok())\n        {\n          RCLCPP_INFO(this-&gt;get_logger(),\"\u5ba2\u6237\u7aef\u9000\u51fa\uff01\");\n          return false;\n        }\n\n        RCLCPP_INFO(this-&gt;get_logger(),\"\u670d\u52a1\u8fde\u63a5\u4e2d\uff0c\u8bf7\u7a0d\u5019...\");\n      }\n      return true;\n    }\n    // 3-3.\u53d1\u9001\u8bf7\u6c42\u3002\n    rclcpp::Client&lt;base_interfaces_demo::srv::Distance&gt;::FutureAndRequestId send_distance(float x,float y,float theta){\n        auto distance_request = std::make_shared&lt;base_interfaces_demo::srv::Distance::Request&gt;();\n        distance_request-&gt;x = x;\n        distance_request-&gt;y = y;\n        distance_request-&gt;theta = theta;\n        return distance_client-&gt;async_send_request(distance_request);\n    }\nprivate:\n    rclcpp::Client&lt;base_interfaces_demo::srv::Distance&gt;::SharedPtr distance_client;\n};\nint main(int argc, char const *argv[])\n{\n    // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclcpp::init(argc,argv);\n    // 4.\u8c03\u7528\u5bf9\u8c61\u670d\u52a1\u8fde\u63a5\u3001\u53d1\u9001\u8bf7\u6c42\u3001\u5904\u7406\u54cd\u5e94\u76f8\u5173\u51fd\u6570\uff1b\n    auto client = std::make_shared&lt;ExeDistanceClient&gt;();\n    // \u5904\u7406\u4f20\u5165\u7684\u53c2\u6570\n    if (argc != 5)\n    {\n        RCLCPP_INFO(client-&gt;get_logger(),\"\u8bf7\u4f20\u5165\u76ee\u6807\u7684\u4f4d\u59ff\u53c2\u6570:(x,y,theta)\");\n        return 1;\n    }\n\n    float x = atof(argv[1]);\n    float y = atof(argv[2]);\n    float theta = atof(argv[3]);\n    // \u670d\u52a1\u8fde\u63a5\n    bool flag = client-&gt;connect_server();\n    if (!flag)\n    {\n        RCLCPP_INFO(client-&gt;get_logger(),\"\u670d\u52a1\u8fde\u63a5\u5931\u8d25!\");\n        return 1;\n    }\n    // \u53d1\u9001\u8bf7\u6c42\n    auto distance_future = client-&gt;send_distance(x, y, theta);\n    // \u5904\u7406\u54cd\u5e94\n    if(rclcpp::spin_until_future_complete(client,distance_future) == rclcpp::FutureReturnCode::SUCCESS){\n        RCLCPP_INFO(client-&gt;get_logger(),\"\u4e24\u53ea\u4e4c\u9f9f\u76f8\u8ddd%.2f\u7c73\u3002\",distance_future.get()-&gt;distance);\n    } else {\n        RCLCPP_INFO(client-&gt;get_logger(),\"\u83b7\u53d6\u8ddd\u79bb\u670d\u52a1\u5931\u8d25!\");\n    }\n    // 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclcpp::shutdown();\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/384-can-shu-fu-wu-lian-xi/#4launch","title":"4.launch\u6587\u4ef6","text":"<p>\u8be5\u6848\u4f8b\u9700\u8981\u5206\u522b\u4e3a\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u521b\u5efalaunch\u6587\u4ef6\u3002</p> <p>\u529f\u80fd\u5305cpp07_exercise\u7684launch\u76ee\u5f55\u4e0b\uff0c\u9996\u5148\u65b0\u5efa\u670d\u52a1\u7aeflaunch\u6587\u4ef6exe02_server.launch.py\uff0c\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    # \u521b\u5efaturtlesim_node\u8282\u70b9\n    turtle = Node(package=\"turtlesim\",executable=\"turtlesim_node\")\n    # \u521b\u5efa\u6d4b\u8ddd\u670d\u52a1\u7aef\u8282\u70b9\n    server = Node(package=\"cpp07_exercise\",executable=\"exe02_server\")\n\n    return LaunchDescription([turtle,server])\n</code></pre> <p>\u7136\u540e\u65b0\u5efa\u5ba2\u6237\u7aeflaunch\u6587\u4ef6exe03_client.launch.py\uff0c\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom launch.actions import ExecuteProcess\n\ndef generate_launch_description():\n    # \u8bbe\u7f6e\u76ee\u6807\u70b9\u7684\u5750\u6807\uff0c\u4ee5\u53ca\u76ee\u6807\u70b9\u4e4c\u9f9f\u7684\u540d\u79f0\n    x = 8.54\n    y = 9.54\n    theta = 0.0\n    name = \"t2\"\n    # \u751f\u6210\u65b0\u7684\u4e4c\u9f9f\n    spawn = ExecuteProcess(\n        cmd=[\"ros2 service call /spawn turtlesim/srv/Spawn \\\"{'x': \"\n                + str(x) + \",'y': \" + str(y) + \",'theta': \" + str(theta) + \",'name': '\" + name + \"'}\\\"\"],\n        # output=\"both\",\n        shell=True\n    )\n    # \u521b\u5efa\u5ba2\u6237\u7aef\u8282\u70b9\n    client = Node(package=\"cpp07_exercise\",\n                executable=\"exe03_client\",\n                arguments=[str(x),str(y),str(theta)])\n    return LaunchDescription([spawn,client])\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/384-can-shu-fu-wu-lian-xi/#5","title":"5.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<p>\u6b64\u5904\u9700\u8981\u7f16\u8f91base_interfaces_demo\u548ccpp07_exercise\u4e24\u4e2a\u529f\u80fd\u5305\u4e0b\u7684\u914d\u7f6e\u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/384-can-shu-fu-wu-lian-xi/#1base_interfaces_democmakeliststxt","title":"1.base_interfaces_demo\u4e0b\u7684CMakeLists.txt","text":"<p>\u9274\u4e8e\u529f\u80fd\u5305base_interfaces_demo\u7684\u57fa\u7840\u914d\u7f6e\u4ee5\u53ca\u8bbe\u7f6e\u8fc7\u4e86\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u4fee\u6539CMakeLists.txt\u4e2d\u7684rosidl_generate_interfaces \u51fd\u6570\u5373\u53ef\uff0c\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>rosidl_generate_interfaces(${PROJECT_NAME}\n  \"msg/Student.msg\"\n  \"srv/AddInts.srv\"\n  \"srv/Distance.srv\"\n  \"action/Progress.action\"\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/384-can-shu-fu-wu-lian-xi/#2cpp07_exercisecmakeliststxt","title":"2.cpp07_exercise\u4e0b\u7684CMakeLists.txt","text":"<p>CMakeLists.txt \u6587\u4ef6\u9700\u8981\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>add_executable(exe02_server src/exe02_server.cpp)\nament_target_dependencies(\n  exe02_server\n  \"rclcpp\"\n  \"turtlesim\"\n  \"base_interfaces_demo\"\n  \"geometry_msgs\"\n)\nadd_executable(exe03_client src/exe03_client.cpp)\nament_target_dependencies(\n  exe03_client\n  \"rclcpp\"\n  \"turtlesim\"\n  \"base_interfaces_demo\"\n  \"geometry_msgs\"\n)\n</code></pre> <p>\u6587\u4ef6\u4e2d install \u4fee\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>install(TARGETS \n  exe01_pub_sub\n  exe02_server\n  exe03_client\n  DESTINATION lib/${PROJECT_NAME})\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/384-can-shu-fu-wu-lian-xi/#6","title":"6.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select base_interfaces_demo cpp07_exercise\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/384-can-shu-fu-wu-lian-xi/#7","title":"7.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 launch cpp07_exercise exe02_server.launch.py\n</code></pre> <p>\u6307\u4ee4\u6267\u884c\u540e\uff0c\u5c06\u751f\u6210turtlesim_node\u8282\u70b9\u5bf9\u5e94\u7684\u7a97\u53e3\uff0c\u5e76\u4e14\u4f1a\u542f\u52a8\u81ea\u5b9a\u4e49\u7684\u6d4b\u8ddd\u670d\u52a1\u7aef\u3002</p> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 launch cpp07_exercise exe03_client.launch.py\n</code></pre> <p>\u6307\u4ee4\u6267\u884c\u540e\uff0c\u4f1a\u751f\u6210\u4e00\u53ea\u65b0\u7684\u4e4c\u9f9f\uff0c\u5e76\u4e14\u8f93\u51fa\u4e24\u53ea\u4e4c\u9f9f\u7684\u76f4\u7ebf\u8ddd\u79bb\uff0c\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6f14\u793a\u6848\u4f8b\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/385-dong-zuo-tong-xin-an-li-fen-xi/","title":"385 dong zuo tong xin an li fen xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/385-dong-zuo-tong-xin-an-li-fen-xi/#385","title":"3.8.5 \u52a8\u4f5c\u901a\u4fe1\u6848\u4f8b\u5206\u6790","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/385-dong-zuo-tong-xin-an-li-fen-xi/#1","title":"1.\u6848\u4f8b\u9700\u6c42","text":"<p>\u9700\u6c42\uff1a\u5904\u7406\u8bf7\u6c42\u53d1\u9001\u7684\u76ee\u6807\u70b9\uff0c\u63a7\u5236\u4e4c\u9f9f\u5411\u8be5\u76ee\u6807\u70b9\u8fd0\u52a8\uff0c\u5e76\u8fde\u7eed\u53cd\u9988\u4e4c\u9f9f\u4e0e\u76ee\u6807\u70b9\u4e4b\u95f4\u7684\u5269\u4f59\u8ddd\u79bb\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/385-dong-zuo-tong-xin-an-li-fen-xi/#2","title":"2.\u6848\u4f8b\u5206\u6790","text":"<p>\u5728\u4e0a\u8ff0\u6848\u4f8b\u4e0e\u670d\u52a1\u901a\u4fe1\u6848\u4f8b\u7c7b\u4f3c\uff0c\u9700\u8981\u5173\u6ce8\u7684\u95ee\u9898\u6709\u4e24\u4e2a\uff1a</p> <ol> <li>\u5982\u4f55\u5728\u6307\u5b9a\u4f4d\u7f6e\u751f\u6210\u4e00\u53ea\u65b0\u4e4c\u9f9f\uff1f</li> <li>\u63a7\u5236\u539f\u751f\u4e4c\u9f9f\u5411\u76ee\u6807\u4e4c\u9f9f\u8fd0\u52a8\u5e76\u8fde\u7eed\u53cd\u9988\u5269\u4f59\u8ddd\u79bb\u5e94\u8be5\u4f7f\u7528\u4f55\u79cd\u901a\u4fe1\u6a21\u5f0f\u53c8\u5982\u4f55\u5b9e\u73b0\uff1f</li> </ol> <p>\u601d\u8def\uff1a</p> <ol> <li>\u95ee\u98981\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528turtlesim_node\u5185\u7f6e\u7684\u540d\u79f0\u4e3a/spawn\u7684\u670d\u52a1\u529f\u80fd\u6765\u5b9e\u73b0\u65b0\u4e4c\u9f9f\u7684\u521b\u5efa\uff1b</li> <li>\u95ee\u98982\u53ef\u4ee5\u901a\u8fc7\u52a8\u4f5c\u901a\u4fe1\u6765\u5b9e\u73b0\uff0c\u52a8\u4f5c\u5ba2\u6237\u7aef\u53d1\u9001\u65b0\u751f\u6210\u7684\u4e4c\u9f9f\u7684\u4f4d\u59ff\u5230\u52a8\u4f5c\u670d\u52a1\u7aef\uff0c\u670d\u52a1\u7aef\u6839\u636e\u8be5\u5750\u6807\u4ee5\u53ca\u539f\u751f\u4e4c\u9f9f\u7684\u5750\u6807\u8ba1\u8ba1\u7b97\u51fa\u4e8c\u8005\u8ddd\u79bb\uff0c\u8ba1\u7b97\u901f\u5ea6\u5e76\u63a7\u5236\u539f\u751f\u4e4c\u9f9f\u8fd0\u52a8\u3002\u5f53\u7136\u5982\u679c\u4f7f\u7528\u52a8\u4f5c\u901a\u4fe1\uff0c\u8fd8\u9700\u8981\u81ea\u5b9a\u4e49\u52a8\u4f5c\u63a5\u53e3\u3002</li> <li>\u6700\u540e\uff0c\u6574\u4e2a\u6848\u4f8b\u6d89\u53ca\u5230\u591a\u4e2a\u8282\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7launch\u6587\u4ef6\u96c6\u6210\u8fd9\u4e9b\u8282\u70b9\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/385-dong-zuo-tong-xin-an-li-fen-xi/#3","title":"3.\u6d41\u7a0b\u7b80\u4ecb","text":"<p>\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u5199\u52a8\u4f5c\u63a5\u53e3\u6587\u4ef6\uff1b</li> <li>\u7f16\u5199\u52a8\u4f5c\u670d\u52a1\u7aef\u5b9e\u73b0\uff1b</li> <li>\u7f16\u5199\u52a8\u4f5c\u5ba2\u6237\u7aef\u5b9e\u73b0\uff1b</li> <li>\u7f16\u5199launch\u6587\u4ef6\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/386-dong-zuo-tong-xin-shi-xian/","title":"386 dong zuo tong xin shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/386-dong-zuo-tong-xin-shi-xian/#386","title":"3.8.6 \u52a8\u4f5c\u901a\u4fe1\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/386-dong-zuo-tong-xin-shi-xian/#1","title":"1.\u52a8\u4f5c\u63a5\u53e3\u6587\u4ef6","text":"<p>\u529f\u80fd\u5305base_interfaces_demo\u7684action\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaaction\u6587\u4ef6Nav.action\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>float32 goal_x\nfloat32 goal_y\nfloat32 goal_theta\n---\nfloat32 turtle_x\nfloat32 turtle_y\nfloat32 turtle_theta\n---\nfloat32 distance\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/386-dong-zuo-tong-xin-shi-xian/#2","title":"2.\u52a8\u4f5c\u670d\u52a1\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp07_exercise\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6exe04_action_server.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*\n   \u9700\u6c42\uff1a\u5904\u7406\u8bf7\u6c42\u53d1\u9001\u7684\u76ee\u6807\u70b9\uff0c\u63a7\u5236\u4e4c\u9f9f\u5411\u8be5\u76ee\u6807\u70b9\u8fd0\u52a8\uff0c\u5e76\u8fde\u7eed\u53cd\u9988\u4e4c\u9f9f\u4e0e\u76ee\u6807\u70b9\u4e4b\u95f4\u7684\u5269\u4f59\u8ddd\u79bb\u3002\n   \u6b65\u9aa4\uff1a\n       1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n       2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n       3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u539f\u751f\u4e4c\u9f9f\u4f4d\u59ff\u8ba2\u9605\u65b9\uff0c\u56de\u8c03\u51fd\u6570\u4e2d\u83b7\u53d6\u4e4c\u9f9f\u4f4d\u59ff\uff1b\n            3-2.\u521b\u5efa\u539f\u751f\u4e4c\u9f9f\u901f\u5ea6\u53d1\u5e03\u65b9\uff1b\n            3-3.\u521b\u5efa\u52a8\u4f5c\u670d\u52a1\u7aef\uff1b\n            3-4.\u89e3\u6790\u52a8\u4f5c\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u8bf7\u6c42\uff1b\n            3-5.\u5904\u7406\u52a8\u4f5c\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u53d6\u6d88\u8bf7\u6c42\uff1b\n            3-6.\u521b\u5efa\u65b0\u7ebf\u7a0b\u5904\u7406\u8bf7\u6c42\uff1b\n            3-7.\u65b0\u7ebf\u7a0b\u4ea7\u751f\u8fde\u7eed\u53cd\u9988\u5e76\u54cd\u5e94\u6700\u7ec8\u7ed3\u679c\u3002\n       4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n       5.\u91ca\u653e\u8d44\u6e90\u3002\n*/\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b \n#include \"rclcpp/rclcpp.hpp\"\n#include \"rclcpp_action/rclcpp_action.hpp\"\n#include \"base_interfaces_demo/action/nav.hpp\"\n#include \"turtlesim/msg/pose.hpp\"\n#include \"geometry_msgs/msg/twist.hpp\"\n\nusing base_interfaces_demo::action::Nav;\nusing namespace std::placeholders;\n\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass ExeNavActionServer: public rclcpp::Node {\npublic:\n    ExeNavActionServer(const rclcpp::NodeOptions &amp; options = rclcpp::NodeOptions()):\n        Node(\"exe_nav_action_server\",options){\n        // 3-1.\u521b\u5efa\u539f\u751f\u4e4c\u9f9f\u4f4d\u59ff\u8ba2\u9605\u65b9\uff0c\u56de\u8c03\u51fd\u6570\u4e2d\u83b7\u53d6\u4e4c\u9f9f\u4f4d\u59ff\uff1b\n        pose_sub = this-&gt;create_subscription&lt;turtlesim::msg::Pose&gt;(\"/turtle1/pose\",10,std::bind(&amp;ExeNavActionServer::poseCallBack, this, std::placeholders::_1));\n        // 3-2.\u521b\u5efa\u539f\u751f\u4e4c\u9f9f\u901f\u5ea6\u53d1\u5e03\u65b9\uff1b\n        cmd_vel_pub = this-&gt;create_publisher&lt;geometry_msgs::msg::Twist&gt;(\"/turtle1/cmd_vel\",10);\n        // 3-3.\u521b\u5efa\u52a8\u4f5c\u670d\u52a1\u7aef\uff1b\n        nav_action_server = rclcpp_action::create_server&lt;Nav&gt;(\n            this,\n            \"nav\",\n            std::bind(&amp;ExeNavActionServer::handle_goal,this,_1,_2),\n            std::bind(&amp;ExeNavActionServer::handle_cancel,this,_1),\n            std::bind(&amp;ExeNavActionServer::handle_accepted,this,_1)\n            );\n\n    }\nprivate:\n    turtlesim::msg::Pose::SharedPtr turtle1_pose = nullptr;\n    rclcpp::Subscription&lt;turtlesim::msg::Pose&gt;::SharedPtr pose_sub;\n    rclcpp_action::Server&lt;Nav&gt;::SharedPtr nav_action_server;\n    rclcpp::Publisher&lt;geometry_msgs::msg::Twist&gt;::SharedPtr cmd_vel_pub;\n    void poseCallBack(const turtlesim::msg::Pose::SharedPtr pose){\n        turtle1_pose = pose;\n    }\n    // 3-4.\u89e3\u6790\u52a8\u4f5c\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u8bf7\u6c42\uff1b\n    rclcpp_action::GoalResponse handle_goal(const rclcpp_action::GoalUUID &amp; goal_uuid, std::shared_ptr&lt;const Nav::Goal&gt; goal){\n        (void)goal_uuid;\n        RCLCPP_INFO(this-&gt;get_logger(),\"\u8bf7\u6c42\u5750\u6807:(%.2f,%.2f),\u822a\u5411:%.2f\", goal-&gt;goal_x,goal-&gt;goal_y,goal-&gt;goal_theta);\n        if (goal-&gt;goal_x &lt; 0 || goal-&gt;goal_x &gt; 11.1 || goal-&gt;goal_y &lt; 0 || goal-&gt;goal_y &gt; 11.1)\n        {\n            return rclcpp_action::GoalResponse::REJECT;\n        }\n\n        return rclcpp_action::GoalResponse::ACCEPT_AND_EXECUTE;\n    }\n    // 3-5.\u5904\u7406\u52a8\u4f5c\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u53d6\u6d88\u8bf7\u6c42\uff1b\n    rclcpp_action::CancelResponse handle_cancel(std::shared_ptr&lt;rclcpp_action::ServerGoalHandle&lt;Nav&gt;&gt; goal_handle){\n        (void)goal_handle;\n        RCLCPP_INFO(this-&gt;get_logger(),\"\u4efb\u52a1\u53d6\u6d88!\");\n        return rclcpp_action::CancelResponse::ACCEPT;\n    }\n    // 3-7.\u65b0\u7ebf\u7a0b\u4ea7\u751f\u8fde\u7eed\u53cd\u9988\u5e76\u54cd\u5e94\u6700\u7ec8\u7ed3\u679c\u3002\n    void execute(std::shared_ptr&lt;rclcpp_action::ServerGoalHandle&lt;Nav&gt;&gt; goal_handle){\n        RCLCPP_INFO(this-&gt;get_logger(),\"\u5f00\u59cb\u6267\u884c\u4efb\u52a1......\");\n        // \u89e3\u6790\u76ee\u6807\u503c\n        float goal_x = goal_handle-&gt;get_goal()-&gt;goal_x;\n        float goal_y = goal_handle-&gt;get_goal()-&gt;goal_y;\n        // \u521b\u5efa\u8fde\u7eed\u53cd\u9988\u5bf9\u8c61\u6307\u9488\uff1b\n        auto feedback = std::make_shared&lt;Nav::Feedback&gt;();\n        // \u521b\u5efa\u6700\u7ec8\u7ed3\u679c\u5bf9\u8c61\u6307\u9488\uff1b\n        auto result = std::make_shared&lt;Nav::Result&gt;();\n\n        rclcpp::Rate rate(1.0);\n        while (true)\n        {\n            // \u4efb\u52a1\u6267\u884c\u4e2d\uff0c\u5173\u4e8e\u5ba2\u6237\u7aef\u53d1\u9001\u53d6\u6d88\u8bf7\u6c42\u7684\u5904\u7406\uff1b\n            if(goal_handle-&gt;is_canceling()){\n                goal_handle-&gt;canceled(result);\n                return;\n            }\n            // \u89e3\u6790\u539f\u751f\u4e4c\u9f9f\u4f4d\u59ff\u6570\u636e\uff1b\n            float turtle1_x = turtle1_pose-&gt;x;\n            float turtle1_y = turtle1_pose-&gt;y;\n            float turtle1_theta = turtle1_pose-&gt;theta;\n            // \u8ba1\u7b97\u539f\u751f\u4e4c\u9f9f\u4e0e\u76ee\u6807\u4e4c\u9f9f\u7684x\u5411\u4ee5\u53cay\u5411\u8ddd\u79bb\uff1b\n            float x_distance = goal_x - turtle1_x;\n            float y_distance = goal_y - turtle1_y;\n\n\n            // \u8ba1\u7b97\u901f\u5ea6\n            geometry_msgs::msg::Twist twist;\n            double scale = 0.5;\n            twist.linear.x = scale * x_distance;\n            twist.linear.y = scale * y_distance;\n            cmd_vel_pub-&gt;publish(twist);\n            // \u8ba1\u7b97\u5269\u4f59\u8ddd\u79bb\n            float distance = sqrt(pow(x_distance,2) + pow(y_distance,2));\n\n            // \u5f53\u4e24\u9f9f\u8ddd\u79bb\u5c0f\u4e8e0.15\u7c73\u65f6\uff0c\u5c06\u5f53\u524d\u4e4c\u9f9f\u4f4d\u59ff\u8bbe\u7f6e\u8fdbresult\u5e76\u9000\u51fa\u5faa\u73af\n            if (distance &lt; 0.15)\n            {   \n                //\u5c06\u5f53\u524d\u4e4c\u9f9f\u5750\u6807\u8d4b\u503c\u7ed9 result\n                result-&gt;turtle_x = turtle1_x;\n                result-&gt;turtle_y = turtle1_y;\n                result-&gt;turtle_theta = turtle1_theta;\n                break;\n            }\n            // \u4e3afeedback\u8bbe\u7f6e\u6570\u636e\u5e76\u53d1\u5e03\n            feedback-&gt;distance = distance;\n            goal_handle-&gt;publish_feedback(feedback);\n\n            rate.sleep();\n        }\n        // \u8bbe\u7f6e\u6700\u7ec8\u54cd\u5e94\u7ed3\u679c\n        if (rclcpp::ok())\n        {\n            goal_handle-&gt;succeed(result);\n            RCLCPP_INFO(this-&gt;get_logger(),\"\u4efb\u52a1\u7ed3\u675f!\");\n        }\n\n\n    }\n    // 3-6.\u521b\u5efa\u65b0\u7ebf\u7a0b\u5904\u7406\u8bf7\u6c42\uff1b\n    void handle_accepted(std::shared_ptr&lt;rclcpp_action::ServerGoalHandle&lt;Nav&gt;&gt; goal_handle){\n        std::thread{std::bind(&amp;ExeNavActionServer::execute,this,_1),goal_handle}.detach();\n    }\n\n\n};\n\nint main(int argc, char const *argv[])\n{\n    // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclcpp::init(argc,argv);\n    // 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n    rclcpp::spin(std::make_shared&lt;ExeNavActionServer&gt;());\n    // 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclcpp::shutdown();\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/386-dong-zuo-tong-xin-shi-xian/#3","title":"3.\u52a8\u4f5c\u5ba2\u6237\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp07_exercise\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6exe05_action_client.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*\n   \u9700\u6c42\uff1a\u5411\u52a8\u4f5c\u670d\u52a1\u7aef\u53d1\u9001\u76ee\u6807\u70b9\u6570\u636e\uff0c\u5e76\u5904\u7406\u670d\u52a1\u7aef\u7684\u54cd\u5e94\u6570\u636e\u3002\n   \u6b65\u9aa4\uff1a\n       1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n       2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n       3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u52a8\u4f5c\u5ba2\u6237\u7aef\uff1b\n            3-2.\u53d1\u9001\u8bf7\u6c42\u6570\u636e\uff0c\u5e76\u5904\u7406\u670d\u52a1\u7aef\u54cd\u5e94\uff1b\n            3-3.\u5904\u7406\u76ee\u6807\u54cd\u5e94\uff1b\n            3-4.\u5904\u7406\u54cd\u5e94\u7684\u8fde\u7eed\u53cd\u9988\uff1b\n            3-5.\u5904\u7406\u6700\u7ec8\u54cd\u5e94\u3002\n       4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n       5.\u91ca\u653e\u8d44\u6e90\u3002\n*/\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n#include \"rclcpp_action/rclcpp_action.hpp\"\n#include \"base_interfaces_demo/action/nav.hpp\"\n#include \"turtlesim/srv/spawn.hpp\"\n\nusing base_interfaces_demo::action::Nav;\nusing namespace std::chrono_literals;\nusing namespace std::placeholders;\n\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass ExeNavActionClient: public rclcpp::Node{\npublic:\n    ExeNavActionClient(const rclcpp::NodeOptions &amp; options = rclcpp::NodeOptions())\n    :Node(\"exe_nav_action_client\",options){\n        // 3-1.\u521b\u5efa\u52a8\u4f5c\u5ba2\u6237\u7aef\uff1b\n        nav_client = rclcpp_action::create_client&lt;Nav&gt;(this,\"nav\");\n    }\n    // 3-2.\u53d1\u9001\u8bf7\u6c42\u6570\u636e\uff0c\u5e76\u5904\u7406\u670d\u52a1\u7aef\u54cd\u5e94\uff1b\n    void send_goal(float x, float y, float theta){\n        // \u8fde\u63a5\u52a8\u4f5c\u670d\u52a1\u7aef\uff0c\u5982\u679c\u8d85\u65f6\uff085s\uff09\uff0c\u90a3\u4e48\u76f4\u63a5\u9000\u51fa\u3002\n        if (!nav_client-&gt;wait_for_action_server(5s))\n        {\n            RCLCPP_ERROR(this-&gt;get_logger(),\"\u670d\u52a1\u8fde\u63a5\u5931\u8d25!\");\n            return;\n        }\n        // \u7ec4\u7ec7\u8bf7\u6c42\u6570\u636e\n        auto goal_msg = Nav::Goal();\n        goal_msg.goal_x = x;\n        goal_msg.goal_y = y;\n        goal_msg.goal_theta = theta;\n        //const rclcpp_action::Client&lt;base_interfaces_demo::action::Nav&gt;::SendGoalOptions &amp;options\n        rclcpp_action::Client&lt;Nav&gt;::SendGoalOptions options;\n        options.goal_response_callback = std::bind(&amp;ExeNavActionClient::goal_response_callback, this, _1);\n        options.feedback_callback = std::bind(&amp;ExeNavActionClient::feedback_callback, this, _1, _2);\n        options.result_callback = std::bind(&amp;ExeNavActionClient::result_callback, this, _1);\n        // \u53d1\u9001\n        nav_client-&gt;async_send_goal(goal_msg,options);\n\n    }\nprivate:\n    rclcpp_action::Client&lt;Nav&gt;::SharedPtr nav_client;\n    // 3-3.\u5904\u7406\u76ee\u6807\u54cd\u5e94\uff1b\n    void goal_response_callback(rclcpp_action::ClientGoalHandle&lt;Nav&gt;::SharedPtr goal_handle){\n        if(!goal_handle){\n            RCLCPP_ERROR(this-&gt;get_logger(),\"\u76ee\u6807\u8bf7\u6c42\u88ab\u670d\u52a1\u5668\u62d2\u7edd\");\n        } else {\n            RCLCPP_INFO(this-&gt;get_logger(),\"\u76ee\u6807\u8bf7\u6c42\u88ab\u63a5\u6536!\");\n        }\n    }\n    // 3-4.\u5904\u7406\u54cd\u5e94\u7684\u8fde\u7eed\u53cd\u9988\uff1b\n    void feedback_callback(rclcpp_action::ClientGoalHandle&lt;Nav&gt;::SharedPtr goal_handle, \n        const std::shared_ptr&lt;const Nav::Feedback&gt; feedback){\n        (void)goal_handle;\n        RCLCPP_INFO(this-&gt;get_logger(),\"\u8ddd\u79bb\u76ee\u6807\u70b9\u8fd8\u6709 %.2f \u7c73\u3002\",feedback-&gt;distance);\n    }\n    // 3-5.\u5904\u7406\u6700\u7ec8\u54cd\u5e94\u3002\n    void result_callback(const rclcpp_action::ClientGoalHandle&lt;Nav&gt;::WrappedResult &amp; result){\n        switch (result.code){\n        case rclcpp_action::ResultCode::SUCCEEDED :\n            RCLCPP_INFO(this-&gt;get_logger(),\n                \"\u4e4c\u9f9f\u6700\u7ec8\u5750\u6807:(%.2f,%.2f),\u822a\u5411:%.2f\",\n                            result.result-&gt;turtle_x,\n                            result.result-&gt;turtle_y,\n                            result.result-&gt;turtle_theta\n                            );\n            break;\n        case rclcpp_action::ResultCode::CANCELED:\n            RCLCPP_ERROR(this-&gt;get_logger(),\"\u4efb\u52a1\u88ab\u53d6\u6d88\");\n            break;      \n        case rclcpp_action::ResultCode::ABORTED:\n            RCLCPP_ERROR(this-&gt;get_logger(),\"\u4efb\u52a1\u88ab\u4e2d\u6b62\");\n            break;   \n        default:\n            RCLCPP_ERROR(this-&gt;get_logger(),\"\u672a\u77e5\u5f02\u5e38\");\n            break;\n        }\n        // rclcpp::shutdown();\n    }\n};\n\nint main(int argc, char const *argv[])\n{\n    // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclcpp::init(argc,argv);\n    // 4.\u8c03\u7528spin\u51fd\u6570\uff0c\u5e76\u4f20\u5165\u8282\u70b9\u5bf9\u8c61\u6307\u9488\uff1b\n    auto client = std::make_shared&lt;ExeNavActionClient&gt;();\n\n    if (argc != 5)\n    {\n        RCLCPP_INFO(client-&gt;get_logger(),\"\u8bf7\u4f20\u5165\u76ee\u6807\u7684\u4f4d\u59ff\u53c2\u6570:(x,y,theta)\");\n        return 1;\n    }\n    // \u53d1\u9001\u76ee\u6807\u70b9\n    client-&gt;send_goal(atof(argv[1]), atof(argv[2]), atof(argv[3]));\n    rclcpp::spin(client);\n    // 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclcpp::shutdown();\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/386-dong-zuo-tong-xin-shi-xian/#4launch","title":"4.launch\u6587\u4ef6","text":"<p>\u8be5\u6848\u4f8b\u9700\u8981\u5206\u522b\u4e3a\u52a8\u4f5c\u670d\u52a1\u7aef\u548c\u52a8\u4f5c\u5ba2\u6237\u7aef\u521b\u5efalaunch\u6587\u4ef6\u3002</p> <p>\u529f\u80fd\u5305cpp07_exercise\u7684launch\u76ee\u5f55\u4e0b\uff0c\u9996\u5148\u65b0\u5efa\u52a8\u4f5c\u670d\u52a1\u7aeflaunch\u6587\u4ef6exe04_action_server.launch.py\uff0c\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    # \u521b\u5efaturtlesim_node\u8282\u70b9\n    turtle = Node(package=\"turtlesim\",executable=\"turtlesim_node\")\n    # \u521b\u5efa\u52a8\u4f5c\u670d\u52a1\u7aef\u8282\u70b9\n    server = Node(package=\"cpp07_exercise\",executable=\"exe04_action_server\")\n\n    return LaunchDescription([turtle,server])\n</code></pre> <p>\u7136\u540e\u65b0\u5efa\u52a8\u4f5c\u5ba2\u6237\u7aeflaunch\u6587\u4ef6exe05_action_client.launch.py\uff0c\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom launch.actions import ExecuteProcess\n\ndef generate_launch_description():\n    # \u8bbe\u7f6e\u76ee\u6807\u70b9\u7684\u5750\u6807\uff0c\u4ee5\u53ca\u76ee\u6807\u70b9\u4e4c\u9f9f\u7684\u540d\u79f0\n    x = 8.54\n    y = 9.54\n    theta = 0.0\n    name = \"t3\"\n    # \u751f\u6210\u65b0\u7684\u4e4c\u9f9f\n    spawn = ExecuteProcess(\n        cmd=[\"ros2 service call /spawn turtlesim/srv/Spawn \\\"{'x': \"\n                + str(x) + \",'y': \" + str(y) + \",'theta': \" + str(theta) + \",'name': '\" + name + \"'}\\\"\"],\n        # output=\"both\",\n        shell=True\n    )\n    # \u521b\u5efa\u52a8\u4f5c\u5ba2\u6237\u7aef\u8282\u70b9\n    client = Node(package=\"cpp07_exercise\",\n                executable=\"exe05_action_client\",\n                arguments=[str(x),str(y),str(theta)])\n    return LaunchDescription([spawn,client])\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/386-dong-zuo-tong-xin-shi-xian/#5","title":"5.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<p>\u6b64\u5904\u9700\u8981\u7f16\u8f91base_interfaces_demo\u548ccpp07_exercise\u4e24\u4e2a\u529f\u80fd\u5305\u4e0b\u7684\u914d\u7f6e\u6587\u4ef6\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/386-dong-zuo-tong-xin-shi-xian/#1base_interfaces_democmakeliststxt","title":"1.base_interfaces_demo\u4e0b\u7684CMakeLists.txt","text":"<p>\u548c\u524d\u9762\u670d\u52a1\u901a\u4fe1\u4e00\u6837\uff0c\u53ea\u9700\u8981\u4fee\u6539CMakeLists.txt\u4e2d\u7684rosidl_generate_interfaces \u51fd\u6570\u5373\u53ef\uff0c\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>rosidl_generate_interfaces(${PROJECT_NAME}\n  \"msg/Student.msg\"\n  \"srv/AddInts.srv\"\n  \"srv/Distance.srv\"\n  \"action/Progress.action\"\n  \"action/Nav.action\"\n)\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/386-dong-zuo-tong-xin-shi-xian/#2cpp07_exercisecmakeliststxt","title":"2.cpp07_exercise\u4e0b\u7684CMakeLists.txt","text":"<p>CMakeLists.txt \u6587\u4ef6\u9700\u8981\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>add_executable(exe04_action_server src/exe04_action_server.cpp)\nament_target_dependencies(\n  exe04_action_server\n  \"rclcpp\"\n  \"turtlesim\"\n  \"base_interfaces_demo\"\n  \"geometry_msgs\"\n  \"rclcpp_action\"\n)\n\nadd_executable(exe05_action_client src/exe05_action_client.cpp)\nament_target_dependencies(\n  exe05_action_client\n  \"rclcpp\"\n  \"turtlesim\"\n  \"base_interfaces_demo\"\n  \"geometry_msgs\"\n  \"rclcpp_action\"\n)\n</code></pre> <p>\u6587\u4ef6\u4e2d install \u4fee\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>install(TARGETS \n  exe01_pub_sub\n  exe02_server\n  exe03_client\n  exe04_action_server\n  exe05_action_client  \n  DESTINATION lib/${PROJECT_NAME})\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/386-dong-zuo-tong-xin-shi-xian/#6","title":"6.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select base_interfaces_demo cpp07_exercise\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/386-dong-zuo-tong-xin-shi-xian/#7","title":"7.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u4e24\u4e2a\u7ec8\u7aef\u3002</p> <p>\u7ec8\u7aef1\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 launch cpp07_exercise exe04_action_server.launch.py\n</code></pre> <p>\u6307\u4ee4\u6267\u884c\u540e\uff0c\u5c06\u751f\u6210turtlesim_node\u8282\u70b9\u5bf9\u5e94\u7684\u7a97\u53e3\uff0c\u5e76\u4e14\u4f1a\u542f\u52a8\u4e4c\u9f9f\u5bfc\u822a\u7684\u52a8\u4f5c\u670d\u52a1\u7aef\u3002</p> <p>\u7ec8\u7aef2\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 launch cpp07_exercise exe05_action_client.launch.py\n</code></pre> <p>\u6307\u4ee4\u6267\u884c\u540e\uff0c\u4f1a\u751f\u6210\u4e00\u53ea\u65b0\u7684\u4e4c\u9f9f\uff0c\u5e76\u4e14\u539f\u751f\u4e4c\u9f9f\u4f1a\u4ee5\u65b0\u4e4c\u9f9f\u4e3a\u76ee\u6807\u70b9\u5411\u5176\u8fd0\u52a8\uff0c\u8fd0\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u52a8\u4f5c\u5ba2\u6237\u7aef\u4f1a\u63a5\u6536\u670d\u52a1\u7aef\u8fde\u7eed\u53cd\u9988\u7684\u5269\u4f59\u8ddd\u79bb\u6d88\u606f\uff0c\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6f14\u793a\u6848\u4f8b\u7c7b\u4f3c\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/387-can-shu-fu-wu-an-li-fen-xi/","title":"387 can shu fu wu an li fen xi","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/387-can-shu-fu-wu-an-li-fen-xi/#387","title":"3.8.7 \u53c2\u6570\u670d\u52a1\u6848\u4f8b\u5206\u6790","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/387-can-shu-fu-wu-an-li-fen-xi/#1","title":"1.\u6848\u4f8b\u9700\u6c42","text":"<p>\u9700\u6c42\uff1a\u52a8\u6001\u4fee\u6539\u4e4c\u9f9f\u7a97\u53e3\u7684\u80cc\u666f\u989c\u8272\u3002</p> <p></p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/387-can-shu-fu-wu-an-li-fen-xi/#2","title":"2.\u6848\u4f8b\u5206\u6790","text":"<p>\u5728\u4e0a\u8ff0\u6848\u4f8b\u4e2d\uff0c\u53ea\u9700\u8981\u4fee\u6539\u80cc\u666f\u8272\u76f8\u5173\u53c2\u6570\u5373\u53ef\u3002</p>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/387-can-shu-fu-wu-an-li-fen-xi/#3","title":"3.\u6d41\u7a0b\u7b80\u4ecb","text":"<p>\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u5199\u53c2\u6570\u5ba2\u6237\u7aef\u5b9e\u73b0\uff1b</li> <li>\u7f16\u5199launch\u6587\u4ef6\uff1b</li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u7f16\u8bd1\uff1b</li> <li>\u6267\u884c\u3002</li> </ol>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/388-can-shu-fu-wu-shi-xian/","title":"388 can shu fu wu shi xian","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/388-can-shu-fu-wu-shi-xian/#388","title":"3.8.8 \u53c2\u6570\u670d\u52a1\u5b9e\u73b0","text":""},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/388-can-shu-fu-wu-shi-xian/#1","title":"1.\u53c2\u6570\u5ba2\u6237\u7aef\u5b9e\u73b0","text":"<p>\u529f\u80fd\u5305cpp07_exercise\u7684src\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaC++\u6587\u4ef6exe06_param.cpp\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>/*\n   \u9700\u6c42\uff1a\u4fee\u6539turtlesim_node\u7684\u80cc\u666f\u989c\u8272\u3002\n   \u6b65\u9aa4\uff1a\n       1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n       2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n       3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\n            3-1.\u521b\u5efa\u53c2\u6570\u5ba2\u6237\u7aef\uff1b\n            3-2.\u8fde\u63a5\u53c2\u6570\u670d\u52a1\u7aef\uff1b\n            3-3.\u66f4\u65b0\u53c2\u6570\u3002\n       4.\u521b\u5efa\u5bf9\u8c61\u6307\u9488,\u5e76\u8c03\u7528\u5176\u51fd\u6570\uff1b\n       5.\u91ca\u653e\u8d44\u6e90\u3002\n*/\n// 1.\u5305\u542b\u5934\u6587\u4ef6\uff1b\n#include \"rclcpp/rclcpp.hpp\"\n\nusing namespace std::chrono_literals;\n// 3.\u5b9a\u4e49\u8282\u70b9\u7c7b\uff1b\nclass ExeParamClient: public rclcpp::Node{\npublic:\n    ExeParamClient():Node(\"exe_param_client\"),red(0){\n        // 3-1.\u521b\u5efa\u53c2\u6570\u5ba2\u6237\u7aef\uff1b\n        param_client = std::make_shared&lt;rclcpp::SyncParametersClient&gt;(this,\"/turtlesim\");\n    }\n    // 3-2.\u8fde\u63a5\u53c2\u6570\u670d\u52a1\u7aef\uff1b\n    bool connect_server(){\n        while (!param_client-&gt;wait_for_service(1s))\n        {\n            if (!rclcpp::ok())\n            {\n                RCLCPP_INFO(this-&gt;get_logger(),\"\u7ec8\u7aef\u9000\u51fa!\");\n                return false;\n            }\n\n            RCLCPP_INFO(this-&gt;get_logger(),\"\u53c2\u6570\u670d\u52a1\u8fde\u63a5\u4e2d\uff0c\u8bf7\u7a0d\u7b49......\");\n        }\n        return true;\n    }\n    // 3-3.\u66f4\u65b0\u53c2\u6570\u3002\n    void update_param(){\n        red = param_client-&gt;get_parameter&lt;int32_t&gt;(\"background_r\");\n        rclcpp::Rate rate(30.0);\n        int i = red;\n        while (rclcpp::ok())\n        {\n            i &lt; 255 ? red += 5 : red -= 5;\n            i += 5;\n            if(i &gt;= 510) i = 0;\n\n            // RCLCPP_INFO(this-&gt;get_logger(),\"red = %d\", red);\n            param_client-&gt;set_parameters({rclcpp::Parameter(\"background_r\",red)});\n            rate.sleep();\n        }\n\n    }\nprivate:\n    rclcpp::SyncParametersClient::SharedPtr param_client;\n    int32_t red;\n};\n\nint main(int argc, char const *argv[])\n{\n    // 2.\u521d\u59cb\u5316 ROS2 \u5ba2\u6237\u7aef\uff1b\n    rclcpp::init(argc,argv);\n\n    // 4.\u521b\u5efa\u5bf9\u8c61\u6307\u9488,\u5e76\u8c03\u7528\u5176\u51fd\u6570\uff1b\n    auto param_client = std::make_shared&lt;ExeParamClient&gt;();\n    if(!param_client-&gt;connect_server()) return 1;\n    param_client-&gt;update_param();\n\n    // rclcpp::spin(param_client);\n    // 5.\u91ca\u653e\u8d44\u6e90\u3002\n    rclcpp::shutdown();\n    return 0;\n}\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/388-can-shu-fu-wu-shi-xian/#2launch","title":"2.launch\u6587\u4ef6","text":"<p>\u529f\u80fd\u5305cpp07_exercise\u7684launch\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efalaunch\u6587\u4ef6exe06_param.launch.py\uff0c\u5e76\u7f16\u8f91\u6587\u4ef6\uff0c\u8f93\u5165\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    # \u521b\u5efaturtlesim_node\u8282\u70b9\n    turtle = Node(package=\"turtlesim\",executable=\"turtlesim_node\")\n    # \u521b\u5efa\u80cc\u666f\u8272\u4fee\u6539\u8282\u70b9\n    param = Node(package=\"cpp07_exercise\",executable=\"exe06_param\")\n\n    return LaunchDescription([turtle,param])\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/388-can-shu-fu-wu-shi-xian/#3","title":"3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<p>package.xml \u65e0\u9700\u4fee\u6539\uff0cCMakeLists.txt \u6587\u4ef6\u9700\u8981\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>add_executable(exe06_param src/exe06_param.cpp)\nament_target_dependencies(\n  exe06_param\n  \"rclcpp\"\n  \"turtlesim\"\n)\n</code></pre> <p>\u6587\u4ef6\u4e2d install \u4fee\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>install(TARGETS \n  exe01_pub_sub\n  exe02_server\n  exe03_client\n  exe04_action_server\n  exe05_action_client\n  exe06_param\n  DESTINATION lib/${PROJECT_NAME})\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/388-can-shu-fu-wu-shi-xian/#4","title":"4.\u7f16\u8bd1","text":"<p>\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\uff0c\u7f16\u8bd1\u529f\u80fd\u5305\uff1a</p> <pre><code>colcon build --packages-select cpp07_exercise\n</code></pre>"},{"location":"ROS2%E5%AD%A6%E4%B9%A0/ROS2/di-3-zhang-ros2-tong-xin-ji-zhi-bu-chong/38-tong-xin-ji-zhi-lian-xi/388-can-shu-fu-wu-shi-xian/#5","title":"5.\u6267\u884c","text":"<p>\u5f53\u524d\u5de5\u4f5c\u7a7a\u95f4\u4e0b\uff0c\u542f\u52a8\u7ec8\u7aef\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>. install/setup.bash\nros2 launch cpp07_exercise exe06_param.launch.py\n</code></pre> <p>\u6307\u4ee4\u6267\u884c\u540e\uff0c\u5c06\u751f\u6210turtlesim_node\u8282\u70b9\u5bf9\u5e94\u7684\u7a97\u53e3\uff0c\u7a97\u53e3\u80cc\u666f\u8272\u4f1a\u52a8\u6001\u6539\u53d8\uff0c\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e0e\u6f14\u793a\u6848\u4f8b\u7c7b\u4f3c\u3002</p>"},{"location":"blogs/","title":"\u535a\u5ba2","text":"<p>\u5e73\u65f6\u7f16\u7a0b\u9047\u5230\u7684\u95ee\u9898</p>"},{"location":"blogs/DWA%E5%B1%80%E9%83%A8%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/","title":"DWA\u2014\u2014Dynamic Window Approach\u52a8\u6001\u7a97\u53e3\u6cd5","text":""},{"location":"blogs/DWA%E5%B1%80%E9%83%A8%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/#_1","title":"\u53d1\u5c55","text":"<p>\u52a8\u6001\u7a97\u53e3\u6cd5\u662f\u4e00\u79cd\u5c40\u90e8\u8def\u5f84\u89c4\u5212\u7b97\u6cd5\uff0c\u8d77\u6e90\u4e8e\u5bf9\u79fb\u52a8\u673a\u5668\u4eba\u5728\u590d\u6742\u73af\u5883\u4e2d\u5b9e\u65f6\u907f\u969c\u7684\u9700\u6c42\u3002\u8be5\u7b97\u6cd5\u7531F. D. Proentzen\u548cO. Khatib\u63d0\u51fa\uff0c\u540e\u7ecf\u8fc7\u4e0d\u65ad\u4f18\u5316\uff0c\u5df2\u6210\u4e3a\u79fb\u52a8\u673a\u5668\u4eba\u9886\u57df\u4e2d\u7684\u6807\u51c6\u7b97\u6cd5\u4e4b\u4e00\u3002</p>"},{"location":"blogs/DWA%E5%B1%80%E9%83%A8%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/#_2","title":"\u8fd0\u52a8\u6a21\u578b","text":"<p>\u901a\u8fc7\u5728\u901f\u5ea6\u7a7a\u95f4\u5185\u91c7\u6837\uff0c\u9884\u6d4b\u5728\u4e0d\u540c\u901f\u5ea6\u4e0b\u7684\u8f68\u8ff9\uff0c\u5e76\u4f7f\u7528\u8bc4\u4ef7\u51fd\u6570\u6765\u8bc4\u4f30\u8fd9\u4e9b\u8f68\u8ff9\u3002\u9009\u62e9\u8bc4\u4ef7\u6700\u9ad8\u7684\u8f68\u8ff9\u5bf9\u5e94\u7684\u901f\u5ea6\u4f5c\u4e3a\u673a\u5668\u4eba\u7684\u4e0b\u4e00\u4e2a\u8fd0\u52a8\u6307\u4ee4\u3002</p>"},{"location":"blogs/DWA%E5%B1%80%E9%83%A8%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/#_3","title":"\u5dee\u901f\u6a21\u578b","text":"<p>\u5dee\u901f\u6a21\u578b\u5c0f\u8f66\u4e0d\u80fd\u5168\u5411\u79fb\u52a8\uff0c\u53ea\u80fd\u524d\u8fdb(x\u8f74\u7ebf\u901f\u5ea6v)\uff0c\u548c\u65cb\u8f6c(z\u8f74\u89d2\u901f\u5ea6w)\uff0c\u5982\u5dee\u901f\u8f66\u5982\u4e0b\u56fe\u6240\u793a\u3002\u5c0f\u8f66\u76f8\u90bb\u65f6\u523b\u5185\uff08ms\u7ea7\uff09\uff0c\u8fd0\u52a8\u8ddd\u79bb\u77ed\uff0c\u53ef\u5c06\u76f8\u90bb\u4e24\u70b9\u4e4b\u95f4\u7684\u8fd0\u52a8\u8f68\u8ff9\uff0c\u770b\u6210\u76f4\u7ebf\u3002</p> <p></p> <p>\u5c0f\u8f66\u5728\\(\\Delta t\\)\u65f6\u95f4\u5185\u8d70\u4e86\u591a\u8fdc\uff1a$\\Delta s = v*\\Delta t \\(\uff0c\u53d8\u6210\u5c0f\u8f66\u7684\\) x,y $\u5750\u6807\u4e3a\uff1a $$ \\Delta x = v \\Delta tcos(\\theta_t)</p> <p>\\</p> <p>\\Delta y = v \\Delta tsin(\\theta_t) $$ \u90a3\u4e48\u5c0f\u8f66\u7684\u4e0b\u4e2a\u72b6\u6001\u7684\u4f4d\u7f6e\u4e3a\uff1a $$ x = x + v \\Delta tcos(\\theta_t)</p> <p>\\</p> <p>y = y + v \\Delta tsin(\\theta_t)</p> <p>\\</p> <p>\\theta_t = \\theta_t+\\omega \\Delta t  $$</p>"},{"location":"blogs/DWA%E5%B1%80%E9%83%A8%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/#_4","title":"\u5168\u5411\u6a21\u578b","text":"<p>\u5982\u679c\u5c0f\u8f66\u662f\u5168\u5411\u79fb\u52a8\u7684\uff0c\u6709\\(v_x\\)\u3001\\(v_y\\)\u548c\\(\\omega\\)\uff0c\u5982\u9ea6\u514b\u7eb3\u59c6\u8f6e\u5c0f\u8f66\u3002\u5c0f\u8f66\u76f8\u90bb\u65f6\u523b\u5185\uff08ms\u7ea7\uff09\uff0c\u8fd0\u52a8\u8ddd\u79bb\u77ed\uff0c\u53ef\u5c06\u76f8\u90bb\u4e24\u70b9\u4e4b\u95f4\u7684\u8fd0\u52a8\u8f68\u8ff9\uff0c\u770b\u6210\u76f4\u7ebf\u3002</p> <p>\u90a3\u4e48\u7531y\u65b9\u5411\u901f\u5ea6 \u4ea7\u751f\u5c0f\u8f66\u7684x,y\u5750\u6807\u53d8\u5316\u4e3a\uff1a $$ \\Delta x_y = - v_y \\Delta t sin(\\theta_t)</p> <p>\\</p> <p>\\Delta y_y =  v_y \\Delta t cos(\\theta_t) $$ \u540c\u7406\u7531x\u65b9\u5411\u901f\u5ea6 \u4ea7\u751f\u5c0f\u8f66\u7684x,y\u5750\u6807\u53d8\u5316\u4e3a\uff1a $$ \\Delta x_x = v_x \\Delta t cos(\\theta_t)</p> <p>\\</p> <p>\\Delta y_x = v_x \\Delta t sin(\\theta_t) $$ \u6240\u4ee5\u5c0f\u8f66\u4e0b\u4e2a\u72b6\u6001\u7684\u4f4d\u7f6e\u4e3a\uff1a $$ x = x +  v_x \\Delta t cos(\\theta_t)- v_y \\Delta t sin(\\theta_t)</p> <p>\\</p> <p>y = y +  v_x \\Delta t sin(\\theta_t)+ v_y \\Delta t cos(\\theta_t)</p> <p>\\</p> <p>\\theta_t = \\theta_t+\\omega\\Delta_t $$</p>"},{"location":"blogs/DWA%E5%B1%80%E9%83%A8%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/#_5","title":"\u5176\u4ed6\u6a21\u578b","text":"<p>\u8fd0\u52a8\u8f68\u8ff9\u770b\u6210\u5f27\u7ebf</p>"},{"location":"blogs/DWA%E5%B1%80%E9%83%A8%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/#_6","title":"\u901f\u5ea6\u91c7\u6837","text":"<p>\u6709\u4e86\u8fd0\u52a8\u6a21\u578b\uff0c\u6839\u636e\u901f\u5ea6\u5c31\u53ef\u4ee5\u63a8\u7b97\u51fa\u8f68\u8ff9\u3002\u56e0\u6b64\u53ea\u9700\u91c7\u6837\u5f88\u591a\u901f\u5ea6\uff0c\u63a8\u7b97\u8f68\u8ff9\uff0c\u7136\u540e\u8bc4\u4ef7\u8fd9\u4e9b\u8f68\u8ff9\u597d\u4e0d\u597d\uff0c\u9009\u62e9\u5f53\u4e2d\u7684\u6700\u4f18\u89e3\u3002\u90a3\u4e48\u5c31\u8981\u8003\u8651\u901f\u5ea6\u5982\u4f55\u91c7\u6837\uff1f\u901f\u5ea6\u7684\u8303\u56f4\uff1f\u5c0f\u8f66\u672c\u8eab\u7684\u9650\u5236\uff1f</p> <p>\u6211\u4eec\u901a\u5e38\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u6765\u8003\u8651\u7684\uff1a1\u3001\u5c0f\u8f66\u901f\u5ea6\u6700\u5927\u503c\u3001\u6700\u5c0f\u503c\uff1b2\u3001\u7535\u673a\u6027\u80fd\u5f71\u54cd\u52a0\u901f\u5ea6\uff1b3\u3001\u9884\u7559\u5239\u8f66\u8ddd\u79bb\u3002\u6839\u636e\u8fd9\u51e0\u4e2a\u65b9\u9762\u786e\u5b9a\u901f\u5ea6\u8303\u56f4\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u9700\u8981\u8fdb\u884c\u901f\u5ea6\u7684\u91c7\u6837\u3002</p> <p>\u5047\u5982\u5c0f\u8f66\u7684\u901f\u5ea6\u548c\u89d2\u901f\u5ea6\u8303\u56f4\u662f\uff1a\\(v_x \\in (5,20),\\omega \\in (0.1,1)\\)\uff0c\u90a3\u4e48\u63a5\u4e0b\u6765\u5c31\u9700\u8981\u5bf9\u901f\u5ea6\u8fdb\u884c\u79bb\u6563\u5316\uff0c\u4f8b\u5982\u53ef\u4ee5\u5c06\u901f\u5ea6\u7684\u5206\u8fa8\u7387\u8bbe\u7f6e\u4e3a0.1\uff0c\u89d2\u901f\u5ea6\u7684\u5206\u8fa8\u7387\u8bbe\u7f6e\u4e3a0.05\uff0c\u90a3\u4e48 $$ v_x = 5.1/5.2/5.3...</p> <p>\\</p> <p>\\omega = 0.15/0.20/0.25... $$ \u63a5\u4e0b\u6765\u5229\u7528\u901f\u5ea6\u548c\u5c0f\u8f66\u7684\u8fd0\u52a8\u5b66\u6a21\u578b\uff0c\u5c31\u53ef\u4ee5\u6a21\u62df\u63a8\u7b97\u51fa\u4e00\u6bb5\u65f6\u95f4\u5185\u5c0f\u8f66\u7684\u8def\u5f84\u5982\u4e0b\u56fe\u6240\u793a\u3002 </p>"},{"location":"blogs/DWA%E5%B1%80%E9%83%A8%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/#_7","title":"\u8bc4\u4ef7\u51fd\u6570","text":"<p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5f97\u5230\u591a\u6761\u8def\u5f84\u4e4b\u540e\uff0c\u5982\u4f55\u9009\u62e9\u51fa\u4e00\u6761\u6700\u4f18\u7684\u8def\u5f84\uff1f\u6216\u8005\u8bf4\u5982\u4f55\u8bc4\u4ef7\u6bcf\u4e00\u6761\u8def\u5f84\u7684\u597d\u574f\uff1f\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u8bc4\u4ef7\u51fd\u6570\u3002 $$ G(v,\\omega) = \\sigma(\\alpha \\cdot heading(v,\\omega) + \\beta \\cdot dist(v,\\omega) +  \\gamma \\cdot velocity(v,\\omega)) $$ \u4e0a\u8ff0\u516c\u5f0f\u4e2d\uff0c\\(heading(v,\\omega)\\)\u4e3a\uff1a\u65b9\u4f4d\u89d2\u8bc4\u4ef7\u51fd\u6570\uff0c\u5c0f\u8f66\u4e0e\u76ee\u6807\u4e4b\u95f4\u7684\u89d2\u5ea6\u5dee\uff0c\u539f\u6587\u7528180-\u03b8\u8bc4\u4ef7\u3002\\(dist(v,\\omega)\\)\u5c0f\u8f66\u4e0e\u6700\u8fd1\u969c\u788d\u7269\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\\(velocity(v,\\omega)\\)\u8f68\u8ff9\u5bf9\u5e94\u7684\u901f\u5ea6\u5927\u5c0f\u3002</p> <p>\u90a3\u4e48\u4e0a\u8ff0\u516c\u5f0f\u7684\u7269\u7406\u610f\u4e49\u4e3a\u4f7f\u5c0f\u8f66\u907f\u5f00\u969c\u788d\u7269\u3001\u671d\u7740\u76ee\u6807\u3001\u4ee5\u8f83\u5feb\u7684\u901f\u5ea6\u884c\u9a76\u3002</p> <p>\u5176\u4e2d\u4e3a\u4e86\u907f\u514d\u4e0d\u540c\u5355\u4f4d\u4e4b\u95f4\u91cf\u7eb2\u7684\u8bef\u5dee\uff0c\u5bf9\u5176\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u6bcf\u4e00\u9879\u9664\u4ee5\u6bcf\u4e00\u9879\u7684\u603b\u548c\u3002 $$ normal_head(i) = \\frac{head(i)}{\\sum_{i=1}^{n}head(i)}</p> <p>\\</p> <p>normal_dist(i) = \\frac{dist(i)}{\\sum_{i=1}^{n} dist(i)}</p> <p>\\</p> <p>normal_velocity(i) = \\frac{velocity(i)}{\\sum_{i=1}^{n} velocity(i)} $$ \u8fd8\u6709\u5c31\u662f\u4e09\u4e2a\u6743\u91cd\\(\\alpha\u3001\\beta\u3001\\gamma\\)\uff0c\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u8c03\u8282\uff0c\u5f71\u54cd\u5c0f\u8f66\u9009\u53d6\u8def\u5f84\u3002</p>"},{"location":"blogs/DWA%E5%B1%80%E9%83%A8%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/#_8","title":"\u603b\u4f53\u6d41\u7a0b","text":"<pre><code>\u521d\u59cb\u5316\u2014\u2014\u5c0f\u8f66\u6700\u5927\u6700\u5c0f\u901f\u5ea6\u3001\u52a0\u901f\u5ea6\uff0c\u8bc4\u4ef7\u51fd\u6570\u6743\u91cd\u7b49\n\u5faa\u73af\n{   \u5224\u65ad\u662f\u5426\u5230\u8fbe\u76ee\u7684\u5730\n\n    \u8ba1\u7b97\u5f53\u524d\u91c7\u6837\u7684\u901f\u5ea6\u8303\u56f4\uff08\u52a8\u6001\u7a97\u53e3\uff09\n\n    \u904d\u5386\u6240\u6709\u901f\u5ea6v &amp; w\uff0c\u6839\u636e\u6a21\u578b\u6a21\u62df\u4e00\u6bb5\u65f6\u95f4\u7684\u8def\u5f84\n\n    \u6839\u636e\u8bc4\u4ef7\u51fd\u6570\u6253\u5206\uff08\u5305\u62ec\u8bc4\u4ef7\u51fd\u6570\u3001\u5f52\u4e00\u5316\u3001\u6743\u91cd\uff09\n\u000b   \u9009\u53d6\u6700\u4f18\u89e3\u2014\u2014v &amp; w\uff0c\u4e0b\u53d1\u7ed9\u8fd0\u52a8\u5e95\u76d8\n\n    \u5c0f\u8f66\u7ee7\u7eed\u79fb\u52a8\n}\n</code></pre>"},{"location":"blogs/DWA%E5%B1%80%E9%83%A8%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/#_9","title":"\u4ee3\u7801","text":"<pre><code>% -------------------------------------------------------------------------\n%\n% File : DWA\n%\n% Discription : Mobile Robot Motion Planning with Dynamic Window Approach\n%\n% Environment : Matlab\n%\n% Author :zzw\n%\n%\n% License : Modified BSD Software License Agreement\n% log: collision checking \u4fee\u6539\u4e3a\u786c\u7ea6\u675f\n% -------------------------------------------------------------------------\n\nfunction [] = dwa_V_1_0()\n\nclose all;\nclear ;\n\ndisp('Dynamic Window Approach sample program start!!')\n\n%% \u673a\u5668\u4eba\u7684\u521d\u671f\u72b6\u6001[x(m),y(m),yaw(Rad),v(m/s),w(rad/s)]\n% x=[0 0 pi/2 0 0]'; % 5x1\u77e9\u9635 \u5217\u77e9\u9635  \u4f4d\u7f6e 0\uff0c0 \u822a\u5411 pi/2 ,\u901f\u5ea6\u3001\u89d2\u901f\u5ea6\u5747\u4e3a0\nx = [0 0 pi/10 0 0]'; \n\n% \u4e0b\u6807\u5b8f\u5b9a\u4e49 \u72b6\u6001[x(m),y(m),yaw(Rad),v(m/s),w(rad/s)]\nPOSE_X      = 1;  %\u5750\u6807 X\nPOSE_Y      = 2;  %\u5750\u6807 Y\nYAW_ANGLE   = 3;  %\u673a\u5668\u4eba\u822a\u5411\u89d2\nV_SPD       = 4;  %\u673a\u5668\u4eba\u901f\u5ea6\nW_ANGLE_SPD = 5;  %\u673a\u5668\u4eba\u89d2\u901f\u5ea6 \n\ngoal = [10,10];   % \u76ee\u6807\u70b9\u4f4d\u7f6e [x(m),y(m)]\n\n% \u969c\u788d\u7269\u4f4d\u7f6e\u5217\u8868 [x(m) y(m)]\n\nobstacle=[%0 2;\n          3 10*rand(1);\n%           4 4;\n%          5 4;\n%            5 5;\n          6 10*rand(1);\n%          5 9\n%          7 8\n          8 10*rand(1);\n          2 5;      \n          4 2;\n          7 7;\n          9 9\n            ];\n%\u8fb9\u754c\u969c\u788d\u7269\uff0c\u9632\u6b62\u8dd1\u51fa\u56fe\u5916\n for i =-1\n    for j = -1:12\n        obstacle = [obstacle; [i,j]];\n    end\n end     \nfor i =12\n    for j = -1:12\n        obstacle = [obstacle; [i,j]];\n    end\nend \nfor j =-2\n    for i = -1:12\n        obstacle = [obstacle; [i,j]];\n    end\nend \nfor j=13\n    for i= -1:12\n        obstacle = [obstacle; [i,j]];\n    end\nend \n\nobstacleR = 0.5;% \u51b2\u7a81\u5224\u5b9a\u7528\u7684\u969c\u788d\u7269\u534a\u5f84\nglobal dt; \ndt = 0.1;% \u65f6\u95f4[s]\n\n% \u673a\u5668\u4eba\u8fd0\u52a8\u5b66\u6a21\u578b\u53c2\u6570\n% \u6700\u9ad8\u901f\u5ea6m/s],\u6700\u9ad8\u65cb\u8f6c\u901f\u5ea6[rad/s],\u52a0\u901f\u5ea6[m/ss],\u65cb\u8f6c\u52a0\u901f\u5ea6[rad/ss],\n% \u901f\u5ea6\u5206\u8fa8\u7387[m/s],\u8f6c\u901f\u5206\u8fa8\u7387[rad/s]]\nKinematic = [1.0,toRadian(20.0),0.2,toRadian(50.0),0.01,toRadian(1)];\n%\u5b9a\u4e49Kinematic\u7684\u4e0b\u6807\u542b\u4e49\nMD_MAX_V    = 1;%   \u6700\u9ad8\u901f\u5ea6m/s]\nMD_MAX_W    = 2;%   \u6700\u9ad8\u65cb\u8f6c\u901f\u5ea6[rad/s]\nMD_ACC      = 3;%   \u52a0\u901f\u5ea6[m/ss]\nMD_VW       = 4;%   \u65cb\u8f6c\u52a0\u901f\u5ea6[rad/ss]\nMD_V_RESOLUTION  = 5;%  \u901f\u5ea6\u5206\u8fa8\u7387[m/s]\nMD_W_RESOLUTION  = 6;%  \u8f6c\u901f\u5206\u8fa8\u7387[rad/s]]\n\n\n% \u8bc4\u4ef7\u51fd\u6570\u53c2\u6570 [heading,dist,velocity,predictDT]\n% \u822a\u5411\u5f97\u5206\u7684\u6bd4\u91cd\u3001\u8ddd\u79bb\u5f97\u5206\u7684\u6bd4\u91cd\u3001\u901f\u5ea6\u5f97\u5206\u7684\u6bd4\u91cd\u3001\u5411\u524d\u6a21\u62df\u8f68\u8ff9\u7684\u65f6\u95f4\nevalParam = [0.045, 0.1 ,0.1, 3.0];\n% evalParam = [2, 0.2 ,0.2, 3.0];\narea      = [-3 14 -3 14];% \u6a21\u62df\u533a\u57df\u8303\u56f4 [xmin xmax ymin ymax]\n\n% \u6a21\u62df\u5b9e\u9a8c\u7684\u7ed3\u679c\nresult.x=[];   %\u7d2f\u79ef\u5b58\u50a8\u8d70\u8fc7\u7684\u8f68\u8ff9\u70b9\u7684\u72b6\u6001\u503c\ntic; % \u4f30\u7b97\u7a0b\u5e8f\u8fd0\u884c\u65f6\u95f4\u5f00\u59cb\nflag_obstacle = [1-2*rand(1) 1-2*rand(1) 1-2*rand(1)];\nvel_obstacle = 0.05;\ntemp = 0;\nabc = 0;\n%movcount=0;\n%% Main loop   \u5faa\u73af\u8fd0\u884c 5000\u6b21 \u6307\u5bfc\u8fbe\u5230\u76ee\u7684\u5730 \u6216\u8005 5000\u6b21\u8fd0\u884c\u7ed3\u675f\nfor i = 1:5000  \n    % DWA\u53c2\u6570\u8f93\u5165 \u8fd4\u56de\u63a7\u5236\u91cf u = [v(m/s),w(rad/s)] \u548c \u8f68\u8ff9\n    [u,traj] = DynamicWindowApproach(x,Kinematic,goal,evalParam,obstacle,obstacleR);%\u7b97\u51fa\u4e0b\u53d1\u901f\u5ea6u/\u5f53\u524d\u901f\u5ea6u\n    x = f(x,u);% \u673a\u5668\u4eba\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u65f6\u523b\u7684\u72b6\u6001\u91cf \u6839\u636e\u5f53\u524d\u901f\u5ea6\u548c\u89d2\u901f\u5ea6\u63a8\u5bfc \u4e0b\u4e00\u523b\u7684\u4f4d\u7f6e\u548c\u89d2\u5ea6\n    abc = abc+1;\n    % \u5386\u53f2\u8f68\u8ff9\u7684\u4fdd\u5b58\n    result.x = [result.x; x'];  %\u6700\u65b0\u7ed3\u679c \u4ee5\u884c\u7684\u5f62\u5f0f \u6dfb\u52a0\u5230result.x\uff0c\u4fdd\u5b58\u7684\u662f\u6240\u6709\u72b6\u6001\u53c2\u6570\u503c\uff0c\u5305\u62ec\u5750\u6807xy\u3001\u671d\u5411\u3001\u7ebf\u901f\u5ea6\u3001\u89d2\u901f\u5ea6\uff0c\u5176\u5b9e\u5e94\u8be5\u662f\u53ea\u53d6\u5750\u6807\u5c31OK\n\n    % \u662f\u5426\u5230\u8fbe\u76ee\u7684\u5730\n    if norm(x(POSE_X:POSE_Y)-goal')&lt;0.25   % norm\u51fd\u6570\u6765\u6c42\u5f97\u5750\u6807\u4e0a\u7684\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\n        disp('==========Arrive Goal!!==========');break;\n    end\n\n    %====Animation====\n    hold off;               % \u5173\u95ed\u56fe\u5f62\u4fdd\u6301\u529f\u80fd\u3002 \u65b0\u56fe\u51fa\u73b0\u65f6\uff0c\u53d6\u6d88\u539f\u56fe\u7684\u663e\u793a\u3002\n    ArrowLength = 0.5;      % \u7bad\u5934\u957f\u5ea6\n\n    % \u673a\u5668\u4eba\n    % quiver(x,y,u,v) \u5728 x \u548c y \u4e2d\u6bcf\u4e2a\u5bf9\u5e94\u5143\u7d20\u5bf9\u7ec4\u6240\u6307\u5b9a\u7684\u5750\u6807\u5904\u5c06\u5411\u91cf\u7ed8\u5236\u4e3a\u7bad\u5934\n    quiver(x(POSE_X), x(POSE_Y), ArrowLength*cos(x(YAW_ANGLE)), ArrowLength*sin(x(YAW_ANGLE)),'ok'); \n    % \u7ed8\u5236\u673a\u5668\u4eba\u5f53\u524d\u4f4d\u7f6e\u7684\u822a\u5411\u7bad\u5934\n    hold on;                                                     \n    %\u542f\u52a8\u56fe\u5f62\u4fdd\u6301\u529f\u80fd\uff0c\u5f53\u524d\u5750\u6807\u8f74\u548c\u56fe\u5f62\u90fd\u5c06\u4fdd\u6301\uff0c\u4ece\u6b64\u7ed8\u5236\u7684\u56fe\u5f62\u90fd\u5c06\u6dfb\u52a0\u5728\u8fd9\u4e2a\u56fe\u5f62\u7684\u57fa\u7840\u4e0a\uff0c\u5e76\u81ea\u52a8\u8c03\u6574\u5750\u6807\u8f74\u7684\u8303\u56f4\n\n    plot(result.x(:,POSE_X),result.x(:,POSE_Y),'-b');hold on;    % \u7ed8\u5236\u8d70\u8fc7\u7684\u6240\u6709\u4f4d\u7f6e \u6240\u6709\u5386\u53f2\u6570\u636e\u7684 X\u3001Y\u5750\u6807\n    plot(goal(1),goal(2),'*r');hold on;                          % \u7ed8\u5236\u76ee\u6807\u4f4d\u7f6e\n\n    for j = 1:3\n        if obstacle(j,2) &gt; 10 &amp;&amp; flag_obstacle(j) &gt; 0 || obstacle(j,2) &lt; 0 &amp;&amp; flag_obstacle(j) &lt; 0\n            flag_obstacle(j) = -flag_obstacle(j);\n        end\n%        obstacle(j,2)=obstacle(j,2)+flag_obstacle(j)*vel_obstacle;\n    end\n\n    %plot(obstacle(:,1),obstacle(:,2),'*k');hold on;              % \u7ed8\u5236\u6240\u6709\u969c\u788d\u7269\u4f4d\u7f6e\n    DrawObstacle_plot(obstacle,obstacleR);\n\n    % \u63a2\u7d22\u8f68\u8ff9 \u753b\u51fa\u5f85\u8bc4\u4ef7\u7684\u8f68\u8ff9\n    if ~isempty(traj) %\u8f68\u8ff9\u975e\u7a7a\n        for it=1:length(traj(:,1))/5    %\u8ba1\u7b97\u6240\u6709\u8f68\u8ff9\u6570  traj \u6bcf5\u884c\u6570\u636e \u8868\u793a\u4e00\u6761\u8f68\u8ff9\u70b9\n            ind = 1+(it-1)*5; %\u7b2c it \u6761\u8f68\u8ff9\u5bf9\u5e94\u5728traj\u4e2d\u7684\u4e0b\u6807 \n            plot(traj(ind,:),traj(ind+1,:),'-g');hold on;  %\u6839\u636e\u4e00\u6761\u8f68\u8ff9\u7684\u70b9\u4e32\u753b\u51fa\u8f68\u8ff9   traj(ind,:) \u8868\u793a\u7b2cind\u6761\u8f68\u8ff9\u7684\u6240\u6709x\u5750\u6807\u503c  traj(ind+1,:)\u8868\u793a\u7b2cind\u6761\u8f68\u8ff9\u7684\u6240\u6709y\u5750\u6807\u503c\n        end\n    end\n\n    axis(area); %\u6839\u636earea\u8bbe\u7f6e\u5f53\u524d\u56fe\u5f62\u7684\u5750\u6807\u8303\u56f4\uff0c\u5206\u522b\u4e3ax\u8f74\u7684\u6700\u5c0f\u3001\u6700\u5927\u503c\uff0cy\u8f74\u7684\u6700\u5c0f\u6700\u5927\u503c\n    grid on;\n    drawnow limitrate;  %\u5237\u65b0\u5c4f\u5e55. \u5f53\u4ee3\u7801\u6267\u884c\u65f6\u95f4\u957f\uff0c\u9700\u8981\u53cd\u590d\u6267\u884cplot\u65f6\uff0cMatlab\u7a0b\u5e8f\u4e0d\u4f1a\u9a6c\u4e0a\u628a\u56fe\u50cf\u753b\u5230figure\u4e0a\uff0c\u8fd9\u65f6\uff0c\u8981\u60f3\u5b9e\u65f6\u770b\u5230\u56fe\u50cf\u7684\u6bcf\u4e00\u6b65\u53d8\u5316\u60c5\u51b5\uff0c\u9700\u8981\u4f7f\u7528\u8fd9\u4e2a\u8bed\u53e5\u3002\n    for j = 1:3\n        if norm(obstacle(j,:)-x(1:2)')-obstacleR &lt; 0\n           disp('==========Hit an obstacle!!==========');\n           temp = 1;\n           break;\n        end\n    end\n    if temp == 1\n        break;\n    end\n   % movcount = movcount+1;\n   % mov(movcount) = getframe(gcf);%  \u8bb0\u5f55\u52a8\u753b\u5e27\nend\ntoc;  %\u8f93\u51fa\u7a0b\u5e8f\u8fd0\u884c\u65f6\u95f4  \u5f62\u5f0f\uff1a\u65f6\u95f4\u5df2\u8fc7 ** \u79d2\u3002\ndisp(abc)\n%movie2avi(mov,'movie.avi');  %\u5f55\u5236\u8fc7\u7a0b\u52a8\u753b \u4fdd\u5b58\u4e3a movie.avi \u6587\u4ef6\n\n%% \u7ed8\u5236\u6240\u6709\u969c\u788d\u7269\u4f4d\u7f6e\n% \u8f93\u5165\u53c2\u6570\uff1aobstacle \u6240\u6709\u969c\u788d\u7269\u7684\u5750\u6807   obstacleR \u969c\u788d\u7269\u7684\u534a\u5f84\nfunction [] = DrawObstacle_plot(obstacle,obstacleR)\nr = obstacleR; \ntheta = 0:pi/20:2*pi;\nfor id=1:length(obstacle(:,1))\n x = r * cos(theta) + obstacle(id,1); \n y = r  *sin(theta) + obstacle(id,2);\n plot(x,y,'-m'); \nend\n %plot(obstacle(:,1),obstacle(:,2),'*m');hold on;              % \u7ed8\u5236\u6240\u6709\u969c\u788d\u7269\u4f4d\u7f6e\n\n%% DWA\u7b97\u6cd5\u5b9e\u73b0 \n% model  \u673a\u5668\u4eba\u8fd0\u52a8\u5b66\u6a21\u578b  \u6700\u9ad8\u901f\u5ea6[m/s],\u6700\u9ad8\u65cb\u8f6c\u901f\u5ea6[rad/s],\u52a0\u901f\u5ea6[m/ss],\u65cb\u8f6c\u52a0\u901f\u5ea6[rad/ss], \u901f\u5ea6\u5206\u8fa8\u7387[m/s],\u8f6c\u901f\u5206\u8fa8\u7387[rad/s]]\n% \u8f93\u5165\u53c2\u6570\uff1a\u5f53\u524d\u72b6\u6001\u3001\u6a21\u578b\u53c2\u6570\u3001\u76ee\u6807\u70b9\u3001\u8bc4\u4ef7\u51fd\u6570\u7684\u53c2\u6570\u3001\u969c\u788d\u7269\u4f4d\u7f6e\u3001\u969c\u788d\u7269\u534a\u5f84\n% \u8fd4\u56de\u53c2\u6570\uff1a\u63a7\u5236\u91cf u = [v(m/s),w(rad/s)] \u548c \u8f68\u8ff9\u96c6\u5408 N * 31  \uff08N\uff1a\u53ef\u7528\u7684\u8f68\u8ff9\u6570\uff09\n% \u9009\u53d6\u6700\u4f18\u53c2\u6570\u7684\u7269\u7406\u610f\u4e49\uff1a\u5728\u5c40\u90e8\u5bfc\u822a\u8fc7\u7a0b\u4e2d\uff0c\u4f7f\u5f97\u673a\u5668\u4eba\u907f\u5f00\u969c\u788d\u7269\uff0c\u671d\u7740\u76ee\u6807\u4ee5\u8f83\u5feb\u7684\u901f\u5ea6\u884c\u9a76\u3002\nfunction [u,trajDB] = DynamicWindowApproach(x,model,goal,evalParam,ob,R)\n% Dynamic Window [vmin,vmax,wmin,wmax] \u6700\u5c0f\u901f\u5ea6 \u6700\u5927\u901f\u5ea6 \u6700\u5c0f\u89d2\u901f\u5ea6 \u6700\u5927\u89d2\u901f\u5ea6\u901f\u5ea6\nVr = CalcDynamicWindow(x,model);  % \u6839\u636e\u5f53\u524d\u72b6\u6001 \u548c \u8fd0\u52a8\u6a21\u578b \u8ba1\u7b97\u5f53\u524d\u7684\u53c2\u6570\u5141\u8bb8\u8303\u56f4\n\n% \u8bc4\u4ef7\u51fd\u6570\u7684\u8ba1\u7b97 evalDB N*5  \u6bcf\u884c\u4e00\u7ec4\u53ef\u7528\u53c2\u6570 \u5206\u522b\u4e3a \u901f\u5ea6\u3001\u89d2\u901f\u5ea6\u3001\u822a\u5411\u5f97\u5206\u3001\u8ddd\u79bb\u5f97\u5206\u3001\u901f\u5ea6\u5f97\u5206\n%               trajDB      \u6bcf5\u884c\u4e00\u6761\u8f68\u8ff9 \u6bcf\u6761\u8f68\u8ff9\u90fd\u6709\u72b6\u6001x\u70b9\u4e32\u7ec4\u6210\n[evalDB,trajDB]= Evaluation(x,Vr,goal,ob,R,model,evalParam);  %evalParam \u8bc4\u4ef7\u51fd\u6570\u53c2\u6570 [heading,dist,velocity,predictDT]\n\nif isempty(evalDB)\n    disp('no path to goal!!');\n    u=[0;0];return;\nend\n\n% \u5404\u8bc4\u4ef7\u51fd\u6570\u6b63\u5219\u5316\nevalDB = NormalizeEval(evalDB);\n\n% \u6700\u7ec8\u8bc4\u4ef7\u51fd\u6570\u7684\u8ba1\u7b97\nfeval=[];\nfor id=1:length(evalDB(:,1))\n    feval = [feval;evalParam(1:3)*evalDB(id,3:5)']; %\u6839\u636e\u8bc4\u4ef7\u51fd\u6570\u53c2\u6570 \u524d\u4e09\u4e2a\u53c2\u6570\u5206\u914d\u7684\u6743\u91cd \u8ba1\u7b97\u6bcf\u4e00\u7ec4\u53ef\u7528\u7684\u8def\u5f84\u53c2\u6570\u4fe1\u606f\u7684\u5f97\u5206\nend\nevalDB = [evalDB feval]; % \u6700\u540e\u4e00\u7ec4\uff1b\u52a0\u6700\u540e\u4e00\u5217\uff0c\u6bcf\u4e00\u7ec4\u901f\u5ea6\u7684\u6700\u7ec8\u5f97\u5206\n\n[maxv,ind] = max(feval);% \u9009\u53d6\u8bc4\u5206\u6700\u9ad8\u7684\u53c2\u6570 \u5bf9\u5e94\u5206\u6570\u8fd4\u56de\u7ed9 maxv  \u5bf9\u5e94\u4e0b\u6807\u8fd4\u56de\u7ed9 ind\nu = evalDB(ind,1:2)';% \u8fd4\u56de\u6700\u4f18\u53c2\u6570\u7684\u901f\u5ea6\u3001\u89d2\u901f\u5ea6  \n\n%% \u8bc4\u4ef7\u51fd\u6570 \u5185\u90e8\u8d1f\u8d23\u4ea7\u751f\u53ef\u7528\u8f68\u8ff9\n% \u8f93\u5165\u53c2\u6570 \uff1a\u5f53\u524d\u72b6\u6001\u3001\u53c2\u6570\u5141\u8bb8\u8303\u56f4\uff08\u7a97\u53e3\uff09\u3001\u76ee\u6807\u70b9\u3001\u969c\u788d\u7269\u4f4d\u7f6e\u3001\u969c\u788d\u7269\u534a\u5f84\u3001\u8bc4\u4ef7\u51fd\u6570\u7684\u53c2\u6570\n% \u8fd4\u56de\u53c2\u6570\uff1a\n%           evalDB N*5  \u6bcf\u884c\u4e00\u7ec4\u53ef\u7528\u53c2\u6570 \u5206\u522b\u4e3a \u901f\u5ea6\u3001\u89d2\u901f\u5ea6\u3001\u822a\u5411\u5f97\u5206\u3001\u8ddd\u79bb\u5f97\u5206\u3001\u901f\u5ea6\u5f97\u5206\n%           trajDB      \u6bcf5\u884c\u4e00\u6761\u8f68\u8ff9 \u6bcf\u6761\u8f68\u8ff9\u5305\u542b \u524d\u5411\u9884\u6d4b\u65f6\u95f4/dt + 1 = 31 \u4e2a\u8f68\u8ff9\u70b9\uff08\u89c1\u751f\u6210\u8f68\u8ff9\u51fd\u6570\uff09\nfunction [evalDB,trajDB] = Evaluation(x,Vr,goal,ob,R,model,evalParam)\nevalDB = [];\ntrajDB = [];\nfor vt = Vr(1):model(5):Vr(2)       %\u6839\u636e\u901f\u5ea6\u5206\u8fa8\u7387\u904d\u5386\u6240\u6709\u53ef\u7528\u901f\u5ea6\uff1a \u6700\u5c0f\u901f\u5ea6\u548c\u6700\u5927\u901f\u5ea6 \u4e4b\u95f4 \u901f\u5ea6\u5206\u8fa8\u7387 \u9012\u589e \n    for ot=Vr(3):model(6):Vr(4)     %\u6839\u636e\u89d2\u5ea6\u5206\u8fa8\u7387\u904d\u5386\u6240\u6709\u53ef\u7528\u89d2\u901f\u5ea6\uff1a \u6700\u5c0f\u89d2\u901f\u5ea6\u548c\u6700\u5927\u89d2\u901f\u5ea6 \u4e4b\u95f4 \u89d2\u5ea6\u5206\u8fa8\u7387 \u9012\u589e  \n        % \u8f68\u8ff9\u63a8\u6d4b; \u5f97\u5230 xt: \u673a\u5668\u4eba\u5411\u524d\u8fd0\u52a8\u540e\u7684\u9884\u6d4b\u4f4d\u59ff; traj: \u5f53\u524d\u65f6\u523b \u5230 \u9884\u6d4b\u65f6\u523b\u4e4b\u95f4\u7684\u8f68\u8ff9\uff08\u7531\u8f68\u8ff9\u70b9\u7ec4\u6210\uff09\n        [xt,traj] = GenerateTrajectory(x,vt,ot,evalParam(4));  %evalParam(4),\u524d\u5411\u6a21\u62df\u65f6\u95f4;\n        % \u5404\u8bc4\u4ef7\u51fd\u6570\u7684\u8ba1\u7b97\n        heading = CalcHeadingEval(xt,goal); % \u524d\u9879\u9884\u6d4b\u7ec8\u70b9\u7684\u822a\u5411\u5f97\u5206  \u504f\u5dee\u8d8a\u5c0f\u5206\u6570\u8d8a\u9ad8\n        [dist,Flag] = CalcDistEval(xt,ob,R);    % \u524d\u9879\u9884\u6d4b\u7ec8\u70b9 \u8ddd\u79bb\u6700\u8fd1\u969c\u788d\u7269\u7684\u95f4\u9699\u5f97\u5206 \u8ddd\u79bb\u8d8a\u8fdc\u5206\u6570\u8d8a\u9ad8\n        vel     = abs(vt);                  % \u901f\u5ea6\u5f97\u5206 \u901f\u5ea6\u8d8a\u5feb\u5206\u8d8a\u9ad8\n        stopDist = CalcBreakingDist(vel,model); % \u5236\u52a8\u8ddd\u79bb\u7684\u8ba1\u7b97\n        if dist &gt; stopDist &amp;&amp; Flag == 0 % \u5982\u679c\u53ef\u80fd\u649e\u5230\u6700\u8fd1\u7684\u969c\u788d\u7269 \u5219\u820d\u5f03\u6b64\u8def\u5f84 \uff08\u5230\u6700\u8fd1\u969c\u788d\u7269\u7684\u8ddd\u79bb \u5927\u4e8e \u5239\u8f66\u8ddd\u79bb \u624d\u53d6\u7528\uff09\n            evalDB = [evalDB;[vt ot heading dist vel]];\n            trajDB = [trajDB;traj];   % \u6bcf5\u884c \u4e00\u6761\u8f68\u8ff9  \n        end\n    end\nend\n\n%% \u5f52\u4e00\u5316\u5904\u7406 \n% \u6bcf\u4e00\u6761\u8f68\u8ff9\u7684\u5355\u9879\u5f97\u5206\u9664\u4ee5\u672c\u9879\u6240\u6709\u5206\u6570\u548c\nfunction EvalDB=NormalizeEval(EvalDB)\n% \u8bc4\u4ef7\u51fd\u6570\u6b63\u5219\u5316\nif sum(EvalDB(:,3))~= 0\n    EvalDB(:,3) = EvalDB(:,3)/sum(EvalDB(:,3));  %\u77e9\u9635\u7684\u6570\u9664  \u5355\u5217\u77e9\u9635\u7684\u6bcf\u5143\u7d20\u5206\u522b\u9664\u4ee5\u672c\u5217\u6240\u6709\u6570\u636e\u7684\u548c\nend\nif sum(EvalDB(:,4))~= 0\n    EvalDB(:,4) = EvalDB(:,4)/sum(EvalDB(:,4));\nend\nif sum(EvalDB(:,5))~= 0\n    EvalDB(:,5) = EvalDB(:,5)/sum(EvalDB(:,5));\nend\n\n%% \u5355\u6761\u8f68\u8ff9\u751f\u6210\u3001\u8f68\u8ff9\u63a8\u6f14\u51fd\u6570\n% \u8f93\u5165\u53c2\u6570\uff1a \u5f53\u524d\u72b6\u6001\u3001vt\u5f53\u524d\u901f\u5ea6\u3001ot\u89d2\u901f\u5ea6\u3001evaldt \u524d\u5411\u6a21\u62df\u65f6\u95f4\u3001\u673a\u5668\u4eba\u6a21\u578b\u53c2\u6570\uff08\u6ca1\u7528\u5230\uff09\n% \u8fd4\u56de\u53c2\u6570; \n%           x   : \u673a\u5668\u4eba\u6a21\u62df\u65f6\u95f4\u5185\u5411\u524d\u8fd0\u52a8 \u9884\u6d4b\u7684\u7ec8\u70b9\u4f4d\u59ff(\u72b6\u6001); \n%           traj: \u5f53\u524d\u65f6\u523b \u5230 \u9884\u6d4b\u65f6\u523b\u4e4b\u95f4 \u8fc7\u7a0b\u4e2d\u7684\u4f4d\u59ff\u8bb0\u5f55\uff08\u72b6\u6001\u8bb0\u5f55\uff09 \u5f53\u524d\u6a21\u62df\u7684\u8f68\u8ff9  \n%                  \u8f68\u8ff9\u70b9\u7684\u4e2a\u6570\u4e3a evaldt / dt + 1 = 3.0 / 0.1 + 1 = 31\n%           \nfunction [x,traj] = GenerateTrajectory(x,vt,ot,evaldt)\nglobal dt;\ntime = 0;\nu = [vt;ot];% \u8f93\u5165\u503c\ntraj = x;   % \u673a\u5668\u4eba\u8f68\u8ff9\nwhile time &lt;= evaldt   \n    time = time+dt; % \u65f6\u95f4\u66f4\u65b0\n    x = f(x,u);     % \u8fd0\u52a8\u66f4\u65b0 \u524d\u9879\u6a21\u62df\u65f6\u95f4\u5185 \u901f\u5ea6\u3001\u89d2\u901f\u5ea6\u6052\u5b9a\n    traj = [traj x]; % \u6bcf\u4e00\u5217\u4ee3\u8868\u4e00\u4e2a\u8f68\u8ff9\u70b9 \u4e00\u5217\u4e00\u5217\u7684\u6dfb\u52a0\nend\n\n%% \u8ba1\u7b97\u5236\u52a8\u8ddd\u79bb \n%\u6839\u636e\u8fd0\u52a8\u5b66\u6a21\u578b\u8ba1\u7b97\u5236\u52a8\u8ddd\u79bb, \u4e5f\u53ef\u4ee5\u8003\u8651\u6210\u8d70\u4e00\u6bb5\u6bb5\u5706\u5f27\u7684\u7d2f\u79ef \u7b80\u5316\u53ef\u4ee5\u5f53\u4e00\u6bb5\u6bb5\u5c0f\u76f4\u7ebf\u7684\u7d2f\u79ef\nfunction stopDist = CalcBreakingDist(vel,model)\nglobal dt;\nMD_ACC   = 3;% \nstopDist=0;\nwhile vel&gt;0   %\u7ed9\u5b9a\u52a0\u901f\u5ea6\u7684\u6761\u4ef6\u4e0b \u901f\u5ea6\u51cf\u52300\u6240\u8d70\u7684\u8ddd\u79bb\n    stopDist = stopDist + vel*dt;% \u5236\u52a8\u8ddd\u79bb\u7684\u8ba1\u7b97 \n    vel = vel - model(MD_ACC)*dt;% \nend\n\n%% \u969c\u788d\u7269\u8ddd\u79bb\u8bc4\u4ef7\u51fd\u6570  \uff08\u673a\u5668\u4eba\u5728\u5f53\u524d\u8f68\u8ff9\u4e0a\u4e0e\u6700\u8fd1\u7684\u969c\u788d\u7269\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u5982\u679c\u6ca1\u6709\u969c\u788d\u7269\u5219\u8bbe\u5b9a\u4e00\u4e2a\u5e38\u6570\uff09\n% \u8f93\u5165\u53c2\u6570\uff1a\u4f4d\u59ff\u3001\u6240\u6709\u969c\u788d\u7269\u4f4d\u7f6e\u3001\u969c\u788d\u7269\u534a\u5f84\n% \u8f93\u51fa\u53c2\u6570\uff1a\u5f53\u524d\u9884\u6d4b\u7684\u8f68\u8ff9\u7ec8\u70b9\u7684\u4f4d\u59ff\u8ddd\u79bb\u6240\u6709\u969c\u788d\u7269\u4e2d\u6700\u8fd1\u7684\u969c\u788d\u7269\u7684\u8ddd\u79bb \u5982\u679c\u5927\u4e8e\u8bbe\u5b9a\u7684\u6700\u5927\u503c\u5219\u7b49\u4e8e\u6700\u5927\u503c\n% \u8ddd\u79bb\u969c\u788d\u7269\u8ddd\u79bb\u8d8a\u8fd1\u5206\u6570\u8d8a\u4f4e\nfunction [dist,Flag] = CalcDistEval(x,ob,R)\ndist=100;\nfor io = 1:length(ob(:,1))  \n    disttmp = norm(ob(io,:)-x(1:2)')-R; %\u5230\u7b2cio\u4e2a\u969c\u788d\u7269\u7684\u8ddd\u79bb - \u969c\u788d\u7269\u534a\u5f84  \uff01\uff01\uff01\u6709\u53ef\u80fd\u51fa\u73b0\u8d1f\u503c\u5417\n    if disttmp &lt;0\n        Flag = 1;\n        break;\n    else\n        Flag = 0;\n    end\n\n    if dist &gt; disttmp   % \u5927\u4e8e\u6700\u5c0f\u503c \u5219\u9009\u62e9\u6700\u5c0f\u503c\n        dist = disttmp;\n    end\nend\n\n% \u969c\u788d\u7269\u8ddd\u79bb\u8bc4\u4ef7\u9650\u5b9a\u4e00\u4e2a\u6700\u5927\u503c\uff0c\u5982\u679c\u4e0d\u8bbe\u5b9a\uff0c\u4e00\u65e6\u4e00\u6761\u8f68\u8ff9\u6ca1\u6709\u969c\u788d\u7269\uff0c\u5c06\u592a\u5360\u6bd4\u91cd\nif dist &gt;= 3*R %\u6700\u5927\u5206\u6570\u9650\u5236\n    dist = 3*R;\nend\n\n%% heading\u7684\u8bc4\u4ef7\u51fd\u6570\u8ba1\u7b97\n% \u8f93\u5165\u53c2\u6570\uff1a\u5f53\u524d\u4f4d\u7f6e\u3001\u76ee\u6807\u4f4d\u7f6e\n% \u8f93\u51fa\u53c2\u6570\uff1a\u822a\u5411\u53c2\u6570\u5f97\u5206  \u5f53\u524d\u8f66\u7684\u822a\u5411\u548c\u76f8\u5bf9\u4e8e\u76ee\u6807\u70b9\u7684\u822a\u5411 \u504f\u79bb\u7a0b\u5ea6\u8d8a\u5c0f \u5206\u6570\u8d8a\u9ad8 \u6700\u5927180\u5206\nfunction heading = CalcHeadingEval(x,goal)\ntheta = toDegree(x(3));% \u673a\u5668\u4eba\u671d\u5411\ngoalTheta = toDegree(atan2(goal(2)-x(2),goal(1)-x(1)));% \u76ee\u6807\u70b9\u76f8\u5bf9\u4e8e\u673a\u5668\u4eba\u672c\u8eab\u7684\u65b9\u4f4d \nif goalTheta &gt; theta\n    targetTheta = goalTheta-theta;% [deg]\nelse\n    targetTheta = theta-goalTheta;% [deg]\nend\n\nheading = 180 - targetTheta;  \n\n%% \u8ba1\u7b97\u52a8\u6001\u7a97\u53e3\n% \u8fd4\u56de \u6700\u5c0f\u901f\u5ea6 \u6700\u5927\u901f\u5ea6 \u6700\u5c0f\u89d2\u901f\u5ea6 \u6700\u5927\u89d2\u901f\u5ea6\u901f\u5ea6\nfunction Vr = CalcDynamicWindow(x,model)\n\nV_SPD       = 4;%\u673a\u5668\u4eba\u901f\u5ea6\nW_ANGLE_SPD = 5;%\u673a\u5668\u4eba\u89d2\u901f\u5ea6 \n\nMD_MAX_V = 1;% \nMD_MAX_W = 2;% \nMD_ACC   = 3;% \nMD_VW    = 4;% \n\nglobal dt;\n% \u8f66\u5b50\u901f\u5ea6\u7684\u6700\u5927\u6700\u5c0f\u8303\u56f4 \u4f9d\u6b21\u4e3a\uff1a\u6700\u5c0f\u901f\u5ea6 \u6700\u5927\u901f\u5ea6 \u6700\u5c0f\u89d2\u901f\u5ea6 \u6700\u5927\u89d2\u901f\u5ea6\u901f\u5ea6\nVs=[0 model(MD_MAX_V) -model(MD_MAX_W) model(MD_MAX_W)];\n\n% \u6839\u636e\u5f53\u524d\u901f\u5ea6\u4ee5\u53ca\u52a0\u901f\u5ea6\u9650\u5236\u8ba1\u7b97\u7684\u52a8\u6001\u7a97\u53e3  \u4f9d\u6b21\u4e3a\uff1a\u6700\u5c0f\u901f\u5ea6 \u6700\u5927\u901f\u5ea6 \u6700\u5c0f\u89d2\u901f\u5ea6 \u6700\u5927\u89d2\u901f\u5ea6\u901f\u5ea6\nVd = [x(V_SPD)-model(MD_ACC)*dt x(V_SPD)+model(MD_ACC)*dt ...\n    x(W_ANGLE_SPD)-model(MD_VW)*dt x(W_ANGLE_SPD)+model(MD_VW)*dt];\n\n% \u6700\u7ec8\u7684Dynamic Window\nVtmp = [Vs;Vd];  %2 X 4  \u6bcf\u4e00\u5217\u4f9d\u6b21\u4e3a\uff1a\u6700\u5c0f\u901f\u5ea6 \u6700\u5927\u901f\u5ea6 \u6700\u5c0f\u89d2\u901f\u5ea6 \u6700\u5927\u89d2\u901f\u5ea6\u901f\u5ea6\nVr = [max(Vtmp(:,1)) min(Vtmp(:,2)) max(Vtmp(:,3)) min(Vtmp(:,4))];\n\n%% Motion Model \u6839\u636e\u5f53\u524d\u72b6\u6001\u63a8\u7b97\u4e0b\u4e00\u4e2a\u63a7\u5236\u5468\u671f\uff08dt\uff09\u7684\u72b6\u6001\n% u = [vt; wt];\u5f53\u524d\u65f6\u523b\u7684\u901f\u5ea6\u3001\u89d2\u901f\u5ea6 x = \u72b6\u6001[x(m),y(m),yaw(Rad),v(m/s),w(rad/s)]\nfunction x = f(x, u)\nglobal dt;\nF = [1 0 0 0 0\n     0 1 0 0 0\n     0 0 1 0 0\n     0 0 0 0 0\n     0 0 0 0 0];\n\nB = [dt*cos(x(3)) 0\n    dt*sin(x(3)) 0\n    0 dt\n    1 0\n    0 1];\n\nx= F*x+B*u;  \n\n%% degree to radian\nfunction radian = toRadian(degree)\nradian = degree/180*pi;\n\n%% radian to degree\nfunction degree = toDegree(radian)\ndegree = radian/pi*180;\n%% END\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","title":"Docker","text":""},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_1","title":"\u5b89\u88c5","text":"<ul> <li> <p>\u4f7f\u7528get docker\u5b89\u88c5\uff08\u6bd4\u8f83\u7b80\u5355\uff09 <pre><code>sudo apt install curl\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n</code></pre></p> </li> <li> <p>\u4f7f\u7528\u5b98\u7f51\u6559\u7a0b\u5b89\u88c5\uff08\u63a8\u8350\uff0c\u53ef\u4ee5\u4e86\u89e3\u7ec6\u8282\uff09 <pre><code># Add Docker's official GPG key:\nsudo apt-get update\nsudo apt-get install ca-certificates curl\nsudo install -m 0755 -d /etc/apt/keyrings\nsudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n\n# Add the repository to Apt sources:\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\n  $(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\") stable\" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\nsudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker compose-plugin\n</code></pre></p> </li> <li>\u955c\u50cf\u5b89\u88c5 \u7531\u4e8e\u56fd\u5185\u7f51\u7edc\u7684\u95ee\u9898\uff0c\u53ef\u80fd\u5bfc\u81f4\u5b89\u88c5\u5931\u8d25\uff0c\u63a8\u8350\u4f7f\u7528\u963f\u91cc\u4e91\u955c\u50cf\u5b89\u88c5 <pre><code># step 1: \u5b89\u88c5\u5fc5\u8981\u7684\u4e00\u4e9b\u7cfb\u7edf\u5de5\u5177\nsudo apt-get update\nsudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common\n# step 2: \u5b89\u88c5GPG\u8bc1\u4e66\ncurl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n# Step 3: \u5199\u5165\u8f6f\u4ef6\u6e90\u4fe1\u606f\nsudo add-apt-repository \"deb [arch=$(dpkg --print-architecture)] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\"\n# Step 4: \u66f4\u65b0\u5e76\u5b89\u88c5Docker-CE\nsudo apt-get -y update\nsudo apt-get -y install docker-ce\n\n# \u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684Docker-CE:\n# Step 1: \u67e5\u627eDocker-CE\u7684\u7248\u672c:\n# apt-cache madison docker-ce\n#   docker-ce | 17.03.1~ce-0~ubuntu-xenial | https://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages\n#   docker-ce | 17.03.0~ce-0~ubuntu-xenial | https://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages\n# Step 2: \u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684Docker-CE: (VERSION\u4f8b\u5982\u4e0a\u9762\u768417.03.1~ce-0~ubuntu-xenial)\n# sudo apt-get -y install docker-ce=[VERSION]\n</code></pre></li> </ul> <p>\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u5b8c\u6210\uff1a</p> <pre><code>docker -v\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_2","title":"\u67e5\u770b\u5df2\u6709\u955c\u50cf","text":"<pre><code>docker images\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_3","title":"\u5176\u4ed6\u955c\u50cf\u64cd\u4f5c","text":"<p>\u641c\u7d22\u955c\u50cf\uff1a</p> <pre><code>docker search &lt;\u955c\u50cf\u540d\u79f0&gt;\n</code></pre> <p>\u5220\u9664\u955c\u50cf\uff08\u5220\u9664\u955c\u50cf\u9700\u8981\u4fdd\u8bc1\u6ca1\u6709\u5bf9\u5e94\u7684\u5bb9\u5668\uff09\uff1a</p> <pre><code>docker rmi &lt;\u955c\u50cf\u540d\u79f0:\u6807\u7b7e&gt;\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_4","title":"\u57fa\u4e8e\u955c\u50cf\u542f\u52a8\u5bb9\u5668","text":"<pre><code>docker run -d [-p &lt;\u4e3b\u673a\u7aef\u53e3&gt;:&lt;\u5bb9\u5668\u7aef\u53e3&gt;] [--name=&lt;\u5bb9\u5668\u540d\u79f0&gt;] [-v &lt;\u5bbf\u4e3b\u673a\u8def\u5f84&gt;:&lt;\u5bb9\u5668\u8def\u5f84&gt;] [--restart=&lt;\u91cd\u542f\u503c&gt;] &lt;\u955c\u50cf\u540d\u79f0&gt;\n</code></pre> <ul> <li><code>-d</code> \u8868\u793a\u5728\u540e\u53f0\u8fd0\u884c</li> <li><code>-p</code> \u8868\u793a\u5c06\u4e3b\u673a\u7684\u7aef\u53e3\u6620\u5c04\u5230\u5bb9\u5668\u7684\u7aef\u53e3\uff0c\u6ce8\u610f\u4e3b\u673a\u7684\u7aef\u53e3\u4e0d\u80fd\u88ab\u5360\u7528\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>sudo lsof -i:&lt;\u7aef\u53e3\u53f7&gt;</code> \u67e5\u770b\u7aef\u53e3\u662f\u5426\u88ab\u5360\u7528\uff0c\u6ce8\u610f\u5173\u95ed\u9632\u706b\u5899\u6216\u8005\u9632\u706b\u5899\u5f00\u653e\u5bf9\u5e94\u7684\u7aef\u53e3\uff0c\u5426\u5219\u5176\u4ed6\u673a\u5668\u65e0\u6cd5\u8bbf\u95ee</li> <li><code>--name</code> \u6307\u5b9a\u521b\u5efa\u7684\u5bb9\u5668\u540d\u79f0\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u4f1a\u81ea\u52a8\u521b\u5efa</li> <li> <p><code>-v</code> \uff08Volume \u6570\u636e\u5377\uff09\u7528\u4e8e\u5c06\u5bbf\u4e3b\u673a\u7684\u6587\u4ef6\u5939/\u6587\u4ef6\u6620\u5c04\u5230\u5bb9\u5668\uff0c\u76f8\u5f53\u4e8e\u5171\u4eab\u6587\u4ef6\u5939\uff0c\u5e38\u7528\u4e8e\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\u3001\u65e5\u5fd7\u76ee\u5f55\u3001\u6570\u636e\u5e93\u7b49</p> </li> <li> <p><code>--restart</code> \u8868\u793a\u5bb9\u5668\u4f55\u65f6\u91cd\u542f\uff0c\u5e38\u89c1\u7684\u503c\u6709\uff1a</p> </li> <li><code>no</code>\uff1a\u4e0d\u91cd\u542f</li> <li><code>on-failure</code>\uff1a\u5bb9\u5668\u5f02\u5e38\u505c\u6b62\u65f6\u4f1a\u91cd\u542f</li> <li><code>unless-stopped</code>\uff1a\u9664\u975e\u624b\u52a8\u505c\u6b62\uff0c\u5426\u5219\u4e00\u76f4\u91cd\u542f</li> <li><code>always</code>\uff1a\u65e0\u8bba\u4f55\u65f6\u670d\u52a1\u505c\u6b62\uff0c\u90fd\u81ea\u52a8\u91cd\u542f\uff0c\u5373\u4f7f\u624b\u52a8\u505c\u6b62</li> </ul>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_5","title":"\u5bb9\u5668\u5176\u4ed6\u64cd\u4f5c","text":"<p>\u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\uff1a</p> <pre><code>docker ps\n</code></pre> <p>\u67e5\u770b\u6240\u6709\u5bb9\u5668\uff1a</p> <pre><code>docker ps -a\n</code></pre> <p>\u8fd0\u884c/\u505c\u6b62\u5bb9\u5668\uff1a</p> <pre><code>docker start &lt;\u5bb9\u5668\u540d\u6216\u5bb9\u5668ID&gt;\ndocker stop &lt;\u5bb9\u5668\u540d\u6216\u5bb9\u5668ID&gt;\n</code></pre> <p>\u5220\u9664\u5bb9\u5668\uff08\u5220\u9664\u5bb9\u5668\u524d\u9700\u8981\u5148\u505c\u6b62\uff09\uff1a</p> <pre><code>docker rm &lt;\u5bb9\u5668\u540d\u6216\u5bb9\u5668ID&gt;\n</code></pre> <p>\u67e5\u770b\u5bb9\u5668\u65e5\u5fd7\uff1a</p> <pre><code>docker logs &lt;\u5bb9\u5668\u540d\u6216\u5bb9\u5668ID&gt;\n</code></pre> <p>\u4ee5\u4ea4\u4e92\u6a21\u5f0f\u8fd0\u884c\u5bb9\u5668\uff1a</p> <pre><code>docker run -it &lt;\u5bb9\u5668\u540d\u79f0&gt; [bash]\n</code></pre> <p>\u5728\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u4e2d\u6267\u884c\u547d\u4ee4\uff1a</p> <pre><code>docker exec -it &lt;\u5bb9\u5668\u540d\u79f0\u6216\u5bb9\u5668ID&gt; &lt;\u547d\u4ee4&gt;\ndocker exec -it &lt;\u5bb9\u5668\u540d\u79f0\u6216\u5bb9\u5668ID&gt; /bin/bash # \u5728docker\u5bb9\u5668\u6253\u5f00\u547d\u4ee4\u884c\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_6","title":"\u5bfc\u51fa","text":"<pre><code>docker save -o &lt;\u5bfc\u51fa\u6587\u4ef6\u540d.tar&gt; &lt;\u955c\u50cf\u540d\u79f0&gt;\n</code></pre> <p>\u9ed8\u8ba4\u4f1a\u5bfc\u51fa\u5230\u5f53\u524d\u6587\u4ef6\u5939</p>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_7","title":"\u5bfc\u5165","text":"<pre><code>docker load -i &lt;\u6587\u4ef6\u540d.tar&gt;\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#dockerfile","title":"Dockerfile","text":"<p>\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u65e0\u540e\u7f00\u540d\uff0c\u4f7f\u7528\u4e00\u4e9b\u4fdd\u7559\u5b57\u6765\u6784\u5efa\u4e00\u4e2aDocker\u955c\u50cf</p>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_8","title":"\u5e38\u89c1\u7684\u4fdd\u7559\u5b57","text":"<ul> <li>FROM : \u57fa\u7840\u955c\u50cf\uff0c\u5f53\u524d\u65b0\u955c\u50cf\u662f\u57fa\u4e8e\u54ea\u4e2a\u955c\u50cf\u7684\uff0c\u6307\u5b9a\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u955c\u50cf\u4f5c\u4e3a\u6a21\u677f\uff0c\u7b2c\u4e00\u6761\u5fc5\u987b\u662ffrom</li> <li>MAINTAINER : \u955c\u50cf\u7ef4\u62a4\u8005\u7684\u59d3\u540d\u548c\u90ae\u7bb1\u5730\u5740</li> <li> <p>RUN: \u5bb9\u5668\u6784\u5efa\u65f6\u9700\u8981\u8fd0\u884c\u7684\u6307\u4ee4\uff0cdocker build\u65f6\u8fd0\u884c\u6709\u4e24\u79cd\u683c\u5f0f <pre><code>shell\u683c\u5f0f\uff1aRUN yum -y install vim\nexec\u683c\u5f0f\uff1aRUN [\"\u53ef\u6267\u884c\u6587\u4ef6\",\"\u53c2\u65701\",\"\u53c2\u65702\"]\n</code></pre></p> </li> <li> <p>EXPOSE : \u5f53\u524d\u5bb9\u5668\u5bf9\u5916\u66b4\u9732\u51fa\u7684\u7aef\u53e3</p> </li> <li>WORKDIR \uff1a\u6307\u5b9a\u5728\u521b\u5efa\u5bb9\u5668\u540e\uff0c\u7ec8\u7aef\u9ed8\u8ba4\u767b\u9646\u7684\u8fdb\u6765\u5de5\u4f5c\u76ee\u5f55\uff0c\u4e00\u4e2a\u843d\u811a\u70b9</li> <li>USER \uff1a\u6307\u5b9a\u8be5\u955c\u50cf\u4ee5\u4ec0\u4e48\u6837\u7684\u7528\u6237\u53bb\u6267\u884c\uff0c\u5982\u679c\u90fd\u4e0d\u6307\u5b9a\uff0c\u9ed8\u8ba4\u662froot</li> <li>ENV \uff1a\u7528\u6765\u5728\u6784\u5efa\u955c\u50cf\u8fc7\u7a0b\u4e2d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf<code>ENV MY_PATH /usr/mypath</code></li> <li>ADD : \u5c06\u5bbf\u4e3b\u673a\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u62f7\u8d1d\u8fdb\u955c\u50cf\u4e14\u4f1a\u81ea\u52a8\u5904\u7406URL\u548c\u89e3\u538btar\u538b\u7f29\u5305</li> <li>COPY : \u7c7b\u4f3cADD\uff0c\u62f7\u8d1d\u6587\u4ef6\u548c\u76ee\u5f55\u5230\u955c\u50cf\u4e2d\u3002 \u5c06\u4ece\u6784\u5efa\u4e0a\u4e0b\u6587\u76ee\u5f55\u4e2d &lt;\u6e90\u8def\u5f84&gt; \u7684\u6587\u4ef6/\u76ee\u5f55\u590d\u5236\u5230\u65b0\u7684\u4e00\u5c42\u7684\u955c\u50cf\u5185\u7684 &lt;\u76ee\u6807\u8def\u5f84&gt; \u4f4d\u7f6e</li> <li>VOLUME : \u5bb9\u5668\u6570\u636e\u5377\uff0c\u7528\u4e8e\u6570\u636e\u4fdd\u5b58\u548c\u6301\u4e45\u5316\u5de5\u4f5c</li> <li>CMD : \u6307\u5b9a\u5bb9\u5668\u542f\u52a8\u540e\u7684\u8981\u5e72\u7684\u4e8b\u60c5\uff0c\u4e0eRUN\u547d\u4ee4\u683c\u5f0f\u7c7b\u4f3c</li> <li>ENTRYPOINT \uff1a\u4e5f\u662f\u7528\u6765\u6307\u5b9a\u4e00\u4e2a\u5bb9\u5668\u542f\u52a8\u65f6\u8981\u8fd0\u884c\u7684\u547d\u4ee4\uff0c\u7c7b\u4f3c\u4e8e CMD \u6307\u4ee4\uff0c\u4f46\u662fENTRYPOINT\u4e0d\u4f1a\u88abdocker run\u540e\u9762\u7684\u547d\u4ee4\u8986\u76d6\uff0c \u800c\u4e14\u8fd9\u4e9b\u547d\u4ee4\u884c\u53c2\u6570\u4f1a\u88ab\u5f53\u4f5c\u53c2\u6570\u9001\u7ed9 ENTRYPOINT \u6307\u4ee4\u6307\u5b9a\u7684\u7a0b\u5e8f</li> </ul> <p></p> <pre><code># \u81ea\u5b9a\u4e49\u4e00\u4e2ajava8\u7684\u955c\u50cf\n\nFROM centos\nMAINTAINER zzyy&lt;zzyybs@126.com&gt;\n\nENV MYPATH /usr/local\nWORKDIR $MYPATH\n\n#\u5b89\u88c5vim\u7f16\u8f91\u5668\nRUN yum -y install vim\n#\u5b89\u88c5ifconfig\u547d\u4ee4\u67e5\u770b\u7f51\u7edcIP\nRUN yum -y install net-tools\n#\u5b89\u88c5java8\u53calib\u5e93\nRUN yum -y install glibc.i686\nRUN mkdir /usr/local/java\n#ADD \u662f\u76f8\u5bf9\u8def\u5f84jar,\u628ajdk-8u171-linux-x64.tar.gz\u6dfb\u52a0\u5230\u5bb9\u5668\u4e2d,\u5b89\u88c5\u5305\u5fc5\u987b\u8981\u548cDockerfile\u6587\u4ef6\u5728\u540c\u4e00\u4f4d\u7f6e\nADD jdk-8u171-linux-x64.tar.gz /usr/local/java/\n#\u914d\u7f6ejava\u73af\u5883\u53d8\u91cf\nENV JAVA_HOME /usr/local/java/jdk1.8.0_171\nENV JRE_HOME $JAVA_HOME/jre\nENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH\nENV PATH $JAVA_HOME/bin:$PATH\n\nEXPOSE 80\n\nCMD echo $MYPATH\nCMD echo \"success--------------ok\"\nCMD /bin/bash\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_9","title":"\u6784\u5efa\u955c\u50cf","text":"<p>\u8fdb\u5165\u5230\u9879\u76ee\u76ee\u5f55\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6784\u5efa Docker \u955c\u50cf\uff0c\u547d\u4ee4\u6700\u540e\u6709\u4e00\u4e2a\u70b9\u201c.\u201d</p> <pre><code>docker build -t &lt;\u955c\u50cf\u540d\u79f0&gt;:TAG .\n</code></pre> <p>\u5176\u4e2d <code>.</code> \u8868\u793a\u4f7f\u7528\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 Dockerfile \u6587\u4ef6\u8fdb\u884c\u6784\u5efa\u3002</p>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#docker-compose","title":"Docker Compose","text":"<p>Docker Compose \u7528\u4e8e\u5b9a\u4e49\u548c\u7ba1\u7406\u591a\u4e2a docker \u5bb9\u5668</p> <p>\u5b89\u88c5 Docker Compose\uff0c\u76ee\u524d\u5b89\u88c5Docker\u7684\u4f7f\u7528\u90fd\u5df2\u7ecf\u5b89\u88c5\u4e86Docker Compose\uff0c\u800c\u4e14\u547d\u4ee4\u7531\u539f\u6765\u7684<code>docker compose</code>\u53d8\u4e3a\u73b0\u5728\u7684<code>docker compose</code>\uff0c\u5982\u679c\u662f\u8f83\u8001\u7248\u672c\u7684Docker\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b\u547d\u4ee4\u5b89\u88c5</p> <pre><code># \u53ef\u80fd\u9700\u8981\u68af\u5b50\u6216\u8005\u591a\u5c1d\u8bd5\u51e0\u6b21\nsudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker compose\nsudo chmod +x /usr/local/bin/docker compose\n</code></pre> <p>\u9a8c\u8bc1\u5b89\u88c5\u662f\u5426\u5b8c\u6210\uff08\u53ef\u80fd\u9700\u8981\u91cd\u542f\uff09\uff1a</p> <pre><code>docker compose -version\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#docker-compose_1","title":"Docker Compose\u5e38\u7528\u547d\u4ee4","text":"<pre><code>docker compose -h                           # \u67e5\u770b\u5e2e\u52a9\ndocker compose up                           # \u542f\u52a8\u6240\u6709docker compose\u670d\u52a1\ndocker compose up -d                        # \u542f\u52a8\u6240\u6709docker compose\u670d\u52a1\u5e76\u540e\u53f0\u8fd0\u884c\ndocker compose down                         # \u505c\u6b62\u5e76\u5220\u9664\u5bb9\u5668\u3001\u7f51\u7edc\u3001\u5377\u3001\u955c\u50cf\u3002\ndocker compose exec  yml\u91cc\u9762\u7684\u670d\u52a1id                 # \u8fdb\u5165\u5bb9\u5668\u5b9e\u4f8b\u5185\u90e8  docker compose exec docker compose.yml\u6587\u4ef6\u4e2d\u5199\u7684\u670d\u52a1id /bin/bash\ndocker compose ps                      # \u5c55\u793a\u5f53\u524ddocker compose\u7f16\u6392\u8fc7\u7684\u8fd0\u884c\u7684\u6240\u6709\u5bb9\u5668\ndocker compose top                     # \u5c55\u793a\u5f53\u524ddocker compose\u7f16\u6392\u8fc7\u7684\u5bb9\u5668\u8fdb\u7a0b\n\ndocker compose logs  yml\u91cc\u9762\u7684\u670d\u52a1id     # \u67e5\u770b\u5bb9\u5668\u8f93\u51fa\u65e5\u5fd7\ndocker compose config     # \u68c0\u67e5\u914d\u7f6e\ndocker compose config -q  # \u68c0\u67e5\u914d\u7f6e\uff0c\u6709\u95ee\u9898\u624d\u6709\u8f93\u51fa\ndocker compose restart   # \u91cd\u542f\u670d\u52a1\ndocker compose start     # \u542f\u52a8\u670d\u52a1\ndocker compose stop      # \u505c\u6b62\u670d\u52a1\n</code></pre> <p>\u7f16\u5199 <code>docker compose.yml</code> \u914d\u7f6e\u6587\u4ef6\uff1a</p> <pre><code>version: '3'\n\nservices:\n  nginx-service:\n    build:\n      context: ./nginx-service\n    image: nginx-service:latest\n    container_name: nginx-service\n    ports:\n      - '80:80'\n    # network_mode: host\n    restart: unless-stopped\n    volumes:\n      - ./nginx-service/log:/var/log/nginx\n\n  node-service:\n    build:\n      context: ./node-service\n    image: node-service:latest\n    container_name: node-service\n    ports:\n      - '3000:3000'\n    # network_mode: host\n    restart: unless-stopped\n</code></pre> <p>\u5bb9\u5668\u95f4\u901a\u4fe1\uff1a</p> <ul> <li>docker \u5bb9\u5668\u7684 <code>network_mode</code> \u9ed8\u8ba4\u4e3a <code>bridge</code>\uff0c\u5373\u5bb9\u5668\u6865\u63a5\u5230\u5bbf\u4e3b\u673a\uff0c\u4e0d\u540c\u5bb9\u5668\u95f4\u901a\u8fc7 IP \u6216\u8005\u670d\u52a1\u540d\u79f0\u8fdb\u884c\u901a\u4fe1\uff0c\u4f8b\u5982\uff1anginx \u670d\u52a1\u53ef\u4ee5\u901a\u8fc7\u5c06\u63a5\u53e3\u53cd\u5411\u4ee3\u7406\u5230 <code>http://node-service</code> \u6765\u8bbf\u95ee\u5bf9\u5e94\u7684\u63a5\u53e3</li> <li>\u5982\u679c\u4e0d\u540c\u5bb9\u5668\u95f4\u60f3\u8981\u901a\u8fc7 <code>localhost</code> \u8fdb\u884c\u8bbf\u95ee\uff0c\u9700\u8981\u5c06 <code>network_mode</code> \u8bbe\u4e3a <code>host</code> \u6a21\u5f0f\uff0c\u5c06\u5404\u4e2a\u5bb9\u5668\u76f4\u63a5\u7ed1\u5b9a\u5230\u5bbf\u4e3b\u673a\u7f51\u7edc\u4e0a\uff0c\u6ce8\u610f\u8fd9\u79cd\u6a21\u5f0f\u4e0b\u5bb9\u5668\u4f7f\u7528\u5bbf\u4e3b\u673a\u7684\u7aef\u53e3\uff0c\u6240\u4ee5\u4e0d\u80fd\u624b\u52a8\u6620\u5c04\u7aef\u53e3</li> </ul> <p>\u5e38\u7528\u547d\u4ee4\uff1a</p> <ul> <li> <p><code>docker compose build</code>\uff1a\u8bfb\u53d6\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 <code>docker compose.yml</code>\uff0c\u5982\u679c\u67d0\u4e2a\u670d\u52a1\u6307\u5b9a\u4e86 <code>build</code> \u5c5e\u6027\uff0c\u5219\u4f1a\u57fa\u4e8e\u5bf9\u5e94\u8def\u5f84\u4e0b\u7684 <code>Dockerfile</code> \u8fdb\u884c\u6784\u5efa</p> </li> <li> <p><code>docker compose up -d</code>\uff1a\u8bfb\u53d6\u5f53\u524d\u76ee\u5f55\u4e2d\u7684 <code>docker compose.yml</code> \u914d\u7f6e\uff0c\u6784\u5efa\u5bf9\u5e94\u955c\u50cf\u548c\u542f\u52a8\u5bb9\u5668\uff0c<code>-d</code> \u53c2\u6570\u8868\u793a\u5728\u540e\u53f0\u8fd0\u884c</p> </li> <li><code>docker compose ps</code>\uff1a\u67e5\u770b docker compose \u521b\u5efa\u7684\u670d\u52a1</li> <li><code>docker compose stop</code>\uff1a\u505c\u6b62\u5df2\u521b\u5efa\u670d\u52a1\u7684\u5bb9\u5668\uff0c\u4e0d\u4f1a\u5220\u9664\u8fd9\u4e9b\u5bb9\u5668</li> <li><code>docker compose start</code>\uff1a\u542f\u52a8\u5df2\u521b\u5efa\u670d\u52a1\u7684\u5bb9\u5668\uff0c\u4e0d\u4f1a\u91cd\u65b0\u6784\u5efa</li> <li><code>docker compose down</code>\uff1a\u505c\u6b62\u5e76\u5220\u9664\u6240\u6709\u5bb9\u5668</li> <li><code>docker compose restart</code>\uff1a\u91cd\u542f\u5df2\u521b\u5efa\u670d\u52a1\u7684\u5bb9\u5668</li> </ul>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_10","title":"\u5e38\u89c1\u5e94\u7528\u90e8\u7f72","text":""},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#node","title":"Node","text":"<pre><code>FROM ubuntu:20.04\n\nRUN apt update &amp;&amp; \\\n    apt install -y curl &amp;&amp; \\\n    curl -fsSL https://deb.nodesource.com/setup_18.x | bash - &amp;&amp; \\\n    apt install -y nodejs\n</code></pre> <p>\u5982\u679c\u76f4\u63a5\u62c9\u53d6 node \u955c\u50cf\uff0c\u4f1a\u5305\u542b\u66f4\u591a\u7684\u8f6f\u4ef6\u5305\u548c\u4f9d\u8d56\u9879\uff0c\u56e0\u6b64\u57fa\u4e8e ubuntu \u955c\u50cf\u5b89\u88c5 node \u8fd9\u79cd\u65b9\u5f0f\u53cd\u800c\u66f4\u52a0\u8282\u7701\u7a7a\u95f4</p>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#gitlab","title":"Gitlab","text":"<pre><code>version: '3'\n\nservices:\n  gitlab:\n    image: gitlab/gitlab-ce:latest\n    container_name: gitlab\n    ports:\n      - '80:80'\n      - '443:443'\n      # ssh\u7aef\u53e3\u6620\u5c04\u4e3a2222\n      - '2222:22'\n    restart: unless-stopped\n    # \u4e3b\u673a\u540d\u79f0\uff0c\u6362\u6210\u5b9e\u9645\u5bbf\u4e3b\u673aip\n    hostname: 192.168.1.9\n    environment:\n      # \u8fd9\u91cc\u4e5f\u8981\u6539ssh\u7aef\u53e3\n      GITLAB_OMNIBUS_CONFIG: |\n        gitlab_rails['gitlab_shell_ssh_port'] = 2222\n</code></pre> <p>\u67e5\u770b root \u521d\u59cb\u5bc6\u7801\uff1a</p> <pre><code>sudo docker exec -it gitlab grep 'Password:' /etc/gitlab/initial_root_password\n</code></pre> <p>\u6dfb\u52a0 SSH \u79d8\u94a5\uff0c\u521b\u5efa\u4ed3\u5e93\u540e\u5982\u4f55\u6dfb\u52a0 <code>remote</code>\uff1a</p> <pre><code>git remote add origin ssh://git@&lt;\u5bbf\u4e3b\u673aip&gt;:2222/&lt;\u7528\u6237\u540d&gt;/\u4ed3\u5e93\u540d.git\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#mysql","title":"MySQL","text":"<pre><code>mysql:\n  image: mysql:5.7\n  container_name: mysql\n  ports:\n    - '3306:3306'\n  restart: unless-stopped\n  environment:\n    - MYSQL_ROOT_PASSWORD=admin123\n  volumes:\n    # mysql\u914d\u7f6e\u6587\u4ef6\n    - ./mysql/my.cnf:/etc/mysql/my.cnf\n    # \u6570\u636e\u5e93\u6570\u636e\n    - ./mysql/data:/var/lib/mysql\n    # mysql\u65e5\u5fd7\n    - ./mysql/logs:/var/log/mysql\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#mongodb","title":"MongoDB","text":"<pre><code># docker compose.yml\nversion: '3'\n\nservices:\n  mongo:\n    image: mongo:4.4.0\n    container_name: mongo\n    ports:\n      - '27017:27017'\n    environment:\n      # \u8d26\u53f7\u5bc6\u7801\n      MONGO_INITDB_ROOT_USERNAME: mongodb\n      MONGO_INITDB_ROOT_PASSWORD: mongodb\n    volumes:\n      # \u6570\u636e\u5e93\u6570\u636e\n      - ./mongodb/data:/data/db\n      # \u6570\u636e\u5e93\u65e5\u5fd7\n      - ./mongodb/log:/var/log/mongodb\n      # \u521d\u59cb\u5316\u811a\u672c\n      - ./mongodb/init.js:/docker-entrypoint-initdb.d/init.js\n</code></pre> <pre><code>// mongodb/init.js\n// \u521b\u5efa\u6570\u636e\u5e93\ndb = db.getSiblingDB('mydb');\n\n// \u521b\u5efa\u7528\u6237\ndb.createUser({\n  user: 'mongodb',\n  pwd: 'mongodb',\n  roles: [\n    {\n      role: 'readWrite',\n      db: 'mydb',\n    },\n  ],\n});\n\n// \u521b\u5efa\u96c6\u5408\ndb.createCollection('mycollection');\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#java","title":"Java","text":"<pre><code># \u57fa\u7840\u955c\u50cf\nFROM openjdk:8\n\n# \u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55\nWORKDIR /home/java\n\n# \u62f7\u8d1djar\u5305\u5230\u5bb9\u5668\u4e2d\nCOPY ./service.jar ./\n\n# \u66b4\u9732\u7aef\u53e3\nEXPOSE 8080\n\n# \u542f\u52a8\nRUN java -jar service.jar\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_11","title":"\u963f\u91cc\u4e91\u5bb9\u5668\u955c\u50cf\u670d\u52a1","text":"<ul> <li> <p>\u521b\u5efa\u5b9e\u4f8b\uff1a\u963f\u91cc\u4e91\u5b98\u7f51\u5e76\u767b\u5f55\u8d26\u53f7\uff0c\u641c\u7d22\u5bb9\u5668\u955c\u50cf\u670d\u52a1\uff0c\u521b\u5efa\u4e2a\u4eba\u5b9e\u4f8b</p> </li> <li> <p>\u8bbe\u7f6e Resgitry \u5bc6\u7801</p> </li> <li> <p>\u521b\u5efa\u547d\u540d\u7a7a\u95f4</p> </li> <li> <p>\u521b\u5efa\u4ed3\u5e93</p> </li> <li> <p>\u955c\u50cf\u63a8\u9001</p> </li> </ul> <pre><code># \u767b\u5f55\ndocker login --username=&lt;\u963f\u91cc\u4e91\u767b\u5f55\u540d&gt; registry.cn-shenzhen.aliyuncs.com\n# \u4e3a\u672c\u5730\u955c\u50cf\u521b\u5efa\u6807\u7b7e\ndocker tag &lt;\u672c\u5730\u955c\u50cf&gt; registry.cn-shenzhen.aliyuncs.com/&lt;\u547d\u540d\u7a7a\u95f4&gt;/&lt;\u4ed3\u5e93\u540d\u79f0&gt;:&lt;\u955c\u50cf\u6807\u7b7e&gt;\n# \u63a8\u9001\ndocker push registry.cn-shenzhen.aliyuncs.com/&lt;\u547d\u540d\u7a7a\u95f4&gt;/&lt;\u4ed3\u5e93\u540d\u79f0&gt;:&lt;\u955c\u50cf\u6807\u7b7e&gt;\n</code></pre> <ul> <li>\u62c9\u53d6\u955c\u50cf</li> </ul> <pre><code>docker push registry.cn-shenzhen.aliyuncs.com/&lt;\u547d\u540d\u7a7a\u95f4&gt;/&lt;\u4ed3\u5e93\u540d\u79f0&gt;:&lt;\u955c\u50cf\u6807\u7b7e&gt;\n</code></pre>"},{"location":"blogs/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#portainer","title":"Portainer \u53ef\u89c6\u5316\u7ba1\u7406","text":"<p>\u62c9\u53d6\u793e\u533a\u7248\u955c\u50cf\uff1a</p> <pre><code>sudo docker pull portainer/protainer-ce\n</code></pre> <p>\u542f\u52a8\u5bb9\u5668\uff1a</p> <pre><code>sudo docker run -d -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest\n</code></pre> <p>\u6d4f\u89c8\u5668\u8bbf\u95ee\uff1a</p> <pre><code>http://localhost:9000\n</code></pre> <p>\u8f93\u5165\u5bc6\u7801\uff0c\u521b\u5efa <code>admin</code> \u8d26\u53f7\u5e76\u767b\u5f55\uff0c\u9009\u62e9\u5feb\u901f\u5f00\u59cb\uff0c\u9009\u62e9 <code>local</code> \u8fd9\u4e2a\u73af\u5883</p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/","title":"solidity\u57fa\u7840\u7b14\u8bb0","text":""},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#_1","title":"\u7b80\u5355\u4ecb\u7ecd","text":"<p>solidity\u662f\u4e00\u95e8\u9762\u5411\u5408\u7ea6\u7684\u3001\u4e3a\u5b9e\u73b0\u667a\u80fd\u5408\u7ea6\u800c\u521b\u5efa\u7684\u9ad8\u7ea7\u7f16\u7a0b\u8bed\u8a00\uff0c\u80fd\u5728\u4ee5\u592a\u574a\u865a\u62df\u673a\uff08EVM\uff09\u4e0a\u8fd0\u884c\u3002\u5b83\u662f\u4e00\u95e8\u9759\u6001\u8bed\u8a00\u3002\u5185\u542b\u7684\u7c7b\u578b\u9664\u4e86\u5e38\u89c1\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u6807\u51c6\u7c7b\u578b\uff0c\u8fd8\u5305\u62ecaddress\u7b49\u4ee5\u592a\u574a\u72ec\u6709\u7684\u7c7b\u578b\u3002\u4ee5\u592a\u574a\u4e0d\u4ec5\u662f\u4e00\u79cd\u52a0\u5bc6\u6570\u5b57\u8d27\u5e01\uff0c\u5b83\u66f4\u662f\u529f\u80fd\u5b8c\u5907\u7684\u667a\u80fd\u5408\u7ea6\u5e73\u53f0\uff0csolidity\u5c31\u662f\u7528\u6765\u5f00\u53d1\u4ee5\u592a\u574a\u4e0a\u7684\u667a\u80fd\u5408\u7ea6\u7684\u539f\u751f\u5f00\u53d1\u8bed\u8a00\u3002solidity\u6700\u65e9\u53d1\u5e03\u4e8e2015\u5e74\uff0c\u5b83\u662f\u7b2c\u4e00\u79cd\u56fe\u7075\u5b8c\u5907\u7684\u667a\u80fd\u5408\u7ea6\u4e13\u7528\u5f00\u53d1\u8bed\u8a00\u3002\u76ee\u524d\u9664\u4e86\u4ee5\u592a\u574a\u4e4b\u5916\uff0c\u5728\u5176\u4ed6\u533a\u5757\u94fe\u4e2d\u4e5f\u9010\u6e10\u5f00\u59cb\u652f\u6301solidity\uff0c\u4f8b\u5982hyperledger fabric\u3001tendermint\u7b49\u3002solidity\u6e90\u7801\u6587\u4ef6\u901a\u5e38\u4ee5 .sol\u4f5c\u4e3a\u6269\u5c55\u540d\u3002\u8be6\u7ec6\u6559\u7a0b\u53ef\u4ee5\u53c2\u8003\u5b98\u7f51</p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#_2","title":"\u8bed\u8a00\u7279\u6027","text":"<p>\u5b83\u7684\u8bed\u6cd5\u63a5\u8fd1\u4e8eJavascript\uff0c\u662f\u4e00\u79cd\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00\u3002\u4f46\u4f5c\u4e3a\u4e00\u79cd\u771f\u6b63\u610f\u4e49\u4e0a\u8fd0\u884c\u5728\u7f51\u7edc\u4e0a\u7684\u53bb\u4e2d\u5fc3\u5408\u7ea6\uff0c\u5b83\u53c8\u6709\u5f88\u591a\u7684\u4e0d\u540c\uff0c\u4e0b\u9762\u5217\u4e3e\u4e00\u4e9b\uff1a</p> <ul> <li>\u4ee5\u592a\u574a\u5e95\u5c42\u662f\u57fa\u4e8e\u5e10\u6237\uff0c\u800c\u975eUTXO\u7684\uff0c\u6240\u4ee5\u6709\u4e00\u4e2a\u7279\u6b8a\u7684Address\u7684\u7c7b\u578b\u3002\u7528\u4e8e\u5b9a\u4f4d\u7528\u6237\uff0c\u5b9a\u4f4d\u5408\u7ea6\uff0c\u5b9a\u4f4d\u5408\u7ea6\u7684\u4ee3\u7801\uff08\u5408\u7ea6\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a\u5e10\u6237\uff09\u3002</li> <li>\u7531\u4e8e\u8bed\u8a00\u5185\u5d4c\u6846\u67b6\u662f\u652f\u6301\u652f\u4ed8\u7684\uff0c\u6240\u4ee5\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5173\u952e\u5b57\uff0c\u5982payable\uff0c\u53ef\u4ee5\u5728\u8bed\u8a00\u5c42\u9762\u76f4\u63a5\u652f\u6301\u652f\u4ed8\uff0c\u800c\u4e14\u8d85\u7ea7\u7b80\u5355\u3002</li> <li>\u5b58\u50a8\u662f\u4f7f\u7528\u7f51\u7edc\u4e0a\u7684\u533a\u5757\u94fe\uff0c\u6570\u636e\u7684\u6bcf\u4e00\u4e2a\u72b6\u6001\u90fd\u53ef\u4ee5\u6c38\u4e45\u5b58\u50a8\uff0c\u6240\u4ee5\u9700\u8981\u786e\u5b9a\u53d8\u91cf\u4f7f\u7528\u5185\u5b58\uff0c\u8fd8\u662f\u533a\u5757\u94fe\u3002</li> <li>\u8fd0\u884c\u73af\u5883\u662f\u5728\u53bb\u4e2d\u5fc3\u5316\u7684\u7f51\u7edc\u4e0a\uff0c\u4f1a\u6bd4\u8f83\u5f3a\u8c03\u5408\u7ea6\u6216\u51fd\u6570\u6267\u884c\u7684\u8c03\u7528\u7684\u65b9\u5f0f\u3002\u56e0\u4e3a\u539f\u6765\u4e00\u4e2a\u7b80\u5355\u7684\u51fd\u6570\u8c03\u7528\u53d8\u4e3a\u4e86\u4e00\u4e2a\u7f51\u7edc\u4e0a\u7684\u8282\u70b9\u4e2d\u7684\u4ee3\u7801\u6267\u884c\uff0c\u5206\u5e03\u5f0f\u7684\u611f\u89c9\u3002</li> <li>\u6700\u540e\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u4e0d\u540c\u5219\u662f\u5b83\u7684\u5f02\u5e38\u673a\u5236\uff0c\u4e00\u65e6\u51fa\u73b0\u5f02\u5e38\uff0c\u6240\u6709\u7684\u6267\u884c\u90fd\u5c06\u4f1a\u88ab\u56de\u64a4\uff0c\u8fd9\u4e3b\u8981\u662f\u4e3a\u4e86\u4fdd\u8bc1\u5408\u7ea6\u6267\u884c\u7684\u539f\u5b50\u6027\uff0c\u4ee5\u907f\u514d\u4e2d\u95f4\u72b6\u6001\u51fa\u73b0\u7684\u6570\u636e\u4e0d\u4e00\u81f4\u3002</li> </ul>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#_3","title":"\u5f00\u53d1\u73af\u5883","text":"<p>\u76ee\u524dsolidity\u7f16\u7a0b\u6700\u597d\u7684\u65b9\u5f0f\u662f\u4f7f\u7528Remix\uff08\u5730\u5740\uff1ahttps://remix.ethereum.org/ \uff09\uff0c\u8fd9\u662f\u4e00\u4e2a\u57fa\u4e8eweb\u6d4f\u89c8\u5668\u7684IDE\uff0c\u53ef\u5728\u7ebf\u4f7f\u7528\u800c\u65e0\u9700\u5b89\u88c5\u4efb\u4f55\u4e1c\u897f\uff0c\u53ef\u4ee5\u7f16\u5199solidity\u667a\u80fd\u5408\u7ea6\uff0c\u7136\u540e\u7f16\u8bd1\u3001\u90e8\u7f72\u5e76\u8fd0\u884c\u8be5\u667a\u80fd\u5408\u7ea6\u3002 </p> <p>\u5982\u56fe\u6240\u793a\uff0c\u5c31\u662f\u5b98\u7f51\u9875\u9762\uff0c\u53ef\u4ee5\u70b9\u51fbStart coding online\u5c31\u53ef\u4ee5\u5728\u7ebf\u7f16\u5199solidity\u4ee3\u7801\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u7ebf\u8fd0\u884c\uff0c\u65e0\u9700\u5b89\u88c5\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u70b9\u51fb\u4e0b\u8f7d\u5b89\u88c5\u5305\uff0c\u5b89\u88c5\u5230\u672c\u5730\u3002</p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#_4","title":"\u57fa\u7840\u6570\u636e\u7c7b\u578b","text":""},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#1bool","title":"1\u3001\u5e03\u5c14\u7c7b\u578b\uff08bool\uff09","text":"<p>\u53d6\u503c\u4e3a\u5e38\u91cf\u503ctrue\u548cfalse\u3002</p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#2intuint","title":"2\u3001\u6574\u578b\uff08int/uint\uff09","text":"<p>\u5206\u522b\u8868\u793a\u7684\u662f\u6709\u7b26\u53f7\u6216\u65e0\u7b26\u53f7\u6574\u578b\u3002\u652f\u6301\u4eceuint8\u5230uint256\uff0c\u4ee5\u53caint8\u5230int256\uff0cuint\u548cint\u9ed8\u8ba4\u4ee3\u8868\u7684\u662fuint256\u548cint256\uff0c\u53d8\u91cf\u652f\u6301\u7684\u6b65\u957f\u4ee58\u9012\u589e\u3002</p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#3fixedufixed","title":"3\u3001\u6d6e\u70b9\u7c7b\u578b\uff08fixed/ufixed\uff09","text":"<p>\u5206\u522b\u8868\u793a\u6709\u7b26\u53f7\u6216\u65e0\u7b26\u53f7\u7684\u6d6e\u70b9\u578b\u3002</p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#4address","title":"4\u3001\u5730\u5740\uff08address\uff09","text":"<p>\u8fd9\u4e5f\u662fsolidity\u4e2d\u7279\u6709\u7684\u4e00\u79cd\u6570\u636e\u7c7b\u578b\uff0c\u5b58\u50a8\u4e00\u4e2a20\u5b57\u8282\u7684\u503c\uff08\u4ee5\u592a\u574a\u5730\u5740\u7684\u5927\u5c0f\uff09\u3002\u5730\u5740\u7c7b\u578b\u4e5f\u6709\u6210\u5458\u53d8\u91cf\uff0c\u5e76\u4f5c\u4e3a\u5408\u7ea6\u7684\u57fa\u7840\u3002\u4ee5\u4e0b\u662f\u4e09\u79cd\u5e38\u89c1\u7684\u6210\u5458\u53d8\u91cf\u3002</p> <ul> <li>balance\uff08uint256\uff09 \u67e5\u8be2\u8be5\u5730\u5740\u7684\u4ee5\u592a\u5e01\u4f59\u989d\uff0c\u4ee5Wei\u4e3a\u5355\u4f4d\u3002</li> <li>transfer\uff08uint256\uff09 \u5411\u8be5\u5730\u5740\u53d1\u9001\u6307\u5b9a\u6570\u91cf\u7684\u4ee5\u592a\u5e01\uff0c\u4ee5Wei\u4e3a\u5355\u4f4d\uff0c\u5931\u8d25\u65f6\u629b\u51fa\u5f02\u5e38\u3002</li> <li>send\uff08uint256\uff09 \u5411\u8be5\u5730\u5740\u53d1\u9001\u6307\u5b9a\u6570\u91cf\u7684\u4ee5\u592a\u5e01\uff0c\u4ee5Wei\u4e3a\u5355\u4f4d\uff0c\u5931\u8d25\u65f6\u8fd4\u56defalse\u3002</li> </ul> <pre><code>//SPDX-License-Identifier: GPL-3.0\npragma solidity &gt;=0.5.0 &lt;0.9.0;\n\ncontract Deposit{\n    address public owner;\n    constructor(){\n        //\u8fd9\u4e2a\u662f\u83b7\u53d6\u5f53\u524d\u5408\u7ea6\u521b\u5efa\u8005\u7684address\n        owner=msg.sender;\n    }\n    //\u5408\u7ea6\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a\u4f7f\u7528\u6b64\u8bed\u6cd5\u63a5\u53d7\u7684\u51fd\u6570\n    receive() external payable{\n    }\n\n    fallback() external payable{\n    }\n\n    function getBalance() public view returns(uint) {\n        //\u8fd4\u56de\u7684\u662f\u5f53\u524d\u7528\u6237address\u7684\u4f59\u989d\n        return address(this).balance;\n    }\n\n    function transferEther(address payable recipient,uint amount)public returns(bool){\n        require(owner==msg.sender,\"Transfer failed,you are not the owner!!!\");\n        if(amount&lt;=getBalance()){\n            //\u8f6c\u79fb\u4e00\u5b9a\u6570\u91cf\u7684\u4f59\u989d\n            recipient.transfer(amount);\n            return true;\n        }else{\n            return false;\n        }\n    }\n}\n</code></pre>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#5enum","title":"5\u3001\u679a\u4e3e\u7c7b\u578b\uff08\uff09enum","text":"<p>\u4e00\u79cd\u7528\u6237\u81ea\u5b9a\u4e49\u7c7b\u578b\u3002\u53ef\u4ee5\u663e\u793a\u7684\u8f6c\u6362\u4e0e\u6574\u6570\u8fdb\u884c\u8f6c\u6362\uff0c\u9ed8\u8ba4\u4ece0\u5f00\u59cb\u9012\u589e\uff0c\u4e00\u822c\u7528\u6765\u6a21\u62df\u5408\u7ea6\u7684\u72b6\u6001\u3002\u679a\u4e3e\u7c7b\u578b\u5e94\u81f3\u5c11\u6709\u4e00\u540d\u6210\u5458\u3002 <pre><code>//SPDX-License-Identifier: GPL-3.0\npragma solidity &gt;=0.5.0 &lt;0.9.0;\n\ncontract Academy{\n    Instructor public academyInstructor;\n    enum State {Open,Closed,Unknow}\n    State public academyState=State.Open;\n}\n</code></pre> \u4ee5\u4e0a\u7684\u4f8b\u5b50\u662f\u5b9a\u4e49\u4e86\u4e00\u79cd\u679a\u4e3e\u7c7b\u578bState\uff0c\u7136\u540e\u5c06\u7c7b\u578b\u4e2d\u7684Open\u72b6\u6001\u8d4b\u503c\u7ed9academyState\u3002</p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#6","title":"6\u3001\u5b57\u8282\u6570\u7ec4\u7c7b\u578b\uff08\u5b9a\u957f\u548c\u4e0d\u5b9a\u957f\uff09","text":"<p>bytes1\uff0c \u2026 \uff0cbytes32\uff0c\u5141\u8bb8\u503c\u4ee5\u6b65\u957f1\u9012\u589e\u3002byte\u9ed8\u8ba4\u8868\u793abyte1\uff0c\u8fd9\u4e9b\u662f\u5b9a\u957f\u7684\u5b57\u8282\u6570\u7ec4\u7c7b\u578b\u3002\u4e0d\u5b9a\u957f\u5b57\u8282\u6570\u7ec4\u7c7b\u578b\u58f0\u660e\u4e3abytes\u3002</p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#7","title":"7\u3001\u5b57\u7b26\u4e32","text":"<p>String\uff1a\u5b57\u7b26\u4e32\u6587\u5b57\u7528\u53cc\u5f15\u53f7\u6216\u5355\u5f15\u53f7\u5982\u201cfoo\u201d\u6216'bar'\u7f16\u5199\u3002\u7528\u4e8e\u4efb\u610f\u957f\u5ea6\u7684UTF\u6570\u636e\u3002 <pre><code>string language =\"Solidity\";\n</code></pre></p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#8","title":"8\u3001\u6570\u7ec4\uff08\u5b9a\u957f\\\u52a8\u6001\uff09","text":"<p>Solidity\u4e2d\u7684\u6570\u7ec4\u53ef\u4ee5\u5177\u6709\u7f16\u8bd1\u65f6\u56fa\u5b9a\u5927\u5c0f\uff0c\u4e5f\u53ef\u4ee5\u662f\u52a8\u6001\u7684\u3002\u5c06\u6570\u7ec4\u58f0\u660e\u4e3apublic\u5c06\u81ea\u52a8\u4e3a\u5176\u521b\u5efagetter\u65b9\u6cd5\uff08\u53ef\u4ee5\u6839\u636e\u7d22\u5f15\u83b7\u53d6\u503c\uff09\u3002 <pre><code>//SPDX-License-Identifier: GPL-3.0\npragma solidity &gt;=0.5.0 &lt;0.9.0;\n\ncontract FixedSizeArrays {\n    uint[3] public numbers=[1,3,5];\n\n    bytes1 public b1;\n    bytes2 public b2;\n    bytes3 public b3;\n    function setElement(uint index,uint value) public {\n        numbers[index]=value;\n    }\n\n    function getLength() public view returns(uint){\n        return numbers.length;\n    }\n\n    function setBytesArray() public{\n        b1='a';\n        b2='ab';\n        b3='abc';\n    }\n}\n</code></pre></p> <pre><code>//SPDX-License-Identifier: GPL-3.0\npragma solidity &gt;=0.5.0 &lt;0.9.0;\n\ncontract DynamicArrays{\n    uint[] public numbers;\n\n    function getLength() public view returns(uint){\n        return numbers.length;\n    }\n\n    function addElement(uint item) public{\n        numbers.push(item);\n    }\n\n    function getElement(uint i) public view returns(uint){\n        if(i &lt; numbers.length){\n            return numbers[i];\n        }\n\n        return 0;\n    }\n\n    function popElement() public {\n        numbers.pop();\n    }\n\n    function f() public pure{\n        uint[] memory y=new uint[](3);\n        y[0]=1;\n        y[1]=2;\n        y[2]=3;\n    }\n}\n</code></pre>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#9struct","title":"9\u3001\u7ed3\u6784\u4f53\uff08struct\uff09","text":"<p>Structs\u662f\u81ea\u5b9a\u4e49\u7c7b\u578b\uff0c\u53ef\u4ee5\u5bf9\u591a\u4e2a\u53d8\u91cf\u8fdb\u884c\u5206\u7ec4\u3002\u6ce8\u610f\uff1a\u7ed3\u6784\u53ea\u80fd\u670916\u4e2a\u6210\u5458\uff0c\u8d85\u8fc7\u8be5\u6210\u5458\u53ef\u80fd\u4f1a\u53d1\u751f\u4ee5\u4e0b\u9519\u8bef\uff1aStack too Deep \u5806\u6808\u592a\u6df1\u3002 \u7ed3\u6784\u5141\u8bb8\u521b\u5efa\u5177\u6709\u591a\u4e2a\u5c5e\u6027\u7684\u66f4\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b\u3002 <pre><code>//SPDX-License-Identifier: GPL-3.0\npragma solidity &gt;=0.5.0 &lt;0.9.0;\n\nstruct Instructor{\n    uint age;\n    string name;\n    address addr;\n}\n\ncontract Academy{\n    Instructor public academyInstructor;\n\n    enum State {Open,Closed,Unknow}\n    State public academyState=State.Open;\n\n    constructor(uint _age,string memory _name){\n        academyInstructor.age=_age;\n        academyInstructor.name=_name;\n        academyInstructor.addr=msg.sender;\n    }\n\n    function changeInstructor(uint _age,string memory _name,address _addr) public{\n       if(academyState==State.Open){\n            Instructor memory myInstructor=Instructor({\n            age:_age,\n            name:_name,\n            addr:_addr\n        });\n        academyInstructor=myInstructor;\n       }\n    }\n\n}\ncontract School{\n    Instructor public schoolInstructor;\n}\n</code></pre></p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#10mapping","title":"10\u3001\u6620\u5c04\uff08mapping\uff09","text":"<p>\u6620\u5c04\u53ef\u4ee5\u770b\u4f5c\u662f\u54c8\u5e0c\u8868\uff0c\u5b83\u4eec\u88ab\u865a\u62df\u5730\u521d\u59cb\u5316\uff0c\u4f7f\u5f97\u6bcf\u4e2a\u53ef\u80fd\u7684\u952e\u90fd\u5b58\u5728\u5e76\u88ab\u6620\u5c04\u5230\u5176\u5b57\u8282\u8868\u793a\u5168\u4e3a\u96f6\u7684\u503c\uff1a\u7c7b\u578b\u7684\u9ed8\u8ba4\u503c\u3002 <pre><code>//SPDX-License-Identifier: GPL-3.0\npragma solidity &gt;=0.5.0 &lt;0.9.0;\n\ncontract Auction{\n    mapping(address=&gt;uint) public bids;\n\n    function bid() payable public {\n        bids[msg.sender]=msg.value;\n    }\n}\n</code></pre></p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#_5","title":"\u6570\u636e\u4f4d\u7f6e","text":"<p>\u6240\u6709\u7684\u590d\u6742\u7c7b\u578b\uff08\u6570\u7ec4\u3001\u7ed3\u6784\u3001\u6620\u5c04\uff09\uff0c\u90fd\u6709\u4e00\u4e2a\u989d\u5916\u5c5e\u6027\u5c31\u662f\u6570\u636e\u4f4d\u7f6e\uff0c\u7528\u6765\u8bf4\u660e\u6570\u636e\u662f\u5b58\u50a8\u5728\u5185\u5b58memory\u8fd8\u662f\u5b58\u50a8storage\u4e2d\u3002\u6839\u636e\u4e0a\u4e0b\u6587\u4e0d\u540c\uff0c\u5927\u591a\u6570\u65f6\u5019\u6570\u636e\u6709\u9ed8\u8ba4\u7684\u4f4d\u7f6e\uff0c\u4f46\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5728\u7c7b\u578b\u540d\u540e\u52a0\u4e0a\u5173\u952e\u5b57memory\u6216storage\u6765\u8fdb\u884c\u4fee\u6539\u3002\u51fd\u6570\u53c2\u6570\uff08\u5305\u62ec\u8fd4\u56de\u7684\u53c2\u6570\uff09\u7684\u6570\u636e\u4f4d\u7f6e\u9ed8\u8ba4\u662fmemory\uff0c\u5c40\u90e8\u53d8\u91cf\u9ed8\u8ba4\u662fstorage\uff0c\u72b6\u6001\u53d8\u91cf\u9ed8\u8ba4\u662fstorage\u3002</p>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#_6","title":"\u51fd\u6570","text":""},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#1","title":"1\u3001\u51fd\u6570\u53ef\u89c1\u6027/\u8bbf\u95ee\u6743\u9650","text":"<ul> <li> <p>public\uff1apublic\u51fd\u6570\u662f\u5408\u7ea6\u63a5\u53e3\u7684\u4e00\u90e8\u5206\uff0c\u53ef\u4ee5\u5728\u5185\u90e8\u6216\u901a\u8fc7\u6d88\u606f\u8c03\u7528\u3002\u5bf9\u4e8epublic\u72b6\u6001\u53d8\u91cf\uff0c\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2agetter\u51fd\u6570</p> </li> <li> <p>private\uff1aprivate\u51fd\u6570\u548c\u72b6\u6001\u53d8\u91cf\u91d1\u5728\u5f53\u524d\u5b9a\u4e49\u4ed6\u4eec\u7684\u5408\u7ea6\u4e2d\u4f7f\u7528\uff0c\u5e76\u4e14\u4e0d\u80fd\u88ab\u6d3e\u751f\u5408\u7ea6\u4f7f\u7528</p> </li> <li> <p>external\uff1aexternal\u51fd\u6570\u662f\u5408\u7ea6\u63a5\u53e3\u7684\u4e00\u90e8\u5206\uff0c\u53ef\u4ee5\u4ece\u5176\u4ed6\u5408\u7ea6\u548c\u4ea4\u6613\u4e2d\u8c03\u7528\u3002\u4e00\u4e2a\u5916\u90e8\u51fd\u6570f\u4e0d\u80fd\u4ece\u5185\u90e8\u8c03\u7528\uff08\u5373f\u4e0d\u8d77\u4f5c\u7528\uff0c\u4f46this.f()\u53ef\u4ee5\uff09\u3002\u5f53\u6536\u5230\u5927\u91cf\u6570\u636e\u7684\u65f6\u5019\uff0c\u5916\u90e8\u51fd\u6570\u6709\u65f6\u5019\u4f1a\u66f4\u6709\u6548\u7387</p> </li> <li> <p>internal\uff1ainternal\u51fd\u6570\u548c\u72b6\u6001\u53d8\u91cf\u53ea\u80fd\u662f\u5185\u90e8\u8bbf\u95ee\uff08\u5373\u4ece\u5f53\u524d\u5408\u7ea6\u5185\u90e8\u6216\u4ece\u5b83\u6d3e\u751f\u7684\u5408\u7ea6\u8bbf\u95ee\uff09\uff0c\u4e0d\u80fd\u7528this\u8c03\u7528\u3002</p> </li> </ul>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#_7","title":"\u51fd\u6570\u72b6\u6001\u53ef\u53d8\u6027","text":"<ul> <li>view\uff1a\u4e0d\u5141\u8bb8\u4fee\u6539\u72b6\u6001</li> <li>pure\uff1a\u7eaf\u51fd\u6570\uff0c\u4e0d\u5141\u8bb8\u8bbf\u95ee\u6216\u4fee\u6539\u72b6\u6001</li> <li>payable\uff1a\u5141\u8bb8\u4ece\u6d88\u606f\u8c03\u7528\u4e2d\u63a5\u6536\u4ee5\u592a\u5e01</li> <li>constant\uff1a\u4e0eview\u76f8\u540c\uff0c\u4e00\u822c\u53ea\u4fee\u9970\u72b6\u6001\u53d8\u91cf\uff0c\u4e0d\u5141\u8bb8\u8d4b\u503c\uff08\u9664\u521d\u59cb\u5316\u4ee5\u5916)</li> </ul>"},{"location":"blogs/solidity%E5%9F%BA%E7%A1%80/#_8","title":"\u62cd\u5356\u5408\u7ea6\u7684\u4f8b\u5b50","text":"<pre><code>//SPDX-License-Identifier: GPL-3.0\npragma solidity &gt;=0.5.0 &lt;0.9.0;\n\n\ncontract AuctionCreator{\n    Auction[] public auctions;\n\n    function createAuction() public{\n        Auction newAuction = new Auction(msg.sender);\n        auctions.push(newAuction);\n    }\n}\n\ncontract Auction{\n\n    address payable public owner;\n\n    uint public startBlock;\n    uint public endBlock;\n\n    string public ipfsHash;\n\n    enum State {Started,Running,Ended,Canceled}\n\n    State public auctionState;\n\n    uint public highestBindingBid;\n    address payable public highestBidder;\n\n    mapping(address=&gt;uint) public bids;\n\n    uint bidIncrement;\n\n    constructor(address eoa){\n        owner = payable(eoa);\n        auctionState = State.Running;\n\n        startBlock = block.number;\n        endBlock = startBlock+40320;\n\n        ipfsHash = \"\";\n        bidIncrement = 100; \n    }\n\n    modifier notOwner(){\n        require(msg.sender != owner);\n        _;\n    }\n    modifier afterStart(){\n        require(block.number&gt;=startBlock);\n        _;\n    }\n\n    modifier beforeEnd(){\n        require(block.number&lt;=endBlock);\n        _;\n    }\n\n    modifier onlyOwner(){\n        require(msg.sender==owner);\n        _;\n    }\n\n    function cancelAuction() public onlyOwner{\n        auctionState=State.Canceled;\n\n    }\n\n    function min(uint a,uint b)pure internal returns(uint){\n        if(a&lt;=b){\n            return a;\n        }else {\n            return b;\n        }\n    }\n\n    function placeBid() public payable notOwner afterStart beforeEnd {\n        require(auctionState==State.Running);\n        require(msg.value&gt;=100);\n        uint currentBid = bids[msg.sender] + msg.value;\n        require(currentBid &gt; highestBindingBid); \n        bids[msg.sender]=currentBid;\n        if(currentBid&lt;=bids[highestBidder]){\n            highestBindingBid=min(currentBid+bidIncrement,bids[highestBidder]);\n        }else{\n            highestBindingBid=min(currentBid,bids[highestBidder]+bidIncrement);\n            highestBidder=payable(msg.sender);\n        }\n    }\n\n    function finalizeAuction() public{\n        require(auctionState==State.Canceled || block.number&gt;endBlock);\n        require(msg.sender==owner||bids[msg.sender]&gt;0);\n        address payable recipient;\n        uint value;\n        if(auctionState==State.Canceled){\n            recipient=payable(msg.sender);\n            value=bids[msg.sender];\n        }else{\n            if(msg.sender==owner){\n                recipient=owner;\n                value=highestBindingBid;\n            }else{\n                if(msg.sender==highestBidder){\n                    recipient=highestBidder;\n                    value = bids[highestBidder]-highestBindingBid;\n                }else{\n                    recipient=payable(msg.sender);\n                    value=bids[msg.sender];\n                }\n            }\n        }\n        bids[recipient]=0;\n        recipient.transfer(value);\n    }\n}\n</code></pre>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/","title":"Vue3\u5feb\u901f\u4e0a\u624b","text":""},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#1vue3","title":"1.Vue3\u7b80\u4ecb","text":"<ul> <li>2020\u5e749\u670818\u65e5\uff0cVue.js\u53d1\u5e033.0\u7248\u672c\uff0c\u4ee3\u53f7\uff1aOne Piece\uff08\u6d77\u8d3c\u738b\uff09</li> <li>\u8017\u65f62\u5e74\u591a\u30012600+\u6b21\u63d0\u4ea4\u300130+\u4e2aRFC\u3001600+\u6b21PR\u300199\u4f4d\u8d21\u732e\u8005 </li> <li>github\u4e0a\u7684tags\u5730\u5740\uff1ahttps://github.com/vuejs/vue-next/releases/tag/v3.0.0</li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#2vue3","title":"2.Vue3\u5e26\u6765\u4e86\u4ec0\u4e48","text":""},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#1","title":"1.\u6027\u80fd\u7684\u63d0\u5347","text":"<ul> <li> <p>\u6253\u5305\u5927\u5c0f\u51cf\u5c1141%</p> </li> <li> <p>\u521d\u6b21\u6e32\u67d3\u5feb55%, \u66f4\u65b0\u6e32\u67d3\u5feb133%</p> </li> <li> <p>\u5185\u5b58\u51cf\u5c1154%</p> </li> </ul> <p>......</p>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#2","title":"2.\u6e90\u7801\u7684\u5347\u7ea7","text":"<ul> <li> <p>\u4f7f\u7528Proxy\u4ee3\u66ffdefineProperty\u5b9e\u73b0\u54cd\u5e94\u5f0f</p> </li> <li> <p>\u91cd\u5199\u865a\u62dfDOM\u7684\u5b9e\u73b0\u548cTree-Shaking</p> </li> </ul> <p>......</p>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#3typescript","title":"3.\u62e5\u62b1TypeScript","text":"<ul> <li>Vue3\u53ef\u4ee5\u66f4\u597d\u7684\u652f\u6301TypeScript</li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#4","title":"4.\u65b0\u7684\u7279\u6027","text":"<ol> <li> <p>Composition API\uff08\u7ec4\u5408API\uff09</p> </li> <li> <p>setup\u914d\u7f6e</p> </li> <li>ref\u4e0ereactive</li> <li>watch\u4e0ewatchEffect</li> <li>provide\u4e0einject</li> <li>......</li> <li>\u65b0\u7684\u5185\u7f6e\u7ec4\u4ef6</li> <li>Fragment </li> <li>Teleport</li> <li>Suspense</li> <li> <p>\u5176\u4ed6\u6539\u53d8</p> </li> <li> <p>\u65b0\u7684\u751f\u547d\u5468\u671f\u94a9\u5b50</p> </li> <li>data \u9009\u9879\u5e94\u59cb\u7ec8\u88ab\u58f0\u660e\u4e3a\u4e00\u4e2a\u51fd\u6570</li> <li>\u79fb\u9664keyCode\u652f\u6301\u4f5c\u4e3a v-on \u7684\u4fee\u9970\u7b26</li> <li>......</li> </ol>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#vue30","title":"\u4e00\u3001\u521b\u5efaVue3.0\u5de5\u7a0b","text":""},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#1-vue-cli","title":"1.\u4f7f\u7528 vue-cli \u521b\u5efa","text":"<p>\u5b98\u65b9\u6587\u6863\uff1ahttps://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</p> <pre><code>## \u67e5\u770b@vue/cli\u7248\u672c\uff0c\u786e\u4fdd@vue/cli\u7248\u672c\u57284.5.0\u4ee5\u4e0a\nvue --version\n## \u5b89\u88c5\u6216\u8005\u5347\u7ea7\u4f60\u7684@vue/cli\nnpm install -g @vue/cli\n## \u521b\u5efa\nvue create vue_test\n## \u542f\u52a8\ncd vue_test\nnpm run serve\n</code></pre>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#2-vite","title":"2.\u4f7f\u7528 vite \u521b\u5efa","text":"<p>\u5b98\u65b9\u6587\u6863\uff1ahttps://v3.cn.vuejs.org/guide/installation.html#vite</p> <p>vite\u5b98\u7f51\uff1ahttps://vitejs.cn</p> <ul> <li>\u4ec0\u4e48\u662fvite\uff1f\u2014\u2014 \u65b0\u4e00\u4ee3\u524d\u7aef\u6784\u5efa\u5de5\u5177\u3002</li> <li>\u4f18\u52bf\u5982\u4e0b\uff1a</li> <li>\u5f00\u53d1\u73af\u5883\u4e2d\uff0c\u65e0\u9700\u6253\u5305\u64cd\u4f5c\uff0c\u53ef\u5feb\u901f\u7684\u51b7\u542f\u52a8\u3002</li> <li>\u8f7b\u91cf\u5feb\u901f\u7684\u70ed\u91cd\u8f7d\uff08HMR\uff09\u3002</li> <li>\u771f\u6b63\u7684\u6309\u9700\u7f16\u8bd1\uff0c\u4e0d\u518d\u7b49\u5f85\u6574\u4e2a\u5e94\u7528\u7f16\u8bd1\u5b8c\u6210\u3002</li> <li>\u4f20\u7edf\u6784\u5efa \u4e0e vite\u6784\u5efa\u5bf9\u6bd4\u56fe</li> </ul> <p></p> <pre><code>## \u521b\u5efa\u5de5\u7a0b\nnpm init vite-app &lt;project-name&gt;\n## \u8fdb\u5165\u5de5\u7a0b\u76ee\u5f55\ncd &lt;project-name&gt;\n## \u5b89\u88c5\u4f9d\u8d56\nnpm install\n## \u8fd0\u884c\nnpm run dev\n</code></pre>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#composition-api","title":"\u4e8c\u3001\u5e38\u7528 Composition API","text":"<p>\u5b98\u65b9\u6587\u6863: https://v3.cn.vuejs.org/guide/composition-api-introduction.html</p>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#1setup","title":"1.\u62c9\u5f00\u5e8f\u5e55\u7684setup","text":"<ol> <li>\u7406\u89e3\uff1aVue3.0\u4e2d\u4e00\u4e2a\u65b0\u7684\u914d\u7f6e\u9879\uff0c\u503c\u4e3a\u4e00\u4e2a\u51fd\u6570\u3002</li> <li>setup\u662f\u6240\u6709Composition API\uff08\u7ec4\u5408API\uff09\u201c \u8868\u6f14\u7684\u821e\u53f0 \u201d\u3002</li> <li>\u7ec4\u4ef6\u4e2d\u6240\u7528\u5230\u7684\uff1a\u6570\u636e\u3001\u65b9\u6cd5\u7b49\u7b49\uff0c\u5747\u8981\u914d\u7f6e\u5728setup\u4e2d\u3002</li> <li>setup\u51fd\u6570\u7684\u4e24\u79cd\u8fd4\u56de\u503c\uff1a</li> <li>\u82e5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5219\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u3001\u65b9\u6cd5, \u5728\u6a21\u677f\u4e2d\u5747\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002\uff08\u91cd\u70b9\u5173\u6ce8\uff01\uff09</li> <li>\u82e5\u8fd4\u56de\u4e00\u4e2a\u6e32\u67d3\u51fd\u6570\uff1a\u5219\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6e32\u67d3\u5185\u5bb9\u3002\uff08\u4e86\u89e3\uff09</li> <li>\u6ce8\u610f\u70b9\uff1a</li> <li>\u5c3d\u91cf\u4e0d\u8981\u4e0eVue2.x\u914d\u7f6e\u6df7\u7528<ul> <li>Vue2.x\u914d\u7f6e\uff08data\u3001methos\u3001computed...\uff09\u4e2d\u53ef\u4ee5\u8bbf\u95ee\u5230setup\u4e2d\u7684\u5c5e\u6027\u3001\u65b9\u6cd5\u3002</li> <li>\u4f46\u5728setup\u4e2d\u4e0d\u80fd\u8bbf\u95ee\u5230Vue2.x\u914d\u7f6e\uff08data\u3001methos\u3001computed...\uff09\u3002</li> <li>\u5982\u679c\u6709\u91cd\u540d, setup\u4f18\u5148\u3002</li> </ul> </li> <li>setup\u4e0d\u80fd\u662f\u4e00\u4e2aasync\u51fd\u6570\uff0c\u56e0\u4e3a\u8fd4\u56de\u503c\u4e0d\u518d\u662freturn\u7684\u5bf9\u8c61, \u800c\u662fpromise, \u6a21\u677f\u770b\u4e0d\u5230return\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u3002\uff08\u540e\u671f\u4e5f\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2aPromise\u5b9e\u4f8b\uff0c\u4f46\u9700\u8981Suspense\u548c\u5f02\u6b65\u7ec4\u4ef6\u7684\u914d\u5408\uff09</li> </ol>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#2ref","title":"2.ref\u51fd\u6570","text":"<ul> <li>\u4f5c\u7528: \u5b9a\u4e49\u4e00\u4e2a\u54cd\u5e94\u5f0f\u7684\u6570\u636e</li> <li>\u8bed\u6cd5: <code>const xxx = ref(initValue)</code> </li> <li>\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5f15\u7528\u5bf9\u8c61\uff08reference\u5bf9\u8c61\uff0c\u7b80\u79f0ref\u5bf9\u8c61\uff09\u3002</li> <li>JS\u4e2d\u64cd\u4f5c\u6570\u636e\uff1a <code>xxx.value</code></li> <li>\u6a21\u677f\u4e2d\u8bfb\u53d6\u6570\u636e: \u4e0d\u9700\u8981.value\uff0c\u76f4\u63a5\uff1a<code>&lt;div&gt;{{xxx}}&lt;/div&gt;</code></li> <li>\u5907\u6ce8\uff1a</li> <li>\u63a5\u6536\u7684\u6570\u636e\u53ef\u4ee5\u662f\uff1a\u57fa\u672c\u7c7b\u578b\u3001\u4e5f\u53ef\u4ee5\u662f\u5bf9\u8c61\u7c7b\u578b\u3002</li> <li>\u57fa\u672c\u7c7b\u578b\u7684\u6570\u636e\uff1a\u54cd\u5e94\u5f0f\u4f9d\u7136\u662f\u9760<code>Object.defineProperty()</code>\u7684<code>get</code>\u4e0e<code>set</code>\u5b8c\u6210\u7684\u3002</li> <li>\u5bf9\u8c61\u7c7b\u578b\u7684\u6570\u636e\uff1a\u5185\u90e8 \u201c \u6c42\u52a9 \u201d \u4e86Vue3.0\u4e2d\u7684\u4e00\u4e2a\u65b0\u51fd\u6570\u2014\u2014 <code>reactive</code>\u51fd\u6570\u3002</li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#3reactive","title":"3.reactive\u51fd\u6570","text":"<ul> <li>\u4f5c\u7528: \u5b9a\u4e49\u4e00\u4e2a\u5bf9\u8c61\u7c7b\u578b\u7684\u54cd\u5e94\u5f0f\u6570\u636e\uff08\u57fa\u672c\u7c7b\u578b\u4e0d\u8981\u7528\u5b83\uff0c\u8981\u7528<code>ref</code>\u51fd\u6570\uff09</li> <li>\u8bed\u6cd5\uff1a<code>const \u4ee3\u7406\u5bf9\u8c61= reactive(\u6e90\u5bf9\u8c61)</code>\u63a5\u6536\u4e00\u4e2a\u5bf9\u8c61\uff08\u6216\u6570\u7ec4\uff09\uff0c\u8fd4\u56de\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61\uff08Proxy\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u7b80\u79f0proxy\u5bf9\u8c61\uff09</li> <li>reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u662f\u201c\u6df1\u5c42\u6b21\u7684\u201d\u3002</li> <li>\u5185\u90e8\u57fa\u4e8e ES6 \u7684 Proxy \u5b9e\u73b0\uff0c\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u64cd\u4f5c\u6e90\u5bf9\u8c61\u5185\u90e8\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u3002</li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#4vue30","title":"4.Vue3.0\u4e2d\u7684\u54cd\u5e94\u5f0f\u539f\u7406","text":""},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#vue2x","title":"vue2.x\u7684\u54cd\u5e94\u5f0f","text":"<ul> <li>\u5b9e\u73b0\u539f\u7406\uff1a</li> <li> <p>\u5bf9\u8c61\u7c7b\u578b\uff1a\u901a\u8fc7<code>Object.defineProperty()</code>\u5bf9\u5c5e\u6027\u7684\u8bfb\u53d6\u3001\u4fee\u6539\u8fdb\u884c\u62e6\u622a\uff08\u6570\u636e\u52ab\u6301\uff09\u3002</p> </li> <li> <p>\u6570\u7ec4\u7c7b\u578b\uff1a\u901a\u8fc7\u91cd\u5199\u66f4\u65b0\u6570\u7ec4\u7684\u4e00\u7cfb\u5217\u65b9\u6cd5\u6765\u5b9e\u73b0\u62e6\u622a\u3002\uff08\u5bf9\u6570\u7ec4\u7684\u53d8\u66f4\u65b9\u6cd5\u8fdb\u884c\u4e86\u5305\u88f9\uff09\u3002</p> <pre><code>Object.defineProperty(data, 'count', {\n    get () {}, \n    set () {}\n})\n</code></pre> </li> <li> <p>\u5b58\u5728\u95ee\u9898\uff1a</p> </li> <li>\u65b0\u589e\u5c5e\u6027\u3001\u5220\u9664\u5c5e\u6027, \u754c\u9762\u4e0d\u4f1a\u66f4\u65b0\u3002</li> <li>\u76f4\u63a5\u901a\u8fc7\u4e0b\u6807\u4fee\u6539\u6570\u7ec4, \u754c\u9762\u4e0d\u4f1a\u81ea\u52a8\u66f4\u65b0\u3002</li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#vue30_1","title":"Vue3.0\u7684\u54cd\u5e94\u5f0f","text":"<ul> <li>\u5b9e\u73b0\u539f\u7406: </li> <li>\u901a\u8fc7Proxy\uff08\u4ee3\u7406\uff09:  \u62e6\u622a\u5bf9\u8c61\u4e2d\u4efb\u610f\u5c5e\u6027\u7684\u53d8\u5316, \u5305\u62ec\uff1a\u5c5e\u6027\u503c\u7684\u8bfb\u5199\u3001\u5c5e\u6027\u7684\u6dfb\u52a0\u3001\u5c5e\u6027\u7684\u5220\u9664\u7b49\u3002</li> <li>\u901a\u8fc7Reflect\uff08\u53cd\u5c04\uff09:  \u5bf9\u6e90\u5bf9\u8c61\u7684\u5c5e\u6027\u8fdb\u884c\u64cd\u4f5c\u3002</li> <li> <p>MDN\u6587\u6863\u4e2d\u63cf\u8ff0\u7684Proxy\u4e0eReflect\uff1a</p> <ul> <li> <p>Proxy\uff1ahttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</p> </li> <li> <p>Reflect\uff1ahttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</p> </li> </ul> <pre><code>new Proxy(data, {\n  // \u62e6\u622a\u8bfb\u53d6\u5c5e\u6027\u503c\n    get (target, prop) {\n      return Reflect.get(target, prop)\n    },\n    // \u62e6\u622a\u8bbe\u7f6e\u5c5e\u6027\u503c\u6216\u6dfb\u52a0\u65b0\u5c5e\u6027\n    set (target, prop, value) {\n      return Reflect.set(target, prop, value)\n    },\n    // \u62e6\u622a\u5220\u9664\u5c5e\u6027\n    deleteProperty (target, prop) {\n      return Reflect.deleteProperty(target, prop)\n    }\n})\n\nproxy.name = 'tom'   \n</code></pre> </li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#5reactiveref","title":"5.reactive\u5bf9\u6bd4ref","text":"<ul> <li>\u4ece\u5b9a\u4e49\u6570\u636e\u89d2\u5ea6\u5bf9\u6bd4\uff1a</li> <li>ref\u7528\u6765\u5b9a\u4e49\uff1a\u57fa\u672c\u7c7b\u578b\u6570\u636e\u3002</li> <li>reactive\u7528\u6765\u5b9a\u4e49\uff1a\u5bf9\u8c61\uff08\u6216\u6570\u7ec4\uff09\u7c7b\u578b\u6570\u636e\u3002</li> <li>\u5907\u6ce8\uff1aref\u4e5f\u53ef\u4ee5\u7528\u6765\u5b9a\u4e49\u5bf9\u8c61\uff08\u6216\u6570\u7ec4\uff09\u7c7b\u578b\u6570\u636e, \u5b83\u5185\u90e8\u4f1a\u81ea\u52a8\u901a\u8fc7<code>reactive</code>\u8f6c\u4e3a\u4ee3\u7406\u5bf9\u8c61\u3002</li> <li>\u4ece\u539f\u7406\u89d2\u5ea6\u5bf9\u6bd4\uff1a</li> <li>ref\u901a\u8fc7<code>Object.defineProperty()</code>\u7684<code>get</code>\u4e0e<code>set</code>\u6765\u5b9e\u73b0\u54cd\u5e94\u5f0f\uff08\u6570\u636e\u52ab\u6301\uff09\u3002</li> <li>reactive\u901a\u8fc7\u4f7f\u7528Proxy\u6765\u5b9e\u73b0\u54cd\u5e94\u5f0f\uff08\u6570\u636e\u52ab\u6301\uff09, \u5e76\u901a\u8fc7Reflect\u64cd\u4f5c\u6e90\u5bf9\u8c61\u5185\u90e8\u7684\u6570\u636e\u3002</li> <li>\u4ece\u4f7f\u7528\u89d2\u5ea6\u5bf9\u6bd4\uff1a</li> <li>ref\u5b9a\u4e49\u7684\u6570\u636e\uff1a\u64cd\u4f5c\u6570\u636e\u9700\u8981<code>.value</code>\uff0c\u8bfb\u53d6\u6570\u636e\u65f6\u6a21\u677f\u4e2d\u76f4\u63a5\u8bfb\u53d6\u4e0d\u9700\u8981<code>.value</code>\u3002</li> <li>reactive\u5b9a\u4e49\u7684\u6570\u636e\uff1a\u64cd\u4f5c\u6570\u636e\u4e0e\u8bfb\u53d6\u6570\u636e\uff1a\u5747\u4e0d\u9700\u8981<code>.value</code>\u3002</li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#6setup","title":"6.setup\u7684\u4e24\u4e2a\u6ce8\u610f\u70b9","text":"<ul> <li>setup\u6267\u884c\u7684\u65f6\u673a</li> <li> <p>\u5728beforeCreate\u4e4b\u524d\u6267\u884c\u4e00\u6b21\uff0cthis\u662fundefined\u3002</p> </li> <li> <p>setup\u7684\u53c2\u6570</p> </li> <li>props\uff1a\u503c\u4e3a\u5bf9\u8c61\uff0c\u5305\u542b\uff1a\u7ec4\u4ef6\u5916\u90e8\u4f20\u9012\u8fc7\u6765\uff0c\u4e14\u7ec4\u4ef6\u5185\u90e8\u58f0\u660e\u63a5\u6536\u4e86\u7684\u5c5e\u6027\u3002</li> <li>context\uff1a\u4e0a\u4e0b\u6587\u5bf9\u8c61<ul> <li>attrs: \u503c\u4e3a\u5bf9\u8c61\uff0c\u5305\u542b\uff1a\u7ec4\u4ef6\u5916\u90e8\u4f20\u9012\u8fc7\u6765\uff0c\u4f46\u6ca1\u6709\u5728props\u914d\u7f6e\u4e2d\u58f0\u660e\u7684\u5c5e\u6027, \u76f8\u5f53\u4e8e <code>this.$attrs</code>\u3002</li> <li>slots: \u6536\u5230\u7684\u63d2\u69fd\u5185\u5bb9, \u76f8\u5f53\u4e8e <code>this.$slots</code>\u3002</li> <li>emit: \u5206\u53d1\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u51fd\u6570, \u76f8\u5f53\u4e8e <code>this.$emit</code>\u3002</li> </ul> </li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#7","title":"7.\u8ba1\u7b97\u5c5e\u6027\u4e0e\u76d1\u89c6","text":""},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#1computed","title":"1.computed\u51fd\u6570","text":"<ul> <li> <p>\u4e0eVue2.x\u4e2dcomputed\u914d\u7f6e\u529f\u80fd\u4e00\u81f4</p> </li> <li> <p>\u5199\u6cd5</p> </li> </ul> <pre><code>import {computed} from 'vue'\n\nsetup(){\n    ...\n  //\u8ba1\u7b97\u5c5e\u6027\u2014\u2014\u7b80\u5199\n    let fullName = computed(()=&gt;{\n        return person.firstName + '-' + person.lastName\n    })\n    //\u8ba1\u7b97\u5c5e\u6027\u2014\u2014\u5b8c\u6574\n    let fullName = computed({\n        get(){\n            return person.firstName + '-' + person.lastName\n        },\n        set(value){\n            const nameArr = value.split('-')\n            person.firstName = nameArr[0]\n            person.lastName = nameArr[1]\n        }\n    })\n}\n</code></pre>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#2watch","title":"2.watch\u51fd\u6570","text":"<ul> <li> <p>\u4e0eVue2.x\u4e2dwatch\u914d\u7f6e\u529f\u80fd\u4e00\u81f4</p> </li> <li> <p>\u4e24\u4e2a\u5c0f\u201c\u5751\u201d\uff1a</p> </li> <li> <p>\u76d1\u89c6reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u65f6\uff1aoldValue\u65e0\u6cd5\u6b63\u786e\u83b7\u53d6\u3001\u5f3a\u5236\u5f00\u542f\u4e86\u6df1\u5ea6\u76d1\u89c6\uff08deep\u914d\u7f6e\u5931\u6548\uff09\u3002</p> </li> <li>\u76d1\u89c6reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u4e2d\u67d0\u4e2a\u5c5e\u6027\u65f6\uff1adeep\u914d\u7f6e\u6709\u6548\u3002</li> </ul> <pre><code>//\u60c5\u51b5\u4e00\uff1a\u76d1\u89c6ref\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\nwatch(sum,(newValue,oldValue)=&gt;{\n  console.log('sum\u53d8\u5316\u4e86',newValue,oldValue)\n},{immediate:true})\n\n//\u60c5\u51b5\u4e8c\uff1a\u76d1\u89c6\u591a\u4e2aref\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\nwatch([sum,msg],(newValue,oldValue)=&gt;{\n  console.log('sum\u6216msg\u53d8\u5316\u4e86',newValue,oldValue)\n}) \n\n/* \u60c5\u51b5\u4e09\uff1a\u76d1\u89c6reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\n          \u82e5watch\u76d1\u89c6\u7684\u662freactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\uff0c\u5219\u65e0\u6cd5\u6b63\u786e\u83b7\u5f97oldValue\uff01\uff01\n          \u82e5watch\u76d1\u89c6\u7684\u662freactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\uff0c\u5219\u5f3a\u5236\u5f00\u542f\u4e86\u6df1\u5ea6\u76d1\u89c6 \n*/\nwatch(person,(newValue,oldValue)=&gt;{\n  console.log('person\u53d8\u5316\u4e86',newValue,oldValue)\n},{immediate:true,deep:false}) //\u6b64\u5904\u7684deep\u914d\u7f6e\u4e0d\u518d\u594f\u6548\n\n//\u60c5\u51b5\u56db\uff1a\u76d1\u89c6reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\nwatch(()=&gt;person.job,(newValue,oldValue)=&gt;{\n  console.log('person\u7684job\u53d8\u5316\u4e86',newValue,oldValue)\n},{immediate:true,deep:true}) \n\n//\u60c5\u51b5\u4e94\uff1a\u76d1\u89c6reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u4e2d\u7684\u67d0\u4e9b\u5c5e\u6027\nwatch([()=&gt;person.job,()=&gt;person.name],(newValue,oldValue)=&gt;{\n  console.log('person\u7684job\u53d8\u5316\u4e86',newValue,oldValue)\n},{immediate:true,deep:true})\n\n//\u7279\u6b8a\u60c5\u51b5\nwatch(()=&gt;person.job,(newValue,oldValue)=&gt;{\n    console.log('person\u7684job\u53d8\u5316\u4e86',newValue,oldValue)\n},{deep:true}) //\u6b64\u5904\u7531\u4e8e\u76d1\u89c6\u7684\u662freactive\u7d20\u5b9a\u4e49\u7684\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u6240\u4ee5deep\u914d\u7f6e\u6709\u6548\n</code></pre>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#3watcheffect","title":"3.watchEffect\u51fd\u6570","text":"<ul> <li> <p>watch\u7684\u5957\u8def\u662f\uff1a\u65e2\u8981\u6307\u660e\u76d1\u89c6\u7684\u5c5e\u6027\uff0c\u4e5f\u8981\u6307\u660e\u76d1\u89c6\u7684\u56de\u8c03\u3002</p> </li> <li> <p>watchEffect\u7684\u5957\u8def\u662f\uff1a\u4e0d\u7528\u6307\u660e\u76d1\u89c6\u54ea\u4e2a\u5c5e\u6027\uff0c\u76d1\u89c6\u7684\u56de\u8c03\u4e2d\u7528\u5230\u54ea\u4e2a\u5c5e\u6027\uff0c\u90a3\u5c31\u76d1\u89c6\u54ea\u4e2a\u5c5e\u6027\u3002</p> </li> <li> <p>watchEffect\u6709\u70b9\u50cfcomputed\uff1a</p> </li> <li> <p>\u4f46computed\u6ce8\u91cd\u7684\u8ba1\u7b97\u51fa\u6765\u7684\u503c\uff08\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff09\uff0c\u6240\u4ee5\u5fc5\u987b\u8981\u5199\u8fd4\u56de\u503c\u3002</p> </li> <li>\u800cwatchEffect\u66f4\u6ce8\u91cd\u7684\u662f\u8fc7\u7a0b\uff08\u56de\u8c03\u51fd\u6570\u7684\u51fd\u6570\u4f53\uff09\uff0c\u6240\u4ee5\u4e0d\u7528\u5199\u8fd4\u56de\u503c\u3002</li> </ul> <pre><code>//watchEffect\u6240\u6307\u5b9a\u7684\u56de\u8c03\u4e2d\u7528\u5230\u7684\u6570\u636e\u53ea\u8981\u53d1\u751f\u53d8\u5316\uff0c\u5219\u76f4\u63a5\u91cd\u65b0\u6267\u884c\u56de\u8c03\u3002\nwatchEffect(()=&gt;{\n    const x1 = sum.value\n    const x2 = person.age\n    console.log('watchEffect\u914d\u7f6e\u7684\u56de\u8c03\u6267\u884c\u4e86')\n})\n</code></pre>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#8","title":"8.\u751f\u547d\u5468\u671f","text":"vue2.x\u7684\u751f\u547d\u5468\u671f vue3.0\u7684\u751f\u547d\u5468\u671f <p>1</p> <ul> <li>Vue3.0\u4e2d\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528Vue2.x\u4e2d\u7684\u751f\u547d\u5468\u671f\u94a9\u5b50\uff0c\u4f46\u6709\u6709\u4e24\u4e2a\u88ab\u66f4\u540d\uff1a</li> <li><code>beforeDestroy</code>\u6539\u540d\u4e3a <code>beforeUnmount</code></li> <li><code>destroyed</code>\u6539\u540d\u4e3a <code>unmounted</code></li> <li>Vue3.0\u4e5f\u63d0\u4f9b\u4e86 Composition API \u5f62\u5f0f\u7684\u751f\u547d\u5468\u671f\u94a9\u5b50\uff0c\u4e0eVue2.x\u4e2d\u94a9\u5b50\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a</li> <li><code>beforeCreate</code>===&gt;<code>setup()</code></li> <li><code>created</code>=======&gt;<code>setup()</code></li> <li><code>beforeMount</code> ===&gt;<code>onBeforeMount</code></li> <li><code>mounted</code>=======&gt;<code>onMounted</code></li> <li><code>beforeUpdate</code>===&gt;<code>onBeforeUpdate</code></li> <li><code>updated</code> =======&gt;<code>onUpdated</code></li> <li><code>beforeUnmount</code>\u00a0==&gt;<code>onBeforeUnmount</code></li> <li><code>unmounted</code> =====&gt;<code>onUnmounted</code></li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#9hook","title":"9.\u81ea\u5b9a\u4e49hook\u51fd\u6570","text":"<ul> <li> <p>\u4ec0\u4e48\u662fhook\uff1f\u2014\u2014 \u672c\u8d28\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u628asetup\u51fd\u6570\u4e2d\u4f7f\u7528\u7684Composition API\u8fdb\u884c\u4e86\u5c01\u88c5\u3002</p> </li> <li> <p>\u7c7b\u4f3c\u4e8evue2.x\u4e2d\u7684mixin\u3002</p> </li> <li> <p>\u81ea\u5b9a\u4e49hook\u7684\u4f18\u52bf: \u590d\u7528\u4ee3\u7801, \u8ba9setup\u4e2d\u7684\u903b\u8f91\u66f4\u6e05\u695a\u6613\u61c2\u3002</p> </li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#10toref","title":"10.toRef","text":"<ul> <li>\u4f5c\u7528\uff1a\u521b\u5efa\u4e00\u4e2a ref \u5bf9\u8c61\uff0c\u5176value\u503c\u6307\u5411\u53e6\u4e00\u4e2a\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\u3002</li> <li>\u8bed\u6cd5\uff1a<code>const name = toRef(person,'name')</code></li> <li> <p>\u5e94\u7528:   \u8981\u5c06\u54cd\u5e94\u5f0f\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\u5355\u72ec\u63d0\u4f9b\u7ed9\u5916\u90e8\u4f7f\u7528\u65f6\u3002</p> </li> <li> <p>\u6269\u5c55\uff1a<code>toRefs</code> \u4e0e<code>toRef</code>\u529f\u80fd\u4e00\u81f4\uff0c\u4f46\u53ef\u4ee5\u6279\u91cf\u521b\u5efa\u591a\u4e2a ref \u5bf9\u8c61\uff0c\u8bed\u6cd5\uff1a<code>toRefs(person)</code></p> </li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#composition-api_1","title":"\u4e09\u3001\u5176\u5b83 Composition API","text":""},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#1shallowreactive-shallowref","title":"1.shallowReactive \u4e0e shallowRef","text":"<ul> <li>shallowReactive\uff1a\u53ea\u5904\u7406\u5bf9\u8c61\u6700\u5916\u5c42\u5c5e\u6027\u7684\u54cd\u5e94\u5f0f\uff08\u6d45\u54cd\u5e94\u5f0f\uff09\u3002</li> <li> <p>shallowRef\uff1a\u53ea\u5904\u7406\u57fa\u672c\u6570\u636e\u7c7b\u578b\u7684\u54cd\u5e94\u5f0f, \u4e0d\u8fdb\u884c\u5bf9\u8c61\u7684\u54cd\u5e94\u5f0f\u5904\u7406\u3002</p> </li> <li> <p>\u4ec0\u4e48\u65f6\u5019\u4f7f\u7528?</p> </li> <li>\u5982\u679c\u6709\u4e00\u4e2a\u5bf9\u8c61\u6570\u636e\uff0c\u7ed3\u6784\u6bd4\u8f83\u6df1, \u4f46\u53d8\u5316\u65f6\u53ea\u662f\u5916\u5c42\u5c5e\u6027\u53d8\u5316 ===&gt; shallowReactive\u3002</li> <li>\u5982\u679c\u6709\u4e00\u4e2a\u5bf9\u8c61\u6570\u636e\uff0c\u540e\u7eed\u529f\u80fd\u4e0d\u4f1a\u4fee\u6539\u8be5\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\uff0c\u800c\u662f\u751f\u65b0\u7684\u5bf9\u8c61\u6765\u66ff\u6362 ===&gt; shallowRef\u3002</li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#2readonly-shallowreadonly","title":"2.readonly \u4e0e shallowReadonly","text":"<ul> <li>readonly: \u8ba9\u4e00\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e\u53d8\u4e3a\u53ea\u8bfb\u7684\uff08\u6df1\u53ea\u8bfb\uff09\u3002</li> <li>shallowReadonly\uff1a\u8ba9\u4e00\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e\u53d8\u4e3a\u53ea\u8bfb\u7684\uff08\u6d45\u53ea\u8bfb\uff09\u3002</li> <li>\u5e94\u7528\u573a\u666f: \u4e0d\u5e0c\u671b\u6570\u636e\u88ab\u4fee\u6539\u65f6\u3002</li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#3toraw-markraw","title":"3.toRaw \u4e0e markRaw","text":"<ul> <li>toRaw\uff1a</li> <li>\u4f5c\u7528\uff1a\u5c06\u4e00\u4e2a\u7531<code>reactive</code>\u751f\u6210\u7684\u54cd\u5e94\u5f0f\u5bf9\u8c61\u8f6c\u4e3a\u666e\u901a\u5bf9\u8c61\u3002</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u7528\u4e8e\u8bfb\u53d6\u54cd\u5e94\u5f0f\u5bf9\u8c61\u5bf9\u5e94\u7684\u666e\u901a\u5bf9\u8c61\uff0c\u5bf9\u8fd9\u4e2a\u666e\u901a\u5bf9\u8c61\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u4e0d\u4f1a\u5f15\u8d77\u9875\u9762\u66f4\u65b0\u3002</li> <li>markRaw\uff1a</li> <li>\u4f5c\u7528\uff1a\u6807\u8bb0\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4f7f\u5176\u6c38\u8fdc\u4e0d\u4f1a\u518d\u6210\u4e3a\u54cd\u5e94\u5f0f\u5bf9\u8c61\u3002</li> <li>\u5e94\u7528\u573a\u666f:<ol> <li>\u6709\u4e9b\u503c\u4e0d\u5e94\u88ab\u8bbe\u7f6e\u4e3a\u54cd\u5e94\u5f0f\u7684\uff0c\u4f8b\u5982\u590d\u6742\u7684\u7b2c\u4e09\u65b9\u7c7b\u5e93\u7b49\u3002</li> <li>\u5f53\u6e32\u67d3\u5177\u6709\u4e0d\u53ef\u53d8\u6570\u636e\u6e90\u7684\u5927\u5217\u8868\u65f6\uff0c\u8df3\u8fc7\u54cd\u5e94\u5f0f\u8f6c\u6362\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002</li> </ol> </li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#4customref","title":"4.customRef","text":"<ul> <li> <p>\u4f5c\u7528\uff1a\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684 ref\uff0c\u5e76\u5bf9\u5176\u4f9d\u8d56\u9879\u8ddf\u8e2a\u548c\u66f4\u65b0\u89e6\u53d1\u8fdb\u884c\u663e\u5f0f\u63a7\u5236\u3002</p> </li> <li> <p>\u5b9e\u73b0\u9632\u6296\u6548\u679c\uff1a</p> </li> </ul> <pre><code>&lt;template&gt;\n  &lt;input type=\"text\" v-model=\"keyword\"&gt;\n  &lt;h3&gt;{{keyword}}&lt;/h3&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n  import {ref,customRef} from 'vue'\n  export default {\n      name:'Demo',\n      setup(){\n          // let keyword = ref('hello') //\u4f7f\u7528Vue\u51c6\u5907\u597d\u7684\u5185\u7f6eref\n          //\u81ea\u5b9a\u4e49\u4e00\u4e2amyRef\n          function myRef(value,delay){\n              let timer\n              //\u901a\u8fc7customRef\u53bb\u5b9e\u73b0\u81ea\u5b9a\u4e49\n              return customRef((track,trigger)=&gt;{\n                  return{\n                      get(){\n                          track() //\u544a\u8bc9Vue\u8fd9\u4e2avalue\u503c\u662f\u9700\u8981\u88ab\u201c\u8ffd\u8e2a\u201d\u7684\n                          return value\n                      },\n                      set(newValue){\n                          clearTimeout(timer)\n                          timer = setTimeout(()=&gt;{\n                              value = newValue\n                              trigger() //\u544a\u8bc9Vue\u53bb\u66f4\u65b0\u754c\u9762\n                          },delay)\n                      }\n                  }\n              })\n          }\n          let keyword = myRef('hello',500) //\u4f7f\u7528\u7a0b\u5e8f\u5458\u81ea\u5b9a\u4e49\u7684ref\n          return {\n              keyword\n          }\n      }\n  }\n&lt;/script&gt;\n</code></pre>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#5provide-inject","title":"5.provide \u4e0e inject","text":"<ul> <li> <p>\u4f5c\u7528\uff1a\u5b9e\u73b0\u7956\u4e0e\u540e\u4ee3\u7ec4\u4ef6\u95f4\u901a\u4fe1</p> </li> <li> <p>\u5957\u8def\uff1a\u7236\u7ec4\u4ef6\u6709\u4e00\u4e2a <code>provide</code> \u9009\u9879\u6765\u63d0\u4f9b\u6570\u636e\uff0c\u540e\u4ee3\u7ec4\u4ef6\u6709\u4e00\u4e2a <code>inject</code> \u9009\u9879\u6765\u5f00\u59cb\u4f7f\u7528\u8fd9\u4e9b\u6570\u636e</p> </li> <li> <p>\u5177\u4f53\u5199\u6cd5\uff1a</p> </li> <li> <p>\u7956\u7ec4\u4ef6\u4e2d\uff1a</p> <pre><code>setup(){\n   ......\n    let car = reactive({name:'\u5954\u9a70',price:'40\u4e07'})\n    provide('car',car)\n    ......\n}\n</code></pre> </li> <li> <p>\u540e\u4ee3\u7ec4\u4ef6\u4e2d\uff1a</p> <pre><code>setup(props,context){\n   ......\n    const car = inject('car')\n    return {car}\n   ......\n}\n</code></pre> </li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#6","title":"6.\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5224\u65ad","text":"<ul> <li>isRef: \u68c0\u67e5\u4e00\u4e2a\u503c\u662f\u5426\u4e3a\u4e00\u4e2a ref \u5bf9\u8c61</li> <li>isReactive: \u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 <code>reactive</code> \u521b\u5efa\u7684\u54cd\u5e94\u5f0f\u4ee3\u7406</li> <li>isReadonly: \u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 <code>readonly</code> \u521b\u5efa\u7684\u53ea\u8bfb\u4ee3\u7406</li> <li>isProxy: \u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 <code>reactive</code> \u6216\u8005 <code>readonly</code> \u65b9\u6cd5\u521b\u5efa\u7684\u4ee3\u7406</li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#composition-api_2","title":"\u56db\u3001Composition API \u7684\u4f18\u52bf","text":""},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#1options-api","title":"1.Options API \u5b58\u5728\u7684\u95ee\u9898","text":"<p>\u4f7f\u7528\u4f20\u7edfOptionsAPI\u4e2d\uff0c\u65b0\u589e\u6216\u8005\u4fee\u6539\u4e00\u4e2a\u9700\u6c42\uff0c\u5c31\u9700\u8981\u5206\u522b\u5728data\uff0cmethods\uff0ccomputed\u91cc\u4fee\u6539 \u3002</p>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#2composition-api","title":"2.Composition API \u7684\u4f18\u52bf","text":"<p>\u6211\u4eec\u53ef\u4ee5\u66f4\u52a0\u4f18\u96c5\u7684\u7ec4\u7ec7\u6211\u4eec\u7684\u4ee3\u7801\uff0c\u51fd\u6570\u3002\u8ba9\u76f8\u5173\u529f\u80fd\u7684\u4ee3\u7801\u66f4\u52a0\u6709\u5e8f\u7684\u7ec4\u7ec7\u5728\u4e00\u8d77\u3002</p>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#_1","title":"\u4e94\u3001\u65b0\u7684\u7ec4\u4ef6","text":""},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#1fragment","title":"1.Fragment","text":"<ul> <li>\u5728Vue2\u4e2d: \u7ec4\u4ef6\u5fc5\u987b\u6709\u4e00\u4e2a\u6839\u6807\u7b7e</li> <li>\u5728Vue3\u4e2d: \u7ec4\u4ef6\u53ef\u4ee5\u6ca1\u6709\u6839\u6807\u7b7e, \u5185\u90e8\u4f1a\u5c06\u591a\u4e2a\u6807\u7b7e\u5305\u542b\u5728\u4e00\u4e2aFragment\u865a\u62df\u5143\u7d20\u4e2d</li> <li>\u597d\u5904: \u51cf\u5c11\u6807\u7b7e\u5c42\u7ea7, \u51cf\u5c0f\u5185\u5b58\u5360\u7528</li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#2teleport","title":"2.Teleport","text":"<ul> <li>\u4ec0\u4e48\u662fTeleport\uff1f\u2014\u2014 <code>Teleport</code> \u662f\u4e00\u79cd\u80fd\u591f\u5c06\u6211\u4eec\u7684\u7ec4\u4ef6html\u7ed3\u6784\u79fb\u52a8\u5230\u6307\u5b9a\u4f4d\u7f6e\u7684\u6280\u672f\u3002</li> </ul> <pre><code>&lt;teleport to=\"\u79fb\u52a8\u4f4d\u7f6e\"&gt;\n  &lt;div v-if=\"isShow\" class=\"mask\"&gt;\n      &lt;div class=\"dialog\"&gt;\n          &lt;h3&gt;\u6211\u662f\u4e00\u4e2a\u5f39\u7a97&lt;/h3&gt;\n          &lt;button @click=\"isShow = false\"&gt;\u5173\u95ed\u5f39\u7a97&lt;/button&gt;\n      &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/teleport&gt;\n</code></pre>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#3suspense","title":"3.Suspense","text":"<ul> <li> <p>\u7b49\u5f85\u5f02\u6b65\u7ec4\u4ef6\u65f6\u6e32\u67d3\u4e00\u4e9b\u989d\u5916\u5185\u5bb9\uff0c\u8ba9\u5e94\u7528\u6709\u66f4\u597d\u7684\u7528\u6237\u4f53\u9a8c</p> </li> <li> <p>\u4f7f\u7528\u6b65\u9aa4\uff1a</p> </li> <li> <p>\u5f02\u6b65\u5f15\u5165\u7ec4\u4ef6</p> <pre><code>import {defineAsyncComponent} from 'vue'\nconst Child = defineAsyncComponent(()=&gt;import('./components/Child.vue'))\n</code></pre> </li> <li> <p>\u4f7f\u7528<code>Suspense</code>\u5305\u88f9\u7ec4\u4ef6\uff0c\u5e76\u914d\u7f6e\u597d<code>default</code> \u4e0e <code>fallback</code></p> <pre><code>&lt;template&gt;\n    &lt;div class=\"app\"&gt;\n        &lt;h3&gt;\u6211\u662fApp\u7ec4\u4ef6&lt;/h3&gt;\n        &lt;Suspense&gt;\n            &lt;template v-slot:default&gt;\n                &lt;Child/&gt;\n            &lt;/template&gt;\n            &lt;template v-slot:fallback&gt;\n                &lt;h3&gt;\u52a0\u8f7d\u4e2d.....&lt;/h3&gt;\n            &lt;/template&gt;\n        &lt;/Suspense&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n</code></pre> </li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#_2","title":"\u516d\u3001\u5176\u4ed6","text":""},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#1api","title":"1.\u5168\u5c40API\u7684\u8f6c\u79fb","text":"<ul> <li>Vue 2.x \u6709\u8bb8\u591a\u5168\u5c40 API \u548c\u914d\u7f6e\u3002</li> <li> <p>\u4f8b\u5982\uff1a\u6ce8\u518c\u5168\u5c40\u7ec4\u4ef6\u3001\u6ce8\u518c\u5168\u5c40\u6307\u4ee4\u7b49\u3002</p> <pre><code>//\u6ce8\u518c\u5168\u5c40\u7ec4\u4ef6\nVue.component('MyButton', {\n  data: () =&gt; ({\n    count: 0\n  }),\n  template: '&lt;button @click=\"count++\"&gt;Clicked {{ count }} times.&lt;/button&gt;'\n})\n\n//\u6ce8\u518c\u5168\u5c40\u6307\u4ee4\nVue.directive('focus', {\n  inserted: el =&gt; el.focus()\n}\n</code></pre> </li> <li> <p>Vue3.0\u4e2d\u5bf9\u8fd9\u4e9bAPI\u505a\u51fa\u4e86\u8c03\u6574\uff1a</p> </li> <li> <p>\u5c06\u5168\u5c40\u7684API\uff0c\u5373\uff1a<code>Vue.xxx</code>\u8c03\u6574\u5230\u5e94\u7528\u5b9e\u4f8b\uff08<code>app</code>\uff09\u4e0a</p> 2.x \u5168\u5c40 API\uff08<code>Vue</code>\uff09 3.x \u5b9e\u4f8b API (<code>app</code>) Vue.config.xxxx app.config.xxxx Vue.config.productionTip \u79fb\u9664 Vue.component app.component Vue.directive app.directive Vue.mixin app.mixin Vue.use app.use Vue.prototype app.config.globalProperties </li> </ul>"},{"location":"blogs/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#2_1","title":"2.\u5176\u4ed6\u6539\u53d8","text":"<ul> <li> <p>data\u9009\u9879\u5e94\u59cb\u7ec8\u88ab\u58f0\u660e\u4e3a\u4e00\u4e2a\u51fd\u6570\u3002</p> </li> <li> <p>\u8fc7\u5ea6\u7c7b\u540d\u7684\u66f4\u6539\uff1a</p> </li> <li> <p>Vue2.x\u5199\u6cd5</p> <pre><code>.v-enter,\n.v-leave-to {\n  opacity: 0;\n}\n.v-leave,\n.v-enter-to {\n  opacity: 1;\n}\n</code></pre> </li> <li> <p>Vue3.x\u5199\u6cd5</p> <pre><code>.v-enter-from,\n.v-leave-to {\n  opacity: 0;\n}\n\n.v-leave-from,\n.v-enter-to {\n  opacity: 1;\n}\n</code></pre> </li> <li> <p>\u79fb\u9664keyCode\u4f5c\u4e3a v-on \u7684\u4fee\u9970\u7b26\uff0c\u540c\u65f6\u4e5f\u4e0d\u518d\u652f\u6301<code>config.keyCodes</code></p> </li> <li> <p>\u79fb\u9664<code>v-on.native</code>\u4fee\u9970\u7b26</p> </li> <li> <p>\u7236\u7ec4\u4ef6\u4e2d\u7ed1\u5b9a\u4e8b\u4ef6</p> <pre><code>&lt;my-component\n  v-on:close=\"handleComponentEvent\"\n  v-on:click=\"handleNativeClickEvent\"\n/&gt;\n</code></pre> </li> <li> <p>\u5b50\u7ec4\u4ef6\u4e2d\u58f0\u660e\u81ea\u5b9a\u4e49\u4e8b\u4ef6</p> <pre><code>&lt;script&gt;\n  export default {\n    emits: ['close']\n  }\n&lt;/script&gt;\n</code></pre> </li> <li> <p>\u79fb\u9664\u8fc7\u6ee4\u5668\uff08filter\uff09</p> </li> </ul> <p>\u8fc7\u6ee4\u5668\u867d\u7136\u8fd9\u770b\u8d77\u6765\u5f88\u65b9\u4fbf\uff0c\u4f46\u5b83\u9700\u8981\u4e00\u4e2a\u81ea\u5b9a\u4e49\u8bed\u6cd5\uff0c\u6253\u7834\u5927\u62ec\u53f7\u5185\u8868\u8fbe\u5f0f\u662f \u201c\u53ea\u662f JavaScript\u201d \u7684\u5047\u8bbe\uff0c\u8fd9\u4e0d\u4ec5\u6709\u5b66\u4e60\u6210\u672c\uff0c\u800c\u4e14\u6709\u5b9e\u73b0\u6210\u672c\uff01\u5efa\u8bae\u7528\u65b9\u6cd5\u8c03\u7528\u6216\u8ba1\u7b97\u5c5e\u6027\u53bb\u66ff\u6362\u8fc7\u6ee4\u5668\u3002</p> <ul> <li>......</li> </ul>"},{"location":"blogs/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/","title":"C\u8bed\u8a00\u4e2d\u7684\u6570\u7ec4\u7a7a\u95f4\u52a8\u6001\u5f00\u8f9f","text":"<p>\u5728C\u8bed\u8a00\u4e2d\uff0c\u5fc5\u4e0d\u53ef\u5c11\u7684\u9700\u8981\u4f7f\u7528\u5230\u6570\u7ec4\uff0c\u901a\u5e38\u4e3a\u4e86\u52a8\u6001\u7684\u5f00\u8f9f\u6570\u7ec4\u7a7a\u95f4\uff0c\u53ef\u4ee5\u4f7f\u7528malloc\u51fd\u6570\uff0c\u5728C++\u4e2d\u53ef\u4ee5\u4f7f\u7528new\u5173\u952e\u5b57\u8fdb\u884c\u7a7a\u95f4\u7684\u52a8\u6001\u5f00\u8f9f\u4e0e\u56de\u6536\uff0c\u52a8\u6001\u5f00\u8f9f\u7a7a\u95f4\u7684\u65b9\u6cd5\u66f4\u52a0\u7075\u6d3b\uff0c\u66f4\u80fd\u6709\u6548\u7684\u6839\u636e\u9700\u8981\u5f00\u8f9f\u7a7a\u95f4\u4f7f\u7528\u3002</p>"},{"location":"blogs/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/#1","title":"1\u3001\u4e00\u7ef4\u6570\u7ec4","text":"<p>\u4e00\u7ef4\u6570\u7ec4\u6700\u7b80\u5355\uff0c\u76f4\u63a5\u4f7f\u7528malloc\u51fd\u6570\u5c31\u53ef\u4ee5\u5f00\u8f9f\uff0c\u4ee5int\u578b\u6570\u636e\u4e3a\u4f8b\uff0c\u5f00\u8f9f\u4e00\u4e2a\u8fde\u7eed\u7a7a\u95f4\u4f7f\u7528\u3002 <pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid test(int *arr){\n    for(int i=0;i&lt;5;i++){\n        printf(\"%d \",arr[i]);\n    }\n}\nint main(){\n    int nums=5;\n    int *array=(int *)malloc(sizeof(int)*nums);\n    for(int i=0;i&lt;5;i++){\n        array[i]=i;\n    }\n    test(array);\n    return 0;\n}\n</code></pre> \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6700\u540e\u7684\u7ed3\u679c\u8f93\u51fa\u4e3a0 1 2 3 4\uff1bC\u8bed\u8a00\u4e2d\uff0c\u6570\u7ec4\u53d8\u91cf\u53ef\u4ee5\u770b\u4f5c\u4e00\u4e2a\u6307\u9488\uff0c\u901a\u8fc7malloc\u5c06\u5f00\u8f9f\u7a7a\u95f4\u7684\u8fd4\u56de\u503c\u8fd4\u56de\u7ed9\u6570\u7ec4\u6307\u9488\uff0c\u4ece\u800c\u53ef\u4ee5\u901a\u8fc7\u968f\u673a\u8bbf\u95ee\u4fee\u6539\u548c\u67e5\u8be2\u6570\u7ec4\u4e2d\u7684\u503c\u3002</p>"},{"location":"blogs/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/#2","title":"2\u3001\u4e8c\u7ef4\u6570\u7ec4","text":"<p>\u4e8c\u7ef4\u6570\u7ec4\u53ef\u4ee5\u770b\u4f5c\u4e00\u7ef4\u6570\u7ec4\u7684\u5ef6\u7533\uff0c\u5728\u4e0a\u4e00\u4e2a\u4f8b\u5b50\u4e00\u7ef4\u6570\u7ec4\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u4e00\u7ef4\u6570\u636e\u662f\u4e00\u4e2aint\u578b\u53d8\u91cf\uff0c\u800c\u4e8c\u7ef4\u6570\u7ec4\u4e2d\uff0c\u5c06\u4e0a\u4e00\u4e2a\u4f8b\u5b50\u4e2d\u6bcf\u4e00\u4e2a\u4e00\u7ef4\u53d8\u91cf\u53d8\u4e3a\u4e00\u4e2aint* \u53d8\u91cf\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411\u53e6\u4e00\u4e2a\u5f00\u8f9f\u7684\u52a8\u6001\u4e00\u4f4d\u7a7a\u95f4\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u7ef4\u6570\u7ec4\u7684\u4e00\u7ef4\u6570\u7ec4\uff08\u5957\u5a03\uff09\u3002 <pre><code>#include&lt;iostream&gt;\n#include&lt;stdlib.h&gt;\n\nusing namespace std;\n\nvoid demotest(int **mat){\n    for(int i=0;i&lt;4;i++){\n        for(int j=0;j&lt;4;j++){\n            cout&lt;&lt;mat[i][j]&lt;&lt;\" \";\n        }\n        cout&lt;&lt;endl;\n    }\n}\n\nint main(){\n    int rows=4;\n    int columns=4;\n    int **matrix=(int **)malloc(rows*sizeof(int *));\n    for(int i=0;i&lt;rows;i++){\n        matrix[i]=(int *)malloc(columns*sizeof(int));\n    }\n    for(int i=0;i&lt;rows;i++){\n        for(int j=0;j&lt;columns;j++){\n            matrix[i][j]=i+j;\n        }\n    }\n    demotest(matrix);\n    return 0;\n}\n</code></pre> \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5c06\u4e8c\u7ef4\u6570\u7ec4\uff08\u77e9\u9635\uff09\u770b\u4f5c\u4e00\u4e2a\u4e8c\u7ea7\u6307\u9488\uff08\u6307\u5411\u6307\u9488\u7684\u6307\u9488\uff09\uff0c\u6bcf\u4e00\u4e2a\u4e8c\u7ea7\u6307\u9488\u6307\u5411\u4e00\u4e2a\u5f00\u8f9f\u7a7a\u95f4\u8fd4\u56de\u7684\u4e00\u7ea7\u6307\u9488\u3002\u5bf9\u6bd4\u4e00\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u770b\u51fa\uff0c\u4e8c\u7ef4\u6570\u7ec4\u76f8\u5f53\u4e8e\u4e00\u7ef4\u6570\u7ec4\u4e2d\u5b58\u50a8\u6307\u5411\u91cc\u4e00\u4e2a\u4e00\u7ef4\u6570\u7ec4\u7684\u5730\u5740\uff0c\u901a\u8fc7\u51fd\u6570\u5c06\u4e8c\u7ef4\u6307\u9488\u4f20\u9012\u8fc7\u53bb\uff0c\u53ef\u4ee5\u83b7\u53d6\u4e8c\u7ef4\u6570\u7ec4\u7684\u5730\u5740\uff0c\u7136\u540e\u904d\u5386\u5f97\u5230\u503c\u3002</p>"},{"location":"blogs/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/#3","title":"3\u3001\u4e09\u7ef4\u6570\u7ec4","text":"<p>\u7c7b\u6bd4\u4e8c\u7ef4\u6570\u7ec4\u7684\u4f8b\u5b50\uff0c\u4e09\u7ef4\u6570\u7ec4\u5c31\u53ef\u4ee5\u770b\u4f5c\u4e8c\u7ef4\u6570\u7ec4\u7684\u5ef6\u7533\uff0c\u4e09\u7ef4\u6570\u7ec4\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u901a\u5e38\u53ef\u4ee5\u7528\u4e8e\u5b58\u50a8RGB\u56fe\u7247\uff0c\u7406\u89e3\u4e8c\u7ef4\u6570\u7ec4\u4e4b\u540e\uff0c\u4e09\u7ef4\u6570\u7ec4\u5c31\u8f83\u4e3a\u7b80\u5355\u4e86\uff0c\u4ee3\u7801\u4f8b\u5b50\u5982\u4e0b\u3002 <pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main(){\n    int channels=3;\n    int columns=4;\n    int rows=4;\n    int ***matrix=(int ***)malloc(sizeof(int **)*channels);\n    for(int i=0;i&lt;channels;i++){\n        matrix[i]=(int **)malloc(sizeof(int *)*rows);\n    }\n    for(int i=0;i&lt;channels;i++){\n        for(int j=0;j&lt;rows;j++){\n            matrix[i][j]=(int *)malloc(sizeof(int)*columns);\n        }\n    }\n    for(int i=0;i&lt;channels;i++){\n        for(int j=0;j&lt;rows;j++){\n            for(int k=0;k&lt;columns;k++){\n                matrix[i][j][k]=i+j+k;\n            }\n        }\n    }\n\n     for(int i=0;i&lt;channels;i++){\n        for(int j=0;j&lt;rows;j++){\n            for(int k=0;k&lt;columns;k++){\n                printf(\"%d \",matrix[i][j][k]);\n            }\n            printf(\"\\n\");\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre> \u4e00\u4e2a3x4x4\u7684\u6570\u7ec4\uff08\u77e9\u9635\uff09\uff0c\u5148\u5f00\u8f9f\u4e00\u4e2a\u4e09\u7ea7\u6307\u9488\u7684\u7a7a\u95f4\uff0c\u6bcf\u4e00\u4e2a\u4e09\u7ea7\u6307\u9488\u6307\u5411\u7684\u662f\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u7136\u540e\u4e8c\u7ef4\u6570\u7ec4\u7684\u5f00\u8f9f\u65b9\u6cd5\u5982\u540c\u4e0a\u4e00\u4e2a\u4f8b\u5b50\u4e2d\u7684\u90a3\u6837\uff0c\u4e00\u6b21\u7c7b\u63a8\uff0c\u66f4\u9ad8\u7ef4\u5ea6\u7684\u6570\u7ec4\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6b64\u7c7b\u65b9\u6cd5\u8fdb\u884c\u5957\u5a03\u5f97\u5230\u3002</p>"},{"location":"blogs/%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84/#_1","title":"\u603b\u7ed3","text":"<p>\u5728\u4e00\u4e9b\u7279\u5b9a\u7684\u7a0b\u5e8f\u4e2d\uff0c\u6211\u4eec\u5e38\u5e38\u65e0\u6cd5\u9884\u6d4b\u6570\u7ec4\u7684\u5927\u5c0f\u3002\u5982\u679c\u6211\u4eec\u81ea\u5df1\u5c06\u503c\u5206\u914d\u7ed9\u6570\u7ec4\uff0c\u90a3\u4e48\u5b83\u5728\u6267\u884c\u671f\u95f4\u65e0\u6cd5\u66f4\u6539\u3002\u8fd9\u4f1a\u4ea7\u751f\u95ee\u9898\uff0c\u8981\u4e48\u6570\u7ec4\u7684\u5185\u5b58\u53d8\u4f4e\uff0c\u8981\u4e48\u6570\u7ec4\u5360\u7528\u66f4\u5c11\u7684\u7a7a\u95f4\u6d6a\u8d39\u5185\u5b58\uff0c\u56e0\u6b64\u4e3a\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u5efa\u8bae\u52a8\u6001\u5206\u914d\u6570\u7ec4\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A01%28%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%29/","title":"\u5f3a\u5316\u5b66\u4e60\u4e2d\u7684\u57fa\u672c\u6982\u5ff5","text":""},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A01%28%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%29/#stateaction","title":"\u72b6\u6001(state)\u548c\u52a8\u4f5c(action)","text":"<p>\u4e00\u4e2a\u72b6\u6001\u53ef\u4ee5\u60f3\u8c61\u6210\u6e38\u620f\u4e2d\u7684\u4e00\u5e27\u753b\u9762\uff0c\u6574\u4e2a\u6e38\u620f\u5c31\u662f\u7531\u591a\u5e27\u753b\u9762\u7ec4\u6210\u7684\u3002\u503c\u7684\u6ce8\u610f\u7684\u662f\uff0c\\(t\\)\u65f6\u523b\u7684\u753b\u9762\u53ef\u80fd\u6709\u591a\u79cd\uff0c\u5b83\u4e0e\u667a\u80fd\u4f53\u9009\u62e9\u7684\u52a8\u4f5c\u6709\u5173\uff0c\u56e0\u6b64\uff0c\u72b6\u6001\u5177\u6709\u968f\u673a\u6027\u3002\u6211\u4eec\u5c06\\(t\\)\u65f6\u523b\u7684\u72b6\u6001\u8bb0\u4f5c\\(St\\)\u3002\u52a8\u4f5c\u662f\u667a\u80fd\u4f53\u4e0e\u73af\u5883\u4ea4\u4e92\u65f6\u6240\u53d1\u51fa\u7684\uff0c\u597d\u7684\u52a8\u4f5c\u80fd\u591f\u4f7f\u667a\u80fd\u4f53\u9002\u5e94\u73af\u5883\uff0c\u4ece\u800c\u83b7\u53d6\u8f83\u9ad8\u7684\u5956\u52b1\uff0c\u800c\u574f\u7684\u52a8\u4f5c\u53ef\u80fd\u4f7f\u5f97\u667a\u80fd\u4f53\u5728\u6e38\u620f\u5c40\u4e2d\u5931\u8d25  </p> <p>\u4f8b\u5982\u5728\u4e0a\u9762\u7684\u56fe\u7247\u4e2d\uff0c\u8fd9\u5f20\u56fe\u7247\u5c31\u662f\u5f53\u524d\u72b6\u6001\uff0c\u9a6c\u91cc\u5965\u505a\u6210\u7684\u52a8\u4f5c\u5c31\u662faction\u3002\u6240\u4ee5\u6709\u4e09\u79cd\u52a8\u4f5c\uff1a\u5411\u4e0a\u3001\u5411\u5de6\u548c\u5411\u53f3\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A01%28%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%29/#policy-pi","title":"\u7b56\u7565(policy \\(\\pi\\))","text":"<p>\u6211\u4eec\u77e5\u9053\u5f53\u524d\u9a6c\u91cc\u5965\u7684\u72b6\u6001\u5982\u4f55\u63a7\u5236\u5b83\u505a\u51fa\u52a8\u4f5c\uff1f\u7b56\u7565\\(\\pi\\)\u5c31\u662f\u6839\u636e\u89c2\u6d4b\u5230\u7684\u72b6\u6001(state)\u505a\u51fa\u51b3\u7b56\uff0c\u63a7\u5236\u667a\u80fd\u4f53(agent)\u505a\u51fa\u52a8\u4f5c(action)\u3002\u7b56\u7565\u4e00\u822c\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u6982\u7387\u5bc6\u5ea6\u51fd\u6570\u3002 \\(\\(\\pi(a|s)=\\mathbb{P}(A=a|S=s)\\)\\)</p> <p>\u4f8b\u5982\u5728\u4e0a\u9762\u7684\u56fe\u7247\u4e2d\uff0c\u6211\u4eec\u8f93\u5165\u5f53\u524d\u72b6\u6001\\(s\\)\uff0c\u53ef\u4ee5\u5f97\u51fa\u5411\u4e0a\u3001\u5411\u53f3\u548c\u5411\u5de6\u7684\u6982\u7387\u3002 * \\(\\pi(left|s)=0.2\\) * \\(\\pi(right|s)=0.1\\) * \\(\\pi(up|s)=0.7\\) \u5f3a\u5316\u5b66\u4e60\u4e3b\u8981\u662f\u5b66\u4e60\u8fd9\u4e2a\u7b56\u7565\u51fd\u6570\uff0c\u6839\u636e\u7b56\u7565\u51fd\u6570\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u5f53\u524d\u72b6\u6001\u505a\u51fa\u51b3\u7b56\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A01%28%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%29/#reward","title":"\u5956\u52b1(reward)","text":"<p>agent\u505a\u51fa\u4e00\u4e2a\u52a8\u4f5c\uff0c\u6e38\u620f\u5c31\u4f1a\u7ed9\u51fa\u5956\u52b1\uff0c\u8fd9\u4e2a\u5956\u52b1\u901a\u5e38\u7531\u6211\u4eec\u81ea\u5df1\u6765\u5b9a\u4e49\uff0c\u8fd8\u662f\u4ee5\u8d85\u7ea7\u739b\u4e3d\u7684\u6e38\u620f\u4f5c\u4e3a\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u5982\u4e0b\u5956\u52b1\uff1a * \u5403\u5230\u91d1\u5e01\uff1a\\(R=1\\) * \u8d62\u5f97\u6e38\u620f\uff1a\\(R=10000\\) * \u78b0\u5230\u654c\u4eba\uff1a\\(R=-10000\\) * \u4ec0\u4e48\u6ca1\u53d1\u751f\uff1a\\(R=0\\)</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A01%28%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%29/#state-transition","title":"\u72b6\u6001\u8f6c\u79fb(state transition)","text":"<p>\u667a\u80fd\u4f53\u505a\u51fa\u4e00\u4e2a\u52a8\u4f5c\uff0c\u6e38\u620f\u5c31\u4f1a\u4ece\u4e00\u4e2a\u72b6\u6001(state)\u8f6c\u79fb\u5230\u4e00\u4e2a\u65b0\u7684\u72b6\u6001(state)\u3002\u4e5f\u5c31\u662f\u9a6c\u91cc\u5965\u6267\u884c\u4e00\u4e2a\u52a8\u4f5c\uff08\u4f8b\u5982\u5411\u4e0a\u8df3\uff09\uff0c\u6e38\u620f\u5c31\u4f1a\u663e\u793a\u5230\u53e6\u4e00\u4e2a\u753b\u9762\u3002\u6211\u4eec\u901a\u5e38\u8ba4\u4e3a\u72b6\u6001\u8f6c\u79fb\u662f\u968f\u673a\u7684\uff0c\u968f\u673a\u6027\u53d6\u51b3\u4e8e\u73af\u5883\u3002 \\(\\(p(s^\\prime,a)=\\mathbb{P}(S^\\prime=s^\\prime|S=s,A=a)\\)\\)</p> <p>\u8fd9\u4e2a\u516c\u5f0f\u662f\u89c2\u6d4b\u5230\u5f53\u524d\u7684\u72b6\u6001\\(s\\)\u548c\u52a8\u4f5c\\(a\\)\uff0c\u72b6\u6001\u53d8\u6210\\(s^\\prime\\)\u7684\u6982\u7387</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A01%28%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%29/#return","title":"\u56de\u62a5(return)","text":"<p>\u56de\u62a5(return)\u5b9a\u4e49\u4e3a\u672a\u6765\u7684\u7d2f\u8ba1\u5956\u52b1\uff0c\u82f1\u6587\u4e3a:cumulative future reward\u3002\uff08\u6ce8\u610f\u548c\u5956\u52b1\u7684\u533a\u522b\uff09\u3002\u6211\u4eec\u628a\\(t\\)\u65f6\u523b\u7684\u5956\u52b1\u8bb0\u4e3a:\\(U_t\\) \\(\\(U_t=R_t+R_{t+1}+R_{t+2}+\\cdots\\)\\)</p> <p>\u4e5f\u5c31\u662f\u628a\u4ecet\u65f6\u523b\u7684\u5956\u52b1\u52a0\u8d77\u6765\uff0c\u76f4\u5230\u6e38\u620f\u7ed3\u675f\u3002\u4e0b\u9762\u601d\u8003\u4e00\u4e2a\u95ee\u9898\uff1a\\(R_t\\)\u548c\\(R_{t+1}\\)\u540c\u6837\u91cd\u8981\u5417\uff1f\u8fd9\u4e2a\u95ee\u9898\u76f8\u5f53\u4e8e\u4f60\u662f\u9009\u62e9\u6211\u73b0\u5728\u7ed9\u4f60100\u5143\u8fd8\u662f\u6211\u4e00\u5e74\u540e\u7ed9\u4f60100\u5143\u3002\u5927\u90e8\u5206\u4eba\u4f1a\u9009\u62e9\u73b0\u5728\u5f97\u5230100\u5143\uff0c\u56e0\u4e3a\u672a\u6765\u6709\u592a\u591a\u4e0d\u786e\u5b9a\u6027\u3002\u6240\u4ee5\u672a\u6765\u7684\u5956\u52b1\u6ca1\u6709\u73b0\u5728\u7684\u5956\u52b1\u91cd\u8981\uff0c\u56e0\u6b64\u6211\u4eec\u8981\u7ed9\\(R_{t+1}\\)\u8f83\u5c0f\u7684\u6743\u91cd\u3002\u6240\u4ee5\u6211\u4eec\u901a\u5e38\u4f7f\u7528\u6298\u6263\u56de\u62a5(Discounted return)\u8fd9\u4e2a\u6982\u5ff5\uff0c\u5b9a\u4e49\u4e00\u4e2a\u6298\u6263\u7cfb\u6570\\(\\gamma(0&lt;\\gamma&lt;1)\\)\uff0c\u4e5f\u5c31\u662f\u4e0a\u9762\u8bf4\u7684\u6743\u91cd\u3002 \\(\\(U_t=R_t+\\gamma R_{t+1}+\\gamma ^2R_{t+2}+\\cdots\\)\\)</p> <p>\u5f53\u7136\u56de\u62a5\u4e5f\u5177\u6709\u968f\u673a\u6027\uff0c\u968f\u673a\u6027\u4e3b\u8981\u6709\u4e24\u4e2a\u6765\u6e90\u52a8\u4f5c(action)\u548c\u72b6\u6001(state)</p> <ul> <li> <p>\u52a8\u4f5c\u7684\u968f\u673a\uff1a\\(\\(\\pi(a|s)=\\mathbb{P}(A=a|S=s)\\)\\)</p> </li> <li> <p>\u72b6\u6001\u7684\u968f\u673a\uff1a\\(\\(p(s^\\prime,a)=\\mathbb{P}(S^\\prime=s^\\prime|S=s,A=a)\\)\\)</p> </li> </ul> <p>\u8fd9\u4e24\u4e2a\u516c\u5f0f\u610f\u601d\u5c31\u662f\uff1a\u6839\u636e\u5f53\u524d\u72b6\u6001\u5f97\u51fa\u4e00\u4e2a\u968f\u673a\u7684\u52a8\u4f5c\uff0c\u66f4\u5177\u5f53\u524d\u7684\u52a8\u4f5c\u548c\u72b6\u6001\u5f97\u51fa\u4e00\u4e2a\u72b6\u6001\u8f6c\u79fb\u3002\u6240\u4ee5\u5956\u52b1\\(R_i\\) \u53d6\u51b3\u4e8e\\(S_i\\)\u548c\\(A_i\\)\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A01%28%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%29/#value-function","title":"\u4ef7\u503c\u51fd\u6570(Value Function)","text":""},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A01%28%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%29/#action-value-function","title":"\u52a8\u4f5c\u4ef7\u503c\u51fd\u6570(Action-Value Function)","text":"<p>\u52a8\u4f5c\u4ef7\u503c\u51fd\u6570\u8bb0\u4f5c\\(Q(s,a)\\)\u3002\u9996\u5148\u4e0a\u9762\u6240\u8bb2\u7684\u56de\u62a5\\(U_t\\)\u53ea\u662f\u4e00\u4e2a\u968f\u673a\u53d8\u91cf\uff0c\u5b83\u53d6\u51b3\u4e8e\u672a\u6765\u6240\u6709\u7684\u52a8\u4f5c\u548c\u72b6\u6001\uff0c\u7531\u4e8e\\(U_t\\)\u662f\u4e00\u4e2a\u968f\u673a\u53d8\u91cf\uff0c\u5728\\(t\\)\u65f6\u523b\u6211\u5e76\u4e0d\u77e5\u9053\\(U_t\\)\u662f\u4ec0\u4e48\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5bf9\\(U_t\\)\u6c42\u671f\u671b\uff0c\u628a\u968f\u673a\u6027\u7528\u79ef\u5206\u79ef\u6389\uff0c\u6700\u540e\u5f97\u5230\u7684\u5c31\u662f\u4e00\u4e2a\u6570\u3002 $$Q_\\pi(s_t,a_t)=\\mathbb{E}[U_t|S_t=s_t,A_t=a_t] $$ \u6839\u636e\u8fd9\u4e2a\u5f0f\u5b50\u6c42\u51fa\u7684\u671f\u671b\u5c31\u662f\u52a8\u4f5c\u4ef7\u503c\u51fd\u6570\uff0c\u9664\u4e86\\(s_t\\)\u548c\\(a_t\\)\u5176\u4f59\u7684\u968f\u673a\u53d8\u91cf\u90fd\u88ab\u79ef\u5206\u79ef\u6389\u4e86\u3002\u6240\u4ee5\u52a8\u4f5c\u4ef7\u503c\u51fd\u6570\\(Q_\\pi\\)\u4e0e\u5f53\u524d\u72b6\u6001\\(s_t\\)\u548c\u5f53\u524d\u52a8\u4f5c\\(a_t\\)\u6709\u5173\uff0c\u8fd8\u4e0e\u7b56\u7565\u51fd\u6570policy \\(\\pi\\)\u6709\u5173\uff0c\u56e0\u4e3a\u79ef\u5206\u65f6\u4f1a\u7528\u5230\u3002\u90a3\u4e48\u5982\u4f55\u5c06\u8fd9\u4e2a\u7b56\u7565\u51fd\u6570\u53bb\u6389\uff1f\u6211\u4eec\u53ef\u4ee5\u53d6\u6700\u5927\u503c\u3002</p> \\[Q^*(s_t,a_t)=\\underset{\\pi}{max} Q_\\pi(s_t,a_t)\\] <p>\u4e5f\u5c31\u662f\u6211\u4eec\u53d6\u80fd\u4f7f\\(Q\\)\u6700\u5927\u5316\u7684\u7b56\u7565\u51fd\u6570</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A01%28%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%29/#state-value-function","title":"\u72b6\u6001\u4ef7\u503c\u51fd\u6570(State-Value Function)","text":"<p>\u72b6\u6001\u4ef7\u503c\u51fd\u6570\u8bb0\u4f5c\\(V(s)\\)\uff0c\u662f\u52a8\u4f5c\u4ef7\u503c\u51fd\u6570\\(Q_\\pi\\)\u7684\u671f\u671b $$V_\\pi=\\mathbb{E}A[Q\\pi(s_t,A)]= {\\textstyle \\sum_{a}}\\pi(a|s_t)\\cdot Q_\\pi(s_t,a)  $$ $$V_\\pi=\\mathbb{E}A[Q\\pi(s_t,A)]=  \\int \\pi(a|s_t)\\cdot Q_\\pi(s_t,a) da $$ \u8fd9\u91cc\u7684\u671f\u671b\u662f\u6839\u636e\u968f\u673a\u53d8\u91cf\\(A\\)\u6c42\u7684\uff0c\u4e0a\u9762\u7684\u4e24\u79cd\u60c5\u51b5\u5206\u522b\u5bf9\u5e94\u53d8\u91cf\u79bb\u6563\u548c\u8fde\u7eed\u7684\u4e24\u79cd\u60c5\u51b5\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A01%28%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%29/#_2","title":"\u4e24\u79cd\u4ef7\u503c\u51fd\u6570\u7684\u5bf9\u6bd4","text":"<p>\u52a8\u4f5c\u4ef7\u503c\u51fd\u6570\\(Q_\\pi\\)\uff0c\u544a\u8bc9\u6211\u4eec\uff0c\u4f7f\u7528\u4ef7\u503c\u51fd\u6570policy \\(\\pi\\)\uff0c\u667a\u80fd\u4f53\u5904\u4e8e\u72b6\u6001s\u65f6\u505a\u51fa\u52a8\u4f5ca\u662f\u5426\u660e\u667a\uff0c\u53ef\u4ee5\u7ed9\u8be5\u52a8\u4f5c\u6253\u5206\u3002\u72b6\u6001\u4ef7\u503c\u51fd\u6570\\(V_\\pi\\)\uff0c\u5982\u679c\u4f7f\u7528\u4ef7\u503c\u51fd\u6570\\(\\pi\\)\uff0c\u53ef\u4ee5\u8bc4\u4ef7\u5f53\u524d\u72b6\u6001\u662f\u597d\u8fd8\u662f\u574f\uff08\u6e38\u620f\u662f\u5feb\u8d62\u4e86\u8fd8\u662f\u5feb\u8f93\u4e86\uff09\u3002\u8fd8\u53ef\u4ee5\u8bc4\u4ef7\u4ef7\u503c\u51fd\u6570\\(\\pi\\)\u7684\u597d\u574f\uff0c\u5982\u679c\\(\\pi\\)\u8d8a\u597d\uff0c\u90a3\u4e48\\(\\mathbb{E}_S[V_\\pi(S)]\\)\uff0c\u4e5f\u5c31\u662f\\(V_\\pi\\)\u7684\u5e73\u5747\u503c\u5c31\u8d8a\u5927\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A02%28%E4%BB%B7%E5%80%BC%E5%AD%A6%E4%B9%A0%29/","title":"\u4ef7\u503c\u5b66\u4e60","text":"<p>\u4e0a\u4e00\u7bc7\u535a\u5ba2\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u5f3a\u5316\u5b66\u4e60\u7684\u57fa\u672c\u6982\u5ff5\uff0c\u5176\u4e2d\u5305\u62ec\u4e86\u4ef7\u503c\u51fd\u6570\uff1a\u52a8\u4f5c\u4ef7\u503c\u51fd\u6570\u548c\u72b6\u6001\u4ef7\u503c\u51fd\u6570\u3002\u9996\u5148\u52a8\u4f5c\u4ef7\u503c\u51fd\u6570\\(Q^*\\)\u80fd\u544a\u8bc9\u4f60\u6bcf\u4e2a\u52a8\u4f5c\u5e26\u6765\u7684\u5e73\u5747\u56de\u62a5\uff0c\u6240\u4ee5\u6211\u4eec\u5e94\u8be5\u9009\u62e9\u5e73\u5747\u56de\u62a5\u6700\u9ad8\u7684\u90a3\u4e2a\uff0c\u4f46\u662f\u6211\u4eec\u5e76\u4e0d\u77e5\u9053\\(Q^*\\)\u51fd\u6570\uff0c\u4ef7\u503c\u5b66\u4e60\u7684\u57fa\u672c\u601d\u60f3\u5c31\u662f\u5b66\u4e60\u4e00\u4e2a\u51fd\u6570\u6765\u8fd1\u4f3c\\(Q^*\\)\u3002\u4e0b\u9762\u4ecb\u7ecd\u4ef7\u503c\u5b66\u4e60\u7684\u4e00\u4e9b\u6982\u5ff5</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A02%28%E4%BB%B7%E5%80%BC%E5%AD%A6%E4%B9%A0%29/#deep-q-networkdqn","title":"Deep Q-Network(DQN)","text":"<p>\u5176\u5b9e\u5c31\u662f\u5229\u7528\u795e\u7ecf\u7f51\u7edc\u8fd1\u4f3c\\(Q^* \\(\u51fd\u6570\u3002\u6240\u4ee5\u6211\u4eec\u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\\)Q(s,a;w)\\)\u6765\u8fd1\u4f3c\\(Q*(s,a)\\)\u3002\u6240\u4ee5\u5f15\u5165\u4e86DQN\u8fd9\u79cd\u795e\u7ecf\u7f51\u7edc\uff0c\u5982\u4e0b\u56fe\u6240\u793a </p> <p>\u8fd9\u5e45\u56fe\u5c31\u662fDQN\u7f51\u7edc\u7684\u793a\u610f\u56fe\uff0c\u6211\u4eec\u901a\u8fc7\u5f53\u524d\u7684\u72b6\u6001\uff0c\u8f93\u51fa\u5bf9\u4e0d\u540c\u52a8\u4f5c\u7684\u6253\u5206(\u4e0a\u3001\u5de6\u3001\u53f3)\uff0c\u7136\u540e\u667a\u80fd\u4f53\u9009\u62e9\u5206\u6570\u8f83\u5927\u7684\u52a8\u4f5c\u3002 </p> <p>\u8fd9\u5e45\u56fe\u5c31\u662f\u8bf4\u660e\u5728\u6e38\u620f\u4e2d\uff0cDQN\u7684\u53d8\u6362\u72b6\u6001\uff0c\u667a\u80fd\u4f53\u4e0d\u65ad\u7684\u9009\u62e9\u5f97\u5206\u6700\u9ad8\u7684action\uff0c\u7136\u540e\u8fc1\u79fb\u5230\u4e0b\u4e00\u4e2a\u72b6\u6001\u3002\u4e0b\u9762\u6211\u4eec\u6765\u5206\u6790\u5982\u4f55\u8bad\u7ec3\u8fd9\u4e2a\u795e\u7ecf\u7f51\u7edc\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A02%28%E4%BB%B7%E5%80%BC%E5%AD%A6%E4%B9%A0%29/#temporal-difference-td-learning","title":"Temporal Difference (TD) Learning","text":"<p>\u65f6\u95f4\u5dee\u5206\u5b66\u4e60\uff1a\u6307\u4ece\u91c7\u6837\u5f97\u5230\u7684\u4e0d\u5b8c\u6574\u7684\u72b6\u6001\u5e8f\u5217\u5b66\u4e60\uff0c\u8be5\u65b9\u6cd5\u901a\u8fc7\u5408\u7406\u7684 bootstrapping\uff0c\u5148\u4f30\u8ba1\u67d0\u72b6\u6001\u5728\u8be5\u72b6\u6001\u5e8f\u5217(episode)\u5b8c\u6574\u540e\u53ef\u80fd\u5f97\u5230\u7684 return\uff0c\u5e76\u5728\u6b64\u57fa\u7840\u4e0a\u5229\u7528\u7d2f\u8fdb\u66f4\u65b0\u5e73\u5747\u503c\u7684\u65b9\u6cd5\u5f97\u5230\u8be5\u72b6\u6001\u7684\u4ef7\u503c\uff0c\u518d\u901a\u8fc7\u4e0d\u65ad\u7684\u91c7\u6837\u6765\u6301\u7eed\u66f4\u65b0\u8fd9\u4e2a\u4ef7\u503c\u3002\u6982\u5ff5\u8fd8\u662f\u6bd4\u8f83\u96be\u7406\u89e3\u7684\u3002\u4e0b\u9762\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u3002</p> <p>\u9996\u5148\u6709\u4e00\u4e2a\u6a21\u578b\\(Q(w)\\)\u9884\u6d4b\u4eceA\u89e6\u53d1\u5230\u8fbeB\u9700\u89811000\u5206\u949f\uff0c\u90a3\u4e0b\u9762\u5f00\u59cb\u66f4\u65b0\u6a21\u578b\uff0c\u6211\u4eec\u7684\u9884\u6d4b\\(q=Q(w),q=1000\\)\uff0c\u7136\u540e\u6211\u4eec\u5b9e\u9645\u8d70\u4e00\u904d\u8fd9\u4e2a\u8def\u7a0b\uff0c\u53d1\u73b0\u6211\u4eec\u5b9e\u9645\u82b1\u8d39\u4e86860\u5206\u949f\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5f00\u59cb\u66f4\u65b0\u6a21\u578b\u3002\u90a3\u4e48\u8ba1\u7b97\u635f\u5931Loss \\(L=\\frac {1}{2}(q-y)^2\\)\uff0c\u4e0b\u9762\u6211\u4eec\u5bf9Loss\u5173\u4e8ew\u6c42\u5bfc\\(\\frac{\\partial L}{\\partial w}=\\frac{\\partial L}{\\partial q} \\cdot \\frac{\\partial q}{\\partial w}  =(q-y)\\frac{\\partial Q(w)}{\\partial w} \\(\u3002\u68af\u5ea6\u6c42\u51fa\u6765\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u68af\u5ea6\u4e0b\u964d\u6765\u8ddf\u65b0\u53c2\u6570\\)w_{t+1}=w_t-\\alpha \\cdot \\frac {\\partial L}{\\partial w}|_{w=w_{t}}\\)\u3002\u8fd9\u79cd\u65b9\u6cd5\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u6211\u5fc5\u987b\u5b8c\u6210\u6574\u4e2a\u65c5\u7a0b\u624d\u80fd\u66f4\u7ec6\u6a21\u578b\uff0c\u5982\u679c\u6211\u4e0d\u5b8c\u6210\u6574\u4e2a\u8def\u7a0b\uff0c\u8d70\u5230\u534a\u8def\u5c31\u4e0d\u524d\u8fdb\u4e86\uff0c\u8be5\u5982\u4f55\u66f4\u65b0\uff1f\u4e0b\u9762\u5c31\u5f15\u51fa\u4e86TD\u7b97\u6cd5\u3002</p> <p>\u6211\u4eec\u4eceA\u51fa\u53d1\u5230C\u65f6\uff0c\u5df2\u7ecf\u82b1\u8d39\u4e86300\u5206\u949f\uff0c\u7136\u540e\u6a21\u578b\u544a\u8bc9\u6211\u4eec\u4eceC\u5230\u7ec8\u70b9B\u8fd8\u8981\u82b1\u8d39600\u5206\u949f\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u9884\u6d4b\u6700\u7ec8\u4f1a\u82b1\u8d39900\u5206\u949f\uff0c\u867d\u7136900\u4e5f\u662f\u4f30\u8ba1\u7684\u4f46\u5176\u4e2d\u8fd8\u6709\u4e00\u90e8\u5206\u662f\u771f\u5b9e\u7684\uff0c\u6240\u4ee5\u6bd41000\u66f4\u4e3a\u51c6\u786e\u4e00\u70b9\u3002\u8fd9\u5c31\u662fTD\u7b97\u6cd5\u7684\u5927\u81f4\u610f\u601d\uff0c\u4e0b\u9762\u770b\u4e00\u4e0bTD\u7b97\u6cd5\u5728DQN\u4e2d\u7684\u5e94\u7528\u3002</p> <p>\\(\\(T_{A-&gt;B}\\approx T_{A-&gt;C}+T_{C+B}\\)\\) \u8fd9\u4e2a\u516c\u5f0f\u5c31\u662f\u5bf9\u4e0a\u9762\u884c\u7a0b\u95ee\u9898\u7684\u603b\u7ed3\uff0c\u4e0b\u9762\u770b\u4e00\u4e0b\u5728DQN\u4e2d \\(\\(Q(s_t,a_t;w)\\approx r_t+\\gamma\\cdot Q(s_{t+1},a_{t+1};w)\\)\\) \u53ef\u4ee5\u505a\u4e00\u4e2a\u4e0d\u592a\u4e25\u8c28\u7684\u8bc1\u660e\uff1a $$ U_t=R_t+\\gamma R_{t+1}+\\gamma ^2R_{t+2}+\\cdots \\     = R_t+\\gamma (R_{t+1}+\\gamma R_{t+2}+\\cdots) \\ =R_t+ \\gamma\\cdot U_{t+1}  $$ \u4e0b\u9762\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528TD learning\u6765\u8bad\u7ec3DQN\uff0c\u9996\u5148\u6211\u4eec\u83b7\u53d6\u4e86\u5728\\(t\\)\u65f6\u523b\u7684\u6a21\u578b\u9884\u6d4b\u503c\\(Q(s_t,a_t;w_t)\\)\u3002\u5230\u4e86\\(t+1\\)\u65f6\u523b\uff0c\u6211\u4eec\u89c2\u6d4b\u5230\u4e86\u771f\u5b9e\u7684\u7ed3\u679c $$y_t=r_t+\\gamma \\cdot Q(s_{t+1},a_{t+1};w_t) \\ =r_t+\\gamma \\cdot \\underset{a}{max} Q(s_{t+1},a;w_t) $$ \u6240\u4ee5\u5f97\u51fa\u635f\u5931\u503c\\(L_t=\\frac{1}{2}[Q(s_t,a_t;w)-y_t]^2\\)\u3002\u6839\u636e\u68af\u5ea6\u4e0b\u964d\u66f4\u65b0\u635f\u5931\u503c\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A02%28%E4%BB%B7%E5%80%BC%E5%AD%A6%E4%B9%A0%29/#_2","title":"\u603b\u7ed3","text":"<p>\u6211\u4eec\u77e5\u9053\u6839\u636e\\(Q*\\)\u51fd\u6570\u80fd\u591f\u53cd\u6620\u6bcf\u4e00\u4e2a\u52a8\u4f5c\u7684\u597d\u574f\uff0c\u53ea\u8981\u6709\u4e86\u8be5\u51fd\u6570\uff0c\u6211\u4eec\u5c31\u80fd\u6839\u636e\u8be5\u51fd\u6570\u6765\u63a7\u5236agent\u8fd0\u52a8\uff0c\u6bcf\u4e00\u4e2a\u65f6\u523b\u667a\u80fd\u4f53\u53ea\u8981\u9009\u51fa\u5f97\u5206\u6700\u9ad8\u7684\u52a8\u4f5c\u6267\u884c\u5c31\u53ef\u4ee5\uff0c\u4f46\u662f\u5b9e\u9645\u662f\u6211\u4eec\u5e76\u6ca1\u6709\\(Q^*\\)\u51fd\u6570\uff0c\u6240\u4ee5\u4ef7\u503c\u5b66\u4e60\u7684\u76ee\u7684\u5c31\u662f\u5b66\u4e60\u4e00\u4e2a\\(Q^*\\)\u51fd\u6570\u3002\u6240\u4ee5\u6211\u4eec\u4f7f\u7528DQN\u6765\u8fd1\u4f3c\u4e00\u4e2a\\(Q^*\\)\u51fd\u6570\uff0c\u7136\u540e\u6839\u636eTD\u7b97\u6cd5\u6765\u8ddf\u65b0\u8fed\u4ee3DQN\u6a21\u578b\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A03%28%E7%AD%96%E7%95%A5%E5%AD%A6%E4%B9%A0%29/","title":"\u7b56\u7565\u5b66\u4e60","text":"<p>\u524d\u9762\u5df2\u7ecf\u5b66\u4e60\u8fc7\u4e86\u7b56\u7565\u51fd\u6570\\(\\pi(a|s)\\)\uff0c\u8fd9\u662f\u4e00\u4e2a\u6982\u7387\u5bc6\u5ea6\u51fd\u6570\u3002\u53ea\u8981\u6709\u4e86\u4e00\u4e2a\u597d\u7684\u7b56\u7565\u51fd\u6570\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6839\u636e\u7b56\u7565\u51fd\u6570\u81ea\u52a8\u63a7\u5236\u667a\u80fd\u4f53\u8fd0\u52a8\uff0c\u6240\u4ee5\u4e0b\u9762\u6211\u4eec\u5c31\u8ba8\u8bba\u5982\u4f55\u627e\u51fa\u4e00\u4e2a\u51fd\u6570\u6765\u8fd1\u4f3c\u7b56\u7565\u51fd\u6570\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A03%28%E7%AD%96%E7%95%A5%E5%AD%A6%E4%B9%A0%29/#policy-network","title":"\u7b56\u7565\u7f51\u7edc(policy network)","text":"<p>\u8fd9\u91cc\u5c31\u662f\u5229\u7528\u795e\u7ecf\u7f51\u7edc\\(\\pi(a|s;\\theta)\\)\u6765\u8fd1\u4f3c\u7b56\u7565\u51fd\u6570\\(\\pi(a|s)\\)\uff0c\u5176\u4e2d\\(\\theta\\)\u662f\u795e\u7ecf\u7f51\u7edc\u7684\u53c2\u6570\uff0c\u6211\u4eec\u4e3b\u8981\u662f\u901a\u8fc7\u5b66\u4e60\u6765\u6539\u8fdb\\(\\theta\\) </p> <p>\u4f7f\u7528\\(softmax\\)\u6fc0\u6d3b\u51fd\u6570\u662f\u4e3a\u4e86\u4f7f\u5f97\u8f93\u51fa\u7684\u6982\u7387\u503c\u548c\u4e3a1\uff08\u5373\u5f52\u4e00\u5316\uff09\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A03%28%E7%AD%96%E7%95%A5%E5%AD%A6%E4%B9%A0%29/#_2","title":"\u7b56\u7565\u5b66\u4e60","text":"<p>\u524d\u9762\u6211\u4eec\u5df2\u7ecf\u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u6765\u5c06\u8fd1\u4f3c\u7b56\u7565\u51fd\u6570\\(\\pi(a|s)\\)\uff0c\u4e0b\u9762\u4f7f\u7528\u8fd1\u4f3c\u7684\u7b56\u7565\u51fd\u6570\u6765\u8868\u793a\u72b6\u6001\u4ef7\u503c\u51fd\u6570\u3002 $$V(s_t;\\theta)= {\\textstyle \\sum_{a}}\\pi(a|s_t;\\theta)\\cdot Q_{\\pi}(s_t,a) $$</p> <p>\\(\\theta\\)\u5c31\u662f\u795e\u7ecf\u7f51\u7edc\u4e2d\u7684\u53c2\u6570\u3002\u6211\u4eec\u901a\u8fc7\u6539\u8fdb\\(\\theta\\)\u7684\u503c\u6765\u4f7f\u5f97\\(V\\)\u7684\u503c\u53d8\u5927 \\(\\(J(\\theta)=\\mathbb{E}_S[V(S;\\theta)]\\)\\) \u901a\u8fc7\u6c42S\u7684\u671f\u671b\uff0c\u6211\u4eec\u53ef\u4ee5\u628aS\u6d88\u6389\uff0c\u6700\u540e\u53ea\u5269\u4e0b\\(\\theta\\)\uff0c\u6240\u4ee5\u6700\u7ec8\u76ee\u6807\u5c31\u662f\u4e0d\u65ad\u6539\u8fdb\\(\\theta\\)\uff0c\u4f7f\u5f97\\(J(\\theta)\\)\u53d8\u5927</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A03%28%E7%AD%96%E7%95%A5%E5%AD%A6%E4%B9%A0%29/#policy-gradient","title":"\u7b56\u7565\u68af\u5ea6(policy gradient)","text":"<p>\u9996\u5148\u89c2\u6d4b\u5230\u4e00\u4e2a\u72b6\u6001\\(s\\)\uff0c $$ \\frac{\\partial{V(s;\\theta)}}{\\partial{\\theta}}=\\frac{\\partial{{\\textstyle \\sum_{a}}\\pi(a|s_t;\\theta)\\cdot Q_{\\pi}(s_t,a)}}{\\partial{\\theta}} \\ ={\\textstyle \\sum_{a}} \\frac{\\partial{\\pi(a|s_t;\\theta)\\cdot Q_{\\pi}(s_t,a)}}{\\partial{\\theta}} $$ \u7136\u540e\u6211\u4eec\u5047\u8bbe\\(Q_{\\pi}\\)\u4e0d\u4f9d\u8d56\u4e8e\\(\\theta\\) $$ ={\\textstyle \\sum_{a}} \\frac{\\partial{\\pi(a|s_t;\\theta)}}{\\partial{\\theta}}\\cdot Q_{\\pi}(s_t,a) \\ ={\\textstyle \\sum_{a}} \\pi(a|s_t;\\theta) \\cdot \\frac{\\partial{ln\\pi(a|s_t;\\theta)}}{\\partial{\\theta}}\\cdot Q_{\\pi}(s_t,a) \\ =\\mathbb{E}{A}[ \\frac{\\partial{ln\\pi(a|s_t;\\theta)}}{\\partial{\\theta}}\\cdot Q(s_t,a)] $$ \u8ba1\u7b97\u79bb\u6563\u7684\u503c\uff0c\u5982\u8d85\u7ea7\u739b\u4e3d\u4e2d\uff0c\u52a8\u4f5caction\u53ea\u6709{\"left\",\"right\",\"up\"}\u8fd9\u4e09\u79cd\u72b6\u6001\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u4e0a\u9762\u7684\u516c\u5f0f\\(\\frac{\\partial{V(s;\\theta)}}{\\partial{\\theta}}={\\textstyle \\sum_{a}} \\frac{\\partial{\\pi(a|s_t;\\theta)}}{\\partial{\\theta}}\\cdot Q_{\\pi}(s_t,a)\\)\u6765\u8ba1\u7b97\\(f(a,\\theta)\\)\uff0c\u53ef\u4ee5\u5f97\u5230\u7b56\u7565\u68af\u5ea6\uff1a \\(\\(\\frac{\\partial{V(s;\\theta)}}{\\partial{\\theta}}=f(\"left\",\\theta)+f(\"right\",\\theta)+f(\"up\",\\theta)\\)\\)</p> <p>\u5f53\u7136\u5982\u679c\u662f\u8fde\u7eed\u7684\u52a8\u4f5c\uff0c\u4f8b\u5982\u52a8\u4f5c\u7a7a\u95f4\u662f\u554a0-1\u4e4b\u95f4\u7684\u8fde\u7eed\u53d8\u91cf\\(\\frac{\\partial{V(s;\\theta)}}{\\partial{\\theta}}=\\mathbb{E}_{A \\sim \\pi(\\cdot | s;\\theta)}[ \\frac{\\partial{ln\\pi(A|s_t;\\theta)}}{\\partial{\\theta}}\\cdot Q_{\\pi}(s_t,A)]\\) \u7136\u540e\u6211\u4eec\u8fdb\u884c\u8499\u7279\u5361\u6d1b\u8fd1\u4f3c\u4ece\\(\\pi(\\cdot | s;\\theta)\\)\u968f\u673a\u62bd\u6837\\(\\hat{a}\\)\uff0c\u7136\u540e\u8ba1\u7b97\\(g(\\hat{a},\\theta)=\\frac{\\partial{ln\\pi(\\hat{a}|s;\\theta)}}{\\partial{\\theta}}\\cdot Q_{\\pi}(s,\\hat{a})\\)\u3002\u663e\u800c\u6613\u89c1\u7684\uff0c\u7531\u4e8e\u662f\u968f\u673a\u62bd\u6837\u7684\\(g(\\hat{a},\\theta)\\)\u662f\\(\\frac{\\partial{V(s;\\theta)}}{\\partial{\\theta}}\\)\u7684\u65e0\u504f\u4f30\u8ba1\u3002\u7b56\u7565\u68af\u5ea6\u6c42\u51fa\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u6839\u636e\u7b56\u7565\u68af\u5ea6\u66f4\u65b0\u7b56\u7565\u7f51\u7edc\uff0c\\(\\theta_{t+1}=\\theta_{t}+\\beta \\cdot g(a_t,\\theta_{t})\\)\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A03%28%E7%AD%96%E7%95%A5%E5%AD%A6%E4%B9%A0%29/#_3","title":"\u603b\u7ed3","text":"<p>\u7b56\u7565\u5b66\u4e60\u5c31\u662f\u6c42\u51fa\u4e00\u4e2a\u7b56\u7565\u51fd\u6570\\(\\pi\\)\uff0c\u7136\u540e\u6839\u636e\u7b56\u7565\u51fd\u6570\u81ea\u52a8\u63a7\u5236\u667a\u80fd\u4f53\u7684\u8fd0\u52a8\u3002\u7136\u540e\u6211\u4eec\u901a\u8fc7\u795e\u7ecf\u7f51\u8def\u6c42\u7b56\u7565\u51fd\u6570\uff0c\u8fd9\u4e2a\u795e\u7ecf\u7f51\u7edc\u5c31\u662f\u7b56\u7565\u7f51\u7edc\uff0c\u7136\u540e\u901a\u8fc7\u7b56\u7565\u68af\u5ea6\u66f4\u65b0\u7b56\u7565\u7f51\u7edc\u4e2d\u7684\u53c2\u6570\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A04%28Actor-Critic%E7%AE%97%E6%B3%95%29/","title":"Actor-Critic\u7b97\u6cd5","text":"<p>Actor\u662f\u7b56\u7565\u7f51\u7edc\u7528\u6765\u63a7\u5236agent\u8fd0\u52a8\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u8fd0\u52a8\u5458\uff1bCritic\u662f\u4ef7\u503c\u7f51\u7edc\u7528\u6765\u7ed9\u52a8\u4f5c\u6253\u5206\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u88c1\u5224\u3002\u8fd9\u4e2a\u7b97\u6cd5\u76f8\u5f53\u4e8e\u628a\u524d\u9762\u5b66\u4e60\u5230\u7684\u4ef7\u503c\u5b66\u4e60\u548c\u7b56\u7565\u5b66\u4e60\u8fdb\u884c\u7ed3\u5408\u7684\u4e00\u79cd\u65b9\u6cd5\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A04%28Actor-Critic%E7%AE%97%E6%B3%95%29/#policy-networkactor","title":"Policy Network(Actor)","text":"<p>\u5c31\u662f\u524d\u9762\u8bf4\u7684\u7b56\u7565\u51fd\u6570\uff0c\u53ef\u4ee5\u8bb0\u4f5c\uff1a\\(\\pi(a|s;\\theta)\\)\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u7528\u6765\u770b\u4f5c\u505a\u8fd0\u52a8\u7684\u8fd0\u52a8\u5458\u3002 </p> <p>\u4e0a\u56fe\u5c31\u662f\u524d\u9762\u6240\u8bf4\u7684\u7b56\u7565\u51fd\u6570\u7684\u4f5c\u7528\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A04%28Actor-Critic%E7%AE%97%E6%B3%95%29/#value-networkcritic","title":"Value Network(Critic)","text":"<p>\u8fd9\u4e2a\u4e5f\u5c31\u662f\u524d\u9762\u6240\u8bf4\u7684\u4ef7\u503c\u5b66\u4e60\uff0c\u53ef\u4ee5\u8bb0\u4f5c\uff1a\\(q(s,a;w)\\)\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u7528\u6765\u770b\u4f5c\u7ed9\u8fd0\u52a8\u5458\u52a8\u4f5c\u6253\u5206\u7684\u88c1\u5224\u3002 </p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A04%28Actor-Critic%E7%AE%97%E6%B3%95%29/#actor-critic-method","title":"Actor-Critic Method","text":"<p>\u4e0a\u9762\u4e24\u79cd\u7f51\u7edc\u53ef\u4ee5\u540c\u65f6\u8fdb\u884c\u8bad\u7ec3\u5171\u4eab\u53c2\u6570\uff0c\u4e5f\u53ef\u4ee5\u5355\u72ec\u8bad\u7ec3\u3002\u540c\u65f6\u8fdb\u884c\u8bad\u7ec3\u5c31\u53eb\u505aActor-Critic\u65b9\u6cd5\u3002\u4e0a\u9762\u4e24\u4e2a\u7f51\u7edc\u4e2d\u6211\u4eec\u9700\u8981\u8bad\u7ec3\u4e24\u4e2a\u53c2\u6570\\(\\theta\\)\u548c\\(w\\)\u3002\u8fd9\u4e2a\u65b9\u6cd5\u7684\u793a\u610f\u56fe\u5982\u4e0b\u6240\u793a\uff1a </p> <p>\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\uff1a\u8fd0\u52a8\u5458\u505a\u51fa\u4e00\u4e2a\u52a8\u4f5cAction(a)\u4e4b\u540e\uff0c\u88c1\u5224\u7f51\u7edc(critical)\u6839\u636e\u5f53\u524d\u7684State(s)\u751f\u6210\u4e00\u4e2a\u4ef7\u503cValue(q)\u3002\u7136\u540e\u88c1\u5224\u628a\u5206\u6570\u544a\u8bc9\u8fd0\u52a8\u5458\uff0c\u8fd0\u52a8\u5458\u77e5\u9053\u5206\u6570\u4e4b\u540e\u5c31\u80fd\u60f3\u529e\u6cd5\u6539\u8fdb\u81ea\u5df1\u4e86\u3002\u4f46\u662f\u8fd0\u52a8\u5458\u6539\u8fdb\u53ea\u662f\u6839\u636e\u88c1\u5224\u7684\u5206\u6570\uff0c\u5982\u679c\u88c1\u5224\u7684\u6c34\u5e73\u8f83\u4f4e\uff0c\u53ef\u80fd\u4e0d\u4f1a\u6709\u7279\u522b\u5927\u7684\u8fdb\u6b65\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u8981\u8ba9\u88c1\u5224\u4e0d\u65ad\u8ddf\u65b0\u4ed6\u7684\u6253\u5206\u80fd\u529b\u3002\u6240\u4ee5\u88c1\u5224\u8981\u9760\u5956\u52b1r\u6765\u63d0\u9ad8\u6253\u5206\u6c34\u5e73\u3002</p>"},{"location":"blogs/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A04%28Actor-Critic%E7%AE%97%E6%B3%95%29/#_1","title":"\u603b\u7ed3\u7b97\u6cd5","text":"<p>\u8fd9\u4e2a\u7b97\u6cd5\u7684\u5927\u81f4\u5b9e\u73b0\u601d\u8def\u662f\uff1a</p> <ul> <li>\u9996\u5148\u662f\u89c2\u6d4b\u5230\u4e00\u4e2a\u65e7\u7684\u52a8\u4f5c\\(s_t\\)\uff0c\u7136\u540e\u6839\u636e\u7b56\u7565\u7f51\u7edc\\(a \\sim \\pi(\\cdot |s_t;\\theta_t)\\)\uff0c\u6765\u8ba1\u7b97\u6982\u7387\u5206\u5e03\uff0c\u7136\u540e\u6839\u636e\u8ba1\u7b97\u51fa\u6765\u7684\u6982\u7387\u5206\u5e03\u968f\u673a\u62bd\u53d6\u51fa\u4e00\u4e2a\u72b6\u6001\\(a_t\\)\u3002</li> <li>\u7136\u540e\u6267\u884c\u52a8\u4f5c\\(a_t\\)\uff0c\u7136\u540e\u73af\u5883\u4f1a\u544a\u8bc9\u6211\u4eec\u65b0\u7684\u72b6\u6001\\(s_{t+1}\\)\u548c\u5956\u52b1\\(r_t\\)\u3002</li> <li>\u62ff\u65b0\u7684\u72b6\u6001\\(s_{t+1}\\)\u4f5c\u4e3a\u8f93\u5165\u3002\u7136\u540e\u7528\u7b56\u7565\u7f51\u7edc\u8ba1\u7b97\u51fa\u65b0\u7684\u6982\u7387\uff0c\u7136\u540e\u8ba1\u7b97\u51fa\u65b0\u7684\u52a8\u4f5c\\(\\hat{a}_{t+1}\\)\uff0c\u8fd9\u4e2a\u52a8\u4f5c\u53ea\u662f\u4e00\u4e2a\u5047\u60f3\u7684\u52a8\u4f5c\uff0c\u62ff\u6765\u7b97\u4e00\u4e0bq\u503c\u3002</li> <li>\u7136\u540e\u7b97\u4e24\u6b21\u4ef7\u503c\u7f51\u7edc\u7684\u8f93\u51fa\\(q_t=q(s_t,a_t;w_t)\\)\u548c\\(q_{t+1}=q(s_{t+1,\\hat{a}_{t+1}};w_t)\\)\uff0c\\(\\hat{a}_{t+1}\\)\u8fd9\u4e2a\u52a8\u4f5c\u5e76\u4e0d\u4f1a\u771f\u6b63\u7684\u6267\u884c\uff0c\u53ea\u662f\u8fd9\u91cc\u7528\u6765\u8ba1\u7b97\u3002</li> <li>\u7136\u540e\u5728\u6765\u8ba1\u7b97TD error\uff1a\\(\\delta_t=q_t-(r_t+\\gamma\\cdot q_{t+1})\\)</li> <li>\u5bf9\u4ef7\u503c\u7f51\u7edc\u6c42\u5bfc\uff0c\\(d_{w,t}=\\frac{\\partial q(s_t,a_t;w)}{\\partial w}|_{w=w_t}\\)</li> <li>\u66f4\u65b0\u4ef7\u503c\u7f51\u7edc\uff1a\\(w_{t+1}=w_t-\\alpha \\cdot \\delta_t \\cdot d_{w,t}\\)</li> <li>\u5bf9\u7b56\u7565\u7f51\u7edc\u6c42\u5bfc\uff1a\\(d_{\\theta,t}=\\frac{\\partial{ln(\\pi(a_t|s_t,\\theta))}}{\\partial \\theta} |_{\\theta=\\theta_t}\\)</li> <li>\u66f4\u65b0\u7b56\u7565\u7f51\u7edc\uff1a\\(\\theta_{t+1}=\\theta_t+\\beta \\cdot q_t \\cdot d_{\\theta,t}\\)</li> </ul>"},{"location":"blogs/%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E8%BF%90%E8%A1%8CDocker/","title":"\u666e\u901a\u7528\u6237\u6743\u9650\u8fd0\u884cDocker","text":""},{"location":"blogs/%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E8%BF%90%E8%A1%8CDocker/#docker_1","title":"\u5b89\u88c5Docker","text":"<p>Docker\u7684\u5b89\u88c5\u6bd4\u8f83\u7b80\u5355\uff0c\u5728Docker\u5b98\u7f51\u5df2\u7ecf\u7ed9\u51fa\u4e86\u5177\u4f53\u7684\u65b9\u6848\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528apt\u5b89\u88c5 <pre><code># Add Docker's official GPG key:\nsudo apt-get update\nsudo apt-get install ca-certificates curl\nsudo install -m 0755 -d /etc/apt/keyrings\nsudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n\n# Add the repository to Apt sources:\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\n  $(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\") stable\" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\nsudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre> \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528<code>sudo docker pull hello-world</code>\u547d\u4ee4\u62c9\u53d6\u955c\u50cf\uff0c\u56fd\u5185\u955c\u50cf\u901f\u5ea6\u8f83\u6162\uff0c\u53ef\u4ee5\u4f7f\u7528\u963f\u91cc\u4e91\u8fdb\u884c\u955c\u50cf\u52a0\u901f\u3002</p>"},{"location":"blogs/%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E8%BF%90%E8%A1%8CDocker/#_1","title":"\u7ed9\u5f53\u524d\u7528\u6237\u6dfb\u52a0\u6743\u9650","text":"<p>\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u76f4\u63a5docker\u547d\u4ee4\u53ef\u80fd\u4f1a\u63d0\u793a\u5f53\u524d\u7528\u6237\u7684\u6743\u9650\u4e0d\u591f\uff0c\u9700\u8981\u4f7f\u7528root\u7528\u6237\u6743\u9650\uff0c\u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u8bbe\u7f6e\u5f53\u524d\u7528\u6237\u7684\u6743\u9650\u3002</p> <ul> <li>\u521b\u5efaDocker\u7528\u6237\u7ec4(\u5982\u679c\u8be5\u7528\u6237\u7ec4\u5df2\u521b\u5efa\u8fc7\uff0c\u5219\u4f1a\u63d0\u793a\u8be5\u7528\u6237\u7ec4\u5df2\u5b58\u5728) <pre><code>sudo groupadd docker\n</code></pre></li> <li>\u6dfb\u52a0\u5f53\u524d\u7528\u6237\u5230Docker\u7684\u7528\u6237\u7ec4\uff0c<code>usermod</code>\u7528\u6765\u4fee\u6539\u7528\u6237\u8d26\u53f7\uff0c\u66f4\u6539\u7528\u6237\u5c5e\u6027\uff0c<code>-aG</code>\u547d\u4ee4\u7684\u4e24\u4e2a\u9009\u9879\uff0c-a\u8868\u793aappend\uff0c\u8ffd\u52a0\u7528\u6237\u5230\u5f53\u524d\u7528\u6237\u7ec4\u3002<code>-G</code>\u5141\u8bb8\u6307\u5b9a\u7528\u6237\u5e94\u8be5\u88ab\u6dfb\u52a0\u5230\u7684\u9644\u52a0\u7ec4\u3002\u8fd9\u4e0d\u4f1a\u66f4\u6539\u7528\u6237\u7684\u4e3b\u7ec4\uff0c\u53ea\u662f\u5c06\u7528\u6237\u6dfb\u52a0\u5230\u6307\u5b9a\u7684\u7ec4\u4e2d\u3002$USER\u6307\u7684\u662f\u5f53\u524d\u7528\u6237\u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\u8981\u6dfb\u52a0\u7684\u7528\u6237\u540d\u3002 <pre><code>sudo usermod -aG docker $USER\n</code></pre></li> <li>\u66f4\u65b0\u5e76\u6fc0\u6d3b\u7ec4\u6743\u9650 <pre><code>newgrp docker\n</code></pre></li> </ul> <p>\u4e4b\u540e\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528<code>docker</code>\u547d\u4ee4\uff0c\u800c\u4e0d\u7528\u5728\u524d\u9762\u52a0<code>sudo</code></p>"}]}